# 双亲委派机制

[toc]



## 类加载器是什么

类加载器是一个对象，可以将字节码加载为JVM中的一个对象。（注：字节码是Java认识的代码，通常存放在`.class`文件中）

类加载器有3种：

1. 根类加载器（bootstrap classloader）：负责加载核心的类，比如`java.lang.*`下的jar包。

2. 扩展类加载器（ext classloader）：加载`JAVAHOME`下`jre/lib/ext`目录下的jar包。

3. 应用类加载器（AppClassLoader）：加载`classpath`下的类。

   补充：`classpath`用于指定JVM运行时搜索文件的位置，**可以自己定义！**

除此以外，还有自定义类加载器。它们之间的继承关系如下：

```
根类加载器
    ↑
    |
    |
扩展类加载器
    ↑
    |
    |
应用类加载器
    ↑
    |
    |
自定义类加载器
```



## 什么是双亲委派模式

1. 如果一个类加载器收到类加载请求后，它会首先委托父类的类加载器去加载类，依次递归。

2. 如果父类没法完成加载，再由自己实现类加载。

个人认为，**父委派模式**或许更能描述这种情况。因为继承关系中，不存在`FatherClassLoader`和`MatherClassLoader`。



## 双亲委派的好处

1. 防止核心代码API被篡改：如果用户自定义的类加载器加载核心代码，则会出现各种隐患。
2. 避免类被重复加载。
