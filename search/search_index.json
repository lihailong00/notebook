{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\u6653\u9f99\u5b66\u4e60\u7b14\u8bb0","text":"<p>\u6b22\u8fce\u6765\u5230\u6653\u9f99\u7684\u4e2a\u4eba\u7f51\u7ad9\u3002</p> <p>\u7f51\u7ad9\u5305\u542b\u4e2a\u4eba\u6240\u6709\u7684\u7f16\u7a0b\u5b66\u4e60\u8d44\u6599\u3002</p> <p>\u76ee\u524d\u5f88\u591a\u8d44\u6599\u6682\u672a\u66f4\u65b0\uff0c\u540e\u7eed\u4f1a\u4e0d\u65ad\u8865\u5145~</p> <p>\u6b22\u8fce\u5173\u6ce8\u4e2a\u4eba\u4ea4\u6d41\u5e73\u53f0\uff1a</p> <p>LeetCode\u5c0f\u5c9b</p> <p>\u963fB\u5c0f\u7ad9</p>"},{"location":"B%E7%AB%99%E5%88%86%E4%BA%AB/%E4%BA%86%E4%B8%8D%E8%B5%B7%E7%9A%84GitHub%E9%A1%B9%E7%9B%AE/%E4%BB%A3%E7%90%86%E6%B1%A0/","title":"\u4ee3\u7406\u6c60","text":"<p>[toc]</p>"},{"location":"B%E7%AB%99%E5%88%86%E4%BA%AB/%E4%BA%86%E4%B8%8D%E8%B5%B7%E7%9A%84GitHub%E9%A1%B9%E7%9B%AE/%E4%BB%A3%E7%90%86%E6%B1%A0/#_2","title":"\u4ee3\u7406\u6c60","text":""},{"location":"B%E7%AB%99%E5%88%86%E4%BA%AB/%E6%8A%A2%E8%8F%9C/igun%E6%8A%A2%E8%8F%9C%E8%84%9A%E6%9C%AC/","title":"igun\u62a2\u83dc\u811a\u672c","text":"<p>[toc]</p>"},{"location":"B%E7%AB%99%E5%88%86%E4%BA%AB/%E6%8A%A2%E8%8F%9C/igun%E6%8A%A2%E8%8F%9C%E8%84%9A%E6%9C%AC/#playwright","title":"playwright\u662f\u4ec0\u4e48","text":"<p>\u5b83\u7c7b\u4f3cselenium\uff0c\u53ef\u4ee5\u6a21\u62df\u4eba\u70b9\u51fb\u7f51\u9875\u3002</p>"},{"location":"B%E7%AB%99%E5%88%86%E4%BA%AB/%E6%8A%A2%E8%8F%9C/igun%E6%8A%A2%E8%8F%9C%E8%84%9A%E6%9C%AC/#_1","title":"\u914d\u955c\u50cf\u6e90","text":"<p>\u963f\u91cc\uff1ahttp://mirrors.aliyun.com/pypi/simple/</p> <p>\u6e05\u534e\uff1ahttps://pypi.tuna.tsinghua.edu.cn/simple/</p>"},{"location":"B%E7%AB%99%E5%88%86%E4%BA%AB/%E6%8A%A2%E8%8F%9C/igun%E6%8A%A2%E8%8F%9C%E8%84%9A%E6%9C%AC/#playwright_1","title":"\u5b89\u88c5playwright","text":"<p>\u6761\u4ef6\uff1a</p> <p>python3.9 </p> <p>pip23.0</p> <pre><code># \u5b89\u88c5playwright 1.32.1\npip install playwright\n# \u5b89\u88c5chromium\uff0cfirefox\u7b49\u9a71\u52a8\uff08\u5b89\u88c5\u6709\u70b9\u6162\uff0c\u6211\u4e5f\u6ca1\u529e\u6cd5~\uff09\npython -m playwright install\n</code></pre>"},{"location":"B%E7%AB%99%E5%88%86%E4%BA%AB/%E6%8A%A2%E8%8F%9C/igun%E6%8A%A2%E8%8F%9C%E8%84%9A%E6%9C%AC/#_2","title":"\u81ea\u52a8\u751f\u6210\u4ee3\u7801","text":"<p><code>playwright codegen</code>\u3002</p>"},{"location":"B%E7%AB%99%E5%88%86%E4%BA%AB/%E6%8A%A2%E8%8F%9C/igun%E6%8A%A2%E8%8F%9C%E8%84%9A%E6%9C%AC/#_3","title":"\u7ed9\u9e3d\u9e3d\u70b9\u8d5e","text":"<pre><code>import asyncio\n\nfrom playwright.async_api import Playwright, async_playwright, expect\n\n\nasync def run(playwright: Playwright) -&gt; None:\n    browser = await playwright.chromium.launch(headless=False)\n    context = await browser.new_context()\n    page = await context.new_page()\n    await page.goto(\"http://104.208.106.146/\")\n    for i in range(100):\n        await page.locator(\"img\").nth(1).click()\n        await asyncio.sleep(2)\n    # ---------------------\n    await context.close()\n    await browser.close()\n\n\nasync def main() -&gt; None:\n    async with async_playwright() as playwright:\n        await run(playwright)\n\n\nasyncio.run(main())\n</code></pre>"},{"location":"B%E7%AB%99%E5%88%86%E4%BA%AB/%E6%8A%A2%E8%8F%9C/igun%E6%8A%A2%E8%8F%9C%E8%84%9A%E6%9C%AC/#_4","title":"\u6a21\u62df\u767b\u5f55","text":"<p>\u4eba\u4e3a\u8bc6\u522b\u9a8c\u8bc1\u7801</p> <pre><code>import asyncio\n\nfrom playwright.async_api import Playwright, async_playwright, expect\n\n\nasync def run(playwright: Playwright) -&gt; None:\n    browser = await playwright.chromium.launch(headless=False)\n    context = await browser.new_context()\n    page = await context.new_page()\n    await page.goto(\"http://104.208.106.146/\")\n    await page.get_by_role(\"link\", name=\"\u767b\u5f55\").click()\n    await page.get_by_role(\"group\", name=\"\u7528\u6237\u540d\").get_by_role(\"textbox\").click()\n    await page.get_by_role(\"group\", name=\"\u7528\u6237\u540d\").get_by_role(\"textbox\").fill(\"123\")\n    await page.locator(\"input[type=\\\"password\\\"]\").click()\n    await page.locator(\"input[type=\\\"password\\\"]\").fill(\"123\")\n    cd = input('\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801: ')\n    await page.get_by_role(\"group\", name=\"\u9a8c\u8bc1\u7801\").get_by_role(\"textbox\").click()\n    await page.get_by_role(\"group\", name=\"\u9a8c\u8bc1\u7801\").get_by_role(\"textbox\").fill(cd)\n    page.once(\"dialog\", lambda dialog: dialog.dismiss())\n    await page.get_by_role(\"button\", name=\"\u767b\u5f55\").click()\n    await page.get_by_role(\"link\", name=\"\u53bb\u9009\u83dc\").click()\n\n    for i in range(100):\n        page.once(\"dialog\", lambda dialog: dialog.dismiss())\n        await page.locator('//*[@id=\"app\"]/div/div[1]/div[3]/div/div[1]/div/table/tbody/tr[17]/td[6]/div/button').click()\n        await asyncio.sleep(5)\n\n    # ---------------------\n    await context.close()\n    await browser.close()\n\n\nasync def main() -&gt; None:\n    async with async_playwright() as playwright:\n        await run(playwright)\n\n\nasyncio.run(main())\n</code></pre> <p>\u5b89\u88c5ddddocr</p> <p>\u7248\u672c\u53f7\u4e3a\uff1a 1.4.7</p> <pre><code></code></pre>"},{"location":"B%E7%AB%99%E5%88%86%E4%BA%AB/%E8%AE%A1%E7%BD%91/%E5%A6%82%E4%BD%95%E8%AE%A9%E5%AD%A6%E6%A0%A1%E6%88%90%E4%B8%BA%E4%B8%96%E7%95%8C%E5%8F%8C%E4%B8%80%E6%B5%81%E5%A4%A7%E5%AD%A6/","title":"\u5982\u4f55\u8ba9\u5b66\u6821\u6210\u4e3a\u4e16\u754c\u53cc\u4e00\u6d41\u5927\u5b66","text":"<p>[toc]</p>"},{"location":"B%E7%AB%99%E5%88%86%E4%BA%AB/%E8%AE%A1%E7%BD%91/%E5%A6%82%E4%BD%95%E8%AE%A9%E5%AD%A6%E6%A0%A1%E6%88%90%E4%B8%BA%E4%B8%96%E7%95%8C%E5%8F%8C%E4%B8%80%E6%B5%81%E5%A4%A7%E5%AD%A6/#_2","title":"\u5199\u5728\u524d\u9762","text":"<p>\u672c\u6559\u7a0b\u5206\u4e3a\u7406\u8bba\u7bc7\u548c\u5b9e\u6218\u7bc7\uff0c\u7406\u8bba\u548c\u5b9e\u6218\u7684\u5173\u7cfb\u4e0d\u5927\uff0c\u4f46\u662f\u7406\u89e3\u7406\u8bba\u53ef\u4ee5\u52a0\u6df1\u5bf9\u5b9e\u8df5\u7684\u8ba4\u8bc6\u3002\u5982\u679c\u8ffd\u6c42\u901f\u5ea6\uff0c\u53ea\u9700\u8981\u770b\u5b9e\u6218\u7bc7\u5373\u53ef\u3002</p>"},{"location":"B%E7%AB%99%E5%88%86%E4%BA%AB/%E8%AE%A1%E7%BD%91/%E5%A6%82%E4%BD%95%E8%AE%A9%E5%AD%A6%E6%A0%A1%E6%88%90%E4%B8%BA%E4%B8%96%E7%95%8C%E5%8F%8C%E4%B8%80%E6%B5%81%E5%A4%A7%E5%AD%A6/#_3","title":"\u524d\u7f6e\u77e5\u8bc6","text":"<p>\u5173\u4e8e\u7406\u8bba\u7bc7\uff1a\u6700\u597d\u6709\u4e00\u70b9\u8ba1\u7b97\u673a\u7f51\u7edc\u7684\u77e5\u8bc6\uff0c\u6ca1\u6709\u4e5f\u6ca1\u5173\u7cfb\uff0c\u6211\u4f1a\u5206\u4eab\u4e00\u4e9b\u7b80\u5355\u7684\u8ba1\u7b97\u673a\u7f51\u7edc\u7684\u3010\u57df\u540d\u89e3\u6790\u3011\u76f8\u5173\u77e5\u8bc6\u3002</p> <p>\u5173\u4e8e\u5b9e\u6218\u7bc7\uff1a</p> <pre><code>1. \u5982\u679c\u53ea\u60f3\u5728\u672c\u5730\u4fee\u6539\u57df\u540d\u6620\u5c04\uff0c\u90a3\u4e48\u4e0d\u9700\u8981\u4efb\u4f55\u77e5\u8bc6\u3002\n1. \u5982\u679c\u6dfb\u52a0\u8fdc\u7a0b\u57df\u540d\uff0c\u5219\u9700\u8981\u4e86\u89e3Linux\u7cfb\u7edf\u7684\u4f7f\u7528\uff08\u4e86\u89e3\u5e38\u89c1\u7684\u6307\u4ee4\u5373\u53ef\uff09\uff0c\u6700\u597d\u81ea\u5df1\u624b\u91cc\u6709\u4e00\u53f0\u3010\u5177\u6709\u516c\u7f51ip\u7684\u4e91\u670d\u52a1\u5668\u3011\uff0c\u901a\u5e38\u5728\u4e91\u670d\u52a1\u5668\u5382\u5546\u8d2d\u4e70\u7684\u670d\u52a1\u5668\u90fd\u6709\u516c\u7f51ip\uff0c\u8fd8\u9700\u8981\u82b1\u51e0\u5143\u5230\u51e0\u5341\u5143\u79df\u8d41\u4e00\u4e2a\u57df\u540d\uff08\u901a\u5e38\u671f\u9650\u4e3a1\u5e74\uff09\uff0c\u8fd8\u9700\u8981\u57df\u540d\u5907\u6848\uff08\u514d\u8d39\uff0c\u4f46\u662f\u524d\u540e\u5f97\u82b1\u5341\u51e0\u5929\u7b49\u5f85\u5ba1\u6279\uff09\n</code></pre>"},{"location":"B%E7%AB%99%E5%88%86%E4%BA%AB/%E8%AE%A1%E7%BD%91/%E5%A6%82%E4%BD%95%E8%AE%A9%E5%AD%A6%E6%A0%A1%E6%88%90%E4%B8%BA%E4%B8%96%E7%95%8C%E5%8F%8C%E4%B8%80%E6%B5%81%E5%A4%A7%E5%AD%A6/#_4","title":"\u80fd\u5b66\u5230\u4ec0\u4e48","text":"<ol> <li>\u8ba1\u7b97\u673a\u7f51\u7edc\u4e2d\u57df\u540d\u89e3\u6790\u7684\u8fc7\u7a0b\u3002</li> <li>\u6b63/\u53cd \u5411\u4ee3\u7406\u7684\u7b80\u5355\u6848\u4f8b\u3002\uff08NGINX\uff09</li> <li>~~\u88c513~~\u3002</li> </ol>"},{"location":"B%E7%AB%99%E5%88%86%E4%BA%AB/%E8%AE%A1%E7%BD%91/%E5%A6%82%E4%BD%95%E8%AE%A9%E5%AD%A6%E6%A0%A1%E6%88%90%E4%B8%BA%E4%B8%96%E7%95%8C%E5%8F%8C%E4%B8%80%E6%B5%81%E5%A4%A7%E5%AD%A6/#_5","title":"\u4e00\u4e9b\u4e13\u6709\u540d\u8bcd","text":"<p>\u57df\u540d\uff1a\u6211\u4eec\u7ecf\u5e38\u53eb\u4ed6\u201c\u7f51\u5740\u201d\uff0c<code>www.baidu.com</code>\u5c31\u662f\u4e00\u4e2a\u57df\u540d\u3002</p>"},{"location":"B%E7%AB%99%E5%88%86%E4%BA%AB/%E8%AE%A1%E7%BD%91/%E5%A6%82%E4%BD%95%E8%AE%A9%E5%AD%A6%E6%A0%A1%E6%88%90%E4%B8%BA%E4%B8%96%E7%95%8C%E5%8F%8C%E4%B8%80%E6%B5%81%E5%A4%A7%E5%AD%A6/#_6","title":"\u7406\u8bba\u7bc7","text":"<p>\u53ef\u4ee5\u8df3\u8fc7\u3002</p> <p>\u6df1\u5165\u6d45\u51fa\u7ecf\u5178\u9762\u8bd5\u9898\uff1a\u4ece\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165URL\u5230\u9875\u9762\u52a0\u8f7d\u53d1\u751f\u4e86\u4ec0\u4e48</p> <p>\u5bfb\u627e\u670d\u52a1\u5668\u7684\u65b9\u5f0f\uff1a\u901a\u8fc7ip\u5bfb\u627e\u670d\u52a1\u5668\u3002</p> <p>\u4e00\u4e9b\u7f51\u7ad9\u7684ip\uff1a</p> <pre><code>1. \u767e\u5ea6\uff1a`36.152.44.95`\n1. \u5357\u4eac\u519c\u4e1a\u5927\u5b66\uff1a`39.134.69.205` \n1. \u6dd8\u5b9d\uff1a`106.11.84.3`\n</code></pre> <p>dns\u670d\u52a1\u7684\u4f5c\u7528\uff1a\u57df\u540d\u8f6cip\u3002</p> <ol> <li>\u672c\u5730hosts\u6587\u4ef6\uff1a<code>C:\\Windows\\System32\\drivers\\etc</code></li> </ol> <p>\u3010\u7ec3\u4e601\u3011\u5728\u81ea\u5df1\u7684\u7535\u8111\u4e0a\u901a\u8fc7\u8bbf\u95ee <code>\u5764\u54e5.\u6211\u7231\u4f60</code>\u8bbf\u95ee\u5ed6\u96ea\u5cf0\u8001\u5e08\u7684\u7f51\u7ad9\uff08112.124.59.112\uff09\u3002</p> <p>\u3010\u7ec3\u4e602\u3011\u8ba9\u4f60\u7684\u7535\u8111\u65e0\u6cd5\u8bbf\u95ee<code>baidu.com</code></p> <ol> <li>\u8fdc\u7a0bdns\u670d\u52a1\u5668\uff1a\u641c\u7d22windows10 \u5982\u4f55\u8bbe\u7f6edns\u3002\u518d\u5728\u547d\u4ee4\u884c\u4e2d\u8f93\u5165\uff1a<code>ipconfig /flushdns</code>\u3002\u65e0\u6cd5\u8bbf\u95ee\u7f51\u5740\uff0c\u4f46\u662f\u53ef\u4ee5\u901a\u8fc7ip\u8bbf\u95ee\u767e\u5ea6\u3002(36.152.44.95)</li> </ol> <p>\u7b2c2\u6b65\u63a8\u8350\u5728\u624b\u673a\u4e0a\u89c2\u770b\u3002</p>"},{"location":"B%E7%AB%99%E5%88%86%E4%BA%AB/%E8%AE%A1%E7%BD%91/%E5%A6%82%E4%BD%95%E8%AE%A9%E5%AD%A6%E6%A0%A1%E6%88%90%E4%B8%BA%E4%B8%96%E7%95%8C%E5%8F%8C%E4%B8%80%E6%B5%81%E5%A4%A7%E5%AD%A6/#_7","title":"\u5b9e\u6218\u7bc7","text":""},{"location":"B%E7%AB%99%E5%88%86%E4%BA%AB/%E8%AE%A1%E7%BD%91/%E5%A6%82%E4%BD%95%E8%AE%A9%E5%AD%A6%E6%A0%A1%E6%88%90%E4%B8%BA%E4%B8%96%E7%95%8C%E5%8F%8C%E4%B8%80%E6%B5%81%E5%A4%A7%E5%AD%A6/#_8","title":"\u672c\u5730","text":""},{"location":"B%E7%AB%99%E5%88%86%E4%BA%AB/%E8%AE%A1%E7%BD%91/%E5%A6%82%E4%BD%95%E8%AE%A9%E5%AD%A6%E6%A0%A1%E6%88%90%E4%B8%BA%E4%B8%96%E7%95%8C%E5%8F%8C%E4%B8%80%E6%B5%81%E5%A4%A7%E5%AD%A6/#_9","title":"\u8fdc\u7a0b","text":"<p>\u8d2d\u4e70\u670d\u52a1\u5668\uff08\u8fd9\u91cc\u4e0d\u6f14\u793a\uff09</p> <p>\u8d2d\u4e70\u57df\u540d</p> <p>\u7b49\u5341\u51e0\u5929\u5907\u6848</p> <p>\u914d\u7f6e\u57df\u540d\u89e3\u6790\u3002</p> <p>\u6f14\u793a\u89e3\u6790<code>www.liaoxuefeng.com</code>\uff0c<code>112.124.59.112</code></p> <p>\u57fa\u4e8eLinux Ubuntu\u7cfb\u7edf\u3002</p> <p>\u5b89\u88c5nginx</p> <ol> <li>\u4f7f\u7528root\u6743\u9650\u7684\u7528\u6237\u3002</li> <li>\u66f4\u65b0\u8f6f\u4ef6\u5305\uff1a<code>apt-get update</code>\u3002</li> <li>\u5b89\u88c5Nginx\uff1a<code>apt-get install -y nginx</code>\u3002</li> <li>\u542f\u52a8Nginx\u670d\u52a1\uff1a<code>service nginx start</code>\u6216<code>systemctl start nginx</code>\u3002\uff08\u521d\u59cb\u5316\u7684docker\u5bb9\u5668\u4e2d\u6ca1\u6709<code>systemctl</code>\u547d\u4ee4\uff09</li> <li>\u67e5\u770bNginx\u662f\u5426\u5de5\u4f5c\uff1a<code>service nginx status</code>\u6216<code>systemctl status nginx</code>\u3002</li> <li>\u505c\u6b62\u8fd0\u884cnginx\uff1a<code>service nginx stop</code>\u6216<code>systemctl stop nginx</code>\u3002</li> <li>\u5220\u9664Nginx\uff1a</li> <li>\u505c\u6b62Nginx\u670d\u52a1\uff1a<code>service nginx stop</code>\u3002</li> <li>\u5220\u9664Nginx\u5305\uff1a<code>apt-get remove -y nginx</code>\u3002</li> <li>\u5220\u9664Nginx\u7684\u914d\u7f6e\u6587\u4ef6\uff1a<code>apt-get purge nginx</code>\u3002</li> <li>\u5220\u9664Nginx\u4f9d\u8d56\u9879\u548c\u65e0\u7528\u7684\u8f6f\u4ef6\u5305\uff1a<code>apt-get autoremove -y</code></li> <li>\u5982\u679c\u60f3\u5220\u6389Nginx\u7684\u65e5\u5fd7\uff0c\u6267\u884c<code>rm -rf /var/log/nginx</code>\u3002</li> </ol> <p>\u5b89\u88c5vim</p> <ol> <li><code>apt-get install -y vim</code></li> </ol> <p>\u914d\u7f6enginx\u6b63\u5411\u4ee3\u7406</p> <p>\u76ee\u5f55\uff1a/etc/nginx/sites-enabled</p> <pre><code>location / {\n    proxy_pass http://jwc.njust.edu.cn;\n}\n</code></pre> <p>\u3010\u7ec3\u4e603\u3011\u5982\u679c\u6709\u94b1\u4e14\u6709\u5174\u8da3\u7684\u8bdd\uff0c\u53ef\u4ee5\u6ce8\u518c\u4e00\u4e2a<code>xxx.\u6211\u7231\u4f60</code>\u7684\u57df\u540d\uff0c\u5e76\u5c06\u57df\u540d\u89e3\u6790\u5230\u67d0\u4e2a\u7f51\u7ad9\uff08\u53ef\u4ee5\u662f\u5b66\u6821\u7684\u7f51\u7ad9\uff0c\u4e5f\u53ef\u4ee5\u662f\u81ea\u5df1\u505a\u7684\u7f51\u7ad9\uff09\u3002</p>"},{"location":"C%2B%2B/C%2B%2017%20filesystem/","title":"C+ 17 filesystem","text":"<pre><code>/* \u529f\u80fd\u89e3\u91ca\uff1a\n * 1. \u53bb\u6307\u5b9a\u76ee\u5f55\u521b\u5efa\u4e00\u7cfb\u5217\u6587\u4ef6\n * 2. \u53bb\u6307\u5b9a\u76ee\u5f55\u5220\u9664\u4e00\u7cfb\u5217\u6587\u4ef6\n * 3. \u663e\u793a\u6307\u5b9a\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u4fe1\u606f\n * 4. \u8bfb\u53d6\u6307\u5b9a\u8def\u5f84\u7684\u6587\u4ef6\u6570\u636e\n * 5. \u5411\u6307\u5b9a\u6587\u4ef6\u5199\u5165\u6570\u636e\n * */\n\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;filesystem&gt;\nusing namespace std;\nnamespace fs = std::filesystem;\n\n// \u53bb\u6307\u5b9a\u76ee\u5f55\u521b\u5efa\u591a\u4e2a\u6587\u4ef6\nvoid createFiles(fs::path&amp; targetPath) {\n    if (!fs::is_directory(targetPath)) {\n        cerr &lt;&lt; \"\u6587\u4ef6\u76ee\u5f55\u4e0d\u5b58\u5728\uff01\" &lt;&lt; endl;\n        return;\n    }\n\n    // \u5728\u6307\u5b9a\u76ee\u5f55\u4e0b\u521b\u5efa\u6587\u4ef6\n\n    // 1. \u83b7\u53d6\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u914d\u7f6e\u6587\u4ef6 file_create_config.txt\n    fs::path configCreatePath = fs::current_path();\n\n    // \u63d0\u793a\u7528\u6237\n    string remind;\n    cout &lt;&lt; \"\u8bf7\u5728\u5f53\u524d\u9879\u76ee\u76ee\u5f55\u4e0b\u7684file_create_config.txt\u6587\u4ef6\u4e2d\u586b\u5199\u5f85\u6dfb\u52a0\u7684\u6587\u4ef6\u540d\u3002\u586b\u5199\u5b8c\u6bd5\u540e\u8f93\u5165yes\uff1a\";\n    while (cin &gt;&gt; remind, remind != \"yes\");\n\n    // \u8df3\u8f6c\u5230\u4e0a\u4e00\u7ea7\u76ee\u5f55\uff0c\u5e76\u901a\u8fc7 / \u62fc\u63a5\u8def\u5f84\n    configCreatePath = configCreatePath.parent_path() / \"file_create_config.txt\";\n\n    // 2.\u4ece\u5f53\u524d\u76ee\u5f55\u7684filein.txt\u6587\u4ef6\u4e2d\u8bfb\u53d6\u9700\u8981\u521b\u5efa\u7684\u6587\u4ef6\u540d\n    ifstream ifs;\n    ifs.open(configCreatePath);\n\n    // \u5982\u679c\u6ca1\u6709\u6743\u9650\uff0c\u5219\u4f1a\u6253\u5f00\u5931\u8d25\n    if (!ifs.is_open()) {\n        cerr &lt;&lt; \"\u914d\u7f6e\u6587\u4ef6\u8bfb\u53d6\u5931\u8d25\uff01\" &lt;&lt; endl;\n        return;\n    }\n\n    string buf;\n    ofstream ofs;\n    while (ifs &gt;&gt; buf) {\n        // \u4ece\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6587\u4ef6\u540d\uff0c\u5e76\u5728\u6307\u5b9a\u76ee\u5f55\u521b\u5efa\u8fd9\u4e9b\u6587\u4ef6\n        ofs.open(targetPath / buf);\n        ofs.close();\n        cout &lt;&lt; \"\u6210\u529f\u6dfb\u52a0\u6587\u4ef6\uff1a\" &lt;&lt; buf &lt;&lt; endl;\n    }\n    ifs.close();\n}\n\n// \u53bb\u6307\u5b9a\u76ee\u5f55\u4e0b\u5220\u9664\u591a\u4e2a\u6587\u4ef6\nvoid deleteFiles(fs::path&amp; targetPath) {\n    if (!fs::is_directory(targetPath)) {\n        cerr &lt;&lt; \"\u6587\u4ef6\u76ee\u5f55\u4e0d\u5b58\u5728\uff01\" &lt;&lt; endl;\n        return;\n    }\n\n    // \u5728\u6307\u5b9a\u76ee\u5f55\u4e0b\u5220\u9664\u6587\u4ef6\n\n    // 1. \u83b7\u53d6\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u914d\u7f6e\u6587\u4ef6 file_delete_config.txt\n    fs::path configCreatePath = fs::current_path();\n\n    // \u63d0\u793a\u7528\u6237\n    string remind;\n    cout &lt;&lt; \"\u8bf7\u5728\u5f53\u524d\u9879\u76ee\u76ee\u5f55\u4e0b\u7684file_delete_config.txt\u6587\u4ef6\u4e2d\u586b\u5199\u5f85\u5220\u9664\u7684\u6587\u4ef6\u540d\u3002\u586b\u5199\u5b8c\u6bd5\u540e\u8f93\u5165yes\u3002\";\n    while (cin &gt;&gt; remind, remind != \"yes\");\n\n    // \u8df3\u8f6c\u5230\u4e0a\u4e00\u7ea7\u76ee\u5f55\uff0c\u5e76\u901a\u8fc7 / \u62fc\u63a5\u8def\u5f84\n    configCreatePath = configCreatePath.parent_path() / \"file_delete_config.txt\";\n\n    // 2.\u4ece\u5f53\u524d\u76ee\u5f55\u7684filein.txt\u6587\u4ef6\u4e2d\u8bfb\u53d6\u9700\u8981\u521b\u5efa\u7684\u6587\u4ef6\u540d\n    ifstream ifs;\n    ifs.open(configCreatePath);\n\n    // \u5982\u679c\u6ca1\u6709\u6743\u9650\uff0c\u5219\u4f1a\u6253\u5f00\u5931\u8d25\n    if (!ifs.is_open()) {\n        cerr &lt;&lt; \"\u914d\u7f6e\u6587\u4ef6\u8bfb\u53d6\u5931\u8d25\uff01\" &lt;&lt; endl;\n        return;\n    }\n\n    string buf;\n    int count = 0;\n    while (ifs &gt;&gt; buf) {\n        // \u4ece\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6587\u4ef6\u540d\uff0c\u5e76\u5728\u6307\u5b9a\u76ee\u5f55\u5220\u9664\u8fd9\u4e9b\u6587\u4ef6\n        if (fs::remove(targetPath / buf)) {\n            cout &lt;&lt; \"\u6210\u529f\u5220\u9664\u6587\u4ef6\uff1a\" &lt;&lt; buf &lt;&lt; endl;\n            count++;\n        }\n    }\n    ifs.close();\n    cout &lt;&lt; \"\u5171\u5220\u9664\" &lt;&lt; count &lt;&lt; \"\u4e2a\u6587\u4ef6\uff01\" &lt;&lt; endl;\n}\n\n// \u663e\u793a\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\nvoid showFiles(fs::path&amp; targetPath) {\n    if (!fs::is_directory(targetPath)) {\n        cerr &lt;&lt; \"\u6587\u4ef6\u76ee\u5f55\u4e0d\u5b58\u5728\uff01\" &lt;&lt; endl;\n        return;\n    }\n\n    // \u83b7\u53d6\u6307\u5b9a\u76ee\u5f55\u7684\u5185\u5bb9\n    fs::directory_iterator iter(targetPath);\n    for (const auto&amp; it : iter) {\n        if (it.is_directory()) {\n            cout &lt;&lt; it.path().filename() &lt;&lt; endl;\n        }\n        else {\n            cout &lt;&lt; it.path().filename() &lt;&lt; \"\\t\" &lt;&lt; it.file_size() &lt;&lt; \" Byte\" &lt;&lt; endl;\n        }\n    }\n}\n\nvoid write2File(fs::path&amp; targetPath) {\n    ofstream ofs;\n    ofs.open(targetPath);\n    if (!ofs.is_open()) {\n        cerr &lt;&lt; \"\u6587\u4ef6\u4e0d\u5b58\u5728\" &lt;&lt; endl;\n        return;\n    }\n    string buf;\n    cout &lt;&lt; \"\u8bf7\u5411\u6587\u4ef6\u4e2d\u5199\u5165\u4e00\u6bb5\u6570\u636e\uff1a\";\n    cin &gt;&gt; buf;\n    ofs &lt;&lt; buf;\n    cout &lt;&lt; \"\u5199\u5165\u6210\u529f\uff01\" &lt;&lt; endl;\n    ofs.close();\n}\n\nvoid readFromFile(fs::path&amp; targetPath) {\n    ifstream ifs;\n    ifs.open(targetPath);\n    if (!ifs.is_open()) {\n        cerr &lt;&lt; \"\u6587\u4ef6\u6253\u5f00\u5931\u8d25\uff01\" &lt;&lt; endl;\n        return;\n    }\n    string buf;\n    while (getline(ifs, buf)) {\n        cout &lt;&lt; buf &lt;&lt; endl;\n    }\n}\n\nint main() {\n    while (true) {\n        cout &lt;&lt; \"=================================\" &lt;&lt; endl;\n        cout &lt;&lt; \"\u6b22\u8fce\u6765\u5230\u6587\u4ef6\u7ba1\u7406\u7cfb\u7edf\" &lt;&lt; endl;\n        cout &lt;&lt; \"1.\u53bb\u6307\u5b9a\u76ee\u5f55\u4e0b\u521b\u5efa\u591a\u4e2a\u6587\u4ef6\" &lt;&lt; endl;\n        cout &lt;&lt; \"2.\u67e5\u770b\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u4fe1\u606f\" &lt;&lt; endl;\n        cout &lt;&lt; \"3.\u53bb\u6307\u5b9a\u76ee\u5f55\u4e0b\u5220\u9664\u591a\u4e2a\u6587\u4ef6\" &lt;&lt; endl;\n        cout &lt;&lt; \"4.\u8bfb\u53d6\u6307\u5b9a\u8def\u5f84\u7684\u6587\u4ef6\u6570\u636e\" &lt;&lt; endl;\n        cout &lt;&lt; \"5.\u5199\u5165\u6307\u5b9a\u8def\u5f84\u7684\u6587\u4ef6\" &lt;&lt; endl;\n        cout &lt;&lt; \"0.\u9000\u51fa\u7cfb\u7edf\" &lt;&lt; endl;\n        cout &lt;&lt; \"=================================\" &lt;&lt; endl;\n        cout &lt;&lt; \"\u8bf7\u8f93\u5165\uff1a\";\n        string op;\n        cin &gt;&gt; op;\n\n        if (op == \"1\") {\n            fs::path targetPath;\n            cout &lt;&lt; \"\u8bf7\u8f93\u5165\u6307\u5b9a\u76ee\u5f55:\";\n            cin &gt;&gt; targetPath;\n            createFiles(targetPath);\n        }\n        else if (op == \"2\") {\n            fs::path targetPath;\n            cout &lt;&lt; \"\u8bf7\u8f93\u5165\u6307\u5b9a\u76ee\u5f55:\";\n            cin &gt;&gt; targetPath;\n            showFiles(targetPath);\n        }\n        else if (op == \"3\") {\n            fs::path targetPath;\n            cout &lt;&lt; \"\u8bf7\u8f93\u5165\u6307\u5b9a\u76ee\u5f55:\";\n            cin &gt;&gt; targetPath;\n            deleteFiles(targetPath);\n        }\n        else if (op == \"4\") {\n            fs::path targetPath;\n            cout &lt;&lt; \"\u8bf7\u8f93\u5165\u6307\u5b9a\u6587\u4ef6:\";\n            cin &gt;&gt; targetPath;\n            write2File(targetPath);\n        }\n        else if (op == \"5\") {\n            fs::path targetPath;\n            cout &lt;&lt; \"\u8bf7\u8f93\u5165\u6307\u5b9a\u6587\u4ef6:\";\n            cin &gt;&gt; targetPath;\n            readFromFile(targetPath);\n        }\n        else if (op == \"0\") {\n            break;\n        }\n        else {\n            cout &lt;&lt; \"\u9519\u8bef\u8f93\u5165\uff01\u8bf7\u91cd\u65b0\u8f93\u5165\u3002\" &lt;&lt; endl;\n        }\n        system(\"pause\");\n        system(\"cls\");\n    }\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%20IO/","title":"C++ IO","text":"<p>[toc]</p>"},{"location":"C%2B%2B/C%2B%2B%20IO/#io","title":"\u6587\u4ef6IO","text":"<p>\u53c2\u8003\u5982\u4e0b\u4ee3\u7801\u5373\u53ef\u3002\u4ee5\u4e0b\u6848\u4f8b\u4ec5\u6d89\u53ca\u5230\u65e5\u5e38\u4f7f\u7528\u7684IO\uff0c\u5982\u679c\u8981\u5173\u6ce8\u66f4\u591a\u7ec6\u8282\uff0c\u8fd8\u9700\u8981\u8c37\u6b4c\u3002</p> <pre><code>/* \u4e00\u4e9b\u4e2a\u4eba\u7406\u89e3\n * 1. &lt;&lt; \u6307\u5411\u7684\u65b9\u5411\u5c31\u662f\u6570\u636e\u4f20\u8f93\u7684\u65b9\u5411\u3002\u53c2\u8003\u5982\u4e0b\u6848\u4f8b\uff1a\n *      a) ifs &gt;&gt; buf   \u6570\u636e\u4eceifs\u5bf9\u8c61\u4e2d\u6d41\u5165\u5185\u5b58buf\n *      b) ofs &lt;&lt; buf   \u6570\u636e\u4ecebuf\u6d41\u5165ofs\u5bf9\u8c61\u4e2d\n * 2. ifstream\u548cofstream\u7684\u533a\u522b\n *      a) \u6211\u4eec\u5c06\u5185\u5b58\u653e\u5728\u201c\u5185\u90e8\u201d\uff0c\u6587\u4ef6\u653e\u5728\u201c\u5916\u90e8\u201d\uff08\u56e0\u4e3a\u6587\u4ef6\u5b58\u653e\u5728\u786c\u76d8\u4e0a\uff09\n *      b) i \u8868\u793a \u201c\u5165\u201d\uff0c\u4e5f\u5c31\u662f\u4ece\u5916\u5230\u5185\uff0c\u4e5f\u5373 \u5199\u5165\u5185\u5b58\uff08\u6216\u8bfb\u53d6\u6587\u4ef6\uff09\n *      c) o \u8868\u793a \u201c\u51fa\u201d\uff0c\u4e5f\u5c31\u662f\u4ece\u5185\u5230\u5916\uff0c\u4e5f\u5373 \u4ece\u5185\u5b58\u53d6\u51fa\uff08\u6216\u5199\u5165\u6587\u4ef6\uff09\n * */\n\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nvoid outMemory() {\n    ofstream ofs;\n    string filePath = \"D:\\\\mydoc\\\\codes\\\\C++\\\\clion\\\\example.txt\";\n\n    // \u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u5219\u521b\u5efa\u8be5\u6587\u4ef6\uff1b\u5426\u5219\u76f4\u63a5\u6253\u5f00\u8be5\u6587\u4ef6\n    // ios::out     \u6e05\u7a7a\u6587\u4ef6\u5185\u5bb9\uff0c\u91cd\u65b0\u5199\u5165\u6570\uff08\u636e\u9ed8\u8ba4\u503c\uff0c\u53ef\u4ee5\u4e0d\u5199\uff09\n    // ios::app     \u5728\u6587\u4ef6\u672b\u5c3e\u8ffd\u52a0\u5185\u5bb9\n    ofs.open(filePath, ios::out);\n\n    // \u68c0\u6d4b\u6587\u4ef6\u662f\u5426\u6253\u5f00\u6210\u529f\n    // \u5982\u679c1. \u76ee\u5f55\u4e0d\u5b58\u5728 2. \u78c1\u76d8\u5df2\u6ee1 3. \u6ca1\u6709\u6743\u9650 \u5219\u4f1a\u6253\u5f00\u5931\u8d25\n    if (!ofs.is_open()) {\n        cerr &lt;&lt; \"\u6587\u4ef6\u6253\u5f00\u5931\u8d25\uff01\" &lt;&lt; endl;\n        return;\n    }\n\n    cout &lt;&lt; \"\u6587\u4ef6\u6253\u5f00\u6210\u529f\uff01\u5f00\u59cb\u5411\u6587\u4ef6\u4e2d\u5199\u5165\u6570\u636e\u3002\" &lt;&lt; endl;\n\n    // \u5411\u6587\u4ef6\u4e2d\u5199\u5165\u6570\u636e\n    ofs &lt;&lt; \"hello, world!\" &lt;&lt; endl;\n\n    ofs.close();\n}\n\nvoid inMemory() {\n    ifstream ifs;\n    string filePath = \"D:\\\\mydoc\\\\codes\\\\C++\\\\clion\\\\example.txt\";\n\n    ifs.open(filePath);\n\n    if (!ifs.is_open()) {\n        cerr &lt;&lt; \"\u6587\u4ef6\u6253\u5f00\u5931\u8d25\uff01\" &lt;&lt; endl;\n        return;\n    }\n\n    // \u5c06\u6587\u4ef6\u4e2d\u7684\u6570\u636e\u5199\u5165\u5185\u5b58\uff0c\u518d\u6253\u5370\u5230\u663e\u793a\u5668\u4e0a\n    string buf;\n    // getline(ifs, buf)    \u6309\u884c\u8bfb\u53d6\n    // ifs &gt;&gt; buf   \u7a7a\u683c\u3001tab\u3001\u6362\u884c\u7b26 \u622a\u65ad\n    while (getline(ifs, buf)) {\n        cout &lt;&lt; buf &lt;&lt; endl;\n    }\n\n    ifs.close();\n}\n\nint main() {\n    outMemory();\n    inMemory();\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%20IO/#stringio","title":"stringIO","text":"<p>\u5199\u7b97\u6cd5\u9898\u7684\u65f6\u5019\u5076\u5c14\u4f1a\u9047\u5230\u8fd9\u79cd\u64cd\u4f5c\u3002\u5982\u679c\u5b9e\u9645\u5de5\u7a0b\u9700\u8981\u7528\u5230\u8be5\u51fd\u6570\uff0c\u5f88\u6709\u5fc5\u8981\u67e5\u627e\u76f8\u5173\u8d44\u6599\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\nusing namespace std;\n\nvoid SS() {\n    string str = \"aa bbb c ddd ee f g\";\n    // \u5c06string\u52a0\u8f7d\u5230stringstream\u6d41\u4e2d\n    stringstream ss(str);\n\n    string buf;\n    // \u6309\u7167 \u7a7a\u683c\u3001tab\u3001\u6362\u884c\u7b26 \u622a\u53d6\u5b57\u7b26\n    while (ss &gt;&gt; buf) {\n        cout &lt;&lt; \"\u8bfb\u51fa\u6570\u636e\uff1a\" &lt;&lt; buf &lt;&lt; endl;\n    }\n\n    str = \"aa\\nbbb\\nc\\nddd\\nee f\\ng\";\n    stringstream ss2(str);\n    // \u6309\u7167 \u6362\u884c\u7b26 \u622a\u53d6\u5b57\u7b26\n    while (getline(ss2, buf)) {\n        cout &lt;&lt; buf;\n    }\n}\n\nint main() {\n    SS();\n    return 0;\n}\n</code></pre> <p>\u7531\u4e8eC++\u6ca1\u6709split\u51fd\u6570\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u501f\u52a9stringstream\u5b9e\u73b0split\u529f\u80fd\u3002\u4ec5\u5728\u5199\u7b97\u6cd5\u9898\u65f6\u4f7f\u7528\uff01\u5b9e\u9645\u5de5\u7a0b\u4e2d\u4e0d\u8981\u8fd9\u4e48\u4f7f\u7528\uff01</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\nusing namespace std;\n\nvoid split() {\n    string str = \"helloAworldAthisAisAfunny!\";\n    stringstream ss(str);\n    string buf;\n    // \u81ea\u5b9a\u4e49\u5206\u9694\u7b26 A\n    while(getline(ss, buf, 'A')) {\n        cout &lt;&lt; buf &lt;&lt; endl;\n    }\n}\n\nint main() {\n    split();\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B11%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E6%A8%A1%E6%9D%BF/","title":"C++11\u53ef\u53d8\u53c2\u6570\u6a21\u677f","text":"<p>[toc]</p> <p>\u65b0\u624b\u770b\u5230\u8fd9\u4e2a\u6a21\u677f\u51fd\u6570\u53ef\u80fd\u4f1a\u975e\u5e38\u61f5\u903c\u3002\u4f46\u662f\u8bb0\u4f4f\u6a21\u677f\uff0c\u6309\u7167\u4ed6\u7684\u5199\u6cd5\u5c31\u884c\uff0c\u4e0d\u8981\u7ea0\u7ed3\u592a\u591a\u3002</p> <p>\u4ee5\u4e0b\u6848\u4f8b\u662f\u6253\u5370\u53c2\u6570\u5217\u8868\u7684\u503c\u3002</p> <pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;class T, class...Args&gt;\n// t\u662f\u53c2\u6570\u5217\u8868\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0cargs\u662f\u53c2\u6570\u5217\u8868\u7684\u5269\u4f59\u53c2\u6570\nvoid func(T&amp; t, Args&amp;...args) {\n    std::cout &lt;&lt; \"\u5269\u4f59\u53c2\u6570\u4e2a\u6570\u4e3a\uff1a\" &lt;&lt; siz &lt;&lt; \"\\n\";\n    std::cout &lt;&lt; t &lt;&lt; \"\\n\";\n    // sizeof... \u8ba1\u7b97 \u53ef\u53d8\u53c2\u6570 \u7684\u4e2a\u6570\n    if constexpr (sizeof...(args) &gt; 0) {\n        // \u7c7b\u4f3c\u9012\u5f52\u6253\u5370\u53c2\u6570\n        func(args...);\n    }\n}\n\nint main() {\n    func(2, \"*\", 4, \"+\");\n    return 0;\n}\n</code></pre> <p>\u4ee5\u4e0b\u6848\u4f8b\u9610\u8ff0\u4e86\u4e0d\u5e26\u81ea\u5b9a\u4e49\u53c2\u6570T\u7684\u533a\u522b\u3002</p> <pre><code>template&lt;class...Args&gt;\n// t\u662f\u53c2\u6570\u5217\u8868\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0cargs\u662f\u53c2\u6570\u5217\u8868\u7684\u5269\u4f59\u53c2\u6570\nvoid func(Args&amp;...args) {\n    // \u53c2\u6570\u4e2a\u6570\u5e94\u8be5\u662f4\uff0c\u56e0\u4e3a\u53c2\u6570\u5217\u8868\u4e2d\u7684\u6240\u6709\u53c2\u6570\u90fd\u5728args\u4e2d\n    std::cout &lt;&lt; \"\u53c2\u6570\u4e2a\u6570\u4e3a\uff1a\" &lt;&lt; sizeof...(args) &lt;&lt; \"\\n\";\n}\n\nint main() {\n    func(2, \"*\", 4, \"+\");\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E4%B9%8Bfunction%E7%9A%84%E4%BD%BF%E7%94%A8/","title":"C++\u4e4bfunction\u7684\u4f7f\u7528","text":"<p>[toc]</p>"},{"location":"C%2B%2B/C%2B%2B%E4%B9%8Bfunction%E7%9A%84%E4%BD%BF%E7%94%A8/#_1","title":"\u5c01\u88c5\u666e\u901a\u51fd\u6570","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nvoid test(int a, int b) {\n    std::cout &lt;&lt; \"test\u51fd\u6570\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"a=\" &lt;&lt; a &lt;&lt; \" b=\" &lt;&lt; b &lt;&lt; std::endl;\n}\n\nint main() {\n    // void\u8868\u793a\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c(int, int)\u8868\u793a\u51fd\u6570\u7684\u53c2\u6570\u5217\u8868\n    std::function&lt;void(int, int)&gt; f = test;\n    f(2, 5);\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E4%B9%8Bfunction%E7%9A%84%E4%BD%BF%E7%94%A8/#_2","title":"\u5c01\u88c5\u533f\u540d\u51fd\u6570","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nint main() {\n    std::function&lt;float(int, int)&gt; f = [](int a, int b) -&gt; float {\n        std::cout &lt;&lt; \"\u533f\u540d\u51fd\u6570\" &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"a=\" &lt;&lt; a &lt;&lt; \" b=\" &lt;&lt; b &lt;&lt; std::endl;\n        return 0.1;\n    };\n    float ret = f(2, 5);\n    std::cout &lt;&lt; \"\u8fd4\u56de\u503c\u4e3a\uff1a\" &lt;&lt; ret &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E4%B9%8Bfunction%E7%9A%84%E4%BD%BF%E7%94%A8/#_3","title":"\u5c01\u88c5\u7c7b\u6210\u5458\u51fd\u6570","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nclass Person {\npublic:\n    int printInfo(int a, float b) {\n        std::cout &lt;&lt; \"\u7c7b\u6210\u5458\u51fd\u6570\" &lt;&lt; std::endl;\n        std::cout &lt;&lt; \"a=\" &lt;&lt; a &lt;&lt; \" b=\" &lt;&lt; b &lt;&lt; std::endl;\n        return 1;\n    }\n};\n\nint main() {\n    // Person* \u662fthis\u6307\u9488\n    std::function&lt;int(Person*, int, float)&gt; f = &amp;Person::printInfo;\n    Person p;\n    int ret = f(&amp;p, 1, 2);\n    std::cout &lt;&lt; \"\u8fd4\u56de\u503c\u662f\uff1a\" &lt;&lt; ret &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E4%B9%8Bfunction%E7%9A%84%E4%BD%BF%E7%94%A8/#bind","title":"bind\u673a\u5236","text":"<p>\u5982\u679c\u6211\u4eec\u60f3\u5c06\u51fd\u6570\u5bf9\u8c61\u548c\u53c2\u6570\u7ed1\u5b9a\u5728\u4e00\u8d77\uff0c\u5f62\u6210\u4e00\u4e2a\u65b0\u7684\u5bf9\u8c61\u3002\u90a3\u4e48\u53ef\u4ee5\u4f7f\u7528<code>std::bind()</code>\u5b9e\u73b0\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nint func(int a, int b, int c) {\n    std::cout &lt;&lt; \"a=\" &lt;&lt; a &lt;&lt; \" b=\" &lt;&lt; b &lt;&lt;  \" c=\" &lt;&lt; c &lt;&lt; std::endl;\n    return a + b + c;\n}\n\nint main() {\n    auto newFunc = std::bind(func, 1, 2, 3);\n    int ret = newFunc();\n    std::cout &lt;&lt; \"ret=\" &lt;&lt; ret &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u60f3\u5c06\u51fd\u6570\u4e0e\u4e00\u90e8\u5206\u53c2\u6570\u7ed1\u5b9a\u5f62\u6210\u4e00\u4e2a\u65b0\u7684\u53c2\u6570\uff0c\u800c\u53e6\u4e00\u90e8\u5206\u53c2\u6570\u4f20\u5165\u5230\u65b0\u51fd\u6570\u7684\u53c2\u6570\u5217\u8868\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528<code>std::placeholders::_\u6570\u5b57</code>\u5b9e\u73b0\uff0c\u64cd\u4f5c\u5982\u4e0b\uff1a</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nint func(int a, int b, int c) {\n    std::cout &lt;&lt; \"a=\" &lt;&lt; a &lt;&lt; \" b=\" &lt;&lt; b &lt;&lt;  \" c=\" &lt;&lt; c &lt;&lt; std::endl;\n    return a + b + c;\n}\n\nint main() {\n    auto newFunc = std::bind(func, 1, std::placeholders::_1, std::placeholders::_2);\n    int ret = newFunc(3, 4);\n    std::cout &lt;&lt; \"ret=\" &lt;&lt; ret &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E5%AE%9E%E7%8E%B0http%E6%9C%8D%E5%8A%A1%E5%99%A8/","title":"C++\u5b9e\u73b0http\u670d\u52a1\u5668","text":"<pre><code>#include &lt;stdio.h&gt;\n// \u7f51\u7edc\u901a\u4fe1\u9700\u8981\u5305\u542b\u7684\u5934\u6587\u4ef6\uff0c\u9700\u8981\u52a0\u8f7d\u7684\u6587\u4ef6\n#include &lt;WinSock2.h&gt;\n#pragma comment(lib, \"WS2_32.lib\")\n\nvoid error_die(const char* str) {\n    perror(str);\n    exit(1);\n}\n\n/*\n* \u5b9e\u73b0\u7f51\u7edc\u7684\u521d\u59cb\u5316\uff1a\n* \u8fd4\u56de\u503c\uff1a\u670d\u52a1\u5668\u7684\u5957\u63a5\u5b57\n* \u53c2\u6570\uff1aport\uff0c\u8868\u793a\u7aef\u53e3\u53f7\u3002\u5982\u679cport\u4e3a0\uff0c\u90a3\u4e48\u81ea\u52a8\u5206\u914d\u4e00\u4e2a\u53ef\u7528\u7684\u7aef\u53e3\u3002\n*/\n\nint startup(unsigned short * port) {\n    WSADATA data;  // \u5b58\u50a8winsocket\u521d\u59cb\u5316\u540e\u5f97\u5230\u7684\u6570\u636e\n    int ret = WSAStartup(\n        MAKEWORD(1, 1),  // 1.1\u7248\u672c\u7684\u534f\u8bae\n        &amp;data);\n\n    if (ret != 0) {\n        error_die(\"WSAStartup die!\");\n    }\n\n    int server_socket = socket(PF_INET,  // \u5957\u63a5\u5b57\u7684\u7c7b\u578b\uff08\u5305\u62ec\u6587\u4ef6\u5957\u63a5\u5b57\u548c\u7f51\u7edc\u5957\u63a5\u5b57\uff0c\u8fd9\u91cc\u4f7f\u7528\u7f51\u7edc\u5957\u63a5\u5b57\uff09\n        SOCK_STREAM,  // \u6570\u636e\u6d41\n        IPPROTO_TCP);\n\n    if (server_socket == -1) {\n        // \u6253\u5370\u9519\u8bef\u63d0\u793a\uff0c\u5e76\u7ed3\u675f\u7a0b\u5e8f\n        error_die(\"socket die!\");\n    }\n\n    // \u8bbe\u7f6e\u7aef\u53e3\u53ef\u590d\u7528\n    int opt = 1;\n    ret = setsockopt(server_socket, \n        SOL_SOCKET, \n        SO_REUSEADDR, \n        (const char*)&amp;opt, \n        sizeof(opt));\n\n    if (ret == -1) {\n        error_die(\"set socket opt\");\n    }\n\n    // \u914d\u7f6e\u670d\u52a1\u5668\u7aef\u7684\u7f51\u7edc\u5730\u5740\n    struct sockaddr_in server_addr;\n    memset(&amp;server_addr, 0, sizeof(server_addr));\n    server_addr.sin_family = AF_INET;\n    // htons\u662f\u5c06\u673a\u5668\u4e2d\u7684\u6574\u578b\u8f6c\u6362\u6210\u201c\u7f51\u7edc\u5b57\u8282\u5e8f\u201d\uff08\u5927\u7aef\u6a21\u5f0f\uff09\n    // h: host  to: to  n: net  s: unsigned short  l: unsigned long\n    server_addr.sin_port = htons(*port);  // \u5f00\u653e\u7684\u7aef\u53e3\n    server_addr.sin_addr.s_addr = htonl(INADDR_ANY);  // \u6240\u6709ip\u7684\u5ba2\u6237\u7aef\u90fd\u53ef\u4ee5\u8bbf\u95ee\n\n    // \u7ed1\u5b9a\u5957\u63a5\u5b57\u548c\u5730\u5740\n    // \uff08\u4e0d\u7528\u592a\u5728\u610f\u7c7b\u578b\u8f6c\u6362\uff09\n    ret = bind(server_socket, \n        (const struct sockaddr*)&amp;server_addr, \n        sizeof(server_addr));\n\n    // \u52a8\u6001\u5206\u914d\u4e00\u4e2a\u7aef\u53e3\n    int nameLen = sizeof(server_addr);\n    if (*port == 0) {\n        ret = getsockname(server_socket, (struct sockaddr*)&amp;server_addr, &amp;nameLen);\n        if (ret &lt; 0) {\n            error_die(\"fail distributing port\");\n        }\n\n        *port = server_addr.sin_port;\n    }\n\n    if (ret == -1) {\n        error_die(\"bind error\");\n    }\n\n    // \u521b\u5efa\u76d1\u542c\u961f\u5217\n    ret = listen(server_socket, 5);\n    if (ret &lt; 0) {\n        error_die(\"listen error!\");\n    }\n    return server_socket;\n}\n\nint main() {\n    unsigned short port = 0;\n    int server_sock = startup(&amp;port);\n    printf(\"httpd\u670d\u52a1\u5668\u5df2\u7ecf\u542f\u52a8\uff0c\u6b63\u5728\u76d1\u542c%d\u7aef\u53e3\", port);\n    return 0;\n}\n</code></pre> <pre><code>#include &lt;stdio.h&gt;\n// \u7f51\u7edc\u901a\u4fe1\u9700\u8981\u5305\u542b\u7684\u5934\u6587\u4ef6\uff0c\u9700\u8981\u52a0\u8f7d\u7684\u6587\u4ef6\n#include &lt;WinSock2.h&gt;\n#pragma comment(lib, \"WS2_32.lib\")\n\nvoid error_die(const char* str) {\n    perror(str);\n    exit(1);\n}\n\n/*\n* \u5b9e\u73b0\u7f51\u7edc\u7684\u521d\u59cb\u5316\uff1a\n* \u8fd4\u56de\u503c\uff1a\u670d\u52a1\u5668\u7684\u5957\u63a5\u5b57\n* \u53c2\u6570\uff1aport\uff0c\u8868\u793a\u7aef\u53e3\u53f7\u3002\u5982\u679cport\u4e3a0\uff0c\u90a3\u4e48\u81ea\u52a8\u5206\u914d\u4e00\u4e2a\u53ef\u7528\u7684\u7aef\u53e3\u3002\n*/\n\nint startup(unsigned short * port) {\n    WSADATA data;  // \u5b58\u50a8winsocket\u521d\u59cb\u5316\u540e\u5f97\u5230\u7684\u6570\u636e\n    int ret = WSAStartup(\n        MAKEWORD(1, 1),  // 1.1\u7248\u672c\u7684\u534f\u8bae\n        &amp;data);\n\n    if (ret != 0) {\n        error_die(\"WSAStartup die!\");\n    }\n\n    int server_socket = socket(PF_INET,  // \u5957\u63a5\u5b57\u7684\u7c7b\u578b\uff08\u5305\u62ec\u6587\u4ef6\u5957\u63a5\u5b57\u548c\u7f51\u7edc\u5957\u63a5\u5b57\uff0c\u8fd9\u91cc\u4f7f\u7528\u7f51\u7edc\u5957\u63a5\u5b57\uff09\n        SOCK_STREAM,  // \u6570\u636e\u6d41\n        IPPROTO_TCP);\n\n    if (server_socket == -1) {\n        // \u6253\u5370\u9519\u8bef\u63d0\u793a\uff0c\u5e76\u7ed3\u675f\u7a0b\u5e8f\n        error_die(\"socket die!\");\n    }\n\n    // \u8bbe\u7f6e\u7aef\u53e3\u53ef\u590d\u7528\n    int opt = 1;\n    ret = setsockopt(server_socket, \n        SOL_SOCKET, \n        SO_REUSEADDR, \n        (const char*)&amp;opt, \n        sizeof(opt));\n\n    if (ret == -1) {\n        error_die(\"set socket opt\");\n    }\n\n    // \u914d\u7f6e\u670d\u52a1\u5668\u7aef\u7684\u7f51\u7edc\u5730\u5740\n    struct sockaddr_in server_addr;\n    memset(&amp;server_addr, 0, sizeof(server_addr));\n    server_addr.sin_family = AF_INET;\n    // htons\u662f\u5c06\u673a\u5668\u4e2d\u7684\u6574\u578b\u8f6c\u6362\u6210\u201c\u7f51\u7edc\u5b57\u8282\u5e8f\u201d\uff08\u5927\u7aef\u6a21\u5f0f\uff09\n    // h: host  to: to  n: net  s: unsigned short  l: unsigned long\n    server_addr.sin_port = htons(*port);  // \u5f00\u653e\u7684\u7aef\u53e3\n    server_addr.sin_addr.s_addr = htonl(INADDR_ANY);  // \u6240\u6709ip\u7684\u5ba2\u6237\u7aef\u90fd\u53ef\u4ee5\u8bbf\u95ee\n\n    // \u7ed1\u5b9a\u5957\u63a5\u5b57\u548c\u5730\u5740\n    // \uff08\u4e0d\u7528\u592a\u5728\u610f\u7c7b\u578b\u8f6c\u6362\uff09\n    ret = bind(server_socket, \n        (const struct sockaddr*)&amp;server_addr, \n        sizeof(server_addr));\n\n    // \u52a8\u6001\u5206\u914d\u4e00\u4e2a\u7aef\u53e3\n    int name_len = sizeof(server_addr);\n    if (*port == 0) {\n        ret = getsockname(server_socket, (struct sockaddr*)&amp;server_addr, &amp;name_len);\n        if (ret &lt; 0) {\n            error_die(\"fail distributing port\");\n        }\n\n        *port = server_addr.sin_port;\n    }\n\n    if (ret == -1) {\n        error_die(\"bind error\");\n    }\n\n    // \u521b\u5efa\u76d1\u542c\u961f\u5217\n    ret = listen(server_socket, 5);\n    if (ret &lt; 0) {\n        error_die(\"listen error!\");\n    }\n    return server_socket;\n}\n\n// \u5904\u7406\u7528\u6237\u8bf7\u6c42\u7684\u7ebf\u7a0b\u51fd\u6570\nDWORD WINAPI accept_request(LPVOID arg) {\n\n    return 0;\n}\n\nint main() {\n    unsigned short port = 0;\n    int server_sock = startup(&amp;port);\n    printf(\"httpd\u670d\u52a1\u5668\u5df2\u7ecf\u542f\u52a8\uff0c\u6b63\u5728\u76d1\u542c%d\u7aef\u53e3\", port);\n\n    struct sockaddr_in client_addr;\n\n    int client_addr_len = sizeof(client_addr);\n    while (true) {\n        // \u963b\u585e\u5f0f\u7b49\u5f85\u5ba2\u6237\u7aef\u8bbf\u95ee\u6b64\u670d\u52a1\u5668\n\n        // server_sock\u5957\u63a5\u5b57\u7528\u4e8e\u63a5\u6536\u8bbf\u95ee\n        // client_sock\u5957\u63a5\u5b57\u7528\u4e8e\u5904\u7406\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\n        int client_sock = accept(server_sock, \n            (struct sockaddr*)&amp;client_addr, \n            &amp;client_addr_len);\n\n        if (client_sock == -1) {\n            error_die(\"accept\");\n        }\n\n        // \u4f7f\u7528client_sock\u548c\u7528\u6237\u4ea4\u4e92\n        // \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7ebf\u7a0b\n        DWORD thread_id = 0;\n        // \u7b2c\u56db\u4e2a\u53c2\u6570\u4f5c\u4e3a\u7b2c\u4e09\u4e2a\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570\n        CreateThread(0, 0, accept_request, (void*)client_sock, 0, &amp;thread_id);\n\n    }\n    closesocket(server_sock);\n    return 0;\n}\n</code></pre> <p>\u6ca1\u6cd5\u81ea\u52a8\u5206\u914d\u7aef\u53e3\uff1f\uff01</p> <pre><code>#include &lt;stdio.h&gt;\n// \u7f51\u7edc\u901a\u4fe1\u9700\u8981\u5305\u542b\u7684\u5934\u6587\u4ef6\uff0c\u9700\u8981\u52a0\u8f7d\u7684\u6587\u4ef6\n#include &lt;WinSock2.h&gt;\n#pragma comment(lib, \"WS2_32.lib\")\n\n#define PRINTF(str) printf(\"[%s - %d]\"#str\"=%s\", __func__, __LINE__, str);\n\nvoid error_die(const char* str) {\n    perror(str);\n    exit(1);\n}\n\n/*\n* \u5b9e\u73b0\u7f51\u7edc\u7684\u521d\u59cb\u5316\uff1a\n* \u8fd4\u56de\u503c\uff1a\u670d\u52a1\u5668\u7684\u5957\u63a5\u5b57\n* \u53c2\u6570\uff1aport\uff0c\u8868\u793a\u7aef\u53e3\u53f7\u3002\u5982\u679cport\u4e3a0\uff0c\u90a3\u4e48\u81ea\u52a8\u5206\u914d\u4e00\u4e2a\u53ef\u7528\u7684\u7aef\u53e3\u3002\n*/\n\nint startup(unsigned short * port) {\n    WSADATA data;  // \u5b58\u50a8winsocket\u521d\u59cb\u5316\u540e\u5f97\u5230\u7684\u6570\u636e\n    int ret = WSAStartup(\n        MAKEWORD(1, 1),  // 1.1\u7248\u672c\u7684\u534f\u8bae\n        &amp;data);\n\n    if (ret != 0) {\n        error_die(\"WSAStartup die!\");\n    }\n\n    int server_socket = socket(PF_INET,  // \u5957\u63a5\u5b57\u7684\u7c7b\u578b\uff08\u5305\u62ec\u6587\u4ef6\u5957\u63a5\u5b57\u548c\u7f51\u7edc\u5957\u63a5\u5b57\uff0c\u8fd9\u91cc\u4f7f\u7528\u7f51\u7edc\u5957\u63a5\u5b57\uff09\n        SOCK_STREAM,  // \u6570\u636e\u6d41\n        IPPROTO_TCP);\n\n    if (server_socket == -1) {\n        // \u6253\u5370\u9519\u8bef\u63d0\u793a\uff0c\u5e76\u7ed3\u675f\u7a0b\u5e8f\n        error_die(\"socket die!\");\n    }\n\n    // \u8bbe\u7f6e\u7aef\u53e3\u53ef\u590d\u7528\n    int opt = 1;\n    ret = setsockopt(server_socket, \n        SOL_SOCKET, \n        SO_REUSEADDR, \n        (const char*)&amp;opt, \n        sizeof(opt));\n\n    if (ret == -1) {\n        error_die(\"set socket opt\");\n    }\n\n    // \u914d\u7f6e\u670d\u52a1\u5668\u7aef\u7684\u7f51\u7edc\u5730\u5740\n    struct sockaddr_in server_addr;\n    memset(&amp;server_addr, 0, sizeof(server_addr));\n    server_addr.sin_family = AF_INET;\n    // htons\u662f\u5c06\u673a\u5668\u4e2d\u7684\u6574\u578b\u8f6c\u6362\u6210\u201c\u7f51\u7edc\u5b57\u8282\u5e8f\u201d\uff08\u5927\u7aef\u6a21\u5f0f\uff09\n    // h: host  to: to  n: net  s: unsigned short  l: unsigned long\n    server_addr.sin_port = htons(*port);  // \u5f00\u653e\u7684\u7aef\u53e3\n    server_addr.sin_addr.s_addr = htonl(INADDR_ANY);  // \u6240\u6709ip\u7684\u5ba2\u6237\u7aef\u90fd\u53ef\u4ee5\u8bbf\u95ee\n\n    // \u7ed1\u5b9a\u5957\u63a5\u5b57\u548c\u5730\u5740\n    // \uff08\u4e0d\u7528\u592a\u5728\u610f\u7c7b\u578b\u8f6c\u6362\uff09\n    ret = bind(server_socket, \n        (const struct sockaddr*)&amp;server_addr, \n        sizeof(server_addr));\n\n    // \u52a8\u6001\u5206\u914d\u4e00\u4e2a\u7aef\u53e3\n    int name_len = sizeof(server_addr);\n    if (*port == 0) {\n        ret = getsockname(server_socket, \n            (struct sockaddr*)&amp;server_addr, &amp;name_len);\n        if (ret &lt; 0) {\n            error_die(\"fail distributing port\");\n        }\n        printf(\"\\n\u7aef\u53e3\u53f7\uff1a%d\\n\", server_addr.sin_port);\n        *port = server_addr.sin_port;\n    }\n\n    if (ret == -1) {\n        error_die(\"bind error\");\n    }\n\n    // \u521b\u5efa\u76d1\u542c\u961f\u5217\n    ret = listen(server_socket, 5);\n    if (ret &lt; 0) {\n        error_die(\"listen error!\");\n    }\n    return server_socket;\n}\n\n// \u4ece\u6307\u5b9a\u7684\u5ba2\u6237\u7aef\u5957\u63a5\u5b57\uff0c\u8bfb\u53d6\u4e00\u884c\u6570\u636e\uff0c\u5e76\u4fdd\u5b58\u5230buff\u4e2d\uff0c\u8fd4\u56de\u8bfb\u53d6\u7684\u5b57\u7b26\u6570\nint get_line(int sock, char* buff, int size) {\n    char c = 0;\n    int i = 0;\n    // \u5982\u679c\u83b7\u53d6 \\r\\n\uff0c\u5219\u53ea\u5b58\u50a8 \\n\n    // \u5982\u679c\u83b7\u53d6\\n\uff0c\u76f4\u63a5\u5b58\u50a8 \\n\n    while (i &lt; size - 1 &amp;&amp; c != '\\n') {\n        int n = recv(sock, &amp;c, 1, 0);\n        if (n &gt; 0) {\n            if (c == '\\r') {\n                // MSG_PEEK: \u7784\u4e00\u773c\u4e0b\u4e00\u4e2a\u5b57\u7b26\n                n = recv(sock, &amp;c, 1, MSG_PEEK);\n                if (n &gt; 0 &amp;&amp; n == '\\n') {\n                    recv(sock, &amp;c, 1, 0);\n                }\n                else {\n                    c = '\\n';\n                }\n            }\n            buff[i++] = c;\n        }\n    }\n    buff[i] = 0;\n    return 0;\n}\n\n// \u5904\u7406\u7528\u6237\u8bf7\u6c42\u7684\u7ebf\u7a0b\u51fd\u6570\nDWORD WINAPI accept_request(LPVOID arg) {\n    char buff[1024];\n\n    int client = (SOCKET)arg;\n\n    // \u8bfb\u53d6\u4e00\u884c\u6570\u636e\n    int num_char = get_line(client, buff, sizeof(buff));\n\n    PRINTF(buff);\n\n    return 0;\n}\n\nint main() {\n    unsigned short port = 1800;\n    int server_sock = startup(&amp;port);\n    printf(\"httpd\u670d\u52a1\u5668\u5df2\u7ecf\u542f\u52a8\uff0c\u6b63\u5728\u76d1\u542c%d\u7aef\u53e3\", port);\n\n    struct sockaddr_in client_addr;\n\n    int client_addr_len = sizeof(client_addr);\n    while (true) {\n        // \u963b\u585e\u5f0f\u7b49\u5f85\u5ba2\u6237\u7aef\u8bbf\u95ee\u6b64\u670d\u52a1\u5668\n\n        // server_sock\u5957\u63a5\u5b57\u7528\u4e8e\u63a5\u6536\u8bbf\u95ee\n        // client_sock\u5957\u63a5\u5b57\u7528\u4e8e\u5904\u7406\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\n        // \u4e24\u4e2a\u5957\u63a5\u5b57\u90fd\u5728\u670d\u52a1\u5668\u4e2d\n        int client_sock = accept(server_sock, \n            (struct sockaddr*)&amp;client_addr, \n            &amp;client_addr_len);\n        printf(\"hello world\");\n        if (client_sock == -1) {\n            error_die(\"accept\");\n        }\n\n        // \u4f7f\u7528client_sock\u548c\u7528\u6237\u4ea4\u4e92\n        // \u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7ebf\u7a0b\n        DWORD thread_id = 0;\n        // \u7b2c\u56db\u4e2a\u53c2\u6570\u4f5c\u4e3a\u7b2c\u4e09\u4e2a\u56de\u8c03\u51fd\u6570\u7684\u53c2\u6570\n        CreateThread(0, 0, accept_request, (void*)client_sock, 0, &amp;thread_id);\n    }\n    closesocket(server_sock);\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E5%BC%BA%E5%88%B6%E8%BD%AC%E6%8D%A2/","title":"C++\u5f3a\u5236\u8f6c\u6362","text":""},{"location":"C%2B%2B/C%2B%2B%E5%BC%BA%E5%88%B6%E8%BD%AC%E6%8D%A2/#reinterpret_cast","title":"reinterpret_cast","text":"<p>\u7b49\u540c\u4e8e\u5f3a\u5236\u8f6c\u6362\uff0c\u89c1\u4e0b\u6848\u4f8b\uff1a</p> <pre><code>#include &lt;iostream&gt;\n\nint main() {\n    // \u663e\u5f0f\u5f3a\u5236\u8f6c\u6362\n    int a = 10;\n    int* p = (int*)a;\n\n    // \u5c06\u62ec\u53f7\u4e2d\u7684a\u5f3a\u5236\u8f6c\u6362\u6210int*\n    int* p2 = reinterpret_cast&lt;int*&gt;(a);\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89/","title":"C++\u79fb\u52a8\u8bed\u4e49","text":"<p>[toc]</p>"},{"location":"C%2B%2B/C%2B%2B%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89/#_1","title":"\u4ec0\u4e48\u662f\u79fb\u52a8\u8bed\u4e49","text":"<p>\u79fb\u52a8\u8bed\u4e49\u662f\u6307\u5728\u4e0d\u62f7\u8d1d\u5bf9\u8c61\u7684\u60c5\u51b5\u4e0b\u5c06\u5bf9\u8c61\u7684\u8d44\u6e90\u4ece\u4e00\u4e2a\u5730\u65b9\u79fb\u52a8\u5230\u53e6\u4e00\u4e2a\u5730\u65b9\u7684\u8fc7\u7a0b\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89/#_2","title":"\u53f3\u503c\u5f15\u7528","text":"<p>\u5f15\u7528\u5206\u4e3a\u5de6\u503c\u5f15\u7528\u548c\u53f3\u503c\u5f15\u7528\uff0c\u5f15\u7528\u7684\u76ee\u7684\u90fd\u662f\u4e3a\u4e86\u51cf\u5c11\u5185\u5b58\u5f00\u9500\u4f18\u5316\u5185\u5b58\u7684\u4e00\u79cd\u65b9\u6cd5\u3002</p> <p>\u53f3\u503c\u5f15\u7528\u5c31\u662f\u5c06\u90a3\u4e9b\u4e34\u65f6\u9610\u8ff0\u7684\u53d8\u4e86\u6216\u5bf9\u8c61\u201c\u62a2\u201d\u8fc7\u6765\uff0c\u4f5c\u4e3a\u957f\u751f\u547d\u5468\u671f\u7684\u5bf9\u8c61\u3002</p> <pre><code>#include &lt;iostream&gt;\n\nvoid func(int&amp;&amp; x) {\n    std::cout &lt;&lt; \"x=\" &lt;&lt; x &lt;&lt; std::endl;\n}\n\nint main() {\n    func(10);\n    /*\n    \u62a5\u9519\uff0c\u53f3\u503c\u5f15\u7528\u4e0d\u80fd\u63a5\u6536\u201c\u6b63\u5e38\u201d\u7684\u53d8\u91cf\n    int a = 10;\n    func(a);\n    */\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E7%A7%BB%E5%8A%A8%E8%AF%AD%E4%B9%89/#stdmove","title":"std::move()","text":"<p>\u901a\u5e38\u628a\u201c\u5c06\u4ea1\u201d\u5bf9\u8c61\u7684\u503c\u201c\u4f4e\u6210\u672c\u201d\u7684\u8d4b\u503c\u7ed9\u65b0\u7684\u5bf9\u8c61\u3002</p> <p>\u6709\u4e9b\u60c5\u51b5\u4f7f\u7528std::move\u6ca1\u6709\u6548\u679c\u3002\u76ee\u524d\u6211\u4e5f\u4e0d\u592a\u61c2\u4ec0\u4e48\u65f6\u5019\u4f7f\u7528\u8be5\u51fd\u6570\u3002\u6211\u7684\u5efa\u8bae\u662f\u60f3\u8981\u5c06\u4e00\u4e2a\u503c\u8f6c\u79fb\u7ed9\u53e6\u4e00\u4e2a\u503c\u7684\u65f6\u5019\u4f7f\u7528\uff0c\u5982\u679cclion\u8b66\u544a\uff0c\u518d\u5220\u9664\u8fd9\u4e2a\u51fd\u6570\u4e5f\u4e0d\u8fdf\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nvoid func(std::string&amp; str) {\n    std::string tmp = \"hello, world!\";\n    str = std::move(tmp);\n}\n\nint main() {\n    std::string str;\n    func(str);\n    std::cout &lt;&lt; \"str=\" &lt;&lt; str &lt;&lt; std::endl;\n    std::string str2 = std::move(str);\n    std::cout &lt;&lt; \"move\u4e4b\u540e\uff0cstr=\" &lt;&lt; str &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"move\u4e4b\u540e\uff0cstr2=\" &lt;&lt; str2 &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre> <p>\u4ee5\u4e0b\u8fd9\u79cd\u60c5\u51b5\uff0cstd::move\u5c31\u6ca1\u4f5c\u7528\u3002</p> <pre><code>#include &lt;iostream&gt;\n\nint main() {\n    int a = 10;\n    int b = std::move(a);\n\n    std::cout &lt;&lt; \"a=\" &lt;&lt; a &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"b=\" &lt;&lt; b &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%8Eexplicit/","title":"C++\u7c7b\u578b\u8f6c\u6362\u4e0eexplicit","text":"<p>[toc]</p>"},{"location":"C%2B%2B/C%2B%2B%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%8Eexplicit/#c","title":"C++\u7c7b\u578b\u8f6c\u6362","text":""},{"location":"C%2B%2B/C%2B%2B%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%8Eexplicit/#_1","title":"\u9690\u5f0f\u7c7b\u578b\u8f6c\u6362","text":"<p>\u6709\u65f6\u5019\u4e3a\u4e86\u65b9\u4fbf\uff0c\u7f16\u8bd1\u5668\u4f1a\u5c06\u53d8\u91cf\u7c7b\u578b\u505a\u9690\u5f0f\u8f6c\u6362\uff0c\u4f8b\u5982\uff1a</p> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    int a = 10;\n    double b = 20.0;\n    cout &lt;&lt; a + b &lt;&lt; endl;\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%8Eexplicit/#_2","title":"\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362","text":"<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    int num = 97;\n    cout &lt;&lt; (char)num &lt;&lt; endl;\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%8Eexplicit/#_3","title":"\u7c7b\u578b\u8f6c\u6362\u6784\u9020\u51fd\u6570","text":"<p>\u8fd9\u4e2a\u6bd4\u8f83\u53cd\u76f4\u89c9\uff0c\u4f46\u6211\u4eec\u53ef\u4ee5\u8ba4\u4e3a\u7f16\u8bd1\u5668\u4e3a\u4e86\u901a\u8fc7\u7f16\u8bd1\u800c\u4e0d\u62e9\u624b\u6bb5\u3002\u5bf9\u4e8e<code>p = 2</code>\uff0c\u5982\u679c\u6ca1\u6cd5\u901a\u8fc7\uff0c\u7f16\u8bd1\u5668\u5219\u4f1a\u5c1d\u8bd5<code>Person p(2)</code>\u80fd\u5426\u901a\u8fc7\u3002\u6784\u9020\u51fd\u6570\u201c\u83ab\u540d\u5176\u5999\u201d\u5730\u63d0\u4f9b\u4e86\u4e00\u4e2a\u201c\u8f6c\u6362\u201d\u7684\u529f\u80fd\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0c<code>p = 2</code>\u9690\u5f0f\u8c03\u7528\u4e86<code>Person(int age)</code>\u8fd9\u4e2a\u51fd\u6570\u3002</p> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Person {\npublic:\n    int age;\n    Person() {\n    }\n    // \u8f6c\u6362\u6784\u9020\u51fd\u6570\n    Person(int age) {\n        this-&gt;age = age;\n    }\n};\n\nint main() {\n    Person p;\n    p = 2;\n    cout &lt;&lt; p.age &lt;&lt; endl;\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E4%B8%8Eexplicit/#explicit","title":"explicit\u5173\u952e\u5b57","text":"<p>\u7531\u4e8e\u6784\u9020\u51fd\u6570\u4f1a\u83ab\u540d\u5176\u5999\u63d0\u4f9b\u8f6c\u6362\u529f\u80fd\uff0c\u800c\u6211\u4eec\u4e0d\u5e0c\u671b\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\u3002\u6b64\u65f6\u53ea\u9700\u8981\u5728\u8fd9\u4e2a\u6784\u9020\u51fd\u6570\u4e4b\u524d\u6dfb\u52a0explicit\u5173\u952e\u5b57\u5373\u53ef\u3002</p> <p>\u5efa\u8bae\u5728\u6784\u9020\u51fd\u6570\u4e4b\u524d\u5c3d\u91cf\u4f7f\u7528explicit\u5173\u952e\u5b57\u3002\uff08\u51fa\u81ea\u300aEffective C++\u300b\uff09</p> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Person {\npublic:\n    int age;\n    Person() {\n    }\n    // \u6307\u5b9a\u8fd9\u4e2a\u6784\u9020\u51fd\u6570\u4e0d\u80fd\u63d0\u4f9b\u9690\u5f0f\u8f6c\u6362\u7684\u529f\u80fd\uff0c\u53ea\u80fd\u663e\u5f0f\u8c03\u7528\n    explicit Person(int age) {\n        this-&gt;age = age;\n    }\n};\n\nint main() {\n    Person p;\n    // \u7f16\u8bd1\u62a5\u9519\n    p = 2;\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%90%8C%E6%AD%A5/","title":"C++\u7ebf\u7a0b\u4e0e\u540c\u6b65","text":"<p>[toc]</p>"},{"location":"C%2B%2B/C%2B%2B%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%90%8C%E6%AD%A5/#lock_guardmutex","title":"lock_guard\u4e0emutex\u5b9e\u73b0\u540c\u6b65","text":"<p>lock_gard\u9501\u7684\u662f\u5f53\u524d\u6240\u5904\u7684\u4ee3\u7801\u5757\u3002\u5b83\u7684\u539f\u7406\u662f\u521b\u5efalock_guard\u7c7b\u578b\u7684\u53d8\u91cf\u65f6\u5728\u9ed8\u8ba4\u6784\u9020\u51fd\u6570\u4e2d\u83b7\u5f97\u9501\uff0c\u5f53\u524d\u4ee3\u7801\u5757\u6267\u884c\u5b8c\u6bd5\u540e\u5728\u6790\u6784\u51fd\u6570\u4e2d\u91ca\u653e\u9501\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n\nint gData = 0;\nstd::mutex mtx;\n\nvoid func() {\n    for (int i = 0; i &lt; 1000000; i++) {\n        std::lock_guard&lt;std::mutex&gt; lg(mtx);\n        gData++;\n    }\n}\n\nint main() {\n    std::thread t1(func);\n    std::thread t2(func);\n    std::thread t3(func);\n    t1.join();\n    t2.join();\n    t3.join();\n    std::cout &lt;&lt; \"gData=\" &lt;&lt; gData &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%90%8C%E6%AD%A5/#_1","title":"\u6761\u4ef6\u53d8\u91cf","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;mutex&gt;\n#include &lt;string&gt;\n#include &lt;condition_variable&gt;\n\nstd::string str;\nstd::condition_variable cv;\nstd::mutex mtx;\nbool isSet = false;\n\nvoid task1() {\n    std::this_thread::sleep_for(std::chrono::seconds(2));\n    str = \"hello, world!\";\n    isSet = true;\n    // \u5982\u679c\u4f7f\u7528notify_all\u51fd\u6570\uff0c\u5219\u80fd\u8ba9\u6240\u6709\u4e0e\u8be5\u6761\u4ef6\u53d8\u91cf\u76f8\u5173\u7684\u963b\u585e\u7ebf\u7a0b\u7ee7\u7eed\u6267\u884c\u3002\n    // \u5982\u679c\u4f7f\u7528notify_one\u51fd\u6570\uff0c\u5219\u968f\u673a\u8ba9\u4e00\u4e2a\u4e0e\u8be5\u6761\u4ef6\u53d8\u91cf\u76f8\u5173\u7684\u963b\u585e\u7ebf\u7a0b\u7ee7\u7eed\u6267\u884c\u3002\n    cv.notify_all();\n}\n\nvoid task2() {\n    // \u6761\u4ef6\u53d8\u91cf\u914d\u5408unique_lock\u4f7f\u7528\n    std::unique_lock&lt;std::mutex&gt; ul(mtx);\n\n    while (!isSet) { cv.wait(ul); }\n\n    std::cout &lt;&lt; \"str=\" &lt;&lt; str &lt;&lt; std::endl;\n}\n\nint main() {\n    std::thread t1(task1);\n    std::thread t2(task2);\n    std::thread t22(task2);\n    // \u963b\u585et1\u7ebf\u7a0b\uff0c\u76f4\u5230\u7ebf\u7a0b\u7ed3\u675f\n    t1.join();\n    t2.join();\n    t22.join();\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%90%8C%E6%AD%A5/#wait","title":"wait\u51fd\u6570","text":"<p>\u4e0a\u8ff0\u6848\u4f8b\u4e2d<code>while (!isSet) { cv.wait(ul); }</code>\u4e5f\u53ef\u4ee5\u88ab\u8fd9\u6837\u4ee3\u66ff\uff1a</p> <pre><code>cv.wait(ul, []() { return isSet; });\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u7684\u610f\u601d\u662f\uff1a</p> <p>\u5f53wait\u51fd\u6570\u7b2c\u4e8c\u4e2a\u53c2\u6570\u7684\u8fd4\u56de\u503c\u5982\u679c\u4e3afalse\uff0c\u5219\u963b\u585e\u5728\u6b64\u5904\uff0c\u5e76\u91ca\u653e\u548cul\u76f8\u5173\u7684\u9501\u3002</p>"},{"location":"C%2B%2B/C%2B%2B%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%90%8C%E6%AD%A5/#joindetach","title":"join\u51fd\u6570\u548cdetach\u51fd\u6570","text":"<p>\u7ebf\u7a0b\u4f7f\u7528\u5b8c\u6bd5\u540e\uff0c\u5fc5\u987b\u8c03\u7528join\u51fd\u6570\u6216\u8005detach\u51fd\u6570\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002\uff08\u4e0d\u8981\u7ea0\u7ed3\u62a5\u9519\u539f\u56e0\uff09</p> <p>\u7ebf\u7a0bjoin\u51fd\u6570\u540e\uff0c\u963b\u585e\u8be5\u7ebf\u7a0b\uff0c\u76f4\u5230\u7ebf\u7a0b\u88ab\u91ca\u653e\u3002</p> <p>\u6613\u9519\uff1ajoin\u51fd\u6570\u5e76\u4e0d\u662f\u8868\u793a\u91ca\u653e\u7ebf\u7a0b\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nvoid task1() {\n    std::cout &lt;&lt; \"hello, world\" &lt;&lt; std::endl;\n    std::this_thread::sleep_for(std::chrono::seconds(2));\n    std::atexit([]() -&gt; void {\n        std::cout &lt;&lt; \"t1\u7ebf\u7a0b\u5c06\u8981\u7ed3\u675f\uff01\" &lt;&lt; std::endl;\n    });\n}\n\nint main() {\n    std::thread t1(task1);\n    t1.join();\n    std::cout &lt;&lt; \"\u4e3b\u7ebf\u7a0b\u7ed3\u675f\uff01\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%90%8C%E6%AD%A5/#_2","title":"\u7ebf\u7a0b\u51fd\u6570\u4f20\u53c2","text":"<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nvoid func(int num, std::string str) {\n    std::cout &lt;&lt; \"num=\" &lt;&lt; num &lt;&lt; \" str=\" &lt;&lt; str &lt;&lt; std::endl;\n}\n\nint main() {\n    // \u53c2\u6570\u76f4\u63a5\u8ddf\u5728\u540e\u9762\u5373\u53ef\n    std::thread t(func, 10, \"hello,world!\");\n    t.join();\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E7%BA%BF%E7%A8%8B%E4%B8%8E%E5%90%8C%E6%AD%A5/#promisefuture","title":"promise\u548cfuture","text":"<p><code>std::promise</code> \u548c <code>std::future</code> \u662f\u4e00\u5bf9\u5173\u8054\u7684\u5bf9\u8c61\uff0c\u5176\u4e2d <code>std::promise</code> \u5bf9\u8c61\u7528\u4e8e\u5728\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\u751f\u6210\u4e00\u4e2a\u7ed3\u679c\uff0c\u800c <code>std::future</code> \u5bf9\u8c61\u5219\u7528\u4e8e\u5728\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\u83b7\u53d6\u8fd9\u4e2a\u7ed3\u679c\u3002\u8fd9\u6837\uff0c\u5c31\u53ef\u4ee5\u5728\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\u5f02\u6b65\u5730\u6267\u884c\u67d0\u4e9b\u8ba1\u7b97\uff0c\u5e76\u5728\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\u7b49\u5f85\u5e76\u83b7\u53d6\u8ba1\u7b97\u7684\u7ed3\u679c\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;future&gt;\n#include &lt;thread&gt;\n\nvoid task(int a, int b, std::promise&lt;int&gt;&amp; ret) {\n    // promise\u8bbe\u5b9a\u503c\u4ee5\u540e\uff0cfuture\u624d\u80fd\u83b7\u53d6\u5230\u8be5\u503c\n    ret.set_value(a * 2 + b * 3);\n}\n\nint main() {\n    std::promise&lt;int&gt; p;\n    // \u7ed1\u5b9afuture\u548cpromise\n    std::future&lt;int&gt; f = p.get_future();\n    // \u5728\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\u6267\u884c\u8fd0\u7b97\u4efb\u52a1\n    std::thread t(task, 10, 20, std::ref(p));\n    // promise\u8bbe\u5b9a\u503c\u4ee5\u524d\uff0cfuture\u4f1a\u963b\u585e\u5728\u6b64\u5904\n    // promise\u8bbe\u5b9a\u503c\u4ee5\u540e\uff0cfuture\u624d\u80fdget\u5230\u503c\n    // get\u51fd\u6570\u53ea\u80fd\u8c03\u7528\u4e00\u6b21\n    std::cout &lt;&lt; \"result is \" &lt;&lt; f.get() &lt;&lt; std::endl;\n    t.join();\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/C%2B%2B%E7%BA%BF%E7%A8%8B%E6%B1%A0/","title":"C++\u7ebf\u7a0b\u6c60","text":"<pre><code>#ifndef THREADPOOL_H\n#define THREADPOOL_H\n\n#include &lt;deque&gt;\n#include &lt;pthread.h&gt;\n#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n#include &lt;unistd.h&gt;\n\n// \u6bcf\u6b21\u6dfb\u52a0\u7684\u7ebf\u7a0b\u6570\u91cf\nconst int ADD_NUM = 2;\n\n// \u4efb\u52a1\u7ed3\u6784\u4f53\n// \u4efb\u52a1\u7684\u5b9e\u4f8b\u5c31\u662f\u51fd\u6570\nclass Task {\npublic:\n    // \u6bcf\u4e00\u4e2a\u4efb\u52a1\u90fd\u662f\u4e00\u4e2a\u51fd\u6570\n    void (*function)(void* arg);\n    // \u51fd\u6570\u7684\u53c2\u6570\n    void* arg;\n};\n\n// \u7ebf\u7a0b\u6c60\u7ed3\u6784\u4f53\nclass ThreadPool {\npublic:\n    // \u4efb\u52a1\u961f\u5217\u3002\uff08\u53ef\u4ee5\u8003\u8651\u7ef4\u62a4\u4e00\u4e2a\u73af\u5f62\u961f\u5217\uff09\n    // deque\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5185\u5b58\u6cc4\u6f0f\n    std::deque&lt;Task*&gt; taskQueue;\n\n    int queueCapacity;\n\n    // \u7ba1\u7406\u8005\u7ebf\u7a0bid\n    pthread_t managerId;\n\n    // \u5de5\u4f5c\u7ebf\u7a0bid\n    std::deque&lt;pthread_t&gt; workerIds;\n\n    // \u6700\u5c0f\u7ebf\u7a0b\u6570\n    int minThreadNum;\n\n    // \u6700\u5927\u7ebf\u7a0b\u6570\n    int maxThreadNum;\n\n    // \u5de5\u4f5c\u7ebf\u7a0b\u6570\n    int busyThreadNum;\n\n    // \u5b58\u6d3b\u7ebf\u7a0b\u6570\n    int aliveThreadNum;\n\n    // \u9700\u8981\u6740\u6b7b\u7684\u7ebf\u7a0b\u6570\n    int exitThreadNum;\n\n    // \u9501\u6574\u4e2a\u7ebf\u7a0b\u6c60\n    pthread_mutex_t mutexPool;\n\n    // \u7ed9busyThreadNum\u6dfb\u52a0\u4e00\u4e2a\u9501\n    pthread_mutex_t mutexBusy;\n\n    // \u662f\u5426\u9500\u6bc1\u8be5\u7ebf\u7a0b\u6c60\u30020\u8868\u793a\u4e0d\u9500\u6bc1\uff0c1\u8868\u793a\u9500\u6bc1\n    int shutdown;\n\n    // \u5224\u65ad\u7ebf\u7a0b\u6c60\u662f\u5426\u6ee1\u4e86\n    pthread_cond_t notFull;\n    // \u5224\u65ad\u7ebf\u7a0b\u6c60\u662f\u5426\u7a7a\u4e86\n    pthread_cond_t notEmpty;\n};\n\n// \u7ed9\u7ebf\u7a0b\u6c60\u6dfb\u52a0\u4efb\u52a1\nvoid threadPoolAdd(ThreadPool* pool, void(*func)(void*), void* arg) {\n    pthread_mutex_lock(&amp;pool-&gt;mutexPool);\n    while (pool-&gt;taskQueue.size() == pool-&gt;queueCapacity &amp;&amp; !pool-&gt;shutdown) {\n        // \u4efb\u52a1\u961f\u5217\u5df2\u6ee1\uff0c\u963b\u585e\u751f\u4ea7\u8005\u7ebf\u7a0b\n        pthread_cond_wait(&amp;pool-&gt;notFull, &amp;pool-&gt;mutexPool);\n    }\n    // \u5f53\u963b\u585e\u89e3\u9664\u65f6\uff0c\u5982\u679c\u7ebf\u7a0b\u6c60\u5df2\u5173\u95ed\uff0c\u5219\u505c\u6b62\n    if (pool-&gt;shutdown) {\n        pthread_mutex_unlock(&amp;pool-&gt;mutexPool);\n        return;\n    }\n\n    // \u6dfb\u52a0\u4efb\u52a1\n    Task* task = new Task;\n    task-&gt;function = func;\n    task-&gt;arg = arg;\n    pool-&gt;taskQueue.push_back(task);\n\n    pthread_cond_signal(&amp;pool-&gt;notEmpty);\n\n    pthread_mutex_unlock(&amp;pool-&gt;mutexPool);\n}\n\n// \u83b7\u53d6\u7ebf\u7a0b\u6c60\u4e2d\u5de5\u4f5c\u7684\u51fd\u6570\nint getBusyThreadNum(ThreadPool* pool) {\n    pthread_mutex_lock(&amp;pool-&gt;mutexBusy);\n    int busyThreadNum = pool-&gt;busyThreadNum;\n    pthread_mutex_unlock(&amp;pool-&gt;mutexBusy);\n    return busyThreadNum;\n}\n\n// \u83b7\u53d6\u7ebf\u7a0b\u6c60\u4e2d\u5b58\u5728\u7684\u7ebf\u7a0b\nint getAliveThreadNum(ThreadPool* pool) {\n    pthread_mutex_lock(&amp;pool-&gt;mutexPool);\n    int aliveThreadNum = pool-&gt;aliveThreadNum;\n    pthread_mutex_unlock(&amp;pool-&gt;mutexPool);\n    return aliveThreadNum;\n}\n\n// \u9500\u6bc1\u7ebf\u7a0b\u6c60\n// \u8fd4\u56de0\u8868\u793a\u9500\u6bc1\u6210\u529f\uff0c\u8fd4\u56de-1\u8868\u793a\u9500\u6bc1\u5931\u8d25\nint destroyThreadPool(ThreadPool* pool) {\n    if (pool == nullptr) {\n        return -1;\n    }\n\n    // \u5173\u95ed\u7ebf\u7a0b\u6c60\n    pool-&gt;shutdown = 1;\n\n    // \u9500\u6bc1\u7ba1\u7406\u8005\u7ebf\u7a0b\n    pthread_join(pool-&gt;managerId, nullptr);\n\n    // \u5524\u9192\u963b\u585e\u7684\u6d88\u8d39\u8005\u7ebf\u7a0b\n    for (int i = 0; i &lt; pool-&gt;aliveThreadNum; i++) {\n        pthread_cond_signal(&amp;pool-&gt;notEmpty);\n        // \u5b50\u7ebf\u7a0b\u4e2d\u4f1a\u81ea\u52a8\u9500\u6bc1\n    }\n\n    delete pool;\n    pool = nullptr;\n    pthread_mutex_destroy(&amp;pool-&gt;mutexPool);\n    pthread_mutex_destroy(&amp;pool-&gt;mutexBusy);\n    pthread_cond_destroy(&amp;pool-&gt;notEmpty);\n    pthread_cond_destroy(&amp;pool-&gt;notFull);\n    return 0;\n}\n\n// \u81ea\u5b9a\u4e49\u7ebf\u7a0b\u9000\u51fa\nvoid* threadExit(ThreadPool* pool) {\n    // \u83b7\u53d6\u5f53\u524d\u7ebf\u7a0b\u7684\u7ebf\u7a0b\u6807\u8bc6\u7b26\u3002\n    pthread_t tid = pthread_self();\n    for (int i = 0; i &lt; pool-&gt;maxThreadNum; i++) {\n        if (pool-&gt;workerIds[i] == tid) {\n            pool-&gt;workerIds[i] = 0;\n            std::cout &lt;&lt; \"\u9000\u51fa\u7ebf\u7a0b\uff0c\u7ebf\u7a0b\u7f16\u53f7\u4e3a\uff1a\" &lt;&lt; tid &lt;&lt; std::endl;\n            break;\n        }\n    }\n    pthread_exit(nullptr);\n}\n\nvoid* worker(void* arg) {\n    ThreadPool* pool = (ThreadPool*)arg;\n    while (true) {\n        pthread_mutex_lock(&amp;pool-&gt;mutexPool);\n        // \u5224\u65ad\u5f53\u524d\u4efb\u52a1\u961f\u5217\u662f\u5426\u4e3a\u7a7a\n        while (pool-&gt;taskQueue.empty() &amp;&amp; !pool-&gt;shutdown) {\n            // \u963b\u585e\u5de5\u4f5c\u7ebf\u7a0b\n            // \u5f53\u4efb\u52a1\u961f\u5217\u4e0d\u4e3a\u7a7a\u65f6\uff0c\u5524\u9192\u6b64\u5904\n            pthread_cond_wait(&amp;pool-&gt;notEmpty, &amp;pool-&gt;mutexPool);\n\n            // \u5224\u65ad\u662f\u5426\u9700\u8981\u9500\u6bc1\u7ebf\u7a0b\n            if (pool-&gt;exitThreadNum &gt; 0) {\n                pool-&gt;exitThreadNum--;\n                pool-&gt;aliveThreadNum--;\n                pthread_mutex_unlock(&amp;pool-&gt;mutexPool);\n                threadExit(pool);\n            }\n        }\n\n        // \u5224\u65ad\u7ebf\u7a0b\u6c60\u662f\u5426\u88ab\u5173\u95ed\n        if (pool-&gt;shutdown) {\n            pthread_mutex_unlock(&amp;pool-&gt;mutexPool);\n            threadExit(pool);\n        }\n\n        // \u4ece\u4efb\u52a1\u961f\u5217\u4e2d\u53d6\u51fa\u4efb\u52a1\n        // \u53ef\u4ee5\u8003\u8651\u7528\u73af\u5f62\u961f\u5217\u4f18\u5316\n        Task task;\n        task.function = pool-&gt;taskQueue[0]-&gt;function;\n        task.arg = pool-&gt;taskQueue[0]-&gt;arg;\n        pool-&gt;taskQueue.pop_front();\n\n        // \u89e3\u9501\n        // \u5524\u9192\u751f\u4ea7\u8005\u7684\u6761\u4ef6\u53d8\u91cf\n        pthread_cond_signal(&amp;pool-&gt;notFull);\n        pthread_mutex_unlock(&amp;pool-&gt;mutexPool);\n\n        std::cout &lt;&lt; \"\u7ebf\u7a0b\u5f00\u59cb\u5de5\u4f5c\uff01\" &lt;&lt; std::endl;\n\n\n        pthread_mutex_lock(&amp;pool-&gt;mutexBusy);\n        pool-&gt;busyThreadNum++;\n        pthread_mutex_unlock(&amp;pool-&gt;mutexBusy);\n\n        // \u8c03\u7528\u51fd\u6570\n        task.function(task.arg);\n        delete task.arg;\n        task.arg = nullptr;\n\n        std::cout &lt;&lt; \"\u7ebf\u7a0b\u7ed3\u675f\u5de5\u4f5c\uff01\" &lt;&lt; std::endl;\n\n        pthread_mutex_lock(&amp;pool-&gt;mutexBusy);\n        pool-&gt;busyThreadNum--;\n        pthread_mutex_unlock(&amp;pool-&gt;mutexBusy);\n\n    }\n}\n\nvoid* manager(void* arg) {\n    ThreadPool* pool = (ThreadPool*)arg;\n\n    while (!pool-&gt;shutdown) {\n        // \u6309\u7167\u67d0\u79cd\u9891\u7387\u8c03\u8282\u7ebf\u7a0b\u6c60\u4e2d\u7684\u7ebf\u7a0b\u6570\u91cf\n        sleep(1);\n\n        // \u53d6\u51fa\u7ebf\u7a0b\u6c60\u4e2d\u4efb\u52a1\u7684\u6570\u91cf\u548c\u5f53\u524d\u7ebf\u7a0b\u7684\u6570\u91cf\n        pthread_mutex_lock(&amp;pool-&gt;mutexPool);\n        int queueSize = pool-&gt;taskQueue.size();\n        int aliveThreadNum = pool-&gt;aliveThreadNum;\n        pthread_mutex_unlock(&amp;pool-&gt;mutexPool);\n\n        // \u53d6\u51fa\u6b63\u5728\u5de5\u4f5c\u7684\u7ebf\u7a0b\u6570\u91cf\n        pthread_mutex_lock(&amp;pool-&gt;mutexBusy);\n        int busyThreadNum = pool-&gt;busyThreadNum;\n        pthread_mutex_unlock(&amp;pool-&gt;mutexBusy);\n\n        // \u6dfb\u52a0\u7ebf\u7a0b\n        // \u5b58\u6d3b\u7ebf\u7a0b\u7684\u4e2a\u6570 &lt; \u5f53\u524d\u4efb\u52a1\u7684\u4e2a\u6570 &amp;&amp; \u5b58\u6d3b\u7684\u7ebf\u7a0b\u6570 &lt; \u6700\u5927\u7ebf\u7a0b\u6570\n        if (aliveThreadNum &lt; queueSize &amp;&amp; aliveThreadNum &lt; pool-&gt;maxThreadNum) {\n\n            pthread_mutex_lock(&amp;pool-&gt;mutexPool);\n\n            // counter\u8bb0\u5f55\u6dfb\u52a0\u7684\u7ebf\u7a0b\u4e2a\u6570\n            int counter = 0;\n\n            for (int i = 0; counter &lt; ADD_NUM\n                            &amp;&amp; i &lt; pool-&gt;maxThreadNum\n                            &amp;&amp; pool-&gt;aliveThreadNum &lt; pool-&gt;maxThreadNum; i++) {\n                if (pool-&gt;workerIds[i] == 0) {\n                    pthread_create(&amp;pool-&gt;workerIds[counter], nullptr, worker, pool);\n                    counter++;\n\n                    pool-&gt;aliveThreadNum++;\n                }\n            }\n\n            pthread_mutex_unlock(&amp;pool-&gt;mutexPool);\n        }\n\n        // \u9500\u6bc1\u7ebf\u7a0b\n        // \u81ea\u5b9a\u4e49\u7b97\u6cd5\uff1a\u7ebf\u7a0b\u5b58\u6d3b\u6570 &gt; \u5de5\u4f5c\u7684\u7ebf\u7a0b * 2  &amp;&amp; \u7ebf\u7a0b\u5b58\u6d3b\u6570 &gt; \u6700\u5c0f\u7ebf\u7a0b\u6570\n        if (pool-&gt;aliveThreadNum &gt; pool-&gt;busyThreadNum * 2\n            &amp;&amp; pool-&gt;aliveThreadNum &gt; pool-&gt;minThreadNum) {\n\n            pthread_mutex_lock(&amp;pool-&gt;mutexPool);\n            pool-&gt;exitThreadNum = ADD_NUM;\n\n            pthread_mutex_unlock(&amp;pool-&gt;mutexPool);\n\n            // \u8ba9\u5de5\u4f5c\u7684\u7ebf\u7a0b\u201c\u81ea\u6740\u201d\n            for (int i = 0; i &lt; ADD_NUM; i++) {\n                pthread_cond_signal(&amp;pool-&gt;notEmpty);\n            }\n        }\n    }\n}\n\n\n// \u521b\u5efa\u7ebf\u7a0b\u6c60\nThreadPool* createThreadPool(\n        int minThreadNum,\n        int maxThreadNum,\n        int queueCapacity) {\n    ThreadPool* pool = new ThreadPool;\n\n    pool-&gt;workerIds.resize(maxThreadNum);\n\n    pool-&gt;minThreadNum = minThreadNum;\n    pool-&gt;maxThreadNum = maxThreadNum;\n    pool-&gt;busyThreadNum = 0;\n    pool-&gt;aliveThreadNum = minThreadNum;\n    pool-&gt;exitThreadNum = 0;\n\n    // \u521d\u59cb\u5316\u9501\u548c\u6761\u4ef6\u53d8\u91cf\n    // \u6761\u4ef6\u53d8\u91cf\u548c\u9501\u901a\u5e38\u4e00\u8d77\u4f7f\u7528\n    if (pthread_mutex_init(&amp;pool-&gt;mutexPool, nullptr) != 0 ||\n        pthread_mutex_init(&amp;pool-&gt;mutexBusy, nullptr) != 0 ||\n        pthread_cond_init(&amp;pool-&gt;notEmpty, nullptr) != 0 ||\n        pthread_cond_init(&amp;pool-&gt;notFull, nullptr) != 0) {\n        std::cout &lt;&lt; \"\u521d\u59cb\u5316\u5931\u8d25\uff01\" &lt;&lt; std::endl;\n    }\n\n    // \u4efb\u52a1\u961f\u5217\n    pool-&gt;queueCapacity = queueCapacity;\n\n    // \n    pool-&gt;shutdown = 0;\n\n    // \u521b\u5efa\u7ebf\u7a0b\n    // manager\u662f\u51fd\u6570\uff0c \u540e\u9762\u7684\u662fmanager\u51fd\u6570\u7684\u53c2\u6570\n    pthread_create(&amp;pool-&gt;managerId, nullptr, manager, pool);\n\n    for (int i = 0; i &lt; minThreadNum; i++) {\n        pthread_create(&amp;pool-&gt;workerIds[i], nullptr, worker, pool);\n    }\n\n    return pool;\n}\n\n\n\n#endif // !THREADPOOL_H\n\n/*\n\u95ee\u9898\uff1a\u6761\u4ef6\u53d8\u91cf\u662f\u4ec0\u4e48\uff1f\n\u7b54\u6848\uff1ahttps://www.cnblogs.com/harlanc/p/8596211.html\n\n\u95ee\u9898\uff1a\u4e92\u65a5\u9501\u548c\u6761\u4ef6\u53d8\u91cf\u4e00\u8d77\u4f7f\u7528\u7684\u573a\u666f\uff1f\n\u7b54\u6848\uff1a\n\n\u95ee\u9898\uff1a\u7b80\u8ff0\u8be5\u6848\u4f8b\u7684\u751f\u4ea7\u8005-\u6d88\u8d39\u8005\u6a21\u578b\uff1f\n\n\u95ee\u9898\uff1a\u8c03\u7528pthread_cond_wait(&amp;\u6761\u4ef6\u53d8\u91cf, &amp;\u4e92\u65a5\u9501)\u51fd\u6570\u4f1a\u53d1\u751f\u4ec0\u4e48\uff1f\n\u7b54\u6848\uff1a\n    1. \u7ebf\u7a0b\u963b\u585e\u5728\u6b64\u5904(A\u5904)\uff0c\u5e76\u4e14\u91ca\u653e\u8be5\u9501\u3002\n    2. \u5f53\u5176\u4ed6\u5730\u65b9(B\u5904)\u8c03\u7528pthread_cond_signal(&amp;\u6761\u4ef6\u53d8\u91cf)\u51fd\u6570\u5e76\u4f7f\u7528\u76f8\u540c\u7684\u6761\u4ef6\u53d8\u91cf\u65f6\uff0c\u4f1a\u5524\u9192A\u5904\u3002\n    3. A\u5904\u4f1a\u5c1d\u8bd5\u83b7\u53d6\u9501\uff0c\u5982\u679c\u83b7\u53d6\u6210\u529f\uff0c\u5219\u7ee7\u7eed\u5f80\u4e0b\u6267\u884c\uff1b\u5426\u5219\u4e00\u76f4\u963b\u585e\u3002\n\n\u95ee\u9898\uff1a\u8be5\u9879\u76ee\u7684\u7279\u70b9\uff1f\n\u7b54\u6848\uff1a\n    1. \u751f\u4ea7\u8005\u4ea7\u751f\u4e00\u4e2a\u4efb\u52a1\u540e\uff0c\u5524\u9192\u6d88\u8d39\u8005\uff1b\u6d88\u8d39\u8005\u6d88\u8017\u4e00\u4e2a\u4efb\u52a1\u540e\uff0c\u5524\u9192\u751f\u4ea7\u8005\u3002\n\n*/\n</code></pre>"},{"location":"C%2B%2B/Cmake%E5%92%8Cmakefile/","title":"Cmake\u548cmakefile","text":"<p>[toc]</p>"},{"location":"C%2B%2B/Cmake%E5%92%8Cmakefile/#_1","title":"\u53c2\u8003\u6587\u6863","text":"<p>CMake\u662f\u4ec0\u4e48\uff1f\u6709\u4ec0\u4e48\u7528\uff1f</p>"},{"location":"C%2B%2B/Cmake%E5%92%8Cmakefile/#_2","title":"\u524d\u8a00","text":"<p>Cmake\uff1a\u662f\u4e00\u4e2a\u8de8\u5e73\u53f0\u7684\u7f16\u8bd1\uff08Build\uff09\u5de5\u5177\u3002\u5982\u679c\u4e00\u4e2a\u9879\u76ee\u7531\u51e0\u5341\u4e2a\u5de5\u7a0b\u6784\u6210\uff0c\u4ed6\u4eec\u4e4b\u95f4\u7684\u8c03\u7528\u5173\u7cfb\u9519\u7efc\u590d\u6742\uff0c\u6b64\u65f6\u6211\u4eec\u4ec5\u9700\u8981\u4e00\u4efdCMakeLists.txt\u6587\u6863\uff0c\u5229\u7528Cmake\u5de5\u5177\uff0c\u5b8c\u6210\u5de5\u7a0b\u7684\u642d\u5efa\u3002</p> <p>makefile\uff1a\u5c31\u662f\u4e0a\u8ff0\u63d0\u5230\u7684CMakeLists.txt\u6587\u6863\u3002</p>"},{"location":"C%2B%2B/Cmake%E5%92%8Cmakefile/#makefile","title":"makefile \u6848\u4f8b","text":"<p>\u4f7f\u7528\u65f6\u521b\u5efamakefile\u6587\u4ef6\uff0c\u590d\u5236\u4ee5\u4e0b\u4ee3\u7801\u3002</p> <p>\u6267\u884c\u65f6\u5728bash\u4e2d\u8f93\u5165<code>make</code>\u5373\u53ef\u3002</p> <pre><code># \u5b9a\u4e49\u53d8\u91cf\nCXX = g++\nTARGET = main\n# SRC \u662f\u5f53\u524d\u76ee\u5f55\u6240\u6709.cpp\u6587\u4ef6\nSRC = $(wildcard *.cpp)\n# OBJ \u662f\u5f53\u524d\u76ee\u5f55\u6240\u6709.cpp\u6587\u4ef6\u7684\u524d\u7f00\u62fc\u63a5.o\u5f62\u6210\u7684\u6587\u4ef6\nOBJ = $(patsubst %.cpp, %.o, $(SRC))\n\nCXXFLAGS = -c -Wall\n\n# TARGET \u4f9d\u8d56\u4e8e OBJ\n$(TARGET): $(OBJ)\n        # \u5982\u679c OBJ \u6bd4 TARGET \u65b0\n        $(CXX) -o $(TARGET) $(OBJ)\n\n# $@ \u8868\u793a\u89c4\u5219\u4e2d\u76ee\u6807\u6761\u4ef6 %.o\n# $^ \u8868\u793a\u89c4\u5219\u4e2d\u6240\u6709\u4f9d\u8d56\u6761\u4ef6 %.cpp\n# $&lt; \u8868\u793a\u89c4\u5219\u4e2d\u7b2c\u4e00\u4e2a\u4f9d\u8d56\u6761\u4ef6\n%.o: %.cpp\n        $(CXX) $(CXXFLAGS) $^ -o $@\n\n# make clean \u6e05\u7a7a\u4e2d\u95f4\u6587\u4ef6\n.PHONY: clean\nclear:\n        rm -f *.o $(TARGET)\n</code></pre>"},{"location":"C%2B%2B/typename%E7%9A%84%E4%BD%BF%E7%94%A8/","title":"typename\u7684\u4f7f\u7528","text":"<p>[toc]</p>"},{"location":"C%2B%2B/typename%E7%9A%84%E4%BD%BF%E7%94%A8/#template","title":"template\u7684\u53c2\u6570","text":"<p>\u8fd9\u79cd\u4f7f\u7528\u573a\u666f\u975e\u5e38\u5e38\u89c1\uff0ctypename\u548cclass\u53ef\u4ee5\u4e92\u6362\u3002</p> <pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;typename T&gt;\nT sum(T&amp;&amp; a, T&amp;&amp; b) {\n    return a + b;\n}\n\nint main() {\n    std::cout &lt;&lt; sum&lt;int&gt;(2, 3);\n    return 0;\n}\n</code></pre>"},{"location":"C%2B%2B/typename%E7%9A%84%E4%BD%BF%E7%94%A8/#_1","title":"\u6807\u8bc6\u5d4c\u5957\u4ece\u5c5e\u7c7b\u578b\u540d\u79f0","text":"<p>\u5047\u5b9a\u6211\u4eec\u6709\u4ee5\u4e0b\u4e00\u4e2a\u7c7b\u6a21\u677f\uff1a</p> <pre><code>template&lt;typename T&gt;\nclass MyClass {\n    T::iterator* iter;\n};\n</code></pre> <p>\u6309\u7167\u5e38\u7406\uff0cT::iterator\u662f\u4e00\u4e2a\u7c7b\u578b\u3002\u4f46\u662f\u5982\u679c\u6211\u4eec\u7528\u4e0b\u9762\u8fd9\u4e2a\u7c7b\u6765\u5b9e\u4f8b\u5316\u4e0a\u8ff0\u7c7b\u6a21\u677f\uff1a</p> <pre><code>class MyType {\n    static int iterator;\n};\n</code></pre> <p>\u90a3\u4e48\u7f16\u8bd1\u5668\u5c31\u4f1a\u8ba4\u4e3aT::iterator * iter \u662f\u4e24\u6570\u76f8\u4e58\u3002</p> <p>\u603b\u4e4b\uff0c\u5982\u679c\u4e00\u4e2a\u7c7b\u6a21\u677f\u4e2d\u51fa\u73b0\u4e86\u4f9d\u8d56\u6a21\u677f\u53c2\u6570\u7684\u7c7b\u578b\uff0c\u9700\u8981\u4f7f\u7528typename\u6307\u5b9a\u51fa\u6765\uff0c\u8ba9\u7f16\u8bd1\u5668\u5c06\u540e\u9762\u7684\u5b57\u6bb5\u5f53\u505a\u7c7b\u578b\u3002\u4f8b\u5982\uff1a</p> <pre><code>template&lt;typename T&gt;\nclass MyClass {\n    // \u4f9d\u8d56 T\n    typename T::iterator* iter;\n};\n</code></pre> <p>\u9700\u8981\u638c\u63e1\u8fd9\u79cd\u4f7f\u7528\u65b9\u6cd5\u3002</p>"},{"location":"C%2B%2B/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80/","title":"\u591a\u7ebf\u7a0b\u57fa\u7840","text":"<pre><code>#include &lt;pthread.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;iostream&gt;\n\npthread_mutex_t mutex;\npthread_cond_t cond;\nbool data_ready = false;\n\nvoid* thread_func(void*) {\n    // \u7ebf\u7a0bA\u6267\u884c\n    pthread_mutex_lock(&amp;mutex);\n    while (!data_ready) {\n        std::cout &lt;&lt; \"Waiting for data...\" &lt;&lt; std::endl;\n        // \u8be5\u51fd\u6570\u4e2d\uff0c\u6761\u4ef6\u53d8\u91cf\u548c\u4e92\u65a5\u9501\u914d\u5408\u4f7f\u7528\u3002\n        // \u8be5\u7ebf\u7a0b\u963b\u585e\uff0c\u5e76\u91ca\u653emutex\u9501\u3002\u540c\u65f6\u5f53\u5176\u4ed6\u5730\u65b9\u8c03\u7528pthread_cond_signal\u51fd\u6570\u4e14\u53c2\u6570\u4e3acond\u65f6\uff0c\u8be5\u7ebf\u7a0b\u91cd\u65b0\u83b7\u5f97\u9501\uff0c\u5e76\u7ee7\u7eed\u6267\u884c\n        pthread_cond_wait(&amp;cond, &amp;mutex);\n    }\n    // \u6570\u636e\u5df2\u51c6\u5907\u597d\uff0c\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c\n    std::cout &lt;&lt; \"Data is ready, continuing...\" &lt;&lt; std::endl;\n    pthread_mutex_unlock(&amp;mutex);\n}\n\nint main() {\n    pthread_mutex_init(&amp;mutex, NULL);\n    pthread_cond_init(&amp;cond, NULL);\n    pthread_t threadA;\n    pthread_create(&amp;threadA, NULL, thread_func, NULL);\n\n    // \u7ebf\u7a0bB\u6267\u884c\n    sleep(2);\n    // \u8fd9\u91cc\u52a0\u9501\u7684\u539f\u56e0\u662f\u4fdd\u8bc1\u53ea\u6709\u4e3b\u7ebf\u7a0b\u80fd\u4f7f\u7528pthread_cond_signal\u51fd\u6570\u64cd\u4f5ccond\u6761\u4ef6\u53d8\u91cf\u3002 \n    // \u4efb\u4f55\u4fee\u6539\u6761\u4ef6\u53d8\u91cf\u7684\u5730\u65b9\u90fd\u9700\u8981\u52a0\u4e92\u65a5\u9501\u3002 \n    pthread_mutex_lock(&amp;mutex);\n    std::cout &lt;&lt; \"Sending signal...\" &lt;&lt; std::endl;\n    data_ready = true;\n    // \u54ea\u4e2a\u5730\u65b9\u8c03\u7528\u4e86pthread_cond_wait\u5e76\u4f7f\u7528cond\u4f5c\u4e3a\u53c2\u6570\uff0c\u5219\u901a\u77e5\u54ea\u4e2a\u5730\u65b9\u7ee7\u7eed\u6267\u884c \n    pthread_cond_signal(&amp;cond);\n    // \u5f53mutex\u91ca\u653e\u540e\uff0cthreadA\u4e2d\u7684 pthread_cond_wait\u5904\u624d\u80fd\u91cd\u65b0\u83b7\u5f97\u9501\u3002 \n    pthread_mutex_unlock(&amp;mutex);\n\n    // \u7ebf\u7a0bB\u6267\u884c\u5230\u6b64\u5904\uff0c\u8c03\u7528phhread_join\u51fd\u6570\uff0c\u963b\u585e\u5728\u6b64\u5904\uff0c\u7b49\u5f85\u7ebf\u7a0bA\u6267\u884c\u7ed3\u675f \n    pthread_join(threadA, NULL);\n    pthread_mutex_destroy(&amp;mutex);\n    pthread_cond_destroy(&amp;cond);\n\n    return 0;\n}\n\n</code></pre>"},{"location":"C%2B%2B/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/","title":"\u667a\u80fd\u6307\u9488","text":"<p>[toc]</p>"},{"location":"C%2B%2B/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/#_2","title":"\u4e3a\u4ec0\u4e48\u8981\u7528\u667a\u80fd\u6307\u9488","text":"<p>\u4f7f\u7528\u667a\u80fd\u6307\u9488\u53ef\u4ee5\u65b9\u4fbf\u5730\u7ba1\u7406\u52a8\u6001\u5185\u5b58\uff0c\u907f\u514d\u5185\u5b58\u6cc4\u6f0f\u548c\u7a7a\u6307\u9488\u5f15\u7528\u7684\u95ee\u9898\u3002</p>"},{"location":"C%2B%2B/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/#_3","title":"\u81ea\u5df1\u5199\u4e00\u4e2a\u667a\u80fd\u6307\u9488","text":"<p>\u667a\u80fd\u6307\u9488\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u65b9\u4fbf\u7ba1\u7406\u5185\u5b58\u3002\u4ee5\u4e0b\u6848\u4f8b\u5229\u7528\u4e86C++\u8bed\u8a00\u5c40\u90e8\u5bf9\u8c61\u81ea\u52a8\u9500\u6bc1\u7684\u7279\u6027\u6765\u63a7\u5236\u8d44\u6e90\u7684\u751f\u547d\u5468\u671f\u3002</p> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Student {\npublic:\n    int age;\n    void say() {\n        cout &lt;&lt; \"I'm a student!\" &lt;&lt; endl;\n    }\n};\n\nclass SmartPrt {\npublic:\n    SmartPrt(Student* stu) {\n        m_obj = stu;\n    }\n    ~SmartPrt() {\n        if (m_obj) {\n            delete m_obj;\n            cout &lt;&lt; \"\u91ca\u653e\u8d44\u6e90\" &lt;&lt; endl;\n        }\n        m_obj = nullptr;\n    }\n    Student* m_obj;\n};\n\nint main() {\n    {\n        SmartPrt ptr(new Student);\n    }\n    return 0;\n}\n</code></pre> <p>\u4e0a\u9762\u5c31\u662f\u4e00\u4e2a\u667a\u80fd\u6307\u9488\u3002\u4f46\u662f\u8be5\u6307\u9488\u5e76\u4e0d\u80fd\u60f3\u666e\u901a\u6307\u9488\u901a\u8fc7<code>-&gt;</code>\u3001<code>*</code>\u3001<code>==</code>\u7b49\u7b26\u53f7\u8bbf\u95ee\u8d44\u6e90\u3002\u56e0\u6b64\u8fd8\u9700\u8981\u91cd\u8f7d\u8fd0\u7b97\u7b26\u3002</p> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Student {\npublic:\n    int age;\n    void say() {\n        cout &lt;&lt; \"I'm a student!\" &lt;&lt; endl;\n    }\n};\n\nclass SmartPrt {\npublic:\n    SmartPrt(Student* stu) {\n        m_obj = stu;\n    }\n    ~SmartPrt() {\n        if (m_obj) {\n            delete m_obj;\n            cout &lt;&lt; \"\u91ca\u653e\u8d44\u6e90\" &lt;&lt; endl;\n        }\n        m_obj = nullptr;\n    }\n\n    // \u91cd\u8f7d -&gt;\n    Student* operator-&gt;() {\n        return m_obj;\n    }\n\n    // \u91cd\u8f7d *\n    Student&amp; operator*() {\n        return *m_obj;\n    }\n\n    // \u91cd\u8f7d ==\n    operator bool() {\n        return m_obj != nullptr;\n    }\n\n    Student* m_obj;\n};\n\nint main() {\n    {\n        SmartPrt ptr(new Student);\n        ptr-&gt;say();\n        (*ptr).say();\n        if (ptr) {\n            cout &lt;&lt; \"ptr is not nullptr!\" &lt;&lt; endl;\n        }\n    }\n    return 0;\n}\n</code></pre> <p>\u66f4\u8fdb\u4e00\u6b65\uff0c\u5982\u679c\u8981</p>"},{"location":"Go/Gorm%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/","title":"Gorm\u5feb\u901f\u4e0a\u624b","text":""},{"location":"Go/Gorm%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#gorm_1","title":"\u539f\u751fGORM\u64cd\u4f5c","text":"<p>\u4f7f\u7528SQLite\u6f14\u793a\u64cd\u4f5c\u3002</p> <p>gorm tag\u4e0d\u7528\u8bb0\uff0c\u901a\u5e38\u4f7f\u7528\u63d2\u4ef6\u6839\u636e\u6570\u636e\u8868\u751f\u6210\u5bf9\u5e94\u7684\u7ed3\u6784\u4f53\u3002</p> <pre><code>package main\n\nimport (\n    \"fmt\"\n    \"gorm.io/driver/sqlite\"\n    \"gorm.io/gorm\"\n)\n\ntype User struct {\n    Id       int64  `gorm:\"primaryKey; autoIncrement:true; column:id; not null\"`\n    Username string `gorm:\"column:username; not null; default:''\"`\n    Age      uint   `gorm:\"column:age; not null; default:0\"`\n    Score           // \u5d4c\u5957\u7684\u7c7b\u4f1a\u88ab\u5c55\u5e73\u4e3a\u4e00\u5c42\n}\n\ntype Score struct {\n    Chinese int `gorm:\"column:chinese; not null; default:0\"`\n    Math    int `gorm:\"column:math; not null; default:0\"`\n}\n\nfunc main() {\n    db, err := gorm.Open(sqlite.Open(\"test.db\"), &amp;gorm.Config{})\n    if err != nil {\n       panic(\"failed to connect database\")\n    }\n\n    // \u8fc1\u79fb schema\u3002\u4e00\u822c\u6211\u4e0d\u4e60\u60ef\u6839\u636emodel\u751f\u6210\u6570\u636e\u8868\uff0c\u800c\u662f\u6839\u636e\u6570\u636e\u8868\u751f\u6210model\u3002\n    if err := db.AutoMigrate(&amp;User{}); err != nil {\n       fmt.Printf(\"auto migrate err: %s\\n\", err)\n       return\n    }\n\n    // Create\n    db.Create(&amp;User{Username: \"D42\", Age: 100})\n\n    // Read\n    var product User\n    db.First(&amp;product, 1)                 // \u6839\u636e\u6574\u578b\u4e3b\u952e\u67e5\u627e\n    db.First(&amp;product, \"code = ?\", \"D42\") // \u67e5\u627e code \u5b57\u6bb5\u503c\u4e3a D42 \u7684\u8bb0\u5f55\n\n    // Update - \u5c06 product \u7684 price \u66f4\u65b0\u4e3a 200\n    db.Model(&amp;product).Update(\"Age\", 200)\n    // Update - \u66f4\u65b0\u591a\u4e2a\u5b57\u6bb5\n    db.Model(&amp;product).Updates(User{Age: 200, Username: \"F42\"})  // \u4ec5\u66f4\u65b0\u975e\u96f6\u503c\u5b57\u6bb5\uff01\uff01\uff01\n    db.Model(&amp;product).Updates(map[string]interface{}{\"Age\": 200, \"Username\": \"F42\"})  // \u53ef\u4ee5\u66f4\u65b0\u96f6\u503c\u5b57\u6bb5\n\n    // Delete - \u5220\u9664 product\n    db.Delete(&amp;product, 1)\n}\n</code></pre>"},{"location":"Go/Gorm%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#_1","title":"\u5b9e\u6218\u914d\u7f6e","text":"<p>https://gorm.io/zh_CN/gen/</p> <p>\u901a\u5e38\u4f7f\u7528gorm-gen\u751f\u6210model\u4ee3\u7801\u548c\u64cd\u4f5c\u6570\u636e\u5e93\u7684\u4ee3\u7801\u3002</p> <p>\u6839\u636egorm-gen\u7684\u5b98\u65b9\u6587\u6863\uff0c\u6211\u4eec\u53ef\u4ee5\u7f16\u5199\u5982\u4e0b\u4ee3\u7801\u3002\u4e2a\u4eba\u4e60\u60ef\u5c06\u8be5\u4ee3\u7801\u653e\u5728<code>cmd/generate/generate.go</code>\u6587\u4ef6\u4e2d\u3002</p> <pre><code>package main\n\nimport (\n    \"code.lihailong.vip/longcoding/gorm-demo/demo2/biz/dal/model\"\n    \"gorm.io/driver/mysql\"\n    \"gorm.io/gen\"\n    \"gorm.io/gorm\"\n)\n\nfunc main() {\n    g := gen.NewGenerator(gen.Config{\n       OutPath:      \"biz/dal/query\",\n       ModelPkgPath: \"biz/dal/model\",\n       Mode:         gen.WithoutContext | gen.WithDefaultQuery | gen.WithQueryInterface, // generate mode\n\n       FieldWithIndexTag: true,\n       FieldWithTypeTag:  true,\n       // \u5982\u679c\u5b57\u6bb5\u53ef\u4ee5\u4e3anull\uff0c\u5219model\u7c7b\u4e2d\u7684\u5b57\u6bb5\u7c7b\u578b\u4e3a\u6307\u9488\u3002\n       FieldNullable: true,\n\n       // \u4e2a\u4eba\u5efa\u8bae\u6570\u636e\u5e93\u4e2d\u7684\u5b57\u6bb5\u503c\u4e0d\u8981\u8bbe\u7f6e\u4e3a0\u503c\uff01\n       // \u6709default\u503c\u7684\u5b57\u6bb5\uff0c\u65e0\u6cd5\u5c06\u5b57\u6bb5\u503c\u8bbe\u7f6e\u4e3a\u96f6\u503c(0\u6216\"\")\uff0c\u8fd9\u662fgorm\u7684\u8bbe\u8ba1\u7406\u5ff5\u4e4b\u4e00\u3002\u56e0\u4e3a\u5728go\u4e2d\uff0c\u6ca1\u6709\u8d4b\u503c\u7684\u5bf9\u8c61\u503c\u901a\u5e38\u662f\u96f6\u503c\u3002\n       // \u4f46\u662f\u6709\u65f6\u5019\u6211\u4eec\u5e0c\u671b\u5373\u4fbf\u4e00\u4e2a\u5b57\u6bb5\u6709\u9ed8\u8ba4\u503c\uff0c\u4e5f\u80fd\u5c06\u5b57\u6bb5\u503c\u8bbe\u7f6e\u4e3a\u96f6\u503c\n       // \u6b64\u65f6model\u7c7b\u4e2d\u9700\u8981\u751f\u6210\u6307\u9488\u7c7b\u578b\u7684\u5b57\u6bb5\n       //FieldCoverable: true,\n    })\n    db, _ := gorm.Open(mysql.Open(\"root:123456@(127.0.0.1:3306)/web_project?charset=utf8mb4&amp;parseTime=True&amp;loc=Local\"))\n    g.UseDB(db)\n\n    // \u6839\u636e\u6570\u636e\u8868\u751f\u6210go\u4ee3\u7801\n    g.ApplyBasic(g.GenerateModel(\"user_info\"))\n    g.Execute()\n}\n</code></pre> <p>\u5f00\u53d1\u4e60\u60ef\uff1a</p> <ol> <li>\u6570\u636e\u5e93\u4e2d\u7684\u503c\u4e0d\u8981\u8bbe\u5b9a\u4e3a\u96f6\u503c\uff0c\u4f8b\u5982\uff1a\u8ba91\u4ee3\u8868\u7537\u751f\uff0c2\u4ee3\u8868\u5973\u751f\uff0c0\u4f5c\u4e3a\u9ed8\u8ba4\u503c\uff0c\u4e0d\u8981\u7528\u3002</li> <li>\u5efa\u8bae\u6240\u6709\u503c\u90fd\u4e0d\u8981\u4e3anull\uff0c\u4e14\u6709default\u503c\u3002</li> </ol>"},{"location":"Go/Gorm%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#_2","title":"\u6570\u636e\u8868\u53d8\u52a8","text":"<ol> <li>\u5f53\u6211\u4eec\u7ed9\u6570\u636e\u8868\u589e\u52a0\u4e00\u4e2a\u5b57\u6bb5\u65f6\uff0c\u6211\u4eec\u53ea\u9700\u8981\u91cd\u65b0\u8fd0\u884c\u4e0a\u8ff0gen\u7684\u4ee3\u7801\u5373\u53ef\u3002</li> <li>\u5f53\u6211\u4eec\u4fee\u6539\u6570\u636e\u8868\u7684\u4e00\u4e2a\u5b57\u6bb5\u540d\u65f6\uff0c\u8fd0\u884c\u4e0a\u8ff0\u7684gen\u4ee3\u7801\u540e\uff0c\u5f15\u7528\u539f\u5b57\u6bb5\u7684\u4ee3\u7801\u4f1a\u627e\u4e0d\u5230\u5bf9\u8c61\uff0c\u4ece\u800c\u62a5\u9519\u3002\u8fd9\u65f6\u5019\u5efa\u8bae\u624b\u52a8\u4e00\u4e2a\u4e2a\u4fee\u6539\u3002</li> <li>\u5f53\u6211\u4eec\u5220\u9664\u6570\u636e\u8868\u7684\u4e00\u4e2a\u5b57\u6bb5\u65f6\uff0c\u8fd0\u884cgen\u4ee3\u7801\u540e\uff0c\u4e5f\u4f1a\u8ba9\u539f\u5b57\u6bb5\u7684\u4ee3\u7801\u4f1a\u627e\u4e0d\u5230\u5bf9\u8c61\u3002\u8fd8\u662f\u5efa\u8bae\u624b\u52a8\u4e00\u4e2a\u4e2a\u5220\u9664\u3002</li> <li>\u4e0d\u5efa\u8bae\u4fee\u6539\u6570\u636e\u8868\u540d\uff01</li> </ol>"},{"location":"Go/Gorm%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/#crud","title":"CRUD","text":"<p>\u6570\u636e\u8868\u7ed3\u6784\u5982\u4e0b\uff1a</p> <pre><code>create table user\n(\n    id          bigint auto_increment\n        primary key,\n    username    varchar(30)   not null,\n    password    varchar(100)  not null,\n    age         int default 0 not null,\n    hobby       varchar(100)  null,\n    create_time datetime      not null,\n    constraint idx_username\n        unique (username),\n    constraint idx_username_and_password\n        unique (username, password)\n);\n</code></pre> <p>\u9996\u5148\u8981\u521d\u59cb\u5316\u6570\u636e\u5e93\uff1a</p> <p>biz/dal/initDB.go</p> <pre><code>package dal\n\nimport (\n    \"gorm.io/driver/mysql\"\n    \"gorm.io/gorm\"\n)\n\nvar db *gorm.DB\n\nfunc GetDB() *gorm.DB {\n    return db\n}\n\nfunc InitDB() {\n    var err error\n    db, err = gorm.Open(mysql.Open(\"root:123456789@(127.0.0.1:3306)/web_project?charset=utf8mb4&amp;parseTime=True&amp;loc=Local\"))\n    if err != nil {\n       panic(err.Error())\n    }\n}\n</code></pre> <p>depend/depend.go</p> <pre><code>package depend\n\nimport (\n    \"code.lihailong.vip/longcoding/gorm_demo/biz/dal\"\n    \"context\"\n)\n\nfunc InitDepend(ctx context.Context) {\n    // \u521d\u59cb\u5316\u5404\u79cd\u4f9d\u8d56\n    dal.InitDB()\n}\n</code></pre> <p>main.go</p> <pre><code>package main\n\nimport (\n    \"code.lihailong.vip/longcoding/gorm_demo/biz/dal\"\n    \"code.lihailong.vip/longcoding/gorm_demo/biz/dal/model\"\n    \"code.lihailong.vip/longcoding/gorm_demo/biz/dal/query\"\n    \"code.lihailong.vip/longcoding/gorm_demo/depend\"\n    \"context\"\n    \"fmt\"\n    \"gorm.io/gorm/clause\"\n    \"time\"\n)\n\nfunc Str2Ptr(s string) *string {\n    return &amp;s\n}\n\nfunc main() {\n    // \u521d\u59cb\u5316\u4ee3\u7801\n    ctx := context.Background()\n    depend.InitDepend(ctx)\n\n    // \u4e1a\u52a1\u4ee3\u7801\n    //querySingleUser(ctx)\n    queryUsers(ctx)\n    //upsertUser(ctx)\n    //createUser(ctx)\n    //batchCreateUser(ctx)\n    //upsertUser4(ctx)\n    //updateUser1(ctx)\n}\n\nfunc querySingleUser(ctx context.Context) {\n    // \u6309\u7167\u6761\u4ef6\uff0c\u67e5\u627e\u67d0\u4e2a\u503c\u662f\u5426\u5b58\u5728\n    username := \"lhl1\"\n    u := query.Use(dal.GetDB()).User\n    // \u901a\u8fc7\u4e3b\u952e\u6392\u5e8f\uff0c\u62ff\u5230\u7b2c\u4e00\u4e2a\n    user, err := u.WithContext(ctx).Where(u.Username.Eq(username)).First() // \u9664\u4e86First\uff0c\u8fd8\u6709Last(\u6700\u540e\u4e00\u4e2a)\u3001take(\u968f\u673a\u987a\u5e8f)\n    if err != nil {\n       // \u62a5\u9519\u901a\u5e38\u662f\u627e\u4e0d\u5230\u6570\u636e\n       fmt.Printf(\"query user error: %s\\n\", err)\n    } else {\n       fmt.Printf(\"user=%+v\\n\", user)\n    }\n}\n\nfunc queryUsers(ctx context.Context) {\n    password := \"1231\"\n    u := query.Use(dal.GetDB()).User\n    users, err := u.WithContext(ctx).Where(u.Password.Eq(password)).Find()\n    if err != nil {\n       fmt.Printf(\"queryUsers error: %s\\n\", err)\n    } else {\n       if len(users) == 0 {\n          fmt.Println(\"users is null\")\n          return\n       }\n       for idx, user := range users {\n          fmt.Printf(\"idx=%d, user=%+v\\n\", idx, user)\n       }\n    }\n}\n\n// \u521b\u5efa\u4e00\u4e2a\u5168\u65b0\u7684\u503c\nfunc createUser(ctx context.Context) {\n    user := &amp;model.User{\n       Username:   \"lhl\",\n       Password:   \"123456\",\n       CreateTime: time.Now(),\n    }\n\n    u := query.Use(dal.GetDB()).User\n    err := u.WithContext(ctx).Create(user)\n    if err != nil {\n       fmt.Printf(\"\u521b\u5efa\u5931\u8d25\uff0c\u539f\u56e0:%s\\n\", err)\n    } else {\n       fmt.Printf(\"\u521b\u5efa\u6210\u529f\uff0cuser=%+v\\n\", user)\n    }\n}\n\nfunc batchCreateUser(ctx context.Context) { // \u8981\u4e48\u5168\u90e8\u521b\u5efa\u6210\u529f\uff0c\u8981\u4e48\u5168\u90e8\u521b\u5efa\u5931\u8d25\n    userList := []*model.User{\n       {Username: \"name1\", Password: \"111\", CreateTime: time.Now()},\n       {Username: \"name2\", Password: \"222\", CreateTime: time.Now()},\n       //{ID: 1, Username: \"name3\", Password: \"333\", CreateTime: time.Now()},\n    }\n    u := query.Use(dal.GetDB()).User\n    err := u.WithContext(ctx).Create(userList...)\n    if err != nil {\n       fmt.Printf(\"\u6279\u91cf\u521b\u5efa\u5931\u8d25\uff0c\u539f\u56e0:%s\\n\", err)\n    } else {\n       fmt.Println(\"\u6279\u91cf\u521b\u5efa\u6210\u529f\")\n    }\n}\n\nfunc upsertUser(ctx context.Context) {\n    // \u5982\u679cusername\u5b58\u5728\uff0c\u5c31\u66f4\u65b0password\u548chobby\n    // \u5982\u679cusername\u4e0d\u5b58\u5728\uff0c\u5c31\u63d2\u5165\u6570\u636e\n    user := &amp;model.User{\n       Username:   \"name1\",\n       Password:   \"123\",\n       Hobby:      Str2Ptr(\"ctrl\"),\n       CreateTime: time.Now(),\n    }\n    u := query.Use(dal.GetDB()).User\n    // \u524d\u63d0\uff1a\u4e00\u5b9a\u8981\u4fdd\u8bc1\u51b2\u7a81\u7684\u5b57\u6bb5\u6709\u3010\u552f\u4e00\u7d22\u5f15\u3011\uff01\uff01\uff01\n    err := u.WithContext(ctx).Clauses(clause.OnConflict{\n       Columns: []clause.Column{{Name: string(u.Username.Desc().ColumnName())}}, // 1. \u5982\u679cusername\u53d1\u751f\u51b2\u7a81\n       DoUpdates: clause.Assignments(map[string]interface{}{\n          string(u.Password.Desc().ColumnName()): user.Password, // \u6ce8\u610f\uff0c\u8fd9\u91cc\u6211\u6ca1\u6709\u76f4\u63a5\u5199\u6570\u636e\u5217\u540d\uff0c\u9632\u6b62\u6570\u636e\u8868\u5217\u540d\u53d8\u66f4\u65f6\u8fd9\u91cc\u51fa\u9519\n          string(u.Hobby.Desc().ColumnName()):    user.Hobby,\n       }), // 2. \u5219\u6309\u7167map\u66f4\u65b0\u6570\u636e\n    }).Create(user) // 3. \u5982\u679cusername\u6ca1\u6709\u53d1\u751f\u51b2\u7a81\uff0c\u5219\u521b\u5efa\u6570\u636e\n    if err != nil {\n       fmt.Printf(\"upsert error: %s\", err)\n       return\n    }\n    fmt.Println(\"upsert success!\")\n}\n\nfunc upsertUser2(ctx context.Context) {\n    // \u5982\u679cusername\u5b58\u5728\uff0c\u5219\u4e0d\u505a\u4efb\u4f55\u64cd\u4f5c\n    // \u5982\u679cusername\u4e0d\u5b58\u5728\uff0c\u5219\u521b\u5efa\u6570\u636e\n    user := &amp;model.User{\n       Username:   \"lhl\",\n       Password:   \"123\",\n       Hobby:      Str2Ptr(\"ctrl\"),\n       CreateTime: time.Now(),\n    }\n    u := query.Use(dal.GetDB()).User\n    // \u524d\u63d0\uff1a\u4e00\u5b9a\u8981\u4fdd\u8bc1\u51b2\u7a81\u7684\u5b57\u6bb5\u6709\u3010\u552f\u4e00\u7d22\u5f15\u3011\uff01\uff01\uff01\n    err := u.WithContext(ctx).Clauses(clause.OnConflict{\n       Columns:   []clause.Column{{Name: string(u.Username.Desc().ColumnName())}}, // 1. \u5982\u679cusername\u53d1\u751f\u51b2\u7a81\n       DoNothing: true,                                                            // 2. \u5219\u4ec0\u4e48\u90fd\u4e0d\u505a\n    }).Create(user) // 3. \u5982\u679cusername\u6ca1\u6709\u53d1\u751f\u51b2\u7a81\uff0c\u5219\u521b\u5efa\u6570\u636e\n\n    if err != nil {\n       fmt.Printf(\"upsert error: %s\", err)\n       return\n    }\n    fmt.Println(\"upsert success!\")\n}\n\nfunc upsertUser3(ctx context.Context) {\n    // \u5982\u679cusername\u5b58\u5728\uff0c\u5c31\u66f4\u65b0\u9664\u4e86\u4e3b\u952e\u4ee5\u5916\u7684\u5176\u4ed6\u6240\u6709\u5b57\u6bb5\n    // \u5982\u679cusername\u4e0d\u5b58\u5728\uff0c\u5c31\u63d2\u5165\u6570\u636e\n    user := &amp;model.User{\n       Username:   \"lhl\",\n       Password:   \"123\",\n       Hobby:      Str2Ptr(\"\u5531\u8df3rap\u7bee\u7403\"),\n       CreateTime: time.Now(),\n    }\n    u := query.Use(dal.GetDB()).User\n    // \u524d\u63d0\uff1a\u4e00\u5b9a\u8981\u4fdd\u8bc1\u51b2\u7a81\u7684\u5b57\u6bb5\u6709\u3010\u552f\u4e00\u7d22\u5f15\u3011\uff01\uff01\uff01\n    err := u.WithContext(ctx).Clauses(clause.OnConflict{\n       Columns:   []clause.Column{{Name: string(u.Username.Desc().ColumnName())}}, // 1. \u5982\u679cusername\u53d1\u751f\u51b2\u7a81\n       UpdateAll: true,                                                            // 2. \u5219\u66f4\u65b0\u9664\u4e86\u4e3b\u952e\u4ee5\u5916\u7684\u6240\u6709\u5b57\u6bb5\n    }).Create(user) // 3. \u5982\u679cusername\u6ca1\u6709\u53d1\u751f\u51b2\u7a81\uff0c\u5219\u521b\u5efa\u6570\u636e\n    if err != nil {\n       fmt.Printf(\"upsert error: %s\", err)\n       return\n    }\n    fmt.Println(\"upsert success!\")\n}\n\nfunc upsertUser4(ctx context.Context) {\n    // \u5982\u679cusername\u548cpassword\u90fd\u5b58\u5728\uff0c\u5c31\u66f4\u65b0\u9664\u4e86\u4e3b\u952e\u4ee5\u5916\u7684\u5176\u4ed6\u6240\u6709\u5b57\u6bb5\n    // \u5426\u5219\u5c31\u63d2\u5165\u4e00\u6761\u8bb0\u5f55\n    user := &amp;model.User{\n       Username:   \"lhl\",\n       Password:   \"123\",\n       Hobby:      Str2Ptr(\"rap\"),\n       CreateTime: time.Now(),\n    }\n    u := query.Use(dal.GetDB()).User\n    // \u524d\u63d0\uff1a\u4e00\u5b9a\u8981\u4fdd\u8bc1\u51b2\u7a81\u7684\u5b57\u6bb5\u6709\u3010\u552f\u4e00\u8054\u5408\u7d22\u5f15\u3011\u6216\u80052\u4e2a\u3010\u552f\u4e00\u7d22\u5f15\u3011\uff01\uff01\uff01\n    err := u.WithContext(ctx).Clauses(clause.OnConflict{\n       Columns:   []clause.Column{{Name: string(u.Username.Desc().ColumnName())}, {Name: string(u.Password.Desc().ColumnName())}}, // 1. \u5982\u679cusername+password\u53d1\u751f\u51b2\u7a81\n       UpdateAll: true,                                                                                                            // 2. \u5219\u66f4\u65b0\u9664\u4e86\u4e3b\u952e\u4ee5\u5916\u7684\u6240\u6709\u5b57\u6bb5\n    }).Create(user) // 3. \u5982\u679cusername+password\u6ca1\u6709\u53d1\u751f\u51b2\u7a81\uff0c\u5219\u521b\u5efa\u6570\u636e\n    if err != nil {\n       fmt.Printf(\"upsert error: %s\", err)\n       return\n    }\n    fmt.Println(\"upsert success!\")\n}\n\nfunc updateUser1(ctx context.Context) {\n    // \u5982\u679cusername\u5b58\u5728\uff0c\u5219\u66f4\u65b0password\n    // \u5426\u5219\u63d0\u793a\u66f4\u65b0\u5931\u8d25\n    user := &amp;model.User{\n       Username:   \"lhl\",\n       Password:   \"go\",\n       Hobby:      Str2Ptr(\"\u7bee\u7403\"),\n       CreateTime: time.Now(),\n    }\n    u := query.Use(dal.GetDB()).User\n    resultInfo, err := u.WithContext(ctx).Where(u.Username.Eq(user.Username)).Updates(model.User{Password: user.Password})  // \u96f6\u503c\u4e0d\u66f4\u65b0\n    if err != nil {\n       fmt.Printf(\"\u66f4\u65b0\u5931\u8d25, err:%s\\n\", err)\n       return\n    } else {\n       fmt.Printf(\"\u66f4\u65b0\u6210\u529f, resultInfo:%+v\\n\", resultInfo)\n    }\n}\n\nfunc updateUser2(ctx context.Context) {\n    // \u5982\u679cusername\u548cpassword\u90fd\u5b58\u5728\uff0c\u5219\u66f4\u65b0hobby\n    // \u5426\u5219\u63d0\u793a\u66f4\u65b0\u5931\u8d25\n    user := &amp;model.User{\n       Username:   \"lhl\",\n       Password:   \"go\",\n       Hobby:      Str2Ptr(\"\u7bee\u7403\"),\n       CreateTime: time.Now(),\n    }\n    u := query.Use(dal.GetDB()).User\n    resultInfo, err := u.WithContext(ctx).Where(u.Username.Eq(user.Username)).Where(u.Password.Eq(user.Password)).Updates(model.User{Hobby: user.Hobby})  // \u96f6\u503c\u4e0d\u66f4\u65b0\n    if err != nil {\n       fmt.Printf(\"\u66f4\u65b0\u5931\u8d25, err:%s\\n\", err)\n       return\n    } else {\n       fmt.Printf(\"\u6210\u529f\u66f4\u65b0%d\u6761\u6570\u636e\", resultInfo.RowsAffected)\n    }\n}\n</code></pre>"},{"location":"Go/Go%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/","title":"Go\u4f9d\u8d56\u7ba1\u7406","text":""},{"location":"Go/Go%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_1","title":"\u57fa\u7840\u89c4\u5219","text":"<ul> <li>\u5efa\u8bae\u4f7f\u7528Go Module\u7ba1\u7406\u4f9d\u8d56\u3002Go 1.14\u4ee5\u540e\u9ed8\u8ba4\u91c7\u7528Go Module\u7ba1\u7406\u4f9d\u8d56\uff0c\u56e0\u6b64\u5efa\u8bae\u9009\u62e9\u65b0\u7248\u7684go\u3002\u540c\u65f6\u5728goland\u4e2d\u5f00\u542fenable go modules integration\u3002</li> <li>Go Module\u7c7b\u4f3cMaven\u3002</li> <li>\u6211\u4eec\u53ef\u4ee5\u5728\u4efb\u4f55\u76ee\u5f55\u521b\u5efaGo\u9879\u76ee\uff0c\u521b\u5efa\u65f6\u4f7f\u7528<code>go mod init</code>\u5373\u53ef\u5728\u6839\u76ee\u5f55\u751f\u6210<code>go.mod</code>\u6587\u4ef6\uff0c<code>go.mod</code>\u7c7b\u4f3cJava\u7684<code>pom.xml</code>\uff0c\u7528\u4e8e\u8bb0\u5f55\u4f9d\u8d56\u9879\u76ee\u3002</li> <li>\u4f9d\u8d56\u4ee3\u7801\u4e00\u822c\u4e0b\u8f7d\u5230<code>$GOPATH/pkg/mod</code>\u4e2d\uff0c\u6bd4\u5982\u6211\u5728<code>go.mod</code>\u4e2d\u5f15\u5165\u4e00\u4e2a\u4f9d\u8d56\uff1a</li> </ul> <pre><code>require github.com/cloudwego/hertz v0.7.2\n</code></pre> <p>\u5219\u4f1a\u5c06\u4f9d\u8d56\u7684\u4ee3\u7801\u653e\u5728<code>$GOPATH/pkg/mod/github.com/cloudwego/hertz@0.7.2</code>\u4e2d\u3002</p> <ul> <li> <p>go install\u4e00\u822c\u5b89\u88c5\u7684\u662f\u53ef\u6267\u884c\u7a0b\u5e8f\uff08\u800c\u4e0d\u662f\u4f9d\u8d56\u4ee3\u7801\uff09\uff0c\u5b89\u88c5\u4f4d\u7f6e\u5728\u5728<code>$GOPATH/bin</code>\u4e2d\u3002\u6bd4\u5982\u6211\u60f3\u4f7f\u7528hz\u5de5\u5177\u81ea\u52a8\u6839\u636ethrift\u6587\u4ef6\u751f\u6210hertz\u4ee3\u7801\uff0c\u5219\u9700\u8981\u4fdd\u8bc1\u5b89\u88c5hz\u5de5\u5177\uff0c\u5e76\u4e14\u5c06<code>$GOPATH/bin</code>\u52a0\u5165\u5230\u73af\u5883\u53d8\u91cf\u4e2d\u3002</p> </li> <li> <p>\u540c\u4e00package\u4f46\u4e0d\u540cgo\u6587\u4ef6\u7684\u51fd\u6570\u548c\u5168\u5c40\u53d8\u91cf\u53ef\u4ee5\u76f4\u63a5\u8c03\u7528\u3002</p> </li> <li> <p>\u4e0d\u540cpachage\u7684\u51fd\u6570\u548c\u5168\u5c40\u53d8\u91cf\u8c03\u7528\u65f6\uff0c\u9700\u8981\u5f15\u5165\u4f9d\u8d56\u8def\u5f84\uff08\u901a\u5e38goland\u4f1a\u81ea\u52a8\u5f15\u5165\uff09\uff0c\u4f9d\u8d56\u8def\u5f84\u7684\u89c4\u5219\u662f<code>\u6a21\u5757\u540d/\u53051(/\u53052...)</code>\u3002\u6a21\u5757\u540d\u662f<code>go.mod</code>\u4e2d\u7684module\u540d\u5b57\u3002\u6bd4\u5982\u6709\u5982\u4e0b\u5c42\u6b21\u7684\u6587\u4ef6\uff1a</p> </li> <li> <p><code>Go     .     \u251c\u2500\u2500 doc1     \u2502   \u2514\u2500\u2500 func1.go     \u251c\u2500\u2500 doc2     \u2502   \u2514\u2500\u2500 func2.go     \u2514\u2500\u2500 go.mod</code></p> </li> </ul> <p>go.mod\u7684\u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code>module github.com/lihailong/demo\n\ngo 1.20\n</code></pre> <p>\u90a3\u4e48func1.go\u9700\u8981\u5f15\u5165func2.go\u4e2d\u7684\u4ee3\u7801\u65f6\uff0c\u53c2\u8003\u5982\u4e0b\u65b9\u5f0f\u5373\u53ef\u3002</p> <pre><code>import \"github.com/lihailong/demo/doc2\"  // github.com/lihailong/demo \u662f go.mod\u4e2d\uff0cmodule\u540d\n\nfunc func1() {\n    doc2.Func2()\n}\n</code></pre> <ul> <li>GOPATH\u4e0b\u8fd8\u6709\u4e2asrc\u76ee\u5f55\uff0c\u5728\u4e4b\u524d\u662f\u4e3a\u4e86\u5b58\u653e\u7a0b\u5e8f\u5458\u81ea\u5df1\u7f16\u5199\u7684\u4ee3\u7801\uff0c\u4f46\u662f\u5f15\u5165Go Module\u540e\uff0c\u7a0b\u5e8f\u5458\u53ef\u4ee5\u5728\u4efb\u4f55\u4f4d\u7f6e\u7f16\u5199\u81ea\u5df1\u7684go\u4ee3\u7801\u3002\u4f46\u662f\u901a\u5e38\u6211\u4f1a\u5c06GO\u4ee3\u7801\u653e\u5728<code>$GOPATH/src</code>\u4e0b\u9762\uff0c\u5e76\u4e14\u5728\u8be5\u76ee\u5f55\u4e0b\u521b\u5efa\u4e09\u5c42\u76ee\u5f55\u4f5c\u4e3a\u9879\u76ee\u7684\u6839\u76ee\u5f55\u3002\u4f8b\u5982\u6211\u67d0\u4e2a\u9879\u76ee\u7684\u6839\u76ee\u5f55\u662f\uff1a<code>$GOPATH/src/github.com/longcoding/demo</code>\uff0c\u4e09\u5c42\u76ee\u5f55\u662f<code>github.com/longcoding/demo</code>\uff0c\u547d\u540d\u89c4\u8303\u662f\uff1a\u4ee3\u7801\u6258\u7ba1\u5e73\u53f0\u540d+\u4eba\u547d+\u9879\u76ee\u540d\u3002\u4e0d\u8fc7\u6700\u65b0\u7248Go\u53ef\u4ee5\u5728\u4efb\u4f55\u76ee\u5f55\u4e0b\u7f16\u5199\u4ee3\u7801\u3002</li> </ul>"},{"location":"Go/Go%E4%BE%9D%E8%B5%96%E7%AE%A1%E7%90%86/#_2","title":"\u4f5c\u4e1a","text":"<p>\u6d4b\u9a8c\uff1a\u5728\u6ca1\u6709\u5b89\u88c5GO\u7684Linux\u7cfb\u7edf\u4e0b\uff0c\u4ece0\u5f00\u59cb\u8fd0\u884c\u4e00\u4e2ahertz\u9879\u76ee\u3002</p> <p>\u91cd\u8981\u70b9\uff1a\u73af\u5883\u53d8\u91cf\u4e2d\u914d\u7f6eGOPATH\u548cGOROOT\u3002</p>"},{"location":"Go/Go%E8%AF%AD%E8%A8%80%E8%BE%85%E5%8A%A9%E5%B7%A5%E5%85%B7/","title":"Go\u8bed\u8a00\u8f85\u52a9\u5de5\u5177","text":"<p>[toc]</p>"},{"location":"Go/Go%E8%AF%AD%E8%A8%80%E8%BE%85%E5%8A%A9%E5%B7%A5%E5%85%B7/#curl-converter","title":"curl converter","text":"<p>\u5b98\u65b9\u5730\u5740</p> <p>\u5982\u679c\u4f60\u60f3\u4f7f\u7528\u67d0\u4e2a\u8bed\u8a00\u53d1\u9001\u4e00\u4e2a\u8bf7\u6c42\uff0c\u53ea\u9700\u8981\u6441F12\uff0c\u5e76\u9009\u62e9Network\uff0c\u590d\u5236\u5bf9\u5e94\u8d44\u6e90\u6587\u4ef6\u7684curl\uff0c\u5e76\u5c06\u5b83\u7c98\u8d34\u5230\u8be5\u7f51\u7ad9\u4e2d\uff0c\u9009\u62e9\u67d0\u4e2a\u8bed\u8a00\uff0c\u5373\u53ef\u5f97\u5230\u7f51\u7edc\u8bf7\u6c42\u4ee3\u7801\u3002</p>"},{"location":"Go/Go%E8%AF%AD%E8%A8%80%E8%BE%85%E5%8A%A9%E5%B7%A5%E5%85%B7/#ok-tools","title":"ok tools","text":"<p>\u5b98\u65b9\u5730\u5740</p> <p>\u5982\u679c\u62ff\u5230\u4e86\u67d0\u4e2a\u5bf9\u8c61\u7684json\u5b57\u7b26\u4e32\uff0c\u5219\u53ef\u4ee5\u5c06\u5176\u8f6c\u6210GO\u8bed\u8a00\u7ed3\u6784\u4f53\u3002</p>"},{"location":"Go/go%E5%9F%BA%E7%A1%80/","title":"go\u57fa\u7840","text":"<p>[toc]</p>"},{"location":"Go/go%E5%9F%BA%E7%A1%80/#_1","title":"\u7ed3\u6784\u4f53","text":"<pre><code>package main\n\nimport \"fmt\"\n\ntype user struct {\n    name     string\n    password string\n}\n\nfunc (u user) printName() {\n    fmt.Println(u.name)\n    fmt.Println(u.password)\n}\n\n// \u4e0d\u5efa\u8bae\u4f7f\u7528\u6307\u9488\nfunc (u *user) clearValue() {\n    u.name = \"\u59d3\u540d\u4e3a\u7a7a\"\n    u.password = \"\u5bc6\u7801\u88ab\u6e05\u7a7a\"\n}\n\nfunc main() {\n    u := user{\"lhl\", \"123\"}\n    u.printName()\n    u.clearValue()\n    u.printName()\n}\n</code></pre>"},{"location":"Go/go%E5%9F%BA%E7%A1%80/#_2","title":"\u5f02\u5e38","text":"<pre><code>package main\n\nimport (\n    \"errors\"\n    \"fmt\"\n)\n\ntype User struct {\n    name string\n    age  int\n}\n\nfunc findUser(users []User, name string) (u *User, err error) {\n    for _, v := range users {\n        if v.name == name {\n            return &amp;v, nil\n        }\n    }\n    return nil, errors.New(\"user not found\")\n}\n\nfunc main() {\n    users := []User{{\"lhl\", 8}, {\"jiangly\", 18}, {\"tourist\", 28}}\n    user, err := findUser(users, \"lhl\")\n    if user == nil {\n        fmt.Println(err)\n    } else {\n        fmt.Println(\"\u6210\u529f\u627e\u5230\u6b64\u4eba\uff01\u59d3\u540d\u4e3a\uff1a\", user.name, \"\u5e74\u9f84\u4e3a\uff1a\", user.age)\n    }\n}\n</code></pre>"},{"location":"Go/go%E5%9F%BA%E7%A1%80/#_3","title":"\u5b57\u7b26\u4e32\u64cd\u4f5c","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strings\"\n)\n\nfunc main() {\n    a := \"hello\"\n    fmt.Println(strings.Contains(a, \"ll\"))                // true\n    fmt.Println(strings.Count(a, \"l\"))                    // 2\n    fmt.Println(strings.HasPrefix(a, \"he\"))               // true\n    fmt.Println(strings.HasSuffix(a, \"llo\"))              // true\n    fmt.Println(strings.Index(a, \"ll\"))                   // 2\n    fmt.Println(strings.Join([]string{\"he\", \"llo\"}, \"-\")) // he-llo\n    fmt.Println(strings.Repeat(a, 2))                     // hellohello\n    fmt.Println(strings.Replace(a, \"l\", \"L\", -1))         // heLLo\n    fmt.Println(strings.Split(\"a-b-c\", \"-\"))              // [a, b, c]\n    fmt.Println(strings.ToLower(a))                       // hello\n    fmt.Println(strings.ToUpper(a))                       // HELLO\n    b := \"\u4f60\u597d\"\n    fmt.Println(len(b)) // 6\n}\n</code></pre>"},{"location":"Go/go%E5%9F%BA%E7%A1%80/#_4","title":"\u5b57\u7b26\u4e32\u683c\u5f0f\u5316","text":"<pre><code>package main\n\nimport \"fmt\"\n\ntype point struct {\n    x, y int\n}\n\nfunc main() {\n    s := \"hello\"\n    n := 123\n    p := point{1, 2}\n    fmt.Println(s, n) // hello 123\n    fmt.Println(p)    // {1 2}\n\n    // %v \u53ef\u4ee5\u6253\u5370\u4efb\u4f55\u7c7b\u578b\u7684\u53d8\u91cf\n    fmt.Printf(\"s=%v\\n\", s)  // s=hello\n    fmt.Printf(\"n=%v\\n\", n)  // n=123\n    fmt.Printf(\"p=%v\\n\", p)  // p={1 2}\n    fmt.Printf(\"p=%+v\\n\", p)  // p={x:1 y:2}\n    fmt.Printf(\"p=%#v\\n\", p)  // p=main.point{x:1, y:2}\n\n    f := 3.141592653\n    fmt.Println(f)          // 3.141592653\n    fmt.Printf(\"%.2f\\n\", f) // 3.14\n}\n</code></pre>"},{"location":"Go/go%E5%9F%BA%E7%A1%80/#_5","title":"\u6570\u5b57\u89e3\u6790","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"strconv\"\n)\n\nfunc main() {\n    f, _ := strconv.ParseFloat(\"121.234\", 64)\n    fmt.Println(f) // 121.234\n\n    n, _ := strconv.ParseInt(\"100001\", 2, 32)\n    fmt.Println(n) // 33\n\n    n2, _ := strconv.Atoi(\"123\")\n    fmt.Println(n2) // 123\n\n    n2, err := strconv.Atoi(\"AAA\")\n    fmt.Println(n2, err) // 0 strconv.Atoi: parsing \"AAA\": invalid syntax\n}\n</code></pre>"},{"location":"Go/go%E5%9F%BA%E7%A1%80/#_6","title":"\u731c\u5b57\u8c1c","text":"<pre><code>package main\n\nimport (\n    \"bufio\"\n    \"fmt\"\n    \"math/rand\"\n    \"os\"\n    \"strconv\"\n    \"strings\"\n    \"time\"\n)\n\nfunc main() {\n    // \u8bbe\u5b9a\u53d6\u503c\u8303\u56f4\n    maxNum := 100\n    // \u521d\u59cb\u5316\u968f\u673a\u6570\u51fd\u6570\n    rand.Seed(time.Now().UnixNano())\n    ans := rand.Intn(maxNum)\n    // \u83b7\u53d6\u8f93\u5165\u5bf9\u8c61\n    reader := bufio.NewReader(os.Stdin)\n\n    for {\n        fmt.Printf(\"\u8bf7\u8f93\u5165\u60a8\u731c\u6d4b\u7684\u6570\uff1a\")\n        // \u8bfb\u53d6\u4e00\u884c\uff0c\u5305\u542b\\n\n        data, err := reader.ReadString('\\n')\n        if err != nil {\n            fmt.Println(\"\u8bfb\u53d6\u9519\u8bef\")\n            break\n        }\n        // \u53bb\u6389\u672b\u5c3e\\n\n        data = strings.TrimSuffix(data, \"\\r\\n\")\n        // \u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u6210int\n        num, err := strconv.Atoi(data)\n        if err != nil {\n            fmt.Println(\"data=\", data)\n            fmt.Println(\"num=\", num)\n            fmt.Println(\"err=\", err)\n            fmt.Println(\"\u8bf7\u8f93\u5165\u6574\u6570\uff01\")\n            continue\n        }\n\n        if num &lt; ans {\n            fmt.Println(\"\u4f60\u731c\u5c0f\u5566\uff01\")\n        } else if num &gt; ans {\n            fmt.Println(\"\u4f60\u731c\u5927\u5566\uff01\")\n        } else {\n            fmt.Println(\"\u606d\u559c\u4f60\u731c\u6d4b\u6b63\u786e\uff01\")\n            break\n        }\n    }\n}\n</code></pre>"},{"location":"Go/go%E5%9F%BA%E7%A1%80/#_7","title":"\u7535\u5b50\u8bcd\u5178","text":"<pre><code>package main\n\nimport (\n    \"bufio\"\n    \"bytes\"\n    \"encoding/json\"\n    \"fmt\"\n    \"io/ioutil\"\n    \"log\"\n    \"net/http\"\n    \"os\"\n    \"strings\"\n)\n\n// \u4f7f\u7528marshal\u51fd\u6570\u5c06\u7ed3\u6784\u4f53\u5bfc\u51fa\u4e3ajson\u65f6\uff0c\u53ea\u4f1a\u5bfc\u51fa\u4ee5\u5927\u5199\u5b57\u6bcd\u5f00\u5934\u7684\u53d8\u91cf\ntype DictRequest struct {\n    TransType string `json:\"trans_type\"`\n    Source    string `json:\"source\"`\n    UserId    string `json:\"user_id\"`\n}\n\ntype DictResponse struct {\n    Rc   int `json:\"rc\"`\n    Wiki struct {\n        KnownInLaguages int `json:\"known_in_laguages\"`\n        Description     struct {\n            Source string      `json:\"source\"`\n            Target interface{} `json:\"target\"`\n        } `json:\"description\"`\n        ID   string `json:\"id\"`\n        Item struct {\n            Source string `json:\"source\"`\n            Target string `json:\"target\"`\n        } `json:\"item\"`\n        ImageURL  string `json:\"image_url\"`\n        IsSubject string `json:\"is_subject\"`\n        Sitelink  string `json:\"sitelink\"`\n    } `json:\"wiki\"`\n    Dictionary struct {\n        Prons struct {\n            EnUs string `json:\"en-us\"`\n            En   string `json:\"en\"`\n        } `json:\"prons\"`\n        Explanations []string      `json:\"explanations\"`\n        Synonym      []string      `json:\"synonym\"`\n        Antonym      []string      `json:\"antonym\"`\n        WqxExample   [][]string    `json:\"wqx_example\"`\n        Entry        string        `json:\"entry\"`\n        Type         string        `json:\"type\"`\n        Related      []interface{} `json:\"related\"`\n        Source       string        `json:\"source\"`\n    } `json:\"dictionary\"`\n}\n\nfunc query(word string) {\n    client := &amp;http.Client{}\n    request := DictRequest{TransType: \"en2zh\", Source: word, UserId: \"63c136bd49885f0014cba93c\"}\n    buf, err := json.Marshal(request)\n    if err != nil {\n        log.Fatal(err)\n    }\n    // data \u662f io reader\u7684\u4e00\u79cd\n    data := bytes.NewReader(buf)\n\n    req, err := http.NewRequest(\"POST\", \"https://api.interpreter.caiyunai.com/v1/dict\", data)\n    if err != nil {\n        log.Fatal(err)\n    }\n    req.Header.Set(\"authority\", \"api.interpreter.caiyunai.com\")\n    req.Header.Set(\"accept\", \"application/json, text/plain, */*\")\n    req.Header.Set(\"accept-language\", \"zh-CN,zh;q=0.9,en;q=0.8\")\n    req.Header.Set(\"app-name\", \"xy\")\n    req.Header.Set(\"content-type\", \"application/json;charset=UTF-8\")\n    req.Header.Set(\"device-id\", \"\")\n    req.Header.Set(\"origin\", \"https://fanyi.caiyunapp.com\")\n    req.Header.Set(\"os-type\", \"web\")\n    req.Header.Set(\"os-version\", \"\")\n    req.Header.Set(\"referer\", \"https://fanyi.caiyunapp.com/\")\n    req.Header.Set(\"sec-ch-ua\", `\"Not?A_Brand\";v=\"8\", \"Chromium\";v=\"108\", \"Google Chrome\";v=\"108\"`)\n    req.Header.Set(\"sec-ch-ua-mobile\", \"?0\")\n    req.Header.Set(\"sec-ch-ua-platform\", `\"Windows\"`)\n    req.Header.Set(\"sec-fetch-dest\", \"empty\")\n    req.Header.Set(\"sec-fetch-mode\", \"cors\")\n    req.Header.Set(\"sec-fetch-site\", \"cross-site\")\n    req.Header.Set(\"user-agent\", \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36\")\n    req.Header.Set(\"x-authorization\", \"token:qgemv4jr1y38jyq6vhvi\")\n    resp, err := client.Do(req)\n    if err != nil {\n        log.Fatal(err)\n    }\n    defer resp.Body.Close()\n    bodyText, err := ioutil.ReadAll(resp.Body)\n    if err != nil {\n        log.Fatal(err)\n    }\n    if resp.StatusCode != 200 {\n        log.Fatal(\"bad StatusCode:\", resp.StatusCode, \"body\", string(bodyText))\n    }\n    var dictResponse DictResponse\n    err = json.Unmarshal(bodyText, &amp;dictResponse)\n    if err != nil {\n        log.Fatal(err)\n    }\n    fmt.Println(word, \"UK:\", dictResponse.Dictionary.Prons.En, \"US:\", dictResponse.Dictionary.Prons.EnUs)\n    for _, item := range dictResponse.Dictionary.Explanations {\n        fmt.Println(item)\n    }\n}\n\nfunc main() {\n    fmt.Printf(\"\u8bf7\u8f93\u5165\u5355\u8bcd\uff1a\")\n    reader := bufio.NewReader(os.Stdin)\n    str, err := reader.ReadString('\\n')\n    if err != nil {\n        fmt.Println(\"\u8bfb\u53d6\u9519\u8bef\")\n        return\n    }\n    str = strings.TrimSuffix(str, \"\\r\\n\")\n    query(str)\n}\n</code></pre>"},{"location":"Go/go%E5%9F%BA%E7%A1%80/#_8","title":"\u670d\u52a1\u5668&amp;\u5ba2\u6237\u7aef\u901a\u4fe1","text":"<pre><code>package main\n\nimport (\n    \"bufio\"\n    \"log\"\n    \"net\"\n)\n\nfunc process(conn net.Conn) {\n    defer conn.Close()\n    // reader \u662f\u5e26\u7f13\u51b2\u7684\u6d41\n    reader := bufio.NewReader(conn)\n    for {\n        b, err := reader.ReadByte()\n        if err != nil {\n            break\n        }\n        _, err = conn.Write([]byte{b})\n        if err != nil {\n            break\n        }\n    }\n}\n\n// \u9996\u5148\u8fd0\u884c\u8fd9\u4e2a\u7a0b\u5e8f\uff0c\u6b64\u65f6\u5f00\u542f\u670d\u52a1\u5668\n// \u5b89\u88c5NCcat\uff0c\u5e76\u914d\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u7136\u540e\u624d\u80fd\u4f7f\u7528nc\u547d\u4ee4\n// \u7136\u540e\u6267\u884c\u547d\u4ee4\"nc 127.0.0.1 1080\"\u8ba9\u5ba2\u6237\u7aef\u53d1\u8d77TCP\u6216UDP\u8fde\u63a5\n// \u5ba2\u6237\u7aef\u4e2d\u8f93\u5165\u4e00\u6bb5\u5b57\u7b26\uff0c\u670d\u52a1\u5668\u63a5\u6536\u5230\u540e\u4f1a\u5c06\u5b57\u7b26\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\nfunc main() {\n    server, err := net.Listen(\"tcp\", \"127.0.0.1:1080\")\n    if err != nil {\n        panic(err)\n    }\n    for {\n        client, err := server.Accept()\n        if err != nil {\n            log.Printf(\"Accept fail %v\\n\", err)\n            continue\n        }\n        // go \u5f00\u542f\u4e00\u4e2a\u7ebf\u7a0b\n        go process(client)\n    }\n}\n</code></pre>"},{"location":"Go/go%E5%9F%BA%E7%A1%80/#socks5","title":"SOCKS5 \u4ee3\u7406\u534f\u8bae","text":"<p>\u53c2\u8003GitHub\u9879\u76ee</p>"},{"location":"Go/go%E5%9F%BA%E7%A1%80/#_9","title":"\u534f\u7a0b","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"time\"\n)\n\nfunc printInfo(x int) {\n    fmt.Println(\"this is:\", x)\n}\n\nfunc main() {\n    for i := 1; i &lt;= 5; i++ {\n        go func(j int) {\n            printInfo(j)\n        }(i)\n    }\n    time.Sleep(time.Second)\n}\n</code></pre>"},{"location":"Go/go%E5%9F%BA%E7%A1%80/#_10","title":"\u7ba1\u9053","text":"<pre><code>package main\n\nimport \"fmt\"\n\nfunc calcSquare() {\n    // \u65e0\u7f13\u51b2\u7684channel\n    src := make(chan int)\n    // \u5e26\u7f13\u51b2\u7684channel\uff0c\u53ef\u89e3\u51b3\u751f\u4ea7\u8005\u901f\u5ea6\u5927\u4e8e\u6d88\u8d39\u8005\u901f\u5ea6\u7684\u95ee\u9898\n    dest := make(chan int, 5)\n\n    go func() {\n        defer close(src)\n        for i := 1; i &lt;= 10; i++ {\n            src &lt;- i\n        }\n    }()\n\n    go func() {\n        defer close(dest)\n        for i := range src {\n            dest &lt;- i * i\n        }\n    }()\n\n    for i := range dest {\n        fmt.Println(i)\n    }\n}\n\nfunc main() {\n    calcSquare()\n}\n</code></pre>"},{"location":"Go/go%E5%9F%BA%E7%A1%80/#lock","title":"\u5e76\u53d1\u5b89\u5168Lock","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"sync\"\n    \"time\"\n)\n\nvar (\n    x    int32\n    lock sync.Mutex\n)\n\nfunc addWithLock() {\n    for i := 0; i &lt; 2000; i++ {\n        lock.Lock()\n        x++\n        lock.Unlock()\n    }\n}\n\nfunc addWithoutLock() {\n    for i := 0; i &lt; 2000; i++ {\n        x++\n    }\n}\n\nfunc main() {\n    for i := 0; i &lt; 5; i++ {\n        go addWithLock()\n    }\n\n    time.Sleep(time.Second)\n    fmt.Println(\"with lock, x=\", x)\n    x = 0\n\n    for i := 0; i &lt; 5; i++ {\n        go addWithoutLock()\n    }\n    fmt.Println(\"without lock, x=\", x)\n}\n</code></pre>"},{"location":"Go/go%E5%9F%BA%E7%A1%80/#waitgroup","title":"waitgroup","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"sync\"\n)\n\nfunc main() {\n    wg := sync.WaitGroup{}\n    wg.Add(5)\n    for i := 1; i &lt;= 5; i++ {\n        go func(j int) {\n            defer wg.Done()\n            fmt.Printf(\"j=%v\\n\", j)\n        }(i)\n    }\n    wg.Wait()\n}\n</code></pre>"},{"location":"Go/go%E5%9F%BA%E7%A1%80/#_11","title":"\u5355\u5143\u6d4b\u8bd5","text":"<p>judgement.go</p> <pre><code>package main\n\nfunc Judgement(score int8) bool {\n    if score &gt;= 60 {\n        return true\n    }\n    return false\n}\n</code></pre> <p>judgement_test.go</p> <pre><code>package main\n\nimport (\n    // goland \u4f1a\u5728go.mod\u6587\u4ef6\u4e2d\u5f15\u5165\u76f8\u5173\u4f9d\u8d56\n    \"github.com/stretchr/testify/assert\"\n    \"testing\"\n)\n\n// \u6d4b\u8bd5\u51fd\u6570\u5fc5\u987b\u4ee5Test\u5f00\u5934\nfunc TestJudgement(t *testing.T) {\n    output := Judgement(80)\n    assert.Equal(t, true, output)\n}\n</code></pre> <p>\u591a\u79cd\u6d4b\u8bd5\u65b9\u6cd5\uff1a</p> <ol> <li>\u666e\u901a\u6d4b\u8bd5\uff1a<code>go test judgement_test.go judgement.go</code></li> <li>\u6d4b\u8bd5\u8986\u76d6\u7387\uff1a<code>go test judgement_test.go judgement.go --cover</code></li> <li>\u4e00\u822c\u8986\u76d6\u7387\u4e3a50%~60%</li> <li>\u8f83\u9ad8\u8986\u76d6\u7387\u4e3a80%</li> </ol>"},{"location":"Go/go%E5%9F%BA%E7%A1%80/#_12","title":"\u6869\u51fd\u6570","text":"<p>\u95ee\uff1a\u4e3a\u4ec0\u4e48\u8981\u7528\u6869\u51fd\u6570\uff1f</p> <p>\u7b54\uff1a</p> <p>\u5bf9\u4e8e\u6211\u4eec\u5e73\u65f6\u5f00\u53d1\u7684\u4e1a\u52a1\u4ee3\u7801\uff0c\u5355\u4e2a\u51fd\u6570\u5f80\u5f80\u4e0d\u662f\u72ec\u7acb\u7684\uff0c\u5b83\u9700\u8981\u4f9d\u8d56\u4e8e\u5176\u4ed6\u6a21\u5757\u3001\u7b2c\u4e09\u65b9\u5e93\u3001\u6570\u636e\u5e93\u3001\u6d88\u606f\u4ea4\u4e92\u7684\u7ed3\u679c\u7b49\u7b49\u3002</p> <p>\u5bf9\u4e8e\u8fd9\u79cd\u4ee3\u7801\u505a\u5355\u5143\u6d4b\u8bd5\uff0c\u5c31\u4f1a\u53d8\u5f97\u590d\u6742\u8bb8\u591a\uff0c\u800c\u5bf9\u4e8e\u5f53\u524d\u8981\u6d4b\u8bd5\u7684\u51fd\u6570\u6765\u8bf4\uff0c\u8fd9\u4e9b\u88ab\u4f9d\u8d56\u7684\u5176\u4ed6\u51fd\u6570\uff0c\u65e0\u975e\u5c31\u662f\u8fd4\u56de\u4e0d\u540c\u7684\u6570\u636e\u800c\u5df2\u3002\u6240\u4ee5\u5728\u505a\u5355\u5143\u6d4b\u8bd5\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ea\u9700\u8981\u8ba9\u8fd9\u4e9b\u88ab\u4f9d\u8d56\u7684\u5176\u4ed6\u51fd\u6570\u8fd4\u56de\u6211\u4eec\u671f\u671b\u7684\u6570\u636e\uff0c\u5c31\u53ef\u4ee5\u7ee7\u7eed\u6d4b\u8bd5\u6211\u4eec\u5f53\u524d\u9700\u8981\u6d4b\u8bd5\u7684\u51fd\u6570\u3002</p> <p>\u6253\u6869\u662f\u6307\u5728\u6d4b\u8bd5\u5305\u4e2d\u521b\u5efa\u4e00\u4e2a\u6a21\u62df\u65b9\u6cd5\uff0c\u7528\u4e8e\u66ff\u6362\u751f\u6210\u4ee3\u7801\u4e2d\u7684\u65b9\u6cd5\u3002</p> <p>\u6848\u4f8b\uff1a\u5047\u5b9a\u6211\u4eec\u6709\u4ee5\u4e0b\u4ee3\u7801</p> <p>process.go</p> <pre><code>package main\n\nimport (\n    \"bufio\"\n    \"os\"\n    \"strings\"\n)\n\nfunc ReadFirstLine() string {\n    open, err := os.Open(\"log\")\n    defer open.Close()\n    if err != nil {\n        return \"\"\n    }\n    scanner := bufio.NewScanner(open)\n    for scanner.Scan() {\n        return scanner.Text()\n    }\n    return \"\"\n}\n\nfunc ProcessFirstLine() string {\n    line := ReadFirstLine()\n    destLine := strings.ReplaceAll(line, \"11\", \"00\")\n    return destLine\n}\n</code></pre> <p>process_test.go</p> <pre><code>package main\n\nimport (\n    \"github.com/stretchr/testify/assert\"\n    \"testing\"\n)\n\nfunc TestProcessFirstLine(t *testing.T) {\n    firstLine := ProcessFirstLine()\n    assert.Equal(t, \"line00\", firstLine)\n}\n</code></pre> <p>log</p> <pre><code>line00\n</code></pre> <p>\u6211\u4eec\u7684\u76ee\u7684\u662f\u6d4b\u8bd5\u51fd\u6570<code>ProcessFirstLine</code>\u3002\u4f46\u662f\u51fd\u6570<code>ProcessFirstLine</code>\u4f9d\u8d56\u4e8e\u51fd\u6570<code>ReadFirstLine</code>\uff0c\u800c\u51fd\u6570<code>ReadFirstLine</code>\u5f3a\u4f9d\u8d56\u4e8e<code>log</code>\u6587\u4ef6\uff0c\u5f53<code>log</code>\u6587\u4ef6\u53d8\u5316\u65f6\uff0c<code>ReadFirstLine</code>\u51fd\u6570\u4e5f\u4f1a\u8f93\u51fa\u4e0d\u540c\u7684\u503c\uff0c\u4ece\u800c\u5f71\u54cd<code>ProcessFirstLine</code>\u51fd\u6570\u3002</p> <p>\u56e0\u4e3a\u6d4b\u8bd5\u7684\u51fd\u6570\u662f<code>ProcessFirstLine</code>\uff0c\u5176\u4f59\u51fd\u6570\u90fd\u4e0d\u91cd\u8981\u3002\u6240\u4ee5\u6211\u4eec\u5b83\u4f9d\u8d56\u7684\u51fd\u6570\u8f93\u51fa\u4e00\u4e2a\u4e0d\u53d8\u7684\u503c\uff0c\u4ece\u800c\u65b9\u4fbf\u6d4b\u8bd5\u3002</p> <p>\u4ec5\u6709process_test.go\u6587\u4ef6\u53d1\u751f\u53d8\u5316</p> <pre><code>package main\n\nimport (\n    \"bou.ke/monkey\"\n    \"github.com/stretchr/testify/assert\"\n    \"testing\"\n)\n\nfunc TestProcessFirstLine(t *testing.T) {\n    monkey.Patch(ReadFirstLine, func() string {\n        return \"line110\"\n    })\n    defer monkey.Unpatch(ReadFirstLine)\n    firstLine := ProcessFirstLine()\n    assert.Equal(t, \"line000\", firstLine)\n}\n</code></pre> <p>\u901a\u8fc7\u6869\u51fd\u6570\u62dc\u6258\u4e86\u5bf9\u672c\u5730\u6587\u4ef6\u7684\u5f3a\u4f9d\u8d56\u3002</p>"},{"location":"Go/go%E5%9F%BA%E7%A1%80/#_13","title":"\u57fa\u51c6\u6d4b\u8bd5/\u538b\u529b\u6d4b\u8bd5","text":"<p>\u9700\u8981\u63d0\u524d<code>go get github.com/bytedance/gopkg</code></p> <p>select.go</p> <pre><code>package main\n\nimport \"github.com/bytedance/gopkg/lang/fastrand\"\n\nvar servers [10]int\n\nfunc InitServers() {\n    for i := 0; i &lt; 10; i++ {\n        servers[i] = 101 + i\n    }\n}\n\nfunc Select() int {\n    return servers[fastrand.Intn(10)]\n}\n</code></pre> <p>select_test.go</p> <pre><code>package main\n\nimport (\n    \"testing\"\n)\n\n// \u4e32\u884c\u538b\u529b\u6d4b\u8bd5\n// \u538b\u6d4b\u51fd\u6570\u5fc5\u987b\u4ee5Benchmark\u5f00\u5934\nfunc BenchmarkSelect(b *testing.B) {\n    InitServers()\n    b.ResetTimer()\n    for i := 0; i &lt; b.N; i++ {\n        Select()\n    }\n}\n\n// \u5e76\u884c\u538b\u529b\u6d4b\u8bd5\nfunc BenchmarkSelectParallel(b *testing.B) {\n    InitServers()\n    b.ResetTimer()\n    b.RunParallel(func(pb *testing.PB) {\n        for pb.Next() {\n            Select()\n        }\n    })\n}\n</code></pre>"},{"location":"Go/go%E5%9F%BA%E7%A1%80/#gin","title":"Gin\u5b9e\u6218","text":"<p>\u5b89\u88c5\u4f9d\u8d56\uff1a<code>go get -u github.com/gin-gonic/gin</code></p>"},{"location":"Go/go%E8%AF%AD%E8%A8%80%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/","title":"go\u8bed\u8a00\u4ee3\u7801\u89c4\u8303","text":"<p>[toc]</p>"},{"location":"Go/go%E8%AF%AD%E8%A8%80%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/#_1","title":"\u6ce8\u91ca","text":"<ol> <li>\u6ce8\u91ca\u5e94\u8be5\u89e3\u91ca\u4ee3\u7801\u7684\u4f5c\u7528\u662f\u4ec0\u4e48\u3002</li> <li>\u6ce8\u91ca\u5e94\u8be5\u89e3\u91ca\u4ee3\u7801\u4e3a\u4ec0\u4e48\u8981\u6709\u8fd9\u4e2a\u529f\u80fd\u3002</li> <li>\u6ce8\u91ca\u5e94\u8be5\u89e3\u91ca\u4ee3\u7801\u662f\u600e\u4e48\u505a\u7684\u3002</li> <li>\u6ce8\u91ca\u5e94\u8be5\u89e3\u91ca\u4ee3\u7801\u4ec0\u4e48\u65f6\u5019\u4f1a\u51fa\u9519\u3002</li> </ol>"},{"location":"Go/go%E8%AF%AD%E8%A8%80%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/#_2","title":"\u547d\u540d\u89c4\u8303","text":"<ol> <li>\u7f29\u7565\u8bcd\u5168\u90e8\u5927\u5199\u3002</li> <li>\u6b63\u4f8b\uff1a<code>ServerHTTP</code></li> <li>\u53cd\u4f8b\uff1a<code>ServerHttp</code></li> <li>\u51fd\u6570\u540d\u4e0d\u80fd\u643a\u5e26\u5305\u540d\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002</li> <li>\u6b63\u4f8b\uff1ahttp\u5305\u4e2d\uff0c\u51fd\u6570\u540d\u4e3a<code>Server</code>\u3002</li> <li>\u53cd\u4f8b\uff1ahttp\u5305\u4e2d\uff0c\u51fd\u6570\u540d\u4e3a<code>ServerHTTP</code>\u3002</li> <li>\u5173\u4e8epackage\u547d\u540d</li> <li>\u53ea\u6709\u5c0f\u5199\u5b57\u6bcd\u3002</li> <li>\u7b80\u77ed\u4e14\u5305\u542b\u4e00\u5b9a\u7684\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002</li> <li>\u4e0d\u8981\u4e0e\u6807\u51c6\u5e93\u540c\u540d\u3002</li> <li>\u4f7f\u7528\u5355\u6570\u3002</li> </ol>"},{"location":"Go/go%E8%AF%AD%E8%A8%80%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/#_3","title":"\u63a7\u5236\u6d41\u7a0b","text":"<ol> <li> <p>\u4fdd\u6301\u6700\u5c0f\u7f29\u8fdb\u3002</p> </li> <li> <p>\u6b63\u4f8b\uff1a</p> <p><code>go   func Do1() error {       err := Do2()       if err != nil {           return err       }       err := Do3()       if err != nil {           return err       }       return nil   }</code></p> </li> <li> <p>\u53cd\u4f8b\uff1a</p> <p><code>go   func Do1() error {       err := Do2()       if err == nil {           err := Do3()           if err == nil {               return nil           }           return err       }       return err   }</code></p> </li> </ol>"},{"location":"Go/go%E8%AF%AD%E8%A8%80%E4%BB%A3%E7%A0%81%E8%A7%84%E8%8C%83/#_4","title":"\u5f02\u5e38\u5904\u7406","text":"<ol> <li> <p>\u7b80\u5355\u9519\u8bef</p> </li> <li> <p>\u7b80\u5355\u9519\u8bef\u6307\u7684\u662f\u4ec5\u51fa\u73b0\u4e00\u6b21\u7684\u9519\u8bef\uff0c\u4e14\u8be5\u9519\u8bef\u4e0d\u4f1a\u51fa\u73b0\u5728\u5176\u4ed6\u5730\u65b9\u3002</p> </li> <li>\u4f18\u5148\u4f7f\u7528<code>errors.New</code>\u521b\u5efa\u533f\u540d\u53d8\u91cf\u8868\u793a\u7b80\u5355\u9519\u8bef\u3002</li> <li>\u4f7f\u7528<code>fmt.Errorf</code>\u683c\u5f0f\u5316\u3002</li> </ol> <p><code>go    func check(req *Request, via []*Request) error {        if len(via) &gt;= 10 {            return errors.New(\"Stop!\")        }        return nil    }</code></p>"},{"location":"Go/go%E8%AF%AD%E8%A8%80%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE/","title":"go\u8bed\u8a00\u6027\u80fd\u4f18\u5316\u5efa\u8bae","text":"<p>[toc]</p>"},{"location":"Go/go%E8%AF%AD%E8%A8%80%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE/#make","title":"\u5c3d\u53ef\u80fd\u5728\u4f7f\u7528make()\u521d\u59cb\u5316\u5207\u7247\u65f6\u63d0\u4f9b\u5bb9\u91cf\u4fe1\u606f","text":"<pre><code>package pro2\n\nimport \"testing\"\n\nfunc NoPreAlloc(size int) {\n    data := make([]int, 0)\n    for k := 0; k &lt; size; k++ {\n        data = append(data, k)\n    }\n}\n\nfunc PreAlloc(size int) {\n    data := make([]int, 0, size)\n    for k := 0; k &lt; size; k++ {\n        data = append(data, k)\n    }\n}\n\nfunc BenchmarkNoPreAlloc(b *testing.B) {\n    for i := 0; i &lt; b.N; i++ {\n        NoPreAlloc(1000)\n    }\n}\n\nfunc BenchmarkPreAlloc(b *testing.B) {\n    for i := 0; i &lt; b.N; i++ {\n        PreAlloc(1000)\n    }\n}\n</code></pre> <p>\u6d4b\u8bd5\u6307\u4ee4\uff1a</p> <pre><code># cmd\u4e2d\ngo test -bench=. -benchmem\n# powershell\u4e2d\ngo test -bench=\".\" -benchmem\n</code></pre> <p>\u6d4b\u8bd5\u7ed3\u679c\uff1a</p> <pre><code>goos: windows\ngoarch: amd64\npkg: awesomeProject/pro2\ncpu: AMD Ryzen 5 3400G with Radeon Vega Graphics\nBenchmarkNoPreAlloc-8             174656              6075 ns/op           25208 B/op         12 allocs/op\nBenchmarkPreAlloc-8               629514              2087 ns/op            8192 B/op          1 allocs/op\nPASS\nok      awesomeProject/pro2     2.718s\n</code></pre>"},{"location":"Go/go%E8%AF%AD%E8%A8%80%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE/#copyre-slice","title":"\u7528copy\u4ee3\u66ffre-slice","text":"<p>\u5728\u5df2\u6709\u5207\u7247\u4e0a\u521b\u5efa\u65b0\u7684\u5207\u7247\uff0c\u4e0d\u4f1a\u521b\u5efa\u65b0\u7684\u5e95\u5c42\u6570\u7ec4\uff0c\u5bfc\u81f4\u65e7\u7684\u5927\u5207\u7247\u8fdf\u8fdf\u4e0d\u80fd\u91ca\u653e\u3002</p> <pre><code>import (\n    \"math/rand\"\n    \"testing\"\n    \"time\"\n)\n\nfunc generateWithCap(n int) []int {\n    rand.Seed(time.Now().UnixNano())\n    nums := make([]int, 0, n)\n    for i := 0; i &lt; n; i++ {\n        nums = append(nums, rand.Int())\n    }\n    return nums\n}\n\nfunc GetLastBySlice(origin []int) []int {\n    return origin[len(origin)-2:]\n}\n\nfunc GetLastByCopy(origin []int) []int {\n    result := make([]int, 2)\n    copy(result, origin[len(origin)-2:])\n    return result\n}\n\nfunc testGetLast(t *testing.T, f func([]int) []int) {\n    result := make([][]int, 0)\n    for k := 0; k &lt; 100; k++ {\n        origin := generateWithCap(10 * 1024 * 1024)\n        result = append(result, f(origin))\n    }\n}\n\nfunc TestGetLastBySlice(t *testing.T) {\n    testGetLast(t, GetLastBySlice)\n}\n\nfunc TestGetLastByCopy(t *testing.T) {\n    testGetLast(t, GetLastByCopy)\n}\n</code></pre> <p>\u6d4b\u8bd5\u6307\u4ee4\uff1a</p> <pre><code>go test -run=\".\" -v\n</code></pre> <p>\u6d4b\u8bd5\u7ed3\u679c\uff1a</p> <pre><code>=== RUN   TestGetLastBySlice\n--- PASS: TestGetLastBySlice (20.87s)\n=== RUN   TestGetLastByCopy\n--- PASS: TestGetLastByCopy (18.71s)\nPASS\nok      awesomeProject/pro3     40.552s\n</code></pre>"},{"location":"Go/go%E8%AF%AD%E8%A8%80%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E5%BB%BA%E8%AE%AE/#map","title":"\u4f7f\u7528map\u65f6\u9884\u5206\u914d\u5185\u5b58","text":"<pre><code>package pro4\n\nimport \"testing\"\n\nfunc NoPreAlloc(size int) {\n    data := make(map[int]int)\n    for i := 0; i &lt; size; i++ {\n        data[i] = i\n    }\n}\n\nfunc PreAlloc(size int) {\n    data := make(map[int]int, size)\n    for i := 0; i &lt; size; i++ {\n        data[i] = i\n    }\n}\n\nfunc BenchmarkNoPreAlloc(b *testing.B) {\n    for i := 0; i &lt; b.N; i++ {\n        NoPreAlloc(1000)\n    }\n}\n\nfunc BenchmarkPreAlloc(b *testing.B) {\n    for i := 0; i &lt; b.N; i++ {\n        PreAlloc(1000)\n    }\n}\n</code></pre> <p>\u6d4b\u8bd5\u6307\u4ee4\uff1a</p> <pre><code>go test -bench=\".\" -benchmem\n</code></pre> <p>\u6d4b\u8bd5\u7ed3\u679c\uff1a</p> <pre><code>goos: windows\ngoarch: amd64                                       \npkg: awesomeProject/pro4                            \ncpu: AMD Ryzen 5 3400G with Radeon Vega Graphics    \nBenchmarkNoPreAlloc-8              15423             76923 ns/op           86543 B/op         64 allocs/op\nBenchmarkPreAlloc-8                39940             31000 ns/op           41097 B/op          6 allocs/op\nPASS\nok      awesomeProject/pro4     3.748s\n</code></pre>"},{"location":"Go/http%E6%9C%8D%E5%8A%A1%E5%99%A8/","title":"\u57fa\u4e8ego\u8bed\u8a00\u5b9e\u73b0http\u670d\u52a1\u5668","text":"<p>[toc]</p>"},{"location":"Go/http%E6%9C%8D%E5%8A%A1%E5%99%A8/#_1","title":"\u5199\u5728\u524d\u9762","text":"<p>\u8be5\u9879\u76ee\u6211\u4eec\u4f7f\u7528go\u81ea\u5e26\u7684http\u5e93\uff0c\u800c\u4e0d\u662f\u81ea\u5df1\u89e3\u6790http\u62a5\u6587\uff0c\u5e76\u8fd4\u56de\u8bf7\u6c42\u3002\u56e0\u6b64\u7a0b\u5e8f\u7b80\u5316\u4e86\u5f88\u591a\u3002</p>"},{"location":"Go/http%E6%9C%8D%E5%8A%A1%E5%99%A8/#_2","title":"\u4ee3\u7801","text":"<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"net/http\"\n)\n\nfunc main() {\n    // \u5b9a\u4e49\u5904\u7406\u8bf7\u6c42\u7684\u51fd\u6570\n    http.HandleFunc(\"/hello\", func(w http.ResponseWriter, r *http.Request) {\n        fmt.Fprintf(w, \"Hello, World!\")\n    })\n    http.HandleFunc(\"/login\", func(w http.ResponseWriter, r *http.Request) {\n        fmt.Fprintf(w, \"login page\")\n    })\n\n    // \u542f\u52a8HTTP\u670d\u52a1\u5668\uff0c\u76d1\u542c8080\u7aef\u53e3\n    fmt.Println(\"Server is listening on port 8080...\")\n    http.ListenAndServe(\":8080\", nil)\n}\n</code></pre>"},{"location":"Go/socket%E7%BC%96%E7%A8%8B%E4%B9%8B%E5%9F%BA%E4%BA%8Etcp%E9%80%9A%E4%BF%A1/","title":"socket\u7f16\u7a0b\u4e4b\u57fa\u4e8etcp\u901a\u4fe1","text":"<p>TCP\u5ba2\u6237\u7aef</p> <pre><code>package main\n\nimport (\n    \"fmt\"\n    \"net\"\n    \"os\"\n)\n\nfunc main() {\n    // \u5efa\u7acbTCP\u8fde\u63a5\n    conn, err := net.Dial(\"tcp\", \"127.0.0.1:8888\")\n    if err != nil {\n        fmt.Println(\"\u8fde\u63a5\u5931\u8d25\uff1a\", err)\n        os.Exit(1)\n    }\n    defer conn.Close()\n\n    // \u53d1\u9001\u6d88\u606f\n    msg := \"Hello, server!\"\n    _, err = conn.Write([]byte(msg))\n    if err != nil {\n        fmt.Println(\"\u53d1\u9001\u6d88\u606f\u5931\u8d25\uff1a\", err)\n        os.Exit(1)\n    }\n\n    // \u63a5\u6536\u54cd\u5e94\n    buf := make([]byte, 1024)\n    n, err := conn.Read(buf)\n    if err != nil {\n        fmt.Println(\"\u63a5\u6536\u54cd\u5e94\u5931\u8d25\uff1a\", err)\n        os.Exit(1)\n    }\n    response := string(buf[:n])\n    fmt.Println(\"\u6536\u5230\u54cd\u5e94\uff1a\", response)\n}\n</code></pre> <p>TCP\u670d\u52a1\u7aef</p> <pre><code>package main\n\nimport (\n    \"fmt\"\n    \"net\"\n)\n\nfunc main() {\n    // \u76d1\u542c\u672c\u57308888\u7aef\u53e3\n    listener, err := net.Listen(\"tcp\", \":8888\")\n    if err != nil {\n        fmt.Println(\"Error listening:\", err.Error())\n        return\n    }\n    defer listener.Close()\n\n    fmt.Println(\"Server started, waiting for clients...\")\n\n    // \u5faa\u73af\u7b49\u5f85\u5ba2\u6237\u7aef\u8fde\u63a5\n    for {\n        conn, err := listener.Accept()\n        if err != nil {\n            fmt.Println(\"Error accepting:\", err.Error())\n            continue\n        }\n\n        fmt.Println(\"Client connected:\", conn.RemoteAddr().String())\n\n        // \u521b\u5efa\u4e00\u4e2agoroutine\u5904\u7406\u5ba2\u6237\u7aef\u8bf7\u6c42\n        go handleRequest(conn)\n    }\n}\n\nfunc handleRequest(conn net.Conn) {\n    defer conn.Close()\n\n    // \u8bfb\u53d6\u5ba2\u6237\u7aef\u53d1\u9001\u7684\u6570\u636e\n    buf := make([]byte, 1024)\n    // n\u4e3a\u8bfb\u53d6\u7684\u6570\u636e\u957f\u5ea6\n    n, err := conn.Read(buf)\n    if err != nil {\n        fmt.Println(\"Error reading:\", err.Error())\n        return\n    }\n\n    // \u5c06\u6536\u5230\u7684\u6570\u636e\u8f6c\u4e3a\u5b57\u7b26\u4e32\u5e76\u6253\u5370\n    data := string(buf[:n])\n    fmt.Println(\"Received data:\\n\", data)\n\n    // \u7ed9\u5ba2\u6237\u7aef\u53d1\u9001\u54cd\u5e94\n    response := \"Hello, client!\"\n    _, err = conn.Write([]byte(response))\n    if err != nil {\n        fmt.Println(\"Error writing:\", err.Error())\n        return\n    }\n}\n</code></pre>"},{"location":"Go/socks5%E6%9C%8D%E5%8A%A1%E5%99%A8/","title":"socks5\u670d\u52a1\u5668","text":"<p>[toc]</p>"},{"location":"Go/socks5%E6%9C%8D%E5%8A%A1%E5%99%A8/#_1","title":"\u53c2\u8003\u6587\u6863","text":"<p>rfc1928 SOCKS Protocol Version 5</p>"},{"location":"Go/socks5%E6%9C%8D%E5%8A%A1%E5%99%A8/#socks5_1","title":"\u4e3a\u4ec0\u4e48\u8981\u6709socks5\u670d\u52a1\u5668","text":""},{"location":"Java/AQS/","title":"AQS","text":"<p>[toc]</p>"},{"location":"Java/AQS/#aqs_1","title":"AQS\u662f\u4ec0\u4e48","text":"<p><code>AQS</code>\u662f\u4e00\u4e2a<code>JUC</code>\u5305\u91cc\u6838\u5fc3\u7684\u62bd\u8c61\u7c7b\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u7ee7\u627f<code>AQS</code>\u7c7b\u5b9e\u73b0\u81ea\u5b9a\u4e49\u540c\u6b65\u5668\u7c7b\uff0c\u4ece\u800c\u66f4\u65b9\u4fbf\u5b9e\u73b0\u5404\u79cd\u540c\u6b65\u673a\u5236\uff0c\u4f8b\u5982\u9501\u3001\u4fe1\u53f7\u91cf\u3001\u5012\u8ba1\u65f6\u5668\u3002</p> <p><code>AQS</code>\u7684\u6838\u5fc3\u601d\u60f3\u662f\u57fa\u4e8e\u4e00\u4e2a\u53cc\u5411\u94fe\u8868\u961f\u5217\u6765\u5b9e\u73b0\u540c\u6b65\u3002</p>"},{"location":"Java/AQS/#_1","title":"\u591a\u7ebf\u7a0b\u5e76\u53d1\u7684\u6311\u6218\u4ee5\u53ca\u89e3\u51b3\u65b9\u6848","text":"<p>\u5f53\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8bbf\u95ee\u76f8\u540c\u7684\u5171\u4eab\u8d44\u6e90\u65f6\uff0c\u4f1a\u9047\u5230\u4ee5\u4e0b\u95ee\u9898\uff1a</p> <ol> <li>\u54ea\u4e2a/\u54ea\u4e9b\u7ebf\u7a0b\u53ef\u4ee5\u83b7\u5f97\u8be5\u5171\u4eab\u8d44\u6e90\uff1f</li> <li>\u6ca1\u6709\u83b7\u5f97\u5171\u4eab\u8d44\u6e90\u7684\u7ebf\u7a0b\u8be5\u600e\u4e48\u529e\uff1f</li> <li>\u4f7f\u7528\u5b8c\u5171\u4eab\u8d44\u6e90\u540e\uff0c\u8be5\u5982\u4f55\u901a\u77e5\u522b\u7684\u7ebf\u7a0b\uff1f</li> </ol> <p>\u4e0b\u9762\u6211\u4e3e\u4e00\u4e2a\u6848\u4f8b\uff1a\u591a\u4e2a\u4eba\u540c\u65f6\u9700\u8981\u4e89\u62a2\u4e00\u4e2a\u5395\u6240\u3002</p> <p></p> <p>\u5982\u679c\u8ba9\u8fd9\u4e9b\u4eba\u76f2\u76ee\u4e89\u62a2\u5395\u6240\uff0c\u53ef\u80fd\u4f1a\u975e\u5e38\u6df7\u4e71\u3002</p> <p>\u6309\u7167\u6211\u4eec\u6734\u7d20\u7684\u601d\u60f3\u6765\u770b\uff0c\u5e94\u8be5\u8ba9\u8fd9\u4e9b\u4eba\u6392\u6210\u4e00\u961f\uff0c\u7136\u540e\u6309\u7167\u5148\u6765\u540e\u5230\u7684\u65b9\u5f0f\u6709\u5e8f\u4f7f\u7528\u5395\u6240\u3002</p> <p></p> <p>AQS\u7684\u601d\u60f3\u5c31\u662f\u8fd9\u6837\uff01AQS\u57fa\u4e8e\u53cc\u5411\u94fe\u8868\u961f\u5217\u7ba1\u7406\u7ebf\u7a0b\u3002</p> <p>\u5728\u4f7f\u7528AQS\u7684\u4f7f\u7528\uff0c\u901a\u5e38\u4f1a\u8ba9\u81ea\u5b9a\u4e49\u7684\u540c\u6b65\u5668\u7c7b<code>extends</code>AQS\u62bd\u8c61\u7c7b\u3002\u7136\u540e\u521b\u5efa\u4e00\u4e2a\u81ea\u5b9a\u4e49\u540c\u6b65\u5668\u5bf9\u8c61\u3002\u4e00\u4e2a\u540c\u6b65\u5668\u5bf9\u8c61\u5bf9\u4e00\u4e2a\u5171\u4eab\u8d44\u6e90\u8d1f\u8d23\u3002</p> <p>\u90a3\u4e48\u6211\u4eec\u6765\u770b\u770b\u540c\u6b65\u5668\u5bf9\u8c61\u4e2d\u5c01\u88c5\u4e86\u54ea\u4e9b\u4e1c\u897f\uff1f\u540c\u6b65\u5668\u5bf9\u8c61\u53c8\u662f\u5982\u4f55\u6709\u5e8f\u7ba1\u7406\u4e0d\u540c\u7ebf\u7a0b\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u7684\uff1f</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u540c\u6b65\u5668\u5bf9\u8c61\u4e2d\u9664\u4e86\u961f\u5217\u4ee5\u5916\uff0c\u8fd8\u6709\u4e00\u4e2a<code>state</code>\u5bf9\u8c61\u548c\u4e00\u4e2a<code>exclusiveOwnerThread</code>\u5bf9\u8c61\u3002</p> <p>state\uff1a\u4e0d\u540c\u7684\u5b50\u7c7b\u4e2d\u4f1a\u6709\u4e0d\u540c\u7684\u542b\u4e49\uff0c\u8fd9\u91cc\u4e0d\u8bb2\u3002</p> <p>exclusiveOwnerThread\uff1a\u8bb0\u5f55\u5f53\u524d\u8d44\u6e90\u88ab\u54ea\u4e2a\u7ebf\u7a0b\u5360\u6709\u3002</p>"},{"location":"Java/AQS/#_2","title":"\u8d44\u6e90\u5206\u914d\u548c\u91ca\u653e\u7684\u5b8c\u6574\u8fc7\u7a0b","text":"<p>\u4e0b\u9762\u6f14\u793a\u4e00\u4e2a\u65b0\u4eba\u60f3\u4f7f\u7528\u5395\u6240\u7684\u5b8c\u6574\u8fc7\u7a0b\u3002</p> <p>\u5f53\u65b0\u4eba\u521a\u5c1d\u8bd5\u4f7f\u7528\u5395\u6240\u65f6\uff1a</p> <p></p> <p>\u5f53\u65b0\u4eba\u6392\u961f\u65f6\uff1a</p> <p></p> <p></p> <p>\u5f53\u524d\u4e00\u4e2a\u4eba\u4e0a\u5b8c\u5395\u6240\u540e\uff0c\u4f1a\u5524\u9192\u4e0b\u4e00\u4e2a\u4eba\u4f7f\u7528\u8d44\u6e90\u3002</p> <p></p>"},{"location":"Java/AQS/#aqs_2","title":"AQS\u6838\u5fc3\u65b9\u6cd5","text":"<pre><code>tryAcquire(int);        // \u5c1d\u8bd5\u83b7\u53d6\u72ec\u5360\u9501\uff0c\u53ef\u83b7\u53d6\u8fd4\u56detrue\uff0c\u5426\u5219false\ntryRelease(int);        // \u5c1d\u8bd5\u91ca\u653e\u72ec\u5360\u9501\uff0c\u53ef\u91ca\u653e\u8fd4\u56detrue\uff0c\u5426\u5219false\ntryAcquireShared(int);  // \u5c1d\u8bd5\u4ee5\u5171\u4eab\u65b9\u5f0f\u83b7\u53d6\u9501\uff0c\u5931\u8d25\u8fd4\u56de\u8d1f\u6570\uff0c\u53ea\u80fd\u83b7\u53d6\u4e00\u6b21\u8fd4\u56de0\uff0c\u5426\u5219\u8fd4\u56de\u4e2a\u6570\ntryReleaseShared(int);  // \u5c1d\u8bd5\u91ca\u653e\u5171\u4eab\u9501\uff0c\u53ef\u83b7\u53d6\u8fd4\u56detrue\uff0c\u5426\u5219false\nisHeldExclusively();    // \u5224\u65ad\u7ebf\u7a0b\u662f\u5426\u72ec\u5360\u8d44\u6e90\n</code></pre>"},{"location":"Java/CPU%E9%A3%99%E5%8D%87/","title":"CPU\u98d9\u5347\u89e3\u51b3\u65b9\u6848","text":"<p>[toc]</p>"},{"location":"Java/CPU%E9%A3%99%E5%8D%87/#cpu_1","title":"\u4ec0\u4e48\u60c5\u51b5\u4e0b\u4f1a\u5bfc\u81f4CPU\u98d9\u5347","text":"<ol> <li>\u7a0b\u5e8f\u6b7b\u5faa\u73af\u3002</li> <li>\u521b\u5efa\u5927\u91cf\u5bf9\u8c61\uff0c</li> </ol> <p>full gc</p> <p>young gc</p> <p>minor gc</p>"},{"location":"Java/CompletableFuture/","title":"CompletableFuture","text":"<p>[toc]</p>"},{"location":"Java/CompletableFuture/#_1","title":"\u662f\u4ec0\u4e48","text":"<p><code>CompletableFuture</code>\u7c7b\u662fJava 8\u4e2d\u5f15\u5165\u7684\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u7684\u5f02\u6b65\u7f16\u7a0b\u5de5\u5177\u3002</p>"},{"location":"Java/CompletableFuture/#_2","title":"\u91cd\u8981\u51fd\u6570","text":"<p><code>CompletableFuture</code>\u7c7b\u4e2d\u6709\u51e0\u4e2a\u91cd\u8981\u7684\u51fd\u6570\u3002</p> <ul> <li>supplyAsync</li> <li>thenCompose</li> <li>thenCombine</li> </ul>"},{"location":"Java/CompletableFuture/#supplyasync","title":"supplyAsync","text":"<p><code>CompletableFuture.supplyAsync()</code>\u662fJava\u4e2d<code>CompletableFuture</code>\u7c7b\u7684\u4e00\u4e2a\u9759\u6001\u65b9\u6cd5\uff0c\u5b83\u7684\u4f5c\u7528\u662f\u5f02\u6b65\u6267\u884c\u4e00\u4e2a\u8ba1\u7b97\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a<code>CompletableFuture</code>\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u4f1a\u5728\u8ba1\u7b97\u5b8c\u6210\u540e\u83b7\u53d6\u8ba1\u7b97\u7ed3\u679c\u3002\u5b83\u53ef\u4ee5\u7528\u4e8e\u5f02\u6b65\u6267\u884c\u4e00\u4e2a\u8ba1\u7b97\u4efb\u52a1\uff0c\u800c\u65e0\u9700\u7b49\u5f85\u8be5\u4efb\u52a1\u7684\u5b8c\u6210\u3002</p>"},{"location":"Java/CompletableFuture/#thencompose","title":"thenCompose","text":"<p>\u5c06\u4e24\u4e2a\u5f02\u6b65\u4efb\u52a1\u201c\u4e32\u8054\u201d\u5728\u4e00\u8d77\uff0c\u5f62\u6210\u4e00\u4e2a\u65b0\u7684\u5f02\u6b65\u4efb\u52a1\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c<code>thenCompose()</code>\u65b9\u6cd5\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570\uff1a</p> <ul> <li><code>fn</code>\uff1a\u4e00\u4e2a<code>Function</code>\u5bf9\u8c61\uff0c\u7528\u4e8e\u5c06\u5f53\u524d<code>CompletableFuture</code>\u7684\u7ed3\u679c\u4f5c\u4e3a\u8f93\u5165\uff0c\u751f\u6210\u4e00\u4e2a\u65b0\u7684<code>CompletableFuture</code>\u5bf9\u8c61\u3002</li> </ul> <pre><code>import java.util.StringJoiner;\nimport java.util.concurrent.CompletableFuture;\n\npublic class Main {\n    /**\n     * \u7ebf\u7a0b\u963b\u585e\u4e00\u6bb5\u65f6\u95f4\n     * @param millis\n     */\n    public static void sleepMillis(long millis) {\n        try {\n            Thread.sleep(millis);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n\n    /**\n     * \u6253\u5370\u81ea\u5b9a\u4e49\u5185\u5bb9\u3001\u5f53\u524d\u65f6\u95f4\u548c\u5f53\u524d\u7ebf\u7a0bid\n     * @param tag\n     */\n    public static void printTimeAndThread(String tag) {\n        String result = new StringJoiner(\"\\t|\\t\")\n                .add(String.valueOf(System.currentTimeMillis()))\n                .add(String.valueOf(Thread.currentThread().getId()))\n                .add(Thread.currentThread().getName())\n                .add(tag)\n                .toString();\n        System.out.println(result);\n    }\n\n    /**\n     * \u573a\u666f\uff1a\n     * \u6653\u9f99\u8fdb\u5165\u9910\u5385\u540e\uff0c\u70b9\u4e86\u4e00\u4efd\u756a\u8304\u7092\u86cb\uff0c\u70b9\u5b8c\u83dc\u540e\u4fbf\u5f00\u59cb\u73a9B\u7ad9\u3002\n     * \u53a8\u5e08\u6536\u5230\u6653\u9f99\u7684\u70b9\u83dc\u8bf7\u6c42\u540e\u5f00\u59cb\u7092\u83dc\u3002\n     * \u7092\u5b8c\u83dc\u540e\uff0c\u670d\u52a1\u5458\u5c06\u83dc\u7aef\u4e0a\u684c\u3002\n     * \u6653\u9f99\u5f00\u59cb\u5403\u996d\u3002\n     * @param args\n     */\n    public static void main(String[] args) {\n        Main.printTimeAndThread(\"\u6653\u9f99\u8fdb\u5165\u9910\u5385\");\n        Main.printTimeAndThread(\"\u6653\u9f99\u70b9\u4e86\u756a\u8304\u7092\u86cb\");\n\n        CompletableFuture&lt;String&gt; cf1 = CompletableFuture.supplyAsync(() -&gt; {\n            Main.printTimeAndThread(\"\u53a8\u5e08\u7092\u756a\u8304\");\n            Main.sleepMillis(200);\n            Main.printTimeAndThread(\"\u53a8\u5e08\u7092\u86cb\");\n            Main.sleepMillis(100);\n            return \"\u756a\u8304\u7092\u86cb\u505a\u597d\u4e86\";\n        }).thenCompose(dish -&gt; CompletableFuture.supplyAsync(() -&gt; {\n            Main.printTimeAndThread(dish);\n            Main.sleepMillis(100);\n            return \"\u670d\u52a1\u5458\u7aef\u83dc\u3002\";\n        }));\n\n        Main.printTimeAndThread(\"\u6653\u9f99\u5728\u770bB\u7ad9\");\n        // \u4e3b\u7ebf\u7a0b\u963b\u585e\u4e8e\u6b64\uff0c\u77e5\u9053cf1\u5bf9\u8c61\u6267\u884c\u5b8c\u6bd5\n        Main.printTimeAndThread(String.format(\"%s, \u6653\u9f99\u5f00\u5403\", cf1.join()));\n    }\n}\n</code></pre> <p>\u8fd0\u884c\u7ed3\u679c\uff1a</p> <pre><code>1680014725804   |   1   |   main    |   \u6653\u9f99\u8fdb\u5165\u9910\u5385\n1680014725804   |   1   |   main    |   \u6653\u9f99\u70b9\u4e86\u756a\u8304\u7092\u86cb\n1680014725860   |   12  |   ForkJoinPool.commonPool-worker-1    |   \u53a8\u5e08\u7092\u756a\u8304\n1680014725861   |   1   |   main    |   \u6653\u9f99\u5728\u770bB\u7ad9\n1680014726073   |   12  |   ForkJoinPool.commonPool-worker-1    |   \u53a8\u5e08\u7092\u86cb\n1680014726185   |   12  |   ForkJoinPool.commonPool-worker-1    |   \u756a\u8304\u7092\u86cb\u505a\u597d\u4e86\n1680014726324   |   1   |   main    |   \u670d\u52a1\u5458\u7aef\u83dc\u3002, \u6653\u9f99\u5f00\u5403\n</code></pre>"},{"location":"Java/CompletableFuture/#thencombine","title":"thenCombine()","text":"<p><code>thenCombine()</code>\u662fJava\u4e2d<code>CompletableFuture</code>\u7c7b\u7684\u4e00\u79cd\u65b9\u6cd5\uff0c\u7528\u4e8e\u7ec4\u5408\u4e24\u4e2a<code>CompletableFuture</code>\u5bf9\u8c61\u7684\u7ed3\u679c\uff0c\u5e76\u5728\u5b83\u4eec\u90fd\u5b8c\u6210\u65f6\u6267\u884c\u4e00\u4e2a\u64cd\u4f5c\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c<code>thenCombine()</code>\u65b9\u6cd5\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a</p> <ul> <li><code>other</code>: \u53e6\u4e00\u4e2a<code>CompletableFuture</code>\u5bf9\u8c61\uff0c\u7528\u4e8e\u4e0e\u5f53\u524d\u5bf9\u8c61\u7ec4\u5408\u7ed3\u679c\u3002</li> <li><code>fn</code>: \u4e00\u4e2a<code>BiFunction</code>\u5bf9\u8c61\uff0c\u7528\u4e8e\u7ec4\u5408\u4e24\u4e2a<code>CompletableFuture</code>\u5bf9\u8c61\u7684\u7ed3\u679c\u3002</li> </ul> <pre><code>package org.lee._synchronized;\n\nimport java.util.StringJoiner;\nimport java.util.concurrent.CompletableFuture;\n\npublic class Main {\n    /**\n     * \u7ebf\u7a0b\u963b\u585e\u4e00\u6bb5\u65f6\u95f4\n     * @param millis\n     */\n    public static void sleepMillis(long millis) {\n        try {\n            Thread.sleep(millis);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n\n    /**\n     * \u6253\u5370\u81ea\u5b9a\u4e49\u5185\u5bb9\u3001\u5f53\u524d\u65f6\u95f4\u548c\u5f53\u524d\u7ebf\u7a0bid\n     * @param tag\n     */\n    public static void printTimeAndThread(String tag) {\n        String result = new StringJoiner(\"\\t|\\t\")\n                .add(String.valueOf(System.currentTimeMillis()))\n                .add(String.valueOf(Thread.currentThread().getId()))\n                .add(Thread.currentThread().getName())\n                .add(tag)\n                .toString();\n        System.out.println(result);\n    }\n\n    /**\n     * \u573a\u666f\uff1a\n     * \u6653\u9f99\u8fdb\u5165\u9910\u5385\u540e\uff0c\u70b9\u4e86\u4e00\u4efd\u756a\u8304\u7092\u86cb\uff0c\u70b9\u5b8c\u83dc\u540e\u4fbf\u5f00\u59cb\u73a9B\u7ad9\u3002\n     * \u53a8\u5e08\u6536\u5230\u6653\u9f99\u7684\u70b9\u83dc\u8bf7\u6c42\u540e\u5f00\u59cb\u7092\u83dc\uff0c\u540c\u65f6\u670d\u52a1\u5458\u5f00\u59cb\u716e\u996d\u3002\n     * \u5f53\u7092\u83dc\u548c\u716e\u996d\u540c\u65f6\u5b8c\u6210\u540e\uff0c\u670d\u52a1\u5458\u5c06\u996d\u548c\u83dc\u90fd\u7aef\u4e0a\u684c\u3002\n     * @param args\n     */\n    public static void main(String[] args) {\n        Main.printTimeAndThread(\"\u6653\u9f99\u8fdb\u5165\u9910\u5385\");\n        Main.printTimeAndThread(\"\u6653\u9f99\u70b9\u4e86\u756a\u8304\u7092\u86cb\");\n\n        CompletableFuture&lt;String&gt; cf1 = CompletableFuture.supplyAsync(() -&gt; {\n            Main.printTimeAndThread(\"\u53a8\u5e08\u7092\u756a\u8304\");\n            Main.sleepMillis(200);\n            Main.printTimeAndThread(\"\u53a8\u5e08\u7092\u86cb\");\n            Main.sleepMillis(100);\n            return \"\u756a\u8304\u7092\u86cb\u505a\u597d\u4e86\";\n        }).thenCombine(CompletableFuture.supplyAsync(() -&gt; {\n            Main.printTimeAndThread(\"\u670d\u52a1\u5458\u5728\u716e\u996d\");\n            Main.sleepMillis(150);\n            return \"\u996d\u716e\u597d\u5566\";\n        }), (dish, rice) -&gt; {  // \u4e24\u4e2a\u53c2\u6570\u5206\u522b\u662f\u4e24\u4e2aCompletableFuture\u5bf9\u8c61\u8fd4\u56de\u7684\u53c2\u6570\n            Main.printTimeAndThread(dish);\n            Main.printTimeAndThread(rice);\n            Main.printTimeAndThread(\"\u670d\u52a1\u5458\u5728\u7aef\u996d\u83dc\");\n            Main.sleepMillis(100);\n            return \"\u670d\u52a1\u5458\u7aef\u4e0a\u684c\u5566\uff01\";\n        });\n\n        Main.printTimeAndThread(\"\u6653\u9f99\u5728\u770bB\u7ad9\");\n        // \u4e3b\u7ebf\u7a0b\u963b\u585e\u4e8e\u6b64\uff0c\u77e5\u9053cf1\u5bf9\u8c61\u6267\u884c\u5b8c\u6bd5\n        Main.printTimeAndThread(String.format(\"%s, \u6653\u9f99\u5f00\u5403\", cf1.join()));\n    }\n}\n</code></pre> <p>\u8fd0\u884c\u7ed3\u679c\uff1a</p> <pre><code>1680014288444   |   1   |   main    |   \u6653\u9f99\u8fdb\u5165\u9910\u5385\n1680014288444   |   1   |   main    |   \u6653\u9f99\u70b9\u4e86\u756a\u8304\u7092\u86cb\n1680014288502   |   12  |   ForkJoinPool.commonPool-worker-1    |   \u53a8\u5e08\u7092\u756a\u8304\n1680014288502   |   13  |   ForkJoinPool.commonPool-worker-2    |   \u670d\u52a1\u5458\u5728\u716e\u996d\n1680014288503   |   1   |   main    |   \u6653\u9f99\u5728\u770bB\u7ad9\n1680014288705   |   12  |   ForkJoinPool.commonPool-worker-1    |   \u53a8\u5e08\u7092\u86cb\n1680014288815   |   12  |   ForkJoinPool.commonPool-worker-1    |   \u756a\u8304\u7092\u86cb\u505a\u597d\u4e86\n1680014288815   |   12  |   ForkJoinPool.commonPool-worker-1    |   \u996d\u716e\u597d\u5566\n1680014288815   |   12  |   ForkJoinPool.commonPool-worker-1    |   \u670d\u52a1\u5458\u5728\u7aef\u996d\u83dc\n1680014288945   |   1   |   main    |   \u670d\u52a1\u5458\u7aef\u4e0a\u684c\u5566\uff01, \u6653\u9f99\u5f00\u5403\n</code></pre>"},{"location":"Java/JUC%E2%80%94%E2%80%94BlockingQueue/","title":"JUC\u2014\u2014Blocking Queue","text":"<p>[toc]</p>"},{"location":"Java/JUC%E2%80%94%E2%80%94BlockingQueue/#_1","title":"\u5173\u4e8e\u963b\u585e\u961f\u5217","text":"<ul> <li>\u961f\u5217\u7684\u6838\u5fc3\u529f\u80fd\u662f\u5148\u8fdb\u540e\u51fa\uff0c\u4ece\u6570\u636e\u7ed3\u6784\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u53ef\u4ee5\u91c7\u7528\u6570\u7ec4\u3001\u94fe\u8868\u7b49\u65b9\u5f0f\u5b9e\u73b0\u961f\u5217\u3002</li> </ul> <p>\u8865\u5145\uff1a\u4f18\u5148\u961f\u5217\u7684\u5b9e\u73b0\u66f4\u590d\u6742\uff0c\u5b83\u80fd\u591f\u4fdd\u8bc1\u6bcf\u6b21\u53d6\u51fa\u7684\u5143\u7d20\u90fd\u662f\u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u3002\u5176\u5e95\u5c42\u539f\u7406\u662f\u5806\u3002</p> <ul> <li>\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u8003\u8651\u7ebf\u7a0b\u5b89\u5168\u3001\u5e76\u53d1\u6027\u80fd\u3001\u961f\u5217\u963b\u585e\u7b56\u7565\u7b49\u95ee\u9898\u3002</li> <li>\u7ebf\u7a0b\u5b89\u5168<ul> <li>\u4f7f\u7528\u9501\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168\u3002</li> <li>\u4f7f\u7528volatile\u5173\u952e\u5b57\u6765\u4fdd\u8bc1\u6570\u636e\u53ef\u89c1\u6027\u3002</li> <li>\u4f7f\u7528CAS\uff08Compare and Swap\uff09\u64cd\u4f5c\u6765\u5b9e\u73b0\u539f\u5b50\u6027\u3002</li> </ul> </li> <li>\u5e76\u53d1\u6027\u80fd<ul> <li>\u975e\u516c\u5e73\u9501\u4e0e\u516c\u5e73\u9501\u3002</li> <li>\u51cf\u5c0f\u9501\u7684\u7c92\u5ea6\u3002</li> </ul> </li> <li>\u961f\u5217\u963b\u585e\u7b56\u7565\uff08\u57fa\u4e8e\u751f\u4ea7\u8005-\u6d88\u8d39\u8005\u6a21\u578b\u7406\u89e3\uff09<ul> <li>\u961f\u5217\u7a7a\u65f6\uff0c\u963b\u585e\u6d88\u8d39\u8005\uff1b\u961f\u5217\u6ee1\u65f6\uff0c\u963b\u585e\u751f\u4ea7\u8005\u3002</li> <li>\u961f\u5217\u7a7a\u65f6\uff0c\u6d88\u8d39\u8005\u963b\u585e\u4e00\u6bb5\u65f6\u95f4\uff1b\u961f\u5217\u6ee1\u65f6\uff0c\u751f\u4ea7\u8005\u963b\u585e\u4e00\u6bb5\u65f6\u95f4\u3002</li> <li>\u961f\u5217\u7a7a\u65f6\uff0c\u6d88\u8d39\u8005\u629b\u51fa\u5f02\u5e38\uff1b\u961f\u5217\u6ee1\u65f6\uff0c\u751f\u4ea7\u8005\u629b\u51fa\u5f02\u5e38\u3002</li> </ul> </li> </ul>"},{"location":"Java/JUC%E2%80%94%E2%80%94BlockingQueue/#api","title":"\u5e38\u89c1api","text":"\u65b9\u6cd5 \u629b\u51fa\u5f02\u5e38 \u8fd4\u56de\u7279\u5b9a\u503c \u963b\u585e \u963b\u585e\u7279\u5b9a\u65f6\u95f4 \u5165\u961f <code>add(e)</code> <code>offer(e)</code> <code>put(e)</code> <code>offer(e, time, unit)</code> \u51fa\u961f <code>remove()</code> <code>poll()</code> <code>take()</code> <code>poll(time, unit)</code> \u83b7\u53d6\u961f\u9996\u5143\u7d20 <code>element()</code> <code>peek()</code> \u4e0d\u652f\u6301 \u4e0d\u652f\u6301"},{"location":"Java/JUC%E2%80%94%E2%80%94BlockingQueue/#_2","title":"\u5e38\u89c1\u961f\u5217","text":"\u5b9e\u73b0\u7c7b \u529f\u80fd <code>ArrayBlockingQueue</code> \u57fa\u4e8e\u6570\u7ec4\u7684\u963b\u585e\u961f\u5217\uff0c\u4f7f\u7528\u6570\u7ec4\u5b58\u50a8\u6570\u636e\uff0c\u5e76\u9700\u8981\u6307\u5b9a\u5176\u957f\u5ea6\uff0c\u6240\u4ee5\u662f\u4e00\u4e2a\u6709\u754c\u961f\u5217 <code>LinkedBlockingQueue</code> \u57fa\u4e8e\u94fe\u8868\u7684\u963b\u585e\u961f\u5217\uff0c\u4f7f\u7528\u94fe\u8868\u5b58\u50a8\u6570\u636e\uff0c\u9ed8\u8ba4\u662f\u4e00\u4e2a\u65e0\u754c\u961f\u5217\uff1b\u4e5f\u53ef\u4ee5\u901a\u8fc7\u6784\u9020\u65b9\u6cd5\u4e2d\u7684<code>capacity</code>\u8bbe\u7f6e\u6700\u5927\u5143\u7d20\u6570\u91cf\uff0c\u6240\u4ee5\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u6709\u754c\u961f\u5217 <code>SynchronousQueue</code> \u4e00\u79cd\u6ca1\u6709\u7f13\u51b2\u7684\u961f\u5217\uff0c\u751f\u4ea7\u8005\u4ea7\u751f\u7684\u6570\u636e\u76f4\u63a5\u4f1a\u88ab\u6d88\u8d39\u8005\u83b7\u53d6\u5e76\u4e14\u7acb\u523b\u6d88\u8d39 <code>PriorityBlockingQueue</code> \u57fa\u4e8e\u4f18\u5148\u7ea7\u522b\u7684\u963b\u585e\u961f\u5217\uff0c\u5e95\u5c42\u57fa\u4e8e\u6570\u7ec4\u5b9e\u73b0\uff0c\u662f\u4e00\u4e2a\u65e0\u754c\u961f\u5217 <code>DelayQueue</code> \u5ef6\u8fdf\u961f\u5217\uff0c\u5176\u4e2d\u7684\u5143\u7d20\u53ea\u6709\u5230\u4e86\u5176\u6307\u5b9a\u7684\u5ef6\u8fdf\u65f6\u95f4\uff0c\u624d\u80fd\u591f\u4ece\u961f\u5217\u4e2d\u51fa\u961f"},{"location":"Java/JUC%E2%80%94%E2%80%94BlockingQueue/#_3","title":"\u4f7f\u7528\u6848\u4f8b","text":""},{"location":"Java/JUC%E2%80%94%E2%80%94BlockingQueue/#linkedblockingqueue","title":"<code>LinkedBlockingQueue</code>","text":"<pre><code>import java.util.concurrent.BlockingQueue;\nimport java.util.concurrent.LinkedBlockingQueue;\nimport java.util.concurrent.atomic.AtomicInteger;\n\npublic class Main {\n    static AtomicInteger sell = new AtomicInteger(0);\n    static AtomicInteger buy = new AtomicInteger(0);\n\n    public static void main(String[] args) throws InterruptedException {\n        // \u521b\u5efaLinkedBlockingQueue\uff0c\u5e76\u8bbe\u7f6e\u6700\u5927\u5bb9\u91cf\u4e3a3\n        BlockingQueue&lt;Object&gt; blockingQueue = new LinkedBlockingQueue&lt;&gt;(3);\n\n        // 1\u53f7\u751f\u4ea7\u8005\n        Thread maker1 = new Thread(() -&gt; {\n            // \u5236\u4f5c100\u5757\u997c\u5b50\n            for (int i = 0; i &lt; 100; i++) {\n                try {\n                    // put \u5982\u679c\u961f\u5217\u5df2\u6ee1\uff0c\u5219\u963b\u585e\u8be5\u7ebf\u7a0b\n                    blockingQueue.put(\"\u53a8\u5e081 \u997c\u5b50\" + i);\n                    // \u51fa\u552e\u6570\u91cf\u539f\u5b50\u6027\u589e\u52a0\n                    sell.incrementAndGet();\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        }, \"\u53a8\u5e081\");\n\n        // 2\u53f7\u751f\u4ea7\u8005\n        Thread maker2 = new Thread(() -&gt; {\n            // \u5236\u4f5c100\u5757\u997c\u5b50\n            for (int i = 0; i &lt; 100; i++) {\n                try {\n                    // put \u5982\u679c\u961f\u5217\u5df2\u6ee1\uff0c\u5219\u963b\u585e\u8be5\u7ebf\u7a0b\n                    blockingQueue.put(\"\u53a8\u5e082 \u997c\u5b50\" + i);\n                    // \u51fa\u552e\u6570\u91cf\u539f\u5b50\u6027\u589e\u52a0\n                    sell.incrementAndGet();\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        }, \"\u53a8\u5e082\");\n\n        // 1\u53f7\u6d88\u8d39\u8005\n        Thread client1 = new Thread(() -&gt; {\n            for (int i = 0; i &lt; 100; i++) {\n                try {\n                    // take \u5982\u679c\u961f\u5217\u4e3a\u7a7a\uff0c\u5219\u963b\u585e\u8be5\u7ebf\u7a0b\n                    blockingQueue.take();\n                    // \u8d2d\u4e70\u6570\u91cf\u539f\u5b50\u6027\u589e\u52a0\n                    buy.incrementAndGet();\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        }, \"\u5ba2\u62371\");\n\n        // 2\u53f7\u6d88\u8d39\u8005\n        Thread client2 = new Thread(() -&gt; {\n            for (int i = 0; i &lt; 100; i++) {\n                try {\n                    // take \u5982\u679c\u961f\u5217\u4e3a\u7a7a\uff0c\u5219\u963b\u585e\u8be5\u7ebf\u7a0b\n                    blockingQueue.take();\n                    // \u8d2d\u4e70\u6570\u91cf\u539f\u5b50\u6027\u589e\u52a0\n                    buy.incrementAndGet();\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        }, \"\u5ba2\u62372\");\n\n        // \u542f\u52a8\u751f\u4ea7\u8005\u3001\u6d88\u8d39\u8005\u7ebf\u7a0b\n        maker1.start();\n        maker2.start();\n        client1.start();\n        client2.start();\n\n        // \u7b49\u5f85\u751f\u4ea7\u8005\u3001\u6d88\u8d39\u8005\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u7ee7\u7eed\u6267\u884c\u4e3b\u7ebf\u7a0b\n        maker1.join();\n        maker2.join();\n        client1.join();\n        client2.join();\n\n        System.out.println(\"\u5356\u51fa\u997c\u5b50: \" + sell.get());\n        System.out.println(\"\u4e70\u5165\u997c\u5b50: \" + buy.get());\n    }\n}\n</code></pre>"},{"location":"Java/JUC%E2%80%94%E2%80%94BlockingQueue/#synchronousqueue","title":"<code>SynchronousQueue</code>","text":"<ol> <li> <p><code>SynchronousQueue</code>\u5e76\u4e0d\u662f\u771f\u6b63\u610f\u4e49\u4e0a\u7684\u961f\u5217\uff0c\u56e0\u4e3a\u5b83\u6ca1\u6709\u5bb9\u91cf\u3002</p> </li> <li> <p>\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u5c1d\u8bd5\u5411<code>SynchronousQueue</code>\u4e2d\u63d2\u5165\u5143\u7d20\u65f6\uff0c\u5b83\u4f1a\u88ab\u963b\u585e\uff0c\u76f4\u5230\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u4ece<code>SynchronousQueue</code>\u4e2d\u53d6\u51fa\u8be5\u5143\u7d20\u3002</p> </li> <li> <p>\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u5c1d\u8bd5\u4ece<code>SynchronousQueue</code>\u4e2d\u53d6\u51fa\u5143\u7d20\u65f6\uff0c\u5b83\u4e5f\u4f1a\u88ab\u963b\u585e\uff0c\u76f4\u5230\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u5411<code>SynchronousQueue</code>\u4e2d\u63d2\u5165\u4e00\u4e2a\u5143\u7d20\u3002</p> </li> </ol> <pre><code>import java.util.StringJoiner;\nimport java.util.concurrent.*;\n\npublic class Main {\n    static void printInfo(String tag) {\n        String result = new StringJoiner(\"\\t|\\t\")\n                .add(String.valueOf(System.currentTimeMillis()))\n                .add(String.valueOf(Thread.currentThread().getId()))\n                .add(Thread.currentThread().getName())\n                .add(tag)\n                .toString();\n        System.out.println(result);\n    }\n\n    public static void main(String[] args) throws InterruptedException {\n        printInfo(\"\u5f00\u59cb\u6267\u884c\");\n        BlockingQueue&lt;Object&gt; queue = new SynchronousQueue&lt;&gt;();\n        new Thread(() -&gt; {\n            try {\n                queue.put(\"\u997c\u5b501\");\n                printInfo(\"\u653e\u5165\u997c\u5b501\");\n                Thread.sleep(5000);\n                queue.put(\"\u997c\u5b502\");\n                printInfo(\"\u653e\u5165\u997c\u5b502\");\n            } catch (InterruptedException e) {\n                throw new RuntimeException(e);\n            }\n        }).start();\n\n        Thread.sleep(5000);\n\n        new Thread(() -&gt; {\n            try {\n                queue.take();\n                printInfo(\"\u53d6\u51fa\u997c\u5b501\");\n                queue.take();\n                printInfo(\"\u53d6\u51fa\u997c\u5b502\");\n            } catch (InterruptedException e) {\n                throw new RuntimeException(e);\n            }\n        }).start();\n    }\n}\n</code></pre> <p>\u7ed3\u679c</p> <pre><code>1684077087342   |   1   |   main    |   \u5f00\u59cb\u6267\u884c\n1684077092406   |   12  |   Thread-0    |   \u653e\u5165\u997c\u5b501\n1684077092406   |   13  |   Thread-1    |   \u53d6\u51fa\u997c\u5b501\n1684077097418   |   12  |   Thread-0    |   \u653e\u5165\u997c\u5b502\n1684077097418   |   13  |   Thread-1    |   \u53d6\u51fa\u997c\u5b502\n</code></pre>"},{"location":"Java/JUC%E2%80%94%E2%80%94CountDownLatch/","title":"JUC\u2014\u2014CountDownLatch","text":"<p>[toc]</p>"},{"location":"Java/JUC%E2%80%94%E2%80%94CountDownLatch/#_1","title":"\u662f\u4ec0\u4e48","text":"<p><code>CountDownLatch</code>\u662f<code>JUC</code>\u5305\u4e0b\u7684\u4e00\u4e2a\u5de5\u5177\u7c7b\uff0c\u7528\u4e8e\u63a7\u5236\u7ebf\u7a0b\u7684\u7b49\u5f85\u548c\u5e76\u53d1\u6267\u884c\u3002</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6211\u53ef\u4ee5\u8ba95\u4e2a\u7ebf\u7a0b\u5168\u90e8\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u518d\u6267\u884c\u63a5\u4e0b\u6765\u7684\u4ee3\u7801\u3002</p>"},{"location":"Java/JUC%E2%80%94%E2%80%94CountDownLatch/#_2","title":"\u4ee3\u7801","text":"<p>\u4e0b\u9762\u662f\u6355\u83b7\u4e00\u5c3e\u81f3\u4e5d\u5c3e\uff0c\u5168\u90e8\u6355\u83b7\u5b8c\u6bd5\u540e\u5408\u6210\u5341\u5c3e\u7684\u8fc7\u7a0b\u3002</p> <pre><code>import java.util.Random;\nimport java.util.concurrent.CountDownLatch;\nimport java.util.concurrent.atomic.AtomicInteger;\n\npublic class Main {\n    static AtomicInteger i = new AtomicInteger(0);\n    public static void main(String[] args) {\n        CountDownLatch countDownLatch = new CountDownLatch(9);\n        for (int j = 0; j &lt; 9; j++) {\n            new Thread(() -&gt; {\n                int timeSpend = new Random().nextInt(10);\n                try {\n                    Thread.sleep(timeSpend * 1000);\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n                System.out.println(\"\u5df2\u6355\u83b7\" + i.incrementAndGet() + \"\u5c3e\");\n                countDownLatch.countDown();\n            }).start();\n        }\n\n        try {\n            countDownLatch.await();\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n\n        System.out.println(\"\u6355\u83b7\u5b8c\u6bd5\uff0c\u5408\u5e76\u5341\u5c3e\uff01\");\n    }\n}\n</code></pre>"},{"location":"Java/JUC%E2%80%94%E2%80%94lock/","title":"JUC\u2014\u2014ReentrantLock","text":"<p>[toc]</p>"},{"location":"Java/JUC%E2%80%94%E2%80%94lock/#_1","title":"\u7279\u6027\u6982\u89c8","text":"<p>ReentrantLock\u610f\u601d\u4e3a\u53ef\u91cd\u5165\u9501\uff0c\u6307\u7684\u662f\u4e00\u4e2a\u7ebf\u7a0b\u80fd\u591f\u591a\u6b21\u8bbf\u95ee\u540c\u4e00\u4e2a\u4e34\u754c\u8d44\u6e90\u3002\u201c\u53ef\u91cd\u5165\u201d\u4e5f\u5c31\u662f\u591a\u6b21\u8fdb\u5165\u4e34\u754c\u8d44\u6e90\u7684\u610f\u601d\u3002</p>"},{"location":"Java/JUC%E2%80%94%E2%80%94lock/#reentrantlocksynchronized","title":"ReentrantLock\u548cSynchronized","text":"ReentrantLock Synchronized \u9501\u5b9e\u73b0\u673a\u5236 \u4f9d\u8d56AQS \u76d1\u89c6\u5668\u6a21\u5f0f \u7075\u6d3b\u6027 \u652f\u6301\u54cd\u5e94\u4e2d\u65ad\u3001\u8d85\u65f6\u3001\u5c1d\u8bd5\u83b7\u53d6\u9501 \u4e0d\u7075\u6d3b \u91ca\u653e\u5f62\u5f0f \u5fc5\u987b\u663e\u793a\u8c03\u7528unlock()\u91ca\u653e\u9501 \u81ea\u52a8\u91ca\u653e\u76d1\u89c6\u5668 \u9501\u7c7b\u578b \u516c\u5e73\u9501&amp;\u975e\u516c\u5e73\u9501 \u975e\u516c\u5e73\u9501 \u6761\u4ef6\u961f\u5217 \u53ef\u5173\u8054\u591a\u4e2a\u6761\u4ef6\u961f\u5217 \u5173\u8054\u4e00\u4e2a\u6761\u4ef6\u961f\u5217 \u53ef\u91cd\u5165\u6027 \u53ef\u91cd\u5165 \u53ef\u91cd\u5165"},{"location":"Java/JUC%E2%80%94%E2%80%94lock/#_2","title":"\u91cd\u8981\u65b9\u6cd5","text":"<pre><code>tryLock();  // \u975e\u516c\u5e73\u9501\n\ntryLock(long timeout, TimeUnit unit);\n\nlock();  // \u83b7\u53d6\u516c\u5e73\u9501\uff0c\u672a\u83b7\u53d6\u5230\u5219\u4e00\u76f4\u7b49\u5f85\n\nlockInterruptibly();  // \u83b7\u53d6\u9501\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u6536\u5230\u4e2d\u65ad\u4fe1\u53f7\uff0c\u5219\u4f1a\u629b\u51fa\u5f02\u5e38\n\nunlock();  // \u5c1d\u8bd5\u91ca\u653e\u9501\n</code></pre>"},{"location":"Java/JVM%E5%86%85%E5%AD%98%E5%88%86%E5%8C%BA/","title":"Java\u5185\u5b58\u5206\u533a","text":"<p>[toc]</p>"},{"location":"Java/JVM%E5%86%85%E5%AD%98%E5%88%86%E5%8C%BA/#_1","title":"\u524d\u8a00","text":"<p>Java\u4ee3\u7801\u88ab\u7f16\u8bd1\u4e3a\u5b57\u8282\u7801\u4ee5\u540e\uff0c\u7ecf\u8fc7\u7c7b\u52a0\u8f7d\u5668\u88ab\u52a0\u8f7d\u5230jvm\u4e2d\u8fd0\u884c\u3002</p>"},{"location":"Java/JVM%E5%86%85%E5%AD%98%E5%88%86%E5%8C%BA/#_2","title":"\u5806","text":"<p>\u5806\uff1a\u5b58\u653e\u6570\u7ec4\u5bf9\u8c61\u3001\u5b9e\u4f8b\u5bf9\u8c61\uff08\u5305\u542b\u975e\u9759\u6001\u6210\u5458\u53d8\u91cf\uff09\u3001\u5b57\u7b26\u4e32\u5e38\u91cf\u6c60\uff0c\u5b83\u662f\u7ebf\u7a0b\u5171\u4eab\u7684\u5185\u5b58\u533a\u57df\u3002</p> <p>\u6709\u65f6\u5019new\u51fa\u6765\u7684\u5bf9\u8c61\u4e5f\u4f1a\u653e\u5230\u6808\u533a\uff0c\u5c24\u5176\u662f\u8be5\u5bf9\u8c61\u7684\u4f5c\u7528\u57df\u6ca1\u6709\u9003\u9038\u51fa\u51fd\u6570\u4f53\u3002</p>"},{"location":"Java/JVM%E5%86%85%E5%AD%98%E5%88%86%E5%8C%BA/#_3","title":"\u865a\u62df\u673a\u6808","text":"<p>\u5b58\u653e\u5f53\u524d\u7ebf\u7a0b\u6267\u884c\u65b9\u6cd5\u65f6\u7684\u5c40\u90e8\u53d8\u91cf\u3001\u64cd\u4f5c\u6570\u6808\u3001\u52a8\u6001\u94fe\u63a5\u3001\u65b9\u6cd5\u51fa\u53e3\u7b49\u4fe1\u606f\u3002</p> <p>\u6bcf\u4e2a\u7ebf\u7a0b\u8fd0\u884c\u65f6\u9700\u8981\u7684\u5185\u5b58\uff0c\u53eb\u505a\u865a\u62df\u673a\u6808\u3002\u5b83\u662f\u7ebf\u7a0b\u79c1\u6709\u7684\u3002</p> <p>JVM\u7684\u5783\u573e\u56de\u6536\u4e0d\u6d89\u53ca\u5230\u6808\u5185\u5b58\u3002</p> <p>\u65b9\u6cd5\u4e2d\u7684\u5c40\u90e8\u53d8\u91cf\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\u5417\uff1f</p> <ul> <li>\u5982\u679c\u5c40\u90e8\u53d8\u91cf\u6ca1\u6709\u9003\u9038\u65b9\u6cd5\u7684\u4f5c\u7528\u57df\uff0c\u5219\u5b83\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\u3002</li> <li>\u5982\u679c\u5c40\u90e8\u53d8\u91cf\u7684\u5f15\u7528\u9003\u79bb\u4e86\u65b9\u6cd5\u4f5c\u7528\u57df\uff0c\u5219\u4e0d\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\u3002</li> </ul>"},{"location":"Java/JVM%E5%86%85%E5%AD%98%E5%88%86%E5%8C%BA/#_4","title":"\u7a0b\u5e8f\u8ba1\u6570\u5668","text":"<p>\u5b58\u653e\u5f53\u524d\u7ebf\u7a0b\u7684\u4e0b\u4e00\u6761JVM\u6307\u4ee4\u3002\u5b83\u662f\u4e00\u5757\u975e\u5e38\u5c0f\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u5728\u4efb\u4f55\u4e00\u4e2a\u65f6\u523b\uff0c\u4e00\u4e2aCPU\u53ea\u4f1a\u6267\u884c\u4e00\u4e2a\u7ebf\u7a0b\u7684\u6307\u4ee4\uff0c\u56e0\u6b64\u5b83\u662f\u7ebf\u7a0b\u79c1\u6709\u7684\uff0c\u7ebf\u7a0b\u5207\u6362\u540e\u80fd\u591f\u6062\u590d\u5230\u6b63\u786e\u7684\u6267\u884c\u4f4d\u7f6e\u3002</p>"},{"location":"Java/JVM%E5%86%85%E5%AD%98%E5%88%86%E5%8C%BA/#_5","title":"\u672c\u5730\u65b9\u6cd5\u6808","text":"<p>\u5b58\u653eC/C++\u4ee3\u7801\u3002\u7ebf\u7a0b\u79c1\u6709\u3002</p>"},{"location":"Java/JVM%E5%86%85%E5%AD%98%E5%88%86%E5%8C%BA/#_6","title":"\u5143\u7a7a\u95f4","text":"<p>Java8\u53ca\u4ee5\u540e\uff0c\u65b9\u6cd5\u533a\u88ab\u5143\u7a7a\u95f4\u66ff\u6362\uff0c\u5b58\u653e\u8fd0\u884c\u65f6\u5e38\u91cf\u6c60\u3001\u9759\u6001\u53d8\u91cf\u3001\u7c7b\u5bf9\u8c61\u7b49\uff0c\u5b83\u662f\u7ebf\u7a0b\u5171\u4eab\u7684\u5185\u5b58\u533a\u57df\u3002</p> <p>\u540c\u65f6\uff0c\u5143\u7a7a\u95f4\u4e0d\u5c5e\u4e8eJVM\uff0c\u800c\u5c5e\u4e8e\u672c\u5730\u5185\u5b58\u3002</p>"},{"location":"Java/JVM%E5%86%85%E5%AD%98%E5%88%86%E5%8C%BA/#_7","title":"\u603b\u7ed3","text":"<p>\u7ebf\u7a0b\u79c1\u6709\uff1a\u865a\u62df\u673a\u6808\u3001\u672c\u5730\u65b9\u6cd5\u6808\u3001\u7a0b\u5e8f\u8ba1\u6570\u5668\u3002</p> <p>\u7ebf\u7a0b\u5171\u4eab\uff1a\u5806\u533a\u3001\u5143\u7a7a\u95f4\uff08\u4e0d\u5728JVM\u4e2d\uff09\u3002</p>"},{"location":"Java/Java-%E5%BC%82%E5%B8%B8/","title":"Java-\u5f02\u5e38","text":"<p>[toc]</p>"},{"location":"Java/Java-%E5%BC%82%E5%B8%B8/#_1","title":"\u5f02\u5e38\u662f\u4ec0\u4e48","text":"<p><code>Throwable</code>\u662f\u6240\u6709\u9519\u8bef\u548c\u5f02\u5e38\u7684\u8d85\u7c7b\u3002\u53ea\u6709\u5f53\u5bf9\u8c61\u662f<code>Throwable</code>\u6216\u5b83\u7684\u5b50\u7c7b\u65f6\uff0cJVM\u6216<code>throw</code>\u8bed\u53e5\u624d\u80fd\u629b\u51fa\u5f02\u5e38\u3002</p> <p><code>catch</code>\u8bed\u53e5\u4e2d\u7684\u53c2\u6570\u5fc5\u987b\u662f<code>Throwable</code>\u6216\u5176\u5b50\u7c7b\u3002</p>"},{"location":"Java/Java-%E5%BC%82%E5%B8%B8/#_2","title":"\u5f02\u5e38\u7684\u5206\u7c7b","text":"<ol> <li><code>Error</code>\uff1a\u4e25\u91cd\u7684\u9519\u8bef\uff0c\u4e0d\u80fd\u624b\u52a8\u89e3\u51b3\u3002</li> <li><code>Exception</code>\uff1a\u53ef\u5904\u7406\u3002</li> <li>\u8fd0\u884c\u65f6\u5f02\u5e38<code>RuntimeException</code>\uff0c\u53ef\u5904\u7406\uff0c\u4e5f\u53ef\u4e0d\u5904\u7406\u3002<ul> <li>\u7a7a\u6307\u9488\u5f02\u5e38</li> <li>\u6570\u7ec4\u8d8a\u754c\u5f02\u5e38</li> <li>\u7c7b\u578b\u8f6c\u6362\u5f02\u5e38</li> <li>\u6570\u5b57\u683c\u5f0f\u5316\u5f02\u5e38</li> <li>\u7b97\u6570\u5f02\u5e38</li> </ul> </li> <li>\u68c0\u67e5\u65f6\u5f02\u5e38<code>CheckedException</code>\uff1a\u68c0\u67e5\u65f6\u5f02\u5e38\uff0c\u5fc5\u987b\u5904\u7406\u3002<ul> <li><code>IOException</code></li> </ul> </li> </ol> <p>\u4e0d\u7528\u5904\u7406\u5f02\u5e38</p> <pre><code>public static void main(String[] args) {\n    throw new RuntimeException();\n}\n</code></pre> <p>\u5fc5\u987b\u5904\u7406\u5f02\u5e38</p> <pre><code>public static void main(String[] args) throws IOException {\n    throw new IOException();\n}\n</code></pre>"},{"location":"Java/Java-%E5%BC%82%E5%B8%B8/#_3","title":"\u5f02\u5e38\u7684\u4ea7\u751f\u548c\u4f20\u9012","text":"<p>\u7a0b\u5e8f\u5458\u53ef\u624b\u52a8\u629b\u51fa\u5f02\u5e38\u3002</p> <p>\u4f20\u9012\uff1a\u6309\u7167\u65b9\u6cd5\u7684\u8c03\u7528\u94fe\u53cd\u5411\u4f20\u9012\u3002\u5982\u679c\u59cb\u7ec8\u6ca1\u6709\u5904\u7406\uff0c\u5219\u4ea4\u7531JVM\u8fdb\u884c\u9ed8\u8ba4\u5f02\u5e38\u5904\u7406\uff08\u6253\u5370\u8ddf\u8e2a\u5806\u6808\u4fe1\u606f\uff0c\u5e76\u505c\u6b62\u8fd0\u884c\uff09\u3002</p>"},{"location":"Java/Java-%E5%BC%82%E5%B8%B8/#_4","title":"\u5904\u7406\u5f02\u5e38","text":"<p><code>try</code>\uff1a\u6267\u884c\u53ef\u80fd\u4ea7\u751f\u5f02\u5e38\u7684\u4ee3\u7801\u3002</p> <p><code>catch</code>\uff1a\u6355\u83b7\u5bf9\u5e94<code>try</code>\u4e2d\u7684\u5f02\u5e38\u3002</p> <p><code>finally</code>\uff1a\u65e0\u8bba\u662f\u5426\u53d1\u751f\u5f02\u5e38\uff0c\u90fd\u4f1a\u6267\u884c\u3002\u9664\u975e\u76f4\u63a5\u9000\u51faJVM\u3002\uff08\u4f8b\u5982<code>System.exit(0);</code>\uff09</p> <p><code>throw</code>\uff1a\u7a0b\u5e8f\u5458\u624b\u52a8\u629b\u51fa\u5f02\u5e38\u3002</p> <p><code>throws</code>\uff1a\u58f0\u660e\u65b9\u6cd5\u53ef\u80fd\u629b\u51fa\u7684\u5f02\u5e38\u3002</p> <p><code>try-catch-catch</code>\uff1a\u5339\u914d\u7b2c\u4e00\u4e2acatch\uff0c\u4e14\u9075\u5faa\u5b50\u524d\u7236\u540e\u3002</p> <p><code>try-finally</code>\u4e0d\u80fd\u6355\u83b7\u5f02\u5e38\uff0c\u4f1a\u628a\u5f02\u5e38\u5411\u4e0a\u629b\u3002</p>"},{"location":"Java/Java-%E5%BC%82%E5%B8%B8/#_5","title":"\u81ea\u5b9a\u4e49\u5f02\u5e38","text":"<pre><code>package com.lee;\n\nclass AgeException extends RuntimeException {\n    public AgeException(String message) {\n        super(message);\n    }\n}\n\nclass Person {\n    private int age;\n    public void setAge(int age) {\n        if (age &gt; 150) {\n            throw new AgeException(\"\u975e\u6cd5\u5e74\u9f84\uff01\");\n        }\n        this.age = age;\n    }\n\n    public int getAge() {\n        return this.age;\n    }\n}\n\npublic class Main {\n    public static void main(String[] args) {\n        Person person = new Person();\n        person.setAge(1000);\n        System.out.println(person.getAge());\n    }\n}\n</code></pre>"},{"location":"Java/Java-%E5%BC%82%E5%B8%B8/#_6","title":"\u5176\u4ed6","text":"<p>\u5b50\u7c7b\u4e0d\u80fd\u629b\u51fa\u66f4\u5bbd\u7684\u5f02\u5e38\u3002</p>"},{"location":"Java/Java-%E9%9B%86%E5%90%88-Map/","title":"Java-\u96c6\u5408-Map","text":"<p>[toc]</p>"},{"location":"Java/Java-%E9%9B%86%E5%90%88-Map/#hashmap","title":"HashMap","text":""},{"location":"Java/Java-%E9%9B%86%E5%90%88-Map/#high_brightness","title":"\u6570\u636e\u7ed3\u6784 :high_brightness:","text":"<p>\u6700\u91cd\u8981\u7684\u4e00\u53e5\u8bdd\uff1a\u6570\u7ec4+\u94fe\u8868+\u7ea2\u9ed1\u6811\u3002</p> <p>HashMap\u7528\u4e8e\u5b58\u653e\u952e\u503c\u5bf9<code>&lt;K,V&gt;</code>\u6570\u636e\u3002\u6211\u4eec\u5b58\u5165\u7684<code>&lt;K,V&gt;</code>\u952e\u503c\u5bf9\u88ab\u5c01\u88c5\u6210<code>Node&lt;K,V&gt;</code>\u5b58\u5165<code>HashMap</code>\u7684<code>Node&lt;K,V&gt;</code>\u6570\u7ec4\uff08\u54c8\u5e0c\u6876\uff09\u4e2d\u3002\u5b58\u5165\u7684<code>&lt;K,V&gt;</code>\u6570\u636e\u7684<code>K</code>\u4f1a\u7ecf\u8fc7<code>hash</code>\u7b97\u6cd5\u5f97\u5230\u4e00\u4e2a\u6570\u5b57\u4f5c\u4e3a\u54c8\u5e0c\u6876\u7684\u4e0b\u6807\u3002\u5177\u4f53\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>static final int hash(Object key) {\n    int h;\n    return (key == null) ? 0 : (h = key.hashCode()) ^ (h &gt;&gt;&gt; 16);\n}\n</code></pre> <p>\u5f53\u51fa\u73b0<code>hash</code>\u51b2\u7a81\u65f6\uff0c\u91c7\u7528\u94fe\u5730\u5740\u6cd5\u89e3\u51b3\u54c8\u5e0c\u51b2\u7a81\u3002</p> <p>\u5f53\u54c8\u5e0c\u51b2\u7a81\u8f83\u4e3a\u9891\u7e41\u65f6\uff0c\u94fe\u7684\u957f\u5ea6\u5c31\u4f1a\u53d8\u957f\uff0c\u67e5\u627e\u6548\u7387\u5c31\u4f1a\u663e\u8457\u964d\u4f4e\u3002\u6b64\u65f6\u6709\u4e24\u79cd\u89e3\u51b3\u65b9\u6848\uff1a</p> <ul> <li>\u94fe\u8f6c\u4e3a\u7ea2\u9ed1\u6811\uff0c\u63d0\u9ad8\u67e5\u8be2\u6548\u7387\u3002</li> <li>\u54c8\u5e0c\u6876\u6269\u5bb9\uff0c\u964d\u4f4e\u54c8\u5e0c\u51b2\u7a81\u3002</li> </ul> <p>HashMap\u7684\u7ed3\u6784\u5927\u81f4\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"Java/Java-%E9%9B%86%E5%90%88-Map/#_1","title":"\u6269\u5bb9\u673a\u5236","text":"<ol> <li> <p>\u9996\u5148\u9700\u8981\u77e5\u9053<code>HashMap</code>\u4e2d\u6709\u5982\u4e0b\u53c2\u6570\uff1a</p> </li> <li> <p><code>int threshold</code>\uff1a<code>threshold = capacity * loadFactor</code>\uff0c\u5176\u4e2d<code>capacity=table.length</code>\u3002</p> </li> <li><code>Node&lt;K, V&gt; table</code>\uff1a\u4e5f\u5373\u54c8\u5e0c\u6876\u3002</li> </ol> <p>\u200b   \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>table</code>\u7684\u5927\u5c0f\u4e3a<code>16</code>\uff0c<code>loadFactor</code>\u7684\u5927\u5c0f\u4e3a0.75\u3002</p> <ol> <li> <p>\u53ef\u4eba\u4e3a\u6307\u5b9a<code>table</code>\u7684\u5927\u5c0f\uff1a\u5047\u5b9a\u4f20\u5165<code>x</code>\uff0c\u5219\u4f20\u51fa<code>y</code>\uff0c\u5176\u4e2d<code>y&gt;=x</code>\u4e14<code>y</code>\u662f2\u7684\u6574\u6570\u6b21\u5e42\u3002</p> </li> <li> <p><code>HashMap&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(8)</code>\uff1a<code>table.length=8</code>\uff0c<code>threshold=6</code>\u3002</p> </li> <li> <p><code>HashMap&lt;Integer, Integer&gt; map = new HashMap&lt;&gt;(10)</code>\uff1a<code>table.length=16</code>\uff0c<code>threshold=12</code>\u3002</p> </li> <li> <p>\u8865\u5145\uff1a\u4f20\u5165<code>10</code>\uff0c\u5f97\u5230<code>16</code>\u7684\u51fd\u6570\u662f\u8fd9\u6837\u5b9e\u73b0\u7684\uff0c\u975e\u5e38\u5de7\u5999\uff01</p> </li> </ol> <p><code>java   static final int tableSizeFor(int cap) {       int n = cap - 1;       n |= n &gt;&gt;&gt; 1;       n |= n &gt;&gt;&gt; 2;       n |= n &gt;&gt;&gt; 4;       n |= n &gt;&gt;&gt; 8;       n |= n &gt;&gt;&gt; 16;       return (n &lt; 0) ? 1 : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + 1;   }</code></p> <ol> <li>\u5f53<code>hashmap</code>\u5bf9\u8c61\u4e2d\u7684\u5143\u7d20\u4e2a\u6570 \u2265 <code>threshold</code>\u65f6\uff0c\u89e6\u53d1\u6269\u5bb9\u673a\u5236\u3002\u6bcf\u6b21\u6269\u51452\u500d\u3002</li> </ol> <p>\u6613\u9519\uff1a\u5047\u5b9a<code>Node&lt;K,V&gt; table</code>\u7684\u5927\u5c0f\u4e3a16\uff0c<code>threshold</code>\u7684\u5927\u5c0f\u4e3a<code>12</code>\uff0c\u5f53\u6211\u4eec\u63d2\u516512\u4e2a\u5143\u7d20\u65f6\uff0c\u5373\u4fbf\u8fd912\u4e2a\u5143\u7d20\u7ecf\u8fc7<code>hash</code>\u8fd0\u7b97\u540e\u90fd\u5f97\u5230\u76f8\u540c\u7684\u4e0b\u6807\uff0c\u6b64\u65f6<code>Node&lt;K,V&gt; table</code>\u4e5f\u8981\u6269\u5bb92\u500d\u3002</p> <ol> <li>\u6269\u5bb9\u8fc7\u7a0b\u4e2d\uff0c\u4f1a\u5c06<code>hashmap</code>\u4e2d\u7684\u6240\u6709\u5bf9\u8c61\u90fd\u91cd\u65b0\u505a\u4e00\u6b21<code>hash</code>\u8fd0\u7b97\uff0c\u7136\u540e\u653e\u5165\u65b0\u7684\u4e0b\u6807\u5904\u3002</li> </ol> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff1a<code>Node&lt;K,V&gt;[] table</code>\u957f\u5ea6\u4e3a16\u65f6\uff0c<code>key</code>\u4e3a18\u7684<code>Node&lt;K,V&gt;</code>\u653e\u5728\u4e0b\u68072\u5904\uff1b<code>Node&lt;K,V&gt;[] table</code>\u957f\u5ea6\u4e3a32\u65f6\uff0c<code>key</code>\u4e3a18\u7684<code>Node&lt;K,V&gt;</code>\u653e\u5728\u4e0b\u680718\u5904\u3002</p>"},{"location":"Java/Java-%E9%9B%86%E5%90%88-Map/#_2","title":"\u6709\u5e8f\u6027","text":"<p><code>HashMap</code>\u4e0d\u4fdd\u8bc1\u987a\u5e8f\u6027\uff0c\u4f46\u662f\u5faa\u73af\u904d\u5386\u65f6\uff0c\u8f93\u51fa\u7684\u987a\u5e8f\u4e0d\u4f1a\u53d8\u5316\u3002</p>"},{"location":"Java/Java-%E9%9B%86%E5%90%88-Map/#_3","title":"\u5e76\u53d1\u95ee\u9898","text":"<p><code>HashMap</code>\u662f\u7ebf\u7a0b\u4e0d\u5b89\u5168\u7684\uff0c\u591a\u7ebf\u7a0b\u7f16\u7a0b\u4e0b\u5efa\u8bae\u4f7f\u7528<code>ConcurrentHashMap</code>\u3002</p>"},{"location":"Java/Java-%E9%9B%86%E5%90%88-Map/#concurrenthashmap","title":"ConcurrentHashMap","text":"<p><code>ConcurrentHashMap</code>\u4e0e<code>HashMap</code>\u7684\u5b9e\u73b0\u51e0\u4e4e\u4e00\u6837\u3002</p> <p><code>ConcurrentHashMap</code>\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\uff0c\u5b83\u901a\u8fc7\u5bf9\u54c8\u5e0c\u6876\u4e2d\u7684\u4e00\u4e2a\u5143\u7d20\u52a0\u9501\uff08CAS+synchronized\uff09\u4fdd\u8bc1\u5e76\u53d1\u5b89\u5168\uff0c\u540c\u65f6\u63d0\u9ad8\u5e76\u53d1\u91cf\u3002</p>"},{"location":"Java/Java-%E9%9B%86%E5%90%88-Map/#treemap","title":"TreeMap","text":"<p>\u91c7\u7528\u7ea2\u9ed1\u6811\u5b58\u50a8\u6570\u636e\uff0c\u53ef\u4ee5\u770b\u505a\u662f<code>HashMap</code>\u7684\u7b80\u5316\u7248\u3002</p> <p><code>TreeMap</code>\u4e2d\u7684\u5143\u7d20\u662f\u6709\u5e8f\u7684\u3002</p>"},{"location":"Java/Java-%E9%9B%86%E5%90%88-%E6%95%B0%E7%BB%84/","title":"Java-\u96c6\u5408-\u6570\u7ec4","text":"<p>[toc]</p>"},{"location":"Java/Java-%E9%9B%86%E5%90%88-%E6%95%B0%E7%BB%84/#_1","title":"\u6982\u89c8","text":"<p>\u6240\u6709\u6e90\u7801\u57fa\u4e8eJDK1.8\u3002</p> <p>\u6570\u7ec4\u662f\u4e00\u79cd\u975e\u5e38\u7b80\u5355\u7684\u6570\u636e\u7ed3\u6784\u3002\u6211\u4eec\u4e3b\u8981\u8ba8\u8bba\u4e09\u4e2a\u6570\u7ec4\u7c7b\uff1aArrayList\uff0cCopyOnWriteArrayList\u548cVector\u3002\u8ba8\u8bba\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u6ce8\u610f\u4ee5\u4e0b\u51e0\u70b9\uff1a</p> <ol> <li>\u6269\u5bb9\u65b9\u5f0f\uff1a\u5f53\u6570\u7ec4\u88c5\u6ee1\u540e\uff0c\u4e0d\u80fd\u76f4\u63a5\u5728\u5c3e\u90e8\u6dfb\u52a0\u5143\u7d20\uff08\u60f3\u60f3\u4e3a\u4ec0\u4e48\uff09\uff0c\u800c\u662f\u9700\u8981\u91cd\u65b0\u627e\u4e00\u7247\u65b0\u7684\u5185\u5b58\uff0c\u7136\u540e\u5c06\u539f\u5148\u7684\u6570\u7ec4\u62f7\u8d1d\u5230\u65b0\u7684\u4f4d\u7f6e\u3002</li> <li>\u5e76\u53d1\u5b89\u5168\uff1a\u5f53\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u64cd\u4f5c\u4e00\u4e2a\u6570\u7ec4\u5bf9\u8c61\u65f6\uff0c\u5982\u4f55\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\u3002</li> <li>fast-fail\u548cfast-safe\u673a\u5236\uff1a\u4f7f\u7528\u8fed\u4ee3\u5668\u8bbf\u95eeJava\u96c6\u5408\u65f6\uff0c\u90fd\u53ef\u80fd\u4ea7\u751f\u8fd9\u4e24\u7c7b\u95ee\u9898\u3002</li> </ol> <p>\u603b\u4f53\u6765\u770b\uff0cArrayList\u662f\u7ebf\u7a0b\u4e0d\u5b89\u5168\u7684\uff1bCopyOnWriteArrayList\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\uff1bVector\u4e5f\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\uff0c\u4e0d\u8fc7\u6548\u7387\u8f83\u4f4e\uff0c\u5176\u539f\u7406\u5927\u81f4\u5c31\u662f\u7ed9ArrayList\u4e2d\u7684\u65b9\u6cd5\u52a0\u4e0asynchronized\u3002</p>"},{"location":"Java/Java-%E9%9B%86%E5%90%88-%E6%95%B0%E7%BB%84/#_2","title":"\u6dfb\u52a0\u5143\u7d20","text":"<p>ArrayList</p> <pre><code>public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt;\n        implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable {\n    /**\n     * Appends the specified element to the end of this list.\n     *\n     * @param e element to be appended to this list\n     * @return &lt;tt&gt;true&lt;/tt&gt; (as specified by {@link Collection#add})\n     */\n    public boolean add(E e) {\n        ensureCapacityInternal(size + 1);  // Increments modCount!!\n        elementData[size++] = e;\n        return true;\n    }\n}\n</code></pre> <p>\u8bb2\u89e3\uff1a\u5148\u4e0d\u7ba1\u51fd\u6570<code>ensureCapacityInternal</code>\u3002add\u51fd\u6570\u7684\u4f5c\u7528\u662f\u5c06\u5143\u7d20\u653e\u5165\u6570\u7ec4\uff0c\u5e76\u4e14\u5c06\u5c3e\u6307\u9488\u540e\u79fb\u4e00\u4f4d\u3002</p> <p>Vector</p> <pre><code>public class Vector&lt;E&gt; extends AbstractList&lt;E&gt;\n    implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable {\n    /**\n     * Appends the specified element to the end of this Vector.\n     *\n     * @param e element to be appended to this Vector\n     * @return {@code true} (as specified by {@link Collection#add})\n     * @since 1.2\n     */\n    public synchronized boolean add(E e) {\n        modCount++;\n        ensureCapacityHelper(elementCount + 1);\n        elementData[elementCount++] = e;\n        return true;\n    }\n}\n</code></pre> <p>\u8bb2\u89e3\uff1a\u548cArrayList\u7684\u5b9e\u73b0\u51e0\u4e4e\u4e00\u6837\uff0c\u53ea\u662f\u591a\u4e86<code>synchronized</code>\u4fee\u9970\u51fd\u6570\u3002</p> <p>CopyOnWriteArrayList</p> <pre><code>public class CopyOnWriteArrayList&lt;E&gt;\n    implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable {\n    /**\n     * Appends the specified element to the end of this list.\n     *\n     * @param e element to be appended to this list\n     * @return {@code true} (as specified by {@link Collection#add})\n     */\n    public boolean add(E e) {\n        final ReentrantLock lock = this.lock;\n        lock.lock();\n        try {\n            // \u83b7\u53d6\u6570\u7ec4\u5bf9\u8c61\u548c\u6570\u7ec4\u957f\u5ea6\n            Object[] elements = getArray();\n            int len = elements.length;\n\n            // \u5c06\u539f\u6570\u7ec4\u4e2d\u6bcf\u4e2a\u5143\u7d20\u7684\u5f15\u7528\u90fd\u590d\u5236\u4e00\u904d\uff0c\u653e\u5230\u4e00\u4e2a\u65b0\u7684\u6570\u7ec4\u4e2d\uff0c\u5e76\u4e14\u7ed9\u65b0\u6570\u7ec4\u52a0\u51651\u4e2a\u5143\u7d20\n            Object[] newElements = Arrays.copyOf(elements, len + 1);\n            newElements[len] = e;\n\n            // \u5c06\u65b0\u7684\u6570\u7ec4\u8d4b\u503c\u7ed9\u539f\u6765\u7684\u6570\u7ec4\uff0c\u8fd9\u6b65\u64cd\u4f5c\u8017\u65f6\u6781\u77ed\n            setArray(newElements);\n            return true;\n        } finally {\n            lock.unlock();\n        }\n    }\n\n    /**\n     * Gets the array.  Non-private so as to also be accessible\n     * from CopyOnWriteArraySet class.\n     */\n    final Object[] getArray() {\n        return array;\n    }\n\n    /**\n     * Sets the array.\n     */\n    final void setArray(Object[] a) {\n        array = a;\n    }\n}\n</code></pre> <p>\u8bb2\u89e3\uff1a</p> <ul> <li> <p>\u5e76\u53d1\u5b89\u5168\u65b9\u9762</p> </li> <li> <p>add\u51fd\u6570\u4e2d\u4f7f\u7528\u9501<code>lock</code>\uff0c\u4fdd\u8bc1\u4e86\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\u6dfb\u52a0\u5143\u7d20\u4e0d\u4f1a\u4ea7\u751f\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\u3002</p> </li> <li> <p>\u5199\u65f6\u590d\u5236\uff08Copy On Write\uff09\u4e0efail-safe</p> </li> <li> <p>\u589e\u52a0\u5143\u7d20\u65f6\uff0c\u73b0\u5c06\u539f\u6765\u6570\u7ec4\u4e2d\u7684\u6240\u6709\u5f15\u7528\u62f7\u8d1d\u4e00\u4efd\u5e76\u653e\u5165\u65b0\u6570\u7ec4\uff08\u53ef\u641c\u7d22<code>Arrays.copyOf()</code>\u662f\u6df1\u62f7\u8d1d\u8fd8\u662f\u6d45\u62f7\u8d1d\uff09\u3002\u65b0\u6570\u7ec4\u4e2d\u6dfb\u52a0\u5143\u7d20\u540e\uff0c\u518d\u5c06\u65b0\u6570\u7ec4\u7684\u5f15\u7528\u6307\u5411\u539f\u6570\u7ec4\u3002\u8fd9\u6837\u770b\u6765\uff0c\u6bcf\u6b21\u6dfb\u52a0\u5143\u7d20\uff0c\u90fd\u4f1a\u521b\u5efa1\u4e2a\u65b0\u6570\u7ec4\u548c\u590d\u52362\u6b21\u6570\u7ec4\uff01\u975e\u5e38\u8017\u8d39\u8d44\u6e90\uff01</p> </li> <li> <p>\u91c7\u7528\u5927\u8d39\u5468\u7ae0\u7684\u65b9\u5f0f\u4fee\u6539\u6570\u7ec4\uff0c\u662f\u4e3a\u4e86\u5b9e\u73b0fail-safe\u673a\u5236\u3002</p> </li> <li> <p>\u83b7\u53d6<code>CopyOnWriteArrayList</code>\u5bf9\u8c61\u7684\u8fed\u4ee3\u5668\u5bf9\u8c61<code>iter</code>\u65f6\uff0c<code>iter</code>\u5bf9\u8c61\u4e2d\u6709\u4e00\u4e2a\u6570\u7ec4\u5f15\u7528<code>snapshot</code>\u6307\u5411\u5f53\u524d\u6570\u7ec4<code>array</code>\uff0c\u5373\u4fbf\u4e4b\u540e\u6570\u7ec4\u589e\u5220\u5143\u7d20\uff0c<code>iter</code>\u8fd8\u662f\u64cd\u4f5c\u539f\u6765\u7684\u6570\u7ec4\uff0c\u6b64\u65f6\u5c31\u4f1a\u4ea7\u751f\u6570\u636e\u4e00\u81f4\u6027\u95ee\u9898\u3002</p> <p>```java public class CopyOnWriteArrayList     implements List, RandomAccess, Cloneable, java.io.Serializable {     /* The array, accessed only via getArray/setArray. /     private transient volatile Object[] array; <pre><code>/**\n * \u83b7\u53d6\u8fed\u4ee3\u5668\u5bf9\u8c61\n */\npublic Iterator&lt;E&gt; iterator() {\n    return new COWIterator&lt;E&gt;(getArray(), 0);\n}\n\n/**\n * \u83b7\u53d6\u5f53\u524d\u6570\u7ec4\u5bf9\u8c61\n */\nfinal Object[] getArray() {\n    return array;\n}\n\n/**\n * \u8fed\u4ee3\u5668\u5185\u90e8\u7c7b\n */\nstatic final class COWIterator&lt;E&gt; implements ListIterator&lt;E&gt; {\n    /** Snapshot of the array */\n    private final Object[] snapshot;\n    /** Index of element to be returned by subsequent call to next.  */\n    private int cursor;\n\n    private COWIterator(Object[] elements, int initialCursor) {\n        cursor = initialCursor;\n        snapshot = elements;\n    }\n}\n</code></pre> <p>} ```</p> <li> <p>\u4f7f\u7528\u573a\u666f</p> </li> <li> <p>\u9002\u5408\u4e8e\u5e76\u53d1\u7f16\u7a0b\u65f6\u8bfb\u591a\u5199\u5c11\u7684\u573a\u666f\u3002</p> </li>"},{"location":"Java/Java%E4%B8%AD%E6%96%AD/","title":"Java\u4e2d\u65ad","text":"<p>[toc]</p>"},{"location":"Java/Java%E4%B8%AD%E6%96%AD/#_1","title":"\u4ec0\u4e48\u662f\u4e2d\u65ad","text":"<p>\u6613\u9519\uff1a\u4e0d\u8981\u8bef\u8ba4\u4e3a\u8fd0\u884c\u6001\u7684\u7ebf\u7a0b\u63a5\u6536\u5230\u4e2d\u65ad\u4fe1\u53f7\u540e\u4f1a\u505c\u6b62\u6267\u884c\uff01</p> <ol> <li>\u4e2d\u65ad\u901a\u5e38\u662f\u6307\u4e2d\u65ad\u4fe1\u53f7\uff0c\u4e2d\u65ad\u4fe1\u53f7\u7531\u4e00\u4e2a\u53d1\u9001\u8005\u7ebf\u7a0b\uff08<code>Runnable</code>\u72b6\u6001\uff09\u53d1\u9001\u7ed9\u63a5\u6536\u8005\u7ebf\u7a0b\uff08<code>BLOCK/WAITING/TIMED_WAITING</code>\u72b6\u6001\uff09\uff0c\u63a5\u6536\u8005\u7ebf\u7a0b\u4f1a\u88ab\u5524\u9192\u5e76\u629b\u51fa\u4e00\u4e2a\u5f02\u5e38\uff08<code>InterruptedException</code>\uff09\uff0c\u5e76\u5c06\u4e2d\u65ad\u6807\u5fd7\u4f4d\u8bbe\u4e3a<code>true</code>\u3002</li> </ol> <p>\u601d\u8003\uff1a\u963b\u585e\u7ebf\u7a0b\u6536\u5230\u4e2d\u65ad\u4fe1\u53f7\u540e\u4f1a\u88ab\u5524\u9192\uff0c\u4e3a\u4ec0\u4e48\u8981\u629b\u51fa<code>InterruptedException</code>\u5462\uff1f</p> <p>\u7b54\u6848\uff1a\u4e3a\u4e86\u77e5\u9053\u7ebf\u7a0b\u4e3a\u4ec0\u4e48\u88ab\u5524\u9192\u3002</p> <ol> <li>\u5173\u4e8e\u4e2d\u65ad\u6807\u5fd7\u4f4d\uff1a</li> <li>\u6bcf\u4e00\u4e2a\u7ebf\u7a0b\u90fd\u6709\u4e00\u4e2a\u4e2d\u65ad\u6807\u5fd7\u4f4d\uff08<code>true/false</code>\uff09\uff0c\u4e14\u7ebf\u7a0b\u4e5f\u80fd\u8bbe\u7f6e\u5176\u4ed6\u7ebf\u7a0b\u7684\u4e2d\u65ad\u6807\u5fd7\u4f4d\u3002</li> <li>\u53ef\u4ee5\u901a\u8fc7<code>Thread.currentThread().isInterrupted()</code>\u51fd\u6570\u83b7\u53d6\u5f53\u524d\u7ebf\u7a0b\u7684\u6807\u5fd7\u4f4d\u3002</li> </ol>"},{"location":"Java/Java%E4%B8%AD%E6%96%AD/#_2","title":"\u53d1\u9001\u4e2d\u65ad\u4fe1\u53f7\u7684\u6848\u4f8b","text":"<p>\u5e38\u7528\u51fd\u6570\uff1a</p> <p><code>Thread.currentThread().isInterrupted()</code>\uff1a\u67e5\u770b\u7ebf\u7a0b\u7684\u4e2d\u65ad\u6807\u5fd7\u4f4d\u3002</p> <p><code>Thread.interrupted()</code>\uff1a\u67e5\u770b\u7ebf\u7a0b\u7684\u4e2d\u65ad\u6807\u5fd7\u4f4d\uff0c \u6e05\u9664\u4e2d\u65ad\u6807\u5fd7\u4f4d</p> <pre><code>public class Main {\n    public static void main(String[] args) throws InterruptedException {\n        Thread t1 = new Thread(() -&gt; {\n            try {\n                Thread.sleep(1000);\n                System.out.println(\"t1\u7ebf\u7a0b\u6b63\u5e38\u6267\u884c\u5b8c\u6bd5\u3002\");\n            } catch (InterruptedException e) {\n                System.out.println(\"t1\u7ebf\u7a0b\u6536\u5230\u4e2d\u65ad\u4fe1\u53f7\uff0c\u6b63\u5728\u56de\u6536\u8d44\u6e90...\");\n\n                // \u4e3a\u4e86\u8ba9\u4e3b\u7ebf\u7a0b\u6355\u83b7t1\u7ebf\u7a0b\u7684RUNNABLE\u72b6\u6001\n                for (int i = 0; i &lt; 100000000; i++) {}\n            }\n        });\n\n        // \u542f\u52a8t1\u7ebf\u7a0b\n        t1.start();\n\n        // \u4e3b\u7ebf\u7a0b\u4f11\u77201ms\n        Thread.sleep(1);\n\n        // t1\u7ebf\u7a0b\u6b63\u5904\u4e8eTIMED_WAITING\u72b6\u6001\n        System.out.println(\"t1\u7ebf\u7a0b\u5f53\u524d\u72b6\u6001: \" + t1.getState());\n\n        // \u6b64\u65f6t1\u7ebf\u7a0b\u8fd8\u672a\u6536\u5230\u4e2d\u65ad\u4fe1\u53f7\uff0c\u6240\u4ee5\u503c\u4e3afalse\n        System.out.println(\"t1\u7ebf\u7a0b\u4e2d\u65ad\u6807\u5fd7\u4f4d: \" + t1.isInterrupted());\n\n        // \u5411t1\u7ebf\u7a0b\u53d1\u9001\u4e2d\u65ad\u4fe1\u53f7\n        t1.interrupt();\n\n        // \u4e3b\u7ebf\u7a0b\u4f11\u77201ms\n        Thread.sleep(1);\n\n        // \u6b64\u65f6t1\u7ebf\u7a0b\u5df2\u7ecf\u6536\u5230\u4e2d\u65ad\u4fe1\u53f7\uff0c\u56e0\u6b64t1\u7ebf\u7a0b\u7684\u6807\u5fd7\u4f4d\u503c\u4e3atrue\n        System.out.println(\"t1\u7ebf\u7a0b\u4e2d\u65ad\u6807\u5fd7\u4f4d: \" + t1.isInterrupted());\n\n        // \u56e0\u4e3at1\u7ebf\u7a0b\u6536\u5230\u4e2d\u65ad\u4fe1\u53f7\u540e\u88ab\u5524\u9192\u4e14\u6b63\u5728\u6267\u884c\uff0c\u6240\u4ee5t1\u7ebf\u7a0b\u7684\u72b6\u6001\u662fRUNNABLE\n        System.out.println(\"t1\u7ebf\u7a0b\u5f53\u524d\u72b6\u6001: \" + t1.getState());\n\n        Thread.sleep(100);\n\n        // \u4e3b\u7ebf\u7a0b\u7ebf\u7a0b\u963b\u585e100ms\uff0c\u786e\u4fddt1\u7ebf\u7a0b\u6267\u884c\u5b8c\u6bd5\n        System.out.println(\"t1\u7ebf\u7a0b\u5f53\u524d\u72b6\u6001: \" + t1.getState());\n    }\n}\n</code></pre> <p>\u7ebf\u7a0b\u5728runnable\u72b6\u6001\u4e0b\u6536\u5230\u4e2d\u65ad\u4fe1\u53f7\u4f1a\u600e\u6837\uff1f\u53d1\u9001\u65b9\u6765\u81ea\u81ea\u5df1\u6216\u522b\u4eba\u3002</p> <p>\u76f4\u63a5\u5ffd\u7565\u4e2d\u65ad\u4fe1\u53f7\u3002</p> <p>\u5982\u679c\u60f3\u5904\u7406\u4e2d\u65ad\u4fe1\u53f7\u8be5\u600e\u4e48\u505a\u5462\uff1f</p> <p>\u533a\u522b\u662f\u4ec0\u4e48\uff1f</p> <pre><code>Thread.currentThread().isInterrupted();  \u53ea\u662f\u67e5\u770b\nThread.interrupted();  \u6e05\u9664\u4e2d\u65ad\u6807\u5fd7\u4f4d\n</code></pre>"},{"location":"Java/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/","title":"Java\u5185\u5b58\u6a21\u578b","text":"<p>[toc]</p>"},{"location":"Java/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/#_1","title":"\u662f\u4ec0\u4e48","text":"<p>Java\u5185\u5b58\u6a21\u578b\uff08JMM\uff09\u662f\u4e00\u79cd\u865a\u62df\u673a\u89c4\u8303\uff0c\u5b9a\u4e49\u4e86Java\u865a\u62df\u673a\u4e0e\u8ba1\u7b97\u673a\u5185\u5b58\u662f\u5982\u4f55\u534f\u540c\u5de5\u4f5c\u7684\uff0c\u5b9e\u73b0\u8ba9Java\u7a0b\u5e8f\u5728\u5404\u79cd\u5e73\u53f0\u4e0b\u90fd\u80fd\u8fbe\u5230\u4e00\u81f4\u7684\u5e76\u53d1\u6548\u679c</p>"},{"location":"Java/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/#_2","title":"\u786c\u4ef6\u5185\u5b58\u67b6\u6784","text":"<p>\u73b0\u4ee3\u786c\u4ef6\u5185\u5b58\u6a21\u578b\u4e0eJava\u5185\u5b58\u6a21\u578b\u6709\u4e00\u4e9b\u4e0d\u540c\uff0c\u7406\u89e3\u5185\u5b58\u6a21\u578b\u67b6\u6784\u4ee5\u53caJava\u5185\u5b58\u6a21\u578b\u5982\u4f55\u4e0e\u5b83\u534f\u540c\u5de5\u4f5c\u4e5f\u662f\u975e\u5e38\u91cd\u8981\u7684\u3002</p> <p>\u591aCPU\uff1a\u4e00\u4e2a\u73b0\u4ee3\u8ba1\u7b97\u673a\u901a\u5e38\u7531\u4e24\u4e2a\u6216\u8005\u591a\u4e2aCPU\u3002\u5176\u4e2d\u4e00\u4e9bCPU\u8fd8\u6709\u591a\u6838\u3002\u4ece\u8fd9\u4e00\u70b9\u53ef\u4ee5\u770b\u51fa\uff0c\u5728\u4e00\u4e2a\u6709\u4e24\u4e2a\u6216\u8005\u591a\u4e2aCPU\u7684\u73b0\u4ee3\u8ba1\u7b97\u673a\u4e0a\u540c\u65f6\u8fd0\u884c\u591a\u4e2a\u7ebf\u7a0b\u662f\u53ef\u80fd\u7684\u3002\u6bcf\u4e2aCPU\u5728\u67d0\u4e00\u65f6\u523b\u8fd0\u884c\u4e00\u4e2a\u7ebf\u7a0b\u662f\u6ca1\u6709\u95ee\u9898\u7684\u3002\u8fd9\u610f\u5473\u7740\uff0c\u5982\u679c\u4f60\u7684Java\u7a0b\u5e8f\u662f\u591a\u7ebf\u7a0b\u7684\uff0c\u5728\u4f60\u7684Java\u7a0b\u5e8f\u4e2d\u6bcf\u4e2aCPU\u4e0a\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u80fd\u540c\u65f6\uff08\u5e76\u53d1\uff09\u6267\u884c\u3002</p> <p>\u7f13\u5b58\u4e00\u81f4\u6027\u95ee\u9898</p> <p>\u591a\u5904\u7406\u5668\u4e2d\uff0c\u6bcf\u4e2a\u5904\u7406\u5668\u90fd\u6709\u81ea\u5df1\u7684\u9ad8\u901f\u7f13\u5b58\uff0c\u540c\u65f6\u8fd9\u4e9b\u5904\u7406\u5668\u5171\u4eab\u4e3b\u5b58\u3002\u5f53\u591a\u4e2a\u5904\u7406\u5668\u64cd\u4f5c\u540c\u4e00\u7247\u5185\u5b58\u7a7a\u95f4\u65f6\uff0c\u5404\u81ea\u7684\u7f13\u5b58\u6570\u636e\u53ef\u80fd\u4e0d\u4e00\u6837\uff0c\u90a3\u4e48\u8be5\u4ee5\u54ea\u4e2aCPU\u7684\u7f13\u5b58\u4e3a\u51c6\u5462\uff1f\u8fd9\u5c31\u662f\u7f13\u5b58\u4e00\u81f4\u6027\u95ee\u9898\u3002</p> <p>\u6307\u4ee4\u91cd\u6392\u95ee\u9898</p> <p>\u5904\u7406\u5668\u4e3a\u4e86\u5145\u5206\u5229\u7528\u5185\u90e8\u7684\u8fd0\u7b97\u5355\u5143\uff0c\u80fd\u4f1a\u5bf9\u8f93\u5165\u4ee3\u7801\u8fdb\u884c\u4e71\u5e8f\u6267\u884c\u4f18\u5316\u3002Java\u865a\u62df\u673a\u4e5f\u91c7\u7528\u7c7b\u4f3c\u7684\u4e71\u5e8f\u91cd\u6392\u4f18\u5316\u3002\u8fd9\u5c31\u4ea7\u751f\u4e86\u4e00\u4e2a\u95ee\u9898\uff1a\u5728\u591a\u7ebf\u7a0b\u7f16\u7a0b\u4e2d\uff0c\u5982\u679c\u4e00\u4e2a\u8ba1\u7b97\u4efb\u52a1\u4f9d\u8d56\u53e6\u4e00\u4e2a\u8ba1\u7b97\u4efb\u52a1\u7684\u4e2d\u95f4\u8fc7\u7a0b\uff0c\u90a3\u4e48\u4e71\u5e8f\u91cd\u6392\u540e\u53ef\u80fd\u4f1a\u51fa\u95ee\u9898\u3002</p>"},{"location":"Java/Java%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/#java_1","title":"Java\u5185\u5b58\u6a21\u578b\u548c\u786c\u4ef6\u5185\u5b58\u67b6\u6784\u4e4b\u95f4\u7684\u6865\u63a5","text":"<p>\u5bf9\u4e8e\u786c\u4ef6\uff0c\u6240\u6709\u7684\u7ebf\u7a0b\u6808\u548c\u5806\u90fd\u5206\u5e03\u5728\u4e3b\u5185\u5b58\u4e2d\u3002\u90e8\u5206\u7ebf\u7a0b\u6808\u548c\u5806\u53ef\u80fd\u6709\u65f6\u5019\u4f1a\u51fa\u73b0\u5728CPU\u7f13\u5b58\u4e2d\u548cCPU\u5185\u90e8\u7684\u5bc4\u5b58\u5668\u4e2d\u3002</p>"},{"location":"Java/Java%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/","title":"Java\u51fd\u6570\u5f0f\u7f16\u7a0b","text":"<p>[toc]</p>"},{"location":"Java/Java%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/#lambda","title":"lambda\u8868\u8fbe\u5f0f","text":""},{"location":"Java/Java%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/#stream","title":"Stream","text":"<p>\u83b7\u53d6\u6d41\u5bf9\u8c61\uff1a\u901a\u5e38\u901a\u8fc7list\uff0cset\u8f6c\u4e3a\u6d41\u5bf9\u8c61\u3002</p> <pre><code>public class StreamDemo {\n    public static void main(String[] args) {\n        List&lt;String&gt; list = Arrays.asList(\"apple\", \"banana\");\n        Set&lt;String&gt; set = new HashSet&lt;&gt;(Arrays.asList(\"apple\", \"banana\", \"peach\"));\n\n        // \u901a\u8fc7Collection\u63a5\u53e3\u7684\u5b9e\u73b0\u7c7b\u8c03\u7528stream\u65b9\u6cd5\u83b7\u53d6stream\u5bf9\u8c61\n        Stream&lt;String&gt; stream = list.stream();\n        Stream&lt;String&gt; stream1 = set.stream();\n\n        // \u76f4\u63a5\u83b7\u53d6stream\u5bf9\u8c61\n        Stream&lt;Integer&gt; integerStream = Stream.of(1, 2, 5, 2, 2);\n        Stream&lt;String&gt; stringStream = Stream.of(\"lc\", \"lhl\", \"tourist\");\n    }\n}\n\n</code></pre> <p>\u5e38\u89c1\u64cd\u4f5c\uff1asorted, filter, distinct, map, limit, collect</p> <pre><code>public class StreamDemo {\n    public static void main(String[] args) {\n        ArrayList&lt;Integer&gt; arr = new ArrayList&lt;&gt;(Arrays.asList(1, 4, 2, 3, 4, 2, 5, 4, 6, 3));\n        Stream&lt;Integer&gt; integerStream = arr.stream();\n        Stream&lt;String&gt; newStream = integerStream.sorted()\n                .filter(x -&gt; x % 2 == 0)  // \u8fc7\u6ee4\u6389\u5947\u6570\n                .distinct()\n                .map(x -&gt; \"\u65b0\u5143\u7d20\uff1a\" + x)  // \u5c06\u6bcf\u4e2a\u5143\u7d20\u8f6c\u4e3a\u201c\u5b57\u7b26\u4e32+\u6570\u5b57\u201d\uff0c\u8fd9\u91cc\u8f6c\u53d8\u4e86\u5143\u7d20\u7684\u7c7b\u578b\n                .limit(2);\n        List&lt;String&gt; list = newStream.collect(Collectors.toList());\n        Set&lt;String&gt; set = newStream.collect(Collectors.toSet());\n    }\n}\n</code></pre>"},{"location":"Java/Java%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/#parallelstream","title":"parallelStream","text":"<ol> <li>\u4f7f\u7528\u65b9\u5f0f\u548cStream\u51e0\u4e4e\u4e00\u6837\u3002</li> <li>\u6709\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\uff0c\u5c3d\u91cf\u4e0d\u8981\u505a\u4fee\u6539\u64cd\u4f5c\u3002</li> <li>\u5904\u7406\u5927\u91cf\u6570\u636e\u6709\u4f18\u52bf\uff0c\u4f46\u662f\u5904\u7406\u5c11\u91cf\u6570\u636e\u65f6\u7531\u4e8e\u7ebf\u7a0b\u7684\u5207\u6362\uff0c\u53cd\u800c\u964d\u4f4e\u7a0b\u5e8f\u6548\u7387\u3002</li> </ol>"},{"location":"Java/Java%E5%8F%8D%E5%B0%84/","title":"Java\u53cd\u5c04","text":"<p>[toc]</p>"},{"location":"Java/Java%E5%8F%8D%E5%B0%84/#_1","title":"\u662f\u4ec0\u4e48","text":"<p>\u53cd\u5c04\u662fJava\u8bed\u8a00\u7684\u4e00\u4e2a\u7279\u6027\uff0c\u7528\u4e8e\u8fd0\u884c\u65f6\u52a8\u6001\u64cd\u4f5c\u7c7b\u3001\u5bf9\u8c61\u3001\u65b9\u6cd5\u3001\u5b57\u6bb5\u7b49\u4fe1\u606f\u3002</p> <p>\u4f7f\u7528\u53cd\u5c04\u8981\u8c28\u614e\uff0c\u56e0\u4e3a\u53cd\u5c04\u4f1a\u7ed5\u8fc7\u4e00\u4e9b\u5b89\u5168\u673a\u5236\uff0c\u6bd4\u5982\u901a\u8fc7\u53cd\u5c04\u53ef\u4ee5\u8bbf\u95ee\u79c1\u6709\u6210\u5458\u3002</p>"},{"location":"Java/Java%E5%8F%8D%E5%B0%84/#_2","title":"\u4f7f\u7528\u6848\u4f8b","text":"<p>\u4eba\u7c7b</p> <pre><code>public class Person {\n    private String name;\n    private int age;\n\n    public Person(String name, int age) {\n        this.name = name;\n        this.age = age;\n    }\n\n    public void sayHello() {\n        System.out.println(\"Hello, I'm \" + name + \", \" + age + \" years old.\");\n    }\n\n    private void sayGood() {\n        System.out.println(\"I'm\" + name + \", \" + age + \" years old. I'm good!!!\");\n    }\n\n    public static void sayStatic(String str, int num) {\n        System.out.println(\"This is a static method!\");\n        System.out.println(\"Your str is \" + str);\n        System.out.println(\"Your num is \" + num);\n    }\n}\n</code></pre> <p>\u4e3b\u7c7b</p> <pre><code>import java.lang.reflect.Constructor;\nimport java.lang.reflect.Field;\nimport java.lang.reflect.Method;\n\npublic class Main {\n    public static void main(String[] args) throws Exception {\n        // \u83b7\u53d6\u7c7b\u7684Class\u5bf9\u8c61\n        Class&lt;?&gt; clazz = Class.forName(\"org.lee._reflection.Person\");\n        // \u53e6\u4e00\u79cd\u83b7\u53d6Class\u5bf9\u8c61\u7684\u64cd\u4f5c\n        // Class&lt;?&gt; clazz = Person.class;\n\n\n        // \u52a8\u6001\u521b\u5efa\u5bf9\u8c61\n        Constructor&lt;?&gt; constructor = clazz.getConstructor(String.class, int.class);\n        Object person = constructor.newInstance(\"Alice\", 25);\n        // \u4e5f\u53ef\u4ee5\u4e0d\u901a\u8fc7constructor\u521b\u5efa\u5bf9\u8c61\uff0c\u4e0d\u8fc7\u8fd9\u79cd\u60c5\u51b5\u53ea\u80fd\u8c03\u7528\u65e0\u53c2\u6784\u9020\u51fd\u6570\n        Object obj = clazz.newInstance();\n\n\n        // \u83b7\u53d6public\u65b9\u6cd5\n        Method sayHelloMethod = clazz.getMethod(\"sayHello\");\n        // \u83b7\u53d6\u6240\u6709\u4fee\u9970\u7b26\u7684\u65b9\u6cd5(private, protected, public...)\uff0c\u5e76\u8bbe\u7f6e\u4e3a\u53ef\u8bbf\u95ee\n        Method sayGood = clazz.getDeclaredMethod(\"sayGood\");\n        sayGood.setAccessible(true);\n        // \u540c\u7406\uff0c\u4e5f\u53ef\u4ee5\u83b7\u53d6\u9759\u6001\u65b9\u6cd5\u3002\u5e76\u8bbe\u7f6e\u51fd\u6570\u53c2\u6570\n        Method sayStatic = clazz.getMethod(\"sayStatic\", String.class, int.class);\n\n\n        // \u8c03\u7528person\u5bf9\u8c61\u4e2d\u7684\u67d0\u4e2a\u65b9\u6cd5\uff0c\u51fd\u6570\u53c2\u6570\u7d27\u8ddfobj\u540e\u9762\n        sayHelloMethod.invoke(person);\n        sayGood.invoke(person);\n        // \u9759\u6001\u65b9\u6cd5\u4f20\u53c2\u65f6\uff0cobj\u53c2\u6570\u8bbe\u4e3anull\u5373\u53ef\u3002\n        sayStatic.invoke(null, \"longcoding\", 8);\n\n\n        // \u8bbf\u95ee\u5b57\u6bb5\n        Field nameField = clazz.getDeclaredField(\"name\");\n        // \u8bbe\u7f6e\u5b57\u6bb5\u53ef\u8bbf\u95ee(\u5373\u4fbf\u8be5\u5b57\u6bb5\u662fprivate)\n        nameField.setAccessible(true);\n        String name = (String) nameField.get(person);\n        System.out.println(\"Name: \" + name);\n\n\n        // \u4fee\u6539\u5b57\u6bb5\u7684\u503c\n        nameField.set(person, \"Bob\");\n        name = (String) nameField.get(person);\n        System.out.println(\"Modified Name: \" + name);\n    }\n}\n</code></pre>"},{"location":"Java/Java%E5%8F%8D%E5%B0%84/#java_1","title":"Java\u5b9e\u73b0\u53cd\u5c04\u673a\u5236\u7684\u5e95\u5c42\u539f\u7406","text":"<p>Java\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u4f1a\u5c06\u7c7b\u76f8\u5173\u7684\u4fe1\u606f\u653e\u5165\u5143\u7a7a\u95f4\uff08\u5b83\u4e0d\u5728JVM\u4e2d\uff0c\u800c\u662f\u5728\u672c\u5730\u5185\u5b58\u4e2d\uff09\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c\u6bcf\u4e2a\u7c7b\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\u540e\uff0c\u90fd\u4f1a\u5728\u5143\u7a7a\u95f4\u4e2d\u5bf9\u5e94\u4e00\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\uff08instanceKlazz\uff09\u3002</p> <p>\u5047\u5b9a\u6709\u4e00\u4e2aPerson\u7c7b\uff0c\u5219Person.class\u662f\u4e00\u4e2a\u5f15\u7528\uff0c\u6307\u5411\u5143\u7a7a\u95f4\u4e2d\u7684Person\u7c7b\u7684<code>instanceKlazz</code>\u3002\u6211\u4eec\u53ea\u80fd\u901a\u8fc7Person.class\u8bbf\u95ee\u8be5\u5bf9\u8c61\u3002</p> <p>\u901a\u8fc7Person.class\uff0c\u53ef\u4ee5\u8c03\u7528\u5f88\u591a\u65b9\u6cd5\uff1a<code>getName()</code>,<code>getDeclaredFields()</code>,<code>getMethods()</code>\u3002\u901a\u8fc7\u8fd9\u4e9b\u65b9\u6cd5\uff0c\u5c31\u53ef\u4ee5\u8bbf\u95ee\u8be5\u7c7b\u5bf9\u5e94\u7684<code>instanceKlazz</code>\u5bf9\u8c61\u4e2d\u7684\u5177\u4f53\u6570\u636e\u3002</p>"},{"location":"Java/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/","title":"Java\u5783\u573e\u56de\u6536","text":"<p>[toc]</p>"},{"location":"Java/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/#_1","title":"\u5f15\u8a00","text":"<p>\u8c08\u8bba\u5230\u5783\u573e\u56de\u6536\uff0c\u6211\u4eec\u9700\u8981\u77e5\u9053\u4ee5\u4e0b\u95ee\u9898\uff1a</p> <ol> <li>\u5982\u4f55\u5224\u65ad\u4e00\u4e2a\u5bf9\u8c61\u662f\u201c\u5783\u573e\u201d\uff1f</li> <li>\u5982\u4f55\u6e05\u7406\u5783\u573e\uff1f\u6362\u79cd\u8bf4\u6cd5\uff0c\u5982\u4f55\u91ca\u653e\u5185\u5b58\u5757\uff1f</li> </ol>"},{"location":"Java/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/#_2","title":"\u6b7b\u4ea1\u5bf9\u8c61\u5224\u65ad\u65b9\u6cd5","text":""},{"location":"Java/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/#_3","title":"\u5f15\u7528\u8ba1\u6570\u6cd5","text":"<p>\u5b9e\u73b0\u7b80\u5355\uff0c\u4f46\u662f\u4e0d\u80fd\u89e3\u51b3\u5faa\u73af\u4f9d\u8d56\u7684\u95ee\u9898\u3002</p>"},{"location":"Java/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/#_4","title":"\u53ef\u8fbe\u6027\u5206\u6790\u7b97\u6cd5","text":"<p>\u6709\u4e00\u7c7b\u70b9\uff0c\u6210\u4e3aGC-ROOT\uff0c\u4ee5\u6bcf\u4e00\u4e2aGC-ROOT\u4e3a\u6811\u6839\u5411\u4e0b\u53d1\u6563\uff0c\u5224\u65ad\u54ea\u4e9b\u5bf9\u8c61\u53ef\u8fbe\u3002\u5982\u679c\u67d0\u4e2a\u5bf9\u8c61\u4e0d\u80fd\u901a\u8fc7GC-ROOT\u62b5\u8fbe\uff0c\u90a3\u4e48\u5b83\u5bb9\u6613\u88ab\u56de\u6536\u3002</p> <p>\u90a3\u4e48\u54ea\u4e9b\u5bf9\u8c61\u53ef\u4ee5\u4f5c\u4e3a GC Roots \u5462\uff1f</p> <ul> <li>\u865a\u62df\u673a\u6808(\u6808\u5e27\u4e2d\u7684\u672c\u5730\u53d8\u91cf\u8868)\u4e2d\u5f15\u7528\u7684\u5bf9\u8c61</li> <li>\u672c\u5730\u65b9\u6cd5\u6808(Native \u65b9\u6cd5)\u4e2d\u5f15\u7528\u7684\u5bf9\u8c61</li> <li>\u65b9\u6cd5\u533a\u4e2d\u7c7b\u9759\u6001\u5c5e\u6027\u5f15\u7528\u7684\u5bf9\u8c61</li> <li>\u65b9\u6cd5\u533a\u4e2d\u5e38\u91cf\u5f15\u7528\u7684\u5bf9\u8c61</li> <li>\u6240\u6709\u88ab\u540c\u6b65\u9501\u6301\u6709\u7684\u5bf9\u8c61</li> </ul>"},{"location":"Java/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/#_5","title":"\u5783\u573e\u56de\u6536\u7b97\u6cd5","text":"<p>\u5783\u573e\u56de\u6536\u7b97\u6cd5\u4e3b\u8981\u89e3\u51b3\u4e86\u53d1\u73b0\u5783\u573e\u540e\uff0c\u5982\u4f55\u56de\u6536\u5783\u573e\u3002</p>"},{"location":"Java/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/#-","title":"\u6807\u8bb0-\u6e05\u9664 \u7b97\u6cd5","text":"<p>\u601d\u60f3\uff1a\u54ea\u4e9b\u5185\u5b58\u533a\u57df\u6709\u5783\u573e\uff0c\u5c31\u6807\u6ce8\u54ea\u4e9b\u5185\u5b58\u533a\u57df\u3002</p> <p>\u597d\u5904\uff1a\u5b9e\u73b0\u5bb9\u6613\u3002</p> <p>\u7f3a\u70b9\uff1a\u5bb9\u6613\u4ea7\u751f\u788e\u7247\u3002</p> <p></p>"},{"location":"Java/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/#-_1","title":"\u6807\u8bb0-\u590d\u5236 \u7b97\u6cd5","text":"<p>\u601d\u60f3\uff1a\u5c06\u5185\u5b58\u5206\u4e3a\u5927\u5c0f\u76f8\u540c\u7684\u4e24\u5757\u3002\u5f53\u5176\u4e2d\u4e00\u5757\u7528\u5b8c\u540e\uff0c\u5c06\u8be5\u5185\u5b58\u4e2d\u5b58\u6d3b\u7684\u5bf9\u8c61\u62f7\u8d1d\u5230\u53e6\u4e00\u5757\u5185\u5b58\u5e76\u8fde\u7eed\u5b58\u653e\u3002</p> <p>\u597d\u5904\uff1a\u76f8\u8f83\u4e8e\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5\u6765\u8bf4\uff0c\u51cf\u5c11\u4e86\u788e\u7247\u7684\u4ea7\u751f\u3002</p> <p>\u574f\u5904\uff1a\u9700\u8981\u4e24\u500d\u7684\u5185\u5b58\u7a7a\u95f4\u3002</p>"},{"location":"Java/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/#-_2","title":"\u6807\u8bb0-\u6574\u7406 \u7b97\u6cd5","text":"<p>\u601d\u60f3\uff1a\u6807\u8bb0\u5783\u573e\u3002\u5c06\u5b58\u6d3b\u7684\u5bf9\u8c61\u5411\u524d\u79fb\u52a8\u3002\u76f4\u63a5\u6e05\u9664\u6389\u8fb9\u754c\u610f\u5916\u7684\u5185\u5b58\u3002</p> <p>\u597d\u5904\uff1a\u8282\u7ea6\u5185\u5b58\u7a7a\u95f4\uff0c\u51cf\u5c11\u4e86\u788e\u7247\u7684\u4ea7\u751f\u3002</p> <p>\u574f\u5904\uff1a\u9700\u8981\u9891\u7e41\u4fee\u6539\u5bf9\u8c61\u7684\u4f4d\u7f6e\u3002</p> <p></p>"},{"location":"Java/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/#_6","title":"\u5206\u4ee3\u6536\u96c6 \u7b97\u6cd5","text":"<p>\u5c06Java\u7684\u5806\u533a\u5206\u4e3a\u65b0\u751f\u4ee3\u548c\u8001\u5e74\u4ee3\u3002</p> <p>\u65b0\u751f\u4ee3\u6709\u5927\u91cf\u7684\u5bf9\u8c61\u5bff\u547d\u77ed\uff0c\u5bb9\u6613\u6b7b\u53bb\u3002\u6211\u4eec\u53ef\u4ee5\u91c7\u7528\u6807\u8bb0-\u590d\u5236\u7b97\u6cd5\u3002\u8fd9\u6837\u53ea\u9700\u8981\u4ed8\u51fa\u4e00\u90e8\u5206\u5185\u5b58\u7684\u4ee3\u4ef7\uff0c\u5c31\u80fd\u8f83\u597d\u7684\u5b8c\u6210\u5783\u573e\u6536\u96c6\u3002</p> <p>\u8001\u5e74\u4ee3\u5bf9\u8c61\u5b58\u6d3b\u4e45\uff0c\u53ef\u4ee5\u9009\u62e9\u6807\u8bb0-\u6e05\u9664\u6216\u6807\u8bb0-\u6574\u7406\u7b97\u6cd5\u8fdb\u884c\u5783\u573e\u6536\u96c6\u3002</p>"},{"location":"Java/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/#_7","title":"\u5783\u573e\u56de\u6536\u5668","text":"<p>\u5783\u573e\u56de\u6536\u5668\u662f\u4e00\u4e2a\u8f6f\u4ef6\uff0c\u8fd0\u884c\u5728JVM\u4e2d\u3002\u4e0d\u540c\u7684\u5783\u573e\u56de\u6536\u5668\u9002\u7528\u4e8e\u4e0d\u540c\u7684\u5806\u5185\u5b58\uff0c\u91c7\u7528\u4e86\u4e0d\u540c\u7684\u5783\u573e\u56de\u6536\u7b97\u6cd5\u3002</p> <p></p>"},{"location":"Java/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/#cms","title":"CMS\u5783\u573e\u56de\u6536\u5668","text":"<p>CMS(Concurrent Mark Swap)\uff0c\u5e76\u53d1\u6807\u8bb0\u6e05\u9664\u3002\u4f5c\u7528\u4e8e\u8001\u5e74\u4ee3\uff0c\u964d\u4f4eSTW\u3002</p> <p>\u5e76\u53d1\u662f\u6307\u5783\u573e\u56de\u6536\u7ebf\u7a0b\u53ef\u4ee5\u548c\u7528\u6237\u7ebf\u7a0b\u540c\u65f6\u6267\u884c\u3002</p> <p>CMS\u5783\u573e\u56de\u6536\u5668\u5927\u81f4\u5206\u4e3a\u4ee5\u4e0b\u56db\u4e2a\u6b65\u9aa4\uff1a</p> <p>\u521d\u59cb\u6807\u8bb0\uff1a\u6807\u8bb0<code>GC root</code>\u4ee5\u53ca<code>GC root</code>\u53ef\u4ee5\u76f4\u63a5\u5f15\u7528\u7684\u5bf9\u8c61\uff0c\u901a\u5e38\u901f\u5ea6\u8f83\u5feb\uff0c\u4f1a\u4ea7\u751fSTW\u3002</p> <p>\u5e76\u53d1\u6807\u8bb0\uff1a\u548c\u7528\u6237\u7ebf\u7a0b\u5e76\u53d1\u6267\u884c\uff0c\u6807\u8bb0\u8001\u5e74\u4ee3\u4e2d\u7684\u6240\u6709\u5bf9\u8c61\u3002</p> <p>\u91cd\u65b0\u6807\u8bb0\uff1a</p> <p>\u5e76\u53d1\u6e05\u9664\uff1a\u91c7\u7528\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5\uff0c\u6e05\u9664\u8001\u5e74\u4ee3\u4e2d\u7684\u5783\u573e\u3002\u7531\u4e8e\u4e0d\u9700\u8981\u79fb\u52a8\u5bf9\u8c61\uff0c\u56e0\u6b64\u53ef\u4ee5\u591a\u7ebf\u7a0b\u3002</p> <p>\u4f18\u70b9</p> <p>STW\u65f6\u95f4\u77ed\u3002\uff08\u4ecd\u7136\u6709STW\uff09</p> <p>\u7f3a\u70b9\uff1a</p> <ol> <li>\u5e76\u53d1\u6267\u884c\u5783\u573e\u56de\u6536\u7ebf\u7a0b\uff0c\u4f1a\u5360\u7528\u8f83\u591a\u8d44\u6e90\u3002</li> <li>\u65e0\u6cd5\u6e05\u9664\u6d6e\u52a8\u5783\u573e\u3002\u5e76\u53d1\u6267\u884c\u5783\u573e\u6e05\u9664\u7684\u8fc7\u7a0b\u4e2d\uff0c\u7528\u6237\u53ef\u80fd\u4f1a\u4ea7\u751f\u65b0\u7684\u5783\u573e\u3002\u56e0\u6b64\u4e0d\u80fd\u7b49\u5230\u8001\u5e74\u4ee3\u6ee1\u4e86\u624d\u6e05\u9664\u5783\u573e\u3002</li> <li>\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5\u6709\u5185\u5b58\u788e\u7247\u95ee\u9898\u3002</li> </ol>"},{"location":"Java/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/#g1","title":"G1\u5783\u573e\u56de\u6536\u5668","text":"<p>\u91cd\u8981\u7279\u5f81</p> <ol> <li>\u5168\u5e74\u4ee3\u5783\u573e\u56de\u6536\u5668\u3002</li> <li>\u5806\u5185\u5b58\u88ab\u5207\u5206\u4e3a\u4e00\u4e2a\u4e2a\u5927\u5c0f\u76f8\u540c\u7684\u5185\u5b58\u5757\uff0c\u6bcf\u4e00\u4e2a\u5185\u5b58\u5757\u5c5e\u4e8e\u65b0\u751f\u4ee3\u6216\u8001\u5e74\u4ee3\u3002\u6240\u4ee5\u65b0\u751f\u4ee3\u6216\u8001\u5e74\u4ee3\u7684\u5185\u5b58\u4e0d\u4e00\u5b9a\u8fde\u7eed\u3002</li> <li>\u6bcf\u6b21\u56de\u6536\u4e00\u90e8\u5206region\u5757\uff0c\u4e0d\u7528\u5168\u90e8\u56de\u6536\u3002</li> <li>region\u7684\u5e74\u9f84\u662f\u52a8\u6001\u53d8\u5316\u7684\uff0c\u4e00\u4f1a\u513f\u662f\u65b0\u751f\u4ee3\uff0c\u4e00\u4f1a\u513f\u662f\u8001\u5e74\u4ee3\u3002</li> <li>\u4e00\u4e2aregion\u5757\u5185\uff0c\u91c7\u7528\u6807\u8bb0-\u590d\u5236\u7b97\u6cd5\u3002</li> <li>G1\u53ef\u4ee5\u6307\u5b9aSTW\u7684\u65f6\u95f4\uff0c\u6807\u8bb0-\u590d\u5236\u6e05\u7406\u5783\u573e\u7684\u8fc7\u7a0b\u4e2d\u5b83\u4f1a\u9009\u62e9\u6709\u4ef7\u503c\u7684region\u8fdb\u884c\u56de\u6536\uff0c\u4ece\u800c\u4fdd\u8bc1STW\u7684\u65f6\u95f4\u5c0f\u4e8e\u6307\u5b9a\u503c\u3002</li> </ol>"},{"location":"Java/Java%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/#_8","title":"\u5185\u5b58\u5206\u914d\u539f\u5219","text":"<p>\u65b0\u751f\u4ee3\uff1a\u8001\u5e74\u4ee3 = 1:2</p> <p>eden:from:to=8:1:1</p>"},{"location":"Java/Java%E5%B8%B8%E7%94%A8%E9%9B%86%E5%90%88/","title":"Java\u5e38\u7528\u96c6\u5408","text":"<p>[toc]</p>"},{"location":"Java/Java%E5%B8%B8%E7%94%A8%E9%9B%86%E5%90%88/#list","title":"List","text":"<p>ArrayList\u3001CopyOnWriteArrayList\u548cVector\uff08\u88ab\u6dd8\u6c70\u4e86\uff09</p> <ol> <li>\u5173\u4e8e\u6dfb\u52a0\u5143\u7d20\u3002ArrayList\u662f\u7ebf\u7a0b\u4e0d\u5b89\u5168\u7684\uff0cCopyOnWriteArrayList\u548cVector\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\u3002\u4e3e\u4e00\u53cd\u4e09\uff0cremove\u51fd\u6570\u4e5f\u662f\u76f8\u540c\u7684\u9053\u7406\u3002</li> </ol> <p>ArrayList\u7684\u6e90\u7801</p> <p><code>java    /**     * Appends the specified element to the end of this list.     *     * @param e element to be appended to this list     * @return {@code true} (as specified by {@link Collection#add})     */    public boolean add(E e) {        modCount++;        add(e, elementData, size);        return true;    }</code></p> <p>Vector\u7684\u6e90\u7801</p> <p><code>java    /**     * Appends the specified element to the end of this Vector.     *     * @param e element to be appended to this Vector     * @return {@code true} (as specified by {@link Collection#add})     * @since 1.2     */    public synchronized boolean add(E e) {        modCount++;        add(e, elementData, elementCount);        return true;    }</code></p> <p>CopyOnWriteArrayList\u6e90\u7801\uff1a</p> <p><code>java    /**     * Appends the specified element to the end of this list.     *     * @param e element to be appended to this list     * @return {@code true} (as specified by {@link Collection#add})     */    public boolean add(E e) {        synchronized (lock) {            Object[] es = getArray();  // \u83b7\u53d6\u6570\u7ec4\u5bf9\u8c61            int len = es.length;  // \u83b7\u53d6\u6570\u7ec4\u539f\u6765\u7684\u957f\u5ea6            es = Arrays.copyOf(es, len + 1);  // \u5c06\u539f\u6570\u7ec4\u62f7\u8d1d\u5230\u65b0\u6570\u7ec4\uff0c\u4e14\u65b0\u6570\u7ec4\u5bb9\u91cf+1            es[len] = e;  // \u5c06\u6dfb\u52a0\u7684\u5143\u7d20\u52a0\u5165\u65b0\u6570\u7ec4            setArray(es);  // \u7528\u65b0\u6570\u7ec4\u66ff\u6362\u539f\u6570\u7ec4            return true;        }    }</code></p> <ol> <li>\u5173\u4e8e\u6570\u7ec4\u6269\u5bb9\u3002<code>grow()</code>\u662f\u5173\u4e8e\u6570\u7ec4\u6269\u5bb9\u7684\u51fd\u6570\u3002</li> </ol> <p>ArrayList</p> <p><code>java    /**     * Increases the capacity to ensure that it can hold at least the     * number of elements specified by the minimum capacity argument.     *     * @param minCapacity the desired minimum capacity     * @throws OutOfMemoryError if minCapacity is less than zero     */    private Object[] grow(int minCapacity) {        int oldCapacity = elementData.length;        if (oldCapacity &gt; 0 || elementData != DEFAULTCAPACITY_EMPTY_ELEMENTDATA) {            int newCapacity = ArraysSupport.newLength(oldCapacity,                    minCapacity - oldCapacity, /* \u81f3\u5c11\u9700\u8981\u589e\u957f\u7684\u7a7a\u95f4 */                    oldCapacity &gt;&gt; 1           /* \u9996\u9009\u589e\u957f\u7a7a\u95f4\uff0c\u589e\u957f1.5\u500d */);            return elementData = Arrays.copyOf(elementData, newCapacity);        } else {            // \u6570\u7ec4\u4e3a\u7a7a\u7684\u60c5\u51b5            // DEFAULT_CAPACITY \u7684\u503c\u4e3a10            return elementData = new Object[Math.max(DEFAULT_CAPACITY, minCapacity)];        }    }</code></p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u5982\u679c\u6570\u7ec4\u5bb9\u91cf\u4e3a0\uff0c\u5219\u6269\u5bb9\u65f6\u4f1a\u521b\u5efa\u4e00\u4e2a\u5927\u5c0f\u4e3a10\u7684\u6570\u7ec4\u3002\u5982\u679c\u6570\u7ec4\u4e2d\u6709\u5143\u7d20\uff0c\u90a3\u4e48\u9ed8\u8ba4\u4e3a\u6269\u5bb91.5\u500d\uff0c\u5982\u679c\u6ca1\u6709\u8fd9\u4e48\u5927\u7684\u7a7a\u95f4\uff0c\u5219\u6269\u5bb9\u5230\u521a\u521a\u591f\u7528\u5c31\u884c\u3002</p> <p>Vector</p> <p><code>java    /**     * Increases the capacity to ensure that it can hold at least the     * number of elements specified by the minimum capacity argument.     *     * @param minCapacity the desired minimum capacity     * @throws OutOfMemoryError if minCapacity is less than zero     */    private Object[] grow(int minCapacity) {        int oldCapacity = elementData.length;        int newCapacity = ArraysSupport.newLength(oldCapacity,                minCapacity - oldCapacity, /* minimum growth */                capacityIncrement &gt; 0 ? capacityIncrement : oldCapacity                                           /* \u5982\u679c\u521d\u59cb\u5316Vector\u65f6\u6ca1\u6709\u6307\u5b9acapacityIncrement\uff0c\u5219\u6269\u5bb9oldCapacity\uff0c\u4e5f\u5373\u6269\u5bb91\u500d\u3002\u5982\u679c\u6307\u5b9a\u6269\u5bb9\u91cf\uff0c\u5219\u6269\u5bb9capacityIncrement\u3002 */);        return elementData = Arrays.copyOf(elementData, newCapacity);    }</code></p>"},{"location":"Java/Java%E5%B8%B8%E7%94%A8%E9%9B%86%E5%90%88/#map","title":"Map","text":"<p>HashMap\u3001ConcurrentHashMap\u548cHashtable\uff08\u88ab\u6dd8\u6c70\u4e86\uff09</p>"},{"location":"Java/Java%E6%9E%9A%E4%B8%BE/","title":"Java\u679a\u4e3e","text":"<p>[toc]</p>"},{"location":"Java/Java%E6%9E%9A%E4%B8%BE/#_1","title":"\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u679a\u4e3e","text":"<p>\u589e\u5f3a\u53ef\u8bfb\u6027\u3002</p> <p>\u9650\u5b9a\u53d6\u503c\u8303\u56f4\u3002</p>"},{"location":"Java/Java%E6%9E%9A%E4%B8%BE/#_2","title":"\u6848\u4f8b","text":"<p>\u57fa\u672c\u6848\u4f8b\uff1a</p> <pre><code>enum Fruit {\n    APPLE,\n    BANANA,\n    GRAPE\n}\n\npublic class Main {\n    public static void main(String[] args) {\n        Fruit apple = Fruit.APPLE;\n        Fruit banana = Fruit.BANANA;\n        System.out.println(apple);  // \u8f93\u5165 APPLE\n        System.out.println(banana);  // \u8f93\u51fa BANANA\n        if (apple == Fruit.APPLE) {\n            System.out.println(\"They are the same!\");\n        }\n    }\n}\n</code></pre> <p>\u5e38\u89c1\u6848\u4f8b\uff1a</p> <pre><code>enum ErrorCode {\n    OK(200, \"OK\"),\n    BAD_REQUEST(400, \"Bad Request\"),\n    UNAUTHORIZED(401, \"Unauthorized\"),\n    FORBIDDEN(403, \"Forbidden\"),\n    NOT_FOUND(404, \"Not Found\"),\n    INTERNAL_SERVER_ERROR(500, \"Internal Server Error\");\n\n    private final int code;\n    private final String message;\n\n    ErrorCode(int code, String message) {\n        this.code = code;\n        this.message = message;\n    }\n\n    public int getCode() {\n        return code;\n    }\n\n    public String getMessage() {\n        return message;\n    }\n}\n\npublic class Main {\n    public static void main(String[] args) {\n        ErrorCode error = ErrorCode.NOT_FOUND;\n        System.out.println(\"\u9519\u8bef\u4ee3\u7801\uff1a\" + error.getCode());\n        System.out.println(\"\u9519\u8bef\u4fe1\u606f\uff1a\" + error.getMessage());\n    }\n}\n</code></pre>"},{"location":"Java/Java%E6%9E%9A%E4%B8%BE/#_3","title":"\u57fa\u672c\u5185\u5bb9","text":"<p>\u53c2\u8003\u4e0a\u8ff0\u7684\u5e38\u89c1\u6848\u4f8b\u3002</p> <p>\u679a\u4e3e\u7c7b\u578b\u4e2d\uff0c\u901a\u5e38\u6709\u4ee5\u4e0b\u51e0\u7c7b\u6210\u5458\uff1a</p> <ol> <li>\u5e38\u91cf\u6210\u5458\uff1a<code>OK</code>, <code>BAD_REQUEST</code>, <code>UNAUTHORIZED</code>\u7b49\u3002\u4e00\u4e2a\u5e38\u91cf\u6210\u5458\u4e2d\u53ef\u4ee5\u5b58\u653e\u591a\u4e2a\u503c\u3002</li> <li>\u6784\u9020\u51fd\u6570\uff1a<code>ErrorCode</code>\u51fd\u6570\uff0c\u51b3\u5b9a\u4e86\u4e00\u4e2a\u5e38\u91cf\u6210\u5458\u53ef\u4ee5\u51e0\u79cd\u7c7b\u578b\u7684\u503c\u3002</li> <li>\u65b9\u6cd5\uff1a<code>getCode</code>, <code>getMessage</code>\u51fd\u6570\u3002\u53ef\u4ee5\u83b7\u53d6\u4e00\u4e2a\u5e38\u91cf\u6210\u5458\u7684\u67d0\u4e2a\u503c\u3002</li> </ol>"},{"location":"Java/Java%E6%B3%A8%E8%A7%A3/","title":"Java \u6ce8\u89e3","text":"<p>[toc]</p>"},{"location":"Java/Java%E6%B3%A8%E8%A7%A3/#_1","title":"\u6ce8\u89e3\u662f\u4ec0\u4e48","text":"<p>\u6ce8\u89e3\u5c31\u50cf\u4e00\u4e2a\u6807\u7b7e\uff0c\u5b83\u53ef\u4ee5\u5199\u5728\u7c7b\u6216\u65b9\u6cd5\u4e0a\u9762\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u53cd\u5c04\u673a\u5236\u83b7\u53d6\u5e26\u6709\u6ce8\u89e3\u7684\u7c7b\u548c\u65b9\u6cd5\u7684\u76f8\u5173\u4fe1\u606f\u3002</p> <p>\u4f7f\u7528\u6ce8\u89e3\u65f6\uff0c\u6709\u4ee5\u4e0b\u51e0\u4e2a\u89d2\u8272\uff1a</p> <ol> <li>\u6ce8\u89e3\u63a5\u53e3\uff1a\u63a5\u53e3\u4e2d\u53ef\u4ee5\u5b9a\u4e49\u5c5e\u6027\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u6ce8\u89e3\u7684\u5b9a\u4e49\u3002</li> </ol> <p>```java    import java.lang.annotation.ElementType;    import java.lang.annotation.Retention;    import java.lang.annotation.RetentionPolicy;    import java.lang.annotation.Target;</p> <p>@Target(ElementType.METHOD)    @Retention(RetentionPolicy.RUNTIME)    public @interface MyAnnotation {        String value() default \"\";        int mode() default 0;    }    ```</p> <ol> <li>\u6ce8\u89e3\u5bf9\u8c61\uff1a\u5b98\u7f51\u4e0a\u597d\u50cf\u6ca1\u6709\u8fd9\u79cd\u8bf4\u6cd5\uff0c\u4f46\u662f\u6211\u4e60\u60ef\u5c06\u7c7b\u548c\u65b9\u6cd5\u4e0a\u7684\u6ce8\u89e3\u53eb\u505a\u6ce8\u89e3\u5bf9\u8c61\u3002</li> </ol>"},{"location":"Java/Java%E6%B3%A8%E8%A7%A3/#_2","title":"\u6ce8\u89e3\u4f7f\u7528\u6848\u4f8b","text":"<p>\u80cc\u666f\uff1a</p> <p>\u5047\u5b9a\u6211\u4eec\u6709\u4e00\u4e2aMyAnnotation\u6ce8\u89e3\uff0c\u6ce8\u89e3\u4e2d\u6709\u4e00\u4e2a<code>String Author</code>\u5c5e\u6027\u3002</p> <p>\u540c\u65f6\u6211\u4eec\u6709\u4e00\u4e2aStudent\u7c7b\uff0cStudent\u7c7b\u4e2d\u6709\u5f88\u591a\u65b9\u6cd5\uff0c\u4e0d\u540c\u7684\u65b9\u6cd5\u7531\u4e0d\u540c\u7684\u4eba\u7f16\u5199\u3002\u6211\u4eec\u901a\u8fc7\u5728\u65b9\u6cd5\u4e0a\u6dfb\u52a0\u6ce8\u89e3\u7684\u65b9\u5f0f\u533a\u5206\u54ea\u4e9b\u4eba\u7f16\u5199\u4e86\u54ea\u4e9b\u65b9\u6cd5\u3002</p> <p>\u95ee\u9898\uff1a</p> <p>\u6211\u60f3\u83b7\u53d6\u67d0\u4e00\u4e2a\u4eba\uff08\u5047\u5b9a\u662f<code>lhl</code>\uff09\u7f16\u5199\u4e86\u54ea\u4e9b\u65b9\u6cd5\u3002</p> <p>MyAnnotation\u63a5\u53e3</p> <pre><code>import java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n/**\n * @author \u6653\u9f99coding\n */\n@Target({ElementType.METHOD})\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface MyAnnotation {\n    String author() default \"\u9ed8\u8ba4\u7528\u6237\";\n}\n</code></pre> <p>Student\u7c7b</p> <pre><code>/**\n * @author \u6653\u9f99coding\n */\npublic class Student {\n    private String name;\n    private int age;\n\n    @MyAnnotation(author = \"lhl\")\n    public String getName() {\n        return name;\n    }\n\n    @MyAnnotation(author = \"lc\")\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    @MyAnnotation(author = \"lc\")\n    public int getAge() {\n        return age;\n    }\n\n    @MyAnnotation(author = \"lhl\")\n    public void setAge(int age) {\n        this.age = age;\n    }\n}\n</code></pre> <p>\u6f14\u793a\u7c7b</p> <pre><code>import java.lang.reflect.Method;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class Main {\n    public static void main(String[] args) {\n        // \u83b7\u53d6Student\u7c7b\u5bf9\u8c61\n        Class&lt;Student&gt; studentClass = Student.class;\n        // \u83b7\u53d6Student\u7c7b\u4e2d\u7684\u6240\u6709\u51fd\u6570\n        Method[] methods = studentClass.getMethods();\n        for (Method method : methods) {\n            // \u5982\u679c\u5f53\u524d\u65b9\u6cd5\u4e0a\u6709\u6ce8\u89e3@MyAnnotation\n            if (method.isAnnotationPresent(MyAnnotation.class)) {\n                // \u83b7\u53d6\u6ce8\u89e3\u5bf9\u8c61\n                MyAnnotation annotation = method.getAnnotation(MyAnnotation.class);\n                // \u83b7\u53d6\u6ce8\u89e3\u7684author\u5c5e\u6027\n                String author = annotation.author();\n                if (\"lhl\".equals(author)) {\n                    System.out.println(\"&lt;=================\");\n                    // \u6253\u5370\u5e26\u6709@MyAnnotation\u6ce8\u89e3\uff0c\u4e14author\u5c5e\u6027\u503c\u4e3alhl\u7684\u65b9\u6cd5\u4fe1\u606f\n                    System.out.println(\"\u65b9\u6cd5\u540d:\" + method.getName());\n\n                    System.out.println(\"\u53c2\u6570\u7684\u7c7b\u578b\u5206\u522b\u4e3a: \");\n                    Class&lt;?&gt;[] parameterTypes = method.getParameterTypes();\n                    for (Class&lt;?&gt; parameterType : parameterTypes) {\n                        System.out.println(parameterType.getName());\n                    }\n\n                    System.out.println(\"\u65b9\u6cd5\u7684\u8303\u56f4\u503c\u4e3a:\" + method.getReturnType());\n                    System.out.println(\"=================&gt;\\n\");\n                }\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"Java/Java%E6%B3%A8%E8%A7%A3/#_3","title":"\u5185\u7f6e\u6ce8\u89e3","text":"<p>\u6709\u4e09\u4e2a\uff0c\u4e86\u89e3\u5373\u53ef\u3002</p> <pre><code>package com.lee.uploadfile.test;\n\n/**\n * \u5185\u7f6e\u6ce8\u89e3\uff1a@Override @Deprecated @SuppressWarnings\n * @author lhl\n */\npublic class Father extends Object {\n    String name;\n\n    @Override\n    public String toString() {\n        return super.toString();\n    }\n\n    @Deprecated\n    public static String getOldName() {\n        return \"\u6dd8\u6c70\u540e\u7684\u65b9\u6cd5\";\n    }\n\n    public static void main(String[] args) {\n        System.out.println(getOldName());\n    }\n}\n</code></pre>"},{"location":"Java/Java%E6%B3%A8%E8%A7%A3/#_4","title":"\u5143\u6ce8\u89e3","text":"<p>\u5143\u6ce8\u89e3\u6709\u56db\u79cd\uff0c\u4e3b\u8981\u4f7f\u7528@Target\u548c@Retention\u3002</p> <pre><code>/**\n * \u5143\u6ce8\u89e3\u6709\u56db\u79cd\uff0c\u4e3b\u8981\u4f7f\u7528@Target\u548c@Retention\n * @Target \u5b9a\u4e49\u6ce8\u89e3\u53ef\u4ee5\u653e\u5728\u54ea\u4e9b\u5730\u65b9\uff08\u65b9\u6cd5\u4e0a\u3001\u7c7b\u4e0a...\uff09\n * @Retention \u81ea\u5b9a\u4e49\u7684\u6ce8\u89e3\u51e0\u4e4e\u4f7f\u7528RUNTIME\uff0c\u8868\u793a\u6ce8\u89e3\u5728\u8fd0\u884c\u65f6\u90fd\u6709\u6548\n * @Documented \u8868\u793a\u662f\u5426\u5c06\u6ce8\u89e3\u751f\u6210\u5728JavaDoc\u4e2d\n * @Inherited \u8be5\u6ce8\u89e3\u53ef\u4ee5\u88ab\u5b50\u7c7b\u7ee7\u627f\n * @author lhl\n */\n@Target({ElementType.METHOD, ElementType.TYPE})\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Inherited\n@interface MyAnnotation {\n\n}\n\npublic class Base {\n    @MyAnnotation\n    public void func() {\n        System.out.println(\"hello world\");\n    }\n}\n</code></pre>"},{"location":"Java/Java%E6%B3%A8%E8%A7%A3/#_5","title":"\u81ea\u5b9a\u4e49\u6ce8\u89e3","text":"<p>\u4e3b\u8981\u4f7f\u7528@Target\u548c@Retention\u3002</p> <p>\u6ce8\u89e3\u7684\u53c2\u6570\uff1a\u53c2\u6570\u7c7b\u578b + \u53c2\u6570\u540d + ()\u3002</p> <pre><code>/**\n * \u81ea\u5b9a\u4e49\u6ce8\u89e3\uff1a\n * \u6ce8\u89e3\u7684\u53c2\u6570\uff1a\u53c2\u6570\u7c7b\u578b + \u53c2\u6570\u540d + ()\n * @author lhl\n */\n@Target({ElementType.METHOD, ElementType.TYPE})\n@Retention(RetentionPolicy.RUNTIME)\n@interface MyAnnotation {\n    // \u4ee5\u4e0b\u5747\u4e3a\u6ce8\u89e3\u53c2\u6570\uff0c\u800c\u4e0d\u662f\u51fd\u6570\n    String name();\n    int age();\n    String[] subject();\n}\n</code></pre>"},{"location":"Java/Java%E9%94%81%E6%9C%BA%E5%88%B6/","title":"Java\u9501\u673a\u5236","text":"<p>[toc]</p>"},{"location":"Java/Java%E9%94%81%E6%9C%BA%E5%88%B6/#_1","title":"\u6982\u8ff0","text":"<ul> <li>\u9501\u662f\u5b9e\u73b0\u7ebf\u7a0b\u540c\u6b65\u7684\u91cd\u8981\u5de5\u5177\uff0c\u4fdd\u8bc1\u5e76\u53d1\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u65f6\uff0c\u5171\u4eab\u8d44\u6e90\u6ee1\u8db3\u4e00\u81f4\u6027\u3002</li> <li>\u53ef\u4ee5\u6309\u7167\u4e0d\u540c\u7684\u7ef4\u5ea6\u5bf9\u201c\u9501\u201d\u8fdb\u884c\u5206\u7c7b\u3002</li> <li>Java\u4e2d\uff0c\u4e00\u4e2a\u9501\u5b58\u653e\u5728\u4e00\u4e2a\u5bf9\u8c61\u7684\u5bf9\u8c61\u5934\u4e2d\u3002</li> </ul>"},{"location":"Java/Java%E9%94%81%E6%9C%BA%E5%88%B6/#java_1","title":"Java\u5bf9\u8c61\u7684\u7ed3\u6784","text":"<p>Java\u5bf9\u8c61\u4e3b\u8981\u5305\u542b3\u4e2a\u90e8\u5206\u3002</p> <ol> <li>\u5bf9\u8c61\u5934\u3002</li> <li>Mark Word\uff1a\u5b58\u653e\u5f53\u524d\u5bf9\u8c61\u7684\u72b6\u6001\u4fe1\u606f\u3002</li> <li>Klass Pointer\uff1a\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u6307\u5411\u5f53\u524d\u5bf9\u8c61\u7c7b\u578b\u5bf9\u5e94\u5728\u65b9\u6cd5\u533a\u4e2d\u7684\u7c7b\u6570\u636e\u3002</li> <li>\u5b9e\u4f8b\u6570\u636e\u3002</li> <li>\u5bf9\u9f50\u586b\u5145\u6570\u636e\uff1a\u4fdd\u8bc1Java\u5bf9\u8c61\u7684\u5927\u5c0f\u662f8Byte\u7684\u6574\u6570\u500d\u3002</li> </ol>"},{"location":"Java/Java%E9%94%81%E6%9C%BA%E5%88%B6/#vs","title":"\u4e50\u89c2\u9501 VS \u60b2\u89c2\u9501","text":"<ol> <li> <p>\u60b2\u89c2\u9501\uff1a</p> </li> <li> <p>\u5e76\u53d1\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u65f6\uff0c\u60b2\u89c2\u9501\u8ba4\u4e3a\u81ea\u5df1\u5360\u6709\u5171\u4eab\u8d44\u6e90\u65f6\uff0c\u522b\u7684\u7ebf\u7a0b\u4f1a\u4f7f\u7528\u5171\u4eab\u8d44\u6e90\u3002\u56e0\u6b64\u83b7\u53d6\u8d44\u6e90\u65f6\u5148\u52a0\u9501\uff0c\u4fdd\u8bc1\u5171\u4eab\u8d44\u6e90\u4e0d\u88ab\u5176\u4ed6\u7ebf\u7a0b\u4fee\u6539\u3002</p> </li> <li>Java\u4e2d\uff0c<code>synchronized</code>\u548c<code>Lock</code>\u90fd\u662f\u57fa\u4e8e\u60b2\u89c2\u9501\u5b9e\u73b0\u7684\u3002</li> <li> <p>\u60b2\u89c2\u9501\u9002\u5408\u5199\u591a\u8bfb\u5c11\u7684\u573a\u666f\u3002</p> </li> <li> <p>\u4e50\u89c2\u9501\uff1a</p> </li> <li> <p>\u5e76\u53d1\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u65f6\uff0c\u4e50\u89c2\u9501\u8ba4\u4e3a\u81ea\u5df1\u5360\u6709\u5171\u4eab\u8d44\u6e90\u65f6\uff0c\u522b\u7684\u7ebf\u7a0b\u4e0d\u4f1a\u4f7f\u7528\u8be5\u5171\u4eab\u8d44\u6e90\uff0c\u56e0\u6b64\u83b7\u53d6\u8d44\u6e90\u65f6\u4e0d\u7528\u52a0\u9501\u3002</p> </li> <li>\u5728\u66f4\u65b0\u5171\u4eab\u8d44\u6e90\u65f6\u5224\u65ad\u5171\u4eab\u8d44\u6e90\u662f\u5426\u88ab\u66f4\u65b0\uff0c\u5982\u679c\u8d44\u6e90\u6ca1\u6709\u88ab\u4fee\u6539\uff0c\u5219\u76f4\u63a5\u66f4\u65b0\u8d44\u6e90\uff1b\u5982\u679c\u8d44\u6e90\u88ab\u4fee\u6539\uff0c\u5219\u6267\u884c\u5176\u4ed6\u64cd\u4f5c\uff08\u6bd4\u5982\u81ea\u65cb\u6216\u62a5\u9519\uff09</li> <li>Java\u4e2d\uff0c\u91c7\u7528\u65e0\u9501\u7684\u65b9\u5f0f\u5b9e\u73b0\u4e50\u89c2\u9501\uff0c\u6700\u5e38\u91c7\u7528CAS\u7b97\u6cd5\u3002\u5176\u4e2d<code>AtomicInteger</code>\u5c31\u662f\u57fa\u4e8eCAS\u3002</li> <li> <p>\u4e50\u89c2\u9501\u9002\u5408\u8bfb\u591a\u5199\u5c11\u7684\u573a\u666f\u3002</p> </li> <li> <p>\u4e50\u89c2\u9501\u4e0e\u60b2\u89c2\u9501\u7684\u4ee3\u7801\u5bf9\u6bd4\uff1a</p> </li> </ol> <p>```java    // ============\u4e50\u89c2\u9501============    private Lock lock = new ReentrantLock();    public void getResourse() {        lock.lock();         // \u8bbf\u95ee\u5171\u4eab\u8d44\u6e90        lock.unlock();    }</p> <p>// ============\u60b2\u89c2\u9501============    private AtomicInteger atomicInteger = new AtomicInteger();    public void getResourse() {        // \u76f4\u63a5\u4fee\u6539\u5171\u4eab\u8d44\u6e90        atomicInteger.incrementAndGet();    }    ```</p>"},{"location":"Java/Java%E9%94%81%E6%9C%BA%E5%88%B6/#synchronized","title":"synchronized\u7684\u56db\u79cd\u9501","text":"<p><code>synchronized</code>\u5bf9\u5e94\u4e864\u79cd\u9501\uff1a\u65e0\u9501\u3001\u504f\u5411\u9501\u3001\u8f7b\u91cf\u7ea7\u9501\u548c\u91cd\u91cf\u7ea7\u9501\uff0c\u8fd9\u56db\u79cd\u9501\u5206\u522b\u5bf9\u5e94\u4e86\u5bf9\u8c61\u5934\u4e2dMark Word\u7684\u56db\u79cd\u72b6\u6001\u3002</p>"},{"location":"Java/Java%E9%94%81%E6%9C%BA%E5%88%B6/#_2","title":"\u91cd\u91cf\u7ea7\u9501","text":"<p>\u91cd\u91cf\u7ea7\u9501\u57fa\u4e8emonitor\u5b9e\u73b0\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u5c06monitor\u6bd4\u4f5c\u4e00\u4e2a\u7a7a\u95f4\uff0c\u540c\u4e00\u65f6\u95f4\u53ea\u80fd\u8fdb\u5165\u4e00\u4e2a\u7ebf\u7a0b\u3002\u5f53\u4e00\u4e2a\u7ebf\u7a0b\u83b7\u53d6\u9501\u65f6\uff0c\u8be5\u7ebf\u7a0b\u8fdb\u5165moniter\uff0c\u6b64\u65f6\u5176\u4ed6\u7ebf\u7a0b\u65e0\u6cd5\u8fdb\u5165moniter\u3002\u5f53\u8be5\u7ebf\u7a0b\u91ca\u653e\u9501\u65f6\uff0c\u8be5\u7ebf\u7a0b\u9000\u51famonitor\uff0c\u5176\u4ed6\u7ebf\u7a0b\u624d\u6709\u673a\u4f1a\u83b7\u5f97\u9501\u3002</p> <p>\u9501\u548cmoniter\u4e00\u4e00\u5bf9\u5e94\u3002</p> <p>\u4e0b\u9762\u7528\u4ee3\u7801\u7684\u65b9\u5f0f\u6f14\u793a\u539f\u7406\uff1a</p> <pre><code>public class Main {\n    static int a = 0;\n    public static void main(String[] args) {\n        for (int i = 1; i &lt;= 10000; i++) {\n            synchronized (Main.class) {\n                a++;\n            }\n        }\n    }\n}\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u901a\u8fc7\u7f16\u8bd1\u548c\u53cd\u7f16\u8bd1\u540e\uff08<code>javac Main.java</code>\u548c<code>javap -c Main.class</code>\uff09\uff0c\u53ef\u4ee5\u5f97\u5230\u4ee5\u4e0b\u4ee3\u7801\u3002</p> <pre><code>Compiled from \"Main.java\"\npublic class Main {\n  static int a;\n\n  public Main();\n    Code:\n       0: aload_0\n       1: invokespecial #1                  // Method java/lang/Object.\"&lt;init&gt;\":()V\n       4: return\n\n  public static void main(java.lang.String[]);\n    Code:\n       0: iconst_1\n       1: istore_1\n       2: iload_1\n       3: sipush        10000\n       6: if_icmpgt     38\n       9: ldc           #2                  // class Main\n      11: dup\n      12: astore_2\n      13: monitorenter\n      14: getstatic     #3                  // Field a:I\n      17: iconst_1\n      18: iadd\n      19: putstatic     #3                  // Field a:I\n      22: aload_2\n      23: monitorexit\n      24: goto          32\n      27: astore_3\n      28: aload_2\n      29: monitorexit\n      30: aload_3\n      31: athrow\n      32: iinc          1, 1\n      35: goto          2\n      38: return\n    Exception table:\n       from    to  target type\n          14    24    27   any\n          27    30    27   any\n\n  static {};\n    Code:\n       0: iconst_0\n       1: putstatic     #3                  // Field a:I\n       4: return\n}\n\n</code></pre> <p>\u5176\u4e2d\u7b2c13\u884c\u548c\u7b2c23\u884c\u5206\u522b\u5bf9\u5e94\u7ebf\u7a0b\u8fdb\u5165moniter\u548c\u7ebf\u7a0b\u79bb\u5f00moniter\u3002</p>"},{"location":"Java/Java%E9%94%81%E6%9C%BA%E5%88%B6/#_3","title":"\u8f7b\u91cf\u7ea7\u9501","text":"<p>\u82e5\u591a\u4e2a\u7ebf\u7a0b\u5728\u4e0d\u540c\u65f6\u523b\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\uff0c\u5219\u4e0d\u4f1a\u53d1\u751f\u7ade\u4e89\u5173\u7cfb\u3002\u5982\u679c\u7ebf\u7a0b\u5207\u6362\u4ecd\u4f7f\u7528moniter\uff0c\u5c31\u4f1a\u635f\u8017\u6027\u80fd\u3002</p> <p>\u8f7b\u91cf\u7ea7\u9501\u5e76\u4e0d\u80fd\u89e3\u51b3\u7ebf\u7a0b\u51b2\u7a81\u95ee\u9898\uff0c\u5f53\u5171\u4eab\u8d44\u6e90\u88ab\u5360\u7528\u65f6\uff0c\u53e6\u4e00\u4e2a\u7ebf\u7a0b\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\uff0c\u5c31\u4f1a\u53d1\u751f\u9501\u5347\u7ea7\uff08\u8f7b\u91cf\u7ea7\u9501-&gt;\u91cd\u91cf\u7ea7\u9501\uff09\u3002</p>"},{"location":"Java/Java%E9%94%81%E6%9C%BA%E5%88%B6/#openjdk15","title":"\u504f\u5411\u9501\uff08OpenJDK15\u5df2\u5e9f\u5f03\uff09","text":"<p>\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u4f1a\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u3002\u56e0\u6b64\u6211\u4eec\u60f3\u5230\u5728\u5bf9\u8c61\u7684MarkWord\u4e2d\u8bb0\u5f55\u7ebf\u7a0bID\uff0c\u5f53\u4e0b\u4e00\u6b21\u76f8\u540c\u7684\u7ebf\u7a0b\u8bbf\u95ee\u5171\u4eab\u8d44\u6e90\u65f6\uff0c\u5c31\u4e0d\u91c7\u7528moniter\uff0c\u800c\u662f\u76f4\u63a5\u83b7\u53d6\u8d44\u6e90\u3002</p> <p>\u5e9f\u5f03\u539f\u56e0\uff1a</p> <p>\u539f\u5148\u7684\u96c6\u5408\u7c7b\uff08Vector\uff0cHashTable...\uff09\u5927\u91cf\u4f7f\u7528\u5230<code>synchonized</code>\u4fdd\u8bc1\u7ebf\u7a0b\u5b89\u5168\u3002\u4f46\u5982\u4eca\uff0c\u66f4\u591a\u573a\u666f\u4f7f\u7528\u65e0\u9501\u7684\u96c6\u5408\u7c7b\uff08ArrayList\uff0cHashMap\uff09\uff0c\u5373\u4fbf\u662f\u5e76\u53d1\u573a\u666f\uff0c\u4e5f\u4f7f\u7528ConcurrentHashMap\u8fd9\u79cd\u9ad8\u6027\u80fd\u96c6\u5408\u3002\u56e0\u6b64\u504f\u5411\u9501\u5e26\u6765\u7684\u6536\u76ca\u8d8a\u6765\u8d8a\u5c11\u3002</p> <p>\u504f\u5411\u9501\u589e\u52a0\u4e86\u7cfb\u7edf\u7684\u590d\u6742\u5ea6\u3002</p>"},{"location":"Java/Java%E9%94%81%E6%9C%BA%E5%88%B6/#_4","title":"\u65e0\u9501","text":"<p>\u6ca1\u6709\u5bf9\u8d44\u6e90\u8fdb\u884c\u9501\u5b9a\uff0c\u6240\u6709\u7684\u7ebf\u7a0b\u90fd\u80fd\u8bbf\u95ee\u5e76\u4fee\u6539\u540c\u4e00\u4e2a\u8d44\u6e90\uff0c\u4f46\u540c\u65f6\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u80fd\u4fee\u6539\u6210\u529f\u3002</p> <p>\u65e0\u9501\u7684\u5b9e\u73b0\u65b9\u5f0f\u4e4b\u4e00\u662fCAS\u7b97\u6cd5\u3002</p> <p>\u65e0\u9501\u65e0\u6cd5\u5168\u9762\u4ee3\u66ff\u6709\u9501\uff0c\u4f46\u65e0\u9501\u5728\u67d0\u4e9b\u573a\u5408\u4e0b\u7684\u6027\u80fd\u662f\u975e\u5e38\u9ad8\u7684\u3002</p>"},{"location":"Java/Java%E9%94%81%E6%9C%BA%E5%88%B6/#vs_1","title":"\u516c\u5e73\u9501 VS \u975e\u516c\u5e73\u9501","text":"<p>\u6211\u4eec\u7528\u4e00\u4e2a\u6392\u961f\u4e70\u4e1c\u897f\u7684\u573a\u666f\u89e3\u91ca\u8fd9\u4e24\u79cd\u9501\u3002</p> <p>\u516c\u5e73\u9501\uff1a\u4e00\u4e9b\u4eba\u6b63\u6392\u961f\u4e70\u74dc\uff0c\u6b64\u65f6\u4f60\u8d70\u8fc7\u6765\u4e70\u74dc\u3002\u4f60\u80af\u5b9a\u4f1a\u76f4\u63a5\u6392\u5230\u961f\u5c3e\uff08\u56e0\u4e3a\u5e74\u8f7b\u4eba\u7684\u7d20\u8d28\u5927\u591a\u6570\u90fd\u633a\u9ad8\u7684\uff09\uff0c\u8fd9\u6837\u5bf9\u5927\u5bb6\u90fd\u516c\u5e73\u3002</p> <p>\u975e\u516c\u5e73\u9501\uff1a\u6b64\u65f6\u6765\u4e86\u4e00\u4e2a\u5927\u5988\uff0c\u5979\u76f4\u63a5\u63d2\u961f\u5230\u6700\u524d\u9762\u4e70\u74dc\uff0c\u5982\u679c\u5979\u63d2\u961f\u6210\u529f\uff0c\u5219\u5979\u5148\u4e70\u74dc\uff1b\u5982\u679c\u63d2\u961f\u5931\u8d25\uff0c\u624d\u4f1a\u62cd\u5230\u961f\u5c3e\u3002\u5927\u5988\u8fd9\u79cd\u63d2\u961f\u7684\u884c\u4e3a\u4e0d\u516c\u5e73\uff01</p>"},{"location":"Java/OKHTTP3%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/","title":"OKHTTP3\u4f7f\u7528\u6559\u7a0b","text":"<p>[toc]</p>"},{"location":"Java/OKHTTP3%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/#_1","title":"\u662f\u4ec0\u4e48","text":"<p>OKHTTP3\u662f\u4e00\u4e2aJava\u5e93\uff0c\u7528\u4e8e\u53d1\u9001HTTP\u8bf7\u6c42\u3002</p>"},{"location":"Java/OKHTTP3%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/#_2","title":"\u4f7f\u7528\u6559\u7a0b","text":""},{"location":"Java/OKHTTP3%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/#_3","title":"\u5f15\u5165\u4f9d\u8d56","text":"<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\n    &lt;artifactId&gt;okhttp&lt;/artifactId&gt;\n    &lt;version&gt;4.10.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>"},{"location":"Java/OKHTTP3%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/#getpost","title":"GET\u548cPOST","text":""},{"location":"Java/Servlet%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/","title":"Servlet\u548cJSP\u7684\u524d\u4e16\u4eca\u751f","text":"<p>[toc]</p>"},{"location":"Java/Servlet%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/#servlet","title":"\u4ec0\u4e48\u662fServlet","text":"<p><code>Servlet</code>\u5b9e\u9645\u4e0a\u5c31\u662f<code>java.servlet</code>\u5305\u91cc\u7684\u4e00\u4e2a<code>interface</code>\u3002\u5177\u4f53\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>package javax.servlet;\n\nimport java.io.IOException;\n\npublic interface Servlet {\n    void init(ServletConfig var1) throws ServletException;\n\n    ServletConfig getServletConfig();\n\n    void service(ServletRequest var1, ServletResponse var2) throws ServletException, IOException;\n\n    String getServletInfo();\n\n    void destroy();\n}\n</code></pre> <p><code>service</code>\u65b9\u6cd5\u662f\u6700\u91cd\u8981\u7684\uff0c\u5b83\u7684\u4f5c\u7528\u662f\u628a<code>tomcat(servlet\u5bb9\u5668)</code>\u4f20\u5165\u7684\u8bf7\u6c42\u8fdb\u884c\u5904\u7406\uff0c\u5e76\u8fd4\u56de\u7ed3\u679c\u3002</p> <p><code>tomcat</code>\u5c01\u88c5\u5ba2\u6237\u7aef<code>Socket</code>\u4f20\u5165\u7684\u8bf7\u6c42\uff0c\u5c06\u5176\u53d8\u4e3a<code>ServletRequest</code>\u7c7b\u578b\u3002</p> <p>\u8865\u5145\uff1aweb\u670d\u52a1\u5668\u662f\u4e00\u79cd\u8f6f\u4ef6\uff0c\u53ef\u4ee5\u5c06\u672c\u5730\u8d44\u6e90\u6620\u5c04\u4e3a<code>URL</code>\u66b4\u9732\u7ed9\u5916\u754c\u3002</p> <p>\u603b\u7ed3\uff1a<code>servlet</code>\u5c31\u662f\u4e00\u4e2a\u63a5\u53e3\uff0c\u5b83\u4e3aJava\u7a0b\u5e8f\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7edf\u4e00\u7684web\u5e94\u7528\u89c4\u8303\u3002</p>"},{"location":"Java/Servlet%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/#jsp","title":"JSP","text":"<p>\u6211\u4eec\u90fd\u77e5\u9053\uff0c\u6d4f\u89c8\u5668\u8bbf\u95eeweb\u670d\u52a1\u5668\u540e\uff0c\u901a\u5e38\u4f1a\u5f97\u5230\u4e00\u4e2a<code>html</code>\u6587\u4ef6\uff0c\u6587\u4ef6\u5185\u5bb9\u5927\u81f4\u5982\u4e0b\uff1a</p> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title&gt;Document&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;hello, world!&lt;/h1&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>\u90a3\u4e48\u670d\u52a1\u5668\u662f\u5982\u4f55\u751f\u6210\u4e0a\u8ff0html\u6587\u672c\u5462\uff1f</p> <p>\u6700\u65e9\u671f\u5b9e\u9645\u4e0a\u662f\u7f8e\u5de5\u8d1f\u8d23\u5199HTML\uff0c\u7136\u540eJava`\u7a0b\u5e8f\u5458\u5c06\u5199\u597d\u7684HTML\u4ee3\u7801\u5d4c\u5165Java\u4ee3\u7801\u4e2d\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n    response.setContentType(\"text/html\");\n    PrintWriter out = response.getWriter();\n    out.println(\"&lt;!DOCTYPE html&gt;\");\n    out.println(\"&lt;html lang=\"en\"&gt;\");\n    out.println(\"&lt;head&gt;\");\n    out.println(\"    &lt;meta charset=\"UTF-8\"&gt;\");\n    out.println(\"    &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt;\");\n    out.println(\"    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\");\n    out.println(\"    &lt;title&gt;Document&lt;/title&gt;\");\n    out.println(\"&lt;/head&gt;\");\n    out.println(\"&lt;body&gt;\");\n    out.println(\"    &lt;h1&gt;hello, world!&lt;/h1&gt;\");\n    out.println(\"&lt;/body&gt;\");\n    out.println(\"&lt;/html&gt;\");\n}\n</code></pre> <p>\u90a3\u4e48\u8fd9\u5c31\u6709\u4e24\u4e2a\u95ee\u9898\uff1a</p> <ul> <li>\u4e00\u4e2aHTML\u9875\u9762\u52a8\u8f84\u51e0\u5343\u884c\u4ee3\u7801\uff0cJava\u7a0b\u5e8f\u5458\u4e00\u884c\u4e00\u884c\u7c98\u8d34\u8fdb\u53bb\uff0c\u53ef\u80fd\u4f1a\u88ab\u7d2f\u6b7b~</li> <li>\u9875\u9762\u662f\u9759\u6001\u7684\u3002\u4e5f\u5c31\u662f\u8bf4\u4e0d\u540c\u7684\u4eba\u8bbf\u95ee\u8be5\u670d\u52a1\u5668\uff0c\u5f97\u5230\u7684HTML\u9875\u9762\u662f\u76f8\u540c\u7684\u3002\u800c\u5f53\u4eca\u7edd\u5927\u591a\u6570\u7f51\u7ad9\u662f\u52a8\u6001\u7684\uff0c\u6bd4\u5982\u6211\u8bbf\u95ee\u7684B\u7ad9\u5185\u5bb9\u51e0\u4e4e\u5168\u662f\u5b85\u821e\u533a\u89c6\u9891\uff0c\u800c\u5c0f\u660e\u8bbf\u95ee\u7684B\u7ad9\u5168\u662f\u5b66\u4e60\u89c6\u9891\u3002B\u7ad9\u6839\u636e\u4e0d\u540c\u7684\u4eba\u7269\u63a8\u8350\u4e0d\u540c\u7684\u5185\u5bb9\u3002</li> </ul> <p>\u6b64\u65f6JSP\u8bde\u751f\u4e86\uff01</p> <p>JSP\uff08Java Server Page\uff09\uff0c\u4e5f\u5373\u201c\u8fd0\u884c\u5728\u670d\u52a1\u5668\u7aef\u7684\u9875\u9762\u201d\u3002\u6211\u4eec\u53ef\u4ee5\u5728JSP\u6587\u4ef6\u4e2d\u5199HTML\u4ee3\u7801\uff0c\u8fd8\u53ef\u4ee5\u5728JSP\u6587\u4ef6\u4e2d\u5199Java\u4ee3\u7801\u3002\u670d\u52a1\u5668\u4f1a\u5c06JSP\u9875\u9762\u52a8\u6001\u6e32\u67d3\u4e3aHTML\u6587\u4ef6\uff0c\u7136\u540e\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002</p> <p>\u4e0b\u8ff0\u6848\u4f8b\u662f\u5c06Java\u96c6\u5408\u4e2d\u7684\u4e00\u4e9b\u59d3\u540d\u52a8\u6001\u6e32\u67d3\u5230\u9875\u9762\u4e2d\u7684\u4e00\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>&lt;%@ page contentType=\"text/html;charset=UTF-8\" %&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;\u59d3\u540d\u5217\u8868&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;\u59d3\u540d\u5217\u8868&lt;/h1&gt;\n    &lt;ul&gt;\n        &lt;% \n        List&lt;String&gt; nameList = new ArrayList();\n        nameList.addName(\"John\");\n        nameList.addName(\"Jane\");\n        nameList.addName(\"Alice\");\n        for (String name : nameList) {\n            out.println(\"&lt;li&gt;\" + name + \"&lt;/li&gt;\");\n        }\n        %&gt;\n    &lt;/ul&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>\u90a3\u4e48\u6211\u4eec\u60f3\u60f3\uff0cJSP\u662f\u5982\u4f55\u88ab\u670d\u52a1\u5668\u6e32\u67d3\u4e3aHTML\u6587\u4ef6\u7684\u5462\uff1f\u5177\u4f53\u8fc7\u7a0b\u5982\u4e0b\uff1a</p> <ol> <li>web\u670d\u52a1\u5668\u6536\u5230\u4e00\u4e2a\u8bbf\u95ee<code>jsp</code>\u9875\u9762\u7684\u8bf7\u6c42\u3002</li> <li>JSP\u5f15\u64ce\u5c06JSP\u6587\u4ef6\u7f16\u8bd1\u6210\u4e00\u4e2a<code>Servlet</code>\uff0c\u8be5<code>Servlet</code>\u7c7b\u4f1a\u5b9e\u73b0<code>javax.servlet.Servlet</code>\u63a5\u53e3\uff0c\u5e76\u5305\u542bJSP\u6587\u4ef6\u4e2d\u7684\u9759\u6001\u5185\u5bb9\u548c\u52a8\u6001\u4ee3\u7801\u3002</li> <li>\u7f16\u8bd1\u540e\u7684Servlet\u7c7b\u4f1a\u88ab\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5e76\u5b9e\u4f8b\u5316\u4e00\u4e2aServlet\u5bf9\u8c61\u3002</li> <li>\u8c03\u7528Servlet\u5bf9\u8c61\u7684service\u65b9\u6cd5\uff0c\u5904\u7406\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u3002</li> <li>\u5728 <code>service()</code> \u65b9\u6cd5\u4e2d\uff0cServlet \u5bf9\u8c61\u53ef\u4ee5\u6267\u884c Java \u4ee3\u7801\u3001\u8bbf\u95ee\u6570\u636e\u5e93\u3001\u8c03\u7528\u5176\u4ed6 Java \u7c7b\u7b49\u3002\u5b83\u53ef\u4ee5\u751f\u6210\u52a8\u6001\u5185\u5bb9\u5e76\u4e0e\u9759\u6001\u5185\u5bb9\u7ed3\u5408\u3002</li> <li>Servlet \u5bf9\u8c61\u751f\u6210\u7684\u52a8\u6001\u5185\u5bb9\u6700\u7ec8\u4f1a\u88ab\u53d1\u9001\u56de\u5ba2\u6237\u7aef\u4f5c\u4e3a HTTP \u54cd\u5e94\u3002</li> <li>\u5ba2\u6237\u7aef\u63a5\u6536\u5230\u54cd\u5e94\uff0c\u5e76\u5c06\u5176\u6e32\u67d3\u4e3a\u53ef\u89c1\u7684\u7f51\u9875\u6216\u5176\u4ed6\u7c7b\u578b\u7684\u5185\u5bb9\u3002</li> </ol> <p>\u901a\u8fc7\u4e0a\u8ff0\u8fc7\u7a0b\uff0c\u6211\u4eec\u53ef\u4ee5\u77e5\u9053\uff1a\u4e3a\u4e86\u4e0d\u8ba9Java\u7a0b\u5e8f\u5458\u4e00\u884c\u884c\u590d\u5236HTML\u4ee3\u7801\u5230Servlet\u91cc\uff0cSUN\u516c\u53f8\u5e72\u8106\u628aJava\u4ee3\u7801\u548cHTML\u4ee3\u7801\u6742\u7cc5\u5728\u4e00\u8d77\uff0c\u7f8e\u5176\u540d\u66f0<code>JSP</code>\u3002</p> <p>\u603b\u7ed3\uff0cJSP = HTML + Java\u7247\u6bb5\uff0cJSP\u5c31\u662f\u4e00\u4e2aServlet\uff01</p>"},{"location":"Java/Servlet%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/#servlet_1","title":"servlet\u5bf9\u8c61\u7684\u751f\u547d\u5468\u671f","text":"<p>\u4e00\u4e2a<code>WebServlet</code>\u6ce8\u89e3\u5bf9\u5e94\u4e00\u4e2a<code>Servlet</code>\u7c7b\uff0c\u4e00\u4e2a<code>Servlet</code>\u7c7b\u53ef\u80fd\u4f1a\u521b\u5efa\u591a\u4e2a<code>servlet</code>\u5bf9\u8c61\u3002servlet\u5bf9\u8c61\u8d1f\u8d23\u5904\u7406\u5e76\u54cd\u5e94\u7528\u6237\u8bf7\u6c42\u7b49\u529f\u80fd\u3002</p>"},{"location":"Java/Servlet%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/#servlet_2","title":"servlet\u91cd\u8981\u5bf9\u8c61","text":""},{"location":"Java/Servlet%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/#servletcontext","title":"ServletContext","text":"<p>\u4e00\u4e2aWeb\u5e94\u7528\u4e2d\u53ea\u6709\u4e00\u4e2a<code>ServletContext</code>\u5bf9\u8c61\uff0c\u7528\u4e8e\u5b58\u653e\u5168\u5c40\u53d8\u91cf\u3002</p>"},{"location":"Java/String%E4%B8%8D%E5%8F%AF%E5%8F%98%E7%9A%84%E5%A5%BD%E5%A4%84/","title":"String\u4e0d\u53ef\u53d8\u6027","text":"<p>[toc]</p>"},{"location":"Java/String%E4%B8%8D%E5%8F%AF%E5%8F%98%E7%9A%84%E5%A5%BD%E5%A4%84/#_1","title":"\u4ec0\u4e48\u662f\u4e0d\u53ef\u53d8","text":"<p>\u6709\u4e9b\u540c\u5b66\u8ba4\u4e3aString\u662f\u53ef\u53d8\u7684\uff0c\u5e76\u4e14\u7ed9\u51fa\u4e86\u4ee3\u7801\u3002</p> <pre><code>String str = \"abc\";\nstr = \"def\";\n</code></pre> <p><code>str</code>\u7531<code>abc</code>\u53d8\u4e3a<code>def</code>\uff0c\u8fd9\u4e0d\u5c31\u53ef\u53d8\u4e86\u5417\uff1f\u4e0d\u662f\u8fd9\u6837\u7684\uff01</p> <p>\u53ef\u53d8\u662f\u6307\u4fee\u6539\u539f\u59cb\u5b57\u7b26\u4e32\uff0c\u800c\u4e0a\u8ff0\u6848\u4f8b\u4e2d\uff0c\u5f15\u7528<code>str</code>\u5148\u6307\u5411<code>abc</code>\uff0c\u518d\u6307\u5411<code>def</code>\u3002</p>"},{"location":"Java/String%E4%B8%8D%E5%8F%AF%E5%8F%98%E7%9A%84%E5%A5%BD%E5%A4%84/#string_1","title":"String\u4e3a\u4ec0\u4e48\u88ab\u8bbe\u8ba1\u4e3a\u4e0d\u53ef\u53d8","text":"<p>\u5f53\u6211\u4eec\u4f7f\u7528<code>String str = \"abc\"</code>\u65f6\uff0cJava\u4f1a\u68c0\u67e5\u5e38\u91cf\u6c60\u4e2d\u662f\u5426\u6709\u5e38\u91cf\u503c\u4e3a<code>abc</code>\u7684\u5e38\u91cf\u3002\u5982\u679c\u6ca1\u6709\uff0c\u5219\u4f1a\u5728\u5e38\u91cf\u6c60\u4e2d\u521b\u5efa\u4e00\u4e2a\u5e38\u91cf\u5bf9\u8c61\uff0c\u5e76\u8ba9<code>str</code>\u6307\u5411\u8be5\u5e38\u91cf\u5bf9\u8c61\u3002</p> <p>\u8ba9<code>str</code>\u6307\u5411\u7684\u5e38\u91cf\u7684\u597d\u5904\u5728\u4e8e\uff1a</p> <ol> <li>\u8282\u7701\u7a7a\u95f4\uff1a<code>String s1 = \"abc\"; String s2 = \"abc\";</code>s1\u548cs2\u6307\u5411\u5e38\u91cf\u6c60\u4e2d\u540c\u4e00\u4e2a\u5e38\u91cf\u3002</li> <li>\u7f13\u5b58\u54c8\u5e0c\uff1a\u54c8\u5e0c\u503c\u5e94\u8be5\u5177\u6709\u4e0d\u53ef\u53d8\u6027\u3002\u901a\u8fc7<code>str</code>\u6307\u5411\u7684\u5b57\u7b26\u4e32\u5e38\u91cf\u8ba1\u7b97\u51fa\u54c8\u5e0c\u503c\u540e\uff0c\u7531\u4e8e\u5b57\u7b26\u4e32\u5e38\u91cf\u4e0d\u53ef\u53d8\uff0c\u56e0\u6b64\u7b2c\u4e00\u6b21\u8ba1\u7b97\u51fa\u7684\u54c8\u5e0c\u503c\u4e5f\u6c38\u8fdc\u4e0d\u4f1a\u53d8\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u7f13\u5b58\u54c8\u5e0c\u503c\u3002</li> </ol>"},{"location":"Java/ThreadLocal/","title":"ThreadLocal","text":"<p>[toc]</p>"},{"location":"Java/ThreadLocal/#_1","title":"\u662f\u4ec0\u4e48","text":"<p>\u6838\u5fc3\uff1a<code>ThreadLocal</code>\u662f\u4e00\u4e2a\u7c7b\uff0c\u6211\u4eec\u901a\u5e38\u5728<code>ThreadLocal</code>\u5bf9\u8c61\u4e2d\u5b58\u653e\u53ea\u5c5e\u4e8e\u67d0\u4e2a\u7ebf\u7a0b\u7684\u5168\u5c40\u53d8\u91cf\u3002</p> <p>\u4e0d\u4e25\u8c28\u7684\u8bf4\uff0c\u4f7f\u7528<code>ThreadLocal</code>\u5bf9\u8c61\u53ef\u4ee5\u8de8\u65b9\u6cd5\uff0c\u8de8\u7c7b\u5171\u4eab\u53d8\u91cf\u3002</p> <p>\u60f3\u8981\u83b7\u53d6threadlocal\u4e2d\u7684\u503c\u65f6\uff0c\u53ea\u9700\u8981new\u4e00\u4e2athreadlocal\u5bf9\u8c61\u5c31\u884c\uff08\u54ea\u4e2a\u5730\u65b9new\u90fd\u53ef\u4ee5\uff09</p> <p>\u5de5\u4f5c\u539f\u7406\uff1a\u6bcf\u4e2a\u7ebf\u7a0b\u5bf9\u8c61\u4e2d\uff0c\u90fd\u6709\u4e00\u4e2a<code>ThreadLocalMap</code>\u5bf9\u8c61\uff0c\u53ea\u9700\u8981\u5c06\u503c\u5b58\u5165<code>ThreadLocalMap</code>\u5bf9\u8c61\u4e2d\u5373\u53ef\u3002</p> <p>\u5728\u8bf4<code>ThreadLocal</code>\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u4e86\u89e3\u4ec0\u4e48\u662f\u7ebf\u7a0b\u5c01\u95ed\u3002</p> <p>\u7ebf\u7a0b\u5c01\u95ed\uff0c\u4e5f\u5373\u5c06\u5bf9\u8c61\u653e\u5728\u7ebf\u7a0b\u91cc\uff0c\u8ba9\u5bf9\u8c61\u53ea\u5c5e\u4e8e\u67d0\u4e2a\u7ebf\u7a0b\uff0c\u8fd9\u6837\u5c31\u80fd\u89e3\u51b3\u5e76\u53d1\u95ee\u9898\u3002</p> <p>\u5b9e\u73b0\u7ebf\u7a0b\u5c01\u95ed\u6709\u4ee5\u4e0b\u4e24\u79cd\u65b9\u5f0f\uff1a</p> <ol> <li>\u5c06\u7ebf\u7a0b\u5bf9\u8c61\u653e\u5165\u6808\u4e2d\uff0c\u4fee\u6539\u5c40\u90e8\u53d8\u91cf\u4e0d\u4f1a\u4ea7\u751f\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\u3002</li> </ol> <p><code>java    public void test() {        StringBuilder sb = new StringBuilder();        sb.append(\"hi\");    }</code></p> <ol> <li>\u5c06\u5bf9\u8c61\u653e\u5728<code>ThreadLocal</code>\u4e2d\u3002</li> </ol>"},{"location":"Java/ThreadLocal/#_2","title":"\u4f7f\u7528\u65b9\u6cd5","text":"<p>\u590d\u5236\u4e0b\u9762\u7684\u4ee3\u7801\uff0c\u6ce8\u610fUserDTO\u662f\u6211\u81ea\u5df1\u7684\u7c7b\uff0c\u6839\u636e\u81ea\u5df1\u4e1a\u52a1\u9009\u62e9\u5408\u9002\u7684\u7c7b\u3002</p> <pre><code>public class UserHolder {\n    private static final ThreadLocal&lt;UserDTO&gt; tl = new ThreadLocal&lt;&gt;();\n    public static void saveUser(UserDTO user){\n        tl.set(user);\n    }\n    public static UserDTO getUser(){\n        return tl.get();\n    }\n    public static void removeUser(){\n        tl.remove();\n    }\n}\n</code></pre> <p>\u8fd9\u6837\u4f7f\u7528\uff1a</p> <pre><code>@Override\npublic boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\n    // \u5224\u65ad\u662f\u5426\u9700\u8981\u62e6\u622a\uff08ThreadLocal\u4e2d\u662f\u5426\u6709\u7528\u6237\uff09\n    if (UserHolder.getUser() == null) {\n        response.setStatus(401);  // \u6ca1\u6709\uff0c\u9700\u8981\u62e6\u622a\uff0c\u8bbe\u7f6e\u72b6\u6001\u7801\n        return false;  // \u62e6\u622a\n    }\n    // \u6709\u7528\u6237\uff0c\u5219\u653e\u884c\n    return true;\n}\n</code></pre>"},{"location":"Java/Unsafe%E7%B1%BB%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/","title":"Unsafe\u7c7b\u6e90\u7801\u89e3\u6790","text":"<p>[toc]</p>"},{"location":"Java/Unsafe%E7%B1%BB%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#_1","title":"\u662f\u4ec0\u4e48","text":"<p><code>sun.misc.Unsafe</code> \u7c7b\u662f Java \u6807\u51c6\u5e93\u4e2d\u7684\u4e00\u4e2a\u7c7b\uff0c\u63d0\u4f9b\u4e86\u4e00\u4e9b\u5e95\u5c42\u3001\u9ad8\u5ea6\u5371\u9669\u7684\u64cd\u4f5c\uff0c\u53ef\u4ee5\u7ed5\u8fc7 Java \u8bed\u8a00\u7684\u9650\u5236\uff0c\u76f4\u63a5\u64cd\u4f5c\u5185\u5b58\u548c\u6267\u884c\u4e00\u4e9b\u4e0d\u5b89\u5168\u7684\u64cd\u4f5c\u3002</p>"},{"location":"Java/Unsafe%E7%B1%BB%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#_2","title":"\u6709\u4ec0\u4e48\u4f5c\u7528","text":"<p>\u901a\u8fc7unsafe\u5bf9\u8c61\u53ef\u4ee5\u4fee\u6539\u6307\u5b9a\u5bf9\u8c61\u7684\u503c\u3002\u4f8b\u5982\uff1a</p> <pre><code>public class Main {\n    private int num = 0;\n\n    public static void main(String[] args) throws InterruptedException, NoSuchFieldException, IllegalAccessException {\n        // \u901a\u8fc7\u53cd\u5c04\u83b7\u53d6unsafe\u5bf9\u8c61\n        Field f = Unsafe.class.getDeclaredField(\"theUnsafe\");\n        f.setAccessible(true);\n        Unsafe unsafe = (Unsafe) f.get(null);\n\n        long offsetNum = unsafe.objectFieldOffset(Main.class.getDeclaredField(\"num\"));\n\n        Main obj = new Main();\n        obj.num = 10;\n        // \u901a\u8fc7unsafe\u83b7\u53d6obj\u5bf9\u8c61\u4e2dfield\u7684\u503c\n        System.out.println(\"num=\" + unsafe.getInt(obj, offsetNum));\n        // \u901a\u8fc7unsafe\u4fee\u6539obj\u5bf9\u8c61\u4e2dfield\u7684\u503c\n        unsafe.putInt(obj, offsetNum, 20);\n        System.out.println(\"num=\" + obj.num);\n    }\n}\n</code></pre>"},{"location":"Java/Unsafe%E7%B1%BB%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/#api","title":"\u5e38\u7528API","text":"<p>\u4f7f\u7528unsafe\u5bf9\u8c61\u8c03\u7528\u51fd\u6570\u65f6\uff0c\u901a\u5e38\u9700\u8981\u5411\u51fd\u6570\u7684\u53c2\u6570\u5217\u8868\u4f20\u5165\u53c2\u6570<code>(Object o, long offset)</code>\u3002\u6211\u4eec\u4f7f\u7528unsafe\u5bf9\u8c61\u662f\u4e3a\u4e86\u64cd\u4f5c\u67d0\u4e2a\u5bf9\u8c61\u7684\u5c5e\u6027\u3002</p> <ol> <li>\u83b7\u53d6unsafe\u5bf9\u8c61</li> </ol> <pre><code>// \u901a\u8fc7\u53cd\u5c04\u83b7\u53d6unsafe\u5bf9\u8c61\nField f = Unsafe.class.getDeclaredField(\"theUnsafe\");\nf.setAccessible(true);\nUnsafe unsafe = (Unsafe) f.get(null);\n</code></pre> <ol> <li>\u5185\u5b58\u64cd\u4f5c\uff1a</li> </ol> <p>```java    // \u5e38\u7528API\uff1a    public native int getIntVolatile(Object o, long offset);    public native int getInt(Object o, long offset);    public native void putInt(Object o, long offset, int x);</p> <p>// \u5177\u4f53\u4f7f\u7528\uff1a\u53c2\u8003\u4e0a\u9762\u7684\u6848\u4f8b    ```</p> <ol> <li>CAS</li> </ol> <p>\u53ea\u80fd\u5bf9\u6210\u5458\u53d8\u91cf\u8fdb\u884c\u64cd\u4f5c\uff0c\u65e0\u6cd5\u5bf9\u5c40\u90e8\u53d8\u91cf\u8fdb\u884c\u64cd\u4f5c\u3002</p> <p><code>java    // \u53c2\u6570\u5217\u8868\uff1a\u88ab\u64cd\u4f5c\u7684\u5bf9\u8c61\uff0c\u504f\u79fb\u91cf\uff08\u7528\u4e8e\u5b9a\u4f4d\u5177\u4f53field\uff09\uff0c\u671f\u5f85\u503c\uff0c\u4fee\u6539\u540e\u7684\u503c    public final native boolean compareAndSwapInt(Object o, long offset, int expected, int x);</code></p>"},{"location":"Java/fail-fast%E5%92%8Cfail-safe%E6%9C%BA%E5%88%B6/","title":"fail-fast\u548cfail-safe\u673a\u5236","text":"<p>[toc]</p>"},{"location":"Java/fail-fast%E5%92%8Cfail-safe%E6%9C%BA%E5%88%B6/#_1","title":"\u662f\u4ec0\u4e48","text":"<p>\u5728 Java \u4e2d\uff0c<code>fail-fast</code> \u548c <code>fail-safe</code> \u673a\u5236\u901a\u5e38\u7528\u4e8e\u5904\u7406\u96c6\u5408\u7c7b\u7684\u5f02\u5e38\u60c5\u51b5\u3002\u5728\u4f7f\u7528\u8fed\u4ee3\u5668\u904d\u5386\u96c6\u5408\u65f6\uff0c\u5982\u679c\u96c6\u5408\u53d1\u751f\u53d8\u5316\uff08\u589e/\u5220\u64cd\u4f5c\uff09\uff0c\u5c31\u4f1a\u53d1\u751f\u610f\u5916\u95ee\u9898\u3002</p> <p>\u3010\u8865\u5145\u3011\u4f7f\u7528\u8fed\u4ee3\u5668\u904d\u5386\u96c6\u5408\u65f6\uff0c\u4e0d\u5efa\u8bae\u5bf9\u96c6\u5408\u8fdb\u884c\u4fee\u6539\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u8ba9\u7ed3\u6784\u4ea7\u751f\u6df7\u4e71\uff08\u5177\u4f53\u539f\u56e0\u7f51\u4e0a\u641c\u7d22\uff09\u3002\u56e0\u6b64\uff0c\u5728\u67d0\u4e00\u65f6\u523b\u83b7\u53d6\u96c6\u5408\u7684\u8fed\u4ee3\u5668\u5bf9\u8c61\uff0c\u8fed\u4ee3\u5668\u5bf9\u8c61\u5c31\u5e94\u8be5\u53ea\u5bf9\u6b64\u523b\u7684\u96c6\u5408\u8fdb\u884c\u64cd\u4f5c\u3002\u5982\u679c\u8fed\u4ee3\u5668\u64cd\u4f5c\u7684\u8fc7\u7a0b\u4e2d\u96c6\u5408\u7ed3\u6784\u53d1\u751f\u53d8\u5316\uff0c\u5219\u8981\u4e48\u7acb\u5373\u629b\u51fa\u5f02\u5e38\uff08<code>fail-fast</code>\u673a\u5236\uff09\uff0c\u8981\u4e48\u62f7\u8d1d\u4e00\u4e2a\u65b0\u7684\u96c6\u5408\uff0c\u5bf9\u65b0\u7684\u96c6\u5408\u8fdb\u884c\u4fee\u6539\uff0c\u8ba9\u8fed\u4ee3\u5668\u603b\u662f\u64cd\u4f5c\u539f\u6765\u7684\u6570\u7ec4\u3002</p> <p><code>java.util</code>\u5305\u4e0b\u7684\u5927\u591a\u6570\u6570\u636e\u7ed3\u6784\u90fd\u662f<code>fail-fast</code>\u673a\u5236\u3002\u5f53\u4f7f\u7528\u8fed\u4ee3\u5668\u904d\u5386\u96c6\u5408\u65f6\uff0c\u5982\u679c\u96c6\u5408\u53d1\u9001\u53d8\u5316\uff08\u6bd4\u5982\u589e\u5220\u5143\u7d20\uff09\uff0c\u5219\u4f1a\u629b\u51fa<code>ConcurrentModificationException</code>\u5f02\u5e38\u3002\u7279\u6b8a\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u4f7f\u7528\u8fed\u4ee3\u5668\u7684<code>remove()</code>\u5220\u9664\u5143\u7d20\uff0c\u5219\u4e0d\u4f1a\u62a5\u9519\uff08\u8fd9\u4e0d\u91cd\u8981\uff09\u3002</p> <p><code>java.util.concurrent</code>\u5305\u4e0b\u7684\u5927\u591a\u6570\u6570\u636e\u7ed3\u6784\u90fd\u662f<code>fail-safe</code>\u673a\u5236\u3002</p>"},{"location":"Java/fail-fast%E5%92%8Cfail-safe%E6%9C%BA%E5%88%B6/#fail-fast","title":"\u5982\u4f55\u5b9e\u73b0fail-fast","text":"<p><code>fail-fast</code>\u7684\u6838\u5fc3\u662f\u96c6\u5408\u589e\u5220\u5143\u7d20\u540e\uff0c\u4e4b\u524d\u7684\u8fed\u4ee3\u5668\u4e0d\u80fd\u4f7f\u7528\u3002</p> <p>\u663e\u7136\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u96c6\u5408\u5bf9\u8c61\u4e2d\u7ef4\u62a4\u4e00\u4e2a\u6210\u5458\u53d8\u91cf<code>modCount</code>\uff0c\u5f53\u96c6\u5408\u7ed3\u6784\u53d1\u751f\u4e00\u6b21\u6539\u53d8\uff08\u589e/\u5220\u5143\u7d20\uff09\uff0c<code>modCount</code>\u4fbf\u52a01\u3002\u540c\u65f6\u6211\u4eec\u83b7\u53d6\u96c6\u5408\u7684\u8fed\u4ee3\u5668\u5bf9\u8c61\u65f6\uff0c\u5e94\u5728\u8fed\u4ee3\u5668\u5bf9\u8c61\u4e2d\u521b\u5efa<code>expectedModCount</code>\uff0c\u7528\u4e8e\u8bb0\u5f55\u5f53\u524d\u96c6\u5408\u7684<code>modCount</code>\u3002\u4e4b\u540e\u8fed\u4ee3\u5668\u8bbf\u95ee\u96c6\u5408\u65f6\uff0c\u5982\u679c\u53d1\u73b0<code>modCount != expectedModCount</code>\uff0c\u5c31\u5e94\u8be5\u629b\u51fa\u9519\u8bef\u3002\u4e0b\u9762\u662f<code>ArrayList</code>\u6e90\u7801\u5b9e\u73b0\u3002</p> <pre><code>public class ArrayList&lt;E&gt; extends AbstractList&lt;E&gt;\n        implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable\n{\n    // modCount\u8bb0\u5f55\u8be5\u6570\u7ec4\u88ab\u4fee\u6539\u4e86\u591a\u5c11\u6b21\n    protected transient int modCount = 0;\n\n    public Iterator&lt;E&gt; iterator() {\n        return new Itr();\n    }\n\n    private class Itr implements Iterator&lt;E&gt; {\n        // \u521b\u5efa\u8fed\u4ee3\u5668\u5bf9\u8c61\u65f6\uff0c\u8bb0\u5f55\u6570\u7ec4\u5f53\u524dModCount\n        int expectedModCount = modCount;\n\n        Itr() {}\n\n        // \u901a\u8fc7\u8fed\u4ee3\u5668\u5bf9\u8c61\u83b7\u53d6\u6570\u7ec4\u7684\u4e0b\u4e00\u4e2a\u5143\u7d20\n        public E next() {\n            // \u68c0\u67e5\u6570\u7ec4\u662f\u5426\u88ab\u4fee\u6539\n            checkForComodification();\n\n            int i = cursor;\n            if (i &gt;= size)\n                throw new NoSuchElementException();\n            Object[] elementData = ArrayList.this.elementData;\n            if (i &gt;= elementData.length)\n                throw new ConcurrentModificationException();\n            cursor = i + 1;\n            return (E) elementData[lastRet = i];\n        }\n\n        final void checkForComodification() {\n            if (modCount != expectedModCount)\n                throw new ConcurrentModificationException();\n        }\n    }\n}\n</code></pre>"},{"location":"Java/fail-fast%E5%92%8Cfail-safe%E6%9C%BA%E5%88%B6/#fail-safe","title":"\u4e3a\u4ec0\u4e48\u8981\u6709fail-safe","text":"<p>\u6709\u65f6\u5019\u6211\u4eec\u4e0d\u5e0c\u671b\u8fed\u4ee3\u5668\u64cd\u4f5c\u96c6\u5408\u65f6\uff0c\u7531\u4e8e\u96c6\u5408\u7ed3\u6784\u7684\u6539\u53d8\u800c\u9891\u7e41\u629b\u51fa\u5f02\u5e38\u3002\u6b64\u65f6\u6211\u4eec\u5c31\u53ef\u4ee5</p>"},{"location":"Java/fail-fast%E5%92%8Cfail-safe%E6%9C%BA%E5%88%B6/#fail-safe_1","title":"\u5982\u4f55\u5b9e\u73b0fail-safe","text":"<p>\u6700\u7b80\u5355\u7684\u601d\u8def\u662f\uff1a\u6bcf\u521b\u5efa\u4e00\u4e2a\u8fed\u4ee3\u5668\u5bf9\u8c61<code>iter</code>\uff0c\u4fbf\u5c06\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u5168\u90e8\u62f7\u8d1d\u4e00\u4efd\u5230<code>iter</code>\u4e2d\uff0c\u547d\u540d\u4e3a<code>newElements</code>\uff0c\u8fed\u4ee3\u5668\u53ea\u64cd\u4f5c<code>newElements</code>\u5bf9\u8c61\u3002\u4e4b\u540e\u65e0\u8bba\u96c6\u5408\u5982\u4f55\u6539\u53d8\uff0c\u90fd\u4e0d\u4f1a\u5f71\u54cd<code>newElements</code>\u5bf9\u8c61\uff0c\u56e0\u800c\u8fed\u4ee3\u5668\u4ecd\u80fd\u6b63\u5e38\u4f7f\u7528\u3002\u8fd9\u6837\u7684\u7f3a\u70b9\u662f\uff1a\u4fee\u6539\u540e\u7684\u6570\u636e\u4e0d\u80fd\u53ca\u65f6\u901a\u77e5<code>iter</code>\u5bf9\u8c61\uff0c\u5bfc\u81f4\u51fa\u73b0\u6570\u636e\u4e00\u81f4\u6027\u95ee\u9898\u3002</p> <p>\u4e0a\u8ff0\u601d\u8def\u57fa\u4e8e\u201c\u8bfb\u65f6\u590d\u5236\u201d\uff0c\u4ecd\u7136\u5b58\u5728\u4f18\u5316\u7684\u7a7a\u95f4\u3002\u52a0\u5165\u6211\u4eec\u5728\u4e24\u4e2a\u4e0d\u540c\u7684\u65f6\u523b\u5206\u522b\u83b7\u53d6\u4e00\u4e2a\u8fed\u4ee3\u5668\u5bf9\u8c61\uff0c\u4e14\u4e24\u4e2a\u65f6\u523b\u4e4b\u95f4\u96c6\u5408\u6ca1\u6709\u589e\u5220\u5143\u7d20\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u8ba9\u8fd9\u4e24\u4e2a\u8fed\u4ee3\u5668\u5bf9\u8c61\u4e2d\u7684<code>newElements</code>\u5f15\u7528\u90fd\u6307\u5411\u540c\u4e00\u4e2a\u96c6\u5408\u5bf9\u8c61\u3002</p> <p>Java\u6e90\u7801\u4e2d\u7684\u5b9e\u73b0\u601d\u8def\u662f\uff1a\u8fed\u4ee3\u5668\u5bf9\u8c61<code>iter</code>\u5728\u64cd\u4f5c\u96c6\u5408\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5e94\u8be5\u5c06\u96c6\u5408\u4fdd\u5b58\u5230<code>snapshot</code>\u3002\u4e4b\u540e<code>iter</code>\u7684\u64cd\u4f5c\u90fd\u9488\u5bf9<code>snapshot</code>\u3002\u5982\u679c\u96c6\u5408\u589e\u5220\u5143\u7d20\uff0c\u5219\u5c06\u539f\u5148\u96c6\u5408\u4e2d\u7684\u6240\u6709\u5f15\u7528\u62f7\u8d1d\u4e00\u4efd\u5230\u65b0\u7684\u96c6\u5408\u4e2d\uff0c\u5e76\u5bf9\u65b0\u96c6\u5408\u8fdb\u884c\u589e\u5220\u64cd\u4f5c\u3002\u4e4b\u540e\u5373\u4fbf\u96c6\u5408\u53d1\u751f\u6539\u53d8\uff0c\u4e5f\u4e0d\u4f1a\u5f71\u54cd<code>snapshot</code>\u7684\u7ed3\u6784\uff0c\u56e0\u800c\u8fed\u4ee3\u5668\u4ecd\u80fd\u6b63\u5e38\u4f7f\u7528\u3002\u6b64\u65f6\u4e4b\u524d\u7684\u539f\u96c6\u5408\u88ab<code>snapshot</code>\u5f15\u7528\u3002\u4e0b\u9762\u662f\u90e8\u5206\u6e90\u7801\uff1a</p> <p>\u521b\u5efa\u8fed\u4ee3\u5668\u5bf9\u8c61\u65f6\uff0c\u76f4\u63a5\u8ba9\u8fed\u4ee3\u5668\u4e2d\u7684snapshot\u6570\u7ec4\u5bf9\u8c61\u5f15\u7528\u96c6\u5408\u5bf9\u8c61array\u3002</p> <pre><code>public class CopyOnWriteArrayList&lt;E&gt;\n    implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable {\n    /** The array, accessed only via getArray/setArray. */\n    private transient volatile Object[] array;\n\n    /**\n     * \u83b7\u53d6\u8fed\u4ee3\u5668\u5bf9\u8c61\n     */\n    public Iterator&lt;E&gt; iterator() {\n        return new COWIterator&lt;E&gt;(getArray(), 0);\n    }\n\n    /**\n     * \u83b7\u53d6\u5f53\u524d\u6570\u7ec4\u5bf9\u8c61\n     */\n    final Object[] getArray() {\n        return array;\n    }\n\n    /**\n     * \u8fed\u4ee3\u5668\u5185\u90e8\u7c7b\n     */\n    static final class COWIterator&lt;E&gt; implements ListIterator&lt;E&gt; {\n        /** Snapshot of the array */\n        private final Object[] snapshot;\n        /** Index of element to be returned by subsequent call to next.  */\n        private int cursor;\n\n        private COWIterator(Object[] elements, int initialCursor) {\n            cursor = initialCursor;\n            snapshot = elements;\n        }\n    }\n}\n</code></pre> <p>\u4fee\u6539\u96c6\u5408\u65f6\uff0c\u521b\u5efa\u4e00\u4e2a\u65b0\u6570\u7ec4\uff0c\u5e76\u5c06\u539f\u6570\u7ec4\u4e2d\u7684\u5f15\u7528\u62f7\u8d1d\u5230\u65b0\u6570\u7ec4\u4e2d\uff0c\u540c\u65f6\u5728\u65b0\u6570\u7ec4\u4e2d\u6dfb\u52a0\u5143\u7d20\u3002</p> <pre><code>public class CopyOnWriteArrayList&lt;E&gt;\n    implements List&lt;E&gt;, RandomAccess, Cloneable, java.io.Serializable {\n    /**\n     * Appends the specified element to the end of this list.\n     *\n     * @param e element to be appended to this list\n     * @return {@code true} (as specified by {@link Collection#add})\n     */\n    public boolean add(E e) {\n        final ReentrantLock lock = this.lock;\n        lock.lock();\n        try {\n            // \u83b7\u53d6\u6570\u7ec4\u5bf9\u8c61\u548c\u6570\u7ec4\u957f\u5ea6\n            Object[] elements = getArray();\n            int len = elements.length;\n\n            // \u5c06\u539f\u6570\u7ec4\u4e2d\u6bcf\u4e2a\u5143\u7d20\u7684\u5f15\u7528\u90fd\u590d\u5236\u4e00\u904d\uff0c\u653e\u5230\u4e00\u4e2a\u65b0\u7684\u6570\u7ec4\u4e2d\uff0c\u5e76\u4e14\u7ed9\u65b0\u6570\u7ec4\u52a0\u51651\u4e2a\u5143\u7d20\n            Object[] newElements = Arrays.copyOf(elements, len + 1);\n            newElements[len] = e;\n\n            // \u5c06\u65b0\u7684\u6570\u7ec4\u8d4b\u503c\u7ed9\u539f\u6765\u7684\u6570\u7ec4\uff0c\u8fd9\u6b65\u64cd\u4f5c\u8017\u65f6\u6781\u77ed\n            setArray(newElements);\n            return true;\n        } finally {\n            lock.unlock();\n        }\n    }\n\n    /**\n     * Gets the array.  Non-private so as to also be accessible\n     * from CopyOnWriteArraySet class.\n     */\n    final Object[] getArray() {\n        return array;\n    }\n\n    /**\n     * Sets the array.\n     */\n    final void setArray(Object[] a) {\n        array = a;\n    }\n}\n</code></pre>"},{"location":"Java/fail-fast%E5%92%8Cfail-safe%E6%9C%BA%E5%88%B6/#_2","title":"\u601d\u8003\u95ee\u9898","text":"<ol> <li><code>CopyOnWriteArrayList</code>\u6dfb\u52a0\u5143\u7d20\u65f6\uff0c\u662f\u5c06\u539f\u96c6\u5408\u4e2d\u7684\u6240\u6709\u5bf9\u8c61\u62f7\u8d1d\u5230\u65b0\u6570\u7ec4\u4e2d\uff0c\u8fd8\u662f\u5c06\u539f\u96c6\u5408\u4e2d\u7684\u6240\u6709\u5bf9\u8c61\u5f15\u7528\u62f7\u8d1d\u5230\u65b0\u6570\u7ec4\u4e2d\uff1f</li> </ol>"},{"location":"Java/notify%26wait/","title":"notify&amp;wait","text":"<p>[toc]</p>"},{"location":"Java/notify%26wait/#_1","title":"\u4f7f\u7528\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>\u5fc5\u987b\u5728\u540c\u6b65\u65b9\u6cd5\u6216\u540c\u6b65\u4ee3\u7801\u5757\u4e2d\u4f7f\u7528\u3002</li> <li><code>notify</code>\u51fd\u6570\u548c<code>wait</code>\u51fd\u6570\u6210\u5bf9\u51fa\u73b0\u3002</li> <li><code>wait</code>\u4f1a\u963b\u585e\u7ebf\u7a0b\u5e76\u91ca\u653e\u5bf9\u8c61\u7684\u9501\u3002</li> <li><code>notify</code>\u8c03\u7528\u540e\u9700\u8981\u7b49\u540c\u6b65\u4ee3\u7801\u5757\u6267\u884c\u5b8c\u624d\u4f1a\u5524\u9192\u7ebf\u7a0b\u3002</li> <li><code>notifyall</code>\u4f1a\u5524\u9192\u8be5\u5bf9\u8c61\u7684\u7b49\u5f85\u961f\u5217\u4e2d\u6240\u6709\u7684\u7ebf\u7a0b\u3002</li> </ol> <p>\u5b9e\u73b0\u4e00\u4e2a\u751f\u4ea7\u8005\u6d88\u8d39\u8005\u6a21\u578b\u3002\u5347\u7ea7\uff1a\u5982\u679c\u8fd0\u884c\u591a\u4e2a\u6d88\u8d39\u8005\u7ebf\u7a0b\u8fd0\u884c\uff0c\u8be5\u600e\u4e48\u8bbe\u7f6e\u6761\u4ef6\u53d8\u91cf\u5462\uff1f</p>"},{"location":"Java/notify%26wait/#_2","title":"\u5b9e\u6218\u6848\u4f8b","text":"<p>1115. \u4ea4\u66ff\u6253\u5370 FooBar</p> <p>\u601d\u8def\uff1a</p> <p>\u4ee3\u7801\uff1a</p>"},{"location":"Java/synchronized%E5%85%AB%E9%94%81%E6%A1%88%E4%BE%8B/","title":"synchronized\u516b\u9501\u6848\u4f8b","text":"<p>[toc]</p>"},{"location":"Java/synchronized%E5%85%AB%E9%94%81%E6%A1%88%E4%BE%8B/#_1","title":"\u6848\u4f8b","text":"<p>\u5047\u5b9a\u6709\u5982\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>class Phone {\n    public synchronized void printA() {\n        try { Thread.sleep(2000); } catch (Exception e) { throw new RuntimeException(e); }\n        System.out.println(\"AAA\");\n    }\n    public synchronized void printB() {\n        System.out.println(\"BBB\");\n    }\n    public void printC() {\n        System.out.println(\"CCC\");\n    }\n}\n\npublic class Main {\n    public static void main(String[] args) {\n        // \u521b\u5efaphone\u5bf9\u8c61\n        // ...\n        // \u542f\u52a81\u7ebf\u7a0b\n        // ...\n        // \u6682\u505c500ms\n        try { Thread.sleep(500); } catch (Exception e) { throw new RuntimeException(e); }\n        // \u542f\u52a82\u7ebf\u7a0b\n        // ...\n    }\n}\n</code></pre> <p>\u516b\u9501\u95ee\u9898\uff1a</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u53ea\u521b\u5efa\u4e00\u4e2a\u624b\u673a\u5bf9\u8c61\u3002</p> <ol> <li>\u5047\u5b9a1\u7ebf\u7a0b\u4e2d\u6ca1\u6709Sleep\u51fd\u6570\u30021\u7ebf\u7a0b\u8c03\u7528printA\uff0c2\u7ebf\u7a0b\u8c03\u7528printB\u3002\u8bf7\u95ee\u6253\u5370\u7ed3\u679c\uff1f</li> </ol> <pre><code>AAA\nBBB\n</code></pre> <ol> <li>1\u7ebf\u7a0b\u8c03\u7528printA\uff0c2\u7ebf\u7a0b\u8c03\u7528printB\u3002\u8bf7\u95ee\u6253\u5370\u7ed3\u679c\uff1f</li> </ol> <pre><code>AAA\nBBB\n</code></pre> <p>\u89e3\u91ca\uff1asynchronized\u65b9\u6cd5\u5b9e\u9645\u4e0a\u9501\u7684\u662fthis\u5bf9\u8c61\u3002\u7ebf\u7a0b1\u548c\u7ebf\u7a0b2\u4f7f\u7528\u7684\u9501\u90fd\u6765\u81ea\u624b\u673a\u5bf9\u8c61\u3002\u56e0\u6b64\u4e00\u5b9a\u662f\u5148AAA\u540eBBB\u3002</p> <ol> <li>1\u7ebf\u7a0b\u8c03\u7528printA\uff0c2\u7ebf\u7a0b\u8c03\u7528printC\u3002\u8bf7\u95ee\u6253\u5370\u7ed3\u679c\uff1f</li> </ol> <pre><code>CCC\nAAA\n</code></pre> <p>\u89e3\u91ca\uff1a\u7ebf\u7a0b2\u55f2\u7528printC\u5e76\u4e0d\u4f1a\u548c\u7ebf\u7a0b1\u7ade\u4e89\u3002\u56e0\u6b64\u5148\u6267\u884cCCC\uff0c\u540e\u6267\u884cAAA\u3002</p> <ol> <li>\u4e24\u90e8\u624b\u673a\uff0c1\u7ebf\u7a0b\u8c03\u7528\u624b\u673a1\u7684printA\uff0c2\u7ebf\u7a0b\u8c03\u7528\u624b\u673a2\u7684printB\u3002\u8bf7\u95ee\u6253\u5370\u7ed3\u679c\uff1f</li> </ol> <pre><code>BBB\nAAA\n</code></pre> <p>\u867d\u7136\u7ebf\u7a0b1\u548c\u7ebf\u7a0b2\u90fd\u4f1a\u83b7\u53d6\u9501\uff0c\u4f46\u662f\u5b83\u4eec\u83b7\u53d6\u7684\u662f\u4e0d\u540c\u7684\u4e24\u628a\u9501\u3002</p> <ol> <li>\u5047\u5b9aprintA\u548cprintB\u90fd\u662fstatic synchronized\u65b9\u6cd5\u3002\u7ebf\u7a0b1\u8c03\u7528printA\uff0c\u7ebf\u7a0b2\u8c03\u7528printB\u3002\u8bf7\u95ee\u6253\u5370\u7ed3\u679c\uff1f\uff08\u96be\uff09</li> </ol> <pre><code>AAA\nBBB\n</code></pre> <p>\u5f53<code>synchronized</code>\u5173\u952e\u5b57\u4fee\u9970\u9759\u6001\u65b9\u6cd5\u65f6\uff0c\u76f8\u5f53\u4e8e\u7ed9\u8be5\u65b9\u6cd5\u4e2d\u6240\u6709\u4ee3\u7801\u6dfb\u52a0\u9501\uff0c\u5e76\u4e14\u8fd9\u4e2a\u9501\u6765\u81ea\u4e8e\u8be5\u7c7b\u7684<code>Class</code>\u5bf9\u8c61\u3002</p> <ol> <li>\u5047\u5b9aprintA\u548cprintB\u662fstatic synchronized\u65b9\u6cd5\u3002\u6709\u4e24\u4e2a\u624b\u673a\u5bf9\u8c61\u3002\u7ebf\u7a0b1\u901a\u8fc7\u624b\u673a1\u8c03\u7528printA\uff0c\u7ebf\u7a0b2\u901a\u8fc7\u624b\u673a2\u8c03\u7528printB\u3002\u8bf7\u95ee\u6253\u5370\u7ed3\u679c\uff1f</li> </ol> <pre><code>AAA\nBBB\n</code></pre> <ol> <li>\u5047\u5b9aprintB\u662fstatic synchronized\u65b9\u6cd5\u3002\u7ebf\u7a0b1\u901a\u8fc7\u5bf9\u8c61\u8c03\u7528printA\uff0c\u7ebf\u7a0b2\u901a\u8fc7\u5bf9\u8c61\u8c03\u7528printB\u3002\u8bf7\u95ee\u6253\u5370\u7ed3\u679c\uff1f\uff08\u96be\uff09</li> </ol> <pre><code>BBB\nAAA\n</code></pre> <p>\u89e3\u91ca\uff1a\u7ebf\u7a0b1\u83b7\u53d6\u7684\u9501\u6765\u81ea<code>Class</code>\u5bf9\u8c61\uff0c\u7ebf\u7a0b2\u83b7\u53d6\u7684\u9501\u6765\u81ea<code>this</code>\u5bf9\u8c61\u3002\u6240\u4ee5\u4e24\u4e2a\u7ebf\u7a0b\u5e76\u6ca1\u6709\u53d1\u9001\u7ade\u4e89\u3002</p> <ol> <li>\u5047\u5b9aprintA\u662fstatic synchronized\u65b9\u6cd5\uff0cprintB\u662f\u666e\u901a\u540c\u6b65\u65b9\u6cd5\u3002\u6709\u4e24\u4e2a\u624b\u673a\u5bf9\u8c61\u3002\u7ebf\u7a0b1\u901a\u8fc7\u624b\u673a1\u8c03\u7528printA\uff0c\u7ebf\u7a0b2\u901a\u8fc7\u624b\u673a2\u8c03\u7528printB\u3002\u8bf7\u95ee\u6253\u5370\u7ed3\u679c\u3002</li> </ol> <pre><code>BBB\nAAA\n</code></pre> <p>\u89e3\u91ca\uff1a\u540c\u4e0a\uff0c\u4e24\u6761\u7ebf\u7a0b\u83b7\u53d6\u7684\u4e0d\u662f\u540c\u4e00\u628a\u9501\u3002</p>"},{"location":"Java/synchronized%E5%85%AB%E9%94%81%E6%A1%88%E4%BE%8B/#_2","title":"\u603b\u7ed3","text":"<p>\u4ee5\u4e0a\u6848\u4f8b\u4e3b\u8981\u8bf4\u660e\u4e86<code>synchronized</code>\u4fee\u9970\u7684\u666e\u901a\u65b9\u6cd5\u7b49\u4ef7\u4e8e<code>synchronized</code>\u4fee\u9970\u65b9\u6cd5\u4e2d\u7684\u6240\u6709\u4ee3\u7801\uff0c\u5e76\u4e14\u901a\u8fc7this\u5bf9\u8c61\u83b7\u53d6\u9501\uff1b\u800c<code>synchronized</code>\u4fee\u9970\u7684\u9759\u6001\u65b9\u6cd5\u7b49\u4ef7\u4e8e<code>synchronized</code>\u4fee\u9970\u65b9\u6cd5\u4e2d\u7684\u6240\u6709\u4ee3\u7801\uff0c\u5e76\u4e14\u901a\u8fc7\u7c7b\u7684Class\u5bf9\u8c61\u83b7\u53d6\u9501\u3002</p>"},{"location":"Java/%E4%B9%90%E8%A7%82%E9%94%81%E2%80%94%E2%80%94CAS/","title":"\u4e50\u89c2\u9501\u2014\u2014CAS","text":"<p>[toc]</p>"},{"location":"Java/%E4%B9%90%E8%A7%82%E9%94%81%E2%80%94%E2%80%94CAS/#_1","title":"\u6709\u4ec0\u4e48\u7528","text":"<p>\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e0b\uff0c\u5bf9\u5171\u4eab\u8d44\u6e90\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u3002</p> <p>\u56e0\u4e3a\u5b83\u6ca1\u4f7f\u7528\u9501\uff0c\u6240\u4ee5\u51cf\u5c11\u4e86\u7ebf\u7a0b\u5207\u6362\u7684\u5f00\u9500\uff0c\u5728\u7ade\u4e89\u4e0d\u6fc0\u70c8\u7684\u60c5\u51b5\u4e0b\u6548\u7387\u8f83\u9ad8\u3002</p> <p>\u603b\u7ed3\uff1aCAS\u673a\u5236\u662f\u4e00\u79cd\u6570\u636e\u66f4\u65b0\u65b9\u5f0f\u3002\u5b83\u662f\u539f\u5b50\u64cd\u4f5c\u3002\u64cd\u4f5c\u8fc7\u7a0b\u662f\u6bd4\u8f83+\u4ea4\u6362\u3002</p>"},{"location":"Java/%E4%B9%90%E8%A7%82%E9%94%81%E2%80%94%E2%80%94CAS/#_2","title":"\u573a\u666f\u5206\u6790","text":"<p>\u5047\u5b9a\u6211\u4eec\u6709\u4e00\u4e2a\u8d44\u6e90\u5bf9\u8c61<code>obj</code>\uff0c<code>obj</code>\u5bf9\u8c61\u4e2d\u6709\u4e00\u4e2a\u72b6\u6001\u503c<code>state</code>\u3002\u5f53<code>state=0</code>\u65f6\uff0c\u8868\u793a\u8d44\u6e90\u7a7a\u95f2\uff1b\u5f53<code>state=1</code>\u65f6\uff0c\u8868\u793a\u8d44\u6e90\u6682\u65f6\u4e0d\u53ef\u7528\u3002</p> <p>\u4e00\u6761\u7ebf\u7a0b\u5728\u4f7f\u7528\u8d44\u6e90\u65f6\uff0c\u9700\u8981\u5148\u67e5\u770b\u8d44\u6e90\u662f\u5426\u53ef\u7528\uff0c\u53ea\u6709<code>state=0</code>\u65f6\u624d\u80fd\u4f7f\u7528\u8d44\u6e90\uff1b\u5f53\u4f7f\u7528\u5b8c\u8d44\u6e90\u65f6\uff0c\u5c06\u91cd\u7f6e<code>state=0</code>\u3002</p> <p>\u4e3a\u4e86\u5b9e\u73b0\u4e0a\u8ff0\u64cd\u4f5c\uff0c\u6211\u4eec\u6709\u4e24\u79cd\u5b9e\u73b0\u65b9\u5f0f\uff1a</p> <ul> <li> <p>\u6709\u9501\u7f16\u7a0b\uff08\u60b2\u89c2\u9501\uff09\uff1a\u7ed9\u8d44\u6e90\u4e0a\u4e00\u628a\u9501\uff0c\u67d0\u4e00\u7ebf\u7a0b\u9700\u8981\u4f7f\u7528\u8d44\u6e90\u65f6\uff0c\u5148\u83b7\u53d6\u8fd9\u628a\u9501\u3002\u5982\u679c\u83b7\u53d6\u6210\u529f\uff0c\u5c31\u80fd\u4f7f\u7528\u8d44\u6e90\uff1b\u5982\u679c\u83b7\u53d6\u5931\u8d25\uff0c\u5219\u8be5\u7ebf\u7a0b\u963b\u585e\u5728\u6b64\u5904\u3002\u5f53\u67d0\u4e00\u4e2a\u7ebf\u7a0b\u4f7f\u7528\u5b8c\u8d44\u6e90\u540e\uff0c\u91ca\u653e\u9501\u5e76\u5524\u9192\u5176\u4ed6\u7ebf\u7a0b\u3002</p> </li> <li> <p>\u65e0\u9501\u7f16\u7a0b\uff08\u4e50\u89c2\u9501\uff09\uff1a\u67d0\u4e00\u7ebf\u7a0b\u9700\u8981\u4f7f\u7528\u8d44\u6e90\u65f6\uff0c\u901a\u8fc7<code>CAS(Compare And Swap)</code>\uff0c\u4e5f\u5373\u6bd4\u8f83<code>obj</code>\u5bf9\u8c61\u7684<code>state</code>\u503c\u662f\u5426\u4e0e\u76ee\u6807\u503c<code>0</code>\u76f8\u7b49\uff0c\u5982\u679c\u76f8\u7b49\uff0c\u5219\u8bbe\u7f6e<code>state=1</code>\uff1b\u5982\u679c\u4e0d\u76f8\u540c\uff0c\u5219\u81ea\u65cb\u4e00\u6b21\u540e\u91cd\u65b0\u6bd4\u8f83\u3002\u901a\u5e38\u4f1a\u8bbe\u5b9a\u4e00\u4e2a\u81ea\u65cb\u6b21\u6570\uff0c\u9632\u6b62\u4e00\u76f4\u81ea\u65cb\u5bfc\u81f4\u6b7b\u9501\u3002</p> </li> </ul> <p>\u6bd4\u8f83+\u8bbe\u7f6e<code>state</code>\u8fd9\u4e24\u6b65\u662f\u539f\u5b50\u64cd\u4f5c\uff01</p> <p>\u6709\u9501\u7f16\u7a0b\u6848\u4f8b\uff1a\u5b9e\u73b0\u81ea\u589e\uff08\u8fd0\u884c\u65f6\u957f\uff1a13011ms\uff09</p> <p><code>java   public class Main {       static int num = 0;       public static void main(String[] args) {           int max = 100000000;           Thread t1 = new Thread(() -&gt; {               for (int i = 0; i &lt; max; i++) {                   synchronized (Main.class) {                       num++;                   }               }           });           Thread t2 = new Thread(() -&gt; {               for (int i = 0; i &lt; max; i++) {                   synchronized (Main.class) {                       num++;                   }               }           });           long start = System.currentTimeMillis();           t1.start();           t2.start();           try {               t1.join();               t2.join();           } catch (InterruptedException e) {               throw new RuntimeException(e);           } finally {               long end = System.currentTimeMillis();               System.out.println(\"\u8fd0\u884c\u65f6\u957f: \" + (end - start) + \"ms.\");               System.out.println(\"num=\" + num);           }       }   }</code></p> <p>\u65e0\u9501\u7f16\u7a0b\u6848\u4f8b\uff08\u8fd0\u884c\u65f6\u957f\uff1a2097ms\uff09</p> <p>```java   import java.util.concurrent.atomic.AtomicInteger;</p> <p>public class Main {       static AtomicInteger num = new AtomicInteger(0);       public static void main(String[] args) {           int max = 100000000;           Thread t1 = new Thread(() -&gt; {               for (int i = 0; i &lt; max; i++) {                   num.incrementAndGet();               }           });           Thread t2 = new Thread(() -&gt; {               for (int i = 0; i &lt; max; i++) {                   num.incrementAndGet();               }           });           long start = System.currentTimeMillis();           t1.start();           t2.start();           try {               t1.join();               t2.join();           } catch (InterruptedException e) {               throw new RuntimeException(e);           } finally {               long end = System.currentTimeMillis();               System.out.println(\"\u8fd0\u884c\u65f6\u957f: \" + (end - start) + \"ms.\");               System.out.println(\"num=\" + num);           }       }   }   ```</p> <p>\u4e0d\u505a\u540c\u6b65\u64cd\u4f5c\uff08\u8fd0\u884c\u65f6\u957f\uff1a16ms\uff09</p> <p>\u4e0d\u7ba1\u5bf9\u4e0d\u5bf9\uff0c\u4f60\u5c31\u8bf4\u5feb\u4e0d\u5feb\u5427:dog:</p> <p><code>java   public class Main {       static int num = 0;       public static void main(String[] args) {           int max = 100000000;           Thread t1 = new Thread(() -&gt; {               for (int i = 0; i &lt; max; i++) {                   num++;               }           });           Thread t2 = new Thread(() -&gt; {               for (int i = 0; i &lt; max; i++) {                   num++;               }           });           long start = System.currentTimeMillis();           t1.start();           t2.start();           try {               t1.join();               t2.join();           } catch (InterruptedException e) {               throw new RuntimeException(e);           } finally {               long end = System.currentTimeMillis();               System.out.println(\"\u8fd0\u884c\u65f6\u957f: \" + (end - start) + \"ms.\");               System.out.println(\"num=\" + num);           }       }   }</code></p>"},{"location":"Java/%E4%B9%90%E8%A7%82%E9%94%81%E2%80%94%E2%80%94CAS/#cas_1","title":"CAS\u7f3a\u70b9","text":"<ol> <li>\u6ca1\u6709\u89e3\u51b3ABA\u95ee\u9898\u3002</li> <li>\u53ea\u80fd\u4fdd\u8bc1\u67d0\u4e00\u884c\u4ee3\u7801\u662f\u539f\u5b50\u64cd\u4f5c\uff0c\u4e0d\u80fd\u4fdd\u8bc1\u67d0\u4e2a\u4ee3\u7801\u5757\u662f\u539f\u5b50\u64cd\u4f5c\uff0c\u4e5f\u5373\u8303\u56f4\u4e0d\u53ef\u7075\u6d3b\u63a7\u5236\u3002</li> <li>\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e\u9002\u5f53\u7684\u81ea\u65cb\u6b21\u6570\uff0c\u53ef\u80fd\u4f1a\u5360\u7528\u5927\u91cf\u8d44\u6e90\u3002</li> </ol>"},{"location":"Java/%E4%B9%90%E8%A7%82%E9%94%81%E2%80%94%E2%80%94CAS/#aba","title":"\u89e3\u51b3ABA\u95ee\u9898\uff1a\u7248\u672c\u53f7\u673a\u5236","text":"<p>ABA\u95ee\u9898</p>"},{"location":"Java/%E4%BB%A3%E7%90%86/","title":"JAVA\u4ee3\u7406","text":"<p>[toc]</p>"},{"location":"Java/%E4%BB%A3%E7%90%86/#_1","title":"\u4ec0\u4e48\u662f\u4ee3\u7406","text":"<p>\u5047\u5b9a\u6211\u60f3\u4e70\u706b\u8f66\u7968\uff0c\u6211\u53ef\u4ee5\u53bb\u706b\u8f66\u7ad9\u4e70\u7968\uff08\u6392\u961f1\u5c0f\u65f6\uff0c\u82b1\u8d39100\u5143\uff09\uff0c\u4e5f\u53ef\u4ee5\u53bb\u627e\u9ec4\u725b\u4e70\u7968\uff08\u9ec4\u725b\u5e2e\u5fd9\u6392\u961f\uff0c\u4f46\u8981\u591a\u652f\u4ed8100\u5143\u624b\u7eed\u8d39\uff09\u3002</p> <p>\u9ec4\u725b\u88ab\u79f0\u4e3a\u4ee3\u7406\uff08\u540d\u8bcd\uff09\u3002\u9ec4\u725b\u4e0d\u4ec5\u53ef\u4ee5\u4e70\u706b\u8f66\u7968\uff0c\u8fd8\u80fd\u4e70\u5ba2\u8f66\u7968\u3002</p>"},{"location":"Java/%E4%BB%A3%E7%90%86/#_2","title":"\u9759\u6001\u4ee3\u7406","text":"<p>\u9759\u6001\u4ee3\u7406\u662f\u6307\u63d0\u524d\u7f16\u5199\u597d\u4ee3\u7406\u7c7b\u7684\u4ee3\u7801\uff0c\u7136\u540e\u4f7f\u7528\u4ee3\u7406\u5bf9\u8c61\u4ee3\u66ff\u76ee\u6807\u5bf9\u8c61\u3002</p> <p>\u4e0b\u9762\u662fJava\u4ee3\u7801\u7684\u5b9e\u73b0\uff1a</p> <pre><code>package com.example.databasedemo.Test;\n\ninterface IStation {\n    void buyTicket();\n}\n\nclass TrainStation implements IStation {\n    @Override\n    public void buyTicket() {\n        System.out.println(\"\u6b63\u5728\u6392\u961f...\");\n        System.out.println(\"\u706b\u8f66\u7968\u8d2d\u7968\u6210\u529f\uff0c\u82b1\u8d39100\u5143\");\n    }\n}\n\nclass BusStation implements IStation {\n    @Override\n    public void buyTicket() {\n        System.out.println(\"\u6b63\u5728\u6392\u961f...\");\n        System.out.println(\"\u5ba2\u8f66\u7968\u8d2d\u4e70\u6210\u529f\uff0c\u82b1\u8d3950\u5143\");\n    }\n}\n\nclass StationProxy implements IStation {\n    private final IStation iStation;\n    public StationProxy(IStation iStation) {\n        this.iStation = iStation;\n    }\n    public void buyTicket() {\n        System.out.println(\"\u9ec4\u725b\u5e2e\u4f60\u63d2\u961f\");\n        iStation.buyTicket();\n        System.out.println(\"\u989d\u5916\u652f\u4ed8\u9ec4\u725b100\u5143\u624b\u7eed\u8d39\");\n    }\n}\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class Main {\n    public static void main(String[] args) {\n        // \u4ee3\u7406\u5bf9\u8c61\u5e2e\u5fd9\u4e70\u706b\u8f66\u7968\n        StationProxy stationProxy = new StationProxy(new TrainStation());\n        stationProxy.buyTicket();\n\n        // \u4ee3\u7406\u5bf9\u5e2e\u5fd9\u4e70\u5ba2\u8f66\u7968\n        stationProxy = new StationProxy(new BusStation());\n        stationProxy.buyTicket();\n    }\n}\n</code></pre>"},{"location":"Java/%E4%BB%A3%E7%90%86/#_3","title":"\u52a8\u6001\u4ee3\u7406","text":""},{"location":"Java/%E4%BB%A3%E7%90%86/#jdk","title":"JDK\u52a8\u6001\u4ee3\u7406","text":"<p>JDK\u52a8\u6001\u4ee3\u7406\u662f\u6307\u5229\u7528Java\u7684\u53cd\u5c04\u673a\u5236\uff0c\u5b9e\u73b0\u5728\u8fd0\u884c\u72b6\u6001\u65f6\u52a8\u6001\u751f\u6210\u4ee3\u7406\u7c7b\u548c\u4ee3\u7406\u5bf9\u8c61\uff0c\u5b9e\u73b0\u5bf9\u76ee\u6807\u5bf9\u8c61\u7684\u4ee3\u7406\u3002</p> <p>\u4f7f\u7528\u65f6\uff0c\u8ba9\u52a8\u6001\u4ee3\u7406\u7c7b<code>DynamicProxy</code>\u5b9e\u73b0<code>InvocationHandler</code>\u63a5\u53e3\u3002</p> <pre><code>import java.lang.reflect.InvocationHandler;\nimport java.lang.reflect.Method;\nimport java.lang.reflect.Proxy;\n\ninterface IStation {\n    void buyTicket();\n}\n\nclass TrainStation implements IStation {\n    @Override\n    public void buyTicket() {\n        System.out.println(\"\u6b63\u5728\u6392\u961f...\");\n        System.out.println(\"\u706b\u8f66\u7968\u8d2d\u7968\u6210\u529f\uff0c\u82b1\u8d39100\u5143\");\n    }\n}\n\nclass BusStation implements IStation {\n    @Override\n    public void buyTicket() {\n        System.out.println(\"\u6b63\u5728\u6392\u961f...\");\n        System.out.println(\"\u5ba2\u8f66\u7968\u8d2d\u4e70\u6210\u529f\uff0c\u82b1\u8d3950\u5143\");\n    }\n}\n\n// \u4f7f\u7528\u65f6\u76f4\u63a5\u7167\u6284\u52a8\u6001\u4ee3\u7406\u7c7b\nclass DynamicProxy implements InvocationHandler {\n    private Object targetObject;\n\n    /**\n     * \u4f20\u5165\u76ee\u6807\u7c7b\u5bf9\u8c61\uff0c\u751f\u6210\u4ee3\u7406\u7c7b\u5bf9\u8c61\n     * @param targetObject \u76ee\u6807\u7c7b\u5bf9\u8c61\n     * @return \u4ee3\u7406\u7c7b\u5bf9\u8c61\n     */\n    public Object getInstance(Object targetObject) {\n        this.targetObject = targetObject;\n        return Proxy.newProxyInstance(targetObject.getClass().getClassLoader(),\n                targetObject.getClass().getInterfaces(), this);\n    }\n\n    @Override\n    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n        // invoke\u65b9\u6cd5\u524d\u540e\u53ef\u4ee5\u81ea\u5b9a\u4e49\u524d\u7f6e/\u540e\u7f6e\u64cd\u4f5c\n        System.out.println(\"\u9ec4\u725b\u5e2e\u4f60\u6392\u961f\");\n        Object invoke = method.invoke(targetObject, args);\n        System.out.println(\"\u989d\u5916\u652f\u4ed8\u9ec4\u725b100\u5143\");\n        return invoke;\n    }\n}\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class Main {\n    public static void main(String[] args) {\n        // \u83b7\u53d6\u52a8\u6001\u4ee3\u7406\u5bf9\u8c61\uff0c\u5fc5\u987b\u7528\u63a5\u53e3\u5f15\u7528\u6307\u5411\u4ee3\u7406\u5bf9\u8c61\uff01\n        IStation station = (IStation) new DynamicProxy().getInstance(new BusStation());\n        // BusStation station = (BusStation) new DynamicProxy().getInstance(new BusStation()); \u4f1a\u62a5\u9519\n\n        // \u6267\u884c\u4ee3\u7406\u5bf9\u8c61\u7684\u65b9\u6cd5\n        station.buyTicket();\n    }\n}\n</code></pre>"},{"location":"Java/%E4%BB%A3%E7%90%86/#cglib","title":"cglib\u52a8\u6001\u4ee3\u7406","text":""},{"location":"Java/%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6/","title":"\u53cc\u4eb2\u59d4\u6d3e\u673a\u5236","text":"<p>[toc]</p>"},{"location":"Java/%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6/#_2","title":"\u7c7b\u52a0\u8f7d\u5668\u662f\u4ec0\u4e48","text":"<p>\u7c7b\u52a0\u8f7d\u5668\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5c06\u5b57\u8282\u7801\u52a0\u8f7d\u4e3aJVM\u4e2d\u7684\u4e00\u4e2a\u5bf9\u8c61\u3002\uff08\u6ce8\uff1a\u5b57\u8282\u7801\u662fJava\u8ba4\u8bc6\u7684\u4ee3\u7801\uff0c\u901a\u5e38\u5b58\u653e\u5728<code>.class</code>\u6587\u4ef6\u4e2d\uff09</p> <p>\u7c7b\u52a0\u8f7d\u5668\u67093\u79cd\uff1a</p> <ol> <li> <p>\u6839\u7c7b\u52a0\u8f7d\u5668\uff08bootstrap classloader\uff09\uff1a\u8d1f\u8d23\u52a0\u8f7d\u6838\u5fc3\u7684\u7c7b\uff0c\u6bd4\u5982<code>java.lang.*</code>\u4e0b\u7684jar\u5305\u3002</p> </li> <li> <p>\u6269\u5c55\u7c7b\u52a0\u8f7d\u5668\uff08ext classloader\uff09\uff1a\u52a0\u8f7d<code>JAVAHOME</code>\u4e0b<code>jre/lib/ext</code>\u76ee\u5f55\u4e0b\u7684jar\u5305\u3002</p> </li> <li> <p>\u5e94\u7528\u7c7b\u52a0\u8f7d\u5668\uff08AppClassLoader\uff09\uff1a\u52a0\u8f7d<code>classpath</code>\u4e0b\u7684\u7c7b\u3002</p> </li> </ol> <p>\u8865\u5145\uff1a<code>classpath</code>\u7528\u4e8e\u6307\u5b9aJVM\u8fd0\u884c\u65f6\u641c\u7d22\u6587\u4ef6\u7684\u4f4d\u7f6e\uff0c\u53ef\u4ee5\u81ea\u5df1\u5b9a\u4e49\uff01</p> <p>\u9664\u6b64\u4ee5\u5916\uff0c\u8fd8\u6709\u81ea\u5b9a\u4e49\u7c7b\u52a0\u8f7d\u5668\u3002\u5b83\u4eec\u4e4b\u95f4\u7684\u7ee7\u627f\u5173\u7cfb\u5982\u4e0b\uff1a</p> <pre><code>\u6839\u7c7b\u52a0\u8f7d\u5668\n    \u2191\n    |\n    |\n\u6269\u5c55\u7c7b\u52a0\u8f7d\u5668\n    \u2191\n    |\n    |\n\u5e94\u7528\u7c7b\u52a0\u8f7d\u5668\n    \u2191\n    |\n    |\n\u81ea\u5b9a\u4e49\u7c7b\u52a0\u8f7d\u5668\n</code></pre>"},{"location":"Java/%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6/#_3","title":"\u4ec0\u4e48\u662f\u53cc\u4eb2\u59d4\u6d3e\u6a21\u5f0f","text":"<ol> <li> <p>\u5982\u679c\u4e00\u4e2a\u7c7b\u52a0\u8f7d\u5668\u6536\u5230\u7c7b\u52a0\u8f7d\u8bf7\u6c42\u540e\uff0c\u5b83\u4f1a\u9996\u5148\u59d4\u6258\u7236\u7c7b\u7684\u7c7b\u52a0\u8f7d\u5668\u53bb\u52a0\u8f7d\u7c7b\uff0c\u4f9d\u6b21\u9012\u5f52\u3002</p> </li> <li> <p>\u5982\u679c\u7236\u7c7b\u6ca1\u6cd5\u5b8c\u6210\u52a0\u8f7d\uff0c\u518d\u7531\u81ea\u5df1\u5b9e\u73b0\u7c7b\u52a0\u8f7d\u3002</p> </li> </ol> <p>\u4e2a\u4eba\u8ba4\u4e3a\uff0c\u7236\u59d4\u6d3e\u6a21\u5f0f\u6216\u8bb8\u66f4\u80fd\u63cf\u8ff0\u8fd9\u79cd\u60c5\u51b5\u3002\u56e0\u4e3a\u7ee7\u627f\u5173\u7cfb\u4e2d\uff0c\u4e0d\u5b58\u5728<code>FatherClassLoader</code>\u548c<code>MatherClassLoader</code>\u3002</p>"},{"location":"Java/%E5%8F%8C%E4%BA%B2%E5%A7%94%E6%B4%BE%E6%9C%BA%E5%88%B6/#_4","title":"\u53cc\u4eb2\u59d4\u6d3e\u7684\u597d\u5904","text":"<ol> <li>\u9632\u6b62\u6838\u5fc3\u4ee3\u7801API\u88ab\u7be1\u6539\uff1a\u5982\u679c\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u7c7b\u52a0\u8f7d\u5668\u52a0\u8f7d\u6838\u5fc3\u4ee3\u7801\uff0c\u5219\u4f1a\u51fa\u73b0\u5404\u79cd\u9690\u60a3\u3002</li> <li>\u907f\u514d\u7c7b\u88ab\u91cd\u590d\u52a0\u8f7d\u3002</li> </ol>"},{"location":"Java/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3HashMap%E5%AD%98%E5%8F%96%E8%BF%87%E7%A8%8B/","title":"\u6df1\u5165\u7406\u89e3HashMap\u5b58\u53d6\u8fc7\u7a0b","text":"<p>\u603b\u7ed3\uff1aremove\u7684\u5224\u65ad\u4f9d\u636e\uff1a\u5148\u7b97\u51fa\u5143\u7d20\u7684hash\u503c\uff0c\u518d\u53bb\u54c8\u5e0c\u6876\u5bf9\u5e94\u7684\u4e0b\u8868\u67e5\u627e\u503c\u3002\u5982\u679c</p> <p>\u6848\u4f8b\u4e00\uff1a</p> <pre><code>import java.util.HashSet;\n\npublic class Main {\n    public static void main(String[] args) {\n        HashSet&lt;Person&gt; set = new HashSet&lt;&gt;();\n        Person p1 = new Person(1);\n        Person p2 = new Person(2);\n        set.add(p1);\n        set.add(p2);\n        System.out.println(set);  // 1,2\n\n        p1.setId(11);\n        set.remove(p1);\n        System.out.println(set);  // 11,2\n\n        Person p3 = new Person(3);\n        set.add(p3);\n        System.out.println(set);  // 11,2,3\n\n        Person p4 = new Person(11);\n        set.add(p4);\n        System.out.println(set);  // 11,2,3,11\n\n        Person p5 = new Person(11);  // 11,2,3,11\n        set.add(p5);\n        System.out.println(set);\n\n        Person p6 = new Person(1);  // 11,1,2,3,11\n        set.add(p6);\n        System.out.println(set);\n    }\n}\n\nclass Person {\n    private int id;\n\n    public Person(int id) {\n        this.id = id;\n    }\n\n    public int getId() {\n        return this.id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) {\n            return true;\n        }\n        if (!(o instanceof Person)) {\n            return false;\n        }\n\n        Person person = (Person) o;\n        return person.getId() == this.id;\n    }\n\n    @Override\n    public int hashCode() {\n        return id;\n    }\n\n    @Override\n    public String toString() {\n        return \"Person{\" +\n                \"id=\" + id +\n                '}';\n    }\n}\n</code></pre> <pre><code>import java.util.HashSet;\n\npublic class Main {\n    public static void main(String[] args) {\n        HashSet&lt;Person&gt; set = new HashSet&lt;&gt;();\n        Person p1 = new Person(1);\n        Person p2 = new Person(2);\n        set.add(p1);\n        set.add(p2);\n        System.out.println(set);  // 1,2\n\n        p1.setId(17);  // \u8fd9\u91cc\u53d1\u751f\u4e86\u53d8\u5316\n        set.remove(p1);\n        System.out.println(set);  // 17,2\n\n        Person p3 = new Person(3);\n        set.add(p3);\n        System.out.println(set);  // 17,2,3\n\n        Person p4 = new Person(11);\n        set.add(p4);\n        System.out.println(set);  // 17,2,3,11\n    }\n}\n\nclass Person {\n    private int id;\n\n    public Person(int id) {\n        this.id = id;\n    }\n\n    public int getId() {\n        return this.id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) {\n            return true;\n        }\n        if (!(o instanceof Person)) {\n            return false;\n        }\n\n        Person person = (Person) o;\n        return person.getId() == this.id;\n    }\n\n    @Overrideimport java.util.HashSet;\n\npublic class Main {\n    public static void main(String[] args) {\n        HashSet&lt;Person&gt; set = new HashSet&lt;&gt;();\n        Person p1 = new Person(1);\n        Person p2 = new Person(2);\n        set.add(p1);\n        set.add(p2);\n        System.out.println(set);  // 1,2\n\n        p1.setId(17);\n        Person p3 = new Person();\n        set.add(p3);\n        System.out.println(set);  // 2\n    }\n}\n\nclass Person {\n    private int id;\n\n    public Person(int id) {\n        this.id = id;\n    }\n\n    public int getId() {\n        return this.id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) {\n            return true;\n        }\n        if (!(o instanceof Person)) {\n            return false;\n        }\n\n        Person person = (Person) o;\n        return person.getId() == this.id;\n    }\n\n    @Override\n    public int hashCode() {\n        return id;\n    }\n\n    @Override\n    public String toString() {\n        return \"Person{\" +\n                \"id=\" + id +\n                '}';\n    }\n}\n    public int hashCode() {\n        return id % 16;  // \u8fd9\u91cc\u53d1\u751f\u4e86\u53d8\u5316\n    }\n\n    @Override\n    public String toString() {\n        return \"Person{\" +\n                \"id=\" + id +\n                '}';\n    }\n}\n</code></pre> <pre><code></code></pre>"},{"location":"Java/%E7%BA%BF%E7%A8%8B%E6%B1%A0/","title":"\u7ebf\u7a0b\u6c60","text":"<p>[toc]</p>"},{"location":"Java/%E7%BA%BF%E7%A8%8B%E6%B1%A0/#_2","title":"\u6838\u5fc3\u53c2\u6570","text":"<ul> <li>\u6838\u5fc3\u7ebf\u7a0b\u6570</li> <li>\u6700\u5927\u7ebf\u7a0b\u6570\uff1a</li> <li>\u963b\u585e\u961f\u5217\uff1a</li> <li>\u62d2\u7edd\u7b56\u7565</li> <li><code>AbortPolicy</code>\uff1a\u4e22\u5f03\u4efb\u52a1\u5e76\u629b\u51fa<code>RejectedExecutionException</code>\u5f02\u5e38\u3002</li> <li><code>DiscardPolicy</code>\uff1a\u4e22\u5f03\u4efb\u52a1\uff0c\u4f46\u662f\u4e0d\u629b\u51fa\u5f02\u5e38\u3002\u53ef\u80fd\u5bfc\u81f4\u65e0\u6cd5\u53d1\u73b0\u7cfb\u7edf\u7684\u5f02\u5e38\u72b6\u6001\u3002</li> <li><code>DiscardOldestPolicy</code>\uff1a\u4e22\u5f03\u961f\u5217\u6700\u524d\u9762\u7684\u4efb\u52a1\uff0c\u7136\u540e\u91cd\u65b0\u63d0\u4ea4\u88ab\u62d2\u7edd\u7684\u4efb\u52a1\u3002</li> <li><code>CallerRunsPolicy</code>\uff1a\u7531\u8c03\u7528\u7ebf\u7a0b\u5904\u7406\u8be5\u4efb\u52a1\u3002</li> </ul>"},{"location":"Java/%E7%BA%BF%E7%A8%8B%E6%B1%A0/#_3","title":"\u5de5\u4f5c\u6d41\u7a0b","text":"<ol> <li>\u7ebf\u7a0b\u6c60\u542f\u52a8\uff0c\u521b\u5efa\u6838\u5fc3\u7ebf\u7a0b\u3002</li> <li>\u4efb\u52a1\u8fc7\u591a\uff0c\u5c06\u4efb\u52a1\u653e\u5728\u963b\u585e\u961f\u5217\u4e2d\u3002</li> <li>\u4efb\u52a1\u8fd8\u662f\u591a\uff0c\u521b\u5efa\u65b0\u7684\u7ebf\u7a0b\u5904\u7406\u4efb\u52a1\uff08\u76f4\u5230\u521b\u5efa\u5230\u6700\u5927\u7ebf\u7a0b\u6570\uff09\u3002</li> <li>\u4efb\u52a1\u4ecd\u7136\u591a\uff0c\u91c7\u7528\u9002\u5f53\u7684\u62d2\u7edd\u7b56\u7565\u3002</li> <li>\u4efb\u52a1\u51cf\u5c11\u540e\uff0c\u975e\u6838\u5fc3\u7ebf\u7a0b\u95f2\u7f6ekeep-alive\u65f6\u95f4\u540e\u4f1a\u88ab\u9500\u6bc1\u3002</li> </ol>"},{"location":"Java/%E7%BA%BF%E7%A8%8B%E6%B1%A0/#_4","title":"\u6838\u5fc3\u7ebf\u7a0b\u5982\u4f55\u201c\u4fdd\u6d3b\u201d","text":"<p>\u57fa\u4e8e\u963b\u585e\u961f\u5217<code>BlockingQueue</code>\u3002</p> <p>\u6838\u5fc3\u7ebf\u7a0b\u4ece\u963b\u585e\u961f\u5217\u4e2d\u53d6\u51fa\u6570\u636e\u65f6\uff0c\u8c03\u7528<code>workerQueue.take()</code>\uff0c\u5f53\u963b\u585e\u961f\u5217\u4e3a\u7a7a\u65f6\uff0c\u6838\u5fc3\u7ebf\u7a0b\u963b\u585e\uff1b\u5f53\u963b\u585e\u961f\u5217\u6709\u6570\u636e\u65f6\uff0c\u5524\u9192\u6838\u5fc3\u7ebf\u7a0b\uff0c\u4ece\u800c\u9632\u6b62\u88ab\u9500\u6bc1\u3002</p> <p>\u5f53\u6838\u5fc3\u7ebf\u7a0b\u6267\u884c\u7528\u6237\u5199\u7684\u4ee3\u7801\u65f6\u96be\u514d\u4f1a\u9047\u5230\u7528\u6237\u4ee3\u7801\u629b\u51fa\u5f02\u5e38\u7684\u60c5\u51b5\u3002\u6b64\u65f6\u6838\u5fc3\u7ebf\u7a0b\u9700\u8981\u505c\u6b62\u6267\u884c\uff0c\u5e76\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7ebf\u7a0b\u7528\u4e8e\u66ff\u4ee3\u6838\u5fc3\u7ebf\u7a0b\u3002</p>"},{"location":"Java/%E9%87%8D%E5%86%99equals%E5%92%8Chashcode/","title":"\u91cd\u5199equals\u548chashcode","text":"<p>[toc]</p>"},{"location":"Java/%E9%87%8D%E5%86%99equals%E5%92%8Chashcode/#_1","title":"\u5982\u4f55\u91cd\u5199","text":"<p>\u5728IDEA\u4e2d\uff0c\u53ef\u4ee5\u81ea\u52a8\u751f\u6210equals\u65b9\u6cd5\u548chashcode\u65b9\u6cd5\u3002</p>"},{"location":"Java/%E9%87%8D%E5%86%99equals%E5%92%8Chashcode/#equals","title":"\u4e3a\u4ec0\u4e48\u8981\u91cd\u5199equals\u65b9\u6cd5","text":"<p>\u5f53\u81ea\u5b9a\u4e49\u5bf9\u8c61\u540e\uff0cJava\u5224\u65ad\u4e24\u4e2a\u5bf9\u8c61\u662f\u5426\u76f8\u540c\u7684\u4f9d\u636e\u662f\uff1a\u8fd9\u4e24\u4e2a\u5f15\u7528\u662f\u5426\u6307\u5411\u5185\u5b58\u7a7a\u95f4\u4e2d\u7684\u540c\u4e00\u4e2a\u5bf9\u8c61\u3002</p> <p>\u91cd\u5199equals\u65b9\u6cd5\u53ef\u4ee5\u81ea\u5b9a\u4e49\u89c4\u5219\uff0c\u7528\u4e8e\u6bd4\u8f83\u4e24\u4e2a\u5bf9\u8c61\u662f\u5426\u76f8\u7b49\u3002</p> <p>\u4e0b\u9762\u7684\u6848\u4f8b\u4e2d\uff0c\u6211\u4eec\u5e0c\u671bs1\u548cs2\u662f\u76f8\u7b49\u7684\uff0c\u56e0\u4e3a\u8fd9\u4e24\u4e2a\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\u503c\u90fd\u5206\u522b\u76f8\u7b49\u3002</p> <p>\u90a3\u4e48\u6b64\u65f6\u6211\u4eec\u9700\u8981\u91cd\u5199equals\u65b9\u6cd5\u3002</p> <pre><code>public class Student {\n    private String firstName;\n\n    private String lastName;\n\n    public Student(String firstName, String lastName) {\n        this.firstName = firstName;\n        this.lastName = lastName;\n    }\n}\n</code></pre> <pre><code>import java.util.Objects;\n\npublic class Main {\n    public static void main(String[] args) {\n        Student s1 = new Student(\"li\", \"xiaolong\");\n        Student s2 = new Student(\"li\", \"xiaolong\");\n        if (Objects.equals(s1, s2)) {\n            System.out.println(\"same!\");\n        } else {\n            System.out.println(\"not same~\");\n        }\n        // \u8f93\u51fa not same~\n    }\n}\n</code></pre> <p>\u4e0b\u9762\u662f\u91cd\u5199equals\u65b9\u6cd5\u540e\u7684\u60c5\u51b5\u3002\u5f53\u518d\u6b21\u6267\u884cMain\u65b9\u6cd5\uff0c\u53ef\u4ee5\u5f97\u51fa\u4e24\u4e2a\u5bf9\u8c61\u76f8\u7b49\u3002</p> <pre><code>public class Student {\n    private String firstName;\n\n    private String lastName;\n\n    public Student(String firstName, String lastName) {\n        this.firstName = firstName;\n        this.lastName = lastName;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n\n        Student student = (Student) o;\n\n        if (!Objects.equals(firstName, student.firstName)) return false;\n        return Objects.equals(lastName, student.lastName);\n    }\n}\n</code></pre>"},{"location":"Java/%E9%87%8D%E5%86%99equals%E5%92%8Chashcode/#hashcode","title":"\u91cd\u5199hashcode\u65b9\u6cd5","text":"<p>\u5f53\u6211\u4eec\u5c06\u5bf9\u8c61\u653e\u5165set/map\u4e4b\u7c7b\u7684\u5bb9\u5668\u65f6\uff0c\u4f1a\u5148\u8c03\u7528\u5bf9\u8c61\u7684hashcode\u65b9\u6cd5\uff0c\u5f97\u5230\u4e00\u4e2ahash\u503c\uff0c\u518d\u7b97\u51fa\u8be5\u5bf9\u8c61\u653e\u5728hash\u6876\u4e2d\u7684\u54ea\u4e2a\u4f4d\u7f6e\u3002</p> <p>\u5982\u679c\u6211\u4eec\u4e0d\u91cd\u5199hashcode\u65b9\u6cd5\uff0c\u5c31\u4f1a\u5bfc\u81f4\u4e24\u4e2a\u770b\u4e0a\u53bb\u4e00\u6837\u7684\u5bf9\u8c61\u653e\u5165\u4e0d\u540c\u7684\u54c8\u5e0c\u6876\u4e2d\u3002</p> <p>\u4e0b\u9762\u6848\u4f8b\u4e2d\uff0c\u7531\u4e8e\u6bcf\u4e2a\u5bf9\u8c61\u7ecf\u8fc7hash\u8fd0\u7b97\uff0c\u88ab\u6563\u5217\u5230\u4e0d\u540c\u7684\u4f4d\u7f6e\uff0c\u6ca1\u6709\u4ea7\u751fhash\u51b2\u7a81\uff0c\u8fd9\u6837\u4e5f\u4e0d\u4f1a\u89e6\u53d1equals\u51fd\u6570\u5224\u65ad\u4e24\u4e2a\u5143\u7d20\u662f\u5426\u76f8\u7b49\u3002\u56e0\u6b64\u5373\u4fbf\u91cd\u5199\u4e86equals\uff0c\u4e5f\u4f1a\u5bfc\u81f4\u4e24\u4e2a\u770b\u4e0a\u53bb\u76f8\u540c\u7684\u5143\u7d20\u90fd\u88ab\u653e\u5165set\u4e2d\u3002</p> <pre><code>public class Student {\n    private String firstName;\n\n    private String lastName;\n\n    public Student(String firstName, String lastName) {\n        this.firstName = firstName;\n        this.lastName = lastName;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n\n        Student student = (Student) o;\n\n        if (!Objects.equals(firstName, student.firstName)) return false;\n        return Objects.equals(lastName, student.lastName);\n    }\n}\n</code></pre> <pre><code>import java.util.HashSet;\nimport java.util.Set;\n\npublic class Main {\n    public static void main(String[] args) {\n        Set&lt;Student&gt; set = new HashSet&lt;&gt;();\n        for (int i = 0; i &lt; 100; i++) {\n            Student student = new Student(\"li\", \"xiaolong\");\n            set.add(student);\n        }\n        System.out.println(\"set\u4e2d\u4e0d\u91cd\u590d\u7684\u5143\u7d20\u4e2a\u6570\u4e3a\uff1a\" + set.size());  // 100\n    }\n}\n</code></pre> <p>\u518d\u770b\u770b\u4e0b\u9762\u7684\u4f8b\u5b50\u3002\u7531\u4e8e\u5143\u7d20\u4e2a\u6570\u975e\u5e38\u591a\uff0c\u56e0\u6b64\u4f1a\u4ea7\u751fhash\u51b2\u7a81\u3002\u4ea7\u751f\u51b2\u7a81\u540e\u4f1a\u89e6\u53d1equals\u51fd\u6570\uff0c\u56e0\u6b64set\u4e2d\u7684\u5143\u7d20\u5e76\u4e0d\u662f10000000\u3002</p> <pre><code>import java.util.HashSet;\nimport java.util.Set;\n\npublic class Main {\n    public static void main(String[] args) {\n        Set&lt;Student&gt; set = new HashSet&lt;&gt;();\n        for (int i = 0; i &lt; 10000000; i++) {\n            Student student = new Student(\"li\", \"xiaolong\");\n            set.add(student);\n        }\n        System.out.println(\"set\u4e2d\u4e0d\u91cd\u590d\u7684\u5143\u7d20\u4e2a\u6570\u4e3a\uff1a\" + set.size());  // 9976723\n    }\n}\n</code></pre> <p>\u5f53\u6211\u4eec\u91cd\u5199hashcode\u540e\uff0c\u5c31\u80fd\u8ba9\u770b\u4e0a\u53bb\u76f8\u7b49\u7684\u5143\u7d20\u88ab\u6563\u5217\u5230hash\u8868\u4e2d\u540c\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u8fdb\u800c\u51fa\u53d1equals\u51fd\u6570\u3002</p> <pre><code>import java.util.Objects;\n\npublic class Student {\n    private String firstName;\n\n    private String lastName;\n\n    public Student(String firstName, String lastName) {\n        this.firstName = firstName;\n        this.lastName = lastName;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (o == null || getClass() != o.getClass()) return false;\n\n        Student student = (Student) o;\n\n        if (!Objects.equals(firstName, student.firstName)) return false;\n        return Objects.equals(lastName, student.lastName);\n    }\n\n    @Override\n    public int hashCode() {\n        int result = firstName != null ? firstName.hashCode() : 0;\n        result = 31 * result + (lastName != null ? lastName.hashCode() : 0);\n        return result;\n    }\n}\n</code></pre> <pre><code>import java.util.HashSet;\nimport java.util.Set;\n\npublic class Main {\n    public static void main(String[] args) {\n        Set&lt;Student&gt; set = new HashSet&lt;&gt;();\n        for (int i = 0; i &lt; 10000000; i++) {\n            Student student = new Student(\"li\", \"xiaolong\");\n            set.add(student);\n        }\n        System.out.println(\"set\u4e2d\u4e0d\u91cd\u590d\u7684\u5143\u7d20\u4e2a\u6570\u4e3a\uff1a\" + set.size());  // 1\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/IDEA%E4%B8%ADhttp%E8%AF%B7%E6%B1%82%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/","title":"IDEA\u4e2dhttp\u8bf7\u6c42\u5de5\u5177\u7684\u4f7f\u7528","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/IDEA%E4%B8%ADhttp%E8%AF%B7%E6%B1%82%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#_1","title":"\u5199\u5728\u524d\u9762","text":"<p>\u5148\u8bf4\u8bf4\u6211\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528IDEA\u4e2d\u7684http\u8bf7\u6c42\u5de5\u5177\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u901a\u8fc7\u6d4f\u89c8\u5668\u53d1\u9001\u8bf7\u6c42\u3002</p> <p>\u6d4f\u89c8\u5668\u9ed8\u8ba4\u53d1\u9001get\u8bf7\u6c42\uff0c\u5f53\u6211\u4eec\u60f3\u53d1\u9001post\u8bf7\u6c42\u65f6\uff0c\u5c31\u9700\u8981\u4f7f\u7528\u7279\u5b9a\u7684http\u8bf7\u6c42\u5de5\u5177\u3002</p>"},{"location":"Java/SpringBoot/IDEA%E4%B8%ADhttp%E8%AF%B7%E6%B1%82%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/#_2","title":"\u4f7f\u7528\u65b9\u6cd5","text":"<p>IDEA\u4e2d\u968f\u4fbf\u627e\u4e2a\u5730\u65b9\uff0c\u53f3\u51fb-&gt;new-&gt;httrequest\uff0c\u5b8c\u6210\uff01</p>"},{"location":"Java/SpringBoot/JPA/","title":"JPA","text":"<p>[toc]</p> <p>JPA (Java Persistence API) \u662f Java EE \u4e2d\u6301\u4e45\u5316\u6570\u636e\u7684\u6807\u51c6API\uff0c\u7528\u4e8e\u5c06 Java \u5bf9\u8c61\u6620\u5c04\u5230\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\u3002\u5b83\u63d0\u4f9b\u4e86\u4e00\u79cd\u7b80\u5355\u7684\u65b9\u6cd5\u6765\u7ba1\u7406\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u6570\u636e\uff0c\u5141\u8bb8\u5f00\u53d1\u4eba\u5458\u4f7f\u7528\u9762\u5411\u5bf9\u8c61\u7684\u601d\u60f3\u64cd\u4f5c\u6570\u636e\u5e93\uff0c\u800c\u4e0d\u9700\u8981\u76f4\u63a5\u4f7f\u7528 SQL\u3002</p>"},{"location":"Java/SpringBoot/Java%20IO/","title":"Java IO","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/Java%20IO/#_1","title":"\u4ec0\u4e48\u662f\u6d41","text":"<p>\u53ef\u4ee5\u5b83\u4fe9\u5177\u8c61\u5316\u4e3a\u4e00\u6839\u6c34\u7ba1\uff0c\u8d1f\u8d23\u4f20\u8f93\u6570\u636e\uff0c\u800c\u6d41\u672c\u8eab\u5e76\u4e0d\u5305\u542b\u6570\u636e\u3002</p>"},{"location":"Java/SpringBoot/Java%20IO/#_2","title":"\u6d41\u7684\u5206\u7c7b","text":"<ol> <li>\u6309\u7167\u6d41\u7684\u65b9\u5411\u5206\u7c7b\uff1a</li> </ol> <p><code>inputstream</code>\uff1a\u5f00\u59cb\u7aef\u63a5\u7740\u786c\u76d8\uff0c\u7ed3\u675f\u7aef\u63a5\u7740\u5185\u5b58\uff0c\u201c\u6d41\u201d\u7684\u65b9\u5411\u662f\u4ece\u786c\u76d8\u5230\u5185\u5b58\u3002</p> <p><code>outputstream</code>\uff1a\u5f00\u59cb\u7aef\u63a5\u7740\u5185\u5b58\uff0c\u7ed3\u675f\u7aef\u63a5\u7740\u786c\u76d8\uff0c\u201c\u6d41\u201d\u7684\u65b9\u5411\u662f\u4ece\u5185\u5b58\u5230\u786c\u76d8\u3002</p> <ol> <li>\u6309\u7167\u5904\u7406\u5355\u4f4d\u5206\u7c7b\uff1a</li> </ol> <p>\u5b57\u8282\u6d41\uff1a\u6bcf\u6b21\u5904\u74061\u4e2a\u5b57\u8282\u3002</p> <p>\u5b57\u7b26\u6d41\uff1a\u6bcf\u6b21\u5904\u74061\u4e2a\u5b57\u7b26\uff0c\u9700\u8981\u6307\u5b9a\u7f16\u7801\u65b9\u5f0f\u3002</p> <ol> <li>\u6309\u7167\u6d41\u7684\u89d2\u8272\u5206\u7c7b\uff1a</li> </ol> <p>\u8282\u70b9\u6d41\uff1a\u76f4\u63a5\u4e0e\u6570\u636e\u6e90\u6216\u6570\u636e\u76ee\u6807\u8fdb\u884c\u4ea4\u4e92\uff0c\u5904\u7406\u539f\u59cb\u7684\u5b57\u8282\u6216\u5b57\u7b26\u6570\u636e\u3002</p> <p>\u5904\u7406\u6d41\uff08\u4e5f\u53eb\u5305\u88c5\u6d41\uff09\uff1a\u57fa\u4e8e\u5df2\u5b58\u5728\u7684\u6d41\uff0c\u4e3a\u7a0b\u5e8f\u63d0\u4f9b\u66f4\u5f3a\u5927\u7684\u8bfb\u5199\u529f\u80fd\u3002</p>"},{"location":"Java/SpringBoot/Java%20IO/#stream","title":"\u5e38\u7528stream","text":"<p>fileoutputstream</p> <p>fileinputstream\uff1a\u6bcf\u6b21\u60f3\u5185\u5b58\u4e2d\u8bfb\u51651B\u7684\u6570\u636e\u3002</p>"},{"location":"Java/SpringBoot/Java%20IO/#_3","title":"\u5c0f\u6848\u4f8b","text":"<p>\u6848\u4f8b1\uff1a\u6587\u4ef6\u7684\u62f7\u8d1d</p> <pre><code>package org.example;\n\nimport java.io.*;\n\npublic class Main {\n    public static void main(String[] args) {\n        String startPath = \"C:\\\\Users\\\\\u6653\u9f99coding\\\\Desktop\\\\\u6d4b\u8bd5\u6587\u4ef6.txt\";\n        String endPath = \"C:\\\\Users\\\\\u6653\u9f99coding\\\\Desktop\\\\\u76ee\u6807\u6587\u4ef6.txt\";\n        FileInputStream fileInputStream = null;\n        FileOutputStream fileOutputStream = null;\n        try {\n            // \n            fileInputStream = new FileInputStream(startPath);\n            fileOutputStream = new FileOutputStream(endPath);\n            int readLen = 0;\n            byte[] buf = new byte[1024];\n            while ((readLen = fileInputStream.read(buf)) != -1) {\n                fileOutputStream.write(buf, 0, readLen);\n            }\n        } catch (FileNotFoundException e) {\n            throw new RuntimeException(e);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        } finally {\n            try {\n                fileInputStream.close();\n                fileOutputStream.close();\n            } catch (IOException e) {\n                throw new RuntimeException(e);\n            }\n        }\n    }\n}\n</code></pre> <p><code>StringReader_</code>\u548c<code>FileReader_</code> \u662f\u8282\u70b9\u6d41</p>"},{"location":"Java/SpringBoot/Java%E6%97%B6%E9%97%B4%E7%B1%BB%E5%B7%A5%E5%85%B7/","title":"Java\u65f6\u95f4\u7c7b\u5de5\u5177","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/Java%E6%97%B6%E9%97%B4%E7%B1%BB%E5%B7%A5%E5%85%B7/#_1","title":"\u5f15\u5165\u4f9d\u8d56","text":"<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;joda-time&lt;/groupId&gt;\n    &lt;artifactId&gt;joda-time&lt;/artifactId&gt;\n    &lt;version&gt;2.9.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>"},{"location":"Java/SpringBoot/Java%E6%97%B6%E9%97%B4%E7%B1%BB%E5%B7%A5%E5%85%B7/#_2","title":"\u6848\u4f8b\u6f14\u793a","text":"<pre><code>// \u83b7\u53d6\u5f53\u524d\u65f6\u95f4\uff0c\u7cbe\u786e\u5230\u6beb\u79d2\nSystem.out.println(new DateTime());\n// \u81ea\u5b9a\u4e49\u521b\u5efa\u65f6\u95f4\uff0c\u9700\u8981\u7cbe\u786e\u5230\u6beb\u79d2\nSystem.out.println(new DateTime(2023, 1, 1, 12, 13, 12, 123));\n// long\u7c7b\u578b\u7684\u65f6\u95f4\u6233\uff0c\u663e\u793a\u8ddd\u79bb1970-01-01T00:00:00Z\u7684\u6beb\u79d2\u6570\nSystem.out.println(new DateTime(100));\n// \u89e3\u6790\u5b57\u7b26\u4e32\u4e3a\u65f6\u95f4\uff08\u65e5\u671f\u7528-\u9694\u5f00\u3001\u65f6\u95f4:\u9694\u5f00\u3001\u6beb\u79d2\u7528.\u9694\u5f00\u3001\u65e5\u671f\u4e0e\u65f6\u95f4\u7528T\u9694\u5f00\u3001\u53ef\u4ee5\u586b\u5199\u4efb\u610f\u7b26\u5408\u683c\u5f0f\u89c4\u8303\u7684\u524d\u7f00\u5b57\u7b26\u4e32\uff09\nSystem.out.println(new DateTime(\"2022-1-1T12:23:21.221\"));\n</code></pre>"},{"location":"Java/SpringBoot/Java%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/","title":"Java\u6b63\u5219\u8868\u8fbe\u5f0f","text":"<p>\u590d\u5236\u4e0b\u8ff0\u4ee3\u7801\uff1a</p> <pre><code>public abstract class RegexPatterns {\n    /**\n     * \u624b\u673a\u53f7\u6b63\u5219\n     */\n    public static final String PHONE_REGEX = \"^1([38][0-9]|4[579]|5[0-3,5-9]|6[6]|7[0135678]|9[89])\\\\d{8}$\";\n    /**\n     * \u90ae\u7bb1\u6b63\u5219\n     */\n    public static final String EMAIL_REGEX = \"^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\\\.[a-zA-Z0-9_-]+)+$\";\n    /**\n     * \u5bc6\u7801\u6b63\u5219\u30024~32\u4f4d\u7684\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u4e0b\u5212\u7ebf\n     */\n    public static final String PASSWORD_REGEX = \"^\\\\w{4,32}$\";\n    /**\n     * \u9a8c\u8bc1\u7801\u6b63\u5219, 6\u4f4d\u6570\u5b57\u6216\u5b57\u6bcd\n     */\n    public static final String VERIFY_CODE_REGEX = \"^[a-zA-Z\\\\d]{6}$\";\n}\n</code></pre> <pre><code>import cn.hutool.core.util.StrUtil;\n\npublic class RegexUtils {\n    /**\n     * \u662f\u5426\u662f\u65e0\u6548\u624b\u673a\u683c\u5f0f\n     * @param phone \u8981\u6821\u9a8c\u7684\u624b\u673a\u53f7\n     * @return true:\u7b26\u5408\uff0cfalse\uff1a\u4e0d\u7b26\u5408\n     */\n    public static boolean isPhoneInvalid(String phone){\n        return mismatch(phone, RegexPatterns.PHONE_REGEX);\n    }\n    /**\n     * \u662f\u5426\u662f\u65e0\u6548\u90ae\u7bb1\u683c\u5f0f\n     * @param email \u8981\u6821\u9a8c\u7684\u90ae\u7bb1\n     * @return true:\u7b26\u5408\uff0cfalse\uff1a\u4e0d\u7b26\u5408\n     */\n    public static boolean isEmailInvalid(String email){\n        return mismatch(email, RegexPatterns.EMAIL_REGEX);\n    }\n\n    /**\n     * \u662f\u5426\u662f\u65e0\u6548\u9a8c\u8bc1\u7801\u683c\u5f0f\n     * @param code \u8981\u6821\u9a8c\u7684\u9a8c\u8bc1\u7801\n     * @return true:\u7b26\u5408\uff0cfalse\uff1a\u4e0d\u7b26\u5408\n     */\n    public static boolean isCodeInvalid(String code){\n        return mismatch(code, RegexPatterns.VERIFY_CODE_REGEX);\n    }\n\n    // \u6821\u9a8c\u662f\u5426\u4e0d\u7b26\u5408\u6b63\u5219\u683c\u5f0f\n    private static boolean mismatch(String str, String regex){\n        if (StrUtil.isBlank(str)) {\n            return true;\n        }\n        return !str.matches(regex);\n    }\n}\n</code></pre> <p>\u8fd9\u6837\u4f7f\u7528\uff1a</p> <pre><code>String phone = \"1232241232\";\nif (RegexUtils.isPhoneInvalid(phone)) {\n    return Result.fail(\"\u624b\u673a\u53f7\u683c\u5f0f\u9519\u8bef\uff01\");\n}\n</code></pre>"},{"location":"Java/SpringBoot/Junit%E6%B5%8B%E8%AF%95/","title":"Junit\u6d4b\u8bd5","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/Junit%E6%B5%8B%E8%AF%95/#_1","title":"\u5199\u5728\u524d\u9762","text":"<p>\u672c\u6587\u4ecb\u7ecd\u4e86\u5173\u4e8espringboot\u9879\u76ee\u4e2d\u5982\u4f55\u4f7f\u7528Junit5\u505a\u7b80\u5355\u7684\u6d4b\u8bd5\uff0c\u5e76\u4e14\u53ea\u6d89\u53ca\u5230\u4e2a\u4eba\u5e38\u7528\u7684\u77e5\u8bc6\u70b9\uff0c\u90e8\u5206\u77e5\u8bc6\u672a\u505a\u4ecb\u7ecd\u3002</p> <p>\u6211\u6700\u5e38\u4f7f\u7528\u5230\u7684\u529f\u80fd\u5c31\u662f\u6d4b\u8bd5mapper\uff0cservice\u3002</p> <p>\u6240\u6709\u7684\u6d4b\u8bd5\u4ee3\u7801\u90fd\u5e94\u8be5\u653e\u5728<code>/src/test</code>\u76ee\u5f55\u5185\u3002</p>"},{"location":"Java/SpringBoot/Junit%E6%B5%8B%E8%AF%95/#_2","title":"\u76f8\u5173\u4f9d\u8d56","text":"<p>\u5f15\u5165\u4f9d\u8d56</p> <pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-platform-launcher&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>"},{"location":"Java/SpringBoot/Junit%E6%B5%8B%E8%AF%95/#_3","title":"\u6d4b\u8bd5\u6d41\u7a0b","text":"<p>\u8f6f\u4ef6\u4f1a\u5728<code>/src/test</code>\u76ee\u5f55\u4e2d\u521b\u5efa\u4e00\u4e2a<code>xxxTests</code>\u7c7b\uff0c\u5e76\u4e14\u8be5\u7c7b\u4e0a\u9762\u6709<code>@SpringBootTest</code>\u6ce8\u89e3\u3002</p> <p>\u6240\u6709\u7684\u6d4b\u8bd5\u90fd\u653e\u5728\u8fd9\u4e2a\u7c7b\u4e2d\uff08\u4e5f\u53ef\u4ee5\u81ea\u5df1\u521b\u5efa\u4e00\u4e2a\u7c7b\uff0c\u8bb0\u5f97\u52a0\u4e0a<code>@SpringBootTest</code>\u6ce8\u89e3\uff09\u3002\u4e0b\u9762\u7ed9\u51fa\u4f7f\u7528\u6848\u4f8b\uff0c\u4e3b\u8981\u7528\u5230<code>@Test</code>\u548c<code>Assertions.xx</code>\u65b9\u6cd5</p> <pre><code>@SpringBootTest\nclass MyTests {\n    // \u6ce8\u518cbean\n    @Autowired\n    private UserService userService;\n    @Test\n    void contextLoads() {\n        String password = userService.selectPasswordByUsername(\"lhl\");\n        // \u4f7f\u7528Assertions\u4e2d\u7684\u65b9\u6cd5\n        Assertions.assertEquals(\"666\", password);\n    }\n}\n</code></pre> <p>\u975e\u5e38\u7b80\u5355\uff01</p> <p>\u4e0b\u9762\u662f<code>@BeforeAll</code>\u3001<code>@BeforeEach</code>\u3001<code>@AfterAll</code> \u3001<code>@AfterEach</code>\u3001<code>@RepeatTest(x)</code>\u7684\u4f7f\u7528\u65b9\u6cd5\uff0c\u987e\u540d\u601d\u4e49\uff0c\u975e\u5e38\u7b80\u5355\u3002</p> <pre><code>@SpringBootTest\nclass MyTests {\n    @Autowired\n    private UserService userService;\n    @BeforeAll\n    // \u987b\u8981\u9759\u6001\u65b9\u6cd5\n    static void init() {\n        System.out.println(\"\u53ea\u6709\u7b2c\u4e00\u6b21\u6d4b\u8bd5\u624d\u4f1a\u6267\u884c\u8fd9\u884c\u4ee3\u7801\");\n    }\n    @BeforeEach\n    // \u987b\u8981\u975e\u9759\u6001\u65b9\u6cd5\n    void initEach() {\n        System.out.println(\"\u6bcf\u505a\u4e00\u6b21\u6d4b\u8bd5\uff0c\u90fd\u4f1a\u6267\u884c\u8fd9\u884c\u4ee3\u7801\");\n    }\n    @RepeatedTest(5)\n    void contextLoads() {\n        String password = userService.selectPasswordByUsername(\"lhl\");\n        Assertions.assertEquals(\"666\", password);\n    }\n    @AfterEach\n    void endEach() {\n        System.out.println(\"\u505a\u5b8c\u4e00\u6b21\u6d4b\u8bd5\uff0c\u4f1a\u6267\u884c\u8fd9\u884c\u4ee3\u7801\");\n    }\n    @AfterAll\n    static void end() {\n        System.out.println(\"\u6240\u6709\u6267\u884c\u5b8c\u6bd5\uff0c\u6267\u884c\u8fd9\u884c\u4ee3\u7801\");\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Knife4j%E6%95%99%E7%A8%8B/","title":"Knife4j\u6559\u7a0b","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/Knife4j%E6%95%99%E7%A8%8B/#_1","title":"\u73af\u5883","text":"<ul> <li>Spring Boot 2.16</li> <li>JDK 8</li> </ul>"},{"location":"Java/SpringBoot/Knife4j%E6%95%99%E7%A8%8B/#_2","title":"\u4f9d\u8d56","text":"<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;!--knife4j\u6838\u5fc3\u4f9d\u8d56--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.github.xiaoymin&lt;/groupId&gt;\n        &lt;artifactId&gt;knife4j-openapi3-spring-boot-starter&lt;/artifactId&gt;\n        &lt;version&gt;4.3.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;cn.hutool&lt;/groupId&gt;\n        &lt;artifactId&gt;hutool-all&lt;/artifactId&gt;\n        &lt;version&gt;5.8.10&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>"},{"location":"Java/SpringBoot/Knife4j%E6%95%99%E7%A8%8B/#_3","title":"\u914d\u7f6e\u4fe1\u606f","text":"<p>yml\u6587\u4ef6\u5fc5\u987b\u91c7\u7528UTF-8\uff01</p> <pre><code>server:\n  port: 8080\n  servlet:\n    context-path: /\nspring:\n  servlet:\n    multipart:\n      max-file-size: 100MB\n      max-request-size: 100MB\n  application:\n    name: knife4j-spring-boot3-demo\nspringdoc:\n  swagger-ui:\n    path: /swagger-ui.html\n    tags-sorter: alpha\n    #operations-sorter: order\n  api-docs:\n    path: /v3/api-docs\n  group-configs:\n    - group: 'default'\n      paths-to-match: '/**'\n      # \u8fd9\u91cc\u6307\u5b9a\u542f\u52a8\u7c7b\u6240\u5728\u7684\u8def\u5f84\n      packages-to-scan: com.lhl.knife4jspringboot2demo\n  default-flat-param-object: true\n\nknife4j:\n  enable: true\n  setting:\n    language: zh_cn\n    swagger-model-name: \u5b9e\u4f53\u7c7b\u5217\u8868\n  documents:\n    - name: \u6807\u98981\n      locations: classpath:markdown/*\n      group: default\n    - name: \u6807\u98982\n      locations: classpath:markdown1/*\n      group: \u7528\u6237\u6a21\u5757\n  basic:\n    enable: false\n    username: abc\n    password: 123\n</code></pre>"},{"location":"Java/SpringBoot/Knife4j%E6%95%99%E7%A8%8B/#_4","title":"\u542f\u52a8\u7c7b","text":"<p>\u542f\u52a8\u7c7b\u6dfb\u52a0\u989d\u5916\u4fe1\u606f\u3002</p> <pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.ConfigurableApplicationContext;\nimport org.springframework.core.env.Environment;\n\nimport java.net.InetAddress;\nimport java.net.UnknownHostException;\n\n@Slf4j\n@SpringBootApplication\npublic class Knife4jSpringboot2DemoApplication {\n    public static void main(String[] args) throws UnknownHostException {\n        SpringApplication app=new SpringApplication(Knife4jSpringboot2DemoApplication.class);\n        ConfigurableApplicationContext application=app.run(args);\n        Environment env = application.getEnvironment();\n        log.info(\"\\n----------------------------------------------------------\\n\\t\" +\n                        \"Application '{}' is running! Access URLs:\\n\\t\" +\n                        \"Local: \\t\\thttp://localhost:{}\\n\\t\" +\n                        \"External: \\thttp://{}:{}\\n\\t\"+\n                        \"Doc: \\thttp://{}:{}/doc.html\\n\"+\n                        \"----------------------------------------------------------\",\n                env.getProperty(\"spring.application.name\"),\n                env.getProperty(\"server.port\"),\n                InetAddress.getLocalHost().getHostAddress(),\n                env.getProperty(\"server.port\"),\n                InetAddress.getLocalHost().getHostAddress(),\n                env.getProperty(\"server.port\"));\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Knife4j%E6%95%99%E7%A8%8B/#_5","title":"\u914d\u7f6e\u7c7b","text":"<pre><code>package com.lhl.knife4jspringboot2demo.config;\n\n\nimport cn.hutool.core.util.RandomUtil;\nimport io.swagger.v3.oas.models.OpenAPI;\nimport io.swagger.v3.oas.models.info.Info;\nimport io.swagger.v3.oas.models.info.License;\nimport org.springdoc.core.customizers.GlobalOpenApiCustomizer;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\n\n@Configuration\npublic class SwaggerConfig {\n    /**\n     * \u6839\u636e@Tag \u4e0a\u7684\u6392\u5e8f\uff0c\u5199\u5165x-order\n     *\n     * @return the global open api customizer\n     */\n    @Bean\n    public GlobalOpenApiCustomizer orderGlobalOpenApiCustomizer() {\n        return openApi -&gt; {\n            if (openApi.getTags()!=null){\n                openApi.getTags().forEach(tag -&gt; {\n                    Map&lt;String,Object&gt; map=new HashMap&lt;&gt;();\n                    map.put(\"x-order\", RandomUtil.randomInt(0,100));\n                    tag.setExtensions(map);\n                });\n            }\n            if(openApi.getPaths()!=null){\n                openApi.addExtension(\"x-test123\",\"333\");\n                openApi.getPaths().addExtension(\"x-abb\",RandomUtil.randomInt(1,100));\n            }\n        };\n    }\n\n    @Bean\n    public OpenAPI customOpenAPI() {\n        return new OpenAPI()\n                .info(new Info()\n                        .title(\"\u5c0f\u5357\u6821\u56ed\")\n                        .version(\"1.0\")\n                        .description(\"\u5c0f\u5357\u6821\u56edapi\")\n                        .termsOfService(\"http://doc.xiaominfo.com\")\n                        .license(new License().name(\"Apache 2.0\")\n                                .url(\"http://doc.xiaominfo.com\")));\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Mybatis-Plus%E5%88%86%E9%A1%B5/","title":"Mybatis-Plus\u5206\u9875","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/Mybatis-Plus%E5%88%86%E9%A1%B5/#_1","title":"\u524d\u7f6e\u5de5\u4f5c","text":"<ol> <li> <p>\u57fa\u4e8espringboot2.77\u3002</p> </li> <li> <p>\u80fd\u591f\u6b63\u5e38\u8fd0\u884cMySQL\u548cMybatis-Plus\u3002</p> </li> </ol>"},{"location":"Java/SpringBoot/Mybatis-Plus%E5%88%86%E9%A1%B5/#_2","title":"\u5b9e\u6218\u4ee3\u7801","text":""},{"location":"Java/SpringBoot/Mybatis-Plus%E5%88%86%E9%A1%B5/#_3","title":"\u914d\u7f6e\u4ee3\u7801","text":"<p>\u53ea\u9700\u8981\u76f4\u63a5\u7c98\u8d34\u914d\u7f6e\u4ee3\u7801\u5373\u53ef\u3002</p> <pre><code>package com.lee.mybatisplugin.config;\n\nimport com.baomidou.mybatisplus.annotation.DbType;\nimport com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;\nimport com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n/**\n * @author \u6653\u9f99coding\n */\n@Configuration\npublic class MybatisPlusConfig {\n    /**\n     * \u914d\u7f6e\u5206\u9875\u529f\u80fd\u7684\u62e6\u622a\u5668\u5bf9\u8c61\n     * @return\n     */\n    @Bean\n    public MybatisPlusInterceptor mybatisPlusInterceptor(){\n        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();\n        interceptor.addInnerInterceptor(new PaginationInnerInterceptor(DbType.MYSQL));\n        return interceptor;\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Mybatis-Plus%E5%88%86%E9%A1%B5/#_4","title":"\u6d4b\u8bd5\u4ee3\u7801","text":"<pre><code>package com.lee.mybatisplugin;\n\nimport com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;\nimport com.baomidou.mybatisplus.extension.plugins.pagination.Page;\nimport com.lee.mybatisplugin.mapper.UserMapper;\nimport com.lee.mybatisplugin.pojo.User;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.boot.test.context.SpringBootTest;\n\nimport javax.annotation.Resource;\nimport java.util.List;\n\n@SpringBootTest\nclass MybatisPluginApplicationTests {\n    @Resource\n    private UserMapper userMapper;\n    @Test\n    void test() {\n        Page&lt;User&gt; page = new Page&lt;&gt;(1, 10);  // \u67e5\u8be2\u7b2c1\u9875\uff0c\u6bcf\u987510\u6761\u6570\u636e\n        LambdaQueryWrapper&lt;User&gt; queryWrapper = new LambdaQueryWrapper&lt;&gt;();\n        // \u4e00\u5b9a\u4e0d\u8981\u67e5\u8be2\u603b\u6570\u636e\u6570\uff0c\u5426\u5219\u6570\u636e\u91cf\u5927\u7684\u65f6\u5019\uff0c\u67e5\u8be2\u6548\u7387\u5f88\u4f4e\n        Page&lt;User&gt; userPage = userService.page(page, queryWrapper, false);\n        List&lt;User&gt; records = userPage.getRecords();\n        for (User record : records) {\n            System.out.println(record);\n        }\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Mybatis-Plus%E6%93%8D%E4%BD%9CMySQL/","title":"Mybatis-Plus\u64cd\u4f5cMySQL","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/Mybatis-Plus%E6%93%8D%E4%BD%9CMySQL/#_1","title":"\u524d\u7f6e\u77e5\u8bc6","text":"<p>\u5efa\u8bae\u5148\u770b\u5b8c\u6211\u5199\u7684\u300aMybatisX\u63d2\u4ef6\u300b\u90a3\u7bc7\u6587\u7ae0\u3002Mybatis-Plus\u53ea\u80fd\u505a\u5355\u8868\u67e5\u8be2\uff0c\u5982\u679c\u8981\u591a\u8868\u67e5\u8be2\uff0c\u9700\u8981\u81ea\u5df1\u5728<code>mapper.xml</code>\u6587\u4ef6\u4e2d\u5199SQL\u8bed\u53e5\u3002</p>"},{"location":"Java/SpringBoot/Mybatis-Plus%E6%93%8D%E4%BD%9CMySQL/#springbootmybatis-plus","title":"springboot\u96c6\u6210mybatis-plus","text":""},{"location":"Java/SpringBoot/Mybatis-Plus%E6%93%8D%E4%BD%9CMySQL/#mysql","title":"\u786e\u4fdd\u5f00\u542fMySQL\u6570\u636e\u5e93","text":"<p>\u68c0\u67e5\u662f\u5426\u5f00\u542fmysql\u6570\u636e\u5e93\u3002</p>"},{"location":"Java/SpringBoot/Mybatis-Plus%E6%93%8D%E4%BD%9CMySQL/#spring-boot","title":"\u521b\u5efaSpring Boot\u9879\u76ee","text":"<p>\u4f7f\u7528idea\u81ea\u5e26\u7684spring initializer\u5373\u53ef\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5df1\u901a\u8fc7maven\u914d\u7f6e\u9879\u76ee\u3002</p>"},{"location":"Java/SpringBoot/Mybatis-Plus%E6%93%8D%E4%BD%9CMySQL/#_2","title":"\u6dfb\u52a0\u4f9d\u8d56","text":"<p>\u5efa\u8bae\u5728pom\u6587\u4ef6\u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u4f9d\u8d56\uff1a</p> <pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--mysql\u9a71\u52a8--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n        &lt;version&gt;8.0.32&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--mybatis-plus--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.baomidou&lt;/groupId&gt;\n        &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;\n        &lt;version&gt;3.5.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--lombok--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>"},{"location":"Java/SpringBoot/Mybatis-Plus%E6%93%8D%E4%BD%9CMySQL/#mapperxml","title":"mapper.xml\u4f4d\u7f6e","text":"<p>\u5047\u5b9a<code>mapper</code>\u6587\u4ef6\u5728<code>src/main/java/com/lee/pro/mapper</code>\uff0c\u5219<code>mapper.xml</code>\u6587\u4ef6\u5728<code>src/main/resources/com/lee/pro/mapper</code>\u3002</p>"},{"location":"Java/SpringBoot/Mybatis-Plus%E6%93%8D%E4%BD%9CMySQL/#_3","title":"\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>spring.datasource.username=xxxx\nspring.datasource.password=xxxx\nspring.datasource.url=jdbc:mysql://localhost:3306/xxxxxx?serverTimezone=Asia/Shanghai&amp;useUnicode=true&amp;characterEncoding=utf-8\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n\n# \u6253\u5370SQL\u8bed\u53e5\nmybatis-plus.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl\n</code></pre>"},{"location":"Java/SpringBoot/Mybatis-Plus%E6%93%8D%E4%BD%9CMySQL/#_4","title":"\u6d4b\u8bd5\u662f\u5426\u8fde\u63a5\u4e0a\u6570\u636e\u5e93","text":"<pre><code>@SpringBootTest\nclass MysqlTestApplicationTests {\n    @Resource\n    private DataSource dataSource;\n    @Test\n    void contextLoads() throws SQLException {\n        System.out.println(dataSource.getConnection());\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Mybatis-Plus%E6%93%8D%E4%BD%9CMySQL/#mybatisx","title":"\u4f7f\u7528MybatisX\u63d2\u4ef6\u751f\u6210\u4ee3\u7801","text":"<p>\u53c2\u8003\u6211\u5199\u7684\u300aMybatisX\u63d2\u4ef6\u300b\u90a3\u7bc7\u6587\u7ae0\u3002\u6b64\u65f6\u4f1a\u751f\u6210\u4e00\u4e2a<code>\u5b9e\u4f53\u7c7bJava\u4ee3\u7801</code>\u3001<code>service\u548cserviceImpl\u4ee3\u7801</code>\u3001<code>mapper\u63a5\u53e3\u4ee3\u7801</code>\u3001<code>mapper.xml\u6587\u4ef6</code>\u3002\u6ce8\u610f<code>mapper.xml</code>\u6587\u4ef6\u8981\u653e\u5728<code>resources</code>\u76ee\u5f55\u4e0b\u5e76\u4e14\u5176\u6240\u5c5e\u5305\u540d\u548cJava\u4ee3\u7801\u4e2d\u7684<code>mapper\u63a5\u53e3\u4ee3\u7801</code>\u7684\u6240\u5c5e\u5305\u540d\u76f8\u540c\u3002</p> <p>\u4f8b\u5982\uff1a<code>/src/main/java/com/lee/mysqltest/mapper/UserMapper</code>\u5bf9\u5e94<code>/src/main/resources/com/lee/mysqltest/mapper/UserMapper.xml</code>\u3002</p>"},{"location":"Java/SpringBoot/Mybatis-Plus%E6%93%8D%E4%BD%9CMySQL/#mapperscan","title":"\u6dfb\u52a0MapperScan\u6ce8\u89e3","text":"<p>\u5728\u542f\u52a8\u7c7b\u4e0a\u6dfb\u52a0MapperScan\u6ce8\u89e3\u3002</p> <p><code>@MapperScan(\"com.lee.pro.mapper\")</code></p> <p>\u4e5f\u53ef\u4ee5\u5728\u6bcf\u4e2a<code>mapper</code>\u7684\u63a5\u53e3\u6587\u4ef6\u4e2d\u52a0\u5165\u6ce8\u89e3<code>@Mapper</code>\uff0c\u4e0d\u8fc7\u8fd9\u6837\u6bd4\u8f83\u9ebb\u70e6\u3002</p>"},{"location":"Java/SpringBoot/Mybatis-Plus%E6%93%8D%E4%BD%9CMySQL/#crud","title":"CRUD\u63a5\u53e3","text":"<p>\u53c2\u8003\u5b98\u65b9\u6587\u6863\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7Mybatis-Plus\u63d0\u4f9b\u7684service\u5c42\u63a5\u53e3\u6216mapper\u5c42\u63a5\u53e3\u64cd\u4f5c\u6570\u636e\u5e93\u3002\u4e2a\u4eba\u4e60\u60ef\u5bf9\u4e8e\u7b80\u5355\u7684\u67e5\u8be2\u7528service\u63d0\u4f9b\u7684\u63a5\u53e3\uff1b\u5bf9\u4e8e\u591a\u8868\u67e5\u8be2\u4f7f\u7528\u5b50\u67e5\u8be2\u6216\u5728mapper\u4e2d\u5199SQL\u8bed\u53e5\uff0c\u4e0d\u4f7f\u7528mapper\u63d0\u4f9b\u7684\u67e5\u8be2\u65b9\u6cd5\u3002</p>"},{"location":"Java/SpringBoot/Mybatis-Plus%E6%93%8D%E4%BD%9CMySQL/#crud_1","title":"CRUD\u6848\u4f8b","text":"<p>\u67e5\u627e\uff1a</p> <pre><code>package com.lee.mybatisplugin;\n\nimport com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;\nimport com.lee.mybatisplugin.pojo.User;\nimport com.lee.mybatisplugin.service.UserService;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.boot.test.context.SpringBootTest;\n\nimport javax.annotation.Resource;\nimport java.util.List;\n\n@SpringBootTest\nclass MybatisPluginApplicationTests {\n    @Resource\n    private UserService userService;\n\n    @Test\n    void test() {\n        // from user\n        LambdaQueryWrapper&lt;User&gt; queryWrapper = new LambdaQueryWrapper&lt;&gt;();\n        // SELECT u_id, name\n        queryWrapper.select(User::getUId, User::getName);\n        // WHERE name = Mark\n        queryWrapper.eq(User::getName, \"Mark\");\n        // WHERE age &gt; 8\n        queryWrapper.gt(User::getAge, 8);\n        // ORDER BY create_time desc\n        queryWrapper.orderByDesc(User::getCreateTime);\n        // \u6267\u884c \u591a\u4e2a\u67e5\u8be2\n        List&lt;User&gt; users = userService.list(queryWrapper);\n        // \u6267\u884c \u5355\u4e2a\u67e5\u8be2\n        User user = userService.getOne(queryWrapper);\n\n        System.out.println(users);\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Mybatis-Plus%E6%93%8D%E4%BD%9CMySQL/#_5","title":"\u5c0f\u77e5\u8bc6\u70b9","text":"<ol> <li>querywrapper\u548clambdaquerywrapper\u7684\u533a\u522b\uff1f</li> </ol>"},{"location":"Java/SpringBoot/Mybatis-Plus%E7%9A%84CRUD/","title":"Mybatis-Plus\u7684CRUD","text":""},{"location":"Java/SpringBoot/Mybatis-Plus%E7%9A%84CRUD/#_1","title":"\u524d\u8a00","text":"<p>mp\u4e2d\uff0c\u53ef\u4ee5\u7528service\u5bf9\u8c61\u548cmapper\u5bf9\u8c61\u505acrud\uff0c\u901a\u5e38\u6765\u8bf4\uff0cservice\u5bf9\u8c61\u7684\u529f\u80fd\u66f4\u5f3a\u3002</p>"},{"location":"Java/SpringBoot/Mybatis-Plus%E7%9A%84CRUD/#_2","title":"\u5b9e\u6218","text":"<p>\u6570\u636e\u8868\u7ed3\u6784</p> <pre><code>create table user\n(\n    id        int auto_increment\n        primary key,\n    firstname varchar(20) null,\n    lastname  varchar(20) null,\n    password  varchar(20) null,\n    gender    varchar(2)  null,\n    constraint idx_name\n        unique (firstname, lastname)\n);\n</code></pre> <p>CRUD</p> <pre><code>package com.lee.mybatisplusdemo;\n\nimport cn.hutool.core.thread.ThreadUtil;\nimport com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;\nimport com.baomidou.mybatisplus.core.conditions.update.LambdaUpdateWrapper;\nimport com.lee.mybatisplusdemo.mapper.UserMapper;\nimport com.lee.mybatisplusdemo.pojo.User;\nimport com.lee.mybatisplusdemo.service.UserService;\nimport jakarta.annotation.Resource;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.boot.test.context.SpringBootTest;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.concurrent.CountDownLatch;\n\n@SpringBootTest\nclass MybatisPlusDemoApplicationTests {\n    @Resource\n    private UserService userService;\n\n    @Resource\n    private UserMapper userMapper;\n\n    private User getUser() {\n        return User.builder().firstname(\"\u6653\").lastname(\"\u9f99\").gender(\"\u7537\").password(\"123\").build();\n    }\n\n    private List&lt;User&gt; getUserList(int count) {\n        List&lt;User&gt; userList = new ArrayList&lt;&gt;();\n        for (int i = 1; i &lt;= count; i++) {\n            User user = User.builder().firstname(\"firstname-\" + i).lastname(\"lastname-\" + i).gender(i % 2 == 0 ? \"\u5973\" : \"\u7537\").password(\"pwd\" + i).build();\n            userList.add(user);\n        }\n        return userList;\n    }\n\n    /**\n     * \u6700\u7b80\u5355\u7684\uff0c\u521b\u5efa\u4e00\u4e2a\u7528\u6237\n     */\n    @Test\n    void createUser() {\n        User user = getUser();\n\n        // service\n        // \u5982\u679c\u56e0\u4e3aunique key\u51b2\u7a81\u7b49\u539f\u56e0\uff0c\u901a\u5e38\u4f1a\u62a5\u9519\uff0c\u800c\u4e0d\u662fsuccess\u4e3afalse\n        boolean success = userService.save(user);\n        if (success) {\n            System.out.println(\"\u521b\u5efa\u6210\u529f\");\n        } else {\n            System.out.println(\"\u521b\u5efa\u5931\u8d25\");\n        }\n\n        // mapper\n        // \u5982\u679c\u56e0\u4e3aunique key\u51b2\u7a81\u7b49\u539f\u56e0\uff0c\u901a\u5e38\u4f1a\u62a5\u9519\uff0c\u800c\u4e0d\u662fcount=0\n        int count = userMapper.insert(user);\n        System.out.println(count);\n    }\n\n    /**\n     * \u67e5\u8be2firstname\u548clastname\u662f\u5426\u5b58\u5728\uff0c\u82e5\u5b58\u5728\uff0c\u5219\u66f4\u65b0\u9664\u4e86id\u7684\u6240\u6709\u5b57\u6bb5\n     */\n    @Test\n    void updateUser() {\n        User user = getUser();\n        user.setGender(\"\u5973\");\n        user.setPassword(\"666\");\n        // service\n        LambdaUpdateWrapper&lt;User&gt; userLambdaUpdateWrapper = new LambdaUpdateWrapper&lt;&gt;();\n        userLambdaUpdateWrapper\n                .set(User::getPassword, user.getPassword()).set(User::getGender, user.getGender())\n                .eq(User::getFirstname, user.getFirstname()).eq(User::getLastname, user.getLastname());\n        boolean success = userService.update(userLambdaUpdateWrapper);\n        if (success) {\n            System.out.println(\"update success\");\n        } else {\n            System.out.println(\"update fail\");\n        }\n\n        // mapper\n//        LambdaUpdateWrapper&lt;User&gt; userLambdaUpdateWrapper = new LambdaUpdateWrapper&lt;&gt;();\n//        userLambdaUpdateWrapper\n//                .set(User::getPassword, user.getPassword()).set(User::getGender, user.getGender())\n//                .eq(User::getFirstname, user.getFirstname()).eq(User::getLastname, user.getLastname());\n//        int affectedRowCount = userMapper.update(userLambdaUpdateWrapper);\n//        System.out.println(affectedRowCount);\n    }\n\n    @Test\n    void batchCreateUser() {\n        List&lt;User&gt; userList = getUserList(3);\n\n        // service\n        // \u8981\u4e48\u5168\u90e8\u521b\u5efa\u6210\u529f\uff0c\u8981\u4e48\u5168\u90e8\u521b\u5efa\u5931\u8d25\n        boolean success = userService.saveBatch(userList);\n        if (success) {\n            System.out.println(\"\u6279\u91cf\u521b\u5efa\u6210\u529f\");\n        } else {\n            System.out.println(\"\u6279\u91cf\u521b\u5efa\u5931\u8d25\");\n        }\n\n        // mapper \u6ca1\u6709\u6279\u91cf\u521b\u5efa\u64cd\u4f5c\n    }\n\n    /**\n     * \u63d2\u5165or\u66f4\u65b0\u7528\u6237\n     * \u6848\u4f8b\uff1a\u5982\u679cfirstname\u5b58\u5728\uff0c\u5219\u66f4\u65b0\uff1b\u5426\u5219\u63d2\u5165\u3002\n     * \u5efa\u8bae\u5206\u62102\u6b65\uff0c\u5148\u67e5\u8be2\uff0c\u5728\u5224\u65ad\u662f\u66f4\u65b0\u8fd8\u662f\u63d2\u5165\u3002\u4e0d\u8981\u7528\u5b98\u65b9\u63d0\u4f9b\u7684saveOrUpdate\n     */\n    @Test\n    void upsertUser() {\n        User user = getUser();\n        LambdaQueryWrapper&lt;User&gt; userLambdaQueryWrapper = new LambdaQueryWrapper&lt;&gt;();\n        userLambdaQueryWrapper.eq(User::getFirstname, \"firstname-11\").last(\" limit 1\");\n        // \u5982\u679c\u6709unique\u7d22\u5f15\u4fdd\u8bc1\u6570\u636e\u552f\u4e00\uff0c\u4e5f\u53ef\u4ee5\u7528selectOne\n        List&lt;User&gt; userList = userMapper.selectList(userLambdaQueryWrapper);\n        if (userList == null) {\n            userMapper.insert(user);\n        } else {\n            for (User u : userList) {\n                // \u8d4b\u503c\u4e3b\u952e\uff0c\u9700\u8981\u786e\u4fddid\u662f\u4e3b\u952e\u4e14id\u4e0a\u6709@TableId\n                user.setId(u.getId());\n                // \u6839\u636e\u4e3b\u952e\u66f4\u65b0\u6570\u636e\n                userMapper.updateById(user);\n            }\n        }\n    }\n\n\n    /**\n     * \u6279\u91cf\u521b\u5efa\u90e8\u5206\u7528\u6237\n     * \u6848\u4f8b\uff1a\u6211\u6709\u4e00\u4e9b\u7528\u6237\u6570\u636e\uff0c\u66f4\u65b0\u6570\u636e\u5e93\u4e2d\u4e0d\u5b58\u5728\u7684\u6570\u636e\u3002\u5224\u65ad\u4e24\u4e2a\u6570\u636e\u76f8\u540c\u7684\u6807\u51c6\u662f:firstname\u76f8\u540c\u4e14lastname\u76f8\u540c\n     */\n    @Test\n    void batchUpdateUser() {\n        // \u521d\u59cb\u5316\u6570\u636e\n        List&lt;User&gt; userList = getUserList(1000);\n\n        // service\n\n        // \u67e5\u8be2\u6ee1\u8db3\u6761\u4ef6\u7684\u7528\u6237\n        LambdaQueryWrapper&lt;User&gt; userLambdaQueryWrapper = new LambdaQueryWrapper&lt;&gt;();\n        for (User user : userList) {\n            // or (firstname = ? and lastname = ?)\n            userLambdaQueryWrapper.or(i -&gt; i.eq(User::getFirstname, user.getFirstname()).eq(User::getLastname, user.getLastname()));\n        }\n        List&lt;User&gt; oldUserList = userService.list(userLambdaQueryWrapper);\n        // \u7b5b\u9009\u51fa\u9700\u8981\u6dfb\u52a0\u7684\u7528\u6237\n        List&lt;User&gt; toInsertUserList = new ArrayList&lt;&gt;();\n        for (User user : userList) {  // \u8fd9\u91cc\u4e3a\u4e86\u64cd\u4f5c\u7b80\u5355\uff0c\u91c7\u7528\u4e24\u5c42for\u5faa\u73af\u3002\n            boolean find = false;\n            for (User oldUser : oldUserList) {\n                if (Objects.equals(user.getFirstname(), oldUser.getFirstname())\n                &amp;&amp; Objects.equals(user.getLastname(), oldUser.getLastname())) {\n                    find = true;\n                    break;\n                }\n            }\n            if (! find) {\n                toInsertUserList.add(user);\n            }\n        }\n        boolean ok = userService.saveBatch(toInsertUserList);\n        if (ok) {\n            System.out.println(\"save ok\");\n        } else {\n            System.out.println(\"wrong~\");\n        }\n\n        // mapper \u7531\u4e8e mapper \u6ca1\u6709\u6279\u91cf\u63d2\u5165\u7684\u529f\u80fd\uff0c\u6240\u4ee5\u4e0d\u5efa\u8bae\u7528mapper\u5c42\u7684\u63a5\u53e3\n    }\n\n    /**\n     * \u6240\u6709\u7684\u6279\u91cf\u64cd\u4f5c\u90fd\u53ef\u4ee5\u8003\u8651\u7528\u7ebf\u7a0b\u6c60\u64cd\u4f5c\n     * @throws InterruptedException\n     */\n    @Test\n    void batchUpdateUserMultiThread() throws InterruptedException {\n        List&lt;User&gt; userList = new ArrayList&lt;&gt;();\n        for (int i = 1; i &lt;= 100; i++) {\n            User user = new User();\n            user.setFirstname(\"\u59d3\" + i);\n            user.setLastname(\"\u540d\" + i);\n            user.setPassword(\"\" + i);\n            if (i % 2 == 0) {\n                user.setGender(\"\u5973\");\n            } else {\n                user.setGender(\"\u7537\");\n            }\n            userList.add(user);\n        }\n\n        long t1 = System.nanoTime();\n        CountDownLatch countDownLatch = ThreadUtil.newCountDownLatch(userList.size());\n        for (User user : userList) {\n            ThreadUtil.execute(() -&gt; {\n                boolean ok = userService.save(user);\n                countDownLatch.countDown();\n            });\n        }\n        countDownLatch.await();\n        long t2 = System.nanoTime();\n        System.out.println(\"\u6267\u884c\u65f6\u95f4:\" + (t2 - t1) / 1_000_000 + \"\u6beb\u79d2\");\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/MybatisX%E6%8F%92%E4%BB%B6/","title":"Mybatis\u63d2\u4ef6","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/MybatisX%E6%8F%92%E4%BB%B6/#_1","title":"\u53c2\u8003\u6587\u6863","text":"<p>\u8be6\u7ec6\u6587\u6863</p>"},{"location":"Java/SpringBoot/MybatisX%E6%8F%92%E4%BB%B6/#mybatis_1","title":"Mybatis\u63d2\u4ef6\u80fd\u505a\u4ec0\u4e48","text":"<p>\u53ef\u4ee5\u901a\u8fc7\u5df2\u7ecf\u521b\u5efa\u597d\u7684\u6570\u636e\u5e93\uff0c\u5feb\u901f\u751f\u6210Mapper\u3001Service\u548c\u5b9e\u4f53\u7c7b\u7684\u4ee3\u7801\u3002</p>"},{"location":"Java/SpringBoot/MybatisX%E6%8F%92%E4%BB%B6/#_2","title":"\u5982\u4f55\u4f7f\u7528","text":"<ol> <li> <p>\u57fa\u4e8eidea\uff0c\u5728\u63d2\u4ef6\u5e02\u573a\u4e2d\u5b89\u88c5MybatisX\u3002</p> </li> <li> <p>\u901a\u8fc7idea\u81ea\u5e26\u7684\u8fde\u63a5\u6570\u636e\u5e93\u7684\u5de5\u5177\uff0c\u8fde\u63a5\u4e0a\u81ea\u5df1\u7684\u6570\u636e\u5e93\u3002</p> </li> <li> <p>\u9009\u4e2d\u6307\u5b9a\u7684\u6570\u636e\u8868\uff0c\u53f3\u952e\uff0c\u70b9\u51fb\u3010MybatisX-Generator\u3011\u3002</p> </li> <li> <p><code>class name strategy</code>\u9009\u62e9<code>camel</code>\uff0c\u56e0\u4e3a\u6211\u4e60\u60ef\u5c06\u7c7b\u540d\u8bbe\u7f6e\u4e3a\u9a7c\u5cf0\u683c\u5f0f\u3002</p> </li> </ol> <p>\u70b9\u51fb\u4e0b\u4e00\u6b65\u3002</p> <ol> <li> <p><code>annotation</code>\u9009\u9879\u9009\u62e9<code>Mybatis-Plus 3</code>\uff0c<code>options</code>\u591a\u9009\u9879\u9664\u4e86\u4e0d\u9009<code>Actual Column</code>\uff0c\u5176\u4f59\u90fd\u9009\u4e0a\u3002</p> </li> <li> <p><code>template</code>\u9009\u9879\u9009\u62e9<code>mybatis-plus3</code>\u3002</p> </li> <li> <p>\u70b9\u51fbFinish\uff0c\u5219\u81ea\u52a8\u751f\u6210\u4ee3\u7801\u3002</p> </li> </ol>"},{"location":"Java/SpringBoot/RateLimiter%E9%99%90%E6%B5%81/","title":"RateLimiter\u9650\u6d41","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/RateLimiter%E9%99%90%E6%B5%81/#_1","title":"\u5f15\u5165\u4f9d\u8d56","text":"<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n    &lt;artifactId&gt;guava&lt;/artifactId&gt;\n    &lt;version&gt;31.1-jre&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>"},{"location":"Java/SpringBoot/RateLimiter%E9%99%90%E6%B5%81/#_2","title":"\u4ee3\u7801","text":"<pre><code>package com.lee.mylimiter.controller;\n\nimport com.google.common.util.concurrent.RateLimiter;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.util.concurrent.atomic.AtomicInteger;\n\n/**\n * @author \u6653\u9f99coding\n */\n@RestController\n@RequestMapping(\"\")\npublic class IndexController {\n    /**\n     * rateLimiter\u5bf9\u8c61\u4e00\u5b9a\u8981\u5728\u51fd\u6570\u5916\u9762\n     * \u4ee4\u724c\u6876\u6bcf\u79d2\u751f\u62100.5\u4e2a\u4ee4\u724c\uff0c\u4e5f\u5373\u6bcf2\u79d2\u751f\u6210\u4e00\u4e2a\u4ee4\u724c\n     */\n    private static RateLimiter rateLimiter = RateLimiter.create(0.5);\n    private AtomicInteger count = new AtomicInteger(0);\n    @RequestMapping(\"/acquire\")\n    public String acquire() {\n        // \u83b7\u53d61\u4e2a\u4ee4\u724c\uff0c\u5982\u679c\u6ca1\u6709\u4ee4\u724c\uff0c\u5219\u963b\u585e\n        rateLimiter.acquire();\n        count.incrementAndGet();\n        return \"count=\" + count.get();\n    }\n\n    @RequestMapping(\"tryacquire\")\n    public String tryAcquire() {\n        // \u5c1d\u8bd5\u83b7\u53d61\u4e2a\u4ee4\u724c\u3002\u5982\u679c\u83b7\u53d6\u5931\u8d25\uff0c\u7acb\u5373\u8fd4\u56de\u7ed3\u679c\u3002\n        if (rateLimiter.tryAcquire()) {\n            count.incrementAndGet();\n            return \"\u83b7\u53d6\u6210\u529f\uff0ccount=\" + count.get();\n        }\n        return \"\u83b7\u53d6\u5931\u8d25\uff0ccount=\" + count.get();\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/RateLimiter%E9%99%90%E6%B5%81/#apo","title":"APO+\u6ce8\u89e3\u4f18\u5316\u7248\u4ee3\u7801","text":"<p>\u529f\u80fd\uff1a\u63d0\u4f9b\u4e863\u79cd\u57fa\u4e8e\u4ee4\u724c\u6876\u7684\u5355\u673a\u9650\u6d41\u65b9\u6848\u3002</p> <ol> <li>\u5bf9\u67d0\u4e2a\u65b9\u6cd5\u9650\u6d41\u3002</li> <li>\u5bf9\u67d0\u4e2aip\u9650\u6d41\u3002</li> <li>\u5bf9\u65b9\u6cd5+ip\u9650\u6d41\u3002</li> </ol> <p>\u9650\u6d41\u5de5\u5177\u7c7b</p> <pre><code>package com.lee.jwccourse.util;\n\nimport com.google.common.util.concurrent.RateLimiter;\nimport org.springframework.stereotype.Component;\n\nimport java.lang.reflect.Method;\nimport java.util.Map;\nimport java.util.concurrent.ConcurrentHashMap;\n\n/**\n * @author \u6653\u9f99coding\n */\n@Component\npublic class MyRateLimiterUtil {\n    private static final Map&lt;String, RateLimiter&gt; rateLimiters = new ConcurrentHashMap&lt;&gt;();\n\n    /**\n     *\n     * @param ip \u8bf7\u6c42\u7684ip\u5730\u5740\n     * @param method \u6ce8\u89e3\u4fee\u9970\u7684\u65b9\u6cd5\u540d\n     * @param permits \u5355\u4f4d\u65f6\u95f4\u901a\u8fc7\u7684\u6b21\u6570\n     * @param duration \u5355\u4f4d\u65f6\u95f4\u7684\u957f\u5ea6\uff0c\u5355\u4f4d\uff1a\u79d2\n     * @return \u662f\u5426\u6210\u529f\u901a\u8fc7\u9650\u6d41\u7b97\u6cd5\n     */\n    public static boolean tryAcquire(String ip, Method method, int permits, int duration) {\n        // \u83b7\u53d6\u51fd\u6570\u7684\u552f\u4e00\u8868\u793a\u4f5c\u4e3akey\n        String className = method.getClass().getName();\n        String methodName = method.getName();\n        int modifiers = method.getModifiers();\n        String key = ip + className + methodName + modifiers;\n        RateLimiter rateLimiter = rateLimiters.get(key);\n        if (rateLimiter == null) {\n            rateLimiter = RateLimiter.create(1.0 * permits / duration);\n            rateLimiters.put(key, rateLimiter);\n        }\n        return rateLimiter.tryAcquire();\n    }\n\n    /**\n     * \u5bf9\u65b9\u6cd5\u8fdb\u884c\u9650\u6d41\n     * @param method \u6ce8\u89e3\u4fee\u9970\u7684\u65b9\u6cd5\u540d\n     * @param permits \u5355\u4f4d\u65f6\u95f4\u901a\u8fc7\u7684\u6b21\u6570\n     * @param duration \u5355\u4f4d\u65f6\u95f4\u7684\u957f\u5ea6\uff0c\u5355\u4f4d\uff1a\u79d2\n     * @return \u662f\u5426\u6210\u529f\u901a\u8fc7\u9650\u6d41\u7b97\u6cd5\n     */\n    public static boolean tryAcquire(Method method, int permits, int duration) {\n        // \u83b7\u53d6\u51fd\u6570\u7684\u552f\u4e00\u8868\u793a\u4f5c\u4e3akey\n        String className = method.getClass().getName();\n        String methodName = method.getName();\n        int modifiers = method.getModifiers();\n        String key = className + methodName + modifiers;\n\n        RateLimiter rateLimiter = rateLimiters.get(key);\n        if (rateLimiter == null) {\n            rateLimiter = RateLimiter.create(1.0 * permits / duration);\n            rateLimiters.put(key, rateLimiter);\n        }\n        return rateLimiter.tryAcquire();\n    }\n\n    /**\n     * \u5bf9ip\u5168\u5c40\u9650\u6d41\n     * @param ip \u8bf7\u6c42ip\u6765\u6e90\n     * @param permits\n     * @param duration\n     * @return\n     */\n    public static boolean tryAcquire(String ip, int permits, int duration) {\n        RateLimiter rateLimiter = rateLimiters.get(ip);\n        if (rateLimiter == null) {\n            rateLimiter = RateLimiter.create(1.0 * permits / duration);\n            rateLimiters.put(ip, rateLimiter);\n        }\n        return rateLimiter.tryAcquire();\n    }\n}\n</code></pre> <p>\u83b7\u53d6IP\u5de5\u5177\u7c7b</p> <pre><code>package com.lee.jwccourse.util;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.util.ObjectUtils;\n\nimport javax.servlet.http.HttpServletRequest;\nimport java.net.InetAddress;\nimport java.net.UnknownHostException;\n\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class IPUtil {\n    private static final Logger logger = LoggerFactory.getLogger(IPUtil.class);\n    private static final String IP_UTILS_FLAG = \",\";\n    private static final String UNKNOWN = \"unknown\";\n    private static final String LOCALHOST_IP = \"0:0:0:0:0:0:0:1\";\n    private static final String LOCALHOST_IP1 = \"127.0.0.1\";\n\n    /**\n     * \u83b7\u53d6IP\u5730\u5740\n     * &lt;p&gt;\n     * \u4f7f\u7528Nginx\u7b49\u53cd\u5411\u4ee3\u7406\u8f6f\u4ef6\uff0c \u5219\u4e0d\u80fd\u901a\u8fc7request.getRemoteAddr()\u83b7\u53d6IP\u5730\u5740\n     * \u5982\u679c\u4f7f\u7528\u4e86\u591a\u7ea7\u53cd\u5411\u4ee3\u7406\u7684\u8bdd\uff0cX-Forwarded-For\u7684\u503c\u5e76\u4e0d\u6b62\u4e00\u4e2a\uff0c\u800c\u662f\u4e00\u4e32IP\u5730\u5740\uff0cX-Forwarded-For\u4e2d\u7b2c\u4e00\u4e2a\u975eunknown\u7684\u6709\u6548IP\u5b57\u7b26\u4e32\uff0c\u5219\u4e3a\u771f\u5b9eIP\u5730\u5740\n     */\n    public static String getIpAddr(HttpServletRequest request) {\n        String ip = null;\n        try {\n            //\u4ee5\u4e0b\u4e24\u4e2a\u83b7\u53d6\u5728k8s\u4e2d\uff0c\u5c06\u771f\u5b9e\u7684\u5ba2\u6237\u7aefIP\uff0c\u653e\u5230\u4e86x-Original-Forwarded-For\u3002\u800c\u5c06WAF\u7684\u56de\u6e90\u5730\u5740\u653e\u5230\u4e86 x-Forwarded-For\u4e86\u3002\n            ip = request.getHeader(\"X-Original-Forwarded-For\");\n            if (ObjectUtils.isEmpty(ip) || UNKNOWN.equalsIgnoreCase(ip)) {\n                ip = request.getHeader(\"X-Forwarded-For\");\n            }\n            //\u83b7\u53d6nginx\u7b49\u4ee3\u7406\u7684ip\n            if (ObjectUtils.isEmpty(ip) || UNKNOWN.equalsIgnoreCase(ip)) {\n                ip = request.getHeader(\"x-forwarded-for\");\n            }\n            if (ObjectUtils.isEmpty(ip) || UNKNOWN.equalsIgnoreCase(ip)) {\n                ip = request.getHeader(\"Proxy-Client-IP\");\n            }\n            if (ObjectUtils.isEmpty(ip) || ip.length() == 0 || UNKNOWN.equalsIgnoreCase(ip)) {\n                ip = request.getHeader(\"WL-Proxy-Client-IP\");\n            }\n            if (ObjectUtils.isEmpty(ip) || UNKNOWN.equalsIgnoreCase(ip)) {\n                ip = request.getHeader(\"HTTP_CLIENT_IP\");\n            }\n            if (ObjectUtils.isEmpty(ip) || UNKNOWN.equalsIgnoreCase(ip)) {\n                ip = request.getHeader(\"HTTP_X_FORWARDED_FOR\");\n            }\n            //\u517c\u5bb9k8s\u96c6\u7fa4\u83b7\u53d6ip\n            if (ObjectUtils.isEmpty(ip) || UNKNOWN.equalsIgnoreCase(ip)) {\n                ip = request.getRemoteAddr();\n                if (LOCALHOST_IP1.equalsIgnoreCase(ip) || LOCALHOST_IP.equalsIgnoreCase(ip)) {\n                    //\u6839\u636e\u7f51\u5361\u53d6\u672c\u673a\u914d\u7f6e\u7684IP\n                    InetAddress iNet = null;\n                    try {\n                        iNet = InetAddress.getLocalHost();\n                    } catch (UnknownHostException e) {\n                        logger.error(\"getClientIp error: {}\", String.valueOf(e));\n                    }\n                    assert iNet != null;\n                    ip = iNet.getHostAddress();\n                }\n            }\n        } catch (Exception e) {\n            logger.error(\"IPUtils ERROR \", e);\n        }\n        //\u4f7f\u7528\u4ee3\u7406\uff0c\u5219\u83b7\u53d6\u7b2c\u4e00\u4e2aIP\u5730\u5740\n        if (!ObjectUtils.isEmpty(ip) &amp;&amp; ip.indexOf(IP_UTILS_FLAG) &gt; 0) {\n            ip = ip.substring(0, ip.indexOf(IP_UTILS_FLAG));\n        }\n        return ip;\n    }\n}\n</code></pre> <p>\u6ce8\u89e3\u7c7b</p> <pre><code>package com.lee.jwccourse.annotation;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n/**\n * @author \u6653\u9f99coding\n */\n@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface MyRateLimiterAnnotation {\n\n    enum Type {\n        /**\n         * \u5bf9\u5355\u4e2a\u63a5\u53e3\u6839\u636eIP\u9650\u6d41\n         */\n        IP_API,\n        /**\n         * \u4ec5\u5bf9\u5355\u4e2a\u63a5\u53e3\u9650\u6d41\n         */\n        API,\n        /**\n         * \u5bf9IP\u8fdb\u884c\u5168\u5c40\u9650\u6d41\n         */\n        IP\n    }\n\n    Type type() default Type.IP_API;\n\n    /**\n     * \u5355\u4f4d\u65f6\u95f4\u8fd0\u884c\u8bbf\u95ee\u91cf\n     * @return\n     */\n    int permits() default 1;\n\n    /**\n     * \u5355\u4f4d\u65f6\u95f4\u6709\u591a\u5c11\u79d2\n     * @return\n     */\n    int duration() default 1;\n}\n</code></pre> <p>\u5207\u9762\u7c7b</p> <pre><code>package com.lee.jwccourse.aop;\n\nimport com.lee.jwccourse.annotation.MyRateLimiterAnnotation;\nimport com.lee.jwccourse.util.IPUtil;\nimport com.lee.jwccourse.util.MyRateLimiterUtil;\nimport com.lee.jwccourse.vo.ResponseResult;\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Pointcut;\nimport org.aspectj.lang.reflect.MethodSignature;\nimport org.springframework.stereotype.Component;\n\nimport javax.annotation.Resource;\nimport javax.servlet.http.HttpServletRequest;\nimport java.lang.reflect.Method;\n\n/**\n * @author \u6653\u9f99coding\n */\n@Aspect\n@Component\n@Slf4j\npublic class MyRateLimiterAspect {\n    @Pointcut(\"@annotation(com.lee.jwccourse.annotation.MyRateLimiterAnnotation)\")\n    public void rateLimiterPointCut() {\n    }\n\n    @Resource\n    private HttpServletRequest request;\n    @Around(\"rateLimiterPointCut()\")\n    public Object handleFunc(ProceedingJoinPoint joinPoint) throws Throwable {\n        MethodSignature signature = (MethodSignature) joinPoint.getSignature();\n        Method method = signature.getMethod();\n        MyRateLimiterAnnotation annotation = method.getAnnotation(MyRateLimiterAnnotation.class);\n\n        MyRateLimiterAnnotation.Type type = annotation.type();\n        int permits = annotation.permits();\n        int duration = annotation.duration();\n\n        if (type == MyRateLimiterAnnotation.Type.IP_API) {\n            String ipAddress = IPUtil.getIpAddr(request);\n            log.info(\"\u51fd\u6570\u540d:{}\", method.getName());\n            log.info(\"ip:{}\", ipAddress);\n            boolean success = MyRateLimiterUtil.tryAcquire(ipAddress, method, permits, duration);\n            if (!success) {\n                // \u8fd4\u56de\u5931\u8d25\u4fe1\u606f\n            }\n        }\n        else if (type == MyRateLimiterAnnotation.Type.IP) {\n            String ipAddress = IPUtil.getIpAddr(request);\n            boolean success = MyRateLimiterUtil.tryAcquire(ipAddress, permits, duration);\n            if (!success) {\n                // \u8fd4\u56de\u5931\u8d25\u4fe1\u606f\n            }\n        }\n        else if (type == MyRateLimiterAnnotation.Type.API) {\n            boolean success = MyRateLimiterUtil.tryAcquire(method, permits, duration);\n            if (!success) {\n                // \u8fd4\u56de\u5931\u8d25\u4fe1\u606f\n            }\n        }\n        return joinPoint.proceed();\n    }\n}\n</code></pre> <p>\u4f7f\u7528\u6848\u4f8b</p> <pre><code>// \u5bf9\u65b9\u6cd5+ip\u9650\u6d41\n@MyRateLimiterAnnotation(type = MyRateLimiterAnnotation.Type.IP_API, permits = 1, duration = 5)\n@PostMapping(\"/cancel\")\npublic ResponseResult cancelCourse(@RequestBody Map&lt;String, String&gt; params) {\n    // ...... \u7701\u7565\n}\n\n// \u5bf9ip\u9650\u6d41\n@MyRateLimiterAnnotation(type = MyRateLimiterAnnotation.Type.IP, permits = 1, duration = 5)\npublic void func2() {}\n\n// \u5bf9\u65b9\u6cd5\u9650\u6d41\n@MyRateLimiterAnnotation(type = MyRateLimiterAnnotation.Type.API, permits = 1, duration = 5)\npublic void func3() {}\n</code></pre>"},{"location":"Java/SpringBoot/SPringBoot%E5%BC%82%E5%B8%B8-%E6%9C%80%E4%BD%B3%E5%AE%9E%E6%88%98/","title":"SpringBoot\u5f02\u5e38-\u6700\u4f73\u5b9e\u6218","text":""},{"location":"Java/SpringBoot/SPringBoot%E5%BC%82%E5%B8%B8-%E6%9C%80%E4%BD%B3%E5%AE%9E%E6%88%98/#_1","title":"\u51c6\u5219","text":"<ol> <li>\u4e0d\u6355\u83b7\u5f02\u5e38\u5c31\u662f\u6700\u597d\u7684\u4f7f\u7528\u5f02\u5e38\u7684\u65b9\u6cd5\uff01</li> <li>\u5c3d\u53ef\u80fd\u665a\u7684\u6355\u83b7\u5f02\u5e38\uff0c\u6700\u597d\u5728\u6700\u4e0a\u5c42\u6355\u83b7\u5e76\u7edf\u4e00\u5904\u7406\u8fd9\u4e9b\u5f02\u5e38\u3002\u4e3a\u907f\u514d\u91cd\u590d\u8f93\u51fa\u5f02\u5e38\u65e5\u5fd7\uff0c\u5c3d\u53ef\u80fd\u5728\u6700\u4e0a\u5c42\u8f93\u51fa\u5f02\u5e38\u65e5\u5fd7\uff0c\u901a\u5e38\u5728\u5207\u5165controller\u7684\u5207\u9762\u4e2d\uff08\u6216@ControllerAdvice+@Exception\uff09\u6355\u83b7\u5f02\u5e38\uff0c\u4e3a\u4ec0\u4e48\u6211\u4eec\u9700\u8981\u5c06\u5f02\u5e38\u5728\u6700\u4e0a\u5c42\u6355\u83b7\uff1f\u6211\u8ba4\u4e3a\u6709\u51e0\u70b9\u539f\u56e0\uff1a</li> <li>\u6700\u4e0a\u5c42\u662f\u6700\u540e\u4e00\u6b65\u5904\u7406\u5f02\u5e38\u7684\u65f6\u673a\u3002\u7edf\u4e00\u5728\u6700\u4e0a\u5c42\u5904\u7406\u5f02\u5e38\u5f88\u65b9\u4fbf\u3002</li> <li>\u6211\u4eec\u901a\u5e38\u4f1a\u5c06\u5f02\u5e38\u4fe1\u606f\u548c\u666e\u901a\u65e5\u5fd7\u4fe1\u606f\u8f93\u51fa\u5230\u4e0d\u540c\u6587\u4ef6\u3002</li> <li>\u629b\u51fa\u5177\u4f53\u7684\u5f02\u5e38\uff0c\u800c\u4e0d\u662fException\u3002\u5efa\u8bae\u81ea\u5b9a\u4e49\u4e24\u79cd\u5f02\u5e38<code>BizException</code>\u548c<code>SysException</code>\uff0c\u5206\u522b\u8bb0\u5f55\u4e1a\u52a1\u5f02\u5e38\u548c\u7cfb\u7edf\u5f02\u5e38\u3002</li> <li>\u6355\u83b7\u5f02\u5e38\u540e\u4f7f\u7528\u8bed\u8a00\u63cf\u8ff0\u5f02\u5e38\u3002</li> </ol> <pre><code>log.error(\"\u53cd\u5e8f\u5217\u5316\u65f6\u51fa\u73b0\u5f02\u5e38: {}\", e.getMessage(), e)\n</code></pre> <ol> <li>\u4e0d\u8981\u540c\u65f6\u8bb0\u5f55\u548c\u629b\u51fa\u5f02\u5e38\uff08\u4e00\u822c\u5efa\u8bae\u6700\u4e0a\u5c42\u6253\u65e5\u5fd7\uff09\u3002</li> </ol> <pre><code>// \u9519\u8bef\u505a\u6cd5\uff1a\npublic String upload(MultipartFile file) throws BizException {\n    String originalFilename = file.getOriginalFilename();\n    if (StringUtils.isBlank(originalFilename)) {\n        log.error(\"file name can't be null!\");\n        throw new BizException(\"file name can't be null!\", e);\n    }\n}\n</code></pre> <ol> <li>\u4f18\u5148\u6355\u83b7\u5177\u4f53\u7684\u5f02\u5e38\u3002\uff08\u901a\u5e38\u5728controller\u7684\u5207\u9762\u4e2d\u6355\u83b7\u5f02\u5e38\uff09</li> </ol> <pre><code>try {\n    work();\n} catch (BizException e) {\n    // \u5904\u7406\n} catch (Exception) {\n    // \u5904\u7406\n}\n</code></pre> <ol> <li>\u81ea\u5b9a\u4e49\u5f02\u5e38\u4e0d\u8981\u4e22\u5f03\u539f\u6709\u5f02\u5e38\uff0c\u5e94\u8be5\u5c06\u539f\u59cb\u5f02\u5e38\u4f20\u5165\u81ea\u5b9a\u4e49\u5f02\u5e38\u3002\u8fd9\u79cd\u60c5\u51b5\u901a\u5e38\u53d1\u751f\u5728\u6211\u4eec\u7528\u81ea\u5df1\u7684\u5f02\u5e38\u7c7b\u66ff\u6362\u5e95\u5c42\u5305\u629b\u51fa\u7684\u5f02\u5e38\u3002\u800c\u6211\u4eec\u81ea\u5df1\u629b\u51fa\u7684\u5f02\u5e38\u4e00\u822c\u76f4\u63a5\u5f80\u4e0a\u629b\u3002</li> </ol> <pre><code>throw new SysException(\"system exception occur\", e)\n</code></pre> <ol> <li>\u4e0d\u8981\u5ffd\u7565Throwable\u5f02\u5e38\u3002</li> </ol>"},{"location":"Java/SpringBoot/SPringBoot%E5%BC%82%E5%B8%B8-%E6%9C%80%E4%BD%B3%E5%AE%9E%E6%88%98/#_2","title":"\u81ea\u5b9a\u4e49\u5f02\u5e38\u7c7b","text":"<ol> <li>BizException</li> </ol> <pre><code>package com.lhl.minio_demo.exception;\n\npublic class BizException extends Exception {\n    /**\n     * \u9519\u8bef\u7801\n     */\n    private String code;\n\n    /**\n     * \u6784\u9020\u4e00\u4e2a\u6ca1\u6709\u9519\u8bef\u4fe1\u606f\u7684 &lt;code&gt;SystemException&lt;/code&gt;\n     */\n    public BizException() {\n        super();\n    }\n\n    /**\n     * \u4f7f\u7528\u6307\u5b9a\u7684 Throwable \u548c Throwable.toString() \u4f5c\u4e3a\u5f02\u5e38\u4fe1\u606f\u6765\u6784\u9020 SystemException\n     *\n     * @param cause \u9519\u8bef\u539f\u56e0\uff0c \u901a\u8fc7 Throwable.getCause() \u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u4f20\u5165\u7684 cause\u4fe1\u606f\n     */\n    public BizException(Throwable cause) {\n        super(cause);\n    }\n\n    /**\n     * \u4f7f\u7528\u9519\u8bef\u4fe1\u606f message \u6784\u9020 SystemException\n     *\n     * @param message \u9519\u8bef\u4fe1\u606f\n     */\n    public BizException(String message) {\n        super(message);\n    }\n\n    /**\n     * \u4f7f\u7528\u9519\u8bef\u7801\u548c\u9519\u8bef\u4fe1\u606f\u6784\u9020 SystemException\n     *\n     * @param code    \u9519\u8bef\u7801\n     * @param message \u9519\u8bef\u4fe1\u606f\n     */\n    public BizException(String code, String message) {\n        super(message);\n        this.code = code;\n    }\n\n    /**\n     * \u4f7f\u7528\u9519\u8bef\u4fe1\u606f\u548c Throwable \u6784\u9020 SystemException\n     *\n     * @param message \u9519\u8bef\u4fe1\u606f\n     * @param cause   \u9519\u8bef\u539f\u56e0\n     */\n    public BizException(String message, Throwable cause) {\n        super(message, cause);\n    }\n\n    /**\n     * @param code    \u9519\u8bef\u7801\n     * @param message \u9519\u8bef\u4fe1\u606f\n     * @param cause   \u9519\u8bef\u539f\u56e0\n     */\n    public BizException(String code, String message, Throwable cause) {\n        super(message, cause);\n        this.code = code;\n    }\n\n    /**\n     * \u83b7\u53d6\u9519\u8bef\u7801\n     *\n     * @return \u9519\u8bef\u7801\n     */\n    public String getCode() {\n        return code;\n    }\n}\n</code></pre> <ol> <li>SysException</li> </ol> <pre><code>package com.lhl.minio_demo.exception;\n\npublic class SysException extends Exception {\n    /**\n     * \u9519\u8bef\u7801\n     */\n    private String code;\n\n    /**\n     * \u6784\u9020\u4e00\u4e2a\u6ca1\u6709\u9519\u8bef\u4fe1\u606f\u7684 &lt;code&gt;SystemException&lt;/code&gt;\n     */\n    public SysException() {\n        super();\n    }\n\n    /**\n     * \u4f7f\u7528\u6307\u5b9a\u7684 Throwable \u548c Throwable.toString() \u4f5c\u4e3a\u5f02\u5e38\u4fe1\u606f\u6765\u6784\u9020 SystemException\n     *\n     * @param cause \u9519\u8bef\u539f\u56e0\uff0c \u901a\u8fc7 Throwable.getCause() \u65b9\u6cd5\u53ef\u4ee5\u83b7\u53d6\u4f20\u5165\u7684 cause\u4fe1\u606f\n     */\n    public SysException(Throwable cause) {\n        super(cause);\n    }\n\n    /**\n     * \u4f7f\u7528\u9519\u8bef\u4fe1\u606f message \u6784\u9020 SystemException\n     *\n     * @param message \u9519\u8bef\u4fe1\u606f\n     */\n    public SysException(String message) {\n        super(message);\n    }\n\n    /**\n     * \u4f7f\u7528\u9519\u8bef\u7801\u548c\u9519\u8bef\u4fe1\u606f\u6784\u9020 SystemException\n     *\n     * @param code    \u9519\u8bef\u7801\n     * @param message \u9519\u8bef\u4fe1\u606f\n     */\n    public SysException(String code, String message) {\n        super(message);\n        this.code = code;\n    }\n\n    /**\n     * \u4f7f\u7528\u9519\u8bef\u4fe1\u606f\u548c Throwable \u6784\u9020 SystemException\n     *\n     * @param message \u9519\u8bef\u4fe1\u606f\n     * @param cause   \u9519\u8bef\u539f\u56e0\n     */\n    public SysException(String message, Throwable cause) {\n        super(message, cause);\n    }\n\n    /**\n     * @param code    \u9519\u8bef\u7801\n     * @param message \u9519\u8bef\u4fe1\u606f\n     * @param cause   \u9519\u8bef\u539f\u56e0\n     */\n    public SysException(String code, String message, Throwable cause) {\n        super(message, cause);\n        this.code = code;\n    }\n\n    /**\n     * \u83b7\u53d6\u9519\u8bef\u7801\n     *\n     * @return \u9519\u8bef\u7801\n     */\n    public String getCode() {\n        return code;\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/SPringBoot%E5%BC%82%E5%B8%B8-%E6%9C%80%E4%BD%B3%E5%AE%9E%E6%88%98/#_3","title":"\u5b9e\u6218\u6848\u4f8b","text":"<p>\u8fd9\u91cc\u7ed3\u5408<code>@RestControllerAdvice</code>\u6355\u83b7\u5e76\u5904\u7406\u5f02\u5e38\u3002</p> <pre><code>package com.lhl.minio_demo.handler;\n\nimport cn.hutool.json.JSONUtil;\nimport com.lhl.minio_demo.exception.BizException;\nimport com.lhl.minio_demo.exception.SysException;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.bind.annotation.RestControllerAdvice;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\n@RestControllerAdvice\n@Slf4j\npublic class GlobalExceptionHandler {\n    @ExceptionHandler(value = BizException.class)\n    public String bizException(BizException e) {  // \u8fd4\u56de\u503c\u901a\u5e38\u662f\u5bf9\u8c61\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49ResponseResult\n        Map&lt;String, String&gt; userInfo = new HashMap&lt;&gt;();\n        userInfo.put(\"username\", \"lhl\");\n        // \u5148\u6253\u5370\u6587\u5b57\u9519\u8bef\u63d0\u793a\uff0c\u518d\u5c06e\u4f20\u5165error\u51fd\u6570\uff0c\u6253\u5370\u9519\u8bef\u5806\u6808\u3002\n        log.error(\"\u4e1a\u52a1\u5f02\u5e38\uff0c\u63d0\u793a\u4fe1\u606f: {}\\n\u5f53\u524d\u7528\u6237\u4fe1\u606f: {}\\n\u5f02\u5e38\u5806\u6808: \", e.getMessage(), JSONUtil.toJsonStr(userInfo), e);\n        return \"\u4e1a\u52a1\u5f02\u5e38\";\n    }\n\n    @ExceptionHandler(value = SysException.class)\n    public String sysException(SysException e) {\n        log.error(\"\u7cfb\u7edf\u5f02\u5e38\uff0c\u63d0\u793a\u4fe1\u606f: {}\", e.getMessage(), e);\n        return \"\u7cfb\u7edf\u5f02\u5e38\";\n    }\n\n    @ExceptionHandler(value = Throwable.class)\n    public String throwable(Throwable e) {\n        log.error(\"\u672a\u77e5\u5f02\u5e38\uff0c\u63d0\u793a\u4fe1\u606f: {}\", e.getMessage(), e);\n        return \"\u672a\u77e5\u5f02\u5e38\";\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Session%E5%92%8CCookie%E5%AE%9E%E6%88%98/","title":"Session\u548cCookie\u5b9e\u6218","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/Session%E5%92%8CCookie%E5%AE%9E%E6%88%98/#session","title":"Session\u662f\u4ec0\u4e48","text":"<p>Session\u662f\u5b58\u653e\u5728\u670d\u52a1\u5668\u4e2d\u7684\u5bf9\u8c61\u3002\u6bcf\u4e00\u4e2a\u5ba2\u6237\u7aef\u8bbf\u95ee\u670d\u52a1\u5668\u65f6\uff0c\u670d\u52a1\u5668\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2aSession\u5bf9\u8c61\u8bb0\u5f55\u8be5\u7528\u6237\u7684\u8bbf\u95ee\u8bb0\u5f55\u3002</p> <p>\u5728Spring\u4e2d\uff0c\u8c03\u7528HttpServletRequest\u5bf9\u8c61\u7684getSession()\u51fd\u6570\u65f6\uff0c\u5982\u679c\u5f53\u524d\u8bf7\u6c42\u4e2d\u4e0d\u5b58\u5728\u4f1a\u8bdd\uff08session\uff09\uff0c\u5219\u4f1a\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u4f1a\u8bdd\uff0c\u5e76\u5728\u54cd\u5e94\u5934\u4e2d\u6dfb\u52a0\u4e00\u4e2aSet-Cookie\u5934\uff0c\u7528\u4e8e\u5728\u5ba2\u6237\u7aef\u4fdd\u5b58\u4f1a\u8bdd\u6807\u8bc6\u7b26\uff08Session ID\uff09\u3002\u8fd9\u662fServlet\u89c4\u8303\u7684\u9ed8\u8ba4\u884c\u4e3a\uff0cSpring Boot\u5e76\u6ca1\u6709\u6539\u53d8\u8fd9\u4e2a\u884c\u4e3a\u3002</p> <p>\u8fd9\u662f\u56e0\u4e3a\u5728Java Web\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u4f1a\u8bdd\uff08session\uff09\u662f\u7528\u4e8e\u8ddf\u8e2a\u7528\u6237\u5728\u7f51\u7ad9\u4e0a\u7684\u6d3b\u52a8\u72b6\u6001\u7684\u673a\u5236\u3002\u6bcf\u4e2a\u4f1a\u8bdd\u90fd\u6709\u4e00\u4e2a\u552f\u4e00\u7684\u6807\u8bc6\u7b26\uff08Session ID\uff09\uff0c\u5728\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u6765\u56de\u4f20\u9012\uff0c\u4ee5\u4fbf\u7ef4\u62a4\u4f1a\u8bdd\u72b6\u6001\u3002\u5f53\u5ba2\u6237\u7aef\u7b2c\u4e00\u6b21\u8bf7\u6c42\u5e94\u7528\u7a0b\u5e8f\u65f6\uff0c\u670d\u52a1\u5668\u4f1a\u5728\u54cd\u5e94\u5934\u4e2d\u6dfb\u52a0\u4e00\u4e2aSet-Cookie\u5934\uff0c\u7528\u4e8e\u5c06\u4f1a\u8bdd\u6807\u8bc6\u7b26\u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u3002\u5ba2\u6237\u7aef\u4f1a\u5c06\u8be5\u6807\u8bc6\u7b26\u5b58\u50a8\u5728Cookie\u4e2d\uff0c\u5e76\u5728\u540e\u7eed\u8bf7\u6c42\u4e2d\u81ea\u52a8\u53d1\u9001\u7ed9\u670d\u52a1\u5668\uff0c\u4ee5\u4fbf\u7ef4\u62a4\u4f1a\u8bdd\u72b6\u6001\u3002</p>"},{"location":"Java/SpringBoot/Session%E5%92%8CCookie%E5%AE%9E%E6%88%98/#cookie","title":"Cookie\u662f\u4ec0\u4e48","text":"<p>\u670d\u52a1\u5668\u521b\u5efasession\u5bf9\u8c61\u540e\uff0c\u4f1a\u5c06sessionid\u653e\u5165cookie\u5bf9\u8c61\uff0c\u5e76\u5c06cookie\u5bf9\u8c61\u8fd4\u56de\u7ed9\u7528\u6237\u3002\u7528\u6237\u5728\u4e4b\u540e\u7684\u8bbf\u95ee\u8fc7\u7a0b\u4e2d\u53ea\u9700\u8981\u643a\u5e26cookie\u5bf9\u8c61\u5373\u53ef\u3002</p>"},{"location":"Java/SpringBoot/Session%E5%92%8CCookie%E5%AE%9E%E6%88%98/#session_1","title":"Session\u7684\u521b\u5efa\u8fc7\u7a0b","text":"<p>\u5f53</p> <p>\u5177\u4f53\u6765\u8bf4\u5f53\u670d\u52a1\u5668\u6536\u5230\u4e00\u4e2a\u65b0\u7684\u8fde\u63a5\u65f6\uff0c\u4f1a\u5728\u54cd\u5e94\u4e2d\u5305\u542b<code>Set-Cookie</code>\u5b57\u6bb5\uff0c\u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u6536\u5230\u540e\u4f1a\u5c06<code>Set-Cookie</code>\u4e2d\u7684\u4fe1\u606f\uff08\u4e5f\u53ebCookie\uff09\u4fdd\u5b58\u5230\u672c\u5730\uff0c\u5728\u4e4b\u540e\u7684\u8bf7\u6c42\u4e2d\u4f1a\u5728header\u4e2d\u643a\u5e26cookie\u3002</p>"},{"location":"Java/SpringBoot/Session%E5%92%8CCookie%E5%AE%9E%E6%88%98/#_1","title":"\u4ee3\u7801\u6f14\u793a","text":"<p>\u672c\u6848\u4f8b\u57fa\u4e8eSpring Boot 2.7.X + THymeLeaf \u5b9e\u73b0\u4e00\u4e2a\u524d\u540e\u7aef\u4e0d\u5206\u79bb\u7684\u9879\u76ee\u3002\u597d\u5904\u662f\u65b9\u4fbf\u7f16\u5199\u4ee3\u7801\uff0c\u4e0d\u7528\u5199\u524d\u540e\u7aef\u4e24\u5957\u4ee3\u7801\uff0c\u5e76\u7528Ajax\u4ea4\u6362\u6570\u636e\u3002</p> <ol> <li>\u5f15\u5165\u4f9d\u8d56\uff1a</li> </ol> <pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre> <ol> <li>\u6dfb\u52a0ThymeLeaf\u7684\u914d\u7f6e\u6587\u4ef6\u4fe1\u606f\uff1a</li> </ol> <pre><code>spring.thymeleaf.cache=false\nspring.thymeleaf.check-template=true\nspring.thymeleaf.check-template-location=true\nspring.thymeleaf.servlet.content-type=text/html\nspring.thymeleaf.enabled=true\nspring.thymeleaf.encoding=UTF-8\nspring.thymeleaf.excluded-view-names=\nspring.thymeleaf.mode=HTML\nspring.thymeleaf.prefix=classpath:/templates/\nspring.thymeleaf.suffix=.html\n</code></pre> <ol> <li>\u7f16\u5199Controller\u6587\u4ef6\uff1a</li> </ol>"},{"location":"Java/SpringBoot/Session%E5%92%8CCookie%E5%AE%9E%E6%88%98/#_2","title":"\u7ec6\u8282\u95ee\u9898","text":"<p>httponly\u7684cookie\u65e0\u6cd5\u901a\u8fc7js\u64cd\u4f5c\uff0c\u9632\u6b62XSS\u653b\u51fb\uff0c\u4e5f\u65e0\u6cd5\u901a\u8fc7js\u62e6\u622a\u8be5cookie\u3002\u8fd9\u79cdcookie\u901a\u5e38\u5b58\u653e\u654f\u611f\u4fe1\u606f\u3002</p> <p><code>Set-Cookie: name=value; HttpOnly</code>\u4f1a\u88ab\u8bbe\u7f6e\u4e3ahttponly</p>"},{"location":"Java/SpringBoot/Sping%20Boot%20%E5%BC%82%E6%AD%A5%E4%BA%8B%E4%BB%B6%EF%BC%8C%E7%BA%BF%E7%A8%8B%E6%B1%A0%EF%BC%8C%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97/","title":"Sping Boot \u5f02\u6b65\u4e8b\u4ef6\uff0c\u7ebf\u7a0b\u6c60\uff0c\u4efb\u52a1\u961f\u5217","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/Sping%20Boot%20%E5%BC%82%E6%AD%A5%E4%BA%8B%E4%BB%B6%EF%BC%8C%E7%BA%BF%E7%A8%8B%E6%B1%A0%EF%BC%8C%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97/#_1","title":"\u4ec0\u4e48\u662f\u5f02\u6b65\u4e8b\u4ef6","text":"<p>\u5047\u8bbe\u6709\u8fd9\u6837\u7684\u573a\u666f\uff1a\u7528\u6237\u6253\u5f00\u4e00\u6b21\u6587\u7ae0\u65f6\uff0c\u6587\u7ae0\u7684\u9605\u8bfb\u6570+1\u3002\u5982\u679c\u6211\u4eec\u5c06\u83b7\u53d6\u6587\u7ae0\u548c\u4fee\u6539\u6587\u7ae0\u7684\u9605\u8bfb\u6570\u7684\u4ee3\u7801\u5199\u5728\u4e00\u8d77\uff0c\u5219\u4f1a\u51fa\u73b0\u8fd9\u6837\u7684\u95ee\u9898\u3002</p> <ol> <li>\u6211\u4eec\u8981\u5c3d\u5feb\u7ed9\u7528\u6237\u8fd4\u56de\u6587\u7ae0\u4fe1\u606f\uff0c\u4ee5\u6539\u5584\u9605\u8bfb\u4f53\u9a8c\u3002\u7136\u800c\u83b7\u53d6\u6587\u7ae0\u7684\u540c\u65f6\u4f34\u968f\u7740\u4fee\u6539\u6587\u7ae0\u7684\u9605\u8bfb\u6570\uff0c\u8fd9\u4f1a\u6d88\u8017\u4e00\u5b9a\u7684\u65f6\u95f4\u3002</li> <li>\u6211\u4eec\u5728\u83b7\u53d6\u6587\u7ae0\u7684\u540c\u65f6\uff0c\u53ef\u4ee5\u4e34\u65f6\u65b0\u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u7528\u4e8e\u4fee\u6539\u6587\u7ae0\u7684\u9605\u8bfb\u6570\u3002\u8fd9\u6837\u5c31\u89e3\u51b3\u4e86\u6d88\u606f\u5ef6\u8fdf\u7684\u95ee\u9898\u3002</li> <li>\u4e0a\u8ff0\u60c5\u51b5\u4e2d\uff0c\u4fee\u6539\u6587\u7ae0\u9605\u8bfb\u6570\u7684\u4e8b\u4ef6\u79f0\u4e3a\u5f02\u6b65\u4e8b\u4ef6\u3002</li> </ol>"},{"location":"Java/SpringBoot/Sping%20Boot%20%E5%BC%82%E6%AD%A5%E4%BA%8B%E4%BB%B6%EF%BC%8C%E7%BA%BF%E7%A8%8B%E6%B1%A0%EF%BC%8C%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97/#_2","title":"\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u7ebf\u7a0b\u6c60","text":"<p>\u5728\u5904\u7406\u5f02\u6b65\u4e8b\u4ef6\u7684\u8fc7\u7a0b\u4e2d\uff0cJava\u7a0b\u5e8f\u4f1a\u4e0d\u65ad\u521b\u5efa\u65b0\u7684\u7ebf\u7a0b\u7528\u4e8e\u4fee\u6539\u6587\u7ae0\u9605\u8bfb\u6570\uff0c\u8fd9\u975e\u5e38\u6d88\u8017\u7cfb\u7edf\u6027\u80fd\u3002\u5b9e\u9645\u4e0a\u6211\u4eec\u53ea\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b\u6c60\uff0c\u8ba9\u7ebf\u7a0b\u6c60\u4e2d\u7684\u7ebf\u7a0b\u5904\u7406\u8fd9\u4e9b\u5f02\u6b65\u4e8b\u4ef6\u5373\u53ef\u3002\u8fd9\u6837\u89e3\u51b3\u4e86\u7ebf\u7a0b\u9891\u7e41\u521b\u5efa\u548c\u9500\u6bc1\u5e26\u6765\u7684\u6027\u80fd\u635f\u8017\u3002</p>"},{"location":"Java/SpringBoot/Sping%20Boot%20%E5%BC%82%E6%AD%A5%E4%BA%8B%E4%BB%B6%EF%BC%8C%E7%BA%BF%E7%A8%8B%E6%B1%A0%EF%BC%8C%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97/#_3","title":"\u5982\u4f55\u521b\u5efa\u5f02\u6b65\u4e8b\u4ef6","text":"<p>\u521b\u5efa\u5f02\u6b65\u4e8b\u4ef6\u7b49\u4ef7\u4e8e\u5b9a\u4e49\u5f02\u6b65\u6267\u884c\u7684\u51fd\u6570\u3002</p> <p>\u9996\u5148\u6211\u4eec\u8981\u5728Spring Boot\u7684\u542f\u52a8\u7c7b\u4e0a\u52a0\u4e0a\u6ce8\u89e3\uff1a<code>@EnableAsync</code>\u3002</p> <p>\u7136\u540e\u6211\u4eec\u53ea\u9700\u8981\u5bf9\u5f02\u6b65\u6267\u884c\u7684\u51fd\u6570\u4e0a\u52a0\u4e0a\u6ce8\u89e3\uff1a<code>@Async</code>\u3002</p> <p>\u6ce8\u610f\uff1a\u5f02\u6b65\u51fd\u6570\u7684\u8fd4\u56de\u503c\u53ea\u80fd\u662fvoid\u6216Future\u7c7b\u578b\u3002</p> <p>@Async \u5931\u6548\u7684\u539f\u56e0\uff1a</p> <ol> <li>\u5fc5\u987b\u5728\u542f\u52a8\u7c7b\u4e2d\u589e\u52a0@EnableAsync\u6ce8\u89e3\u3002</li> <li>\u5f02\u6b65\u7c7b\u6ca1\u6709\u88abspringboot\u7ba1\u7406\uff0c\u5728\u6709\u5f02\u6b65\u65b9\u6cd5\u7684\u7c7b\u4e0a\u6dfb\u52a0@Component\u6ce8\u89e3\uff08\u6216\u5176\u4ed6\u6ce8\u89e3\uff09\u4e14\u4fdd\u8bc1\u53ef\u4ee5\u626b\u63cf\u5230\u5f02\u6b65\u7c7b\u3002</li> <li>\u8c03\u7528\u5f02\u6b65\u51fd\u6570\u7684\u51fd\u6570\u4e0d\u80fd\u548c\u5f02\u6b65\u51fd\u6570\u5728\u540c\u4e00\u4e2a\u7c7b\u4e2d\u3002</li> <li>\u5fc5\u987b\u901a\u8fc7ioc\u5bb9\u5668\u83b7\u5f97\u7684\u5bf9\u8c61\u624d\u80fd\u8c03\u7528\u5f02\u6b65\u65b9\u6cd5\uff0c\u81ea\u5df1new\u7684\u5bf9\u8c61\u4e0d\u80fd\u8c03\u7528\u5f02\u6b65\u65b9\u6cd5\u3002</li> </ol>"},{"location":"Java/SpringBoot/Sping%20Boot%20%E5%BC%82%E6%AD%A5%E4%BA%8B%E4%BB%B6%EF%BC%8C%E7%BA%BF%E7%A8%8B%E6%B1%A0%EF%BC%8C%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97/#_4","title":"\u521b\u5efa\u7ebf\u7a0b\u6c60","text":"<ol> <li> <p>\u542f\u52a8\u7c7b\u4e2d\u52a0\u4e0a\u6ce8\u89e3\uff1a<code>@EnableAsync</code>\u3002</p> </li> <li> <p>\u521b\u5efa\u7ebf\u7a0b\u6c60\uff0c\u5e76\u7ed9\u7ebf\u7a0b\u6c60\u8bbe\u5b9a\u4e00\u4e2a\u540d\u5b57\u3002\u7ebf\u7a0b\u6c60\u4e2d\u5305\u542b\u4efb\u52a1\u961f\u5217\u7684\u53c2\u6570\u3002</p> </li> </ol> <p>```java    package com.lee.threadpool.config;</p> <p>import org.springframework.context.annotation.Bean;    import org.springframework.context.annotation.Configuration;    import org.springframework.scheduling.annotation.EnableAsync;    import org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;</p> <p>import java.util.concurrent.Executor;</p> <p>/*     * @author \u6653\u9f99coding     /    @Configuration    @EnableAsync    public class ThreadPoolConfig {        // \u6307\u5b9abean\u5bf9\u8c61\u7684\u540d\u5b57\u3002        @Bean(\"taskExecutor\")        public Executor asyncServiceExecutor() {            ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();            // \u8bbe\u7f6e\u6838\u5fc3\u7ebf\u7a0b\u6570            executor.setCorePoolSize(2);            // \u8bbe\u7f6e\u6700\u5927\u7ebf\u7a0b\u6570            executor.setMaxPoolSize(2);            //\u914d\u7f6e\u3010\u4efb\u52a1\u961f\u5217\u3011\u7684\u5927\u5c0f            executor.setQueueCapacity(1000);            // \u8bbe\u7f6e\u7ebf\u7a0b\u6d3b\u8dc3\u65f6\u95f4\uff08\u79d2\uff09            executor.setKeepAliveSeconds(60);            // \u8bbe\u7f6e\u9ed8\u8ba4\u7ebf\u7a0b\u540d\u79f0            executor.setThreadNamePrefix(\"\u8ba4\u8bc1\u6a21\u5757\");            // \u7b49\u5f85\u6240\u6709\u4efb\u52a1\u7ed3\u675f\u540e\u518d\u5173\u95ed\u7ebf\u7a0b\u6c60            executor.setWaitForTasksToCompleteOnShutdown(true);            //\u6267\u884c\u521d\u59cb\u5316            executor.initialize();            return executor;        }    }    ```</p> <ol> <li>\u6307\u5b9a\u5f02\u6b65\u65b9\u6cd5\uff1a</li> </ol> <p>```java    package com.lee.threadpool.service;</p> <p>import org.springframework.scheduling.annotation.Async;    import org.springframework.stereotype.Component;</p> <p>import java.time.LocalDateTime;</p> <p>@Component    public class ThreadService {        // \u6307\u5b9a\u7ebf\u7a0b\u6c60\u201ctaskExecutor\u201d        @Async(\"taskExecutor\")        // \u4f7f\u7528Async\u6ce8\u89e3\u6807\u6ce8\u7684\u51fd\u6570\u8fd4\u56de\u503c\u5fc5\u987b\u662f void \u6216 Future-like \u7c7b\u578b        public void task() {            try {                System.out.println(LocalDateTime.now() + \": hello world!\");                // \u7761\u77205\u79d2 \u6a21\u62df\u6267\u884c\u4efb\u52a1                Thread.sleep(5000);            } catch (InterruptedException e) {                e.printStackTrace();            }        }    }    ```</p> <ol> <li>\u8c03\u7528\u5f02\u6b65\u65b9\u6cd5\uff1a</li> </ol> <p>```java    package com.lee.threadpool.controller;</p> <p>import com.lee.threadpool.service.ThreadService;    import org.springframework.beans.factory.annotation.Autowired;    import org.springframework.web.bind.annotation.GetMapping;    import org.springframework.web.bind.annotation.RequestMapping;    import org.springframework.web.bind.annotation.RestController;</p> <p>@RestController    @RequestMapping(\"/thread\")    public class ThreadController {        @Autowired        private ThreadService threadService;        @GetMapping(\"\")        String task() {            // threadService \u4e2d\u7684 task \u51fd\u6570\u5c06\u4f1a\u88ab\u653e\u5165\u7ebf\u7a0b\u6c60\u4e2d\u6267\u884c            threadService.task();            return \"\u8bbf\u95ee\u6210\u529f\";        }    }    ```</p>"},{"location":"Java/SpringBoot/Spring%20Boot%20%E5%9F%BA%E4%BA%8Esession%E7%9A%84%E9%AA%8C%E8%AF%81%E7%A0%81TODO/","title":"Spring Boot \u57fa\u4e8esession\u7684\u9a8c\u8bc1\u7801TODO","text":""},{"location":"Java/SpringBoot/Spring%20Boot%20%E5%9F%BA%E4%BA%8Esession%E7%9A%84%E9%AA%8C%E8%AF%81%E7%A0%81TODO/#markdown","title":"\u6b22\u8fce\u4f7f\u7528Markdown","text":""},{"location":"Java/SpringBoot/Spring%20Boot%20%E5%9F%BA%E4%BA%8Esession%E7%9A%84%E9%AA%8C%E8%AF%81%E7%A0%81TODO/#_1","title":"\u65b0\u589e\u56fe\u7247\u4e0a\u4f20\u529f\u80fd","text":"<p>\u73b0\u5728\u53ef\u4ee5\u5728\u6587\u7ae0\u4e2d\u63d2\u5165\u56fe\u7247\uff01</p> <ul> <li>\u60a8\u53ef\u4ee5\u63d2\u5165\u5916\u94fe\u56fe\u7247\uff0c\u6216\u4e0a\u4f20\u672c\u5730\u56fe\u7247\u5230\u6587\u6863\u4e2d\u3002</li> <li>\u53ef\u4e0a\u4f20\u7684\u5355\u5f20\u56fe\u7247\u6700\u592720M\uff0c\u652f\u6301PNG\u3001JPG\u683c\u5f0f\u3002</li> <li>\u82e5\u6709\u5176\u4ed6\u7591\u95ee\uff0c\u6b22\u8fce\u54a8\u8be2\u5b98\u7f51\u5728\u7ebf\u5ba2\u670d\u3002</li> </ul>"},{"location":"Java/SpringBoot/Spring%20Boot%20%E5%9F%BA%E4%BA%8Esession%E7%9A%84%E9%AA%8C%E8%AF%81%E7%A0%81TODO/#welcome-to-the-markdown","title":"Welcome to the Markdown","text":""},{"location":"Java/SpringBoot/Spring%20Boot%20%E5%9F%BA%E4%BA%8Esession%E7%9A%84%E9%AA%8C%E8%AF%81%E7%A0%81TODO/#new-feature-insert-pictures-in-your-articles-now","title":"New feature! Insert pictures in your articles now!","text":"<p>You can insert pictures from external links, or upload ones.</p> <p>The maximum size of the picture to upload is 20M. PNG and JPG are better.</p> <p>Have any other questions, please contact our official customer service.</p>"},{"location":"Java/SpringBoot/Spring%20Boot%2BRedis%20%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/","title":"Spring Boot+Redis \u6d88\u606f\u961f\u5217","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/Spring%20Boot%2BRedis%20%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/#_1","title":"\u4ec0\u4e48\u662f\u6d88\u606f\u961f\u5217","text":"<p>\u6d88\u606f\u961f\u5217\u4e2d\u6709\u4e09\u4e2a\u89d2\u8272\uff1a\u751f\u4ea7\u8005\u3001\u6d88\u8d39\u8005\u3001\u961f\u5217\u3002</p> <p>\u751f\u4ea7\u8005\u8d1f\u8d23\u521b\u5efa\u6d88\u606f\u5e76\u653e\u5165\u961f\u5217\u4e2d\uff1b\u6d88\u8d39\u8005\u8d1f\u8d23\u4ece\u961f\u5217\u4e2d\u53d6\u51fa\u5e76\u5904\u7406\u6d88\u606f\u3002</p> <p>\u5982\u679c\u961f\u5217\u4e3a\u7a7a\uff0c\u6d88\u8d39\u8005\u963b\u585e\uff1b\u5982\u679c\u961f\u5217\u4e3a\u6ee1\uff0c\u751f\u4ea7\u8005\u963b\u585e\u3002</p> <p>\u4f7f\u7528\u6d88\u606f\u961f\u5217\u7684\u597d\u5904\u662f\u201c\u524a\u5cf0\u201d\uff0c\u4e5f\u5373\u5f53\u5927\u91cf\u8bf7\u6c42\u6d8c\u5165\u65f6\uff0c\u53ef\u4ee5\u5148\u5c06\u8bf7\u6c42\u653e\u5230\u961f\u5217\u4e2d\uff0c\u7136\u540e\u6162\u6162\u5904\u7406\u3002</p>"},{"location":"Java/SpringBoot/Spring%20Boot%2BRedis%20%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/#_2","title":"\u8bbe\u8ba1\u601d\u8def","text":"<ol> <li> <p>\u5b9e\u73b0\u6b65\u9aa4\uff1a</p> </li> <li> <p>\u5f00\u542fSpring Boot\u7684\u5f02\u6b65\u6267\u884c\u673a\u5236\u3002</p> </li> <li> <p>\u521b\u5efa\u7ebf\u7a0b\u6c60\uff0c\u5e76\u521d\u59cb\u5316\u7ebf\u7a0b\u6c60\u4e2d\u57fa\u4e8e\u5185\u5b58\u7684\u6d88\u606f\u961f\u5217\u3002</p> <p>\u3010\u6ce8\u3011\u4e0a\u8ff0\u4e24\u6b65\u53ef\u4ee5\u53c2\u8003\u6211\u5199\u7684\u4e00\u7bc7\u6587\u7ae0\u300aSping Boot \u5f02\u6b65\u4e8b\u4ef6\uff0c\u7ebf\u7a0b\u6c60\uff0c\u4efb\u52a1\u961f\u5217\u300b\u3002</p> </li> <li> <p>\u57fa\u4e8e\u201c\u751f\u4ea7\u8005-\u6d88\u8d39\u8005\u201d\u6a21\u578b\uff0c\u5728\u9879\u76ee\u521a\u542f\u52a8\u7684\u65f6\u5019\u4e3a\u6d88\u8d39\u8005\u5206\u914d\u4e00\u4e2a\u7ebf\u7a0b\u5e76\u4e00\u76f4\u6267\u884c\uff08<code>while (true)</code>\u6b7b\u5faa\u73af\uff09\u3002\u5f53\u4efb\u52a1\u961f\u5217\u4e3a\u7a7a\u65f6\uff0c\u8ba9\u6d88\u8d39\u8005\u963b\u585e\uff1b\u5f53\u6709\u4efb\u52a1\u65f6\uff0c\u6bcf\u6b21\u6267\u884c\u4e00\u4e2a\u4efb\u52a1\u3002</p> </li> <li> <p>\u4e3a\u4ec0\u4e48\u4e0d\u76f4\u63a5\u4f7f\u7528\u57fa\u4e8e\u5185\u5b58\u7684\u6d88\u606f\u961f\u5217\u5462\uff1f</p> </li> </ol> <p>\u7b54\uff1a\u5176\u5b9e\u5728\u6700\u5f00\u59cb\u7684\u7248\u672c\u4e2d\uff0c\u6211\u91c7\u7528\u7684\u5c31\u662f\u7ebf\u7a0b\u6c60+\u6d88\u606f\u961f\u5217\u7684\u65b9\u5f0f\u5b9e\u73b0\u201c\u524a\u5cf0\u201d\u3002\u4f46\u662f\u7f3a\u70b9\u662f\u6211\u6ca1\u6cd5\u65b9\u4fbf\u7684\u67e5\u770b\u5f53\u524d\u961f\u5217\u4e2d\u6709\u54ea\u4e9b\u6d88\u606f\u3002\u800c\u5c06\u6d88\u606f\u653e\u5728Redis\u4e2d\uff0c\u5373\u53ef\u901a\u8fc7Redis\u5ba2\u6237\u7aef\u65b9\u4fbf\u67e5\u770b\u961f\u5217\u4e2d\u6709\u54ea\u4e9b\u6d88\u606f\u3002</p>"},{"location":"Java/SpringBoot/Spring%20Boot%2BRedis%20%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/#_3","title":"\u8be6\u7ec6\u6b65\u9aa4","text":""},{"location":"Java/SpringBoot/Spring%20Boot%2BRedis%20%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/#spring-boot-redis","title":"\u4e00\uff09Spring Boot \u6574\u5408 Redis","text":"<p>\u53c2\u8003\u6211\u7684\u53e6\u4e00\u7bc7\u6587\u7ae0\u300aspringboot\u6574\u5408redis\u300b\u3002</p>"},{"location":"Java/SpringBoot/Spring%20Boot%2BRedis%20%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/#_4","title":"\u4e8c\uff09\u6848\u4f8b\u4ee3\u7801","text":""},{"location":"Java/SpringBoot/Spring%20Boot%2BRedis%20%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/#maven","title":"Maven\u4f9d\u8d56","text":"<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--springboot redis--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--json\u5de5\u5177--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.alibaba.fastjson2&lt;/groupId&gt;\n        &lt;artifactId&gt;fastjson2&lt;/artifactId&gt;\n        &lt;version&gt;2.0.22&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--lombok\u6ce8\u89e3--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>"},{"location":"Java/SpringBoot/Spring%20Boot%2BRedis%20%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/#applicationproperties","title":"\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6<code>application.properties</code>","text":"<p>\u6ce8\u610f\uff1aSpring Boot 2.X \u548c 3.X \u7684\u5199\u6cd5\u6709\u4e00\u70b9\u4e0d\u540c\u3002</p> <pre><code>spring.redis.database=0\nspring.redis.host=192.168.248.128\nspring.redis.port=6379\nspring.redis.password=Redis\u6570\u636e\u5e93\u5bc6\u7801\n# springboot 2.x \u4e2d\uff0c\u4e00\u5b9a\u8981\u8bbe\u7f6e\u4e00\u4e2a\u5927\u4e8e0\u7684\u6570\u3002\u5982\u679c\u4e00\u6b21\u64cd\u4f5cRedis\u7684\u65f6\u95f4\u8d85\u8fc7\u8fd9\u4e2a\u6570\uff0c\u5219\u4f1a\u62a5\u9519\u3002\nspring.redis.timeout=1000000000000\n</code></pre>"},{"location":"Java/SpringBoot/Spring%20Boot%2BRedis%20%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/#redis","title":"Redis\u5e8f\u5217\u5316\u914d\u7f6e\u7c7b","text":"<pre><code>package com.lee.redismq.config;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.data.redis.connection.RedisConnectionFactory;\nimport org.springframework.data.redis.core.RedisTemplate;\nimport org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;\nimport org.springframework.data.redis.serializer.RedisSerializer;\n\n/**\n * @author \u6653\u9f99coding\n */\n@Configuration\npublic class RedisConfig {\n    @Bean\n    public RedisTemplate&lt;String, Object&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory) {\n        // \u521b\u5efaRedisTemplate\u5bf9\u8c61\n        RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();\n        // \u8bbe\u7f6e\u8fde\u63a5\u5de5\u5382\n        template.setConnectionFactory(redisConnectionFactory);\n        // \u521b\u5efaJSON\u5e8f\u5217\u5316\u5de5\u5177\n        GenericJackson2JsonRedisSerializer jsonRedisSerializer = new GenericJackson2JsonRedisSerializer();\n        // \u8bbe\u7f6ekey\u7684\u5e8f\u5217\u5316\n        template.setKeySerializer(RedisSerializer.string());\n        template.setHashKeySerializer(RedisSerializer.string());\n        // \u8bbe\u7f6evalue\u7684\u5e8f\u5217\u5316\n        template.setValueSerializer(jsonRedisSerializer);\n        template.setHashValueSerializer(jsonRedisSerializer);\n        return template;\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Spring%20Boot%2BRedis%20%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/#spring-bootredis_1","title":"\u6d4b\u8bd5Spring Boot\u9879\u76ee\u662f\u5426\u8fde\u63a5\u4e0aRedis\u670d\u52a1\u5668","text":"<pre><code>@SpringBootTest\nclass RedismqApplicationTests {\n    @Resource\n    private RedisTemplate&lt;String, Object&gt; redisTemplate;\n    @Test\n    void contextLoads() {\n        redisTemplate.opsForValue().set(\"name\", \"ikun\");\n        System.out.println(\"name=\" + redisTemplate.opsForValue().get(\"name\"));\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Spring%20Boot%2BRedis%20%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/#_5","title":"\u5f00\u542f\u5f02\u6b65\u673a\u5236","text":"<p>\u5177\u4f53\u6765\u8bf4\uff0c\u5c31\u662f\u6dfb\u52a0\u6ce8\u89e3<code>@EnableAsync</code>\u3002</p> <pre><code>package com.lee.redismq;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.scheduling.annotation.EnableAsync;\n\n@SpringBootApplication\n@EnableAsync\npublic class RedismqApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(RedismqApplication.class, args);\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Spring%20Boot%2BRedis%20%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/#redis_1","title":"\u81ea\u5b9a\u4e49Redis\u6d88\u606f\u961f\u5217\u5de5\u5177\u7c7b","text":"<p>\u6211\u4eec\u9700\u8981\u81ea\u5b9a\u4e49\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u6267\u884c\u7684\u52a8\u4f5c\u3002</p> <pre><code>package com.lee.mymail2.util;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.data.redis.RedisConnectionFailureException;\nimport org.springframework.data.redis.core.RedisTemplate;\nimport org.springframework.scheduling.annotation.Async;\nimport org.springframework.stereotype.Component;\n\nimport javax.annotation.Resource;\nimport java.util.concurrent.TimeUnit;\n\n/**\n * \u4f7f\u7528\u524d\u9700\u8981\u786e\u4fdd\u80fd\u6b63\u786e\u8fde\u63a5Redis\n * @author \u6653\u9f99coding\n */\n@Component\n@Slf4j\npublic class RedisMessageQueueUtil {\n    private final String MESSAGE_QUEUE = \"message_queue\";\n\n    @Resource\n    private RedisTemplate&lt;String, Object&gt; redisTemplate;\n\n    /**\n     * \u4f5c\u7528\uff1a\u5c06\u4efb\u52a1\u52a0\u5165\u961f\u5217\n     * @param obj \u5b9e\u9645\u4f7f\u7528\u7684\u8fc7\u7a0b\u4e2d\u9700\u8981\u81ea\u5b9a\u4e49\u53c2\u6570\n     * @return \u662f\u5426\u5c06\u4efb\u52a1\u52a0\u5165\u961f\u5217\n     */\n    public boolean push(String obj) {\n        try {\n            redisTemplate.opsForList().leftPush(MESSAGE_QUEUE, obj);\n        } catch (RedisConnectionFailureException e) {\n            log.info(\"redis\u8fde\u63a5\u5931\u8d25\");\n            return false;\n        }\n        log.info(\"\u6210\u529f\u52a0\u5165\u4efb\u52a1: {}\", obj);\n        return true;\n    }\n\n    /**\n     * \u5b9e\u9645\u4f7f\u7528\u7684\u65f6\u5019\u9700\u8981\u8bbe\u5b9aobj\u7684\u7c7b\u578b\uff0c\u5e76\u5728consume\u4e2d\u8c03\u7528\u5177\u4f53\u7684\u6d88\u8d39\u51fd\u6570\n     */\n    @Async\n    public void consume() {\n        while (true) {\n            try {\n                // \u4f7f\u7528\u65f6\u9700\u8981\u4fee\u6539\u4e3a\u7b26\u5408\u5b9e\u9645\u60c5\u51b5\u7684\u53c2\u6570\n                String name = (String) redisTemplate.opsForList().rightPop(MESSAGE_QUEUE, 365, TimeUnit.DAYS);\n                // \u8c03\u7528\u51fd\u6570\u8fdb\u884c\u6d88\u8d39\n                // ...\n                System.out.println(\"\u6d88\u8d39\u4efb\u52a1: \" + name);\n            } catch (RedisConnectionFailureException e) {\n                log.info(\"redis\u8fde\u63a5\u5931\u8d25\");\n                try {\n                    Thread.sleep(1000);\n                } catch (InterruptedException ex) {\n                    throw new RuntimeException(ex);\n                }\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Spring%20Boot%2BRedis%20%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/#_6","title":"\u81ea\u542f\u52a8\u6d88\u8d39\u51fd\u6570","text":"<p>\u53ef\u4ee5\u53c2\u8003\u6211\u7684\u53e6\u4e00\u7bc7\u6587\u7ae0\u300aSpringBoot\u81ea\u542f\u52a8\u7a0b\u5e8f\u300b\u3002</p> <p>\u81ea\u5b9a\u4e49\u7c7b\uff0c\u5e76\u8c03\u7528\u6d88\u8d39\u51fd\u6570\u3002</p> <pre><code>package com.lee.mymail2.config;\n\nimport com.lee.mymail2.util.RedisMessageQueueUtil;\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.stereotype.Component;\n\nimport javax.annotation.Resource;\n\n\n/**\n * @author \u6653\u9f99coding\n */\n@Component\npublic class MyInitializer implements CommandLineRunner {\n    @Resource\n    private RedisMessageQueueUtil redisMessageQueueUtil;\n    @Override\n    public void run(String... args) throws Exception {\n        // \u8c03\u7528\u521d\u59cb\u5316\u51fd\u6570\n        redisMessageQueueUtil.consume();\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Spring%20Boot%E5%8E%9F%E7%90%86/","title":"Spring Boot\u539f\u7406","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/Spring%20Boot%E5%8E%9F%E7%90%86/#_1","title":"\u4f9d\u8d56","text":"<p>\u5728Spring Boot\u7684pom\u6587\u4ef6\u4e2d\u6709\u4e00\u4e2a\u6807\u7b7e<code>parent</code>\uff0c\u5176\u4e2d\u6307\u5b9a\u4e86\u901a\u7528\u7684\u4f9d\u8d56\u7ba1\u7406\u548c\u63d2\u4ef6\u7ba1\u7406\u4fe1\u606f\u3002\u70b9\u8fdb<code>spring-boot-starter-parent -&gt; spring-boot-dependencies</code>\uff0c\u6211\u4eec\u4fbf\u80fd\u770b\u5230\u6709\u5f88\u591a\u4f9d\u8d56\u4fe1\u606f\u3002\u8fd9\u5c31\u662f\u5f88\u591a\u65f6\u5019\u6211\u4eec\u5728pom\u6587\u4ef6\u4e2d\u5bfc\u5165\u4f9d\u8d56\u65f6\u4e0d\u7528\u6307\u5b9a\u7248\u672c\u7684\u539f\u56e0\uff0c\u56e0\u4e3a\u7236\u9879\u76ee\u4e2d\u5df2\u7ecf\u6307\u5b9a\u597d\uff0c\u5e76\u4e14\u7ecf\u8fc7\u4e86\u5b8c\u6574\u7684\u6d4b\u8bd5\u3002\u4f46\u662f\u6ce8\u610f\uff0c\u5e76\u4e0d\u662f\u6211\u4eec\u4f9d\u8d56\u7684\u6240\u6709\u9879\u76ee\u90fd\u4f1a\u5305\u542b\u5728\u7236\u9879\u76ee\u4e2d\u3002</p> <p>\u5efa\u8bae\uff1a\u5f15\u5165\u6709\u4e9b\u4f9d\u8d56\u5efa\u8bae\u4e0d\u6307\u5b9a\u7248\u672c\uff0c\u56e0\u4e3aSpring\u5b98\u65b9\u5df2\u7ecf\u5728\u7236\u9879\u76ee\u4e2d\u6307\u5b9a\u4e86\u7a33\u5b9a\u7684\u7248\u672c\u3002</p>"},{"location":"Java/SpringBoot/Spring%20Boot%E5%8E%9F%E7%90%86/#starter","title":"starter","text":"<p><code>spring-boot-starter</code>\u662fSpring Boot\u7684\u6838\u5fc3starter\uff0c\u5b83\u5305\u542b\u4e86Spring\u6846\u67b6\u7684\u57fa\u7840\u6a21\u5757\uff0c\u6bd4\u5982Spring\u6838\u5fc3\u3001Spring\u4e0a\u4e0b\u6587\u3001Spring AOP\u3001Spring Test\u7b49\u3002</p> <p><code>spring-boot-starter-web</code>\u5219\u662f\u4e13\u95e8\u7528\u4e8e\u6784\u5efaWeb\u5e94\u7528\u7a0b\u5e8f\u7684starter\uff0c\u5b83\u5305\u542b\u4e86Spring MVC\u3001Tomcat\u3001Jackson\u7b49Web\u76f8\u5173\u7684\u4f9d\u8d56\u3002</p> <p>\u7531\u4e8e<code>spring-boot-starter-web</code>\u4e2d\u5305\u542b\u4e86<code>spring-boot-starter</code>\uff0c\u6240\u4ee5\u5728\u5f15\u5165\u524d\u8005\u7684\u65f6\u5019\u4e0d\u7528\u5f15\u5165\u540e\u8005\u3002</p> <p>\u540c\u7406\uff0cspring\u8fd8\u5b9a\u4e49\u4e86\u5176\u4ed6\u5f88\u591astarter\uff0c\u4f8b\u5982\uff1a<code>spring-boot-starter-aop</code>\u3002</p>"},{"location":"Java/SpringBoot/Spring%20Boot%E5%8E%9F%E7%90%86/#_2","title":"\u81ea\u52a8\u914d\u7f6e\u673a\u5236","text":"<p>\u81ea\u52a8\u662f\u6307\u6211\u4eec\u53ea\u9700\u8981\u5f15\u5165\u9700\u8981\u7684\u5305\uff0c\u4e0d\u7528\u7ba1\u76f8\u5173\u7684\u914d\u7f6e\uff0c<code>Spring Boot</code>\u4f1a\u81ea\u52a8\u5e2e\u6211\u4eec\u6ce8\u5165\u76f8\u5173<code>bean</code>\u3002\u6211\u4eec\u53ef\u4ee5\u5728\u9700\u8981\u7684\u5730\u65b9\u4f7f\u7528<code>@Autowired</code>\u6216\u8005<code>@Resource</code>\u7b49\u6ce8\u89e3\u6765\u4f7f\u7528\u5b83\u3002</p>"},{"location":"Java/SpringBoot/Spring%20Boot%E5%8E%9F%E7%90%86/#_3","title":"\u6761\u4ef6\u6ce8\u89e3","text":""},{"location":"Java/SpringBoot/Spring%20Boot%E5%8E%9F%E7%90%86/#_4","title":"\u914d\u7f6e\u4f18\u5148\u7ea7","text":"<p>\u5b98\u65b9\u6587\u6863</p> <p>\u6587\u6863\u63d0\u4f9b\u4e86\u5341\u4f59\u79cd\u914d\u7f6e\uff0c\u5176\u5e95\u5c42\u539f\u7406\u662f\uff1a\u6bcf\u79cd\u914d\u7f6e\u90fd\u5bf9\u5e94\u4e00\u4e2a<code>Map</code>\uff0c<code>Spring Boot</code>\u6309\u7167\u4f18\u5148\u7ea7\u4ece\u9ad8\u5230\u4f4e\u8fdb\u884c\u626b\u63cf\u83b7\u53d6\u914d\u7f6e\u3002</p> <p>\u8be6\u89e3</p> <ol> <li>Default properties (specified by setting <code>SpringApplication.setDefaultProperties</code>).</li> </ol> <p>```java    @SpringBootApplication    public class MyApplication {        public static void main(String[] args) {            SpringApplication application = new SpringApplication(MyApplication.class);</p> <pre><code>       // \u8bbe\u5b9a\u53c2\u6570\n       Map&lt;String, Object&gt; params = new HashMap&lt;&gt;();\n       params.put(\"server.port\", 8081);\n\n       // \u4f20\u5165\u53c2\u6570\n       application.setDefaultProperties(params);\n\n       application.run(args);\n   }\n</code></pre> <p>}    ```</p> <ol> <li><code>@PropertySource</code>annotations on your <code>@Configuration</code> classes. Please note that such property sources are not added to the <code>Environment</code> until the application context is being refreshed. This is too late to configure certain properties such as <code>logging.*</code> and <code>spring.main.*</code> which are read before refresh begins.</li> </ol> <p>\u542f\u52a8\u7c7b\u4e0a\u6dfb\u52a0<code>@PropertySource</code>\u3002</p> <p><code>java    @SpringBootApplication    @PropertySource(\"classpath:myapplication.properties\")    public class MythymeApplication {        public static void main(String[] args) {            SpringApplication.run(MythymeApplication.class, args);        }    }</code></p> <p><code>src/main/resources/</code>\u521b\u5efa<code>myapplication.properties</code>\uff0c\u5e76\u586b\u5199\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <p><code>properties    server.port=8082</code></p> <ol> <li>Config data (such as <code>application.properties</code> files).</li> </ol> <p><code>src/main/resources/application.properties</code>\u9ed8\u8ba4\u6587\u4ef6\u4e2d\u586b\u5199\u914d\u7f6e\u4fe1\u606f\u3002</p> <ol> <li>OS environment variables.</li> </ol> <p>\u4ece\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u83b7\u53d6\u73af\u5883\u53d8\u91cf\uff0c<code>idea</code>\u4e2d\u4e5f\u53ef\u4ee5\u4e34\u65f6\u914d\u7f6e\u73af\u5883\u53d8\u91cf\u3002</p> <p></p> <p></p> <ol> <li>Command line arguments.</li> </ol> <p>\u8fd9\u79cd\u65b9\u5f0f\u76f8\u5f53\u4e8e\u5728\u547d\u4ee4\u884c\u4e2d\u8f93\u5165\uff1a<code>java -jar xxx.jar --server.port=8085</code>\u3002</p> <p></p>"},{"location":"Java/SpringBoot/Spring%20Boot%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B/","title":"Spring Boot\u542f\u52a8\u6d41\u7a0b","text":"<p>[toc]</p> <p>@SpringBootApplication\u6ce8\u89e3\u7684\u542f\u52a8\u7c7b\u3002\u5b83\u7531@EnableAutoConfiguration\uff0c@SpringBootConfiguration\uff0c@ComponentScan\u7ec4\u6210\u3002</p> <p>\u6dfb\u52a0@EnableAutoConfiguration\uff0c\u542f\u52a8\u65f6\u5c31\u4f1a\u5957\u5165\u81ea\u52a8\u914d\u7f6e\u7c7b\uff08AutoConfigurationSelector\uff09\uff0c\u8fd9\u4e2a\u7c7b\u4f1a\u5c06\u6240\u6709\u7b26\u5408\u6761\u4ef6\u7684@Configuration\u914d\u7f6e\u8fdb\u884c\u52a0\u8f7d\u3002</p> <p>@SpringBootConfiguration\u7b49\u540c\u4e8e@Configuration\uff0c\u4f5c\u7528\u662f\u5c06\u8fd9\u4e2a\u7c7b\u6807\u8bb0\u4e3a\u914d\u7f6e\u7c7b\uff0c\u5e76\u52a0\u8f7d\u5230\u5bb9\u5668\u4e2d\u3002</p> <p>@ComponentScan\u81ea\u52a8\u626b\u63cf\u5e76\u52a0\u8f7d\u7b26\u5408\u6761\u4ef6\u7684bean\u3002</p> <p>Spring\u4e3b\u7c7b\u6267\u884crun\u65b9\u6cd5\u540e\uff0c\u4f1a\u7ecf\u53864\u4e2a\u9636\u6bb5\u3002</p> <p>\u670d\u52a1\u6784\u5efa</p> <p>\u73af\u5883\u51c6\u5907</p> <p>\u5bb9\u5668\u521b\u5efa</p> <p>\u586b\u5145\u5bb9\u5668</p>"},{"location":"Java/SpringBoot/Spring%20Boot%E6%95%B4%E5%90%88Thymeleaf/","title":"Spring Boot\u6574\u5408ThymeLeaf","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/Spring%20Boot%E6%95%B4%E5%90%88Thymeleaf/#_1","title":"\u5199\u5728\u524d\u9762","text":"<p>ThymeLeaf\u7528\u4e8e\u524d\u540e\u7aef\u8026\u5408\u7684\u9879\u76ee\uff0c\u901a\u5e38\u60c5\u51b5\u4e0b\u6211\u90fd\u4e0d\u4f1a\u4f7f\u7528\u3002\u53ea\u6709\u5728\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u524d\u540e\u7aefdemo\u65f6\u7528\u5230ThymeLeaf\u3002</p>"},{"location":"Java/SpringBoot/Spring%20Boot%E6%95%B4%E5%90%88Thymeleaf/#_2","title":"\u4ee3\u7801","text":"<p>\u5f15\u5165\u4f9d\u8d56\uff1apom.xml</p> <pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre> <p>\u7f16\u5199\u5173\u4e8eThymeLeaf\u7684\u914d\u7f6e\u6587\u4ef6\uff1aapplication.properties</p> <pre><code># \u751f\u4ea7\u73af\u5883false\uff0c\u7ebf\u4e0a\u73af\u5883true\n# \u8bbe\u7f6e\u4e3atrue\uff0c\u63d0\u9ad8\u4e86\u5e76\u53d1\u80fd\u529b\uff0c\u4f46\u662f\u53d8\u66f4\u540e\u4e0d\u80fd\u53ca\u65f6\u66f4\u65b0\nspring.thymeleaf.cache=false\n</code></pre> <p>\u914d\u7f6econtroller\uff1a</p> <pre><code>package com.lee.helloworld.controller;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n@Controller\n@RequestMapping(\"/index\")\npublic class IndexController {\n    @RequestMapping(\"\")\n    public String getInfo(Model model) {\n        // \u5411model\u4e2d\u5b58\u5165\u52a8\u6001\u53c2\u6570\uff0c\u7528\u4e8e\u754c\u9762\u7684\u52a8\u6001\u6e32\u67d3\n        model.addAttribute(\"msg\", \"\u4f60\u597d\u5440\uff01\");\n        // \u8fd4\u56de hello.html\u6587\u4ef6\uff08html\u540e\u7f00\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u5df2\u6307\u5b9a\uff09\n        return \"hello\";\n    }\n}\n</code></pre> <p>\u7f16\u5199html\u6587\u4ef6\uff1a<code>/src/main/resources/templates/hello.html</code></p> <pre><code>&lt;!DOCTYPE html&gt;\n&lt;!--\u6ce8\u610fhtml\u6807\u7b7e\u7684\u5c5e\u6027--&gt;\n&lt;html lang=\"ch\" xmlns:th=\"http://www.thymeleaf.org\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;title&gt;Title&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1&gt;Hello World!&lt;/h1&gt;\n    &lt;h2&gt;\u83b7\u53d6\u52a8\u6001\u6570\u636e:&lt;span th:text=\"${msg}\"&gt;&lt;/span&gt;&lt;/h2&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p>`</p>"},{"location":"Java/SpringBoot/Spring%20Boot%E6%95%B4%E5%90%88Thymeleaf/#_3","title":"\u5751","text":"<p><code>pom.xml</code>\u4e2d\u4e0d\u8981\u914d\u7f6e<code>resouces</code>\uff01\u4e0d\u7136\u4f1a500\u9519\u8bef\uff01</p>"},{"location":"Java/SpringBoot/Spring%20Boot%E6%95%B4%E5%90%88%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1/","title":"Spring Boot\u6574\u5408\u90ae\u4ef6\u670d\u52a1","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/Spring%20Boot%E6%95%B4%E5%90%88%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1/#_1","title":"\u57fa\u672c\u6982\u5ff5","text":"<ol> <li>\u6284\u9001\u4e0e\u5bc6\u9001\u662f\u4ec0\u4e48\uff1f</li> </ol>"},{"location":"Java/SpringBoot/Spring%20Boot%E6%95%B4%E5%90%88%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1/#spring-boot_1","title":"\u4f7f\u7528Spring Boot\u81ea\u5e26\u7684\u90ae\u4ef6\u670d\u52a1","text":""},{"location":"Java/SpringBoot/Spring%20Boot%E6%95%B4%E5%90%88%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1/#_2","title":"\u6b65\u9aa4\u89e3\u6790","text":"<ol> <li>\u5f00\u542fQQ\u90ae\u7bb1\u7684IMAP/SMTP\u670d\u52a1\uff0c\u767e\u5ea6\u641c\u7d22\u6559\u7a0b\u5373\u53ef\u3002</li> <li>\u521b\u5efaSpring Boot\u9879\u76ee\uff0c\u5f15\u5165\u76f8\u5173\u4f9d\u8d56\uff0c\u5e76\u5728<code>application.properties</code>\u6587\u4ef6\u4e2d\u52a0\u5165\u914d\u7f6e\u4fe1\u606f\u3002</li> <li>\u81ea\u5b9a\u4e49\u90ae\u4ef6\u53d1\u9001\u5de5\u5177\u7c7b\u5e76\u4f7f\u7528\u3002</li> </ol>"},{"location":"Java/SpringBoot/Spring%20Boot%E6%95%B4%E5%90%88%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1/#_3","title":"\u4ee3\u7801","text":"<p>pom\u4f9d\u8d56</p> <pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--\u90ae\u4ef6\u5de5\u5177\u7c7b--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre> <p>application.properties\u914d\u7f6e\u6587\u4ef6</p> <pre><code>spring.mail.host=smtp.qq.com\nspring.mail.username=\u53d1\u4ef6\u8005\u90ae\u7bb1\nspring.mail.password=qq\u90ae\u4ef6\u670d\u52a1\u5668\u5f00\u542fimap\u534f\u8bae\u540e\u751f\u6210\u7684\u5bc6\u7801\nspring.mail.protocol=smtps\nspring.mail.properties.mail.smtp.ssl.enable=true\n</code></pre> <p>\u81ea\u5b9a\u4e49\u90ae\u4ef6\u7c7b</p> <pre><code>package com.lee.easymail.pojo;\n\nimport lombok.Data;\nimport org.springframework.core.io.ByteArrayResource;\n\nimport java.io.File;\nimport java.io.InputStream;\nimport java.util.Map;\n\n/**\n * @author \u6653\u9f99coding\n */\n@Data\npublic class MyMail {\n    /**\n     * \u90ae\u4ef6\u63a5\u6536\u4eba\n     */\n    private String[] receiver;\n    /**\n     * \u90ae\u4ef6\u4e3b\u9898\n     */\n    private String subject;\n    /**\n     * \u90ae\u4ef6\u7684\u6587\u672c\u5185\u5bb9\n     */\n    private String content;\n    /**\n     * \u6284\u9001\u4eba\n     */\n    private String[] cc;\n    /**\n     * \u5bc6\u9001\u4eba\n     */\n    private String[] bcc;\n    /**\n     * \u90ae\u4ef6\u9644\u4ef6\u7684\u6587\u4ef6\u540d\n     */\n    private String attachFileName;\n    /**\n     * \u9644\u4ef6\u5185\u5bb9\uff0c\u53ef\u4ee5\u662fbyte[]\u7c7b\u578b\uff0c\u53ef\u4ee5\u662fFile\u7c7b\u578b\n     * \u5982\u679c\u6587\u4ef6\u5728\u6570\u636e\u5e93\u4e2d\uff0c\u5219\u4f7f\u7528byte[]\n     * \u5982\u679c\u6587\u4ef6\u5728\u670d\u52a1\u5668\u4e0a\uff0c\u5219\u4f7f\u7528File\n     */\n    private ByteArrayResource attachment;\n    /**\n     * \u90ae\u4ef6\u5185\u5bb9\u5185\u5d4c\u56fe\u7247\n     */\n    private Map&lt;String, String&gt; imageMap;\n    /**\n     * \u662f\u5426\u662fhtml\u6587\u672c\n     */\n    private boolean html = false;\n}\n</code></pre> <p>\u90ae\u4ef6\u53d1\u9001\u5de5\u5177\u7c7b</p> <pre><code>package com.lee.easymail.util;\n\nimport com.lee.easymail.pojo.MyMail;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.mail.javamail.JavaMailSender;\nimport org.springframework.mail.javamail.MimeMessageHelper;\nimport org.springframework.stereotype.Component;\n\nimport javax.annotation.Resource;\nimport javax.mail.MessagingException;\nimport javax.mail.internet.MimeMessage;\n\n/**\n * @author \u6653\u9f99coding\n */\n@Component\n@Slf4j\npublic class MyMailSender {\n    @Value(\"${spring.mail.username}\")\n    private String from;\n    @Resource\n    private JavaMailSender mailSender;\n\n    /**\n     * \u53d1\u9001\u90ae\u4ef6\n     * @param mail \u90ae\u4ef6\u5bf9\u8c61\n     */\n    public void send(MyMail mail) {\n        try {\n            MimeMessage message = mailSender.createMimeMessage();\n            // \u8fd9\u91cc\u8bbe\u7f6e\u4e3atrue\u624d\u80fd\u53d1\u9001\u9644\u4ef6\n            MimeMessageHelper helper = new MimeMessageHelper(message, true);\n            helper.setFrom(from);\n            helper.setTo(mail.getReceiver());\n            helper.setSubject(mail.getSubject());\n            //\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3atrue\u8868\u793a\u90ae\u4ef6\u6b63\u6587\u662fhtml\u683c\u5f0f\u7684\uff0c\u9ed8\u8ba4\u662ffalse\n            helper.setText(mail.getContent(), mail.isHtml());\n            if (mail.getCc() != null) {\n                helper.setCc(mail.getCc());\n            }\n            if (mail.getBcc() != null) {\n                helper.setBcc(mail.getBcc());\n            }\n            // \u6dfb\u52a0\u9644\u4ef6\n            if (mail.getAttachment() != null) {\n                helper.addAttachment(mail.getAttachFileName(), mail.getAttachment());\n            }\n            mailSender.send(helper.getMimeMessage());\n        } catch (MessagingException e) {\n            log.info(\"\u90ae\u4ef6\u53d1\u9001\u5931\u8d25~\");\n        }\n    }\n}\n</code></pre> <p>\u8c03\u7528\u5de5\u5177\u7c7b\uff1a\u901a\u8fc7\u6ce8\u89e3\uff0c\u4eceIOC\u5bb9\u5668\u4e2d\u83b7\u53d6\u5de5\u5177\u7c7b\u5bf9\u8c61</p> <pre><code>import com.lee.easymail.pojo.MyMail;\nimport com.lee.easymail.pojo.Paper;\nimport com.lee.easymail.util.MyMailSender;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.core.io.ByteArrayResource;\n\nimport javax.annotation.Resource;\n\n@Resource\nprivate MyMailSender myMailSender;\n\npublic String sendMail() {\n    MyMail mail = new MyMail();\n    // \u8bbe\u7f6e\u63a5\u6536\u65b9\n    mail.setReceiver(new String[]{\"aaa@qq.com\"});\n    // \u8bbe\u7f6e\u6284\u9001\u5730\u5740\n    mail.setCc(new String[]{\"bbb@qq.com\", \"ccc@qq.com\"});\n    // \u8bbe\u7f6e\u5bc6\u9001\u5730\u5740\n    mail.setBcc(new String[]{\"ddd@qq.com\"});\n    mail.setSubject(\"\u8fd9\u662f\u6211\u7684\u6d4b\u8bd5\u4e3b\u9898\");\n    mail.setContent(\"\u8fd9\u662f\u6211\u7684\u6d4b\u8bd5\u5185\u5bb9\");\n\n    // \u83b7\u53d6\u9644\u4ef6\u5185\u5bb9\n    // \u5047\u5b9aPaper\u7c7b\u7684\u7ed3\u6784\u662f\u8fd9\u6837\u7684\uff1a{ String, paperName, byte[] paperContent }\n    Paper paper = paperService.getPaperById(123);\n    if (paper != null) {\n        String paperName = paper.getPaperName();\n        byte[] paperContent = paper.getPaperContent();\n        // \u8bbe\u7f6e\u9644\u4ef6\u540d\n        mail.setAttachFileName(paperName);\n        // \u8bbe\u7f6e\u9644\u4ef6\u5185\u5bb9\n        mail.setAttachment(new ByteArrayResource(paperContent));\n    }\n    myMailSender.send(mail);\n    return \"\u53d1\u9001\u6210\u529f\uff01\";\n}\n</code></pre>"},{"location":"Java/SpringBoot/Spring%20Boot%E6%95%B4%E5%90%88%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1/#_4","title":"\u6574\u5408\u963f\u91cc\u4e91\u90ae\u4ef6\u670d\u52a1","text":""},{"location":"Java/SpringBoot/Spring%20Boot%E6%95%B4%E5%90%88%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1/#_5","title":"\u524d\u7f6e\u8981\u6c42","text":""},{"location":"Java/SpringBoot/Spring%20Boot%E6%95%B4%E5%90%88%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1/#_6","title":"\u5b98\u65b9\u6587\u6863","text":"<p>\u5feb\u901f\u4f7f\u7528API\u548cSMTP\u53d1\u4fe1\u7684\u6d41\u7a0b\u7b80\u5316\u8bf4\u660e (aliyun.com)\uff1a\u5927\u81f4\u638c\u63e1\u53d1\u4fe1\u6d41\u7a0b\u3002</p> <p>\u53d1\u9001\u90ae\u4ef6\u7684\u914d\u7f6e\u6b65\u9aa4\u7b80\u5316\u8bf4\u660e (aliyun.com)\uff1a\u9700\u8981\u6709\u4e00\u4e2a\u5907\u6848\u7684\u57df\u540d\u3002</p> <p>SMTP \u4e4b Java \u8c03\u7528\u793a\u4f8b (aliyun.com)\uff1a\u6211\u5c06\u4ee3\u7801\u5c01\u88c5\u6210\u4e00\u4e2a\u5de5\u5177\uff0c\u5728\u540e\u7eed\u6587\u6863\u4e2d\u3002</p>"},{"location":"Java/SpringBoot/Spring%20Boot%E6%95%B4%E5%90%88%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1/#_7","title":"\u4ee3\u7801","text":"<p>\u5bfc\u5165\u4f9d\u8d56\uff1a</p> <pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--\u90ae\u4ef6\u7c7b\u4f9d\u8d56--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.mail&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.mail&lt;/artifactId&gt;\n        &lt;version&gt;1.6.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;version&gt;1.18.26&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--mysql\u9a71\u52a8--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n        &lt;version&gt;8.0.32&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--mybatis-plus--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.baomidou&lt;/groupId&gt;\n        &lt;artifactId&gt;mybatis-plus-boot-starter&lt;/artifactId&gt;\n        &lt;version&gt;3.5.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre> <p>\u914d\u7f6e\u4fe1\u606f\uff1a\u914d\u7f6e\u53d1\u4fe1\u5730\u5740\uff0cSMTP\u5bc6\u7801\u548c\u56de\u4fe1\u5730\u5740\u3002\u5728\u90ae\u4ef6\u63a7\u5236\u53f0\u4e2d\u53ef\u4ee5\u67e5\u770b\u3002</p> <pre><code>ali.simple-mail.account=aaa@bbb.com\nali.simple-mail.password=123456\nali.simple-mail.reply-address=ccc@ddd.com\n</code></pre> <p>\u90ae\u4ef6\u5b9e\u4f53\u7c7b\uff1a</p> <pre><code>package com.lee.mymail2.pojo;\n\nimport lombok.Data;\nimport org.springframework.core.io.ByteArrayResource;\n\nimport javax.mail.util.ByteArrayDataSource;\nimport java.util.Map;\n\n/**\n * @author \u6653\u9f99coding\n */\n@Data\npublic class MyMail {\n    /**\n     * \u53d1\u4ef6\u4eba\u59d3\u540d\n     */\n    private String sender;\n    /**\n     * \u90ae\u4ef6\u63a5\u6536\u4eba\n     */\n    private String[] receiver;\n    /**\n     * \u90ae\u4ef6\u4e3b\u9898\n     */\n    private String subject;\n    /**\n     * \u90ae\u4ef6\u7684\u6587\u672c\u5185\u5bb9\n     */\n    private String content;\n    /**\n     * \u6284\u9001\u4eba\uff1a\u7528\u9017\u53f7\u9694\u5f00\u4e0d\u540c\u7684\u6284\u9001\u4eba\n     */\n    private String[] cc;\n    /**\n     * \u5bc6\u9001\u4eba\uff1a\u7528\u9017\u53f7\u9694\u5f00\u4e0d\u540c\u7684\u5bc6\u9001\u4eba\n     */\n    private String[] bcc;\n    /**\n     * \u90ae\u4ef6\u9644\u4ef6\u7684\u6587\u4ef6\u540d\n     */\n    private String attachFileName;\n    /**\n     * \u9644\u4ef6\u5185\u5bb9\uff0c\u53ef\u4ee5\u662fbyte[]\u7c7b\u578b\uff0c\u53ef\u4ee5\u662fFile\u7c7b\u578b\n     * \u5982\u679c\u6587\u4ef6\u5728\u6570\u636e\u5e93\u4e2d\uff0c\u5219\u4f7f\u7528byte[]\n     * \u5982\u679c\u6587\u4ef6\u5728\u670d\u52a1\u5668\u4e0a\uff0c\u5219\u4f7f\u7528File\n     */\n    private ByteArrayDataSource attachment;\n    /**\n     * \u90ae\u4ef6\u5185\u5bb9\u5185\u5d4c\u56fe\u7247\n     */\n    private Map&lt;String, String&gt; imageMap;\n    /**\n     * \u6587\u672c\u683c\u5f0f\uff1a\u9ed8\u8ba4\u4e3a\u7eaf\u6587\u672c\n     * \u7eaf\u6587\u672c\uff1atext/plain;charset=UTF-8\n     * \u8d85\u6587\u672c\uff1atext/html;charset=UTF-8\n     */\n    private String contentType = \"text/plain;charset=UTF-8\";\n}\n</code></pre> <p>\u90ae\u4ef6\u5de5\u5177\u7c7b\uff1a</p> <pre><code>package com.lee.mymail2.util;\n\nimport com.lee.mymail2.pojo.MyMail;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Component;\n\nimport javax.activation.DataHandler;\nimport javax.mail.*;\nimport javax.mail.internet.*;\nimport java.io.UnsupportedEncodingException;\nimport java.time.LocalDateTime;\nimport java.util.Date;\nimport java.util.Properties;\n\n/**\n * @author \u6653\u9f99coding\n */\n@Component\n@Slf4j\npublic class AliMailUtil {\n    @Value(\"${ali.simple-mail.account}\")\n    private String account;\n    @Value(\"${ali.simple-mail.password}\")\n    private String password;\n    @Value(\"${ali.simple-mail.reply-address}\")\n    private String reply;\n    public boolean sendMimeMail(MyMail mail) {\n        // \u914d\u7f6e\u53d1\u9001\u90ae\u4ef6\u7684\u73af\u5883\u5c5e\u6027\n        final Properties props = new Properties();\n\n        // \u8868\u793aSMTP\u53d1\u9001\u90ae\u4ef6\uff0c\u9700\u8981\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\n        props.put(\"mail.smtp.auth\", \"true\");\n        props.put(\"mail.smtp.host\", \"smtpdm.aliyun.com\");\n        //\u8bbe\u7f6e\u7aef\u53e3\uff1a\n        props.put(\"mail.smtp.port\", \"80\");//\u6216\"25\", \u5982\u679c\u4f7f\u7528ssl\uff0c\u5219\u53bb\u6389\u4f7f\u752880\u621625\u7aef\u53e3\u7684\u914d\u7f6e\uff0c\u8fdb\u884c\u5982\u4e0b\u914d\u7f6e\uff1a\n        //\u52a0\u5bc6\u65b9\u5f0f\uff1a\n        //props.put(\"mail.smtp.socketFactory.class\", \"javax.net.ssl.SSLSocketFactory\");\n        //props.put(\"mail.smtp.socketFactory.port\", \"465\");\n        //props.put(\"mail.smtp.port\", \"465\");\n\n        props.put(\"mail.smtp.from\", account);    //mailfrom \u53c2\u6570\n        props.put(\"mail.user\", account);// \u53d1\u4ef6\u4eba\u7684\u8d26\u53f7\uff08\u5728\u63a7\u5236\u53f0\u521b\u5efa\u7684\u53d1\u4fe1\u5730\u5740\uff09\n        props.put(\"mail.password\", password);// \u53d1\u4fe1\u5730\u5740\u7684smtp\u5bc6\u7801\uff08\u5728\u63a7\u5236\u53f0\u9009\u62e9\u53d1\u4fe1\u5730\u5740\u8fdb\u884c\u8bbe\u7f6e\uff09\n        //props.put(\"mail.smtp.connectiontimeout\", 1000);\n\n        // \u6784\u5efa\u6388\u6743\u4fe1\u606f\uff0c\u7528\u4e8e\u8fdb\u884cSMTP\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\n        Authenticator authenticator = new Authenticator() {\n            @Override\n            protected PasswordAuthentication getPasswordAuthentication() {\n                // \u7528\u6237\u540d\u3001\u5bc6\u7801\n                String userName = props.getProperty(\"mail.user\");\n                String password = props.getProperty(\"mail.password\");\n                return new PasswordAuthentication(userName, password);\n            }\n        };\n\n        //\u4f7f\u7528\u73af\u5883\u5c5e\u6027\u548c\u6388\u6743\u4fe1\u606f\uff0c\u521b\u5efa\u90ae\u4ef6\u4f1a\u8bdd\n        Session mailSession = Session.getInstance(props, authenticator);\n        //mailSession.setDebug(true);//\u5f00\u542fdebug\u6a21\u5f0f\n\n        //UUID uuid = UUID.randomUUID();\n        //final String messageIDValue = \"&lt;\" + uuid.toString() + \"&gt;\";\n        //\u521b\u5efa\u90ae\u4ef6\u6d88\u606f\n        MimeMessage message = new MimeMessage(mailSession) {\n            //@Override\n            //protected void updateMessageID() throws MessagingException {\n            //\u8bbe\u7f6e\u81ea\u5b9a\u4e49Message-ID\u503c\n            //setHeader(\"Message-ID\", messageIDValue);//\u521b\u5efaMessage-ID\n            //}\n        };\n\n        try {\n            // \u8bbe\u7f6e\u53d1\u4ef6\u4eba\u90ae\u4ef6\u5730\u5740\u548c\u540d\u79f0\u3002\u586b\u5199\u63a7\u5236\u53f0\u914d\u7f6e\u7684\u53d1\u4fe1\u5730\u5740\u3002\u548c\u4e0a\u9762\u7684mail.user\u4fdd\u6301\u4e00\u81f4\u3002\u540d\u79f0\u7528\u6237\u53ef\u4ee5\u81ea\u5b9a\u4e49\u586b\u5199\u3002\n            InternetAddress from = new InternetAddress(account, mail.getSender());//from \u53c2\u6570,\u53ef\u5b9e\u73b0\u4ee3\u53d1\uff0c\u6ce8\u610f\uff1a\u4ee3\u53d1\u5bb9\u6613\u88ab\u6536\u4fe1\u65b9\u62d2\u4fe1\u6216\u8fdb\u5165\u5783\u573e\u7bb1\u3002\n            message.setFrom(from);\n\n            // \u53ef\u9009\u3002\u8bbe\u7f6e\u56de\u4fe1\u5730\u5740\n            Address[] a = new Address[1];\n            a[0] = new InternetAddress(reply);\n            message.setReplyTo(a);\n\n            // \u8bbe\u7f6e\u6536\u4ef6\u4eba\u90ae\u4ef6\u5730\u5740\n            // \u540c\u65f6\u53d1\u7ed9\u591a\u4eba\uff08\u56e0\u4e3a\u90e8\u5206\u6536\u4fe1\u7cfb\u7edf\u7684\u4e00\u4e9b\u9650\u5236\uff0c\u5c3d\u91cf\u6bcf\u6b21\u6295\u9012\u7ed9\u4e00\u4e2a\u4eba\uff1b\u540c\u65f6\u6211\u4eec\u9650\u5236\u5355\u6b21\u5141\u8bb8\u53d1\u9001\u7684\u4eba\u6570\u662f60\u4eba\uff09\uff1a\n            InternetAddress[] adds = new InternetAddress[mail.getReceiver().length];\n            for (int i = 0; i &lt; mail.getReceiver().length; i++) {\n                adds[i] = new InternetAddress(mail.getReceiver()[i]);\n            }\n            message.setRecipients(Message.RecipientType.TO, adds);\n            message.setSentDate(new Date()); //\u8bbe\u7f6e\u65f6\u95f4\n            // \u8bbe\u7f6e\u90ae\u4ef6\u4e3b\u9898\n            message.setSubject(mail.getSubject());\n\n//            message.setContent(mail.getContent(), mail.getContentType());\n\n\n            // \u8bbe\u7f6e\u591a\u4e2a\u6284\u9001\u5730\u5740\n            if (null != mail.getCc()) {\n                StringBuilder ccUser = new StringBuilder();\n                for (int i = 0; i &lt; mail.getCc().length; i++) {\n                    ccUser.append(mail.getCc()[i]);\n                    if (i != mail.getCc().length - 1) {\n                        ccUser.append(\",\");\n                    }\n                }\n                @SuppressWarnings(\"static-access\")\n                InternetAddress[] internetAddressCC = new InternetAddress().parse(String.valueOf(ccUser));\n                message.setRecipients(Message.RecipientType.CC, internetAddressCC);\n            }\n\n            // \u8bbe\u7f6e\u591a\u4e2a\u5bc6\u9001\u5730\u5740\n            if (null != mail.getBcc()) {\n                StringBuilder bccUser = new StringBuilder();\n                for (int i = 0; i &lt; mail.getBcc().length; i++) {\n                    bccUser.append(mail.getBcc()[i]);\n                    if (i != mail.getBcc().length - 1) {\n                        bccUser.append(\",\");\n                    }\n                }\n                @SuppressWarnings(\"static-access\")\n                InternetAddress[] internetAddressBCC = new InternetAddress().parse(String.valueOf(bccUser));\n                message.setRecipients(Message.RecipientType.BCC, internetAddressBCC);\n            }\n\n//            //\u82e5\u9700\u8981\u5f00\u542f\u90ae\u4ef6\u8ddf\u8e2a\u670d\u52a1\uff0c\u8bf7\u4f7f\u7528\u4ee5\u4e0b\u4ee3\u7801\u8bbe\u7f6e\u8ddf\u8e2a\u94fe\u63a5\u5934\u3002\u524d\u7f6e\u6761\u4ef6\u548c\u7ea6\u675f\u89c1\u6587\u6863\"\u5982\u4f55\u5f00\u542f\u6570\u636e\u8ddf\u8e2a\u529f\u80fd\uff1f\"\n//            String tagName = \"Test\";\n//            HashMap&lt;String, String&gt; trace = new HashMap&lt;&gt;();\n//            //\u8fd9\u91cc\u4e3a\u5b57\u7b26\u4e32\"1\"\n//            trace.put(\"OpenTrace\", \"1\");      //\u6253\u5f00\u90ae\u4ef6\u8ddf\u8e2a\n//            trace.put(\"LinkTrace\", \"1\");     //\u70b9\u51fb\u90ae\u4ef6\u91cc\u7684URL\u8ddf\u8e2a\n//            trace.put(\"TagName\", tagName);   //\u63a7\u5236\u53f0\u521b\u5efa\u7684\u6807\u7b7etagname\n//            String jsonTrace = new GsonBuilder().setPrettyPrinting().create().toJson(trace);\n//            //System.out.println(jsonTrace);\n//            String base64Trace = new String(Base64.getEncoder().encode(jsonTrace.getBytes()));\n//            //\u8bbe\u7f6e\u8ddf\u8e2a\u94fe\u63a5\u5934\n//            message.addHeader(\"X-AliDM-Trace\", base64Trace);\n//            //\u90ae\u4ef6eml\u539f\u6587\u4e2d\u7684\u793a\u4f8b\u503c\uff1aX-AliDM-Trace: eyJUYWdOYW1lIjoiVGVzdCIsIk9wZW5UcmFjZSI6IjEiLCJMaW5rVHJhY2UiOiIxIn0=\n\n            //\u53d1\u9001\u9644\u4ef6\u548c\u5185\u5bb9\uff1a\n            BodyPart messageBodyPart = new MimeBodyPart();\n            //messageBodyPart.setText(\"\u6d88\u606f&lt;br&gt;Text\");//\u8bbe\u7f6e\u90ae\u4ef6\u7684\u5185\u5bb9\uff0c\u6587\u672c\n            messageBodyPart.setContent(mail.getContent(), mail.getContentType());// \u7eaf\u6587\u672c\uff1a\"text/plain;charset=UTF-8\" //\u8bbe\u7f6e\u90ae\u4ef6\u7684\u5185\u5bb9\n            //\u521b\u5efa\u591a\u91cd\u6d88\u606f\n            Multipart multipart = new MimeMultipart();\n            //\u8bbe\u7f6e\u6587\u672c\u6d88\u606f\u90e8\u5206\n            multipart.addBodyPart(messageBodyPart);\n\n            //\u9644\u4ef6\u90e8\u5206\n\n            if (mail.getAttachment() != null) {\n                //\u53d1\u9001\u9644\u4ef6\uff0c\u603b\u7684\u90ae\u4ef6\u5927\u5c0f\u4e0d\u8d85\u8fc715M\uff0c\u521b\u5efa\u6d88\u606f\u90e8\u5206\u3002\n                MimeBodyPart mimeBodyPart = new MimeBodyPart();\n                //\u8bbe\u7f6e\u8981\u53d1\u9001\u9644\u4ef6\u7684\u6587\u4ef6\u8def\u5f84\n                mimeBodyPart.setDataHandler(new DataHandler(mail.getAttachment()));\n                if (mail.getAttachFileName() == null) {\n                    mail.setAttachFileName(\"\u9ed8\u8ba4\u6587\u4ef6\");\n                    log.info(\"============start============\");\n                    log.info(\"\u91cd\u8981\u5f02\u5e38\");\n                    log.info(\"\u6587\u4ef6\u5b58\u5728\uff0c\u4f46\u662f\u6587\u4ef6\u540d\u4e0d\u5b58\u5728\u3002\u8bf7\u67e5\u770b\u6570\u636e\u5e93\u6570\u636e\u7684\u5b8c\u6574\u6027\u3002\");\n                    log.info(\"============start============\\n\");\n                }\n                //\u5904\u7406\u9644\u4ef6\u540d\u79f0\u4e2d\u6587\uff08\u9644\u5e26\u6587\u4ef6\u8def\u5f84\uff09\u4e71\u7801\u95ee\u9898\n                mimeBodyPart.setFileName(MimeUtility.encodeText(mail.getAttachFileName(), \"UTF-8\", \"B\"));\n                mimeBodyPart.addHeader(\"Content-Transfer-Encoding\", \"base64\");\n                multipart.addBodyPart(mimeBodyPart);\n            }\n\n            //\u53d1\u9001\u542b\u6709\u9644\u4ef6\u7684\u5b8c\u6574\u6d88\u606f\n            message.setContent(multipart);\n            // \u53d1\u9001\u9644\u4ef6\u4ee3\u7801\uff0c\u7ed3\u675f\n\n            // \u53d1\u9001\u90ae\u4ef6\n            Transport.send(message);\n\n        } catch (MessagingException e) {\n            String err = e.getMessage();\n            // \u5728\u8fd9\u91cc\u5904\u7406message\u5185\u5bb9\uff0c \u683c\u5f0f\u662f\u56fa\u5b9a\u7684\n            log.info(\"============start============\");\n            log.info(\"\u91cd\u8981\u5f02\u5e38\uff0c\u90ae\u4ef6\u53d1\u9001\u5f02\u5e38\");\n            log.info(\"\u53d1\u751f\u65f6\u95f4: {}\", LocalDateTime.now());\n            log.info(\"\u5f02\u5e38\u8be6\u60c5: {}\", err);\n            log.info(\"============end============\");\n        } catch (UnsupportedEncodingException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n            return false;\n        }\n        return true;\n    }\n}\n\n</code></pre> <p>\u5b9e\u6218\uff1a</p> <pre><code>@Resource\nprivate PaperService paperService;\n@Resource\nprivate AliMailUtil aliMailUtil;\n@RequestMapping(\"\")\npublic String sendMail() {\n    MyMail mail = new MyMail();\n    mail.setSender(\"\u6653\u9f99coding\");\n    mail.setSubject(\"======\u6807\u9898======\");\n    mail.setContent(\"\u8fd9\u662f\u6d4b\u8bd5\u5185\u5bb9\uff0chello world\");\n    mail.setReceiver(new String[]{\"aaa@bbb.com\"});\n    mail.setCc(new String[]{\"ccc@ddd.com\", \"eee@fff.com\"});\n    mail.setBcc(new String[]{\"ggg@hhh.com\", \"iii@jjj.com\"});\n    // \u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u4e3aHTML\u683c\u5f0f\n    mail.setContentType(\"text/plain;charset=UTF-8\");\n    // \u5047\u5b9apaper\u7684\u7c7b\u578b\u662f{byte[] paperContent; String paperName; String paId;}\n    Paper paper = paperService.getPaperById(123L);\n    if (paper != null) {\n        mail.setAttachment(new ByteArrayDataSource(paper.getPaperContent(), \"application/octet-stream\"));\n        mail.setAttachFileName(paper.getPaperName());\n    }\n    boolean success = aliMailUtil.sendMimeMail(mail);\n    if (success) {\n        return \"\u53d1\u9001\u6210\u529f\uff01\";\n    }\n    return \"\u53d1\u9001\u5931\u8d25~\";\n}\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot%2BRedis%E5%AE%9E%E6%88%98/","title":"SpringBoot+Redis\u5b9e\u6218","text":"<p>[toc]</p> <p>\u4eba\u4e3a\u7ed9\u503c\u6dfb\u52a0\u5c42\u7ea7\u5173\u7cfb\uff0c\u5b9e\u9645\u4e0a\u5e76\u6ca1\u6709\u5c42\u7ea7\u5173\u7cfb\u3002</p> <pre><code>redisTemplate.opsForValue().set(\"user:age:\", \"8\"); \n</code></pre> <p>redis\u521b\u5efa6\u4f4d\u4e8c\u8fdb\u5236\uff0c\u5e76\u5c06\u7b2c5\u4f4d\uff08\u4ece0\u8ba1\u6570\uff09\u7f6e1\u3002</p> <pre><code>stringRedisTemplate.opsForValue().setBit(\"myKey\", 5, true);\n\u76f8\u5f53\u4e8e\uff1a127.0.0.1:6379&gt; setbit mykey 5 1\n\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot%2BSa-Token%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/","title":"Spring Boot+Sa-Token\u6743\u9650\u7ba1\u7406","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/SpringBoot%2BSa-Token%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/#sa-token","title":"\u5173\u4e8eSa-Token","text":"<p>Sa-Token\u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u7684\u6743\u9650\u6821\u9a8c\u6846\u67b6\uff0c\u6211\u901a\u5e38\u5728Spring Boot\u4e2d\u96c6\u6210Sa-Token\u7528\u4e8e\u4fdd\u8bc1\u7cfb\u7edf\u7684\u5b89\u5168\u6027\u3002</p>"},{"location":"Java/SpringBoot/SpringBoot%2BSa-Token%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/#_1","title":"\u4e2a\u4eba\u4f7f\u7528\u4e60\u60ef","text":"<ol> <li>token\u7684\u683c\u5f0f\u662fJWT\u3002</li> <li>\u5f15\u5165Redis\u4fdd\u5b58JWT\uff0c\u7528\u4e8e\u63d0\u524d\u5e9f\u5f03token\u3002</li> </ol>"},{"location":"Java/SpringBoot/SpringBoot%2BSa-Token%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/#_2","title":"\u5feb\u901f\u5f00\u59cb","text":""},{"location":"Java/SpringBoot/SpringBoot%2BSa-Token%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/#_3","title":"\u4e00\u3001\u5f15\u5165\u4f9d\u8d56","text":"<ol> <li>\u4f7f\u7528sa-token\uff0c\u9700\u8981\u5f15\u5165\u6700\u57fa\u672c\u7684\u4f9d\u8d56\u3002\u53c2\u8003\u94fe\u63a5</li> </ol> <pre><code>&lt;!-- \u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f SpringBoot 3.x\uff0c\u53ea\u9700\u8981\u5c06 sa-token-spring-boot-starter \u4fee\u6539\u4e3a sa-token-spring-boot3-starter \u5373\u53ef\u3002 --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;cn.dev33&lt;/groupId&gt;\n    &lt;artifactId&gt;sa-token-spring-boot-starter&lt;/artifactId&gt;\n    &lt;version&gt;1.37.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre> <p>\u8fd8\u9700\u8981\u8fdb\u884c\u6700\u57fa\u672c\u7684\u914d\u7f6e</p> <pre><code>############## Sa-Token \u914d\u7f6e (\u6587\u6863: https://sa-token.cc) ##############\n\n# token \u540d\u79f0\uff08\u540c\u65f6\u4e5f\u662f cookie \u540d\u79f0\uff09\nsa-token.token-name=X-Jwt-Token\n# token \u6709\u6548\u671f\uff08\u5355\u4f4d\uff1a\u79d2\uff09 \u9ed8\u8ba430\u5929\uff0c-1 \u4ee3\u8868\u6c38\u4e45\u6709\u6548\nsa-token.timeout=2592000\n# token \u6700\u4f4e\u6d3b\u8dc3\u9891\u7387\uff08\u5355\u4f4d\uff1a\u79d2\uff09\uff0c\u5982\u679c token \u8d85\u8fc7\u6b64\u65f6\u95f4\u6ca1\u6709\u8bbf\u95ee\u7cfb\u7edf\u5c31\u4f1a\u88ab\u51bb\u7ed3\uff0c\u9ed8\u8ba4-1 \u4ee3\u8868\u4e0d\u9650\u5236\uff0c\u6c38\u4e0d\u51bb\u7ed3\nsa-token.active-timeout=-1\n# \u662f\u5426\u5141\u8bb8\u540c\u4e00\u8d26\u53f7\u591a\u5730\u540c\u65f6\u767b\u5f55 \uff08\u4e3a true \u65f6\u5141\u8bb8\u4e00\u8d77\u767b\u5f55, \u4e3a false \u65f6\u65b0\u767b\u5f55\u6324\u6389\u65e7\u767b\u5f55\uff09\nsa-token.is-concurrent=true\n# \u5728\u591a\u4eba\u767b\u5f55\u540c\u4e00\u8d26\u53f7\u65f6\uff0c\u662f\u5426\u5171\u7528\u4e00\u4e2a token \uff08\u4e3a true \u65f6\u6240\u6709\u767b\u5f55\u5171\u7528\u4e00\u4e2a token, \u4e3a false \u65f6\u6bcf\u6b21\u767b\u5f55\u65b0\u5efa\u4e00\u4e2a token\uff09\nsa-token.is-share=true\n# token \u98ce\u683c\uff08\u9ed8\u8ba4\u53ef\u53d6\u503c\uff1auuid\u3001simple-uuid\u3001random-32\u3001random-64\u3001random-128\u3001tik\uff09\nsa-token.token-style=uuid\n# \u662f\u5426\u8f93\u51fa\u64cd\u4f5c\u65e5\u5fd7\uff0c\u751f\u4ea7\u73af\u5883\u4e00\u822c\u5173\u95ed\nsa-token.is-log=true\n</code></pre> <ol> <li>\u6211\u4eec\u9700\u8981JWT\u683c\u5f0f\u7684token\uff0c\u9700\u8981\u5f15\u5165\u4f9d\u8d56\u3002\u53c2\u8003\u94fe\u63a5</li> </ol> <pre><code>&lt;!-- Sa-Token \u6574\u5408 jwt --&gt;\n&lt;!-- \u6ce8\u610f: sa-token-jwt \u663e\u5f0f\u4f9d\u8d56 hutool-jwt 5.7.14 \u7248\u672c\uff0c\u4fdd\u9669\u8d77\u89c1\uff1a\u4f60\u7684\u9879\u76ee\u4e2d\u8981\u4e48\u4e0d\u5f15\u5165 hutool\uff0c\u8981\u4e48\u5f15\u5165\u7248\u672c &gt;= 5.7.14 \u7684 hutool \u7248\u672c\u3002 --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;cn.dev33&lt;/groupId&gt;\n    &lt;artifactId&gt;sa-token-jwt&lt;/artifactId&gt;\n    &lt;version&gt;1.37.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre> <p>\u914d\u7f6e\u6587\u4ef6<code>application.properties</code>\u4e2d\u8fd8\u9700\u8981\u914d\u7f6e\u79c1\u94a5\u3002</p> <pre><code># jwt\u79d8\u94a5\uff08\u968f\u4fbf\u6572\u4e00\u4e32\u4e71\u7801\uff09\nsa-token.jwt-secret-key=23903k2qivfpoar89ppyoe45u0fonzfch932r4jm4ipoaufe09o\n</code></pre> <p>\u8fd8\u9700\u8981\u914d\u7f6e\u914d\u7f6e\u7c7b\u3002</p> <pre><code>package com.lee.satokendemo.config;\n\nimport cn.dev33.satoken.jwt.StpLogicJwtForSimple;\nimport cn.dev33.satoken.stp.StpLogic;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class SaTokenConfigure {\n    // Sa-Token \u6574\u5408 jwt (Simple \u7b80\u5355\u6a21\u5f0f)\uff0c\u4e00\u822c\u6765\u8bf4\u90fd\u4f7f\u7528Simple\u6a21\u5f0f\u3002\n    @Bean\n    public StpLogic getStpLogicJwt() {\n        return new StpLogicJwtForSimple();\n    }\n}\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u5e0c\u671b\u5728jwt\u4e2d\u585e\u5165\u4e00\u4e9b\u4fe1\u606f\uff0c\u9700\u8981\u5728<code>StpUtil.login()</code>\u51fd\u6570\u4e2d\u4f20\u5165\u53c2\u6570\uff0c\u4f8b\u5982\uff1a<code>StpUtil.login(10001, SaLoginConfig                .setExtra(\"name\", \"zhangsan\").setExtra(\"age\", 18).setExtra(\"role\", \"\u8d85\u7ea7\u7ba1\u7406\u5458\"));</code></p> <ol> <li>\u6211\u4eec\u8fd8\u9700\u8981\u63a5\u5165Redis\u3002\u9996\u5148\u5f15\u5165\u4f9d\u8d56\u3002</li> </ol> <pre><code>&lt;!-- \u4f7f\u7528redis\u5fc5\u7528\u7684\u4f9d\u8d56 --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;!-- Sa-Token \u6574\u5408 Redis \uff08\u4f7f\u7528 jackson \u5e8f\u5217\u5316\u65b9\u5f0f\uff09 --&gt;\n&lt;!-- redis\u6570\u636e\u5e8f\u5217\u5316\u6709\u591a\u79cd\u65b9\u5f0f\uff0c\u6211\u4eec\u901a\u5e38\u91c7\u7528jackson\u5e8f\u5217\u5316\uff0c\u8fd9\u6837\u7684\u6570\u636e\u6613\u8bfb\uff0c\u4f46\u517c\u5bb9\u6027\u5c11\u5dee(\u76ee\u524d\u8fd8\u6ca1\u9047\u5230\u517c\u5bb9\u6027\u95ee\u9898) --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;cn.dev33&lt;/groupId&gt;\n    &lt;artifactId&gt;sa-token-redis-jackson&lt;/artifactId&gt;\n    &lt;version&gt;1.37.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre> <p>\u7136\u540e\u5728<code>application.properties</code>\u4e2d\u9700\u8981\u914d\u7f6eredis\u3002</p> <pre><code># Redis\u6570\u636e\u5e93\u7d22\u5f15\uff08\u9ed8\u8ba4\u4e3a0\uff09\nspring.redis.database=1\n# Redis\u670d\u52a1\u5668\u5730\u5740\nspring.redis.host=127.0.0.1\n# Redis\u670d\u52a1\u5668\u8fde\u63a5\u7aef\u53e3\nspring.redis.port=6379\n# Redis\u670d\u52a1\u5668\u8fde\u63a5\u5bc6\u7801\uff08\u9ed8\u8ba4\u4e3a\u7a7a\uff09\n# spring.redis.password=\n# \u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\nspring.redis.timeout=10s\n# \u8fde\u63a5\u6c60\u6700\u5927\u8fde\u63a5\u6570\nspring.redis.lettuce.pool.max-active=200\n# \u8fde\u63a5\u6c60\u6700\u5927\u963b\u585e\u7b49\u5f85\u65f6\u95f4\uff08\u4f7f\u7528\u8d1f\u503c\u8868\u793a\u6ca1\u6709\u9650\u5236\uff09\nspring.redis.lettuce.pool.max-wait=-1ms\n# \u8fde\u63a5\u6c60\u4e2d\u7684\u6700\u5927\u7a7a\u95f2\u8fde\u63a5\nspring.redis.lettuce.pool.max-idle=10\n# \u8fde\u63a5\u6c60\u4e2d\u7684\u6700\u5c0f\u7a7a\u95f2\u8fde\u63a5\nspring.redis.lettuce.pool.min-idle=0\n</code></pre> <p>\u7136\u540e\u76f4\u63a5\u4f7f\u7528\u5c31\u884c\u3002sa-token\u4f1a\u81ea\u52a8\u5c06token\u5b58\u5165redis\u3002</p> <p>\u670d\u52a1\u5668\u91cd\u542f\u540e\uff0c\u53ea\u8981redis\u4e2d\u7684token\u8fd8\u5b58\u5728\uff0c\u90fd\u4f1a\u4fdd\u7559\u7528\u6237\u7684\u767b\u9646\u72b6\u6001\u3002</p> <ol> <li>\u901a\u5e38\u8fd8\u4f1a\u914d\u7f6e\u4e00\u4e2a\u5168\u5c40\u62e6\u622a\u5668\uff0c\u5982\u679c\u7528\u6237\u767b\u9646\u4e86\uff0c\u624d\u80fd\u8bbf\u95ee\u5927\u591a\u6570\u7aef\u53e3\u3002\u540c\u65f6\u4e5f\u9700\u8981\u653e\u884c\u4e00\u4e9b\u7aef\u53e3\u4f9b\u6240\u6709\u4eba\u8bbf\u95ee\uff0c\u6bd4\u5982\u767b\u9646\u7684\u63a5\u53e3\u3002\u56e0\u6b64\u6211\u4eec\u9700\u8981\u4fee\u6539\u4e4b\u524d\u5173\u4e8esa-token\u7684\u914d\u7f6e\u7c7b\u3002</li> </ol> <p>\u5982\u679c\u7528\u6237\u6ca1\u6709\u901a\u8fc7\u62e6\u622a\u5668\uff0c\u4f1a\u62a5500\u9519\u8bef\u3002</p> <pre><code>package com.lee.satokendemo.config;\n\nimport cn.dev33.satoken.interceptor.SaInterceptor;\nimport cn.dev33.satoken.stp.StpUtil;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.config.annotation.InterceptorRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@Configuration\npublic class SaTokenConfigure implements WebMvcConfigurer {\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        // \u6ce8\u518c Sa-Token \u62e6\u622a\u5668\uff0c\u6821\u9a8c\u89c4\u5219\u4e3a StpUtil.checkLogin() \u767b\u5f55\u6821\u9a8c\u3002\n        registry.addInterceptor(new SaInterceptor(handle -&gt; StpUtil.checkLogin()))\n                .addPathPatterns(\"/**\")\n                .excludePathPatterns(\"/acc/doLogin\")\n                    .excludePathPatterns(\"/acc/isLogin\");;\n    }\n}\n</code></pre> <ol> <li>\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u6d4b\u8bd5\u6848\u4f8b\uff1a</li> </ol> <pre><code>package com.lee.satokendemo.controller;\n\nimport cn.dev33.satoken.stp.SaLoginConfig;\nimport cn.dev33.satoken.stp.StpUtil;\nimport cn.dev33.satoken.util.SaResult;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping (\"acc\")\npublic class LoginController {\n    // \u6d4b\u8bd5\u767b\u5f55  ---- http://localhost:8081/acc/doLogin?name=zhang&amp;pwd=123456\n    @RequestMapping(\"doLogin\")\n    public SaResult doLogin(String name, String pwd) {\n        // \u6b64\u5904\u4ec5\u4f5c\u6a21\u62df\u793a\u4f8b\uff0c\u771f\u5b9e\u9879\u76ee\u9700\u8981\u4ece\u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u6570\u636e\u8fdb\u884c\u6bd4\u5bf9\n        if(\"zhang\".equals(name) &amp;&amp; \"123456\".equals(pwd)) {\n            StpUtil.login(10001, SaLoginConfig\n                    .setExtra(\"name\", \"zhangsan\")\n                    .setExtra(\"age\", 18)\n                    .setExtra(\"role\", \"\u8d85\u7ea7\u7ba1\u7406\u5458\"));  // \u8fd9\u91cc\u4f20\u5165\u7684id\u5efa\u8bae\u8bbe\u7f6e\u4e3a\u7528\u6237\u7279\u6709\u7684\u5b57\u6bb5\uff0c\u6bd4\u5982uid\u3002\n            return SaResult.ok(\"\u767b\u5f55\u6210\u529f\");\n        }\n        return SaResult.error(\"\u767b\u5f55\u5931\u8d25\");\n    }\n\n    // \u67e5\u8be2\u767b\u5f55\u72b6\u6001  ---- http://localhost:8081/acc/isLogin\n    @RequestMapping(\"isLogin\")\n    public SaResult isLogin() {\n        return SaResult.ok(\"\u662f\u5426\u767b\u5f55\uff1a\" + StpUtil.isLogin());\n    }\n\n    // \u67e5\u8be2 Token \u4fe1\u606f  ---- http://localhost:8081/acc/tokenInfo\n    @RequestMapping(\"tokenInfo\")\n    public SaResult tokenInfo() {\n        return SaResult.data(StpUtil.getTokenInfo());\n    }\n\n    // \u6d4b\u8bd5\u6ce8\u9500  ---- http://localhost:8081/acc/logout\n    @RequestMapping(\"logout\")\n    public SaResult logout() {\n        StpUtil.logout();\n        return SaResult.ok();\n    }\n\n    // \u6d4b\u8bd5\u5c01\u7981  ---- http://localhost:8081/acc/disable?id=10001\n    @RequestMapping(\"disable\")\n    public SaResult disable(String id) {\n        StpUtil.disable(id, 86400);\n        return SaResult.ok(\"\u5c01\u7981\u6210\u529f, id=\" + id);\n    }\n}\n\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot%2BSa-Token%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/#_4","title":"\u8bbe\u8ba1\u7406\u5ff5","text":"<ol> <li> <p>\u76f8\u540c\u7528\u6237\u591a\u6b21\u8c03\u7528\u767b\u9646\u63a5\u53e3\uff0c\u4f1a\u5728redis\u4e2d\u751f\u6210\u591a\u4e2atoken\u5417\uff1f\u4f1a\u7684\uff01\u5982\u679c\u5220\u6389\u6700\u8fd1\u751f\u6210\u7684token\uff0c\u4f1a\u63d0\u793a\u8be5\u7528\u6237\u8fd8\u4f1a\u767b\u9646\u5417\uff1f\u4f1a\u7684\uff0c\u5373\u4fbf\u4e4b\u524d\u751f\u6210\u7684token\u8fd8\u4fdd\u7559\u5728redis\u4e2d\u3002</p> </li> <li> <p>\u5c01\u7981\u8d26\u53f7\u3001\u9000\u51fa\u767b\u9646\u3001\u8e22\u4eba\u4e0b\u7ebf\u6709\u4ec0\u4e48\u533a\u522b\uff1f\u4e3a\u4ec0\u4e48\u8981\u6709\u8e22\u4eba\u4e0b\u7ebf\u7684\u529f\u80fd\uff08\u4e2a\u4eba\u8ba4\u4e3a\u662f\u591a\u7aef\u767b\u9646\uff09</p> </li> </ol> <p>\u5c01\u7981\u8d26\u53f7<code>StpUtil.disable(id, 86400)</code>\uff1a\u4f1a\u5728redis\u4e2d\u63d2\u5165\u4e00\u6761\u8bb0\u5f55\uff0c\u5e76\u4fdd\u7559\u539f\u5148\u7684\u8bb0\u5f55\uff0c\u7528\u6237\u4ecd\u7136\u5904\u4e8e\u767b\u9646\u72b6\u6001\uff0c\u53ea\u662f\u65e0\u6cd5\u901a\u8fc7<code>StpUtil.checkDisable(loginId)</code>\u51fd\u6570\u3002\u601d\u8003\u4e3a\u4ec0\u4e48\u4f1a\u5728redis\u4e2d\u63d2\u5165\u4e00\u6761\u8bb0\u5f55\u5462\uff1f\u5047\u5b9a\u5c01\u7981\u8d26\u53f7\u662f\u5220\u9664\u539f\u5148\u7684token\uff0c\u90a3\u4e48\u7528\u6237\u91cd\u65b0\u767b\u9646\u540e\u5c31\u4f1a\u751f\u6210\u65b0\u7684token\uff0c\u8fd9\u6837\u5c01\u7981\u5c31\u5931\u6548\u4e86\u3002\u53ef\u4ee5\u8bd5\u8bd5\uff0c\u5728redis\u4e2d\u5220\u6389\u8be5\u8bb0\u5f55\uff0c\u5c01\u7981\u8d26\u53f7\u5c31\u89e3\u9664\u4e86\u3002</p> <p>\u9000\u51fa\u767b\u9646\uff1a</p>"},{"location":"Java/SpringBoot/SpringBoot%2BSa-Token%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/#todo","title":"todo","text":"<ol> <li>\u5c01\u7981\u8d26\u53f7\u65f6\uff0c\u5982\u4f55\u67e5\u770b\u8fd8\u6709\u591a\u4e45\u89e3\u5c01</li> <li>\u5c01\u7981\u90e8\u5206\u529f\u80fd\u5982\u4f55\u5b9e\u73b0\uff1f</li> </ol>"},{"location":"Java/SpringBoot/SpringBoot%E6%8E%A5%E5%85%A5Minio/","title":"SpringBoot\u63a5\u5165Minio","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/SpringBoot%E6%8E%A5%E5%85%A5Minio/#_1","title":"\u73af\u5883","text":"<ol> <li>JDK 21</li> <li>SpringBoot 3.2.0</li> </ol>"},{"location":"Java/SpringBoot/SpringBoot%E6%8E%A5%E5%85%A5Minio/#_2","title":"\u6b65\u9aa4","text":""},{"location":"Java/SpringBoot/SpringBoot%E6%8E%A5%E5%85%A5Minio/#minio","title":"\u4e00\u3001\u5b89\u88c5Minio","text":"<p>\u5efa\u8bae\u76f4\u63a5\u53bb1panel\u4e0a\u5feb\u6377\u5b89\u88c5Minio\u955c\u50cf\u3002</p>"},{"location":"Java/SpringBoot/SpringBoot%E6%8E%A5%E5%85%A5Minio/#minio_1","title":"\u4e8c\u3001\u7ed9Minio\u670d\u52a1\u914d\u7f6e\u57df\u540d","text":"<ol> <li>\u5efa\u8bae\u5148\u5728\u81ea\u5df1\u7684\u670d\u52a1\u5668\u4e0a\u5b89\u88c5openrestry\uff08\u5efa\u8bae1panel\u4e0a\u5feb\u6377\u5b89\u88c5\uff09\u3002</li> <li>Minio\u670d\u52a1\u6709\u4e24\u4e2a\u63a5\u53e3\uff0c\u9ed8\u8ba49000\u662f\u64cd\u4f5c\u754c\u9762\u7684\u63a5\u53e3\uff0c9001\u662fapi\u63a5\u53e3\uff08\u53ef\u4ee5\u968f\u610f\u5b9a\u4e49\u63a5\u53e3\uff09\u3002\u7136\u540e\u817e\u8baf\u4e91DNS\u7533\u8bf7\u4e24\u4e2a\u57df\u540d\uff0c\u89e3\u6790\u5230\u81ea\u5df1\u7684\u670d\u52a1\u5668\u768480\u7aef\u53e3\u3002</li> <li>OpenRestry\u4e2d\u914d\u7f6e\u53cd\u5411\u4ee3\u7406\uff0c\u5206\u522b\u4ee3\u7406\u64cd\u4f5c\u9875\u9762\u5bf9\u5e94\u7684\u63a5\u53e3\u548capi\u5bf9\u5e94\u7684\u63a5\u53e3\u3002</li> <li>\u5c3d\u91cf\u7ed9\u4e24\u4e2a\u57df\u540d\u90fd\u7533\u8bf7SSL\u8bc1\u4e66\uff08\u5efa\u8bae\u57281panel\u4e0a\u5feb\u6377\u7533\u8bf7\uff09\u3002</li> </ol>"},{"location":"Java/SpringBoot/SpringBoot%E6%8E%A5%E5%85%A5Minio/#spring-boot","title":"\u4e09\u3001\u521d\u59cb\u5316Spring Boot\u9879\u76ee","text":"<p>\u4ee3\u7801\u4e2d\u629b\u51fa\u5f02\u5e38\u7684\u90e8\u5206\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u60c5\u51b5\u505a\u5904\u7406\u3002</p>"},{"location":"Java/SpringBoot/SpringBoot%E6%8E%A5%E5%85%A5Minio/#1","title":"1. \u914d\u7f6e\u4f9d\u8d56","text":"<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.2.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.lhl&lt;/groupId&gt;\n    &lt;artifactId&gt;minio_demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;minio_demo&lt;/name&gt;\n    &lt;description&gt;minio_demo&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;21&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.minio&lt;/groupId&gt;\n            &lt;artifactId&gt;minio&lt;/artifactId&gt;\n            &lt;version&gt;8.5.7&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/cn.hutool/hutool-all --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;cn.hutool&lt;/groupId&gt;\n            &lt;artifactId&gt;hutool-all&lt;/artifactId&gt;\n            &lt;version&gt;5.8.23&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;RELEASE&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot%E6%8E%A5%E5%85%A5Minio/#2-applicationyml","title":"2. application.yml\u914d\u7f6e\u4fe1\u606f","text":"<pre><code>minio:\n  endpoint: api.minio.lihailong.vip\n  bucketName: picture\n  accessKey: GGaVLCgUNefF7y5HsfsR\n  secretKey: M7JGgaDmmB8kQko1JUsjbw7KgOOKeu4NzRnhZYYl\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot%E6%8E%A5%E5%85%A5Minio/#3","title":"3. \u914d\u7f6e\u7c7b","text":"<pre><code>package com.lhl.minio_demo.config;\n\nimport io.minio.MinioClient;\nimport lombok.Data;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Data\n@Configuration\npublic class MinioConfig {\n    @Value(\"${minio.endpoint}\")\n    private String endpoint;\n    @Value(\"${minio.accessKey}\")\n    private String accessKey;\n    @Value(\"${minio.secretKey}\")\n    private String secretKey;\n    @Value(\"${minio.bucketName}\")\n    private String bucketName;\n\n    @Bean\n    public MinioClient minioClient() {\n        return MinioClient.builder()\n                .endpoint(endpoint)\n                .credentials(accessKey, secretKey)\n                .build();\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot%E6%8E%A5%E5%85%A5Minio/#4","title":"4. \u5de5\u5177\u7c7b","text":"<p>\u4f7f\u7528nginx\u505a\u53cd\u5411\u4ee3\u7406\u65f6\uff0c\u5982\u679cbucketExist\u8fd9\u4e2aapi\u51fa\u9519\uff0c\u8bb0\u5f97\u7ed9nginx\u7684\u914d\u7f6e\u8bbe\u7f6e\uff1a<code>proxy_cache_convert_head off</code></p> <pre><code>package com.lhl.minio_demo.util;\n\nimport cn.hutool.core.date.DateUtil;\nimport cn.hutool.core.util.IdUtil;\nimport cn.hutool.core.util.StrUtil;\nimport com.lhl.minio_demo.config.MinioConfig;\nimport com.lhl.minio_demo.exception.BizException;\nimport com.lhl.minio_demo.exception.SysException;\nimport io.micrometer.common.util.StringUtils;\nimport io.minio.*;\nimport io.minio.errors.*;\nimport jakarta.annotation.Resource;\nimport jakarta.servlet.ServletOutputStream;\nimport jakarta.servlet.http.HttpServletResponse;\nimport lombok.Data;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.beans.factory.InitializingBean;\nimport org.springframework.stereotype.Component;\nimport org.springframework.util.CollectionUtils;\nimport org.springframework.util.FastByteArrayOutputStream;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.IOException;\nimport java.net.URLEncoder;\nimport java.nio.charset.StandardCharsets;\nimport java.security.InvalidKeyException;\nimport java.security.NoSuchAlgorithmException;\nimport java.util.List;\nimport java.util.Objects;\n\n\n@Component\n@Slf4j\npublic class MinioUtil implements InitializingBean {\n    @Resource\n    private MinioConfig prop;\n\n    @Resource\n    private MinioClient minioClient;\n\n    /**\n     * \u9879\u76ee\u542f\u52a8\u65f6\u6821\u9a8c\n     */\n    @Override\n    public void afterPropertiesSet() {\n        boolean bucketExist = bucketExist(prop.getBucketName());\n        if (bucketExist) {\n            log.info(\"\u5bf9\u8c61\u6876\u5b58\u5728, \u6876\u540d:{}\uff0cminio\u52a0\u8f7d\u6210\u529f\u3002\", prop.getBucketName());\n        } else {\n            log.error(\"\u5bf9\u8c61\u6876\u4e0d\u5b58\u5728, \u6876\u540d:{}\", prop.getBucketName());\n        }\n    }\n\n    /**\n     * \u5224\u65ad\u6876\u662f\u5426\u5b58\u5728\n     * @param bucketName\n     * @return\n     */\n    public boolean bucketExist(String bucketName) {\n        try {\n            return minioClient.bucketExists(BucketExistsArgs.builder().bucket(bucketName).build());\n        } catch (ErrorResponseException | InsufficientDataException | InternalException | InvalidKeyException |\n                 InvalidResponseException | IOException | NoSuchAlgorithmException | ServerException |\n                 XmlParserException e) {\n            return false;\n        }\n    }\n\n    /**\n     * \u5224\u65ad\u5bf9\u8c61\u662f\u5426\u5b58\u5728\n     * @param filename\n     * @return\n     * @throws SysException\n     */\n    public boolean objectExist(String filename) throws SysException {\n        try {\n            GetObjectResponse response = minioClient.getObject(GetObjectArgs.builder().bucket(prop.getBucketName()).object(filename).build());\n            return true;\n        } catch (ErrorResponseException | InsufficientDataException | InternalException | InvalidKeyException |\n                 InvalidResponseException | IOException | NoSuchAlgorithmException | ServerException |\n                 XmlParserException e) {\n            return false;\n        }\n    }\n\n    /**\n     * \u5224\u65ad\u4e0a\u4f20\u7684\u6587\u4ef6\u7c7b\u578b\u662f\u5426\u6709\u6548\n     * @param contentType\n     * @return\n     */\n    public boolean fileContentTypeValid(String contentType) {\n        for (ContentTypeEnums value : ContentTypeEnums.values()) {\n            if (Objects.equals(value.getContentType(), contentType)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * \u6587\u4ef6\u4e0a\u4f20\uff0c\u901a\u5e38\u5e94\u7528\u4e0espring\u6846\u67b6\u4e2d\uff0c\u524d\u7aef\u5c06\u6587\u4ef6\u76f4\u63a5\u4f20\u7ed9\u540e\u7aef\n     * @param file \u4e0a\u4f20\u7684\u6587\u4ef6\n     * @return \u4e0a\u4f20\u540e\u7684\u6587\u4ef6\u5730\u5740\n     * @throws SysException \u7cfb\u7edf\u5f02\u5e38\n     * @throws BizException \u4e1a\u52a1\u5f02\u5e38\n     */\n    public UploadFileResponse upload(MultipartFile file, UploadParam uploadParam) throws SysException, BizException, IOException {\n        return upload(file.getBytes(), file.getOriginalFilename(), file.getContentType(), uploadParam);\n    }\n\n    /**\n     * \u6587\u4ef6\u4e0a\u4f20\uff0c\u8fd9\u79cd\u65b9\u5f0f\u901a\u5e38\u5e94\u7528\u4e8e\u540e\u7aef\u4e0a\u4f20\u6587\u4ef6\u3002\u56e0\u4e3a\u540e\u7aef\u5f88\u96be\u83b7\u53d6 MultipartFile\n     * @param fileBytes \u6587\u4ef6\u7684\u5b57\u8282\u6d41\n     * @param originalFilename \u6587\u4ef6\u540d\u79f0\n     * @param contentType \u6587\u4ef6\u7c7b\u578b\uff0c\u4f8b\u5982image/png  image/jpg\n     * @return \u4e0a\u4f20\u540e\u7684\u6587\u4ef6\u5730\u5740\n     * @throws SysException\n     * @throws BizException\n     */\n    public UploadFileResponse upload(byte[] fileBytes, String originalFilename, String contentType, UploadParam uploadParam) throws SysException, BizException {\n        if (! fileContentTypeValid(contentType)) {\n            throw new BizException(\"\u6587\u4ef6\u4e0a\u4f20\u7c7b\u578b\u4e0d\u652f\u6301\uff0c\u5f53\u524dcontentType:\" + contentType);\n        }\n        if (fileBytes.length == 0) {\n            throw new BizException(\"\u6587\u4ef6\u4e0d\u80fd\u4e3a\u7a7a\");\n        }\n        if (StringUtils.isBlank(originalFilename)) {\n            throw new BizException(\"\u6587\u4ef6\u540d\u4e0d\u80fd\u4e3a\u7a7a\");\n        }\n\n        // \u6784\u9020\u6587\u4ef6\u7684\u524d\u7f00\n        // \u5728minio\u4e2d\uff0c\u5982\u679c\u51fa\u73b0 / \u5219\u4f1a\u81ea\u52a8\u6784\u5efa\u76ee\u5f55\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u9700\u8981\u5c06\u76ee\u5f55\u540d\u548c / \u62fc\u63a5\u5728\u6587\u4ef6\u540d\u4e2d\u5373\u53ef\n        String fileName;\n        if (uploadParam.getChangeFileName() == UploadParam.DONT_CHANGE_FILENAME) {\n            fileName = originalFilename;\n        } else if (uploadParam.getChangeFileName() == UploadParam.CHANGE_FILENAME) {\n            fileName = DateUtil.format(DateUtil.date(), \"yyyy-MM-dd\") + IdUtil.randomUUID() + originalFilename.substring(originalFilename.lastIndexOf(\".\"));\n        } else {\n            throw new BizException(\"\u6587\u4ef6\u540d\u79f0\u4fee\u6539\u7b56\u7565\u5f02\u5e38\uff0c\u6587\u4ef6\u540d\u79f0\u4fee\u6539\u53c2\u6570:\" + uploadParam.getChangeFileName());\n        }\n\n        String fullPathFileName = buildFilePath(uploadParam.getPrefix(), fileName);\n\n        // \u5224\u65ad\u6587\u4ef6\u8986\u76d6\u7b56\u7565\n        boolean updateFile = false;\n        if (uploadParam.getOverrideType() == UploadParam.OVERRIDE) {\n            updateFile = true;\n        } else if (uploadParam.getOverrideType() == UploadParam.DONT_OVERRIDE) {\n            // \u5148\u68c0\u67e5\u6587\u4ef6\u662f\u5426\u5b58\u5728\n            boolean exist = objectExist(fullPathFileName);\n            if (exist) {\n                updateFile = false;\n            } else {\n                updateFile = true;\n            }\n        } else {\n            throw new BizException(StrUtil.format(\"\u4e0a\u4f20\u7b56\u7565\u5f02\u5e38\uff0c\u4e0a\u4f20\u7b56\u7565\u7c7b\u578b:{}\\n\", uploadParam.getOverrideType()));\n        }\n\n        UploadFileResponse uploadFileResponse = new UploadFileResponse();\n        if (updateFile) {\n            try {\n                PutObjectArgs objectArgs = PutObjectArgs.builder()\n                        .bucket(prop.getBucketName())\n                        .object(fullPathFileName)\n                        .stream(new ByteArrayInputStream(fileBytes), fileBytes.length, -1)\n                        .contentType(contentType)\n                        .build();\n                minioClient.putObject(objectArgs);\n                String url = prop.getEndpoint() + \"/\" + prop.getBucketName() + \"/\" + fullPathFileName;\n                uploadFileResponse.setUpdateSuccess(true);\n                uploadFileResponse.setUrl(url);\n            } catch (Exception e) {\n                throw new SysException(\"\u4e0a\u4f20\u6587\u4ef6\u65f6\uff0c\u7cfb\u7edf\u5f02\u5e38\", e);\n            }\n        } else {\n            uploadFileResponse.setUpdateSuccess(false);\n            uploadFileResponse.setMsg(fileName);\n        }\n\n        return uploadFileResponse;\n    }\n\n    private String buildFilePath(String[] prefix, String filename) {\n        if (CollectionUtils.isEmpty(List.of(prefix))) {\n            return filename;\n        }\n        StringBuilder sb = new StringBuilder();\n        for (String dir : prefix) {\n            sb.append(dir).append(\"/\");\n        }\n        sb.append(filename);\n        return sb.toString();\n    }\n\n    /**\n     * \u6587\u4ef6\u4e0b\u8f7d\n     * @param fileName \u6587\u4ef6\u540d\u79f0\n     * @param res response\n     */\n    public void download(String fileName, String[] prefix, HttpServletResponse res) throws SysException {\n        String fullPathFileName = buildFilePath(prefix, fileName);\n        GetObjectArgs objectArgs = GetObjectArgs.builder().bucket(prop.getBucketName())\n                .object(fullPathFileName).build();\n        try (GetObjectResponse response = minioClient.getObject(objectArgs)) {\n            byte[] buf = new byte[1024];\n            int len;\n            try (FastByteArrayOutputStream os = new FastByteArrayOutputStream()) {\n                while ((len=response.read(buf)) != -1){\n                    os.write(buf, 0, len);\n                }\n                os.flush();\n                byte[] bytes = os.toByteArray();\n                res.setCharacterEncoding(StandardCharsets.UTF_8.name());\n                // \u8bbe\u7f6e\u5f3a\u5236\u4e0b\u8f7d\u4e0d\u6253\u5f00\n                res.setContentType(\"application/force-download\");\n                res.setContentType(\"application/octet-stream\");\n                // \u9632\u6b62\u4e2d\u6587\u7f16\u7801\u5f02\u5e38\u3002\u5982\u679c\u51fa\u73b0\u4e2d\u6587\u7f16\u7801\u5f02\u5e38\uff0c\u90a3\u4e48\u6d4f\u89c8\u5668\u4e2d\u5c31\u4e0d\u80fd\u76f4\u63a5\u4e0b\u8f7dpdf\u6587\u4ef6\uff0c\u800c\u662f\u5c55\u793apdf\u6587\u4ef6\u3002\n                res.addHeader(\"Content-Disposition\", \"attachment;fileName=\" + URLEncoder.encode(fileName, StandardCharsets.UTF_8.name()));\n                try (ServletOutputStream stream = res.getOutputStream()){\n                    stream.write(bytes);\n                    stream.flush();\n                }\n            }\n        } catch (Exception e) {\n            throw new SysException(\"\u4e0b\u8f7d\u5f02\u5e38\", e);\n        }\n    }\n\n    /**\n     * \u83b7\u53d6\u6587\u4ef6\u6d41\n     *\n     * @param filename \u6587\u4ef6\u540d\n     * @return \u4e8c\u8fdb\u5236\u6d41\n     */\n    public byte[] getObjectByteArray(String filename) throws SysException {\n        try {\n            String targetFilename = CommonConstant.PAPER_RESOURCE_PREFIX + filename;\n            GetObjectResponse objectResponse = minioClient.getObject(\n                    GetObjectArgs.builder()\n                            .bucket(prop.getBucketName())\n                            .object(targetFilename)\n                            .build());\n            return IoUtil.readBytes(objectResponse);\n        } catch (Exception e) {\n            throw new SysException(\"\u83b7\u53d6\u6587\u4ef6\u6d41\u5f02\u5e38\", e);\n        }\n    }\n\n    @Data\n    public static class UploadParam {\n        /**\n         * 0: \u91cd\u547d\u540d\u6587\u4ef6\n         * 1: \u4fdd\u6301\u539f\u6765\u7684\u6587\u4ef6\u540d\n         */\n        private final int changeFileName;\n\n        public static final int CHANGE_FILENAME = 0;\n        public static final int DONT_CHANGE_FILENAME = 1;\n\n        /**\n         * \u9047\u5230\u540c\u540d\u6587\u4ef6\u65f6\n         * 0: \u629b\u51fa\u5f02\u5e38\n         * 1: \u4e0d\u66f4\u65b0\u6587\u4ef6\n         * 2: \u8986\u76d6\u539f\u6587\u4ef6\n         */\n        private final int overrideType;\n\n        public static final int DONT_OVERRIDE = 0;\n        public static final int OVERRIDE = 1;\n\n        /**\n         * \u6587\u4ef6\u53ef\u80fd\u653e\u5728\u591a\u7ea7\u76ee\u5f55\u4e0b\uff0c\u6b64\u65f6\u9700\u8981\u5c06\u6bcf\u4e00\u7ea7\u7684\u76ee\u5f55\u540d\u90fd\u653e\u5728prefix\u6570\u7ec4\u4e2d\n         */\n        private final String[] prefix;\n\n        public UploadParam(int changeFileName, int overrideType, String[] prefix) {\n            this.changeFileName = changeFileName;\n            this.overrideType = overrideType;\n            this.prefix = prefix;\n        }\n    }\n\n    @Data\n    public static class UploadFileResponse {\n        // \u662f\u5426\u6210\u529f\u4e0a\u4f20\u6587\u4ef6\n        private boolean updateSuccess;\n\n        // \u4e0a\u4f20\u6210\u529f\u6587\u4ef6\u7684url\u3002\u5931\u8d25\u65f6\u4e3a\u7a7a\u3002\n        private String url;\n\n        // \u4e0a\u4f20\u5931\u8d25\u7684\u6587\u4ef6\u540d\u3002\u6210\u529f\u65f6\u4e3a\u7a7a\n        private String msg;\n    }\n\n    public enum ContentTypeEnums {\n        PDF(\"application/pdf\"),\n        WORD(\"application/msword\"),\n        PNG(\"image/png\"),\n        JPG(\"image/jpg\"),\n        JPEG(\"image/jpeg\");\n\n        private final String contentType;\n\n        ContentTypeEnums(String contentType) {\n            this.contentType = contentType;\n        }\n\n        public String getContentType() {\n            return this.contentType;\n        }\n    }\n}\n\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot%E6%8E%A5%E5%85%A5Minio/#5","title":"5. \u4f7f\u7528\u6848\u4f8b","text":"<p>\u4e0a\u4f20</p> <pre><code>package com.lhl.minio_demo.controller;\n\nimport com.lhl.minio_demo.exception.BizException;\nimport com.lhl.minio_demo.exception.SysException;\nimport com.lhl.minio_demo.util.MinioUtil;\nimport jakarta.annotation.Resource;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport java.io.IOException;\n\n@RestController\n@RequestMapping(\"upload\")\npublic class UploadController {\n    @Resource\n    private MinioUtil minioUtil;\n\n    @PostMapping(\"picture\")\n    public MinioUtil.UploadFileResponse uploadPicture(MultipartFile file) throws SysException, BizException, IOException {\n        MinioUtil.UploadParam uploadParam = new MinioUtil.UploadParam(\n                MinioUtil.UploadParam.DONT_CHANGE_FILENAME,\n                MinioUtil.UploadParam.DONT_OVERRIDE,\n                new String[]{\"first-dir\", \"second-dir\", \"last-dir\"});  // \u6587\u4ef6\u540d\u4e2d\u4e0d\u5efa\u8bae\u5e26/\uff0c\u5426\u5219\u4f1a\u88ab\u62c6\u5206\u4e3a\u591a\u7ea7\u76ee\u5f55\n        MinioUtil.UploadFileResponse uploadFileResponse = minioUtil.upload(file, uploadParam);\n        return uploadFileResponse;\n    }\n}\n\n</code></pre> <p>\u4e0b\u8f7d</p> <pre><code>package com.lhl.minio_demo.controller;\n\nimport com.lhl.minio_demo.exception.SysException;\nimport com.lhl.minio_demo.util.MinioUtil;\nimport jakarta.annotation.Resource;\nimport jakarta.servlet.http.HttpServletResponse;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping(\"download\")\npublic class DownloadController {\n    @Resource\n    private MinioUtil minioUtil;\n    @Resource\n    private HttpServletResponse httpServletResponse;\n\n    @RequestMapping\n    public String download(@RequestParam(\"name\") String name) throws SysException {\n        minioUtil.download(name, new String[]{\"first-dir\", \"second-dir\", \"last-dir\"}, httpServletResponse);\n        return \"\u4e0b\u8f7d\u6210\u529f\";\n    }\n}\n\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/","title":"SpringBoot\u7edf\u4e00\u5f02\u5e38\u5904\u7406","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/SpringBoot%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/#_1","title":"\u601d\u8def","text":"<ol> <li> <p>\u521b\u5efa\u4e00\u4e2a\u5f02\u5e38\u5904\u7406\u7c7b\uff08\u5c31\u662f\u4e00\u4e2a\u666e\u901a\u7684\u7c7b\uff09\uff0c\u5e76\u5728\u7c7b\u4e0a\u6dfb\u52a0\u6ce8\u89e3<code>@RestControllerAdvice</code>\uff0c\u5982\u679c\u8fd4\u56de\u503c\u4e0d\u662fJSON\uff0c\u5c31\u6dfb\u52a0<code>@ControllerAdvice</code>\u3002</p> </li> <li> <p>\u7c7b\u4e2d\u7684\u65b9\u6cd5\u4e0a\u6dfb\u52a0<code>@ExceptionHandler(\u67d0\u4e2a\u7c7b\u5bf9\u8c61)</code>\u548c<code>@ResponseBody</code>\u3002</p> </li> <li> <p>\u5f53controller\u5c42\u7684\u65b9\u6cd5\u629b\u51fa\u5f02\u5e38\u540e\uff0c\u4f1a\u5339\u914d\u5f02\u5e38\u5904\u7406\u7c7b\u4e2d\u7684\u65b9\u6cd5\u3002\u4f18\u5148\u5339\u914d\u5b50\u7c7b\u3002</p> </li> <li><code>@RestControllerAdvice</code>\u53ea\u80fd\u5904\u7406controller\u5c42\u7684\u5f02\u5e38\u3002</li> </ol>"},{"location":"Java/SpringBoot/SpringBoot%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/#_2","title":"\u6848\u4f8b","text":"<ol> <li>controller\u5c42\u4e2d\u7684\u65b9\u6cd5\u629b\u51fa\u5f02\u5e38\u3002</li> </ol> <pre><code>package com.lee.exceptiondemo.controller;\n\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping\npublic class IndexController {\n    @RequestMapping(\"index\")\n    public String getInfo() {\n        int a = 1 / 0;\n        return \"hello, world!\";\n    }\n}\n</code></pre> <ol> <li>\u521b\u5efa\u7edf\u4e00\u5f02\u5e38\u5904\u7406\u7c7b</li> </ol> <pre><code>package com.lee.exceptiondemo.exception;\n\nimport org.springframework.web.bind.annotation.ControllerAdvice;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.bind.annotation.ResponseBody;\n\n@RestControllerAdvice\npublic class GlobalExceptionHandler {\n    @ExceptionHandler(Exception.class)\n    public String handleException() {\n        return \"\u672a\u77e5\u5f02\u5e38\";\n    }\n\n    @ExceptionHandler(RuntimeException.class)\n    public String handleRuntimeException(ArithmeticException exception) {\n        return \"\u8fd0\u884c\u9636\u6bb5\u62a5\u9519\";\n    }\n\n    @ExceptionHandler(ArithmeticException.class)\n    public String handleArithmeticException(ArithmeticException exception) {\n        return \"\u7b97\u6570\u8fd0\u7b97\u62a5\u9519\";\n    }\n}\n</code></pre> <ol> <li>\u7531\u4e8econtroller\u5c42\u7684\u65b9\u6cd5\u629b\u51fa<code>ArithmeticException</code>\u5f02\u5e38\uff0c\u56e0\u6b64\u4f1a\u4f18\u5148\u5339\u914d\u5f02\u5e38\u5904\u7406\u7c7b\u4e2d\u7684<code>ArithmeticException</code>\u5f02\u5e38\u3002\u5982\u679c\u6ca1\u6709\u5339\u914d\u6210\u529f\uff0c\u5219\u9010\u6b21\u5339\u914d\u4e0a\u4e00\u7ea7\u7684\u5f02\u5e38\u3002</li> </ol> <p>\u4e5f\u5373\u5339\u914d\u4f18\u5148\u987a\u5e8f\u4e3a\uff1a<code>ArithmeticException</code> &gt; <code>RuntimeException</code> &gt; <code>Exception</code>\u3002</p>"},{"location":"Java/SpringBoot/SpringBoot%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/#_3","title":"\u66f4\u8fdb\u4e00\u6b65","text":"<p>\u81ea\u5b9a\u4e49\u6ce8\u89e3\u7c7b\u4e2d\uff0c\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u4e0d\u4ec5\u53ef\u4ee5\u4e3aString\uff0c\u8fd8\u53ef\u4ee5\u81ea\u5b9a\u4e49\u7c7b\u578b\u3002</p>"},{"location":"Java/SpringBoot/SpringBoot%E7%BB%9F%E4%B8%80%E7%BB%93%E6%9E%84%E8%BF%94%E5%9B%9E%2BtraceId/","title":"SpringBoot\u7edf\u4e00\u7ed3\u6784\u8fd4\u56de+traceId","text":"<p>[toc]</p> <pre><code>package com.lee.sec.vo;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\n\n@Data\n@AllArgsConstructor\npublic class ResponseResult {\n    /**\n     * \u72b6\u6001\u7801\n     * \u6240\u6709\u54cd\u5e94\u5747\u8fd4\u56de200\u72b6\u6001\u7801\u3002\u53ef\u4ee5\u6839\u636e\u4e2a\u4eba\u559c\u597d\u81ea\u5b9a\u4e49\u3002\n     */\n    private Integer code;\n\n    /**\n     * \u54cd\u5e94\u662f\u6b63\u5e38\u8fd8\u662f\u5f02\u5e38\u3002\n     * \u6b63\u5e38\u8fd4\u56detrue\uff0c\u5f02\u5e38\u8fd4\u56defalse\u3002\n     */\n    private Boolean success;\n\n    /**\n     * \u63d0\u793a\u4fe1\u606f\uff0c\u8fdb\u4e00\u6b65\u89e3\u91ca\u54cd\u5e94\u5185\u5bb9\n     */\n    private String msg;\n\n    /**\n     * \u54cd\u5e94\u6570\u636e\n     */\n    private Object data;\n\n    public static ResponseResult success() {\n        return new ResponseResult(200, true, \"\u54cd\u5e94\u6b63\u5e38\", null);\n    }\n\n    public static ResponseResult success(Object data) {\n        return new ResponseResult(200, true, \"\u54cd\u5e94\u6b63\u5e38\", data);\n    }\n\n    public static ResponseResult success(Object data, String msg) {\n        return new ResponseResult(200, true, msg, data);\n    }\n\n    public static ResponseResult fail(String msg) {\n        return new ResponseResult(200, false, msg, null);\n    }\n\n    public static ResponseResult fail(String msg, Object data) {\n        return new ResponseResult(200, false, msg, data);\n    }\n}\n\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE/","title":"SpringBoot\u81ea\u52a8\u914d\u7f6e\uff08TODO\uff09","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/SpringBoot%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE/#_1","title":"\u81ea\u52a8\u914d\u7f6e","text":"<p>SpringBoot\u7684\u8bde\u751f\u5c31\u662f\u4e3a\u4e86\u89e3\u51b3\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u7e41\u7410\u7684xml\u914d\u7f6e\u3002</p> <p>SpringBoot\u63d0\u4f9b\u56fa\u5b9a\u7684\u914d\u7f6e\uff0c\u6765\u7b80\u5316\u7a0b\u5e8f\u5458\u914d\u7f6e\u4f9d\u8d56\u3002</p>"},{"location":"Java/SpringBoot/SpringBoot%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE/#_2","title":"\u81ea\u52a8\u88c5\u914d","text":"<p>SpringBoot\u4e2d\uff0c\u5f15\u5165\u7b2c\u4e09\u65b9\u7ec4\u4ef6\u7684starter\u5305\u540e\uff0c\u81ea\u52a8\u5c06\u7b2c\u4e09\u65b9\u7ec4\u4ef6\u4e2d\u7684bean\u5bf9\u8c61\u52a0\u8f7d\u5230IOC\u5bb9\u5668\u4e2d\u3002</p>"},{"location":"Java/SpringBoot/SpringBoot%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE/#_3","title":"\u6d41\u7a0b","text":"<ol> <li> <p>SpringBoot\u542f\u52a8\u4e3b\u7c7b\u4e0a\u6807\u6ce8<code>@SpringBootApplication</code>\u6ce8\u89e3\uff0c\u8be5\u6ce8\u89e3\u4e3b\u8981\u7531<code>@SpringBootConfiguration</code>, <code>@EnableAutoConfiguration</code>\u548c<code>@ComponentScan</code>\u7ec4\u6210\u3002</p> </li> <li> <p><code>@SpringBootConfiguration</code>\u5b9e\u9645\u4e0a\u662f<code>@Configuration</code>\uff0c\u4f5c\u7528\u662f\u5c06\u542f\u52a8\u4e3b\u7c7b\u6258\u7ba1\u7ed9IOC\u5bb9\u5668\u3002</p> </li> <li> <p><code>@ComponentScan</code>\uff1a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u626b\u63cf\u542f\u52a8\u7c7b\u6240\u5728\u5305(\u6bd4\u5982<code>com.lhl.demo</code>)\u53ca\u5176\u5b50\u5305\u3002</p> </li> <li> <p><code>@EnableAutoConfiguration</code>\uff1a\u5305\u542b<code>@Import(AutoConfigurationImportSelector.class)</code>\u548c<code>@Import({AutoConfigurationPackages.Registrar.class})</code>\uff0c\u81ea\u52a8\u5bfc\u5165\u914d\u7f6e\u7c7b\uff0c\u8fd9\u662fSpringBoot\u81ea\u52a8\u914d\u7f6e\u7684\u6838\u5fc3\u3002</p> </li> <li> <p><code>AutoConfigurationImportSelector.class</code>\u7c7b\u4f1a\u626b\u63cf\u6240\u6709<code>classpath</code>\u4e0b\u7684<code>META/spring.factories</code>\u3002</p> </li> </ol> <p>\u8865\u5145\uff1a<code>classpath</code>\u901a\u5e38\u5305\u542b\u7684\u8def\u5f84\u6709\uff1a\u73af\u5883\u53d8\u91cf\u3001jar\u6587\u4ef6\u3001JDK\u4e2d\u7684\u6807\u51c6\u5e93\u7b49\u3002</p> <p>SpringBoot\u901a\u8fc7<code>@EnableAutoConfiguration</code>\u5f00\u542f\u81ea\u52a8\u914d\u7f6e\u3002SpringBoot\u542f\u52a8\u65f6\uff0c\u4f1a\u53bb\u626b\u63cf<code>autoconfigure</code>\u5305\u4e2d\u7684<code>spring.factories</code>\uff0c\u8fdb\u800c\u6709\u9700\u8981\u7684\u52a0\u8f7d\u914d\u7f6e\u7c7b\u3002<code>spring.factories</code>\u5b58\u653e\u4e86\u5e38\u7528\u4e2d\u95f4\u4ef6\u7684\u914d\u7f6e\u7c7b\u3002</p> <p>\u901a\u5e38\u6211\u4eec\u53ea\u9700\u8981\u53bb<code>application.properties</code>\u6587\u4ef6\u4e2d\u5199\u4e0a\u5bf9\u5e94\u7684\u914d\u7f6e\u4fe1\u606f\u5c31\u80fd\u4f7f\u7528\u5bf9\u5e94\u7684\u7ec4\u4ef6\u4e86\u3002</p> <p><code>spring.factories</code>\u4e2d\u7684\u90e8\u5206\u7c7b\u53ef\u4ee5\u52a0\u8f7d\u3002\u5047\u8bbe\u6211\u4eec\u6ca1\u6709\u5f15\u5165<code>redis-starter</code>\u7684\u5305\uff0c\u90a3Redis\u7684\u914d\u7f6e\u7c7b\u5c31\u4e0d\u4f1a\u88ab\u52a0\u8f7d\u3002\u5177\u4f53Spring\u5728\u5b9e\u73b0\u7684\u65f6\u5019\u5c31\u662f\u4f7f\u7528@ConditionalXXX\u8fdb\u884c\u5224\u65ad\u7684\u3002\u6bd4\u5982Redis\u7684\u914d\u7f6e\u7c7b\u5c31\u4f1a\u6709<code>@ConditionalOnClass({RedisOperations.class})</code>\u7684\u914d\u7f6e\uff0c\u8bf4\u660e\u5f53\u524d\u73af\u5883\u4e0b\u5982\u679c\u6709RedisOperations.class\u8fd9\u4e2a\u5b57\u8282\u7801\uff0c\u624d\u4f1a\u53bb\u52a0\u8f7dRedis\u7684\u914d\u7f6e\u7c7b\u3002</p>"},{"location":"Java/SpringBoot/SpringBoot%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE/#_4","title":"\u62d3\u5c55","text":"<p>\u5982\u679c\u4f60\u5199\u4e86\u4e2a\u5de5\u5177\u7c7b\uff0c\u5e76</p> <p>spring.factories\u7528\u4e8e\u52a0\u8f7d\u9879\u76ee\u5305\u5916\u7684bean\u3002</p>"},{"location":"Java/SpringBoot/SpringBoot%E8%87%AA%E5%90%AF%E5%8A%A8%E7%A8%8B%E5%BA%8F/","title":"SpringBoot\u81ea\u542f\u52a8\u7a0b\u5e8f","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/SpringBoot%E8%87%AA%E5%90%AF%E5%8A%A8%E7%A8%8B%E5%BA%8F/#_1","title":"\u524d\u8a00","text":"<p>\u6709\u65f6\u5019\u6211\u4eec\u9700\u8981\u6307\u5b9a\u67d0\u4e9b\u51fd\u6570\u5728SpringBoot\u521a\u542f\u52a8\u7684\u65f6\u5019\u5c31\u8981\u6267\u884c\u3002</p> <p>\u5bf9\u4e8e\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u901a\u5e38\u81ea\u5df1\u5b9a\u4e49\u4e00\u4e2a\u7c7b\uff0c\u5c06\u9700\u8981\u6267\u884c\u7684\u51fd\u6570\u653e\u8fdb\u53bb\u5373\u53ef\u3002</p>"},{"location":"Java/SpringBoot/SpringBoot%E8%87%AA%E5%90%AF%E5%8A%A8%E7%A8%8B%E5%BA%8F/#_2","title":"\u4ee3\u7801","text":"<p>\u81ea\u5b9a\u4e49\u7c7b\uff1a<code>MyInitializer</code></p> <pre><code>package com.lee.mymail2.config;\n\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.stereotype.Component;\n\n\n/**\n * @author \u6653\u9f99coding\n */\n@Component\npublic class MyInitializer implements CommandLineRunner {\n    @Override\n    public void run(String... args) throws Exception {\n        // \u6267\u884c\u5177\u4f53\u51fd\u6570\n        // ......\n    }\n}\n\n</code></pre>"},{"location":"Java/SpringBoot/SpringBoot%E8%87%AA%E5%90%AF%E5%8A%A8%E7%A8%8B%E5%BA%8F/#_3","title":"\u5efa\u8bae","text":"<p>\u5982\u679c\u60f3\u5728\u9879\u76ee\u521a\u542f\u52a8\u65f6\u4e00\u76f4\u8fd0\u884c\u67d0\u4e2a\u7a0b\u5e8f\uff0c\u8fbe\u5230\u76d1\u542c\u4efb\u52a1\u7684\u529f\u80fd\uff0c\u90a3\u4e48<code>@PostConstruct</code>\u6ce8\u89e3\u4e0d\u80fd\u653e\u5728Controller\u4e2d\u7684\u51fd\u6570\u4e0a\u9762\uff0c\u800c\u662f\u8981\u653e\u5728service\u4e0a\u9762\u3002</p>"},{"location":"Java/SpringBoot/Spring%E4%BA%8B%E5%8A%A1/","title":"Spring\u4e8b\u52a1","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/Spring%E4%BA%8B%E5%8A%A1/#_1","title":"\u4ec0\u4e48\u662f\u4e8b\u52a1","text":"<p>\u4e8b\u52a1\u662f\u4e00\u7ec4\u64cd\u4f5c\uff0c\u6ee1\u8db3\u56db\u5927\u539f\u5219\uff08ACID\uff09\u3002</p>"},{"location":"Java/SpringBoot/Spring%E4%BA%8B%E5%8A%A1/#spring_1","title":"Spring\u5b9e\u73b0\u4e8b\u52a1\u7684\u4e24\u79cd\u65b9\u6cd5","text":""},{"location":"Java/SpringBoot/Spring%E4%BA%8B%E5%8A%A1/#_2","title":"\u7f16\u7a0b\u5f0f\u4e8b\u52a1","text":"<p>\u53ef\u4ee5\u4f7f\u7528<code>TransactionTemplate</code>\u6216<code>TransactionManager</code>\u7ba1\u7406\u4e8b\u52a1\u3002</p> <p>TransactionTemplate</p> <pre><code>@Resource\nprivate TransactionTemplate transactionTemplate;\n\npublic void doTransaction2() {\n    transactionTemplate.execute(new TransactionCallbackWithoutResult() {\n        @Override\n        protected void doInTransactionWithoutResult(TransactionStatus status) {\n            try {\n                // ======\u4e1a\u52a1\u4ee3\u7801======\n                // ......\n            } catch (Exception e) {\n                e.printStackTrace();\n                // \u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\n                status.setRollbackOnly();\n            }\n        }\n    });\n}\n</code></pre> <p>TransactionManager</p> <pre><code>public void doTransaction() {\n    // 1.\u5b9a\u4e49\u9ed8\u8ba4\u7684\u4e8b\u52a1\u5c5e\u6027\n    DefaultTransactionDefinition definition = new DefaultTransactionDefinition();\n    // 2.\u83b7\u53d6TransactionStatus\n    TransactionStatus status = transactionManager.getTransaction(definition);\n    try {\n        // ======\u4e1a\u52a1\u4ee3\u7801======\n        // ......\n\n        // \u63d0\u4ea4\u4e8b\u52a1\n        transactionManager.commit(status);\n    } catch (DataAccessException e) {\n        e.printStackTrace();\n        // \u4e8b\u52a1\u56de\u6eda\n        transactionManager.rollback(status);\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Spring%E4%BA%8B%E5%8A%A1/#_3","title":"\u58f0\u660e\u5f0f\u4e8b\u52a1","text":"<p>\u58f0\u660e\u5f0f\u4e8b\u52a1\u662f\u6700\u5e38\u4f7f\u7528\u7684\u65b9\u5f0f\u3002\u901a\u5e38\u53ea\u9700\u8981\u5728\u7c7b\u6216\u65b9\u6cd5\u4e0a\u6dfb\u52a0<code>@Transactional</code>\u6ce8\u89e3\u5373\u53ef\u3002</p> <p>\u6ce8\u610f\uff0c\u5982\u679c\u5728\u51fd\u6570\u5185\u90e8\u4f7f\u7528<code>try-catch</code>\u6355\u83b7\u5f02\u5e38\uff0c\u90a3\u4e48<code>spring-aop</code>\u5c31\u65e0\u6cd5\u6355\u83b7\u5f02\u5e38\u4fe1\u606f\uff0c\u56e0\u6b64\u65e0\u6cd5\u56de\u6eda\u3002</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff1a</p> <pre><code>@Transactional(rollbackFor = Exception.class)\npublic void doTransaction() {\n    try {\n        jdbcTemplate.update(\"update user set age = ? where username = ?\", 8, \"\u4e01\u5b89\u742a\");\n        int x = 1 / 0;\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u629b\u51fa\u5f02\u5e38\u540e\uff0c\u65e0\u6cd5\u88abaop\u6355\u83b7\uff0c\u6545\u65e0\u6cd5\u56de\u6eda\u3002</p>"},{"location":"Java/SpringBoot/Spring%E4%BA%8B%E5%8A%A1/#_4","title":"\u4e8b\u52a1\u7684\u9694\u79bb\u6027","text":"<p>Spring\u4e2d\uff0c\u4e8b\u52a1\u7684\u9694\u79bb\u6027\u548cMySQL\u4e2d\u4e8b\u52a1\u7684\u9694\u79bb\u6027\u662f\u4e00\u6837\u7684\u3002</p> <ol> <li>\u8bfb\u672a\u63d0\u4ea4\u3002</li> <li>\u8bfb\u5df2\u63d0\u4ea4\u3002</li> <li>\u53ef\u91cd\u590d\u8bfb\u3002</li> <li>\u4e32\u884c\u5316\u3002</li> <li>\u9ed8\u8ba4\uff08\u548c\u6570\u636e\u5e93\u5e95\u5c42\u91c7\u7528\u7684\u9694\u79bb\u6027\u4e00\u81f4\uff09\u3002</li> </ol> <p>\u58f0\u660e\u5f0f\u4e8b\u52a1\u4e2d\u5982\u4f55\u914d\u7f6e\u9694\u79bb\u6027</p> <pre><code>@Transactional(isolation = Isolation.DEFAULT)\npublic void doTransaction() {\n    // \u4e1a\u52a1\u4ee3\u7801\n}\n</code></pre>"},{"location":"Java/SpringBoot/Spring%E4%BA%8B%E5%8A%A1/#_5","title":"\u4e8b\u52a1\u7684\u4f20\u64ad\u6027","text":"<p>\u5047\u5b9a\u8c03\u7528<code>doTransaction</code>\u51fd\u6570\u3002</p> <ol> <li>\u9ed8\u8ba4\u60c5\u51b5\u662f<code>REQUIRED</code>\uff1a\u5982\u679c\u5f53\u524d\u5b58\u5728\u4e8b\u52a1\uff0c\u5219\u52a0\u5165\u5f53\u524d\u4e8b\u52a1\uff1b\u5982\u679c\u5f53\u524d\u4e0d\u5b58\u5728\u4e8b\u52a1\uff0c\u5219\u521b\u5efa\u4e00\u4e2a\u65b0\u4e8b\u52a1\u3002</li> </ol> <p>\u4e0b\u9762\u4e24\u4e2a\u6848\u4f8b\u4e2d\uff0c\u629b\u51fa\u9519\u8bef\u540e\u4e24\u6761\u6570\u636e\u90fd\u4f1a\u56de\u6eda\u3002</p> <p>\u6848\u4f8b</p> <p>\u601d\u8003\u4e0b\u8ff0\u6848\u4f8b\u4e3a\u4ec0\u4e48\u6ca1\u6709\u53d1\u751f\u6b7b\u9501\uff1f</p> <p>\u200b    </p> <ol> <li>UserService1.java</li> </ol> <pre><code>package com.lee.mytransaction.service;\n\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.stereotype.Component;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport javax.annotation.Resource;\n\n@Component\npublic class UserService1 {\n    @Resource\n    private JdbcTemplate jdbcTemplate;\n\n    @Resource\n    private UserService2 userService2;\n\n    @Transactional(rollbackFor = Exception.class)\n    public void doTransaction() {\n        jdbcTemplate.update(\"update user set age = ? where username = ?\", 8, \"\u4e01\u5b89\u742a\");\n        userService2.doTransaction();\n        // \u5730\u70b91\n    }\n}\n</code></pre> <ol> <li>UserService2.java</li> </ol> <pre><code>package com.lee.mytransaction.service;\n\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.stereotype.Component;\nimport org.springframework.transaction.annotation.Propagation;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport javax.annotation.Resource;\n\n@Component\npublic class UserService2 {\n    @Resource\n    private JdbcTemplate jdbcTemplate;\n\n    @Transactional(rollbackFor = Exception.class)\n    public void doTransaction() {\n        jdbcTemplate.update(\"update user set age = ? where username = ?\", 8, \"\u4e25\u5b89\u742a\");\n        // \u5730\u70b92\n    }\n}\n</code></pre> <ul> <li> <p>\u5728\u5730\u70b91\u6216\u5730\u70b92\u629b\u51fa\u5f02\u5e38\u540e\uff0c\u4e24\u4e2aset\u8bed\u53e5\u90fd\u9700\u8981\u56de\u6eda\u3002</p> </li> <li> <p><code>REQUIRES_NEW</code>\uff1a\u65e0\u8bba\u5f53\u524d\u662f\u5426\u5b58\u5728\u4e8b\u52a1\uff0c\u90fd\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u4e8b\u52a1\u3002</p> </li> </ul> <p>\u6848\u4f8b</p> <p>\u95ee\u9898\uff1a\u5982\u679c<code>username</code>\u6ca1\u6709\u52a0\u7d22\u5f15\uff0c\u4e3a\u4ec0\u4e48\u4f1a\u53d1\u751f\u6b7b\u9501\uff1f</p> <p>\u7b54\u6848\uff1a<code>username</code>\u6ca1\u6709\u52a0\u7d22\u5f15\u65f6\uff0cset\u64cd\u4f5c\u4f1a\u52a0\u8868\u9501\u3002\u4e8b\u52a1<code>userService1</code>\u7ed9\u8868\u52a0\u4e0a\u9501\u540e\uff0c\u4e8b\u52a1<code>userService2</code>\u65e0\u6cd5\u64cd\u4f5c\u8868\uff0c\u800c<code>userService1</code>\u9700\u8981\u7b49<code>userService2</code>\u6267\u884c\u5b8c\u6bd5\u540e\u624d\u80fd\u63d0\u4ea4\u4e8b\u52a1\u3002</p> <ol> <li>UserService1</li> </ol> <pre><code>package com.lee.mytransaction.service;\n\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.stereotype.Component;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport javax.annotation.Resource;\n\n@Component\npublic class UserService1 {\n    @Resource\n    private JdbcTemplate jdbcTemplate;\n\n    @Resource\n    private UserService2 userService2;\n\n    @Transactional(rollbackFor = Exception.class)\n    public void doTransaction() {\n        jdbcTemplate.update(\"update user set age = ? where username = ?\", 8, \"\u4e01\u5b89\u742a\");\n        userService2.doTransaction();\n        // \u5730\u70b91\n    }\n}\n</code></pre> <ol> <li>UserService2</li> </ol> <pre><code>package com.lee.mytransaction.service;\n\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.stereotype.Component;\nimport org.springframework.transaction.annotation.Propagation;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport javax.annotation.Resource;\n\n@Component\npublic class UserService2 {\n    @Resource\n    private JdbcTemplate jdbcTemplate;\n\n    @Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRES_NEW)\n    public void doTransaction() {\n        jdbcTemplate.update(\"update user set age = ? where username = ?\", 8, \"\u4e25\u5b89\u742a\");\n        // \u5730\u70b92\n    }\n}\n</code></pre> <ul> <li>\u5730\u70b91\u53d1\u751f\u5f02\u5e38\uff0c\u4e0d\u5370\u8c61<code>userService2</code>\u7684\u6b63\u5e38\u63d0\u4ea4\u3002</li> <li>\u5730\u70b92\u53d1\u751f\u5f02\u5e38\uff0c\u8be5\u5f02\u5e38\u65e2\u4f1a\u4f20\u9012\u7ed9<code>userService2</code>\u7684<code>spring-aop</code>\uff0c\u4e5f\u4f1a\u4f20\u9012\u7ed9<code>userService1</code>\u7684<code>spring-aop</code>\uff0c\u6545\u4e24\u4e2a\u4e8b\u52a1\u90fd\u4f1a\u53d1\u751f\u56de\u6eda\u3002</li> </ul>"},{"location":"Java/SpringBoot/Spring%E4%BA%8B%E5%8A%A1/#_6","title":"\u5b9e\u6218","text":"<p>\u4ee5\u4e0b\u6848\u4f8b\u662f\u57fa\u4e8eSpring\u4e8b\u52a1\uff0c\u5b9e\u73b0\u4e86\u4f7f\u7528JDBC\u64cd\u4f5c\u6570\u636e\u5e93\u3002</p> <ol> <li>pom.xml\u4e2d\u5f15\u5165\u4f9d\u8d56</li> </ol> <pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n        &lt;version&gt;8.0.32&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n        &lt;version&gt;5.3.20&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n        &lt;version&gt;5.3.20&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre> <ol> <li>\u7f16\u5199\u914d\u7f6e\u7c7b<code>AppConfig.java</code></li> </ol> <pre><code>package com.lee.mytransaction.config;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.jdbc.datasource.DataSourceTransactionManager;\nimport org.springframework.jdbc.datasource.DriverManagerDataSource;\nimport org.springframework.transaction.PlatformTransactionManager;\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\nimport org.springframework.transaction.support.TransactionTemplate;\n\nimport javax.sql.DataSource;\n\n@Configuration\n@ComponentScan(basePackages = \"com.lee.mytransaction\")\n@EnableTransactionManagement  // \u5f00\u542f\u4e8b\u52a1\u7684\u6ce8\u89e3\u652f\u6301\npublic class AppConfig {\n    // \u914d\u7f6e\u6570\u636e\u6e90\n    @Bean\n    public DataSource dataSource() {\n        // \u914d\u7f6e\u5e76\u8fd4\u56de\u6570\u636e\u6e90\n        DriverManagerDataSource dataSource = new DriverManagerDataSource();\n        dataSource.setDriverClassName(\"com.mysql.cj.jdbc.Driver\");\n        dataSource.setUrl(\"jdbc:mysql://localhost:3306/webproject\");\n        dataSource.setUsername(\"root\");\n        dataSource.setPassword(\"root\");\n        return dataSource;\n    }\n\n    // \u914d\u7f6e\u4e8b\u52a1\u7ba1\u7406\u5668\n    @Bean\n    public PlatformTransactionManager transactionManager(DataSource dataSource) {\n        return new DataSourceTransactionManager(dataSource);\n    }\n\n    // \u914d\u7f6e TransactionTemplate\n    @Bean\n    public TransactionTemplate transactionTemplate(PlatformTransactionManager transactionManager) {\n        return new TransactionTemplate(transactionManager);\n    }\n\n    // \u914d\u7f6e JdbcTemplate\n    @Bean\n    public JdbcTemplate jdbcTemplate(DataSource dataSource) {\n        return new JdbcTemplate(dataSource);\n    }\n}\n</code></pre> <ol> <li>\u7f16\u5199\u58f0\u660e\u5f0f\u4e8b\u52a1\u4ee3\u7801</li> </ol> <pre><code>package com.lee.mytransaction.service;\n\nimport org.springframework.dao.DataAccessException;\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.stereotype.Component;\nimport org.springframework.transaction.PlatformTransactionManager;\nimport org.springframework.transaction.TransactionStatus;\nimport org.springframework.transaction.support.DefaultTransactionDefinition;\nimport org.springframework.transaction.support.TransactionCallbackWithoutResult;\nimport org.springframework.transaction.support.TransactionTemplate;\n\nimport javax.annotation.Resource;\nimport javax.sql.DataSource;\n\n@Component\npublic class TransactionExample {\n    @Resource\n    private DataSource dataSource;\n    @Resource\n    private TransactionTemplate transactionTemplate;\n    @Resource\n    private JdbcTemplate jdbcTemplate;\n    @Resource\n    private PlatformTransactionManager transactionManager;\n\n    // \u65b9\u6cd51\uff1a\u4f7f\u7528transactionManager\n    public void doTransaction() {\n        // 1.\u5b9a\u4e49\u9ed8\u8ba4\u7684\u4e8b\u52a1\u5c5e\u6027\n        DefaultTransactionDefinition definition = new DefaultTransactionDefinition();\n        // 2.\u83b7\u53d6TransactionStatus\n        TransactionStatus status = transactionManager.getTransaction(definition);\n        try {\n            jdbcTemplate.update(\"update user set age = ? where username = ?\", 8, \"\u4e01\u5b89\u742a\");\n            transactionManager.commit(status);\n        } catch (DataAccessException e) {\n            e.printStackTrace();\n            transactionManager.rollback(status);\n        }\n    }\n\n    // \u65b9\u6cd52\uff1a\u4f7f\u7528transactionTemplate\n    public void doTransaction2() {\n        transactionTemplate.execute(new TransactionCallbackWithoutResult() {\n            @Override\n            protected void doInTransactionWithoutResult(TransactionStatus status) {\n                try {\n                    jdbcTemplate.update(\"update user set age = ? where username = ?\", 8, \"\u4e01\u5b89\u742a\");\n                    int x = 1 / 0;\n                } catch (Exception e) {\n                    // \u8bbe\u7f6e\u4e8b\u52a1\u56de\u6eda\n                    status.setRollbackOnly();\n                    e.printStackTrace();\n                }\n            }\n        });\n    }\n}\n</code></pre> <ol> <li>\u6216\u8005\u7f16\u5199\u6ce8\u89e3\u5f0f\u4e8b\u52a1</li> </ol> <pre><code>package com.lee.mytransaction.service;\n\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.stereotype.Component;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport javax.annotation.Resource;\n\n@Component\npublic class TransactionWithAnnotationExample {\n    @Resource\n    private JdbcTemplate jdbcTemplate;\n\n    @Transactional\n    public void doTransaction() {\n        jdbcTemplate.update(\"update user set age = ? where username = ?\", 8, \"\u4e01\u5b89\u742a\");\n        int x = 1 / 0;\n    }\n}\n</code></pre> <ol> <li>\u4e3b\u7c7b</li> </ol> <pre><code>package com.lee.mytransaction;\n\nimport com.lee.mytransaction.config.AppConfig;\nimport com.lee.mytransaction.service.TransactionExample;\nimport com.lee.mytransaction.service.TransactionWithAnnotationExample;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.annotation.AnnotationConfigApplicationContext;\n\n\npublic class Main {\n    public static void main(String[] args) {\n        //  AppConfig \u7c7b\u5c06\u4f5c\u4e3a\u914d\u7f6e\u7c7b\u7528\u4e8e\u6784\u5efa Spring \u7684\u5e94\u7528\u4e0a\u4e0b\u6587\n        ApplicationContext context = new AnnotationConfigApplicationContext(AppConfig.class);\n\n        // \u7f16\u7a0b\u5f0f\u4e8b\u52a1\n        TransactionExample transactionExample = context.getBean(TransactionExample.class);\n        transactionExample.doTransaction();\n\n        // \u58f0\u660e\u5f0f\u4e8b\u52a1\n        TransactionWithAnnotationExample transactionWithAnnotationExample = context.getBean(TransactionWithAnnotationExample.class);\n        transactionWithAnnotationExample.doTransaction();\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Spring%E5%B8%B8%E8%A7%81%E6%8B%93%E5%B1%95%E7%82%B9%E5%8F%8A%E5%BA%94%E7%94%A8/","title":"Spring\u5e38\u89c1\u62d3\u5c55\u70b9\u53ca\u5e94\u7528(TODO)","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/Spring%E5%B8%B8%E8%A7%81%E6%8B%93%E5%B1%95%E7%82%B9%E5%8F%8A%E5%BA%94%E7%94%A8/#_1","title":"\u80cc\u666f","text":"<p>Spring\u542f\u52a8\u5b8c\u6210\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u83b7\u53d6Spring\u542f\u52a8\u8fc7\u7a0b\u4e2d\u5728\u4e0d\u540c\u7684\u65f6\u95f4\u8282\u70b9\u7684\u4fe1\u606f\uff0c\u6bd4\u5982bean\u521d\u59cb\u5316\u540e\u7684bean\u7684\u540d\u5b57\u3002</p> <p>\u5b9e\u73b0\u65b9\u5f0f\uff1a<code>implements</code>\u7279\u5b9a\u7684<code>interface</code>\u5e76\u91cd\u5199\u65b9\u6cd5\uff0c\u65b9\u6cd5\u4e2d\u5c31\u80fd\u83b7\u53d6Spring\u542f\u52a8\u8fc7\u7a0b\u4e2d\u7684\u4fe1\u606f\u3002</p> <pre><code>// Spring\u542f\u52a8\n// ......\n// \u901a\u8fc7\u53cd\u5c04\u7684\u65b9\u5f0f\u83b7\u5f97\u4e00\u4e2a\u5bf9\u8c61\nObject instance;\nif (instance instanceof BeanNameAware) {\n    ((BeanNameAware) instance).setBeanName(beanName);\n}\n// ......\n</code></pre>"},{"location":"Java/SpringBoot/Spring%E5%B8%B8%E8%A7%81%E6%8B%93%E5%B1%95%E7%82%B9%E5%8F%8A%E5%BA%94%E7%94%A8/#_2","title":"\u7b2c\u4e00\u7c7b","text":"<p>\u8fd9\u7c7b\u63a5\u53e3\u6211\u4eec\u901a\u5e38\u4e0d\u5728\u610f\u53d1\u751f\u5728Spring\u5bb9\u5668\u542f\u52a8\u7684\u54ea\u4e2a\u9636\u6bb5\uff0c\u53ea\u9700\u8981\u83b7\u53d6\u9700\u8981\u7684\u4e0a\u4e0b\u6587\u5373\u53ef\u3002</p>"},{"location":"Java/SpringBoot/Spring%E5%B8%B8%E8%A7%81%E6%8B%93%E5%B1%95%E7%82%B9%E5%8F%8A%E5%BA%94%E7%94%A8/#applicationcontextaware","title":"ApplicationContextAware","text":"<p>\u4f5c\u7528\uff1a\u83b7\u53d6Spring\u5bb9\u5668\u3002</p> <pre><code>@Data\npublic class GetSpringInfo implements ApplicationContextAware {\n    public ApplicationContext applicationContext;\n    @Override\n    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\n        this.applicationContext = applicationContext;\n    }\n}\n</code></pre> <p>BeanFactoryAware</p> <p>BeanNameAware</p> <p>InitializingBean</p> <p>DisposableBean</p> <p>BeanPostProcessor</p> <p>BeanFactoryPostProcessor\uff1a\u61d2\u52a0\u8f7dbean</p> <p>InstantiationAwareBeanPostProcessorAdapter</p> <p>InstantiationAwareBeanPostProcessor</p>"},{"location":"Java/SpringBoot/Spring%E5%B8%B8%E8%A7%81%E6%8B%93%E5%B1%95%E7%82%B9%E5%8F%8A%E5%BA%94%E7%94%A8/#_3","title":"\u7b2c\u4e8c\u7c7b","text":"<p>\u8fd9\u7c7b\u63a5\u53e3\u6211\u4eec\u9700\u8981\u91cd\u89c6\u56de\u6389\u51fd\u6570\u6267\u884c\u7684\u65f6\u673a\u3002</p>"},{"location":"Java/SpringBoot/Spring%E5%B8%B8%E8%A7%81%E6%8B%93%E5%B1%95%E7%82%B9%E5%8F%8A%E5%BA%94%E7%94%A8/#beanpostprocesser","title":"BeanPostProcesser","text":"<p>Bean\u521d\u59cb\u5316\u524d\u6267\u884c\uff1a<code>postProcessBeforeInitialization</code></p> <p>Bean\u521d\u59cb\u5316\u540e\u6267\u884c\uff1a<code>postProcessAfterInitialization</code></p> <p>\u539f\u7406\uff1a</p> <p>\u200b   </p>"},{"location":"Java/SpringBoot/Spring%E6%8E%A5%E5%85%A5%E7%BC%93%E5%AD%98/","title":"Spring\u63a5\u5165\u7f13\u5b58","text":""},{"location":"Java/SpringBoot/Spring%E6%8E%A5%E5%85%A5%E7%BC%93%E5%AD%98/#_1","title":"\u524d\u8a00","text":"<p>\u7f13\u5b58\u6709\u591a\u79cd\uff0credis\uff0ccaffein......</p> <p>\u7f13\u5b58\u53ef\u4ee5\u52a0\u5feb\u67e5\u8be2\u6548\u7387\u3002</p> <p>\u5728Spring Boot 3\u4ee5\u540e\uff0c\u53ef\u4ee5\u901a\u8fc7\u6ce8\u89e3\u7684\u65b9\u5f0f\u5f15\u5165\u7f13\u5b58\u3002</p>"},{"location":"Java/SpringBoot/Spring%E6%8E%A5%E5%85%A5%E7%BC%93%E5%AD%98/#_2","title":"\u73af\u5883","text":"<ol> <li>JDK 21</li> <li>Spring Boot 3.2.0</li> </ol>"},{"location":"Java/SpringBoot/Spring%E6%8E%A5%E5%85%A5%E7%BC%93%E5%AD%98/#_3","title":"\u57fa\u7840\u77e5\u8bc6","text":"<ol> <li>\u7f13\u5b58\u5bf9\u8c61\u5e94\u8be5\u4ea4\u7ed9IOC\u5bb9\u5668\u6258\u7ba1\u3002\u6240\u8c13\u7f13\u5b58\u5bf9\u8c61\uff0c\u5c31\u662f\u7528\u6765\u5b58\u653e\u7f13\u5b58\u6570\u636e\u7684\u5168\u5c40\u5bf9\u8c61\u3002\u6211\u4eec\u53ef\u4ee5\u5c06\u4e00\u4e2a\u7f13\u5b58\u5bf9\u8c61\u770b\u4f5c\u662f\u4e00\u4e2a\u5de8\u5927\u7684K-V\u6570\u7ec4\u3002</li> <li>\u7f13\u5b58\u5e38\u7528\u6ce8\u89e3\u6709\uff1a<code>@CacheConfig</code>\u3001<code>@CachePut</code>\u3001<code>@Cacheable</code>\u3001<code>@CacheEvict</code>\u3002\u5efa\u8bae\u7ed3\u5408\u5b9e\u6218\u4ee3\u7801\u53bb\u7406\u89e3\u3002</li> </ol>"},{"location":"Java/SpringBoot/Spring%E6%8E%A5%E5%85%A5%E7%BC%93%E5%AD%98/#_4","title":"\u4f9d\u8d56","text":"<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--\u5f15\u5165\u7f13\u5b58\u63a5\u53e3--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--\u5f15\u5165\u7f13\u5b58\u5177\u4f53\u6846\u67b6--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.github.ben-manes.caffeine&lt;/groupId&gt;\n        &lt;artifactId&gt;caffeine&lt;/artifactId&gt;\n        &lt;version&gt;3.1.8&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;version&gt;1.18.30&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>"},{"location":"Java/SpringBoot/Spring%E6%8E%A5%E5%85%A5%E7%BC%93%E5%AD%98/#_5","title":"\u5b9e\u6218","text":""},{"location":"Java/SpringBoot/Spring%E6%8E%A5%E5%85%A5%E7%BC%93%E5%AD%98/#_6","title":"\u914d\u7f6e\u7c7b","text":"<pre><code>package com.lhl.cachedemo.config;\n\nimport com.github.benmanes.caffeine.cache.Caffeine;\nimport org.springframework.cache.CacheManager;\nimport org.springframework.cache.caffeine.CaffeineCacheManager;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\nimport java.util.concurrent.TimeUnit;\n\n@Configuration\npublic class CacheConfig {\n    @Bean(\"caffeineCacheManager\")\n    public CacheManager cacheManager() {\n        CaffeineCacheManager cacheManager = new CaffeineCacheManager();\n        cacheManager.setCaffeine(Caffeine.newBuilder()\n                // \u8bbe\u7f6e\u6700\u540e\u4e00\u6b21\u5199\u5165\u6216\u8bbf\u95ee\u540e\u7ecf\u8fc7\u56fa\u5b9a\u65f6\u95f4\u8fc7\u671f\n                .expireAfterAccess(60, TimeUnit.SECONDS)\n                // \u521d\u59cb\u7684\u7f13\u5b58\u7a7a\u95f4\u5927\u5c0f\n                .initialCapacity(100)\n                // \u7f13\u5b58\u7684\u6700\u5927\u6761\u6570\n                .maximumSize(1000));\n        return cacheManager;\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Spring%E6%8E%A5%E5%85%A5%E7%BC%93%E5%AD%98/#model","title":"Model","text":"<pre><code>package com.lhl.cachedemo.model;\n\nimport lombok.Data;\nimport lombok.ToString;\n\n@Data\n@ToString\npublic class UserInfo {\n    private Integer id;\n    private String name;\n    private String sex;\n    private Integer age;\n}\n</code></pre>"},{"location":"Java/SpringBoot/Spring%E6%8E%A5%E5%85%A5%E7%BC%93%E5%AD%98/#controller","title":"Controller","text":"<pre><code>package com.lhl.cachedemo.controller;\n\nimport com.lhl.cachedemo.model.UserInfo;\nimport com.lhl.cachedemo.service.UserInfoService;\nimport jakarta.annotation.Resource;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\n@RequestMapping\npublic class UserInfoController {\n\n    @Resource\n    private UserInfoService userInfoService;\n\n    @GetMapping(\"/userInfo/{id}\")\n    public Object getUserInfo(@PathVariable Integer id) {\n        UserInfo userInfo = userInfoService.getByName(id);\n        if (userInfo == null) {\n            return \"\u6ca1\u6709\u8be5\u7528\u6237\";\n        }\n        return userInfo;\n    }\n\n    @PostMapping(\"/userInfo\")\n    public Object createUserInfo(@RequestBody UserInfo userInfo) {\n        userInfoService.addUserInfo(userInfo);\n        return \"SUCCESS\";\n    }\n\n    @PutMapping(\"/userInfo\")\n    public Object updateUserInfo(@RequestBody UserInfo userInfo) {\n        UserInfo newUserInfo = userInfoService.updateUserInfo(userInfo);\n        if (newUserInfo == null){\n            return \"\u4e0d\u5b58\u5728\u8be5\u7528\u6237\";\n        }\n        return newUserInfo;\n    }\n\n    @DeleteMapping(\"/userInfo/{id}\")\n    public Object deleteUserInfo(@PathVariable Integer id) {\n        userInfoService.deleteById(id);\n        return \"SUCCESS\";\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Spring%E6%8E%A5%E5%85%A5%E7%BC%93%E5%AD%98/#service","title":"Service","text":"<pre><code>package com.lhl.cachedemo.service;\n\nimport com.lhl.cachedemo.model.UserInfo;\n\npublic interface UserInfoService {\n\n    /**\n     * \u589e\u52a0\u7528\u6237\u4fe1\u606f\n     *\n     * @param userInfo \u7528\u6237\u4fe1\u606f\n     */\n    void addUserInfo(UserInfo userInfo);\n\n    /**\n     * \u83b7\u53d6\u7528\u6237\u4fe1\u606f\n     *\n     * @param id \u7528\u6237ID\n     * @return \u7528\u6237\u4fe1\u606f\n     */\n    UserInfo getByName(Integer id);\n\n    /**\n     * \u4fee\u6539\u7528\u6237\u4fe1\u606f\n     *\n     * @param userInfo \u7528\u6237\u4fe1\u606f\n     * @return \u7528\u6237\u4fe1\u606f\n     */\n    UserInfo updateUserInfo(UserInfo userInfo);\n\n    /**\n     * \u5220\u9664\u7528\u6237\u4fe1\u606f\n     *\n     * @param id \u7528\u6237ID\n     */\n    void deleteById(Integer id);\n\n}\n</code></pre>"},{"location":"Java/SpringBoot/Spring%E6%8E%A5%E5%85%A5%E7%BC%93%E5%AD%98/#serviceimpl","title":"serviceImpl\uff08\u6700\u6838\u5fc3\uff01\uff09","text":"<p>\u5c06\u7f13\u5b58\uff08\u4e5f\u53ef\u4ee5\u53eb\u7f13\u5b58\u5bf9\u8c61\uff09\u5f53\u4f5c\u4e00\u4e2akey-value\u6570\u7ec4\u3002</p> <p>\u51fd\u6570\u7684\u53c2\u6570\u5217\u8868\u4f5c\u4e3akey\uff08\u901a\u5e38\u6211\u4eec\u4f1a\u81ea\u5df1\u6307\u5b9akey\uff09\uff0c\u51fd\u6570\u7684\u8fd4\u56de\u503c\u4f5c\u4e3avalue\u3002</p> <p><code>@CachePut</code>\u901a\u5e38\u7528\u4e8e\u589e/\u6539\u64cd\u4f5c\uff0c\u88ab\u4fee\u9970\u7684\u51fd\u6570\u65e0\u8bba\u5982\u4f55\u90fd\u4f1a\u6267\u884c\u3002</p> <p><code>@Cacheable</code>\u901a\u5e38\u7528\u4e8e\u67e5\u8be2\u64cd\u4f5c\uff0c\u5f53\u7f13\u5b58\u4e2d\u5b58\u5728\u5bf9\u5e94\u7684key\uff0c\u5219\u4e0d\u6267\u884c\u88ab\u4fee\u9970\u7684\u51fd\u6570\u3002</p> <p><code>@CacheEvict</code>\u901a\u5e38\u7528\u4e8e\u5220\u9664\u64cd\u4f5c\u3002</p> <pre><code>package com.lhl.cachedemo.service.impl;\n\nimport com.lhl.cachedemo.model.UserInfo;\nimport com.lhl.cachedemo.service.UserInfoService;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.cache.annotation.CacheConfig;\nimport org.springframework.cache.annotation.CacheEvict;\nimport org.springframework.cache.annotation.CachePut;\nimport org.springframework.cache.annotation.Cacheable;\nimport org.springframework.stereotype.Service;\nimport org.springframework.util.StringUtils;\nimport java.util.HashMap;\n\n@Slf4j\n@Service\n@CacheConfig(cacheNames = \"caffeineCacheManager\")  // \u6307\u5b9acache\u5bf9\u8c61\u7684\u540d\u79f0\npublic class UserInfoServiceImpl implements UserInfoService {\n    /**\n     * \u6a21\u62df\u6570\u636e\u5e93\u5b58\u50a8\u6570\u636e\n     */\n    private HashMap&lt;Integer, UserInfo&gt; userInfoMap = new HashMap&lt;&gt;();\n\n    @Override\n    @CachePut(key = \"#userInfo.id\")  // \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ckey\u662f\u53c2\u6570\u5217\u8868\u7684\u53c2\u6570\uff0cvalue\u662f\u8fd4\u56de\u503c\u3002\u6211\u4eec\u53ef\u4ee5\u624b\u52a8\u6307\u5b9akey\u548cvalue\u3002\n    public UserInfo addUserInfo(UserInfo userInfo) {\n        log.info(\"create\");\n        userInfoMap.put(userInfo.getId(), userInfo);\n        return userInfo;\n    }\n\n    @Override\n    @Cacheable(key = \"#id\")\n    public UserInfo getByName(Integer id) {\n        log.info(\"get\");\n        return userInfoMap.get(id);\n    }\n\n    @Override\n    @CachePut(key = \"#userInfo.id\")\n    public UserInfo updateUserInfo(UserInfo userInfo) {\n        log.info(\"update\");\n        if (!userInfoMap.containsKey(userInfo.getId())) {\n            return null;\n        }\n        // \u53d6\u65e7\u7684\u503c\n        UserInfo oldUserInfo = userInfoMap.get(userInfo.getId());\n        // \u66ff\u6362\u5185\u5bb9\n        if (!StringUtils.isEmpty(oldUserInfo.getAge())) {\n            oldUserInfo.setAge(userInfo.getAge());\n        }\n        if (!StringUtils.isEmpty(oldUserInfo.getName())) {\n            oldUserInfo.setName(userInfo.getName());\n        }\n        if (!StringUtils.isEmpty(oldUserInfo.getSex())) {\n            oldUserInfo.setSex(userInfo.getSex());\n        }\n        // \u5c06\u65b0\u7684\u5bf9\u8c61\u5b58\u50a8\uff0c\u66f4\u65b0\u65e7\u5bf9\u8c61\u4fe1\u606f\n        userInfoMap.put(oldUserInfo.getId(), oldUserInfo);\n        // \u8fd4\u56de\u65b0\u5bf9\u8c61\u4fe1\u606f\n        return oldUserInfo;\n    }\n\n    @Override\n    @CacheEvict(key = \"#id\")\n    public void deleteById(Integer id) {\n        log.info(\"delete\");\n        userInfoMap.remove(id);\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Spring%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90token%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6/","title":"Spring\u81ea\u52a8\u751f\u6210token\u4e0b\u8f7d\u6587\u4ef6","text":""},{"location":"Java/SpringBoot/Spring%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90token%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6/#util","title":"util\u7c7b","text":"<ol> <li>\u6587\u4ef6\u65f6\u65485\u5206\u949f\u3002</li> <li>\u6587\u4ef6\u6700\u591a\u88ab\u4e0b\u8f7d5\u6b21\u3002</li> </ol> <pre><code>package com.lee.xnxy.util;\n\nimport lombok.Data;\n\nimport java.util.Random;\nimport java.util.concurrent.ConcurrentHashMap;\nimport java.util.concurrent.TimeUnit;\n\npublic class DynamicDownloadUtil {\n    @Data\n    public static class TokenParam {\n        private Long createTime;  // \u6beb\u79d2\n        private Integer downloadCount;\n        private String filename;\n    }\n\n    public static ConcurrentHashMap&lt;Integer, TokenParam&gt; TOKEN_MAP = new ConcurrentHashMap&lt;&gt;();\n\n    private static final Integer MAX_DOWNLOAD_COUNT = 5;\n\n    private static final Long MAX_VALID_TIME_MILLS = TimeUnit.MINUTES.toMillis(5);\n\n    private static final Integer MAX_GET_TOKEN_COUNT = 10;\n\n    public static boolean checkToken(String token) {\n        int tokenNumber = Integer.parseInt(token);\n        TokenParam tokenParam = TOKEN_MAP.get(tokenNumber);\n        if (! checkTokenParamValid(tokenParam)) {\n            return false;\n        }\n        tokenParam.setDownloadCount(tokenParam.getDownloadCount() + 1);\n        return true;\n    }\n\n    private static int generateRandomNumber() {\n        Random random = new Random();\n        return random.nextInt(9000) + 1000;\n    }\n\n    private static boolean checkTokenParamValid(TokenParam tokenParam) {\n        if (tokenParam == null) {\n            return false;\n        }\n        Long createTime = tokenParam.getCreateTime();\n        Integer downloadCount = tokenParam.getDownloadCount();\n        if (createTime == null || downloadCount == null) {\n            return false;\n        }\n        if (! checkDownloadCountValid(downloadCount) || ! checkTimeValid(createTime, System.currentTimeMillis())) {\n            return false;\n        }\n        return true;\n    }\n\n    private static boolean checkDownloadCountValid(int downloadCount) {\n        return downloadCount &lt; MAX_DOWNLOAD_COUNT;\n    }\n\n    private static Boolean checkTimeValid(long oldTimeMills, long nowTimeMills) {\n        return nowTimeMills - oldTimeMills &lt;= MAX_VALID_TIME_MILLS;\n    }\n\n    public static Integer getToken(String filename) throws Exception {\n        long currentTimeMillis = System.currentTimeMillis();\n        TokenParam tokenParam = new TokenParam();\n        tokenParam.setDownloadCount(0);\n        tokenParam.setCreateTime(currentTimeMillis);\n        tokenParam.setFilename(filename);\n        Integer tokenNumber = null;\n        for (int i = 0; i &lt; MAX_GET_TOKEN_COUNT; i++) {  // \u4ec5\u5c1d\u8bd510\u6b21\uff0c\u5982\u679c\u90fd\u5931\u8d25\uff0c\u5219\u65e0\u6cd5\u83b7\u53d6token\u3002\u4e00\u822c\u60c5\u51b5\u4e0b\u4e0d\u4f1a\u53d1\u751f\u3002\n            tokenNumber = generateRandomNumber();\n            if (TOKEN_MAP.get(tokenNumber) != null) {\n                TokenParam oldTokenParam = TOKEN_MAP.get(tokenNumber);\n                if (! checkTokenParamValid(oldTokenParam)) {\n                    TOKEN_MAP.remove(tokenNumber);\n                }\n            }\n            if (TOKEN_MAP.get(tokenNumber) != null) {\n                continue;\n            }\n            TOKEN_MAP.put(tokenNumber, tokenParam);\n        }\n        if (TOKEN_MAP.get(tokenNumber) == null) {\n            throw new Exception(\"\u7cfb\u7edf\u5185\u90e8token\u79ef\u538b\u8fc7\u591a\uff0c\u5bfc\u81f4\u83b7\u53d6token\u5931\u8d25\");\n        }\n        assert tokenNumber != null;\n        TOKEN_MAP.put(tokenNumber, tokenParam);\n        return tokenNumber;\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Spring%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90token%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6/#_1","title":"\u4f7f\u7528\u6848\u4f8b","text":"<pre><code>package com.lhl.cachedemo.controller;\n\nimport com.lhl.cachedemo.util.DynamicDownloadUtil;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\n\n@RestController\n@RequestMapping(\"download\")\npublic class DownloadController {\n\n    @GetMapping\n    public Map&lt;String, Object&gt; download(@RequestParam(\"token\") String token) {\n        Map&lt;String, Object&gt; result = new HashMap&lt;&gt;();\n        boolean valid = DynamicDownloadUtil.checkToken(token);  // \u68c0\u67e5token\u662f\u5426\u6709\u6548\n        if (! valid) {\n            result.put(\"success\", false);\n            return result;\n        }\n        result.put(\"success\", true);\n        return result;\n    }\n\n    @RequestMapping(\"get-token\")\n    public Map&lt;String, Object&gt; getToken() {\n        Map&lt;String, Object&gt; result = new HashMap&lt;&gt;();\n        try {\n            Integer token = DynamicDownloadUtil.getToken(\"my-doc.txt\");  // \u6839\u636e\u6587\u4ef6\u540d\u751f\u6210token\n            result.put(\"success\", true);\n            result.put(\"token\", token);\n            return result;\n        } catch (Exception e) {\n            result.put(\"success\", false);\n            return result;\n        }\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Swagger%E6%95%99%E7%A8%8B/","title":"Swagger\u6559\u7a0b","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/Swagger%E6%95%99%E7%A8%8B/#_1","title":"\u73af\u5883","text":"<ul> <li>JDK 8</li> <li>Spring Boot 2.7.16</li> </ul>"},{"location":"Java/SpringBoot/Swagger%E6%95%99%E7%A8%8B/#_2","title":"\u4f9d\u8d56","text":"<pre><code>&lt;!--\u7248\u672c\u90092.9.2--&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n    &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\n    &lt;version&gt;2.9.2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;!--\u7248\u672c\u90092.9.2--&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n    &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n    &lt;version&gt;2.9.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>"},{"location":"Java/SpringBoot/Swagger%E6%95%99%E7%A8%8B/#_3","title":"\u914d\u7f6e\u7c7b","text":"<pre><code>package com.example.swaggerdemo.config;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Profile;\nimport springfox.documentation.builders.PathSelectors;\nimport springfox.documentation.builders.RequestHandlerSelectors;\nimport springfox.documentation.spi.DocumentationType;\nimport springfox.documentation.spring.web.plugins.Docket;\nimport springfox.documentation.swagger2.annotations.EnableSwagger2;\n\n@Configuration\n@EnableSwagger2\npublic class SpringFoxConfig { \n    @Value(\"${swagger.enabled}\")  // \u5efa\u8bae\u751f\u4ea7\u73af\u5883\u5173\u95edswagger\n    private boolean enabled;\n    @Bean\n    public Docket api() {\n        return new Docket(DocumentationType.SWAGGER_2)\n                .enable(enabled)\n                .select()\n                .apis(RequestHandlerSelectors.any())\n                .paths(PathSelectors.any())\n                .build();\n    }\n}\n</code></pre> <pre><code>package com.example.swaggerdemo.config;\n\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\nimport org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@EnableWebMvc\npublic class WebConfig implements WebMvcConfigurer {\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addInterceptor(new LoginInterceptor())  // \u81ea\u5b9a\u4e49\u62e6\u622a\u5668\n                .addPathPatterns(\"/**\")\n                .excludePathPatterns(\"/swagger-resources/**\", \"/webjars/**\", \"/v2/**\", \"/swagger-ui.html/**\");  // \u5982\u679c\u6709\u62e6\u622a\u5668\uff0c\u9700\u8981\u653e\u5f00\u8fd9\u51e0\u4e2a\u8def\u5f84\n    }\n\n\n    @Override\n    public void addResourceHandlers(ResourceHandlerRegistry registry) {\n        registry.addResourceHandler(\"swagger-ui.html\")\n                .addResourceLocations(\"classpath:/META-INF/resources/\");\n\n        registry.addResourceHandler(\"/webjars/**\")\n                .addResourceLocations(\"classpath:/META-INF/resources/webjars/\");\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Swagger%E6%95%99%E7%A8%8B/#_4","title":"\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>spring:\n  mvc:\n    pathmatch:\n      matching-strategy: ant_path_matcher\n  profiles:\n    active: dev\nswagger:\n  enabled: true  # \u5efa\u8bae\u751f\u4ea7\u73af\u5883\u5173\u95edswagger\n</code></pre>"},{"location":"Java/SpringBoot/Swagger%E6%95%99%E7%A8%8B/#_5","title":"\u6848\u4f8b","text":"<p>Swagger UI\u5730\u5740\uff1ahttp://localhost:8080/swagger-ui.html</p> <p>\u6838\u5fc3\u6ce8\u89e3\uff1a</p> <pre><code>@Api(value = \"\u7528\u6237\u63a5\u53e3\")  // \u7528\u4e8econtroller\u7c7b\u4e0a\n@ApiOperation(\"\u83b7\u53d6\u7528\u6237\")  // \u7528\u4e8econtroller\u4e2d\u7684\u65b9\u6cd5\u4e0a\n@ApiImplicitParams({\n        @ApiImplicitParam(name = \"token\", value = \"\u7528\u6237token\"),\n        @ApiImplicitParam(name = \"userId\", value = \"\u7528\u6237ID\", required = true)\n})  // \u7528\u4e8econtroller\u4e2d\u7684\u65b9\u6cd5\u4e0a\uff0c\u89e3\u91ca\u53c2\u6570\u5217\u8868\u4e2d\u7684\u6bcf\u4e2a\u53c2\u6570\n@ApiModel(\"\u83b7\u53d6\u7528\u6237\u7684\u8bf7\u6c42\")  // \u7528\u4e8e\u6a21\u578b\u7c7b\u4e0a\n@ApiModelProperty(\"\u7528\u6237id\")  // \u7528\u4e8e\u6a21\u578b\u7c7b\u7684\u5c5e\u6027\u4e0a\n</code></pre>"},{"location":"Java/SpringBoot/Swagger%E6%95%99%E7%A8%8B/#controller","title":"controller","text":"<pre><code>package com.example.swaggerdemo.controller;\n\nimport com.example.swaggerdemo.request.UpdateUserNameRequest;\nimport com.example.swaggerdemo.response.GetUserResponse;\nimport io.swagger.annotations.Api;\nimport io.swagger.annotations.ApiImplicitParam;\nimport io.swagger.annotations.ApiImplicitParams;\nimport io.swagger.annotations.ApiOperation;\nimport org.springframework.web.bind.annotation.*;\n\n@RestController\n@RequestMapping(\"user\")\n@Api(value = \"\u7528\u6237\u63a5\u53e3\")\npublic class UserController {\n    @GetMapping(\"getuser\")\n    @ApiOperation(\"\u83b7\u53d6\u7528\u6237\")\n    @ApiImplicitParams({\n            @ApiImplicitParam(name = \"token\", value = \"\u7528\u6237token\"),\n            @ApiImplicitParam(name = \"userId\", value = \"\u7528\u6237ID\", required = true)\n    })\n    public GetUserResponse getUser(@RequestHeader(\"token\") String token, @RequestParam(\"userId\") Long userId) {\n        return new GetUserResponse(userId, \"\u8bbf\u95ee\u6210\u529f\");\n    }\n\n    @GetMapping(\"updateusername\")\n    @ApiOperation(\"\u66f4\u65b0\u7528\u6237\")\n    // \u4e0d\u9700\u8981@ApiImplicitParams\n    public String updateUsername(@RequestBody UpdateUserNameRequest updateUserNameRequest) {\n        return \"update success!\";\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/Swagger%E6%95%99%E7%A8%8B/#model","title":"model","text":"<pre><code>package com.example.swaggerdemo.request;\n\nimport io.swagger.annotations.ApiModel;\nimport io.swagger.annotations.ApiModelProperty;\nimport lombok.Data;\n\n@Data\n@ApiModel(\"\u83b7\u53d6\u7528\u6237\u7684\u8bf7\u6c42\")\npublic class UpdateUserNameRequest {\n    @ApiModelProperty(\"\u7528\u6237id\")\n    private Long userId;\n    @ApiModelProperty(\"\u7528\u6237\u540d\")\n    private String username;\n}\n</code></pre> <pre><code>package com.example.swaggerdemo.response;\n\nimport io.swagger.annotations.ApiModel;\nimport io.swagger.annotations.ApiModelProperty;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\n\n@Data\n@AllArgsConstructor\n@ApiModel(\"\u83b7\u53d6\u7528\u6237\u7684\u8bf7\u6c42\")\npublic class GetUserResponse {\n    @ApiModelProperty(\"\u7528\u6237id\")\n    private Long userId;\n    @ApiModelProperty(\"\u54cd\u5e94\u4fe1\u606f\")\n    private String message;\n}\n</code></pre>"},{"location":"Java/SpringBoot/TraceId%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA/","title":"TraceId\u94fe\u8def\u8ffd\u8e2a","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/TraceId%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA/#_1","title":"\u4f9d\u8d56","text":"<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;cn.hutool&lt;/groupId&gt;\n        &lt;artifactId&gt;hutool-all&lt;/artifactId&gt;\n        &lt;version&gt;5.8.25&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n        &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n        &lt;version&gt;3.14.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>"},{"location":"Java/SpringBoot/TraceId%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA/#_2","title":"\u8fd4\u56de\u7ed3\u6784\u4f53","text":"<pre><code>package com.lee.traceiddemo.model.dto;\n\nimport com.lee.traceiddemo.util.TraceIdUtil;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\n\n@Data\n@AllArgsConstructor\npublic class ResponseResult {\n    /**\n     * \u72b6\u6001\u7801\n     * \u6240\u6709\u54cd\u5e94\u5747\u8fd4\u56de200\u72b6\u6001\u7801\u3002\u53ef\u4ee5\u6839\u636e\u4e2a\u4eba\u559c\u597d\u81ea\u5b9a\u4e49\u3002\n     */\n    private Integer code;\n\n    /**\n     * \u54cd\u5e94\u662f\u6b63\u5e38\u8fd8\u662f\u5f02\u5e38\u3002\n     * \u6b63\u5e38\u8fd4\u56detrue\uff0c\u5f02\u5e38\u8fd4\u56defalse\u3002\n     */\n    private Boolean success;\n\n    /**\n     * \u63d0\u793a\u4fe1\u606f\uff0c\u8fdb\u4e00\u6b65\u89e3\u91ca\u54cd\u5e94\u5185\u5bb9\n     */\n    private String msg;\n\n    /**\n     * \u54cd\u5e94\u6570\u636e\n     */\n    private Object data;\n\n    /**\n     * \u94fe\u8def\u8ffd\u8e2atraceId\n     */\n    public String traceId;\n\n    public static ResponseResult success() {\n        return new ResponseResult(200, true, \"\u54cd\u5e94\u6b63\u5e38\", null, TraceIdUtil.getTraceId());\n    }\n\n    public static ResponseResult success(Object data) {\n        return new ResponseResult(200, true, \"\u54cd\u5e94\u6b63\u5e38\", data, TraceIdUtil.getTraceId());\n    }\n\n    public static ResponseResult success(Object data, String msg) {\n        return new ResponseResult(200, true, msg, data, TraceIdUtil.getTraceId());\n    }\n\n    public static ResponseResult fail(String msg) {\n        return new ResponseResult(200, false, msg, null, TraceIdUtil.getTraceId());\n    }\n\n    public static ResponseResult fail(String msg, Object data) {\n        return new ResponseResult(200, false, msg, data, TraceIdUtil.getTraceId());\n    }\n}\n\n</code></pre>"},{"location":"Java/SpringBoot/TraceId%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA/#traceid_1","title":"traceId\u5de5\u5177\u7c7b","text":"<pre><code>package com.lee.traceiddemo.util;\n\nimport cn.hutool.core.util.IdUtil;\nimport io.micrometer.common.util.StringUtils;\nimport org.slf4j.MDC;\n\npublic class TraceIdUtil {\n    public static final String TRACE_ID_KEY = \"TraceId\";\n    public static String generateTraceId() {\n        String traceId = IdUtil.fastSimpleUUID().toUpperCase();\n        MDC.put(TRACE_ID_KEY, traceId);\n        return traceId;\n    }\n\n    public static String generateTraceId(String traceId) {\n        if (StringUtils.isBlank(traceId)) {\n            return generateTraceId();\n        }\n        MDC.put(TRACE_ID_KEY, traceId);\n        return traceId;\n    }\n\n    public static String getTraceId() {\n        return MDC.get(TRACE_ID_KEY);\n    }\n\n    public static void removeTraceId() {\n        MDC.remove(TRACE_ID_KEY);\n    }\n}\n\n</code></pre>"},{"location":"Java/SpringBoot/TraceId%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA/#_3","title":"\u62e6\u622a\u5668\u914d\u7f6e","text":"<pre><code>package com.lee.traceiddemo.filter;\n\n\nimport cn.hutool.core.util.IdUtil;\nimport com.lee.traceiddemo.util.TraceIdUtil;\nimport jakarta.servlet.*;\nimport jakarta.servlet.http.HttpServletRequest;\nimport lombok.extern.slf4j.Slf4j;\nimport org.apache.commons.lang3.StringUtils;\n\nimport java.io.IOException;\n\n@Slf4j\npublic class TraceFilter implements Filter {\n\n    @Override\n    public void init(FilterConfig filterConfig) throws ServletException {\n        log.info(\"Init Trace filter......\");\n    }\n\n    @Override\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\n        try {\n            HttpServletRequest request = (HttpServletRequest) servletRequest;\n            // \u8bf7\u6c42\u8fdb\u6765\u540e\uff0c\u67e5\u770b\u8bf7\u6c42\u5934\u662f\u5426\u5e26\u6709traceId\n            // \u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u8bf7\u6c42\u521a\u8fdb\u6765\u4e0d\u4f1a\u643a\u5e26traceId\n            // \u4f46\u662f\u6709\u65f6\u5019\u53ef\u4ee5\u5728\u7f51\u5173\u643a\u5e26traceId\n            String traceId = ((HttpServletRequest) servletRequest).getHeader(TraceIdUtil.TRACE_ID_KEY);\n            if (StringUtils.isBlank(traceId)) {\n                traceId = IdUtil.fastSimpleUUID().toUpperCase();\n            }\n            TraceIdUtil.generateTraceId(traceId);\n            filterChain.doFilter(servletRequest, servletResponse);\n        } catch (Exception e) {\n            log.error(\"traceId\u5f02\u5e38: {}\", e.getMessage(), e);\n        } finally {\n            // \u9632\u6b62\u5185\u5b58\u6ea2\u51fa\n            TraceIdUtil.removeTraceId();\n        }\n    }\n\n    @Override\n    public void destroy() {\n        log.info(\"Destroy Trace filter......\");\n    }\n}\n\n</code></pre>"},{"location":"Java/SpringBoot/TraceId%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA/#_4","title":"\u62e6\u622a\u5668\u62e6\u622a\u5730\u5740","text":"<pre><code>package com.lee.traceiddemo.config;\n\nimport com.lee.traceiddemo.filter.TraceFilter;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;\nimport org.springframework.boot.web.servlet.FilterRegistrationBean;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.Ordered;\nimport org.springframework.core.annotation.Order;\n\n@Slf4j\n@Configuration\npublic class WebConfiguration {\n    @Bean\n    @ConditionalOnMissingBean({TraceFilter.class})\n    @Order(Ordered.HIGHEST_PRECEDENCE + 101)\n    public FilterRegistrationBean&lt;TraceFilter&gt; traceFilterBean() {\n        FilterRegistrationBean&lt;TraceFilter&gt; bean = new FilterRegistrationBean&lt;&gt;();\n        bean.setFilter(new TraceFilter());\n        bean.addUrlPatterns(\"/*\");\n        return bean;\n    }\n}\n\n</code></pre>"},{"location":"Java/SpringBoot/TraceId%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA/#_5","title":"\u65e5\u5fd7\u914d\u7f6e","text":"<p>\u65e5\u5fd7\u5730\u5740\uff1a<code>classpath:/resources/logback.xml</code></p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;configuration scan=\"true\" scanPeriod=\"10 seconds\"&gt;\n    &lt;!--property \u7684name\u662f\u53d8\u91cf\u7684\u540d\u79f0\uff0cvalue\u662f\u53d8\u91cf\u7684\u503c--&gt;\n    &lt;!-- \u65e5\u5fd7\u5b58\u653e\u8def\u5f84 --&gt;\n    &lt;property name=\"log.path\" value=\"logs\" /&gt;\n    &lt;!-- \u65e5\u5fd7\u8f93\u51fa\u683c\u5f0f --&gt;\n    &lt;!--\n        %d{HH:mm:ss.SSS}: \u8868\u793a\u65e5\u5fd7\u751f\u6210\u7684\u65f6\u95f4\u6233\uff0c\u7cbe\u786e\u5230\u6beb\u79d2\uff0c\u683c\u5f0f\u4e3a\u5c0f\u65f6\uff1a\u5206\u949f\uff1a\u79d2\uff1a\u6beb\u79d2\u3002\n        [ %thread ]: \u8f93\u51fa\u4ea7\u751f\u65e5\u5fd7\u4e8b\u4ef6\u7684\u7ebf\u7a0b\u540d\uff0c\u62ec\u53f7\u4e2d\u7684\u767e\u5206\u53f7\u4e0d\u662f\u5fc5\u9700\u7684\uff0c\u4f46\u901a\u5e38\u7528\u6765\u7f8e\u5316\u8f93\u51fa\u4f7f\u5176\u6613\u4e8e\u9605\u8bfb\u3002\n        %-5level: \u65e5\u5fd7\u7ea7\u522b\uff0c\u5de6\u5bf9\u9f50\u5e76\u81f3\u5c11\u5360\u636e5\u4e2a\u5b57\u7b26\u5bbd\u5ea6\uff0c\u6bd4\u5982DEBUG\u3001INFO\u7b49\uff0c\u5982\u679c\u7ea7\u522b\u540d\u79f0\u77ed\u4e8e5\u4e2a\u5b57\u7b26\uff0c\u5219\u7528\u7a7a\u683c\u586b\u5145\u3002\n        %logger{20}: \u8f93\u51faLogger\u7684\u5168\u540d\uff0c\u4f46\u662f\u53ea\u663e\u793a\u524d20\u4e2a\u5b57\u7b26\uff0c\u5982\u679c\u540d\u5b57\u8d85\u8fc720\u4e2a\u5b57\u7b26\uff0c\u5219\u4f1a\u88ab\u622a\u65ad\u5e76\u5728\u672b\u5c3e\u6dfb\u52a0\u7701\u7565\u53f7(...)\u3002\n        [%method,%line]: \u8f93\u51fa\u4ea7\u751f\u65e5\u5fd7\u4e8b\u4ef6\u7684\u65b9\u6cd5\u540d\u548c\u884c\u53f7\uff0c\u8fd9\u91cc\u53ef\u80fd\u9700\u8981\u81ea\u5b9a\u4e49\u89e3\u6790\u5668\u6216\u989d\u5916\u914d\u7f6e\u624d\u80fd\u6b63\u786e\u63d0\u53d6\u65b9\u6cd5\u540d\u548c\u884c\u53f7\uff0c\u6807\u51c6\u7684PatternLayout\u4e0d\u652f\u6301\u8fd9\u6837\u7684\u7ec4\u5408\u5f62\u5f0f\uff0c\u4e00\u822c\u4f1a\u5206\u5f00\u5199\u6210%method\u548c%line\u3002\n        [%X{TraceId}]: \u8f93\u51faMDC (Mapped Diagnostic Context) \u4e2d\u952e\u4e3aTraceId\u7684\u503c\uff0cMDC\u662f\u4e00\u79cd\u53ef\u4ee5\u5728\u591a\u7ebf\u7a0b\u73af\u5883\u4e2d\u5173\u8054\u7279\u5b9a\u4e0a\u4e0b\u6587\u6570\u636e\u7684\u65b9\u5f0f\uff0c\u8fd9\u91cc\u7684TraceId\u901a\u5e38\u7528\u4e8e\u8ddf\u8e2a\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u7684\u8bf7\u6c42\u94fe\u8def\u3002\n        %msg%n: \u8f93\u51fa\u65e5\u5fd7\u6d88\u606f\u5185\u5bb9\uff0c\u5e76\u5728\u6d88\u606f\u540e\u6dfb\u52a0\u4e00\u4e2a\u6362\u884c\u7b26(\\n)\u3002\n    --&gt;\n    &lt;property name=\"log.pattern\" value=\"%d{HH:mm:ss.SSS} [%thread] %-5level %logger{20} - [%method,%line] - [%X{TraceId}] - %msg%n\" /&gt;\n\n    &lt;!-- \u63a7\u5236\u53f0\u8f93\u51fa --&gt;\n    &lt;appender name=\"console\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;\n        &lt;!--\u663e\u793a\u65e5\u5fd7\u6700\u4f4e\u7ea7\u522b\uff0c\u9ed8\u8ba4\u662finfo--&gt;\n        &lt;!--         &lt;filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\"&gt;--&gt;\n        &lt;!--             &lt;level&gt;debug&lt;/level&gt;--&gt;\n        &lt;!--         &lt;/filter&gt;--&gt;\n\n        &lt;encoder&gt;\n            &lt;pattern&gt;${log.pattern}&lt;/pattern&gt;\n            &lt;!-- \u8bbe\u7f6e\u5b57\u7b26\u96c6 --&gt;\n            &lt;charset&gt;UTF-8&lt;/charset&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;!-- \u7cfb\u7edfinfo\u65e5\u5fd7\u8f93\u51fa --&gt;\n    &lt;appender name=\"file_info\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"&gt;\n        &lt;!-- \u6b63\u5728\u8bb0\u5f55\u7684\u65e5\u5fd7\u6587\u6863\u7684\u8def\u5f84\u53ca\u6587\u6863\u540d --&gt;\n        &lt;file&gt;${log.path}/info/sys-info.log&lt;/file&gt;\n        &lt;!-- \u57fa\u4e8e\u65f6\u95f4\u521b\u5efa\u65e5\u5fd7\u6587\u4ef6(\u6700\u5e38\u89c1\uff0c\u5efa\u8bae\u4f7f\u7528) --&gt;\n        &lt;rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\"&gt;\n            &lt;!-- \u65e5\u5fd7\u6587\u4ef6\u540d\u683c\u5f0f --&gt;\n            &lt;fileNamePattern&gt;${log.path}/sys-info.%d{yyyy-MM-dd}.log&lt;/fileNamePattern&gt;\n            &lt;!-- \u65e5\u5fd7\u6700\u5927\u7684\u5386\u53f2 60\u5929 --&gt;\n            &lt;maxHistory&gt;60&lt;/maxHistory&gt;\n        &lt;/rollingPolicy&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;${log.pattern}&lt;/pattern&gt;\n            &lt;!-- \u8bbe\u7f6e\u5b57\u7b26\u96c6 --&gt;\n            &lt;charset&gt;UTF-8&lt;/charset&gt;\n        &lt;/encoder&gt;\n\n        &lt;filter class=\"ch.qos.logback.classic.filter.LevelFilter\"&gt;\n            &lt;!-- \u8fc7\u6ee4\u7684\u7ea7\u522b --&gt;\n            &lt;level&gt;INFO&lt;/level&gt;\n            &lt;!-- \u5339\u914d\u65f6\u7684\u64cd\u4f5c\uff1a\u63a5\u6536\uff08\u8bb0\u5f55\uff09 --&gt;\n            &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;\n            &lt;!-- \u4e0d\u5339\u914d\u65f6\u7684\u64cd\u4f5c\uff1a\u62d2\u7edd\uff08\u4e0d\u8bb0\u5f55\uff09 --&gt;\n            &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;\n        &lt;/filter&gt;\n    &lt;/appender&gt;\n\n    &lt;!-- \u7cfb\u7edferror\u65e5\u5fd7\u8f93\u51fa --&gt;\n    &lt;appender name=\"file_error\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"&gt;\n        &lt;file&gt;${log.path}/error/sys-error.log&lt;/file&gt;\n        &lt;!-- \u5faa\u73af\u653f\u7b56\uff1a\u57fa\u4e8e\u65f6\u95f4\u521b\u5efa\u65e5\u5fd7\u6587\u4ef6 --&gt;\n        &lt;rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\"&gt;\n            &lt;!-- \u65e5\u5fd7\u6587\u4ef6\u540d\u683c\u5f0f --&gt;\n            &lt;fileNamePattern&gt;${log.path}/sys-error.%d{yyyy-MM-dd}.log&lt;/fileNamePattern&gt;\n            &lt;!-- \u65e5\u5fd7\u6700\u5927\u7684\u5386\u53f2 60\u5929 --&gt;\n            &lt;maxHistory&gt;60&lt;/maxHistory&gt;\n        &lt;/rollingPolicy&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;${log.pattern}&lt;/pattern&gt;\n            &lt;!-- \u8bbe\u7f6e\u5b57\u7b26\u96c6 --&gt;\n            &lt;charset&gt;UTF-8&lt;/charset&gt;\n        &lt;/encoder&gt;\n\n        &lt;filter class=\"ch.qos.logback.classic.filter.LevelFilter\"&gt;\n            &lt;!-- \u8fc7\u6ee4\u7684\u7ea7\u522b --&gt;\n            &lt;level&gt;ERROR&lt;/level&gt;\n            &lt;!-- \u5339\u914d\u65f6\u7684\u64cd\u4f5c\uff1a\u63a5\u6536\uff08\u8bb0\u5f55\uff09 --&gt;\n            &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;\n            &lt;!-- \u4e0d\u5339\u914d\u65f6\u7684\u64cd\u4f5c\uff1a\u62d2\u7edd\uff08\u4e0d\u8bb0\u5f55\uff09 --&gt;\n            &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;\n        &lt;/filter&gt;\n    &lt;/appender&gt;\n\n    &lt;appender name=\"async_file_info\" class=\"ch.qos.logback.classic.AsyncAppender\"&gt;\n        &lt;!--  \u5f53\u961f\u5217\u7684\u5269\u4f59\u5bb9\u91cf\u5c0f\u4e8e\u8fd9\u4e2a\u9608\u503c\u5e76\u4e14\u5f53\u524d\u65e5\u5fd7level\u4e3a TRACE, DEBUG or INFO \uff0c\u5219\u4e22\u5f03\u8fd9\u4e9b\u65e5\u5fd7\u3002  --&gt;\n        &lt;discardingThreshold&gt;0&lt;/discardingThreshold&gt;\n        &lt;!--  \u66f4\u6539\u9ed8\u8ba4\u7684\u961f\u5217\u7684\u6df1\u5ea6,\u8be5\u503c\u4f1a\u5f71\u54cd\u6027\u80fd.\u9ed8\u8ba4\u503c\u4e3a256  --&gt;\n        &lt;queueSize&gt;1024&lt;/queueSize&gt;\n        &lt;!--  \u65b0\u589e\u8fd9\u884c\u4e3a\u4e86\u6253\u5370\u6808\u5806\u4fe1\u606f  --&gt;\n        &lt;includeCallerData&gt;true&lt;/includeCallerData&gt;\n        &lt;!--  \u6dfb\u52a0\u9644\u52a0\u7684appender,\u6700\u591a\u53ea\u80fd\u6dfb\u52a0\u4e00\u4e2a  --&gt;\n        &lt;appender-ref ref=\"file_info\"/&gt;\n    &lt;/appender&gt;\n    &lt;appender name=\"async_file_error\" class=\"ch.qos.logback.classic.AsyncAppender\"&gt;\n        &lt;!--  \u5f53\u961f\u5217\u7684\u5269\u4f59\u5bb9\u91cf\u5c0f\u4e8e\u8fd9\u4e2a\u9608\u503c\u5e76\u4e14\u5f53\u524d\u65e5\u5fd7level\u4e3a TRACE, DEBUG or INFO \uff0c\u5219\u4e22\u5f03\u8fd9\u4e9b\u65e5\u5fd7\u3002  --&gt;\n        &lt;discardingThreshold&gt;0&lt;/discardingThreshold&gt;\n        &lt;!--  \u66f4\u6539\u9ed8\u8ba4\u7684\u961f\u5217\u7684\u6df1\u5ea6,\u8be5\u503c\u4f1a\u5f71\u54cd\u6027\u80fd.\u9ed8\u8ba4\u503c\u4e3a256  --&gt;\n        &lt;queueSize&gt;1024&lt;/queueSize&gt;\n        &lt;!--  \u65b0\u589e\u8fd9\u884c\u4e3a\u4e86\u6253\u5370\u6808\u5806\u4fe1\u606f  --&gt;\n        &lt;includeCallerData&gt;true&lt;/includeCallerData&gt;\n        &lt;!--  \u6dfb\u52a0\u9644\u52a0\u7684appender,\u6700\u591a\u53ea\u80fd\u6dfb\u52a0\u4e00\u4e2a  --&gt;\n        &lt;appender-ref ref=\"file_error\"/&gt;\n    &lt;/appender&gt;\n    &lt;appender name=\"async_file_debug\" class=\"ch.qos.logback.classic.AsyncAppender\"&gt;\n        &lt;!--  \u5f53\u961f\u5217\u7684\u5269\u4f59\u5bb9\u91cf\u5c0f\u4e8e\u8fd9\u4e2a\u9608\u503c\u5e76\u4e14\u5f53\u524d\u65e5\u5fd7level\u4e3a TRACE, DEBUG or INFO \uff0c\u5219\u4e22\u5f03\u8fd9\u4e9b\u65e5\u5fd7\u3002  --&gt;\n        &lt;discardingThreshold&gt;0&lt;/discardingThreshold&gt;\n        &lt;!--  \u66f4\u6539\u9ed8\u8ba4\u7684\u961f\u5217\u7684\u6df1\u5ea6,\u8be5\u503c\u4f1a\u5f71\u54cd\u6027\u80fd.\u9ed8\u8ba4\u503c\u4e3a256  --&gt;\n        &lt;queueSize&gt;1024&lt;/queueSize&gt;\n        &lt;!--  \u65b0\u589e\u8fd9\u884c\u4e3a\u4e86\u6253\u5370\u6808\u5806\u4fe1\u606f  --&gt;\n        &lt;includeCallerData&gt;true&lt;/includeCallerData&gt;\n        &lt;!--  \u6dfb\u52a0\u9644\u52a0\u7684appender,\u6700\u591a\u53ea\u80fd\u6dfb\u52a0\u4e00\u4e2a  --&gt;\n        &lt;appender-ref ref=\"file_debug\"/&gt;\n    &lt;/appender&gt;\n\n    &lt;!-- \u7cfb\u7edf\u6a21\u5757\u65e5\u5fd7\u7ea7\u522b\u63a7\u5236  --&gt;\n    &lt;logger name=\"cn.xj\" level=\"info\" /&gt;\n    &lt;!-- Spring\u65e5\u5fd7\u7ea7\u522b\u63a7\u5236  --&gt;\n    &lt;logger name=\"org.springframework\" level=\"warn\" /&gt;\n\n    &lt;!--\u7cfb\u7edf\u64cd\u4f5c\u65e5\u5fd7--&gt;\n    &lt;root level=\"info\"&gt;\n        &lt;appender-ref ref=\"console\" /&gt;\n        &lt;appender-ref ref=\"async_file_info\" /&gt;\n        &lt;appender-ref ref=\"async_file_error\" /&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>"},{"location":"Java/SpringBoot/TraceId%E9%93%BE%E8%B7%AF%E8%BF%BD%E8%B8%AA/#traceid_2","title":"traceId\u5b9e\u6218","text":"<p>\u5982\u679c\u5df2\u77e5traceId\uff0c\u67e5\u8be2\u4e0a\u4e0b\u6587\u4fe1\u606f\uff1a<code>grep -C5 27452AA6FCB247B18AE05EA51F587ED6 sys-info.log</code>\u3002<code>-C5</code>\u8868\u793a\u643a\u5e26\u4e0a\u4e0b5\u884c\u65e5\u5fd7\uff0c<code>sys-info.log</code>\u662f\u65e5\u5fd7\u6587\u4ef6\u3002</p>"},{"location":"Java/SpringBoot/Vue%2BSpringBoot%2BNginx%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B/","title":"Vue+SpringBoot+Nginx\u90e8\u7f72\u6559\u7a0b","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/Vue%2BSpringBoot%2BNginx%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B/#_1","title":"\u601d\u8def","text":"<p>\u5047\u5b9aspringboot\u670d\u52a1\u7684\u5730\u5740\u662f<code>1.1.1.1:8080</code>\uff0cNginx\u7684\u670d\u52a1\u5730\u5740\u662f<code>1.1.1.1:80</code>\u3002</p> <p>\u524d\u7aef\u8d44\u6e90</p> <p>Vue\u9879\u76ee\u6253\u5305\u540e\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u5355\u6587\u4ef6<code>index.html</code>\u548c\u4e00\u4e9b\u9759\u6001\u8d44\u6e90\u3002\u6211\u4eec\u5c06\u8fd9\u4e9b\u524d\u7aef\u8d44\u6e90\u653e\u5728Nginx\u7684\u6307\u5b9a\u76ee\u5f55\uff0c\u901a\u8fc7<code>1.1.1.1:80</code>\u5373\u53ef\u83b7\u53d6\u524d\u7aef\u8d44\u6e90\u3002</p> <p>\u6ce8\u610f\uff0cvue\u662f\u5355\u9875\u9762\u5e94\u7528\uff0c\u76f4\u63a5\u901a\u8fc7uri\u8bbf\u95ee\u8d44\u6e90\u53ef\u80fd\u4f1a\u51fa\u73b0404\u95ee\u9898\u3002\u9700\u8981nginx\u914d\u7f6e\u3002</p> <p>\u540e\u7aef\u8d44\u6e90</p> <p>\u6211\u4eec\u6709\u4e24\u79cd\u7b56\u7565\uff1a</p> <ol> <li> <p>\u5ba2\u6237\u7aef\u76f4\u63a5\u5411<code>1.1.1.1:8080</code>\u53d1\u9001\u8bf7\u6c42\uff1a\u5ba2\u6237\u7aef\u83b7\u53d6\u5230<code>1.1.1.1:80</code>\u7ad9\u70b9\u7684\u8d44\u6e90\uff0c\u4f7f\u7528JS\u7684<code>ajax</code>\u6216<code>axios</code>\u5411<code>1.1.1.1:8080</code>\u53d1\u9001\u8d44\u6e90\u65f6\uff0c\u4f1a\u4ea7\u751f\u8de8\u57df\u95ee\u9898\uff08\u4e0d\u61c2\u5c31\u767e\u5ea6\uff09\u3002\u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u4f1a\u81ea\u52a8\u5728\u8bf7\u6c42\u4e2d\u6dfb\u52a0<code>Origin</code>\u7b49\u5b57\u6bb5\uff0c\u7528\u4e8e\u8868\u660e\u8be5\u8bf7\u6c42\u662f\u8de8\u57df\u8bf7\u6c42\uff0cspringboot\u670d\u52a1\u6536\u5230\u8be5\u8de8\u57df\u8bf7\u6c42\u540e\uff0c\u9ed8\u8ba4\u4f1a\u62d2\u7edd\u8be5\u8bf7\u6c42\u3002\u89e3\u51b3\u65b9\u5f0f\u662f\u4fee\u6539Springboot\u914d\u7f6e\uff0c\u8ba9Springboot\u670d\u52a1\u63a5\u6536\u8de8\u57df\u8bf7\u6c42\u3002</p> </li> <li> <p>\u5ba2\u6237\u7aef\u5411<code>1.1.1.1:80/api</code>\u53d1\u9001\u8bf7\u6c42\uff0c\u7136\u540eNginx\u5c06<code>/api</code>\u6536\u5230\u7684\u8bf7\u6c42\u8f6c\u53d1\u7ed9<code>1.1.1.1:8080</code>\u3002</p> </li> </ol>"},{"location":"Java/SpringBoot/Vue%2BSpringBoot%2BNginx%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B/#_2","title":"\u5b9e\u6218","text":"<p>\u524d\u7aef\u914d\u7f6e</p> <ol> <li>\u5f00\u53d1\u65f6\uff0c\u524d\u7aef\u8bf7\u6c42\u540e\u7aef\u8ba9\u4ee3\u7406\u53bb\u505a\u3002\u4e0b\u9762\u7ed9\u4e00\u4e2avite\u7684\u914d\u7f6e\u6848\u4f8b\uff0c\u5728<code>vite.config.js</code>\u4e2d\uff1a</li> </ol> <pre><code>export default defineConfig({\n  server: {\n    proxy: {\n      '/api': {\n        target: 'http://localhost:8080',\n        changeOrigin: true,\n        rewrite: path =&gt; path.replace(/^\\/api/, '')\n      }\n    }\n  }\n})\n</code></pre> <p>\u4f46\u51e1\u6d89\u53ca\u5230\u8bf7\u6c42\u540e\u7aef\u7684\u63a5\u53e3\uff0c\u90fd\u8981\u643a\u5e26\u4e0a<code>/api</code>\u524d\u7f00\uff0c\u4f8b\u5982\uff1a</p> <pre><code>let courseAddUrl = ref('/api' + \"/course/add\")\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1a\u4e0a\u8ff0\u914d\u7f6e\u4ec5\u5728\u5f00\u53d1\u6a21\u5f0f\u4e2d\u6709\u6548\uff0c\u5176\u539f\u7406\u662f\u6211\u4eec\u914d\u7f6evite\uff0c\u76f8\u5f53\u4e8e\u8bbe\u7f6e\u5b83\u7684\u914d\u5957web\u670d\u52a1\u5668koa\uff0c\u8ba9koa\u5e2e\u6211\u4eec\u8f6c\u53d1\u8bf7\u6c42\u3002</p> <ol> <li>\u7136\u800c\u5728\u751f\u4ea7\u6a21\u5f0f\u4e2d\uff0cvue\u9879\u76ee\u901a\u5e38\u6253\u5305\u6210\u4e00\u4e2a\u6587\u4ef6\uff0c\u653e\u5728Nginx\u670d\u52a1\u5668\u4e0a\uff0c\u56e0\u6b64\u6211\u4eec\u8fd8\u9700\u8981\u914d\u7f6eNginx\u670d\u52a1\u5668\uff0c\u8ba9\u5b83\u5e2e\u6211\u4eec\u5b9e\u73b0\u8bf7\u6c42\u8f6c\u53d1\u3002</li> </ol> <p>Nginx\u914d\u7f6e\u5982\u4e0b\uff08\u76f4\u63a5\u4f7f\u7528\u5c31\u884c\uff09\uff1a</p> <pre><code>server {\n    listen       80;\n    server_name  localhost;\n\n    root   html/dist;\n    index index.html;\n\n    # \u8bf7\u6c42\u4ee3\u7406 \u4e24\u6761\u659c\u7ebf\u4e0d\u80fd\u5c11\uff01\n    location /api/ {\n        proxy_pass http://localhost:8080/;\n    }\n\n    # \u8bbe\u7f6e\u9996\u9875\n    location / {\n        try_files $uri $uri/ @router;\n        index  index.html index.htm;\n    }\n\n    # \u89e3\u51b3Vue\u9879\u76ee404\u9519\u8bef\n    location @router {\n        rewrite ^.*$ /index.html last;\n    }\n}\n</code></pre> <p>\u6ce8\u610f\uff0c\u8bbf\u95eeVue\u9879\u76ee\u7684\u5b50\u9879\u76ee\u4f1a\u51fa\u73b0404\u9519\u8bef\uff0c\u9700\u8981\u7528\u5230\u4e0a\u8ff0\u914d\u7f6e\uff1a</p> <pre><code># \u89e3\u51b3Vue\u9879\u76ee404\u9519\u8bef\nlocation @router {\n    rewrite ^.*$ /index.html last;\n}\n</code></pre>"},{"location":"Java/SpringBoot/Vue%2BSpringBoot%2BNginx%E9%83%A8%E7%BD%B2%E6%95%99%E7%A8%8B/#sessioncookiecookie","title":"session\u548ccookie\uff08\u5199\u5728cookie\u7bc7\u7ae0\u53ef\u80fd\u66f4\u597d\uff09","text":"<p>\u540c\u6e90\u8bf7\u6c42\u4f1a\u9ed8\u8ba4\u643a\u5e26cookie\uff0c\u975e\u540c\u6e90\u8bf7\u6c42\u9700\u8981\u914d\u7f6ewithCredentials\u4e3atrue\u624d\u80fd\u643a\u5e26cookie\u3002</p> <p>\u6709\u4e9bcookie\u662fhttponly\u7684\uff0c\u4e0d\u540c\u901a\u8fc7js\u64cd\u4f5c\uff0c\u63d0\u9ad8\u4e86\u5b89\u5168\u6027\u3002</p>"},{"location":"Java/SpringBoot/bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/","title":"bean\u7684\u751f\u547d\u5468\u671f","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/#bean_1","title":"\u626b\u63cfbean\u7c7b","text":"<p>\u4f7f\u7528xml\u3001\u6ce8\u89e3\u626b\u63cf\u7b49\u65b9\u5f0f\u627e\u5230bean\u7c7b\uff0c\u5e76\u5c06bean\u76f8\u5173\u4fe1\u606f\u653e\u5165<code>beanDefinationMap</code>\u4e2d\uff0c\u5176\u4e2dkey\u4e3abeanName\uff0cvalue\u4e3abeanDefination\u3002</p>"},{"location":"Java/SpringBoot/bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/#bean_2","title":"\u751f\u4ea7bean","text":"<p>\u904d\u5386<code>beanDefinationMap</code>\uff0c\u521b\u5efabean\u5bf9\u8c61\u3002\u521b\u5efabean\u5bf9\u8c61\u5927\u81f4\u6709\u4ee5\u4e0b\u51e0\u6b65\uff1a\u6784\u9020\u5bf9\u8c61\u3001\u586b\u5145\u5c5e\u6027\u3001\u521d\u59cb\u5316\u5b9e\u4f8b\u3001\u6ce8\u518c\u9500\u6bc1\u3002</p> <ol> <li>\u6784\u9020\u5bf9\u8c61\uff1a</li> <li>\u586b\u5145\u5c5e\u6027\uff1a</li> <li>\u521d\u59cb\u5316\u5b9e\u4f8b\uff1a</li> <li>\u6ce8\u518c\u9500\u6bc1\uff1a</li> </ol>"},{"location":"Java/SpringBoot/bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/#_1","title":"\u5b9e\u4f8b\u5316","text":"<p>\u6b63\u5e38\u7f16\u7a0b\u4e2d\uff0c\u6211\u4eec\u5b9e\u4f8b\u5316\u4e00\u4e2a\u5bf9\u8c61\u53ea\u9700\u8981new\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5e76\u8c03\u7528\u9002\u5f53\u7684\u6784\u9020\u65b9\u6cd5\u5373\u53ef\u3002</p> <pre><code>Person p1 = new Person();\nPerson p2 = new Person(\"\u6653\u9f99\", 8);\n</code></pre> <p>\u5728IOC\u5bb9\u5668\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u901a\u8fc7\u53cd\u5c04\u673a\u5236\uff0c\u83b7\u53d6bean\u7c7b\u7684\u6784\u9020\u65b9\u6cd5\u3002\u7136\u540e\u521b\u5efa\u5bf9\u8c61\u3002</p> <p>\u83b7\u53d6\u6784\u9020\u65b9\u6cd5\u7684\u7b56\u7565\u5982\u4e0b\uff1a</p> <ol> <li>\u5982\u679cbean\u53ea\u6709\u4e00\u4e2a\u6784\u9020\u65b9\u6cd5\uff0c\u5219\u53d6\u8fd9\u4e2a\u6784\u9020\u65b9\u6cd5\u3002</li> <li>\u5982\u679cbean\u4e2d\u6709\u591a\u4e2a\u6784\u9020\u65b9\u6cd5\uff0c\u5219\u5148\u62ff\u5e26\u6709<code>@Autowired</code>\u7684\u6784\u9020\u65b9\u6cd5\u3002\uff08\u4e0d\u80fd\u7528<code>@Resource</code>\uff09</li> <li>\u5982\u679c\u6709\u591a\u4e2a<code>@Autowired</code>\u6784\u9020\u65b9\u6cd5\uff0c\u5219\u62a5\u9519\u3002</li> <li>\u5982\u679c\u6784\u9020\u65b9\u6cd5\u90fd\u6ca1\u6709<code>@Autowired</code>\uff0c\u5219\u4f18\u5148\u62ff\u65e0\u53c2\u6784\u9020\u65b9\u6cd5\u3002</li> <li>\u5982\u679c\u53ea\u6709\u591a\u4e2a\u4e0d\u540c\u7684\u6709\u53c2\u6784\u9020\u65b9\u6cd5\uff0c\u5219\u62a5\u9519\u3002</li> </ol> <p>\u4e0d\u5efa\u8bae\u5728\u4e00\u4e2abean\u7c7b\u4e2d\u6dfb\u52a0\u591a\u4e2a\u6784\u9020\u65b9\u6cd5\u3002</p> <p>\u83b7\u53d6\u6784\u9020\u65b9\u6cd5\u540e\uff0c\u5982\u679c\u6784\u9020\u65b9\u6cd5\u7684\u53c2\u6570\u5217\u8868\u6709bean\u5bf9\u8c61\uff0c\u4f1a\u6309\u7167\u4ee5\u4e0b\u89c4\u5219\u5728\u5355\u4f8b\u6c60\u4e2d\u67e5\u627ebean\u5bf9\u8c61\uff1a</p> <ol> <li>\u6839\u636e\u53c2\u6570\u7684\u7c7b\u578b\u5728\u5355\u4f8b\u6c60\u4e2d\u67e5\u627ebean\u5bf9\u8c61\u3002</li> <li>\u82e5\u5355\u4f8b\u6c60\u4e2d\u6709\u591a\u4e2a\u76f8\u540c\u7c7b\u578b\u7684bean\u5bf9\u8c61\uff0c\u5219\u6839\u636e\u53c2\u6570\u540d\u5339\u914d\u67e5\u627ebean\u5bf9\u8c61\u3002</li> <li>\u5982\u679c\u8fd8\u6ca1\u627e\u5230\uff0c\u5219\u6784\u9020\u4fe1\u606f\u4e0d\u5b8c\u6574\uff0c\u4f1a\u62a5\u9519\u3002</li> </ol> <p>\u6b64\u65f6\u6211\u4eec\u6709\u4e86bean\u7684\u6784\u9020\u51fd\u6570+\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\u5bf9\u8c61\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7\u53cd\u5c04\u6784\u9020bean\u5bf9\u8c61\u4e86\u3002</p>"},{"location":"Java/SpringBoot/bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/#_2","title":"\u586b\u5145\u5c5e\u6027","text":"<p>\u6784\u9020\u597dbean\u5bf9\u8c61\u540e\uff0c\u9700\u8981\u586b\u5145\u5c5e\u6027\u3002\u4e3b\u8981\u586b\u5145\u6807\u6709<code>@Autowired</code>\u6216<code>@Resource</code>\u7684\u5c5e\u6027\u3002</p> <p>\u586b\u5145\u65f6\u5982\u679c\u51fa\u73b0\u5faa\u73af\u4f9d\u8d56\u7684\u60c5\u51b5\uff0c\u9700\u8981\u501f\u52a9\u4e09\u7ea7\u7f13\u5b58\u3002\uff08\u4e0d\u5efa\u8bae\u51fa\u73b0\u5faa\u73af\u4f9d\u8d56\uff09</p>"},{"location":"Java/SpringBoot/bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/#_3","title":"\u521d\u59cb\u5316\u5b9e\u4f8b","text":"<p>\u521d\u59cb\u5316\u4e3b\u8981\u8bbe\u7f6e\u6216\u83b7\u53d6IOC\u5bb9\u5668\u7684\u5404\u79cd\u53c2\u6570\uff0c\u4f8b\u5982\u5404\u79cdbeanName\uff0cbeanFactory......</p> <p>bean\u7c7b\u5982\u679c<code>implements</code>\u5404\u79cd<code>Aware</code>\u63a5\u53e3\uff0c\u5c31\u80fd\u611f\u77e5\u5230IOC\u5bb9\u5668\u4e2d\u7684\u4fe1\u606f\u3002</p>"},{"location":"Java/SpringBoot/bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/#_4","title":"\u6ce8\u518c\u9500\u6bc1","text":"<p>\u65e0</p>"},{"location":"Java/SpringBoot/bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/#bean_3","title":"\u4f7f\u7528bean","text":""},{"location":"Java/SpringBoot/bean%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/#bean_4","title":"\u9500\u6bc1bean","text":""},{"location":"Java/SpringBoot/mybatis/","title":"Mybatis \u7b14\u8bb0","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/mybatis/#_1","title":"\u5199\u5728\u524d\u9762","text":"<p>\u4e2a\u4eba\u4e60\u60ef\u4f7f\u7528Mybatis\uff0c\u56e0\u4e3a\u76f4\u63a5\u64cd\u4f5cSQL\u8bed\u53e5\u4f1a\u5f88\u9177\uff08\u867d\u7136\u6709\u4e00\u5b9a\u7684\u95e8\u69db\uff09\u3002</p> <p>Mybatis\u5728Spring Boot\u9879\u76ee\u4e2d\u7684\u4f7f\u7528\u65b9\u6cd5\u548c\u5b98\u65b9\u6587\u7ae0\u4e2d\u7684\u6709\u4e00\u4e9b\u533a\u522b\uff0c\u56e0\u6b64\u6211\u624d\u5199\u4e0b\u8fd9\u7bc7\u5173\u4e8e\u6587\u7ae0Mybatis\u5728Spring Boot\u4e2d\u7684\u4f7f\u7528\u65b9\u6cd5\u3002</p> <p>\u5efa\u8bae\u5b89\u88c5<code>MybatisX</code>\u63d2\u4ef6\u3002</p>"},{"location":"Java/SpringBoot/mybatis/#_2","title":"\u9879\u76ee\u7ed3\u6784","text":"<pre><code>\u2502  pom.xml\n\u2502\n\u251c\u2500src\n\u2502  \u251c\u2500main\n\u2502  \u2502  \u251c\u2500java\n\u2502  \u2502  \u2502  \u2514\u2500com\n\u2502  \u2502  \u2502      \u2514\u2500lee\n\u2502  \u2502  \u2502          \u2514\u2500mybatis\n\u2502  \u2502  \u2502              \u2502  MybatisApplication.java\n\u2502  \u2502  \u2502              \u2502\n\u2502  \u2502  \u2502              \u251c\u2500mapper\n\u2502  \u2502  \u2502              \u2502      UserMapper.java\n\u2502  \u2502  \u2502              \u2502\n\u2502  \u2502  \u2502              \u2514\u2500pojo\n\u2502  \u2502  \u2502                      User.java\n\u2502  \u2502  \u2502\n\u2502  \u2502  \u2514\u2500resources\n\u2502  \u2502      \u2502  application.properties\n\u2502  \u2502      \u2502\n\u2502  \u2502      \u2514\u2500mybatis\n\u2502  \u2502          \u2514\u2500mapper\n\u2502  \u2502                  UserMapper.xml\n\u2502  \u2502\n\u2502  \u2514\u2500test\n\u2502      \u2514\u2500java\n\u2502          \u2514\u2500com\n\u2502              \u2514\u2500lee\n\u2502                  \u2514\u2500mybatis\n\u2502                          MybatisApplicationTests.java\n</code></pre>"},{"location":"Java/SpringBoot/mybatis/#_3","title":"\u4ee3\u7801","text":""},{"location":"Java/SpringBoot/mybatis/#pomxml","title":"pom.xml","text":"<pre><code>&lt;dependencies&gt;\n    &lt;!--springboot\u7684\u57fa\u672c\u914d\u7f6e--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--mysql\u914d\u7f6e--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--mybatis\u76f8\u5173\u4f9d\u8d56--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;\n        &lt;artifactId&gt;mybatis&lt;/artifactId&gt;\n        &lt;version&gt;3.5.10&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;\n        &lt;version&gt;2.2.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--\u5176\u4ed6\u5de5\u5177--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-platform-launcher&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>"},{"location":"Java/SpringBoot/mybatis/#applicationproperties","title":"application.properties","text":"<ol> <li> <p>mysql\u6ce8\u610f\u9009\u62e9\u81ea\u5df1\u7684\u7aef\u53e3\u53f7(\u901a\u5e38\u662f3306)\u548c\u6570\u636e\u5e93\u540d</p> </li> <li> <p><code>mybatis.mapper-locations</code>\u5c5e\u6027\u5b9a\u4e49<code>Mapper.xml</code>\u6587\u4ef6\u6240\u5728\u4f4d\u7f6e\uff0c\u4e00\u5b9a\u8981\u5199\uff01</p> </li> <li>classpath\u6307\u7684\u662fsrc.main.java\u548csrc.main.resources\u8def\u5f84\u4ee5\u53ca\u7b2c\u4e09\u65b9jar\u5305\u7684\u6839\u8def\u5f84</li> </ol> <pre><code># database\nspring.datasource.username=root\nspring.datasource.password=123456\nspring.datasource.url=jdbc:mysql://localhost:3306/webproject?serverTimezone=Asia/Shanghai&amp;useUnicode=true&amp;characterEncoding=utf-8\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n\n# mybatis\n# \u5b9a\u4f4dMapper.xml\u6587\u4ef6\u6240\u5728\u8def\u5f84\nmybatis.mapper-locations=classpath:mapper/*.xml\n</code></pre>"},{"location":"Java/SpringBoot/mybatis/#test","title":"test\u6848\u4f8b","text":"<p>\u5728<code>/src/test/jafa/....../</code>\u4e2d\u968f\u4fbf\u521b\u5efa\u4e00\u4e2atest\u6848\u4f8b\u3002</p> <pre><code>@Test\nvoid test01() {\n    List&lt;User&gt; users = userMapper.ListUser();\n    if (users == null) {\n        System.out.println(\"\u6570\u636e\u8868\u4e3a\u7a7a\");\n    } else {\n        for (User user : users) {\n            System.out.println(user);\n        }\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/mybatis/#mybatisapplicationjava","title":"MybatisApplication.java","text":"<p>\u542f\u52a8\u7c7b\u4e0a\u9762\u4e00\u5b9a\u8981\u6dfb\u52a0<code>@MapperScan(\"com.lee.mybatis.mapper\")</code>\uff0c\u8fd9\u6837\u624d\u80fd\u626b\u63cf\u5230Mapper\u63a5\u53e3\u6587\u4ef6\uff0c\u5426\u5219\u9700\u8981\u5728\u6bcf\u4e2aMapper\u63a5\u53e3\u4e0a\u9762\u6dfb\u52a0<code>@Mapper</code>\u3002</p> <pre><code>package com.lee.mybatis;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\n@MapperScan(\"com.lee.mybatis.mapper\")\npublic class MybatisApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(MybatisApplication.class, args);\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/mybatis/#userjava","title":"User.java","text":"<p>User\u5b9e\u4f53\u7c7b\u4e00\u5b9a\u8981\u548c\u6570\u636e\u8868User\u4e25\u683c\u5bf9\u5e94\uff01</p> <pre><code>package com.lee.mybatis.pojo;\n\nimport lombok.Data;\n\n@Data\npublic class User {\n    private Long id;\n    private String name;\n    private int age;\n    private String email;\n}\n</code></pre>"},{"location":"Java/SpringBoot/mybatis/#usermapperjava","title":"UserMapper.java","text":"<pre><code>package com.lee.mybatis.mapper;\n\nimport com.lee.mybatis.pojo.User;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.List;\n\n@Repository\npublic interface UserMapper {\n    // ListUser\u662f\u6211\u4eec\u81ea\u5b9a\u4e49\u7684\u67e5\u8be2\u65b9\u5f0f\uff0c\u5728UserMapper.xml\u4e2d\u6709\u5177\u4f53\u7684\u5b9e\u73b0\u65b9\u5f0f\u3002\n    List&lt;User&gt; ListUser();\n}\n</code></pre>"},{"location":"Java/SpringBoot/mybatis/#usermapperxml","title":"UserMapper.xml","text":"<p>namespace\u6307java\u6587\u4ef6\u4e2d\u5bf9\u5e94\u7684Mapper\u63a5\u53e3\u6587\u4ef6\uff08\u4e0d\u59a8\u53eb\u5b83doc\uff09\u3002</p> <p>id\u5c5e\u6027\u6307doc\u4e2d\u9700\u8981\u5bf9\u5e94\u7684\u51fd\u6570\u3002</p> <p>resultType\u6307\u51fd\u6570\u7684\u8fd4\u56de\u7c7b\u578b\u3002</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.lee.mybatis.mapper.UserMapper\"&gt;\n    &lt;select id=\"ListUser\" resultType=\"User\"&gt;\n        select * from user\n    &lt;/select&gt;\n&lt;/mapper&gt;\n</code></pre>"},{"location":"Java/SpringBoot/mybatis/#mybatisplusmapperxmlsql","title":"MyBatisPlus\u901a\u8fc7Mapper.xml\u8fdb\u884cSQL\u64cd\u4f5c","text":"<p>\u5177\u4f53\u64cd\u4f5c\u548cMybatis\u51e0\u4e4e\u4e00\u6837\u3002\u4e0d\u540c\u70b9\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u5f15\u5165\u4f9d\u8d56<code>mybatis-plus-boot-starter</code>\u3002</p> </li> <li> <p><code>application.properties</code>\u6587\u4ef6\u4e2d\u7684\u914d\u7f6e\uff1a</p> </li> </ol> <p><code>xml    mybatis-plus.mapper-locations=classpath:mybatis-plus/mapper/*.xml    mybatis.type-aliases-package=com.lee.mybatisplus.pojo</code></p>"},{"location":"Java/SpringBoot/mybatis/#mybatis_1","title":"\u4f7f\u7528Mybatis\u67e5\u8be2\u90e8\u5206\u5b57\u6bb5 + \u5206\u9875\u67e5\u8be2","text":"<p>\u5047\u5b9a\u6709\u4e00\u5f20user\u8868\uff0c\u5305\u542b\u4ee5\u4e0b\u5c5e\u6027\uff1a</p> <pre><code>id\nusername\npassword\nemail\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u53ea\u60f3\u53d6\u51fa<code>id</code>\u548c<code>email</code>\u5b57\u6bb5\uff0c\u8be5\u600e\u4e48\u529e\u5462\uff1f</p> <p>\u65b9\u6cd5\u4e00\uff1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u7c7b\uff0c\u53ea\u5305\u542b<code>id</code>\u548c<code>email</code>\u3002\uff08\u4e0d\u53ef\u53d6\uff01\uff09</p> <p>\u65b9\u6cd5\u4e8c\uff1a\u4f7f\u7528Map\u5b58<code>\u5b57\u6bb5</code>\u548c<code>\u503c</code>\u3002</p>"},{"location":"Java/SpringBoot/mybatis/#_4","title":"\u6848\u4f8b","text":"<p><code>@MapKey(\"id\")</code>\u8868\u793a\u5c06\u67e5\u8be2\u7684\u7ed3\u679c\u6309\u7167id\u5f52\u6863\u3002</p> <p>UserMapper\u63a5\u53e3</p> <pre><code>import org.apache.ibatis.annotations.MapKey;\nimport org.apache.ibatis.annotations.Param;\n\nimport java.util.List;\nimport java.util.Map;\n\npublic interface UserMapper {\n    public List&lt;Map&lt;String, Object&gt;&gt; listPartInfo(@Param(\"start\") int start, @Param(\"len\") int len);\n\n    @MapKey(\"id\")\n    public Map&lt;String, Object&gt; listPartInfo2(@Param(\"start\") int start, @Param(\"len\") int len);\n}\n</code></pre> <p>UserMapper.xml</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.lee.weapp.mapper.UserMapper\"&gt;\n    &lt;select id=\"listPartInfo\" resultType=\"java.util.Map\"&gt;\n        select id, email from user order by id limit #{start}, #{len}\n    &lt;/select&gt;\n    &lt;select id=\"listPartInfo2\" resultType=\"java.util.Map\"&gt;\n        select id, email from user order by id limit #{start}, #{len}\n    &lt;/select&gt;\n&lt;/mapper&gt;\n</code></pre> <p>\u67e5\u8be2\u4ee3\u7801\uff1a</p> <pre><code>@Test\nvoid contextLoads() throws SQLException {\n    List&lt;Map&lt;String, Object&gt;&gt; lists = userMapper.listPartInfo(4, 8);\n    for (Map&lt;String, Object&gt; mp : lists) {\n        System.out.println(mp);\n    }\n\n    Map&lt;String, Object&gt; lists2 = userMapper.listPartInfo2(4, 7);\n    for (Map.Entry&lt;String, Object&gt; entry : lists2.entrySet()) {\n        System.out.println(entry);\n    }\n}\n</code></pre> <p>\u8fd9\u91cc\u7ed9\u4e86\u4e24\u79cd\u67e5\u8be2\u65b9\u5f0f\u3002\u5efa\u8bae\u4f7f\u7528\u7b2c\u4e8c\u79cd\u3002</p>"},{"location":"Java/SpringBoot/mybatis/#mybatis_2","title":"Mybatis\u6700\u7b80\u5355\u7684\u4f7f\u7528\u65b9\u6cd5","text":"<ol> <li>\u4f7f\u7528select\u6ce8\u89e3\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4e0d\u4f7f\u7528xml\u914d\u7f6e\uff0c\u4e5f\u4e0d\u7528\u4f7f\u7528<code>@Param</code>\u6ce8\u89e3\u4e86\u3002</li> <li>\u901a\u8fc7Java\u7684Map\u5411MySQL\u4f20\u9012\u53c2\u6570\u3002\u76f4\u63a5\u4e0a\u4ee3\u7801\uff08\u5173\u4e8e\u767b\u5f55\u7684mapper\u67e5\u8be2\uff09\u3002</li> </ol> <p>mapper\u5c42\uff1a</p> <p>LoginController.java</p> <pre><code>public interface LoginMapper {\n    // #{username}\u4f1a\u88ab\u81ea\u52a8\u89e3\u6790\u4e3auser\u4e2dkey\u4e3ausername\u6240\u5bf9\u5e94\u7684value\n    @Select(\"select * from nltx_user where username = #{username} and password = #{password}\")\n    Map&lt;String, Object&gt; login(Map&lt;String, Object&gt; user);\n}\n</code></pre> <p>\u6d4b\u8bd5\u4ee3\u7801</p> <pre><code>@Test\nvoid contextLoads() throws SQLException {\n    Map&lt;String, Object&gt; user = new HashMap&lt;&gt;();\n    user.put(\"username\", \"Yin Jialun\");\n    user.put(\"password\", \"oRfH0taAHt\");\n    Map&lt;String, Object&gt; ansUser = loginMapper.login(user);\n    System.out.println(ansUser);\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%20aop/","title":"SprintBoot AOP","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/springboot%20aop/#_1","title":"\u53c2\u8003\u8d44\u6599","text":"<p>\u53c2\u8003\u6587\u68631</p> <p>\u4e00\u4e9b\u91cd\u8981\u7684\u6982\u5ff5\uff1a</p> <p>\u5207\u70b9\uff1a\u5e94\u7528\u7a0b\u5e8f\u4e2d\u9009\u62e9\u54ea\u4e9b\u8fde\u63a5\u70b9\u8fdb\u884c\u62e6\u622a\u548c\u5904\u7406\u7684\u5339\u914d\u89c4\u5219\uff0c\u6240\u4ee5\u5207\u70b9\u4e00\u5b9a\u662f\u8fde\u63a5\u70b9\uff0c\u53cd\u4e4b\u4e0d\u6210\u7acb\u3002</p> <p>\u901a\u77e5\uff1a\u5305\u542b\u4e86\u9700\u8981\u7528\u4e8e\u591a\u4e2a\u5e94\u7528\u5bf9\u8c61\u7684\u6a2a\u5207\u884c\u4e3a\uff0c\u4e5f\u5373\u5b9a\u4e49\u4e86\u201c\u4ec0\u4e48\u65f6\u5019\u201d\u548c\u201c\u505a\u4ec0\u4e48\u201d\u3002</p> <p>\u8fde\u63a5\u70b9\uff1a\u5e94\u7528\u7a0b\u5e8f\u4e2d\u6f5c\u5728\u7684\u62e6\u622a\u70b9\u3002</p> <p>\u5207\u9762\uff1a\u5207\u70b9\u548c\u901a\u77e5\u7684\u7ec4\u5408\u4f53\uff0c\u5b9a\u4e49\u4e86\u5728\u54ea\u4e9b\u8fde\u63a5\u70b9\u4e0a\u6267\u884c\u54ea\u4e9b\u64cd\u4f5c\u3002</p> <p>\u5728\u5b9e\u9645\u5f00\u53d1\u4e2d\uff0c\u6211\u5bf9\u4e8e\u4e0a\u8ff0\u6982\u5ff5\u6709\u7b80\u5355\u4f46\u4e0d\u5b8c\u5168\u6b63\u786e\u7684\u7406\u89e3\u3002</p> <p>\u5207\u70b9\uff1a\u5c31\u662f\u5f88\u591a\u51fd\u6570\uff08\u4e5f\u53ef\u4ee5\u662f\u7c7b\uff09\u7ec4\u6210\u7684\u96c6\u5408\u3002\u901a\u5e38\u4f7f\u7528<code>@PointCut()</code>\u6ce8\u89e3\u6307\u5b9a\u51fd\u6570\u96c6\u5408\u3002</p> <p>\u901a\u77e5\uff1a\u4e00\u822c\u5728\u51fd\u6570\u4e0a\u6dfb\u52a0<code>@Before</code>/<code>@Around</code>/<code>@After</code>\u7b49\u6ce8\u89e3\uff0c\u6b64\u65f6\u6ce8\u89e3\u548c\u51fd\u6570\u5171\u540c\u7ec4\u6210\u4e86\u901a\u77e5\uff0c\u4ece\u800c\u80fd\u591f\u5728\u5207\u70b9\u6267\u884c\u7684\u524d/\u540e\u6267\u884c\u6211\u4eec\u7684\u51fd\u6570\u3002</p>"},{"location":"Java/SpringBoot/springboot%20aop/#pointcut","title":"\u5173\u4e8e@Pointcut","text":"<p><code>@Pointcut</code>\u6ce8\u89e3\u4e2d\u901a\u8fc7\u586b\u5199\u53c2\u6570\u53ef\u4ee5\u6307\u5b9a\u5207\u70b9\u3002\u53c2\u6570\u7684\u7c7b\u578b\u6709\u4ee5\u4e0b\u51e0\u79cd\uff1a</p> <ol> <li>execution\uff1a\u4f7f\u7528execution\u8868\u8fbe\u5f0f\u53ef\u4ee5\u5339\u914d\u65b9\u6cd5\u6267\u884c\u7684\u65b9\u6cd5\u7b7e\u540d\u548c\u53c2\u6570\u3002</li> </ol> <p>\u5199\u6cd5\uff1a</p> <pre><code>1) `@Pointcut(\"execution(* com.example.service.*.*(..))\")`\u3002\u3010\u6ce8\u3011\u5b83\u53ea\u4f1a\u62e6\u622a\u5230\u6307\u5b9a\u7684\u76ee\u5f55\uff0c\u4e0d\u4f1a\u9012\u5f52\u62e6\u622a\u5b50\u76ee\u5f55\u4e2d\u7684\u51fd\u6570\u3002\u5982\u679c\u62e6\u622a\u8def\u5f84\u4e3a`com.example`\uff0c\u53ef\u80fd\u4e00\u4e2a\u51fd\u6570\u90fd\u6ca1\u6cd5\u62e6\u622a\u3002\n2) `@Pointcut(\"execution(* com.example..*\")`\n</code></pre> <p>\u89e3\u91ca\uff1a</p> <p><code>execution: \u5339\u914d\u5bf9\u8c61\u662f\u51fd\u6570    *: \u5f85\u5339\u914d\u51fd\u6570\u7684\u5bf9\u8c61\u8fd4\u56de\u503c\u7c7b\u578b\u662f\u4efb\u610f\u7c7b\u578b    com.example.service: \u5339\u914d\u6307\u5b9a\u8def\u5f84\u4e2d\u7684\u51fd\u6570    *: \u6307\u5b9a\u6240\u6709\u7c7b    *: \u6307\u5b9a\u7c7b\u4e2d\u7684\u6240\u6709\u51fd\u6570    (..): \u53c2\u6570\u5217\u8868\u4efb\u610f</code></p> <ol> <li>@annotation\uff1a\u5339\u914d\u6240\u6709\u4f7f\u7528\u8be5\u6ce8\u89e3\u7684\u51fd\u6570\u548c\u7c7b\u3002</li> </ol> <p>\u5199\u6cd5\uff1a<code>@Pointcut(\"@annotation(com.lee.xnxydev.aop.LogAnnotation)\")</code>\u3002</p> <ol> <li>within\uff1a\u5339\u914d\u67d0\u4e2a\u7c7b\u4e2d\u7684\u6240\u6709\u65b9\u6cd5\u3002</li> </ol> <p>\u5199\u6cd5\uff1a<code>@Pointcut(\"within(com.example.service.*)\")</code>\u3002</p>"},{"location":"Java/SpringBoot/springboot%20aop/#aop","title":"\u5982\u4f55\u5728\u9879\u76ee\u4e2d\u4f7f\u7528AOP","text":"<p>\u8be5\u6848\u4f8b\u901a\u8fc7\u81ea\u5b9a\u4e49\u6ce8\u89e3\u7684\u65b9\u5f0f\uff0c\u4f7f\u5f97Pointcut\u83b7\u53d6\u5230\u6240\u6709\u6dfb\u52a0\u81ea\u5b9a\u4e49\u6ce8\u89e3\u7684\u7c7b\u548c\u51fd\u6570\uff08\u4e3b\u8981\u662f\u51fd\u6570\uff09\u3002</p> <ol> <li>\u5f15\u5165\u4f9d\u8d56\uff1a</li> </ol> <p>```xml     org.springframework.boot spring-boot-starter-aop 2.7.8 </p> <p> org.projectlombok lombok provided     ```</p> <ol> <li>\u81ea\u5b9a\u4e49\u6ce8\u89e3</li> </ol> <pre><code>package com.lee.uploadfile.common.aop;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface MyLogAnnotation {\n}\n</code></pre> <ol> <li>\u5b9e\u73b0\u5207\u9762\u7c7b</li> </ol> <pre><code>package com.lee.uploadfile.common.aop;\n\nimport org.aspectj.lang.annotation.Before;\nimport org.aspectj.lang.annotation.After;\nimport lombok.extern.slf4j.Slf4j;\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.Signature;\nimport org.aspectj.lang.annotation.Around;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Pointcut;\nimport org.springframework.stereotype.Component;\n\nimport java.util.Arrays;\n\n/**\n * @author lhl\n */\n@Aspect\n@Component\n@Slf4j\npublic class LogAspect {\n    @Pointcut(\"@annotation(com.lee.uploadfile.common.aop.MyLogAnnotation)\")\n    public void LogPointCut() {\n        // @Pointcut\u6ce8\u89e3\u4e0b\u7684\u51fd\u6570\u4e0d\u7528\u5199\u5185\u5bb9\n    }\n\n    // \u83b7\u53d6\u5207\u70b9\n    @Before(\"LogPointCut()\")\n    public void before() {\n        System.out.println(\"\u52a0\u8f7d\u9884\u5904\u7406\u6587\u4ef6\");\n    }\n\n    // \u6700\u5e38\u4f7f\u7528\u7684\u662f\u73af\u7ed5\u901a\u77e5\n    @Around(\"logPointCut()\")\n    public void handleFunc(ProceedingJoinPoint joinPoint) throws Throwable {\n        // joinPoint\u662f\u8fde\u63a5\u70b9\uff0c\u4e5f\u5c31\u662f\u51fd\u6570\u3002\u5b83\u53ea\u80fd\u7528\u4e8e@Around\u6ce8\u89e3\u4e2d\n        long beginTime = System.currentTimeMillis();\n        // \u5982\u679c\u4e0d\u6267\u884cproceed\u51fd\u6570\uff0c\u5219\u8fde\u63a5\u70b9\u4e0d\u4f1a\u6267\u884c\n        joinPoint.proceed();\n        long time = System.currentTimeMillis() - beginTime;\n        log.info(\"\u51fd\u6570\u8fd0\u884c\u65f6\u95f4\uff1a{}\", time);\n        Signature signature = joinPoint.getSignature();\n        log.info(\"\u8fde\u63a5\u70b9\u65b9\u6cd5\u540d\uff1a{}\", signature.getName());\n        log.info(\"\u8fde\u63a5\u70b9\u65b9\u6cd5\u4fee\u9970\u7b26:{}\", signature.getModifiers());\n        log.info(\"\u8fde\u63a5\u70b9\u6240\u5728\u7c7b\u7684\u5b8c\u6574\u7c7b\u540d:{}\", signature.getDeclaringTypeName());\n        log.info(\"\u8fde\u63a5\u70b9\u6240\u5728\u7c7b\u7684 Class \u5bf9\u8c61:{}\", signature.getDeclaringType());\n        log.info(\"\u53c2\u6570\u503c\u5217\u8868{}\", Arrays.toString(joinPoint.getArgs()));\n        // \u8fd8\u53ef\u4ee5\u83b7\u53d6\u901a\u7528\u53c2\u6570\uff0c\u4f8b\u5982ip\u5730\u5740\u7b49\u4fe1\u606f\n        // ......\n    }\n\n    @After(\"LogPointCut()\")\n    public void after() {\n        System.out.println(\"\u6e05\u7a7a\u5185\u5b58\");\n    }\n}\n</code></pre> <ol> <li>\u4e4b\u540e\u5c31\u53ef\u4ee5\u5728\u9700\u8981\u62e6\u622a\u7684\u51fd\u6570\u6216\u7c7b\u4e0a\u6dfb\u52a0\u81ea\u5b9a\u4e49\u6ce8\u89e3\u3002</li> </ol>"},{"location":"Java/SpringBoot/springboot%2Bredis%E9%99%90%E6%B5%81/","title":"springboot+redis\u5bf9api\u5b9e\u73b0\u8ba1\u6570\u5668\u65b9\u5f0f\u7684\u9650\u6d41","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/springboot%2Bredis%E9%99%90%E6%B5%81/#_1","title":"\u9650\u6d41\u7684\u662f\u4ec0\u4e48","text":"<p>\u9650\u6d41\u662f\u9650\u5236\u5230\u8fbe\u7cfb\u7edf\u7684\u5e76\u53d1\u8bf7\u6c42\u6570\u91cf\uff0c\u4fdd\u8bc1\u7cfb\u7edf\u80fd\u591f\u6b63\u5e38\u54cd\u5e94\u90e8\u5206\u7528\u6237\u8bf7\u6c42\uff0c\u800c\u5bf9\u4e8e\u8d85\u8fc7\u9650\u5236\u7684\u6d41\u91cf\uff0c\u5219\u901a\u8fc7\u62d2\u7edd\u670d\u52a1\u7684\u65b9\u5f0f\u4fdd\u8bc1\u6574\u4f53\u7cfb\u7edf\u7684\u53ef\u7528\u6027\u3002</p>"},{"location":"Java/SpringBoot/springboot%2Bredis%E9%99%90%E6%B5%81/#_2","title":"\u9650\u6d41\u7684\u8303\u56f4","text":"<p>\u5355\u673a\u9650\u6d41\u548c\u5206\u5e03\u5f0f\u9650\u6d41\u3002\u6211\u5e38\u7528\u7684\u662f\u5355\u673a\u9650\u6d41\u3002</p>"},{"location":"Java/SpringBoot/springboot%2Bredis%E9%99%90%E6%B5%81/#_3","title":"\u5e38\u7528\u7684\u9650\u6d41\u65b9\u5f0f","text":""},{"location":"Java/SpringBoot/springboot%2Bredis%E9%99%90%E6%B5%81/#_4","title":"\u8ba1\u6570\u5668","text":"<p>\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\uff0c\u89c4\u5b9a\u67d0\u4e2a ip/\u7528\u6237/\u533a\u57df \u8bbf\u95ee \u670d\u52a1\u5668/\u63a5\u53e3 \u6b21\u6570\u4e0d\u80fd\u8d85\u8fc7\u4e00\u4e2a\u6570\u3002</p> <p>\u4f18\u70b9\uff1a\u5b9e\u73b0\u7b80\u5355\u3002</p> <p>\u7f3a\u70b9\uff1a</p>"},{"location":"Java/SpringBoot/springboot%2Bredis%E9%99%90%E6%B5%81/#_5","title":"\u6ed1\u52a8\u7a97\u53e3","text":""},{"location":"Java/SpringBoot/springboot%2Bredis%E9%99%90%E6%B5%81/#_6","title":"\u6f0f\u6876","text":""},{"location":"Java/SpringBoot/springboot%2Bredis%E9%99%90%E6%B5%81/#_7","title":"\u4ee4\u724c\u6876","text":""},{"location":"Java/SpringBoot/springboot%2Bredis%E9%99%90%E6%B5%81/#_8","title":"springboot+redis\u5bf9api\u5b9e\u73b0\u8ba1\u6570\u5668\u65b9\u5f0f\u7684\u9650\u6d41","text":""},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/","title":"SpringBoot\u4e2d\u7684\u6ce8\u89e3","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#controller","title":"Controller\u5c42\u6ce8\u89e3","text":""},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#requestmapping","title":"@RequestMapping","text":"<p>\u4f5c\u7528\uff1a\u5c06\u8bf7\u6c42\u6620\u5c04\u5230\u7c7b\u5b9a\u4e49\u6216\u65b9\u6cd5\u5b9a\u4e49\u5904\u3002</p> <p>\u672b\u5c3e\u4e0d\u8981\u5199\u659c\u7ebf\uff01</p> <p>\u524d\u9762\u53ef\u5199\u659c\u7ebf\uff0c\u4e5f\u53ef\u4e0d\u5199\u659c\u7ebf\u3002\u5efa\u8bae\u524d\u9762\u5199\u4e0a\u659c\u7ebf\u3002</p> <pre><code>@Controller\npublic class LoginController {\n    // \u8bbf\u95eelogin\u8def\u5f84\n    @RequestMapping(\"/login\")\n    public String func() {\n        // \u8df3\u8f6c\u5230src/resources/static\u76ee\u5f55\n        return \"login.html\";\n    }\n}\n</code></pre> <p><code>spring.mvc.view.prefix</code>\uff1a\u7ed9<code>@RequestMapping</code>\u4e0b\u9762\u7684\u51fd\u6570\u7684\u8fd4\u56de\u503c\u524d\u9762\u62fc\u63a5\u4e00\u4e32\u5b57\u7b26\u3002</p> <p><code>spring.mvc.view.suffix</code>\uff1a\u7ed9<code>@RequestMapping</code>\u4e0b\u9762\u7684\u51fd\u6570\u7684\u8fd4\u56de\u503c\u540e\u9762\u62fc\u63a5\u4e00\u4e32\u5b57\u7b26\u3002</p>"},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#getmapping","title":"@GetMapping","text":"<p><code>@GetMapping</code> = <code>@RequestMapping(method = RequestMethod.GET)</code></p>"},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#postmapping","title":"@PostMapping","text":"<p><code>@PostMapping</code> = <code>@RequestMapping(method = RequestMethod.POST)</code></p>"},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#mapperscan","title":"@MapperScan","text":"<p>\u5199\u5728SpringBoot\u7684\u542f\u52a8\u7a0b\u5e8f\u4e0a\u9762\u3002\u4f8b\u5982\uff1a<code>@MapperScan(\"com.lee.project.mapper\")</code></p>"},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#repository","title":"@Repository","text":"<p><code>@Repository</code>\u548c<code>@Controller</code>\u3001<code>@Service</code>\u3001<code>@Component</code>\u7684\u4f5c\u7528\u5dee\u4e0d\u591a\uff0c\u90fd\u662f\u628a\u5bf9\u8c61\u4ea4\u7ed9spring\u7ba1\u7406\u3002@Repository\u7528\u5728\u6301\u4e45\u5c42\u7684\u63a5\u53e3\u4e0a\uff0c\u8fd9\u4e2a\u6ce8\u89e3\u662f\u5c06\u63a5\u53e3\u7684\u4e00\u4e2a\u5b9e\u73b0\u7c7b\u4ea4\u7ed9spring\u7ba1\u7406\u3002</p>"},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#controller_1","title":"@Controller","text":"<p><code>@Controller</code>\u7c7b\u4e2d\u7684\u65b9\u6cd5\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u8fd4\u56deString\u8df3\u8f6c\u5230jsp\u3001ftl\u3001html\u7b49\u6a21\u7248\u9875\u9762\u3002</p> <pre><code>@Controller\npublic class ViewController {\n    @RequestMapping(\"/login\")\n    public String login() {\n        // \u8df3\u8f6c\u5230static\u76ee\u5f55\u4e0b\u7684loginPage.html\u6587\u4ef6\n        return \"loginPage.html\";\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#responsebody","title":"@ResponseBody","text":"<pre><code>@Controller\n@ResponseBody\npublic class ViewController {\n    @RequestMapping(\"/login\")\n    public String login() {\n        // \u76f4\u63a5\u5728\u5f53\u524d\u754c\u9762\u6253\u5370json\u5b57\u7b26\u4e32\"loginPage.html\"\n        return \"loginPage.html\";\n    }\n}\n</code></pre> <p>\u6ce8\u610f\uff1a<code>@ResponseBody</code>\u4e5f\u53ef\u4ee5\u653e\u5728\u51fd\u6570\u4e0a\u9762\uff0c\u4ec5\u8ba9\u90e8\u5206\u51fd\u6570\u53ef\u4ee5\u76f4\u63a5\u8fd4\u56dejson\u6570\u636e\u3002</p>"},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#restcontroller","title":"@RestController","text":"<p><code>@RestController</code> = <code>@Controller</code> + <code>@ResponseBody</code></p>"},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#requestbody","title":"@RequestBody","text":"<p>@RequestBody\u7528\u6765\u63a5\u6536\u524d\u7aef\u4f20\u9012\u7ed9\u540e\u7aef\u8bf7\u6c42\u3002\u652f\u6301Post\u8bf7\u6c42\uff0c\u4e0d\u652f\u6301Get\u8bf7\u6c42\u3002\u5728\u540e\u7aef\u7684\u540c\u4e00\u4e2a\u63a5\u6536\u65b9\u6cd5\u91cc\uff0c@RequestBody\u4e0e@RequestParam()\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528\uff0c@RequestBody\u6700\u591a\u53ea\u80fd\u6709\u4e00\u4e2a\uff0c\u800c@RequestParam()\u53ef\u4ee5\u6709\u591a\u4e2a\u3002</p> <pre><code>@RestController\n@RequestMapping(\"/user\")\npublic class UserController {\n    @PostMapping\n    public String getInfo(@RequestBody String info) {\n        return info;\n    }\n}\n</code></pre> <p>\u4f60\u4ee5\u4e3a<code>@RequestBody</code>\u53ea\u80fd\u63a5\u53d7String\u7c7b\u578b\u7684\u53c2\u6570\uff1f\u5927\u9519\u7279\u9519\uff01\u5b83\u53ef\u4ee5\u5c06\u63a5\u6536\u5230\u7684json\u6570\u636e\u81ea\u52a8\u8f6c\u6362\u6210Java\u7684\u5b9e\u4f53\u7c7b\uff01\u770b\u4e2a\u6848\u4f8b\uff1a</p> <pre><code>// pojo \u4e2d\n@Data\npublic class SysUser {\n    private String username;\n    private String password;\n}\n\n@RestController\n@RequestMapping(\"/user\")\npublic class UserController {\n    @PostMapping(\"/show\")\n    public String show(@RequestBody SysUser sysUser) {\n        return JSON.toJSONString(sysUser);\n    }\n}\n</code></pre> <p>\u53d1\u9001post\u8bf7\u6c42\uff0c\u6d88\u606f\u4e3b\u4f53\u4e2d\u7684json\u6570\u636e\u662f<code>{ username: lhl, ratings: 3600 }</code>\u3002\u5c3d\u7ba1\u548cSysUser\u4e2d\u7684\u6570\u636e\u4e0d\u662f\u5b8c\u5168\u5339\u914d\uff0c\u4f46\u662f\u4ecd\u7136\u80fd\u5339\u914d\u90e8\u5206\u6570\u636e\uff0c\u6700\u7ec8\u8fd4\u56de\u7684\u7ed3\u679c\u662f\u5411\u8bf7\u6c42\u65b9\u8fd4\u56de\u7684\u7ed3\u679c\u662f\uff1a<code>{\"username\":\"lhl\"}</code>\u3002</p>"},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#requestparam","title":"@RequestParam","text":"<p>\u63a5\u6536\u524d\u7aef\u4f20\u9012\u7ed9\u540e\u7aef\u7684\u8bf7\u6c42\u3002\u65e2\u652f\u6301Post\u8bf7\u6c42\uff0c\u4e5f\u652f\u6301Get\u8bf7\u6c42\u3002@RequestParam()\u53ef\u4ee5\u6709\u591a\u4e2a\u3002</p> <pre><code>// \u8bbf\u95eehttp://localhost:8080/param?id=11&amp;type=apple\n// \u5728\u754c\u9762\u4e0a\u8f93\u51fa \"id=11 type=apple\"\n@RestController\npublic class ViewController {\n    @RequestMapping(\"/param\")\n    public String Params(@RequestParam(value = \"id\") int id, @RequestParam(value = \"type\")String type) {\n        String info = \"id=\" + id + \" type=\" + type;\n        return info;\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#pathvariable","title":"@PathVariable","text":""},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#crossorigin","title":"@CrossOrigin","text":""},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#service","title":"Service\u5c42\u6ce8\u89e3","text":""},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#service_1","title":"@Service","text":"<p>\u6ce8\u518cbean\u3002\u5199\u5728Service\u5b9e\u73b0\u7c7b\u4e0a\u9762\uff08\u4e0d\u662fService\u63a5\u53e3\u4e0a\u9762\uff09\u3002\u672c\u8d28\u4e0a\u662f<code>@Component</code>\u3002</p>"},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#component","title":"@Component","text":"<p>\u6ce8\u518cbean\u3002</p>"},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#bean","title":"@Bean","text":"<p>\u6ce8\u518cbean\u3002\u5199\u5728\u51fd\u6570\u4e0a\u9762\uff0c\u8ba9IOC\u5bb9\u5668\u63a5\u7ba1\u51fd\u6570\u751f\u6210\u7684\u5bf9\u8c61\u3002</p> <p><code>@Bean</code>\u7684\u4f18\u70b9\u662f\u53ef\u4ee5\u8ba9IOC\u5bb9\u5668\u63a5\u7ba1\u7b2c\u4e09\u65b9\u5e93\u4e2d\u7684\u5bf9\u8c61\u3002</p> <p>\u4f7f\u7528<code>@Bean</code>\u5c31\u5f97\u4f7f\u7528<code>@Configuration</code>\u3002<code>@Bean</code>\u5199\u5728\u65b9\u6cd5\u4e0a\uff0c<code>@Configuration</code>\u5199\u5728\u7c7b\u4e0a\u3002</p> <p>\u4f7f\u7528\u6848\u4f8b\uff1a</p> <pre><code>@Configuration\nclass Person {\n    @Bean\n    public Person getPerson() {\n        return new Person();\n    }\n    void talk() {\n        System.out.println(\"\u8fd9\u4e2a\u4eba\u6b63\u5728\u5520\u53e8\u3002\");\n    }\n}\n\n@SpringBootTest\nclass TestClass {\n    @Autowired\n    @Qualifier(\"getPerson\")  // @Bean\u4e0b\u7684\u51fd\u6570\u540d\n    private Person person;\n    @Test\n    void test01() {\n        person.talk();\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#configuration","title":"@Configuration","text":"<p>\u4f7f\u7528<code>@Bean</code>\u5c31\u5f97\u4f7f\u7528<code>@Configuration</code>\u3002<code>@Bean</code>\u5199\u5728\u65b9\u6cd5\u4e0a\uff0c<code>@Configuration</code>\u5199\u5728\u7c7b\u4e0a\u3002</p>"},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#autowired","title":"@Autowired","text":"<p>\u83b7\u53d6bean\u3002\u4e00\u822c\u83b7\u53d6Service\u63a5\u53e3\u7684\u5bf9\u8c61\uff08\u800c\u4e0d\u662f\u83b7\u53d6ServiceImpl\u5b9e\u73b0\u7c7b\u7684\u5bf9\u8c61\uff09\u3002</p> <p>\u5982\u679c\u63a5\u53e3\u53ea\u5bf9\u5e94\u4e00\u4e2a\u5b9e\u73b0\uff0c<code>@Autowired</code>\u548c<code>@Resource</code>\u662f\u4e00\u6837\u7684\u3002</p> <p>\u5982\u679c\u63a5\u53e3\u5bf9\u5e94\u591a\u4e2a\u5b9e\u73b0\uff0c<code>@Autowired</code> + <code>@Qualifier</code>(\"xxx\") = <code>@Resource</code>(\"xxx\")\u3002</p> <p>\u6ce8\u610f\uff1a\u5b9e\u73b0\u7c7bxxx\u4e00\u822c\u662f\u5927\u9a7c\u5cf0\u5199\u6cd5\uff0c\u800c\u4f5c\u4e3a\u6ce8\u89e3\u7684\u53c2\u6570\u662f\u5c0f\u9a7c\u5cf0\u5199\u6cd5\u3002</p>"},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#resource","title":"@Resource","text":"<p>\u83b7\u53d6bean\u3002\u89c1<code>Autowired</code>\u7684\u4f7f\u7528\u65b9\u6cd5\u3002</p> <p>\u4e00\u4e2a\u5173\u4e8e<code>@Resource</code>\u548c<code>Autowired</code>\u7684\u533a\u522b\u7684\u6848\u4f8b\uff1a</p> <pre><code>interface PersonService { \n    void work();\n}\n\n@Service\nclass StudentServiceImpl implements PersonService {\n    @Override\n    public void work() {\n        System.out.println(\"\u5b66\u751f\u5728\u5b66\u4e60\");\n    }\n}\n\n@Service\nclass TeacherServiceImpl implements PersonService {\n    @Override\n    public void work() {\n        System.out.println(\"\u8001\u5e08\u5728\u6559\u4e66\");\n    }\n}\n\n@SpringBootTest\nclass TestClass {\n    @Autowired\n    @Qualifier(\"teacherServiceImpl\")\n    private PersonService personService1;\n\n    @Test\n    void test01() {\n        personService1.work();\n    }\n\n    @Resource(name = \"studentServiceImpl\")\n    private PersonService personService2;\n    @Test\n    void test02() {\n        personService2.work();\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#mapper","title":"Mapper\u5c42\u6ce8\u89e3","text":""},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#mapper_1","title":"@Mapper","text":"<p>\u5199\u5728\u6bcf\u4e2aMapper\u63a5\u53e3\u4e0a\u9762\uff0c\u6216\u8005\u5728spring boot\u542f\u52a8\u5904\u4e00\u6b21\u6027\u4f7f\u7528MapperScan(mapper\u6587\u4ef6\u96c6\u5408\u6240\u5728\u4f4d\u7f6e)\u3002</p>"},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#_1","title":"\u5176\u4ed6\u6ce8\u89e3","text":""},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#transactional","title":"@Transactional","text":"<p>\u76ee\u524d\u636e\u6211\u6240\u77e5\uff0c\u7528\u4f5c\u4e8b\u52a1\u56de\u6eda\u3002</p>"},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#value","title":"@Value","text":"<p>\u83b7\u53d6<code>application.properties</code>\u4e2d\u7684\u503c\u3002</p> <p>\u6848\u4f8b\uff1a</p> <p>application.properties</p> <pre><code>weixin.appid=wxxxxx\nweixin.secret=aaabbbddd\n</code></pre> <p>\u6d4b\u8bd5\u4ee3\u7801</p> <p>\u4f7f\u7528<code>${}</code>\u89e3\u6790application.properties\u4e2d\u7684\u503c\u3002</p> <pre><code>import org.springframework.beans.factory.annotation.Value;\n@SpringBootTest\nclass Test {\n    @Value(\"${weixin.appid}\")\n    private String appid;\n    @Value(\"${weixin.secret}\")\n    private String secret;\n    @Test\n    void test() {\n        System.out.println(appid + \",\" + secret);\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/#_2","title":"\u5176\u4ed6\u77e5\u8bc6","text":"<ol> <li>\u4efb\u4f55\u51fd\u6570\u524d\u5fc5\u987b\u52a0\u4e0a<code>@RequestMapping</code>\u3001<code>@GetMapping</code>\u6216<code>@PostMapping</code>\u624d\u80fd\u5904\u7406url\u8bf7\u6c42\u3002</li> </ol>"},{"location":"Java/SpringBoot/springboot%E5%9F%BA%E7%A1%80%E6%A1%88%E4%BE%8B/","title":"springboot\u57fa\u7840\u6848\u4f8b","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/springboot%E5%9F%BA%E7%A1%80%E6%A1%88%E4%BE%8B/#_1","title":"\u524d\u8a00","text":"<p>\u521b\u5efa\u4e00\u4e2a\u5b8c\u6574\u7684springboot\u9879\u76ee\uff0c\u6211\u4eec\u9700\u8981\u6309\u7167\u4ee5\u4e0b\u65b9\u6cd5\u6765\u505a\u3002</p> <ol> <li>\u4f7f\u7528idea\u6b63\u786e\u521b\u5efa\u4e00\u4e2a\u7a7a\u7684springboot\u9879\u76ee\u3002</li> <li>\u901a\u8fc7maven\u5de5\u5177\uff0c\u5728pom.xml\u6587\u4ef6\u4e2d\u5bfc\u5165\u5fc5\u8981\u7684\u4f9d\u8d56\u3002</li> <li>\u521b\u5efacontroller\u3001service\u3001mapper\u4e09\u5c42\u6587\u4ef6\u5939\u3002service\u8981\u5206\u6e05\u63a5\u53e3\u548c\u7c7b\u5b9e\u73b0\u3002</li> <li>\u5408\u7406\u914d\u7f6eapplication.properties\u6587\u4ef6\uff0c\u4e5f\u8003\u8651\u91c7\u7528yaml\u683c\u5f0f\u7684\u914d\u7f6e\u6587\u4ef6\u3002\u53ef\u53c2\u8003\u6211\u7684\u53e6\u4e00\u7bc7\u4e13\u95e8\u5173\u4e8e\u914d\u7f6e\u6587\u4ef6\u7684\u535a\u5ba2\u3002</li> <li>\u91c7\u7528mybatis+MySQL\u7684\u65b9\u5f0f\u8fde\u63a5\u6570\u636e\u5e93\u3002\u53ef\u53c2\u8003\u6211\u7684\u53e6\u4e00\u7bc7\u4e13\u95e8\u5199mybatis\u7684\u535a\u5ba2\u3002</li> </ol> <p>\u4ee5\u4e0b\u6848\u4f8b\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7b80\u5355\u7684springboot\u9879\u76ee\u7684\u521b\u5efa\u65b9\u6cd5\u3002</p>"},{"location":"Java/SpringBoot/springboot%E5%9F%BA%E7%A1%80%E6%A1%88%E4%BE%8B/#_2","title":"\u524d\u7f6e\u5de5\u5177","text":"<ol> <li>idea\uff08\u4e13\u4e1a\u7248\uff09</li> <li>jdk 1.8</li> <li>maven</li> </ol> <p>\u5907\u6ce8\uff1a\u53ef\u4f7f\u7528idea\u81ea\u5e26\u7684jdk\u548cmaven\u3002</p>"},{"location":"Java/SpringBoot/springboot%E5%9F%BA%E7%A1%80%E6%A1%88%E4%BE%8B/#_3","title":"\u5177\u4f53\u6b65\u9aa4","text":""},{"location":"Java/SpringBoot/springboot%E5%9F%BA%E7%A1%80%E6%A1%88%E4%BE%8B/#1-ideaspringboot","title":"1. \u4f7f\u7528idea\u521d\u59cb\u5316\u7a7a\u7684springboot\u9879\u76ee\u3002","text":""},{"location":"Java/SpringBoot/springboot%E5%9F%BA%E7%A1%80%E6%A1%88%E4%BE%8B/#2","title":"2. \u5bfc\u5165\u5fc5\u8981\u4f9d\u8d56","text":"<p>\u90e8\u5206\u4f9d\u8d56\u662fspringboot\u9879\u76ee\u81ea\u5e26\u7684\uff0c\u90e8\u5206\u662f\u9700\u8981\u81ea\u5df1\u6dfb\u52a0\u7684\u3002</p> <pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;!--web\u670d\u52a1\u6a21\u5757--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;!--\u6d4b\u8bd5\u6a21\u5757--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-platform-launcher&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E5%9F%BA%E7%A1%80%E6%A1%88%E4%BE%8B/#3","title":"3. \u521b\u5efa\u4e09\u5c42\u6587\u4ef6","text":"<p>\u6309\u7167\u5982\u4e0b\u89c4\u8303\u521b\u5efacontroller\u3001service\u548cmapper\u5c42\u4ee5\u53ca\u4e00\u4e9b\u5fc5\u5907\u7684\u6587\u4ef6\u3002</p> <p>\u6ce8\u610f\uff0c\u4e00\u5b9a\u8981\u5206\u6e05\u54ea\u4e9b\u662f\u7c7b\uff0c\u54ea\u4e9b\u662f\u63a5\u53e3\uff01</p> <p></p> <p>controller\u5c42\u7684\u5185\u5bb9\uff1a</p> <pre><code>package com.lee.sp1.controller;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.*;\n\n@Controller\n@ResponseBody\n@RequestMapping(\"/login\")\npublic class LoginController {\n    @GetMapping(\"/port1\")\n    public String port1() {\n        return \"this is port 1\";\n    }\n    @PostMapping(\"/port2\")\n    public String port2(@RequestBody String data) {\n        return data;\n    }\n}\n</code></pre> <p>\u53ef\u4ee5\u8fd0\u884c\u6d4f\u89c8\u5668\u8bbf\u95eeweb\u670d\u52a1\u662f\u5426\u6b63\u5e38\u3002</p> <p>\u4ee5\u4e0a\u53ea\u662f\u7b80\u5355\u7684\u6848\u4f8b\uff0c\u4ee5\u4e0a\u6848\u4f8b\u6ca1\u6709\u6d89\u53ca\u5230mybatis\u8fde\u63a5MySQL\u7b49\u64cd\u4f5c\u3002</p>"},{"location":"Java/SpringBoot/springboot%E5%B8%B8%E8%A7%81%E5%9D%91/","title":"Springboot\u5e38\u89c1\u5751","text":"<ol> <li><code>@Service</code>\u6807\u5728\u7c7b\u4e0a\uff0c\u800c\u4e0d\u662f\u63a5\u53e3\u4e0a\u3002</li> <li>\u5355\u5143\u6d4b\u8bd5\u65f6\u51fd\u6570\u4e0d\u80fd\u6709\u53c2\u6570\u3002</li> </ol>"},{"location":"Java/SpringBoot/springboot%E6%8B%A6%E6%88%AA%E5%99%A8/","title":"\u62e6\u622a\u5668\u7684\u5e94\u7528\u573a\u666f","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/springboot%E6%8B%A6%E6%88%AA%E5%99%A8/#_2","title":"\u7b80\u4ecb","text":"<p>\u62e6\u622a\u5668\u5c31\u662f\u5728\u6267\u884c\u7a0b\u5e8f\u4e4b\u524d\uff0c\u6267\u884c\u67d0\u4e9b\u64cd\u4f5c\u3002</p> <p>\u62e6\u622a\u5668\u9488\u5bf9URL\u62e6\u622a\uff0c\u5b83\u867d\u7136\u4e0d\u80fd\u60f3AOP\u90a3\u6837\u9488\u5bf9\u7c7b\u3001\u65b9\u6cd5\u5b9e\u73b0\u66f4\u7ec6\u7c92\u5ea6\u7684\u5207\u9762\u64cd\u4f5c\uff0c\u4f46\u662f\u4e5f\u80fd\u7528\u4e8e\u5f88\u591a\u573a\u666f\u3002</p>"},{"location":"Java/SpringBoot/springboot%E6%8B%A6%E6%88%AA%E5%99%A8/#_3","title":"\u6848\u4f8b\u4e00\uff1a\u62e6\u622a\u5668\u6821\u9a8c\u767b\u5f55\u6743\u9650","text":"<p><code>preHandle</code>\u51fd\u6570\u8868\u793a\u6267\u884c\u67d0\u4e9b\u7a0b\u5e8f\u524d\u9700\u8981\u6267\u884c\u7684\u7a0b\u5e8f\u3002\u8fd4\u56de\u503c\u4e3atrue\u8868\u793a\u653e\u884c\u8bf7\u6c42\uff0c\u8fd4\u56de\u503c\u4e3afalse\u8868\u793a\u62e6\u622a\u4e4b\u540e\u7684\u8bf7\u6c42\u3002</p> <pre><code>package com.lee.myweb.interceptor;\n\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.servlet.HandlerInterceptor;\nimport org.springframework.web.servlet.ModelAndView;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\n@Component\npublic class LoginInterceptor implements HandlerInterceptor {  // \u62e6\u622a\u5668\u7c7b\u9700\u8981 implements HandlerInterceptor\n    // \u4e1a\u52a1\u8bf7\u6c42\u5904\u7406\u4e4b\u524d\u6267\u884c\n    @Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\n        String token = request.getHeader(\"authorization\");\n        if (validate(token) == false) {  // validate\u662f\u81ea\u5b9a\u4e49\u6821\u9a8c\u89c4\u5219\n            // \u540e\u7aef\u5411\u524d\u7aef\u8fd4\u56deString\u6216JSON\u6570\u636e\n            response.setContentType(\"application/json;charset=utf-8\");\n            response.getWriter().print(\"\u6821\u9a8c\u5931\u8d25\");\n            return false;\n        } else {\n            return true;\n        }\n    }\n\n    public boolean validate(String token) {\n        // \u5b9e\u73b0\u6821\u9a8c\u903b\u8f91...\n    }\n}\n</code></pre> <p>WebMVCConfig</p> <pre><code>package com.lee.myweb.config;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.config.annotation.InterceptorRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@Configuration\npublic class WebMVCConfig implements WebMvcConfigurer {\n    @Resourse\n    private LoginInterceptor interceptor;\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addInterceptor(interceptor).addPathPatterns(\"/lhl/**\");\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E6%8B%A6%E6%88%AA%E5%99%A8/#_4","title":"\u6848\u4f8b\u4e8c\uff1a\u9632\u6b62\u91cd\u590d\u63d0\u4ea4","text":"<p>\u9488\u5bf9\u6307\u5b9a\u6ce8\u89e3\u6807\u6ce8\u7684\u65b9\u6cd5\u5b9e\u73b0\u62e6\u622a\u3002</p> <p>\u4e0b\u8ff0\u6848\u4f8b\u4e2d\uff0c\u62e6\u622a\u5668\u7684\u529f\u80fd\u504f\u5411\u4e0e\u201d\u9650\u6d41\u5668\u201c\uff0c\u6839\u636e\u65f6\u95f4\u5224\u65ad\u662f\u5426\u91cd\u590d\u63d0\u4ea4\u3002\u5728\u771f\u5b9e\u4e1a\u52a1\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u7528\u6237session+URL\u7f13\u5b58\u5728\u5168\u5c40\u5bf9\u8c61\u4e2d\uff08\u6d88\u606f\u961f\u5217\u3001ThreadLocal...\uff09\uff0c\u5f53\u65b9\u6cd5\u6267\u884c\u5b8c\u6bd5\u540e</p> <p>\u6ce8\u89e3\u7c7b</p> <pre><code>package com.lhl.interceptordemo.annotation;\n\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface PreventDuplicateSubmit {\n    int expirationTimeMillSeconds() default 1000;\n}\n\n</code></pre> <p>\u62e6\u622a\u5668\u7c7b</p> <pre><code>package com.lhl.interceptordemo.interceptor;\n\nimport com.lhl.interceptordemo.annotation.PreventDuplicateSubmit;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\nimport jakarta.servlet.http.HttpSession;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.method.HandlerMethod;\nimport org.springframework.web.servlet.HandlerInterceptor;\n\nimport java.util.Map;\nimport java.util.concurrent.ConcurrentHashMap;\nimport java.util.concurrent.Executors;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\n\n@Component\npublic class DuplicateSubmitInterceptor implements HandlerInterceptor {\n    private final Map&lt;String, Boolean&gt; requestMap = new ConcurrentHashMap&lt;&gt;();\n    private final ScheduledExecutorService executorService = Executors.newScheduledThreadPool(1);\n\n    @Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {\n        if (handler instanceof HandlerMethod handlerMethod) {\n            PreventDuplicateSubmit annotation = handlerMethod.getMethod().getAnnotation(PreventDuplicateSubmit.class);\n            if (annotation != null) {\n                HttpSession session = request.getSession();\n                String sessionId = session.getId();\n                String requestKey = getSessionKey(sessionId, request.getRequestURI());\n                if (requestMap.containsKey(requestKey)) {\n                    // \u91cd\u590d\u63d0\u4ea4\n                    response.setContentType(\"application/json;charset=utf-8\");\n                    response.getWriter().write(\"\u8bf7\u52ff\u91cd\u590d\u63d0\u4ea4\");\n                    return false;\n                }\n                // \u9996\u6b21\u63d0\u4ea4\uff0c\u5c06\u8bf7\u6c42\u6807\u8bc6\u5b58\u5165Map\n                requestMap.put(requestKey, true);\n                // \u5ef6\u8fdf\u4e00\u5b9a\u65f6\u95f4\u540e\u5f02\u6b65\u5220\u9664\u8bf7\u6c42\u6807\u8bc6\n                scheduleRequestCleanup(requestKey, annotation.expirationTimeMillSeconds());\n                return true;\n            }\n        }\n        return true;\n    }\n\n    private void scheduleRequestCleanup(String requestKey, int expirationTimeMillSeconds) {\n        executorService.schedule(() -&gt; requestMap.remove(requestKey), expirationTimeMillSeconds, TimeUnit.MILLISECONDS);\n    }\n\n    private String getSessionKey(String sessionId, String requestURI) {\n        return sessionId + \"_\" + requestURI;\n    }\n}\n\n</code></pre> <p>config\u914d\u7f6e\u7c7b</p> <pre><code>package com.lhl.interceptordemo.configuration;\n\nimport com.lhl.interceptordemo.interceptor.DuplicateSubmitInterceptor;\nimport jakarta.annotation.Resource;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.config.annotation.InterceptorRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@Configuration\npublic class WebMVCConfiguration implements WebMvcConfigurer {\n    @Resource\n    private DuplicateSubmitInterceptor duplicateSubmitInterceptor;\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        registry.addInterceptor(duplicateSubmitInterceptor);\n    }\n}\n\n</code></pre> <p>\u4e1a\u52a1\u7c7b</p> <pre><code>package com.lhl.interceptordemo.controller;\n\nimport com.lhl.interceptordemo.annotation.PreventDuplicateSubmit;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping\npublic class IndexController {\n    @PreventDuplicateSubmit\n    @RequestMapping\n    public String index() {\n        return \"hello, world!\";\n    }\n}\n\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E6%95%B4%E5%90%88redis/","title":"springboot\u6574\u5408redis","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/springboot%E6%95%B4%E5%90%88redis/#springboot","title":"\u521b\u5efaspringboot\u7a7a\u9879\u76ee","text":"<p>\u4f7f\u7528idea\u521b\u5efaspringboot\u7a7a\u9879\u76ee\u5373\u53ef\u3002\u6211\u4f7f\u7528\u662fspringboot\u7248\u672c\u662f2.77\uff0cjdk\u662f1.8\uff0c\u5305\u7ba1\u7406\u5de5\u5177\u662fmaven\u3002</p>"},{"location":"Java/SpringBoot/springboot%E6%95%B4%E5%90%88redis/#redis","title":"\u542f\u52a8redis","text":"<p>\u53c2\u8003\u6211\u7684\u53e6\u4e00\u7bc7\u6587\u7ae0\u300aLinux\u8fd0\u884credis\u300b\u3002</p>"},{"location":"Java/SpringBoot/springboot%E6%95%B4%E5%90%88redis/#maven","title":"\u5bfc\u5165Maven\u4f9d\u8d56","text":"<p>SpringData\u662fSpring\u4e2d\u6570\u636e\u64cd\u4f5c\u7684\u6a21\u5757\uff0c\u5305\u542b\u5bf9\u5404\u79cd\u6570\u636e\u5e93\u7684\u96c6\u6210\u3002\u5176\u4e2d\u5bf9Redis\u7684\u96c6\u6210\u5c31\u53eb\u505aSpringDataRedis\u3002</p> <p>SpringDataRedis\u4e2d\u63d0\u4f9b\u4e86RedisTemplate\u5de5\u5177\u7c7b\uff0c\u5176\u4e2d\u5c01\u88c5\u4e86\u5bf9Redis\u7684\u5404\u79cd\u64cd\u4f5c\u3002</p> <p>\u5907\u6ce8\uff1alettuce\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f1a\u51fa\u73b0\u8fde\u63a5\u5f02\u5e38\uff0c\u6211\u76ee\u524d\u8fd8\u6ca1\u89e3\u51b3\u3002</p> <pre><code>&lt;dependencies&gt;\n    &lt;!--springboot \u542f\u52a8\u5668--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--springboot web \u9879\u76ee\u542f\u52a8\u5668--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--redis\uff0c\u4f7f\u7528jedis--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;io.lettuce&lt;/groupId&gt;\n                &lt;artifactId&gt;lettuce-core&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;redis.clients&lt;/groupId&gt;\n        &lt;artifactId&gt;jedis&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--springboot \u6d4b\u8bd5\u5de5\u5177--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--lombok\u6ce8\u89e3--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--json\u5de5\u5177--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.alibaba.fastjson2&lt;/groupId&gt;\n        &lt;artifactId&gt;fastjson2&lt;/artifactId&gt;\n        &lt;version&gt;2.0.22&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E6%95%B4%E5%90%88redis/#applicationproperties","title":"\u914d\u7f6eapplication.properties","text":"<pre><code>spring.redis.database=0\nspring.redis.host=xxx.xxx.xxx.xxx\nspring.redis.port=6379\nspring.redis.password=xxxxxx\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E6%95%B4%E5%90%88redis/#redis_1","title":"\u81ea\u5b9a\u4e49redis\u7684\u5e8f\u5217\u5316\u65b9\u5f0f","text":"<p>Java\u81ea\u5e26\u7684\u5e8f\u5217\u5316\u65b9\u5f0f\u53ef\u80fd\u4f1a\u8ba9redis\u7684\u81ea\u589e\u64cd\u4f5c\u62a5\u9519\u3002\u4e0d\u81ea\u5b9a\u4e49\u5e8f\u5217\u5316\u65b9\u5f0f\u4e5f\u53ef\u4ee5\u8ba9redis\u7684\u90e8\u5206\u529f\u80fd\u6b63\u5e38\u8fd0\u884c\u3002\u5efa\u8bae\u81ea\u5b9a\u4e49redis\u7684\u5e8f\u5217\u5316\u65b9\u5f0f\u3002</p> <p>\u4f7f\u7528\u65f6\uff0ckey\u5fc5\u987b\u662fString\u7c7b\u578b\u3002</p> <pre><code>package com.lee.redismq.config;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.data.redis.connection.RedisConnectionFactory;\nimport org.springframework.data.redis.core.RedisTemplate;\nimport org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;\nimport org.springframework.data.redis.serializer.RedisSerializer;\n\n@Configuration\npublic class RedisConfig {\n    @Bean\n    public RedisTemplate&lt;String, Object&gt; redisTemplate(RedisConnectionFactory redisConnectionFactory) {\n        // \u521b\u5efaRedisTemplate\u5bf9\u8c61\n        RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();\n        // \u8bbe\u7f6e\u8fde\u63a5\u5de5\u5382\n        template.setConnectionFactory(redisConnectionFactory);\n        // \u521b\u5efaJSON\u5e8f\u5217\u5316\u5de5\u5177\n        GenericJackson2JsonRedisSerializer jsonRedisSerializer = new GenericJackson2JsonRedisSerializer();\n        // \u8bbe\u7f6ekey\u7684\u5e8f\u5217\u5316\n        template.setKeySerializer(RedisSerializer.string());\n        template.setHashKeySerializer(RedisSerializer.string());\n        // \u8bbe\u7f6evalue\u7684\u5e8f\u5217\u5316\n        template.setValueSerializer(jsonRedisSerializer);\n        template.setHashValueSerializer(jsonRedisSerializer);\n        return template;\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E6%95%B4%E5%90%88redis/#_1","title":"\u6d4b\u8bd5\u6848\u4f8b","text":"<pre><code>package com.lee.springbootredis.pojo;\n\nimport lombok.Data;\n\n@Data\npublic class User {\n    private String name;\n    private int age;\n}\n</code></pre> <pre><code>@SpringBootTest\nclass SpringbootRedisApplicationTests {\n    // \u5bfc\u5165spring-boot-starter-data-redis\u4f9d\u8d56\u540e\u5c31\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e24\u4e2a\u5bf9\u8c61\n    @Resource\n    private RedisTemplate&lt;String, Object&gt; redisTemplate;\n\n    @Resource\n    private StringRedisTemplate stringRedisTemplate;\n\n    @Test\n    void test1() {\n        redisTemplate.opsForValue().set(\"key\", 1);\n        redisTemplate.opsForValue().increment(\"key\", 1);\n        Object key = redisTemplate.opsForValue().get(\"key\");\n        System.out.println(key);\n    }\n\n    @Test\n    void test2() {\n        User user = new User();\n        user.setName(\"lhl\");\n        user.setAge(8);\n        String jsonUser = JSON.toJSONString(user);\n        // \u901a\u5e38\u4e60\u60ef\u5728\u5e8f\u5217\u5316\u4e4b\u524d\u5c06\u5bf9\u8c61\u8f6c\u6210json\u5b57\u7b26\u4e32\u3002\n        stringRedisTemplate.opsForValue().set(\"user\", jsonUser);\n        System.out.println(stringRedisTemplate.opsForValue().get(\"user\"));\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/","title":"springboot\u6587\u4ef6\u4e0a\u4f20","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/springboot%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_1","title":"\u56fe\u7247\u4e0a\u4f20\u5230\u670d\u52a1\u5668","text":""},{"location":"Java/SpringBoot/springboot%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_2","title":"\u540e\u7aef\u4ee3\u7801","text":"<pre><code>package com.lee.uploadfile.controller;\n\nimport org.springframework.boot.system.ApplicationHome;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.UUID;\n\n/**\n * \u53ef\u4ee5\u4e0a\u4f20\u4efb\u4f55\u7c7b\u578b\u7684\u6587\u4ef6\u3002\u4e3b\u8981\u7528\u4e8e\u4e0a\u4f20\u56fe\u7247\u3002\n * @author \u6653\u9f99coding\n */\n@RestController\n@RequestMapping(\"/upload\")\npublic class UploadController {\n    /**\n     * \u4e0a\u4f20\u5355\u4e2a\u6587\u4ef6\u5230\u672c\u5730\u76ee\u5f55\n     * @param file\n     * @return\n     */\n    @PostMapping(\"/single-file\")\n    String uploadPicture(MultipartFile file) {\n        // file\u6821\u9a8c\n        if (file.isEmpty()) {\n            return \"\u6587\u4ef6\u4e0a\u4f20\u5931\u8d25\uff01\";\n        }\n\n        // \u9650\u5b9a\u6587\u4ef6\u5927\u5c0f\n        // \u4e5f\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u5b9a\uff0c\u4e0b\u9762\u7684\u6848\u4f8b\u91c7\u7528\u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u5b9a\u6587\u4ef6\u5927\u5c0f\n        int maxFileSize = 2 * 1024 * 1024;\n        if (file.getSize() &gt; maxFileSize) {\n            return \"\u6587\u4ef6\u4e0d\u80fd\u8d85\u8fc72MB\";\n        }\n\n        // \u622a\u53d6\u6587\u4ef6\u540d\uff0c\u5e76\u7528\u65b0\u7684\u6587\u4ef6\u540d\u66ff\u6362\n        String originalFilename = file.getOriginalFilename();\n        assert originalFilename != null;\n        int startIndex = originalFilename.lastIndexOf('.');\n        String ext = originalFilename.substring(startIndex);\n        String randomName = UUID.randomUUID().toString().replace(\"\", \"\");\n        String newFilename = randomName + ext;\n\n        // \u4e0a\u4f20\u56fe\u7247\n        ApplicationHome applicationHome = new ApplicationHome(this.getClass());\n        String pre = applicationHome.getDir().getParentFile().getParentFile().getAbsolutePath() +\n                \"\\\\src\\\\main\\\\resources\\\\public\\\\\";\n        String path = pre + newFilename;\n        try {\n            file.transferTo(new File(path));\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n        // \u5c06path\u8fd4\u56de\u7ed9\u524d\u7aef\uff0c\u524d\u7aef\u4f1a\u5c06path\u4f5c\u4e3a\u56fe\u7247\u7684url\n        // \u6709\u65f6\u5019\u53ef\u80fd\u9700\u8981\u8fd4\u56de\u5b57\u5178\u5bf9\u8c61\uff0c\u524d\u7aef\u624d\u80fd\u6b63\u5e38\u63a5\u6536\n        return path;\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_3","title":"\u524d\u7aef\u4ee3\u7801","text":"<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title&gt;Document&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;form action=\"http://localhost:8080/upload/single-file\" method=\"post\" enctype=\"multipart/form-data\"&gt;\n        &lt;!-- name \u5c5e\u6027\u7528\u4e8e\u5bf9\u63d0\u4ea4\u5230\u670d\u52a1\u5668\u540e\u7684\u8868\u5355\u6570\u636e\u8fdb\u884c\u6807\u8bc6 --&gt;\n        &lt;input type=\"file\" name=\"file\" value=\"\u4e0a\u4f20\u56fe\u7247\"&gt;\n        &lt;input type=\"submit\" value=\"\u4e0a\u4f20\"&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_4","title":"\u56fe\u7247\u4e0a\u4f20\u5230\u4e03\u725b\u4e91","text":"<p>\u53c2\u8003\u6587\u6863</p>"},{"location":"Java/SpringBoot/springboot%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#maven","title":"\u5bfc\u5165maven\u4f9d\u8d56","text":"<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.qiniu&lt;/groupId&gt;\n  &lt;artifactId&gt;qiniu-java-sdk&lt;/artifactId&gt;\n  &lt;version&gt;[7.7.0, 7.10.99]&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#applicationproperties","title":"\u8bbe\u7f6e\u914d\u7f6e\u6587\u4ef6application.properties","text":"<pre><code># \u5355\u6b21\u8bf7\u6c42\u6700\u5927\u4e0a\u4f20\u5c3a\u5bf8\nspring.servlet.multipart.max-request-size=5MB\n# \u6700\u5927\u4e0a\u4f20\u5c3a\u5bf8\nspring.servlet.multipart.max-file-size=1MB\n\nqiNiu.accessKey=z76Agk0XbS38XpDqHPHR_SjeEY920war5qYbQxkv\nqiNiu.accessSecretKey=qH7d1b2xTtLGj63tWYh4xI_3aykoN2gnTMq3ZAC3\nqiNiu.bucketName=longcoding-wxapp\n# \u4e03\u725b\u4e91\u4f1a\u5206\u914d\u4e34\u65f6\u57df\u540d\uff0c\u4e5f\u53ef\u4ee5\u7ed1\u5b9a\u81ea\u5df1\u7684\u57df\u540d\nqiNiu.url=http://lihailong.vip/\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_5","title":"\u81ea\u5b9a\u4e49\u5de5\u5177\u7c7b","text":"<pre><code>package com.lee.uploadfile.util;\n\nimport com.alibaba.fastjson2.JSON;\nimport com.qiniu.http.Response;\nimport com.qiniu.storage.Configuration;\nimport com.qiniu.storage.Region;\nimport com.qiniu.storage.UploadManager;\nimport com.qiniu.storage.model.DefaultPutRet;\nimport com.qiniu.util.Auth;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.multipart.MultipartFile;\n\n/**\n * @author \u6653\u9f99coding\n */\n@Component\npublic class QiNiuUtil {\n    @Value(\"${qiNiu.url}\")\n    public String url;\n    public String getUrl() {\n        return url;\n    }\n\n    @Value(\"${qiNiu.accessKey}\")\n    private String accessKey;\n    @Value(\"${qiNiu.accessSecretKey}\")\n    private String accessSecretKey;\n\n    @Value(\"${qiNiu.bucketName}\")\n    private String bucket;\n\n    public boolean upload(MultipartFile file,String fileName) {\n        //\u6784\u9020\u4e00\u4e2a\u5e26\u6307\u5b9a Region \u5bf9\u8c61\u7684\u914d\u7f6e\u7c7b\n        Configuration cfg = new Configuration(Region.autoRegion());\n        //...\u5176\u4ed6\u53c2\u6570\u53c2\u8003\u7c7b\u6ce8\u91ca\n        UploadManager uploadManager = new UploadManager(cfg);\n        //...\u751f\u6210\u4e0a\u4f20\u51ed\u8bc1\uff0c\u7136\u540e\u51c6\u5907\u4e0a\u4f20\n\n        //\u9ed8\u8ba4\u4e0d\u6307\u5b9akey\u7684\u60c5\u51b5\u4e0b\uff0c\u4ee5\u6587\u4ef6\u5185\u5bb9\u7684hash\u503c\u4f5c\u4e3a\u6587\u4ef6\u540d\n        try {\n            byte[] uploadBytes = file.getBytes();\n            Auth auth = Auth.create(accessKey, accessSecretKey);\n            String upToken = auth.uploadToken(bucket);\n            Response response = uploadManager.put(uploadBytes, fileName, upToken);\n            //\u89e3\u6790\u4e0a\u4f20\u6210\u529f\u7684\u7ed3\u679c\n            DefaultPutRet putRet = JSON.parseObject(response.bodyString(), DefaultPutRet.class);\n            return true;\n        } catch (Exception ex) {\n            ex.printStackTrace();\n        }\n        return false;\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_6","title":"\u540e\u7aef\u4ee3\u7801","text":"<pre><code>package com.lee.uploadfile.controller;\n\nimport com.lee.uploadfile.util.QiNiuUtil;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport javax.annotation.Resource;\nimport java.util.UUID;\n\n/**\n * \u5c06\u56fe\u7247\u4e0a\u4f20\u81f3\u4e03\u725b\u4e91\n * @author \u6653\u9f99coding\n */\n@RestController\n@RequestMapping(\"/upload\")\npublic class UploadController {\n    @Resource\n    private QiNiuUtil qiNiuUtil;\n\n    @PostMapping(\"/cloud\")\n    String uploadPictureCloud(MultipartFile file) {\n        // \u622a\u53d6\u6587\u4ef6\u540d\uff0c\u5e76\u7528\u65b0\u7684\u6587\u4ef6\u540d\u66ff\u6362\n        String originalFilename = file.getOriginalFilename();\n        assert originalFilename != null;\n        int startIndex = originalFilename.lastIndexOf('.');\n        String ext = originalFilename.substring(startIndex);\n        String randomName = UUID.randomUUID().toString().replace(\"-\", \"\");\n        String newFilename = randomName + ext;\n\n        // \u5224\u65ad\u662f\u5426\u4e0a\u4f20\u6210\u529f\n        boolean success = qiNiuUtil.upload(file, newFilename);\n        if (success) {\n            return qiNiuUtil.getUrl() + newFilename;\n        }\n        // \u56fe\u7247\u4e0a\u4f20\u5931\u8d25\uff0c\u8fd4\u56de\u7a7a\u4e32\n        return \"\";\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_7","title":"\u524d\u7aef\u4ee3\u7801","text":"<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"&gt;\n    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n    &lt;title&gt;Document&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;form action=\"http://localhost:8080/upload/cloud\" method=\"post\" enctype=\"multipart/form-data\"&gt;\n        &lt;!-- name \u5c5e\u6027\u7528\u4e8e\u5bf9\u63d0\u4ea4\u5230\u670d\u52a1\u5668\u540e\u7684\u8868\u5355\u6570\u636e\u8fdb\u884c\u6807\u8bc6 --&gt;\n        &lt;input type=\"file\" name=\"file\" value=\"\u4e0a\u4f20\u56fe\u7247\"&gt;\n        &lt;input type=\"submit\" value=\"\u4e0a\u4f20\"&gt;\n    &lt;/form&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_8","title":"\u4e00\u4e9b\u5751","text":""},{"location":"Java/SpringBoot/springboot%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#apifoxpostman","title":"\u4f7f\u7528 apifox/postman \u6d4b\u8bd5","text":"<p>\u6ce8\u610f\uff1a\u53c2\u6570\u540d\u9700\u8981\u662ffile\u624d\u53ef\u4ee5\u4e0a\u4f20\u6210\u529f\u3002</p> <p></p>"},{"location":"Java/SpringBoot/springboot%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/#_9","title":"\u8fd4\u56de\u503c\u9700\u8981\u662f\u5b57\u5178\u5bf9\u8c61","text":"<p>\u6709\u65f6\u5019\u524d\u7aef\u53ea\u80fd\u63a5\u6536\u5b57\u5178\u7c7b\u578b\u7684\u5bf9\u8c61\u3002</p>"},{"location":"Java/SpringBoot/springboot%E6%9A%B4%E9%9C%B2%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90/","title":"springboot\u8bbf\u95ee\u9759\u6001\u8d44\u6e90","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/springboot%E6%9A%B4%E9%9C%B2%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90/#_1","title":"\u9759\u6001\u6587\u4ef6\u5b58\u653e\u4f4d\u7f6e","text":"<p><code>/src/main/resources/public</code>\u6216</p> <p><code>/src/main/resources/static</code>\u3002</p> <p>\u4e2a\u4eba\u4e60\u60ef\u5c06\u5bf9\u5916\u66b4\u9732\u7684\u8d44\u6e90\u653e\u5728public\u4e2d\u3002</p> <p>\u4e0d\u5efa\u8bae\u81ea\u5b9a\u4e49\u9759\u6001\u6587\u4ef6\u7684\u5b58\u653e\u4f4d\u7f6e\u3002</p>"},{"location":"Java/SpringBoot/springboot%E6%9A%B4%E9%9C%B2%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90/#_2","title":"\u8bbf\u95ee\u9759\u6001\u8d44\u6e90","text":"<p>\u5047\u5b9a\u6211\u4eec\u5c06\u56fe\u7247<code>a.png</code>\u653e\u5728\u4e0a\u8ff0\u76ee\u5f55\u4e0b\uff0c\u6211\u4eec\u4ec5\u9700\u8981\u8bbf\u95ee<code>http://localhost:8080/a.png</code>\u5373\u53ef\u3002</p> <p>\u5982\u679c\u6211\u4eec\u60f3\u5bf9url\u81ea\u5b9a\u4e49\u524d\u7f00\uff0c\u53ea\u9700\u8981\u5728<code>application.properties</code>\u4e2d\u586b\u5199\u5982\u4e0b\u914d\u7f6e\u5373\u53ef\u3002</p> <pre><code>spring.mvc.static-path-pattern=/images/**\n</code></pre> <p>\u6b64\u65f6\u8bbf\u95ee\uff1a<code>http://localhost:8080/images/a.png</code></p> <p>\u6ce8\uff1a\u6709\u65f6\u5019\u9700\u8981\u6e05\u7a7a\u7f13\u5b58\u624d\u80fd\u52a0\u8f7d\u6b63\u786e\u3002</p>"},{"location":"Java/SpringBoot/springboot%E6%9A%B4%E9%9C%B2%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90/#springboot_1","title":"\u5b8c\u7f8e\u89e3\u51b3SpringBoot\u4e0a\u4f20\u56fe\u7247\u4e4b\u540e\uff0c\u9700\u8981\u91cd\u670d\u52a1\u624d\u80fd\u8bbf\u95ee","text":"<p>\u51fa\u73b0\u539f\u56e0\uff1a</p> <p>\u8bf4\u6cd5\u4e00\uff1a\u8fd9\u6837\u5bfc\u81f4\u7684\u539f\u7406\u662f\u670d\u52a1\u5668\u7684\u4fdd\u62a4\u63aa\u65bd\u5bfc\u81f4\u7684\uff0c\u670d\u52a1\u5668\u4e0d\u80fd\u5bf9\u5916\u90e8\u66b4\u9732\u771f\u5b9e\u7684\u8d44\u6e90\u8def\u5f84\uff0c\u9700\u8981\u914d\u7f6e\u865a\u62df\u8def\u5f84\u6620\u5c04\u8bbf\u95ee\u3002</p> <p>\u8bf4\u6cd5\u4e8c\uff1aSpringBoot \u5728\u542f\u52a8\u7684\u65f6\u5019\u4f1a\u6267\u884cmaven\u547d\u4ee4\u628a\u672c\u5730\u9879\u76ee\u6253\u5305\u6210jar\u5305\u6216war\u5305\uff0c\u5176\u4e2d\u5c31\u5305\u542b\u4e86\u9879\u76ee\u4e2d\u7684\u9759\u6001\u8d44\u6e90\u6587\u4ef6\u3002\u542f\u52a8\u9879\u76ee\u540e\u4e0a\u4f20\u7684\u56fe\u7247\u5e76\u672a\u4f20\u5165\u5230\u542f\u52a8\u7684\u5305\u4e2d\uff0c\u800c\u662f\u5728\u672c\u5730\u7684\u9879\u76ee\u4e2d\uff0c\u6240\u4ee5\u8bbf\u95ee\u4e0d\u5230\u3002\u9879\u76ee\u91cd\u542f\u540e\u53c8\u4f1a\u5c06\u672c\u5730\u9879\u76ee\u6253\u6210\u65b0\u7684\u5305\uff0c\u6b64\u65f6\u5305\u542b\u4e0a\u4e00\u6b21\u4e0a\u4f20\u7684\u7684\u56fe\u7247\uff0c\u4e8e\u662f\u5c31\u4f1a\u5728\u9875\u9762\u4e0a\u663e\u793a\u56fe\u7247\u3002\u4e2a\u4eba\u66f4\u504f\u5411\u4e8e\u8fd9\u79cd\u8bf4\u6cd5\u3002</p> <p>\u89e3\u51b3\u529e\u6cd5\uff1a\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e\u7c7b\u5373\u53ef\u3002</p> <pre><code>package com.lee.uploadfile.config;\n\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@Configuration\npublic class FileUploadConfig implements WebMvcConfigurer {\n    public void addResourceHandlers(ResourceHandlerRegistry registry) {\n        // \u83b7\u53d6\u6587\u4ef6\u7684\u771f\u5b9e\u8def\u5f84\n        // \u6ce8\u610f\uff1a\u672b\u5c3e\u7684\\\\\u5fc5\u987b\u8981\u5199\uff01\n        String path = System.getProperty(\"user.dir\")+\"\\\\src\\\\main\\\\resources\\\\public\\\\\";\n        // \u6dfb\u52a0\u6620\u5c04\n        // \u524d\u8005\u662furl\u7684\u524d\u7f00\uff0c\u540e\u8005\u662f\u6587\u4ef6\u5b9e\u9645\u8def\u5f84\uff08\u6ce8\u610f\u52a0\u4e0afile:\uff09\n        registry.addResourceHandler(\"/images/**\").addResourceLocations(\"file:\" + path);\n   }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%94%9F%E6%88%90ID/","title":"springboot\u751f\u6210ID","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/springboot%E7%94%9F%E6%88%90ID/#_1","title":"\u96ea\u82b1\u7b97\u6cd5","text":"<p>\u524d\u63d0\uff1aspring boot\u96c6\u6210mybatis-plus\u3002\u53ef\u4ee5\u53c2\u8003\u6211\u5199\u7684\u300aspringboot\u96c6\u6210mybatis-plus\u64cd\u4f5cMySQL\u300b\u8fd9\u7bc7\u535a\u5ba2\u3002</p> <p>\u5728\u5b9e\u4f53\u7c7b\u7684ID\u5c5e\u6027\u4e0a\u6dfb\u52a0\u6ce8\u89e3<code>@TableId(value = \"id\")</code>\u5373\u53ef\uff1a</p> <pre><code>@TableId(value = \"id\")\nprivate Long id;\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%94%9F%E6%88%90ID/#_2","title":"\u7cbe\u5ea6\u4e22\u5931\u95ee\u9898","text":"<p>\u96ea\u82b1\u7b97\u6cd5\u751f\u6210\u7684ID\u4f20\u5230\u524d\u7aef\u4f1a\u5bfc\u81f4\u7cbe\u5ea6\u4e22\u5931\uff0c\u5efa\u8bae\u4f7f\u7528<code>jackson</code>\u5e8f\u5217\u5316\u5de5\u5177\uff0c\u5e76\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e\u5373\u53ef\uff1a</p> <pre><code>package com.lee.medicine.config;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.module.SimpleModule;\nimport com.fasterxml.jackson.databind.ser.std.ToStringSerializer;\nimport org.springframework.boot.autoconfigure.condition.ConditionalOnMissingBean;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Primary;\nimport org.springframework.http.converter.json.Jackson2ObjectMapperBuilder;\n\n@Configuration\npublic class JacksonConfig {\n    @Bean\n    @Primary\n    @ConditionalOnMissingBean(ObjectMapper.class)\n    public ObjectMapper jacksonObjectMapper(Jackson2ObjectMapperBuilder builder) {\n      ObjectMapper objectMapper = builder.createXmlMapper(false).build();\n      // \u5168\u5c40\u914d\u7f6e\u5e8f\u5217\u5316\u8fd4\u56de JSON \u5904\u7406\n      SimpleModule simpleModule = new SimpleModule();\n      //JSON Long ==&gt; String\n      simpleModule.addSerializer(Long.class, ToStringSerializer.instance);\n      objectMapper.registerModule(simpleModule);\n      return objectMapper;\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/","title":"SpringBoot\u767b\u5f55\u6ce8\u518c","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_1","title":"\u524d\u7f6e\u7c7b","text":"<p>Result\u7c7b\uff08\u975e\u5fc5\u987b\uff09</p> <pre><code>import lombok.AllArgsConstructor;\nimport lombok.Data;\n@Data\n@AllArgsConstructor\npublic class Result {\n    private boolean success;\n\n    private int code;\n\n    private String msg;\n\n    private Object data;\n\n    public static Result success(Object data) {\n        return new Result(true, 200, \"success\", data);\n    }\n\n    public static Result fail(int code, String msg) {\n        return new Result(false, code, msg, null);\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_2","title":"\u767b\u5f55\u529f\u80fd","text":""},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_3","title":"\u524d\u7f6e\u9700\u6c42","text":"<p>\u7531\u4e8e\u8981\u7528\u5230JWT\u548cMD5\u52a0\u5bc6\uff0c\u9700\u8981\u5f15\u5165\u4ee5\u4e0b\u4f9d\u8d56\u4ee5\u53ca\u81ea\u5b9a\u4e49\u7684JWT\u5de5\u5177\u7c7b\uff08\u89c1\u53e6\u4e00\u4e2a\u6587\u4ef6\uff09\u3002</p> <pre><code>&lt;!--md5\u52a0\u5bc6--&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;commons-codec&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;!--JWT--&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n    &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n    &lt;version&gt;0.9.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_4","title":"\u529f\u80fd\u68b3\u7406","text":"<ol> <li>\u7528\u6237\u4ece\u524d\u7aef\u901a\u8fc7post\u8bf7\u6c42\u4f20\u5165<code>username</code>\u548c<code>password</code>\u5c06\u5176\u5c01\u88c5\u6210<code>Map</code>\u3002</li> <li>\u4ececontroller\u4f20\u5165service\u3002</li> <li>service\u4e2d\u521d\u6b65\u5224\u65ad\u767b\u5f55\u6761\u4ef6\uff08\u9a8c\u8bc1\u7528\u6237\u540d\u3001\u5bc6\u7801\u4e0d\u4e3a\u7a7a\u7b49\uff09\uff0c\u7136\u540e\u5bf9\u5bc6\u7801\u8fdb\u884c\u52a0\u76d0\u52a0\u5bc6\u64cd\u4f5c\uff08\u52a0\u5206\u9879\uff09\u3002</li> <li>\u901a\u8fc7\u7528\u6237\u540d\u548c\u5bc6\u7801\u8fd9\u4e24\u4e2a\u5c5e\u6027\u53bb\u6570\u636e\u5e93\u4e2d\u67e5\u627e\uff0c\u5c06\u8fd4\u56de\u7684\u6570\u636e\uff08\u4f8b\u5982\uff1a<code>name</code>, <code>email</code>\uff09\u5b58\u653e\u5728Map\u4e2d\u3002</li> <li>\u4f7f\u7528JWT\u521b\u5efatoken\uff0c\u5e76\u5c06\u4e2a\u4eba\u4fe1\u606f\uff08Map\u5f62\u5f0f\uff09\u548c\u52a0\u5bc6\u65f6\u95f4\u5b58\u653e\u5728token\u4e2d\uff0c\u5728redis\u4e2d\u4ee5key value\u7684\u5f62\u5f0f\u5b58\u653e\u4e2a\u4eba\u4fe1\u606f\uff08key\uff1atoken\uff0cvalue\uff1a\u4e2a\u4eba\u4fe1\u606f\uff09\uff0c\u540c\u65f6\u8bbe\u7f6eredis\u4e2d\u7684\u8fc7\u671f\u65f6\u95f4\uff08\u52a0\u5206\u9879\uff09\u3002</li> <li>\u6700\u7ec8\u5728service\u4e2d\u8fd4\u56deResult\u7ed3\u679c\u3002\uff08\u52a0\u5206\u9879\uff09</li> </ol> <p>\u5907\u6ce8\uff1a</p> <ol> <li>Result\u7c7b\u662f\u81ea\u5b9a\u4e49\u7684\u3002</li> <li>JWT\u4ee3\u7801\u53c2\u8003\u6211\u7684\u76f8\u5173\u6587\u6863\u3002</li> <li>\u4e2a\u4eba\u4fe1\u606f\u4e0d\u4ec5\u5b58\u653e\u5728JWT\u4e2d\uff0c\u4e5f\u5b58\u653e\u5728redis\u4e2d\u3002</li> </ol>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_5","title":"\u524d\u7aef","text":""},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_6","title":"\u524d\u7aef\u53d1\u9001\u8bf7\u6c42","text":"<p><code>method: post</code></p> <p>\u8bf7\u6c42\u4f53\uff1a</p> <pre><code>{\n  \"username\": \"lhl\",\n  \"password\": 123\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_7","title":"\u524d\u7aef\u63a5\u6536\u8bf7\u6c42","text":"<p>\u6570\u636e\u7ecf\u8fc7\u81ea\u5b9a\u4e49Result\u7c7b\u5c01\u88c5\u3002</p> <p>data\u662f\u670d\u52a1\u5668\u521b\u5efa\u7684token\u3002</p> <pre><code>{\n  \"success\": true,\n  \"code\": 200,\n  \"msg\": \"success\",\n  \"data\": \"eyJhbGciOiJIUzI1NiJ9.eyJkYXRhIjp7ImFjY291bnQiOiJsaGwiLCJlbWFpbCI6ImxobEBhaWJhaW5jaGVuZyJ9LCJleHAiOjE2NjIzNTE3ODQsImlhdCI6MTY2MjM1MTY5OH0.Cu524IfTfYCo42lH875rblPRkRhBt7o-2IymztfG-rc\"\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_8","title":"\u4ee3\u7801","text":""},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#controller","title":"Controller\u5c42","text":"<p>LoginController</p> <pre><code>@RestController\n@RequestMapping(\"/login\")\npublic class LoginController {\n    @Autowired\n    private LoginService loginService;\n    @PostMapping(\"/login\")\n    public Result login(@RequestBody Map&lt;String, Object&gt; userInfo) {\n        return loginService.login(userInfo);\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#service","title":"Service \u5c42","text":"<p>LoginServiceImpl \u7c7b\u5b9e\u73b0</p> <pre><code>@Service\npublic class LoginServicImpl implements LoginService {\n    @Autowired\n    private LoginMapper loginMapper;\n\n    @Autowired\n    private RedisTemplate redisTemplate;\n\n    @Override\n    public Result login(Map&lt;String, Object&gt; userInfo) {\n        String username = userInfo.get(\"username\").toString();\n        String password = userInfo.get(\"password\").toString();\n        System.out.println(\"\u7528\u6237\u540d\uff1a\" + username);\n        System.out.println(\"\u5bc6\u7801\uff1a\" + password);\n        Map&lt;String, Object&gt; user = loginMapper.findUser(username, password);\n        System.out.println(user);\n        // \u53ef\u4ee5\u52a0\u76d0\u52a0\u5bc6\n\n        if (user == null) {\n            return Result.fail(250, \"\u7528\u6237\u540d\u6216\u5bc6\u7801\u4e0d\u6b63\u786e\");\n        } else {\n            // \u751f\u6210token\uff0c\u5e76\u5728\u5176\u4e2d\u88c5\u8f7d\u4e2a\u4eba\u4fe1\u606f\u548ctoken\u8fc7\u671f\u65f6\u95f4\n            String token = JWTUtils.createToken(user,24 * 60 * 60L);\n\n            // \u8c03\u8bd5\n            System.out.println(\"\u751f\u6210token\uff1a\" + token);\n\n            // \u53e6key\u662ftoken\uff0cvalue\u662f\u4e2a\u4eba\u4fe1\u606f\uff0c\u5b58\u5165redis\u5e76\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\n            redisTemplate.opsForValue().set(\"TOKEN_\" + token, JSON.toJSONString(user), 1, TimeUnit.DAYS);\n            return Result.success(token);\n        }\n    }\n\n    @Override\n    public Result getUserInfo(String token) {\n        // \u8c03\u8bd5\n        System.out.println(\"\u9a8c\u8bc1token\uff1a\" + token);\n\n        Map&lt;String, Object&gt; stringObjectMap = JWTUtils.checkToken(token);\n        if (stringObjectMap == null) {\n            return Result.fail(250, \"JWT\u9a8c\u8bc1\u5931\u8d25\");\n        }\n        String userJson = (String) redisTemplate.opsForValue().get(\"TOKEN_\" + token);\n        if (StringUtils.isBlank(userJson)) {\n            return Result.fail(250, \"redis\u4e2dtoken\u8fc7\u671f\");\n        }\n        Map&lt;String, Object&gt; user = JSON.parseObject(userJson, Map.class);\n        return Result.success(user);\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#mapper","title":"Mapper\u5c42","text":"<p>LoginMapper \u63a5\u53e3</p> <pre><code>import org.apache.ibatis.annotations.Param;\nimport java.util.Map;\n\npublic interface LoginMapper {\n    Map&lt;String, Object&gt; findUser(@Param(\"username\") String username, @Param(\"password\") String password);\n}\n</code></pre> <p>LoginMapper.xml</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.lee.mybatis03.mapper.LoginMapper\"&gt;\n    &lt;select id=\"findUser\" resultType=\"java.util.Map\"&gt;\n        select account, email from blog_sys_user\n        where account = #{username} and password = #{password}\n    &lt;/select&gt;\n&lt;/mapper&gt;\n</code></pre> <p>\u5907\u6ce8\uff0c\u6570\u636e\u5e93\u4e2d\u7684<code>account</code>\u548c<code>email</code>\u662f\u767b\u5f55\u6210\u529f\u540e\u9700\u8981\u8fd4\u56de\u7684\u4e2a\u4eba\u4fe1\u606f\u3002</p>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_9","title":"\u767b\u5f55\u540e\u83b7\u53d6\u4e2a\u4eba\u4fe1\u606f","text":""},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_10","title":"\u524d\u7f6e\u9700\u6c42","text":"<p>\u540c\u767b\u5f55\u529f\u80fd\u3002</p>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_11","title":"\u529f\u80fd\u68b3\u7406","text":"<p>\u767b\u5f55\u6210\u529f\u540e\uff0c\u5ba2\u6237\u7aef\u62ff\u5230\u670d\u52a1\u5668\u751f\u6210\u7684token\u3002\u5148\u5c06token\u53d1\u9001\u7ed9\u670d\u52a1\u5668\uff0c\u670d\u52a1\u5668\u6821\u9a8c\u6210\u529f\u540e\u8fd4\u56de\u6570\u636e\u3002</p>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_12","title":"\u524d\u7aef","text":""},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_13","title":"\u524d\u7aef\u53d1\u9001\u6570\u636e","text":"<p>\u63a5\u53e3url\uff1a<code>/login/getinfo</code></p> <p>\u8bf7\u6c42\u65b9\u5f0f\uff1a<code>GET</code></p> <p>\u8bf7\u6c42\u53c2\u6570\uff1a</p> \u53c2\u6570\u540d\u79f0 \u53c2\u6570\u7c7b\u578b \u8bf4\u660e Authorization String \u5934\u90e8\u4fe1\u606f\uff08TOKEN\uff09 <pre><code>GET http://localhost:8080/login/getinfo\nAccept: application/json\nAuthorization: eyJhbGciOiJIUzI1NiJ9.eyJkYXRhIjp7ImFjY291bnQiOiJsaGwiLCJlbWFpbCI6ImxobEBhaWJhaW5jaGVuZyJ9LCJleHAiOjE2NjIzNjQ3MjgsImlhdCI6MTY2MjM2NDY0MX0.SQ7W7RSuM9jiPT_LXqbXaUdyziAMOxNdnYCyuHqennA\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_14","title":"\u524d\u7aef\u63a5\u6536\u6570\u636e","text":"<pre><code>{\n  \"success\": true,\n  \"code\": 200,\n  \"msg\": \"success\",\n  \"data\": {\n    \"account\": \"lhl\",\n    \"email\": \"lhl@aibaincheng\"\n  }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_15","title":"\u4ee3\u7801","text":"<p>\u7531\u4e8e\u4e0d\u9700\u8981\u548c\u6570\u636e\u5e93\u6253\u4ea4\u9053\uff0c\u56e0\u6b64\u53ea\u9700\u8981controller\u548cservice\u3002</p>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#controller_1","title":"controller","text":"<pre><code>@RestController\n@RequestMapping(\"/login\")\npublic class LoginController {\n    @Autowired\n    private LoginService loginService;\n    @GetMapping(\"/getinfo\")\n    public Result getUserInfo(@RequestHeader(\"Authorization\") String token) {\n        return loginService.getUserInfo(token);\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#service_1","title":"Service","text":"<pre><code>@Service\npublic class LoginServicImpl implements LoginService {\n    @Autowired\n    private LoginMapper loginMapper;\n\n    @Autowired\n    private RedisTemplate redisTemplate;\n\n    @Override\n    public Result getUserInfo(String token) {\n        // \u8c03\u8bd5\n        System.out.println(\"\u9a8c\u8bc1token\uff1a\" + token);\n\n        Map&lt;String, Object&gt; stringObjectMap = JWTUtils.checkToken(token);\n        if (stringObjectMap == null) {\n            return Result.fail(250, \"JWT\u9a8c\u8bc1\u5931\u8d25\");\n        }\n        String userJson = (String) redisTemplate.opsForValue().get(\"TOKEN_\" + token);\n        if (StringUtils.isBlank(userJson)) {\n            return Result.fail(250, \"redis\u4e2dtoken\u8fc7\u671f\");\n        }\n        Map&lt;String, Object&gt; user = JSON.parseObject(userJson, Map.class);\n        return Result.success(user);\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_16","title":"\u9000\u51fa\u767b\u5f55","text":""},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_17","title":"\u529f\u80fd\u68b3\u7406","text":"<p>\u524d\u7aef\u53d1\u9001token\uff0c\u670d\u52a1\u5668\u63a5\u6536\u540e\u5728redis\u4e2d\u5220\u9664\u8be5token\u5373\u53ef\u3002</p>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_18","title":"\u524d\u7aef","text":""},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_19","title":"\u524d\u7aef\u53d1\u9001\u6570\u636e","text":"<p>\u63a5\u53e3url\uff1a<code>/login/out</code></p> <p>\u8bf7\u6c42\u65b9\u5f0f\uff1a<code>GET</code></p> <p>\u8bf7\u6c42\u53c2\u6570\uff1a</p> \u53c2\u6570\u540d\u79f0 \u53c2\u6570\u7c7b\u578b \u8bf4\u660e Authorization String \u5934\u90e8\u4fe1\u606f\uff08TOKEN\uff09 <pre><code>GET http://localhost:8080/login/out\nAccept: application/json\nAuthorization: eyJhbGciOiJIUzI1NiJ9.eyJkYXRhIjp7ImFjY291bnQiOiJsaGwiLCJlbWFpbCI6ImxobEBhaWJhaW5jaGVuZyJ9LCJleHAiOjE2NjIzNjQ3MjgsImlhdCI6MTY2MjM2NDY0MX0.SQ7W7RSuM9jiPT_LXqbXaUdyziAMOxNdnYCyuHqennA\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_20","title":"\u524d\u7aef\u63a5\u6536\u4fe1\u606f","text":""},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_21","title":"\u4ee3\u7801","text":""},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#controller_2","title":"controller","text":"<p>LoginController</p> <pre><code>@RestController\n@RequestMapping(\"/login\")\npublic class LoginController {\n    @Autowired\n    private LoginService loginService;\n    @GetMapping(\"/out\")\n    public Result logout() {\n        return loginService.logout();\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#service_2","title":"service","text":"<p>LoginServiceImpl</p> <pre><code>@Service\npublic class LoginServicImpl implements LoginService {\n    @Autowired\n    private LoginMapper loginMapper;\n\n    @Autowired\n    private RedisTemplate redisTemplate;\n\n    @Override\n    public Result logout(String token) {\n        redisTemplate.delete(\"TOKEN_\" + token);\n        return Result.success(\"\u9000\u51fa\u6210\u529f\uff01\");\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_22","title":"\u6ce8\u518c\u529f\u80fd","text":""},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_23","title":"\u524d\u7f6e\u9700\u6c42","text":"<ol> <li>\u8f93\u5165\u6ce8\u518c\u4fe1\u606f\uff0c\u5148\u68c0\u67e5\u8f93\u5165\u4fe1\u606f\u662f\u5426\u5408\u6cd5</li> <li>\u5728\u6570\u636e\u5e93\u4e2d\u67e5\u8be2\u7528\u6237\u540d\u662f\u5426\u5b58\u5728</li> <li>\u5c06\u6570\u636e\u5199\u5165\u6570\u636e\u5e93\uff0c\u6ce8\u610f\u8981\u4f7f\u7528<code>@Transactional</code>\u6ce8\u89e3\u3002</li> <li>\u5c06\u4e2a\u4eba\u90e8\u5206\u4fe1\u606f\u901a\u8fc7JWT\u5b58\u653e\u5728token\u4e2d\u3002</li> <li>\u5728redis\u4e2d\u5b58\u5165token\u3002</li> </ol>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#controller_3","title":"controller","text":"<p>RegisterController</p> <pre><code>@RestController\n@RequestMapping(\"/register\")\npublic class RegisterController {\n    @Autowired\n    private RegisterService registerService;\n    @PostMapping()\n    public Result register(@RequestBody Map&lt;String, Object&gt; user) {\n        return registerService.register(user);\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#service_3","title":"service","text":"<p>RegisterServiceImpl</p> <pre><code>@Service\n@Transactional\npublic class RegisterServiceImpl implements RegisterService {\n    @Autowired\n    private RegisterMapper registerMapper;\n    @Autowired\n    private RedisTemplate redisTemplate;\n    @Override\n    public Result register(Map&lt;String, Object&gt; user) {\n        String username = user.get(\"username\").toString();\n        String password = user.get(\"password\").toString();\n        String email = user.get(\"email\").toString();\n\n\n        // \u9a8c\u8bc1\u5bc6\u7801\u5408\u6cd5\u6027\n        if (StringUtils.isBlank(username) || StringUtils.isBlank(password)) {\n            return Result.fail(250, \"\u8f93\u5165\u4fe1\u606f\u4e0d\u5408\u6cd5\");\n        }\n\n        // \u9a8c\u8bc1\u5bc6\u7801\u662f\u5426\u5728\u6570\u636e\u5e93\u4e2d\u5b58\u5728\n        String uName = registerMapper.getUsername(username);\n        if (uName != null) {\n            return Result.fail(250, \"\u7528\u6237\u540d\u5df2\u5b58\u5728\uff01\");\n        }\n\n\n        // \u5411\u6570\u636e\u5e93\u4e2d\u63d2\u5165\u6570\u636e\n        registerMapper.insertUser(username, password, email);\n\n\n        // \u4f7f\u7528JWT\u521b\u5efatoken\uff0c\u5e76\u5c06username\u548cemail\u5b58\u653e\u5728token\u4e2d\n        Map&lt;String, Object&gt; userInfo = new HashMap&lt;&gt;();\n        userInfo.put(\"username\", username);\n        userInfo.put(\"email\", email);\n        String token = JWTUtils.createToken(userInfo,24 * 60 * 60L);\n\n\n        // \u5728redis\u4e2d\u5b58\u653etoken\n        redisTemplate.opsForValue().set(\"TOKEN_\" + token, JSON.toJSONString(userInfo), 1, TimeUnit.DAYS);\n        return Result.success(token);\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#mapper_1","title":"mapper","text":"<p>RegisterMapper\u63a5\u53e3</p> <pre><code>package com.lee.mybatis03.mapper;\n\nimport org.apache.ibatis.annotations.Mapper;\nimport org.apache.ibatis.annotations.Param;\n\npublic interface RegisterMapper {\n    String getUsername(@Param(\"username\") String username);\n\n    void insertUser(@Param(\"username\") String username,\n                    @Param(\"password\") String password,\n                    @Param(\"email\") String email);\n}\n</code></pre> <p>RegisterMapper.xml</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;!DOCTYPE mapper\n        PUBLIC \"-//mybatis.org//DTD Mapper 3.0//EN\"\n        \"http://mybatis.org/dtd/mybatis-3-mapper.dtd\"&gt;\n&lt;mapper namespace=\"com.lee.mybatis03.mapper.RegisterMapper\"&gt;\n    &lt;insert id=\"insertUser\"&gt;\n        insert into blog_sys_user (account, password, email) values (#{username}, #{password}, #{email})\n    &lt;/insert&gt;\n    &lt;select id=\"getUsername\" resultType=\"java.lang.String\"&gt;\n        select account from blog_sys_user where account = #{username}\n    &lt;/select&gt;\n&lt;/mapper&gt;   \n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_24","title":"\u767b\u5f55\u62e6\u622a\u5668","text":""},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_25","title":"\u4ee3\u7801","text":"<p>\u62e6\u622a\u7c7b\u4e2d</p> <pre><code>@Component\n@Slf4j  // lombok \u4e2d\npublic class LoginInterceptor implements HandlerInterceptor {\n    /**\n     * \u5728\u6267\u884ccontroller\u65b9\u6cd5\u4e4b\u524d\u6267\u884c\u3002\n     */\n    @Override\n    public boolean preHandle(HttpServletRequest request,\n                             HttpServletResponse response,\n                             Object handler) throws Exception {\n        /**\n         * 1. \u5224\u65ad\u63a5\u53e3\u8def\u5f84\u662f\u5426\u4e3aHandlerMethod(controller\u4e2d\u7684\u65b9\u6cd5)\n         * 2. \u5224\u65adtoken\u662f\u5426\u4e3a\u7a7a\uff0c\u5982\u679c\u4e3a\u7a7a\uff0c\u672a\u767b\u5f55\n         * 3. \u5982\u679ctoken\u4e0d\u4e3a\u7a7a\uff0c\u767b\u5f55\u9a8c\u8bc1(JWT checkToken + Redis)\n         * 4. \u5982\u679c\u6210\u529f\uff0c\u653e\u884c\n         */\n\n        // handler\u53ef\u80fd\u662f\u8d44\u6e90\n        // springboot \u8bbf\u95ee\u9759\u6001\u8d44\u6e90\u9ed8\u8ba4\u53bbclasspath\u4e0b\u7684static\u76ee\u5f55\n        if (!(handler instanceof HandlerMethod)) {\n            return true;\n        }\n        String token = request.getHeader(\"Authorization\");\n\n        // \u6253\u5370\u65e5\u5fd7\n        log.info(\"====================request start====================\");\n        String requestURL = request.getRequestURI();\n        log.info(\"request url:{}\", requestURL);\n        log.info(\"request method:{}\", request.getMethod());\n        log.info(\"token:{}\", token);\n        log.info(\"====================request end  ====================\");\n\n        if (!StringUtils.isBlank(token)) {\n            // \u6d4f\u89c8\u5668\u8bc6\u522b\u8fd4\u56de\u4fe1\u606f\u662fJson\n            response.setContentType(\"application/json;charset=utf-8\");\n\n            // \u8fd4\u56de\u54cd\u5e94\u4fe1\u606f\n            Result result = Result.fail(250, \"\u672a\u767b\u5f55\");\n            response.getWriter().println(JSON.toJSONString(result));\n\n            return false;\n        }\n\n        Map&lt;String, Object&gt; stringObjectMap = JWTUtils.checkToken(token);\n        if (stringObjectMap == null) {\n            response.setContentType(\"application/json;charset=utf-8\");\n            Result result = Result.fail(250, \"\u672a\u767b\u5f55\");\n            response.getWriter().println(JSON.toJSONString(result));\n            return false;\n        }\n\n        return true;\n    }\n}\n</code></pre> <p>\u914d\u7f6e\u7c7b\u4e2d</p> <pre><code>@Configuration\npublic class WebMVCConfig implements WebMvcConfigurer {\n    @Autowired\n    private LoginInterceptor interceptor;\n\n    @Override\n    public void addInterceptors(InterceptorRegistry registry) {\n        // \u5047\u5b9a\u62e6\u622a /test \u76ee\u5f55\u7684controller\n        registry.addInterceptor(interceptor).addPathPatterns(\"/test\");\n\n        // \u62e6\u622a\u9664\u4e86test\u76ee\u5f55\u7684\n        // registry.addInterceptor(interceptor).addPathPatterns(\"**\").excludePathPatterns(\"/test\");\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#controller_4","title":"controller","text":"<p>TestController</p> <pre><code>@RestController\n@RequestMapping(\"/test\")\npublic class TestController {\n    @RequestMapping\n    public String test() {\n        return \"test\u754c\u9762\";\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_26","title":"\u6d4b\u8bd5","text":"<p>\u8bbf\u95ee\uff1a<code>http://localhost:8080/test</code></p>"},{"location":"Java/SpringBoot/springboot%E7%99%BB%E5%BD%95%E6%B3%A8%E5%86%8C/#_27","title":"\u601d\u8003","text":"<p>\u4e3a\u4ec0\u4e48\u8981\u5c06token\u5b58\u653e\u5728redis\u4e2d\uff1f</p>"},{"location":"Java/SpringBoot/springboot%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E4%B8%8E%E5%81%9C%E6%AD%A2/","title":"springboot\u9879\u76ee\u90e8\u7f72\u4e0e\u505c\u6b62","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/springboot%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E4%B8%8E%E5%81%9C%E6%AD%A2/#springboot_1","title":"\u90e8\u7f72springboot\u9879\u76ee","text":"<ol> <li>\u4f7f\u7528Maven\u7ba1\u7406\u9879\u76ee\uff0c\u5728<code>pom.xml</code>\u6587\u4ef6\u4e2d\u5f15\u5165\u63d2\u4ef6\uff1a</li> </ol> <pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n    &lt;!--\u81ea\u5b9a\u4e49\u751f\u6210\u7684\u5305\u540d--&gt;\n    &lt;finalName&gt;xnxy&lt;/finalName&gt;\n&lt;/build&gt;\n</code></pre> <ol> <li>\u5728IDEA\u754c\u9762\u7684\u53f3\u4fa7\uff0c\u70b9\u51fb<code>Maven</code>\u9009\u9879\uff0c\u5c55\u5f00<code>Lifecycle</code>\uff0c\u4f9d\u6b21\u70b9\u51fb<code>clean</code>\u3001<code>compime</code>\u548c<code>package</code>\u63d2\u4ef6\uff0c\u5373\u53ef\u751f\u6210\u76f8\u5173jar\u5305\u3002</li> </ol> <ol> <li>\u5c06\u751f\u6210\u7684jar\u5305\u4e0a\u4f20\u5230\u670d\u52a1\u5668\u7684\u4efb\u610f\u4f4d\u7f6e\uff0c\u6267\u884c\u6307\u4ee4<code>nohup java -jar \u5305\u540d.jar</code>\u5373\u53ef\u6210\u529f\u90e8\u7f72\u3002</li> </ol> <p>\u8865\u5145\uff1a</p> <ol> <li> <p>\u81ea\u5b9a\u4e49\u670d\u52a1\u7aef\u53e3\uff1a\u670d\u52a1\u7aef\u53e3\u7531\u6e90\u4ee3\u7801\u7684<code>application.properties</code>\u6587\u4ef6\u6307\u5b9a\uff0c\u9ed8\u8ba4\u662f8080\u3002\u5982\u679c\u6211\u4eec\u60f3\u8981\u81ea\u5b9a\u4e49\u7aef\u53e3\uff0c\u53ea\u9700\u8f93\u5165\u6307\u4ee4<code>nohup java -jar \u5305\u540d.jar --server.port=18080</code></p> </li> <li> <p>\u521b\u5efa\u65e5\u5fd7\u6587\u4ef6\uff1a\u8f93\u5165\u6307\u4ee4<code>nohup java -jar \u5305\u540d.jar &amp;</code>\uff0c\u5373\u53ef\u5728\u90e8\u7f72\u670d\u52a1\u7684\u540c\u65f6\uff0c\u751f\u6210\u65e5\u5fd7\u6587\u4ef6\u3002\u9ed8\u8ba4\u4f1a\u5c06\u65e5\u5fd7\u6587\u4ef6\u8f93\u51fa\u5230\u5f53\u524d\u6587\u4ef6\u5939\u4e0b\u7684<code>nohup.out</code>\u6587\u4ef6\u4e2d\u3002</p> </li> </ol>"},{"location":"Java/SpringBoot/springboot%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E4%B8%8E%E5%81%9C%E6%AD%A2/#springboot_2","title":"\u505c\u6b62springboot\u670d\u52a1","text":"<p>\u65b9\u6cd5\u4e00</p> <ol> <li>\u8f93\u5165<code>ps -ef | grep java</code>\uff0c\u67e5\u8be2\u4e0eJava\u76f8\u5173\u7684\u8fdb\u7a0b\u3002</li> <li>\u8f93\u5165<code>kill -15 \u8fdb\u7a0b\u53f7</code>\u5373\u53ef\u6740\u6b7b\u8be5\u8fdb\u7a0b\u3002\uff08\u4e0d\u8981\u7528kill 9\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u90e8\u5206\u8d44\u6e90\u65e0\u6cd5\u91ca\u653e\uff01\uff09</li> </ol>"},{"location":"Java/SpringBoot/sprintboot%20JWT/","title":"SpringBoot JWT","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/sprintboot%20JWT/#_1","title":"\u6574\u5408\u65b9\u6cd5","text":"<p>\u5f15\u5165\u4f9d\u8d56\uff1a</p> <pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.auth0&lt;/groupId&gt;\n    &lt;artifactId&gt;java-jwt&lt;/artifactId&gt;\n    &lt;version&gt;4.2.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>"},{"location":"Java/SpringBoot/sprintboot%20JWT/#jwtutil","title":"\u81ea\u5b9a\u4e49JWTUtil\u7c7b\u4ee5\u53ca\u6d4b\u8bd5\u6848\u4f8b","text":"<pre><code>package com.lee.sec.util;\n\nimport com.auth0.jwt.JWT;\nimport com.auth0.jwt.JWTCreator;\nimport com.auth0.jwt.algorithms.Algorithm;\nimport com.auth0.jwt.interfaces.DecodedJWT;\n\nimport java.nio.charset.StandardCharsets;\nimport java.util.Base64;\nimport java.util.Calendar;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class JWTUtil {\n    // JWT\u79c1\u94a5\uff0c\u81ea\u5df1\u59a5\u5584\u4fdd\u7ba1\n    private static String secretKey = \"jfioewsjfewoia3892udksjhfjo\";\n\n    /**\n     * \u751f\u6210token\n     * @param data token\u4e2d\u5c01\u88c5\u7684\u6570\u636e\n     * @param validTime token\u6709\u6548\u65f6\u95f4\n     * @return JWT\u751f\u6210\u7684token\u5b57\u7b26\u4e32\n     */\n    public static String getToken(Map&lt;String, String&gt; data, int validTime) {\n        Calendar instance = Calendar.getInstance();\n        // \u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\n        instance.add(Calendar.SECOND, validTime);\n\n        // \u521b\u5efajwt builder\n        JWTCreator.Builder builder = JWT.create();\n\n        // payload\n        data.forEach(builder::withClaim);\n\n        // \u8fd4\u56detoken\n        String token = builder.withExpiresAt(instance.getTime()).sign(Algorithm.HMAC256(secretKey));\n\n        return token;\n    }\n\n    /**\n     * \u9a8c\u8bc1token\u5408\u6cd5\u6027\n     * @param token \u524d\u7aef\u4f20\u5165\u7684\u5f85\u68c0\u9a8c\u7684token\n     */\n    public static void checkToken(String token) {\n        JWT.require(Algorithm.HMAC256(secretKey)).build().verify(token);\n    }\n\n    /**\n     * \u83b7\u53d6token\u4fe1\u606f\n     * @param token\n     * @return\n     */\n    public static DecodedJWT getTokenInfo(String token) {\n        return JWT.require(Algorithm.HMAC256(secretKey)).build().verify(token);\n    }\n\n    /**\n     * \u6d4b\u8bd5\u6848\u4f8b\n     * @param args\n     */\n    public static void main(String[] args) {\n        // =============================\u751f\u6210JWTToken==============================\n\n        // \u8bbe\u7f6ejwt\u7684\u8f7d\u8377\n        // \u6ce8\u610fvalue\u7684\u7c7b\u578b\u662fstring\n        Map&lt;String, String&gt; data = new HashMap&lt;&gt;();\n        data.put(\"id\", \"1\");\n        data.put(\"name\", \"lhl\");\n        // \u751f\u6210JWT\u4ee4\u724c\uff0c\u6709\u6548\u65f6\u95f4\u5355\u4f4d\uff1a\u79d2\n        String token = JWTUtil.getToken(data, 7 * 24 * 3600);\n\n        // ==============================\u9a8c\u8bc1JWTToken=============================\n\n        // \u8fd4\u56de\u7ed9\u524d\u7aef\u7684\u54cd\u5e94\n        ResponseResult responseResult = null;\n        try {\n            JWTUtil.checkToken(token);\n            responseResult = ResponseResult.success();\n        } catch (SignatureVerificationException e) {\n            e.printStackTrace();\n            responseResult = ResponseResult.fail(\"\u65e0\u6548\u7b7e\u540d\uff01\");\n        } catch (TokenExpiredException e) {\n            e.printStackTrace();\n            responseResult = ResponseResult.fail(\"token\u8fc7\u671f\");\n        } catch (AlgorithmMismatchException e) {\n            e.printStackTrace();\n            responseResult = ResponseResult.fail(\"token\u7b97\u6cd5\u4e0d\u4e00\u81f4\");\n        } catch (Exception e) {\n             e.printStackTrace();\n            responseResult = ResponseResult.fail(\"token\u9519\u8bef\");\n        }\n\n        // \u89e3\u6790JWT\u4ee4\u724c\u4e2d\u7684\u4fe1\u606f\n        DecodedJWT tokenInfo = JWTUtil.getTokenInfo(token);\n\n        System.out.println(\"jwt\u4ee4\u724c\u5185\u5bb9\uff1a\" + tokenInfo);\n        System.out.println(\"\u8f7d\u8377\u5185\u5bb9\uff1a\" + new String(Base64.getDecoder().decode(tokenInfo.getPayload()), StandardCharsets.UTF_8));\n        // \u83b7\u53d6\u6570\u636e\u65f6\uff0c\u5148\u8c03\u7528asString\u8f6c\u6210\u5b57\u7b26\u4e32\uff0c\u518d\u8fdb\u884c\u5176\u4ed6\u64cd\u4f5c\uff01\n        System.out.println(\"id=\" + tokenInfo.getClaim(\"id\").asString());\n        System.out.println(\"\u8fc7\u671f\u65f6\u95f4\uff1a\" + tokenInfo.getExpiresAt());\n\n        // \u8fd4\u56deresponseResult\u7ed9\u524d\u7aef\n        // return responseResult;\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/sprintboot%20JWT/#jwt","title":"JWT\u7ed3\u5408\u62e6\u622a\u5668","text":""},{"location":"Java/SpringBoot/sprintboot%20%E8%B7%A8%E5%9F%9F/","title":"SpringBoot  \u8de8\u57df","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/sprintboot%20%E8%B7%A8%E5%9F%9F/#_1","title":"\u8de8\u57df","text":"<p>\u590d\u5236\u4ee5\u4e0b\u4ee3\u7801\u5373\u53ef\u3002</p> <p>\u5efa\u8bae\u5b58\u653e\u8def\u5f84\uff1a<code>/src/main/com/\u9879\u76ee\u540d/\u6a21\u5757\u540d/config/CorsConfig</code>\u3002</p> <pre><code>package com.lee.blog.config;\n\nimport org.springframework.context.annotation.Configuration;\n\nimport javax.servlet.*;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\n\n@Configuration\npublic class CorsConfig implements Filter {\n    @Override\n    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {\n        HttpServletResponse response = (HttpServletResponse) res;\n        HttpServletRequest request = (HttpServletRequest) req;\n\n        // \u8bf7\u6c42\u4e2d\u5305\u542bOrigin\u5b57\u6bb5\u7684\uff0c\u80af\u5b9a\u662f\u8de8\u57df\u8bf7\u6c42\u3002\u5e76\u4e14Origin\u7684\u503c\u5c31\u662f\u8bf7\u6c42\u6765\u6e90\n        String origin = request.getHeader(\"Origin\");\n        if(origin != null) {\n            // Access-Control-Allow-Origin \u7528\u4e8e\u6307\u5b9a\u5141\u8bb8\u54ea\u4e9b\u6e90\uff08origin\uff09\u8bbf\u95ee\u901a\u8fc7 HTTP \u8bf7\u6c42\u6240\u8fd4\u56de\u7684\u8d44\u6e90\u3002\n            response.setHeader(\"Access-Control-Allow-Origin\", origin);\n        }\n\n        String headers = request.getHeader(\"Access-Control-Request-Headers\");\n        if (headers != null) {\n            response.setHeader(\"Access-Control-Allow-Headers\", headers);\n            response.setHeader(\"Access-Control-Expose-Headers\", headers);\n        }\n\n        response.setHeader(\"Access-Control-Allow-Methods\", \"*\");\n        response.setHeader(\"Access-Control-Max-Age\", \"3600\");\n        response.setHeader(\"Access-Control-Allow-Credentials\", \"true\");\n\n        chain.doFilter(request, response);\n    }\n\n    @Override\n    public void init(FilterConfig filterConfig) {\n\n    }\n\n    @Override\n    public void destroy() {\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/vo2dto%E6%8F%92%E4%BB%B6/","title":"vo2dto\u63d2\u4ef6","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/vo2dto%E6%8F%92%E4%BB%B6/#_1","title":"\u5b9e\u6218\u6848\u4f8b","text":"<pre><code>// \u6211\u4eec\u60f3\u8981\u5c06user\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\u62f7\u8d1d\u7ed9userVO\n// \u9996\u5148\u590d\u5236\u5bf9\u8c61\u3010User user\u3011\uff0c\u6ce8\u610f\u540c\u65f6\u8981\u590d\u5236\u5bf9\u8c61\u7684\u7c7b\u578b\u3002\nUser user = new User();\n// \u7136\u540e\u952e\u76d8\u7684\u5149\u6807\u653e\u5728\u5355\u8bcduserVO\u4e0a\uff0c\u6309 Alt + Ins\n// \u70b9\u51fb vo2dto \u9009\u9879 \u5373\u53ef\uff01\nUserVO userVO = new UserVO();\n</code></pre>"},{"location":"Java/SpringBoot/%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C/","title":"\u53c2\u6570\u6821\u9a8c","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C/#_2","title":"\u80cc\u666f","text":"<p>\u9759\u6001\u6821\u9a8c</p> <p>\u524d\u7aef\u5411controller\u5c42\u4f20\u5165\u53c2\u6570\u65f6\uff0cSpring\u6846\u67b6\u80fd\u591f\u5c06\u53c2\u6570\u8f6c\u6362\u6210\u5bf9\u8c61\u3002\u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528<code>validation</code>\u5de5\u5177\u6821\u9a8c\u5bf9\u8c61\u5c5e\u6027\u7684\u5408\u6cd5\u6027\u3002\u4f8b\u5982\uff1a\u7528\u6237\u7684\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a\uff0c\u5e74\u9f84\u4e0d\u80fd\u5927\u4e8e200\u5c81\uff0c\u5bc6\u7801\u81f3\u5c11\u5305\u542b\u5927\u5c0f\u5199\u5b57\u6bcd\u548c\u6570\u5b57\u3002</p> <p>\u52a8\u6001\u6821\u9a8c</p> <p>\u6709\u4e9b\u6821\u9a8c\u89c4\u5219\u65f6\u52a8\u6001\u53d8\u5316\u7684\u3002\u4f8b\u5982\uff1a\u7528\u6237\u501f\u82b1\u5457\u65f6\uff0c\u5982\u679c\u7528\u6237\u88ab\u652f\u4ed8\u5b9d\u62c9\u5165\u9ed1\u540d\u5355\uff0c\u5219\u65e0\u6cd5\u53d6\u94b1\u3002\u9ed1\u540d\u5355\u4fe1\u606f\u5b58\u653e\u5728\u6570\u636e\u5e93\u4e2d\uff0c\u56e0\u6b64\u6821\u9a8c\u89c4\u5219\u4e0d\u80fd\u5199\u201c\u6b7b\u201d\u3002</p> <p>\u52a8\u6001\u6821\u9a8c\u5199\u6cd5\u7075\u6d3b\uff0c\u56fa\u7f51\u4e0a\u6ca1\u6709\u6bd4\u8f83\u89c4\u8303\u7684\u4e00\u6574\u5957\u6d41\u7a0b\u3002</p>"},{"location":"Java/SpringBoot/%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C/#demo","title":"\u9759\u6001\u6821\u9a8c\u7b80\u5355demo","text":"<ol> <li>\u5f15\u5165\u4f9d\u8d56\u3002</li> </ol> <pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre> <ol> <li>\u4f7f\u7528\u81ea\u5e26\u7684\u6821\u9a8c\u6ce8\u89e3\uff0c\u81ea\u5df1\u51b3\u5b9a\u4f55\u65f6\u6821\u9a8c\u3002</li> </ol> <pre><code>import lombok.Data;\nimport org.hibernate.validator.constraints.Range;\n\nimport javax.validation.ConstraintViolation;\nimport javax.validation.Validation;\nimport javax.validation.Validator;\nimport javax.validation.constraints.NotBlank;\nimport java.util.Set;\n\n@Data\nclass Student {\n    @Range(min = 0, max = 200)\n    private Integer age;\n\n    @NotBlank\n    private String name;\n\n    // \u5d4c\u5957\u5bf9\u8c61\u6821\u9a8c\u9700\u8981@valid\u6ce8\u89e3\n}\n\npublic class MainTest {\n    public static void main(String[] args) {\n        Validator validator = Validation.buildDefaultValidatorFactory().getValidator();\n        Student student = new Student();\n        student.setName(\"\");\n        student.setAge(1000);\n        // validate\u51fd\u6570\u7684\u5982\u53c2\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u800c\u4e0d\u662f\u6570\u7ec4\uff01\n        Set&lt;ConstraintViolation&lt;Student&gt;&gt; violations = validator.validate(student);\n        for (ConstraintViolation&lt;Student&gt; violation : violations) {\n            System.out.println(violation);\n        }\n    }\n}\n</code></pre> <p>\u5e38\u7528\u6ce8\u89e3\uff1a</p> \u6ce8\u89e3 \u529f\u80fd @NotNull \u4e0d\u80fd\u4e3anull\uff0c\u53ef\u4ee5\u662f\u7a7a @NotEmpty \u4e0d\u80fd\u4e3anull\uff0c\u96c6\u5408\u3001\u6570\u7ec4\u3001map\u7b49size()\u4e0d\u80fd\u4e3a0\uff1b\u5b57\u7b26\u4e32trim()\u540e\u53ef\u4ee5\u7b49\u4e8e\u201c\u201d @NotBlank \u5b57\u7b26\u4e32\u4e0d\u80fd\u4e3anull,\u5b57\u7b26\u4e32trim()\u540e\u4e5f\u4e0d\u80fd\u7b49\u4e8e\u201c\u201d @Range \u503c\u5fc5\u987b\u5728\u6307\u5b9a\u8303\u56f4\u5185 @Digits \u7528\u4e8eBigDecimal\u5b57\u6bb5\uff0cinteger\u8868\u793a\u6574\u6570\u4f4d\u6570\uff0cfraction\u8868\u793a\u5c0f\u6570\u4f4d\u6570 <ol> <li>\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u6821\u9a8c\u6ce8\u89e3\u548c\u6821\u9a8c\u89c4\u5219\u3002\u4e0d\u8fc7\u6211\u8ba4\u4e3a95%\u7684\u60c5\u51b5\u4e0b\u4f7f\u7528\u81ea\u5e26\u7684\u6821\u9a8c\u6ce8\u89e3\u5373\u53ef\u3002\u56fa\u4e0d\u5c55\u793a\u81ea\u5b9a\u4e49\u9759\u6001\u6821\u9a8c\u7684\u5b9e\u73b0\u3002</li> </ol>"},{"location":"Java/SpringBoot/%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C/#_3","title":"\u9759\u6001\u6821\u9a8c\u2014\u2014\u5b9e\u6218","text":"<ol> <li>\u5f15\u5165validation\u4f9d\u8d56\u3002</li> </ol> <pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre> <ol> <li>\u5b9a\u4e49\u5b9e\u4f53\u7c7b\uff0c\u5e76\u8bbe\u5b9a\u53c2\u6570\u7684\u6821\u9a8c\u89c4\u5219\u3002</li> </ol> <pre><code>import lombok.Data;\nimport org.hibernate.validator.constraints.Range;\nimport javax.validation.constraints.Email;\nimport javax.validation.constraints.NotBlank;\nimport javax.validation.constraints.NotNull;\nimport javax.validation.constraints.Pattern;\n\n\n@Data\npublic class User {\n    @NotNull(message = \"\u7528\u6237id\u4e0d\u80fd\u4e3a\u7a7a\")\n    private Integer id;\n\n    @NotBlank(message = \"\u7528\u6237\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a\u5b57\u7b26\u4e32\")\n    private String name;\n\n    @Pattern(\n            regexp = \"^[a-z]+$\",\n            message = \"\u5bc6\u7801\u5fc5\u987b\u662f\u5c0f\u5199\u82f1\u6587\u5b57\u6bcd\"\n    )\n    @NotNull(message = \"\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a\")\n    private String password;\n\n    @Range(min = 0, max = 150, message = \"\u5e74\u9f84\u53ea\u80fd\u57280-150\u5c81\")\n    private Integer age;\n\n    @Email\n    private String email;\n\n    @Override\n    public String toString() {\n        return \"User{\" +\n                \"id=\" + id +\n                \", name='\" + name + '\\'' +\n                \", password='\" + password + '\\'' +\n                \", age=\" + age +\n                \", email='\" + email + '\\'' +\n                '}';\n    }\n}\n</code></pre> <ol> <li>controller\u5c42\u63a5\u6536\u53c2\u6570</li> </ol> <pre><code>package com.lee.myvalidator.controller;\n\nimport com.lee.myvalidator.domain.pojo.User;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport javax.validation.Valid;\n\n\n@RestController\n@RequestMapping\npublic class IndexController {\n\n    @RequestMapping(\"/index\")\n    public String index(@RequestBody @Valid User user) {\n        return user.toString();\n    }\n}\n</code></pre> <ol> <li>\u524d\u7aef\u53d1\u9001POST\u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u4e2d\u643a\u5e26\u53c2\u6570\u3002</li> </ol> <pre><code>{\n    \"id\": 1,\n    \"name\": \"\",\n    \"age\": 120,\n    \"password\": \"lhl1\",\n    \"email\": \"666@lhl.com\"\n}\n</code></pre> <ol> <li>\u4e4b\u540e\u5c31\u80fd\u81ea\u52a8\u6821\u9a8c\u4fe1\u606f\u4e86\u3002</li> </ol>"},{"location":"Java/SpringBoot/%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C/#_4","title":"\u5207\u9762\u4e2d\u5b9e\u73b0\u9759\u6001\u6821\u9a8c","text":"<ol> <li>\u5f15\u5165\u4f9d\u8d56\uff1a</li> </ol> <p>```xml     org.springframework.boot spring-boot-starter-web <pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n    &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre> <p>    ```</p> <ol> <li>\u5b9a\u4e49\u5207\u9762\uff1a</li> </ol> <p>```java    package com.lee.demo.aspect;</p> <p>import org.aspectj.lang.ProceedingJoinPoint;    import org.aspectj.lang.annotation.Around;    import org.aspectj.lang.annotation.Aspect;    import org.aspectj.lang.annotation.Pointcut;    import org.springframework.stereotype.Component;</p> <p>import javax.validation.ConstraintViolation;    import javax.validation.Validation;    import javax.validation.Validator;    import java.util.Set;</p> <p>/     * <p>     *     * </p>     *     * @author \u6653\u9f99coding     * @version \u6653\u9f99coding.java v1.0 2023/8/14 21:22 \u6653\u9f99coding Exp $     /    @Aspect    @Component    public class CommonAspect {        @Pointcut(\"(execution( com.lee.demo.controller..*(..)))\")        public void pointCut() {</p> <pre><code>   }\n\n   private static Validator validator = Validation.buildDefaultValidatorFactory().getValidator();\n\n   @Around(\"pointCut()\")\n   public Object doPointCut(ProceedingJoinPoint joinPoint) throws Throwable {\n       Object[] args = joinPoint.getArgs();\n       // \u9759\u6001\u6821\u9a8c\n       Set&lt;ConstraintViolation&lt;Object&gt;&gt; violations = validator.validate(args[0]);\n       for (ConstraintViolation&lt;Object&gt; violation : violations) {\n           System.out.println(violation.getMessage());\n       }\n       Object result = joinPoint.proceed();\n       return result;\n   }\n</code></pre> <p>}    ```</p> <ol> <li>\u4e3a\u4ec0\u4e48\u8981\u5c06\u9759\u6001\u6821\u9a8c\u7684\u903b\u8f91\u5199\u5728\u5207\u9762\u4e2d\uff1f</li> </ol> <p>\u56e0\u4e3a\u5207\u9762\u4e2d\u83b7\u53d6\u6821\u9a8c\u4fe1\u606f\u540e\u53ef\u4ee5\u505a\u66f4\u591a\u64cd\u4f5c\u3002</p>"},{"location":"Java/SpringBoot/%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C/#_5","title":"\u52a8\u6001\u6821\u9a8c","text":""},{"location":"Java/SpringBoot/%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C/#_6","title":"\u80cc\u666f","text":"<p>\u5bf9\u4e8e\u201c\u67e5\u8be2\u7528\u6237\u662f\u5426\u5728\u9ed1\u540d\u5355\u4e2d\u201d\u8fd9\u79cd\u9700\u8981\u6821\u9a8c\u7684\u573a\u666f\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u5728\u4ee3\u7801\u4e2d\u3002\u4f2a\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>String Username = user.getUsername();\nif (BlackList.blackList.contains(username)) {\n    // \u7528\u6237\u5728\u9ed1\u540d\u5355\u4e2d\uff0c\u963b\u6b62\u63a5\u4e0b\u6765\u7684\u6b65\u9aa4\n    return;\n}\n</code></pre> <p>\u4f46\u662f\u5f53\u7cfb\u7edf\u975e\u5e38\u5e9e\u5927\u7684\u65f6\u5019\u3002\u67d0\u4e9b\u51fd\u6570\u5f80\u5f80\u7ecf\u8fc7\u5341\u51e0\u4e2a\u6821\u9a8c\u624d\u80fd\u6b63\u5e38\u6267\u884c\u3002\u5f53\u6211\u4eec\u5c06\u5927\u91cf\u6821\u9a8c\u4ee3\u7801\u5199\u5165\u6b63\u5e38\u4e1a\u52a1\u4ee3\u7801\u4e2d\uff0c\u5c31\u4f1a\u5bfc\u81f4\u9879\u76ee\u96be\u4ee5\u7ef4\u62a4\u3002\u6700\u7406\u60f3\u7684\u60c5\u51b5\u662f\u5c06\u6821\u9a8c\u7684\u4ee3\u7801\u5199\u5728\u5355\u72ec\u7684\u6587\u4ef6\u4e2d\uff0c\u5e76\u4e14\u5bb9\u6613\u88ab\u627e\u5230\u3002</p>"},{"location":"Java/SpringBoot/%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C/#_7","title":"\u6280\u672f\u5b9e\u73b0","text":"<p>\u6211\u4eec\u5148\u7ea6\u5b9a\u4e00\u4e2a\u89c4\u8303\uff1a\u6240\u6709\u7684\u6821\u9a8c\u90fd\u662f\u9488\u5bf9controller\u5c42\u7684\u65b9\u6cd5\u3002\u5047\u5982<code>UserController</code>\u662f\u4e1a\u52a1\u7c7b\uff0c<code>UserControllerValidator</code>\u662f\u6821\u9a8c\u7c7b\uff0c\u4e1a\u52a1\u7c7b\u4e2d\u6709<code>String work(String info)</code>\u4e1a\u52a1\u65b9\u6cd5\u3002\u6211\u4eec\u5728\u6821\u9a8c\u7c7b\u4e2d\u6dfb\u52a0<code>void work(String info)</code>\u6821\u9a8c\u65b9\u6cd5\u3002\u5047\u5982\u6821\u9a8c\u4e0d\u901a\u8fc7\uff0c\u5219\u5728\u6821\u9a8c\u65b9\u6cd5\u4e2d\u629b\u51fa\u81ea\u5b9a\u4e49\u5f02\u5e38<code>ValidateException</code>\uff08\u7ee7\u627f<code>RuntimeException</code>\uff09\u5e76\u643a\u5e26\u6709\u6548\u7684\u5f02\u5e38\u4fe1\u606f\uff0c\u4e4b\u540e\u4fbf\u4e0d\u4f1a\u6267\u884c\u4e1a\u52a1\u7c7b\u4e2d\u7684\u4e1a\u52a1\u65b9\u6cd5\u4e86\uff0c\u5e76\u4e14\u5c06\u5f02\u5e38\u4fe1\u606f\u8fd4\u56de\u7ed9\u524d\u7aef\u3002</p> <p>\u4e3a\u4e86\u8ba9\u6821\u9a8c\u51fd\u6570\u5728\u4e1a\u52a1\u51fd\u6570\u4e4b\u524d\u6267\u884c\uff0c\u6211\u4eec\u53ef\u4ee5\u91c7\u7528AOP\u7684\u65b9\u5f0f\u5207\u5165\u4e1a\u52a1\u51fd\u6570\uff0c\u5e76\u5c06\u6821\u9a8c\u51fd\u6570\u653e\u5728\u4e1a\u52a1\u51fd\u6570\u4e4b\u524d\u3002\u90e8\u5206\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>@Around(\"pointCut()\")\npublic Object doPointCut(ProceedingJoinPoint joinPoint) throws Throwable {\n    // \u5148\u6267\u884c\u6821\u9a8c\u903b\u8f91\n    try {\n        // \u6821\u9a8c\u903b\u8f91\u4ee3\u7801\n        validate();\n    } catch(ValidateException e) {  // \u81ea\u5b9a\u4e49\u6821\u9a8c\u5931\u8d25\u65f6\uff0c\u4f1a\u6267\u884c\u8fd9\u6837\u7684\u4ee3\u7801\n        // \u5982\u679c\u629b\u51fa\u5f02\u5e38\uff0c\u5219\u5411\u524d\u7aef\u8fd4\u56de\u9519\u8bef\u4fe1\u606f\n        return \"\u672a\u901a\u8fc7\u52a8\u6001\u6821\u9a8c\uff01\";\n    }\n    // \u518d\u6267\u884c\u4e1a\u52a1\u903b\u8f91\n    return joinPoint.proceed();\n}\n</code></pre> <p>\u5207\u9762\u6821\u9a8c\u51fd\u6570<code>validate</code>\u4e2d\u7684\u903b\u8f91\u5982\u4e0b\uff1a</p> <ol> <li> <p>\u901a\u8fc7\u5f53\u524d\u4e1a\u52a1\u7c7b\u540d+Validator\u53ef\u4ee5\u5f97\u5230\u6821\u9a8c\u7c7b\u7684beanName\uff0c\u518d\u6839\u636ebeanName\u4eceSpring\u5bb9\u5668\u4e2d\u83b7\u53d6\u6821\u9a8c\u7c7b\u6821\u9a8c\u7c7b\u7684bean\u5bf9\u8c61\u3002</p> </li> <li> <p>\u5224\u65ad\u4e1a\u52a1\u7c7b\u4e2d\u7684\u65b9\u6cd5\u662f\u5426\u6709<code>@DynamicAnnotation</code>\u6ce8\u89e3\u3002\u5982\u679c\u5b58\u5728\uff0c\u5219\u6839\u636e\u4e1a\u52a1\u7c7b\u4e2d\u7684\u65b9\u6cd5\u540d\u548c\u53c2\u6570\uff0c\u83b7\u53d6\u540c\u540d\u540c\u53c2\u6570\u7684\u6821\u9a8c\u65b9\u6cd5\u5e76\u6267\u884c\uff08\u6821\u9a8c\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u59cb\u7ec8\u4e3avoid\uff09\u3002</p> </li> </ol> <p>\u4ee3\u7801\u5982\u4e0b\uff1a</p> <p>```java    private void validate(Class&lt;?&gt; clazz, Method method, Object[] args) throws Throwable {        // \u65b9\u6cd5\u4e0a\u6807\u6ce8\u7c7b@DynamicAnnotation\u624d\u4f1a\u6267\u884c\u52a8\u6001\u6821\u9a8c        DynamicValidate annotation = AnnotationUtils.findAnnotation(method, DynamicValidate.class);        if (annotation == null) {            return;        }        // \u83b7\u53d6\u6821\u9a8c\u7c7b\u7684bean\u5bf9\u8c61        String validatorBeanName = StringUtils.uncapitalize(clazz.getSimpleName() + \"Validator\");        Object validatorBean = applicationContext.getBean(validatorBeanName);     // \u83b7\u53d6\u6821\u9a8c\u65b9\u6cd5        String validatorMethodName = method.getName();        // \u53ea\u80fd\u53d6\u51fapublic\u4fee\u9970\u7684\u65b9\u6cd5        Method validatorMethod = validatorBean.getClass().getMethod(validatorMethodName, method.getParameterTypes());</p> <pre><code>   // \u65b9\u6cd5\u4e2d\u7684Exception\u88abInvocationTargetException\u5305\u88f9\uff0c\u56e0\u6b64\u9700\u8981\u53d6\u51fa\u539f\u59cb\u7684Exception\u5e76\u629b\u51fa\n   try {\n       validatorMethod.invoke(validatorBean, args);\n   } catch (InvocationTargetException e) {\n       throw e.getTargetException();\n   }\n</code></pre> <p>}    ```</p> <ol> <li>\u6b64\u65f6\u6211\u4eec\u5c31\u53ef\u4ee5\u5728\u6821\u9a8c\u7c7b\u7684\u6821\u9a8c\u65b9\u6cd5\u4e2d\u5199\u6821\u9a8c\u903b\u8f91\u4e86\u3002</li> </ol> <p><code>java    @Component  // \u6ce8\u610f\uff0c\u6821\u9a8c\u7c7b\u5fc5\u987b\u4ea4\u7ed9Spring\u5bb9\u5668\u6258\u7ba1    public class UserControllerValidator {        // \u5fc5\u987b\u7528public\u4fee\u9970        public void work(User user) {            String username = user.getUsername();            if (BlackList.blackList.contains(username)) {                throw new ValidateException(501, \"\u7528\u6237\u65e0\u6743\u9650\");            }        }    }</code></p> <ol> <li>\u6821\u9a8c\u65b9\u6cd5\u662f\u4e1a\u52a1\u5f3a\u8026\u5408\u7684\uff0c\u4f46\u662f\u6821\u9a8c\u65b9\u6cd5\u4e2d\u7684\u5177\u4f53\u6821\u9a8c\u52a8\u4f5c\u5c3d\u53ef\u80fd\u4e0e\u4e1a\u52a1\u5206\u79bb\uff0c\u901a\u5e38\u6211\u4eec\u5c06\u4e00\u4e2a\u6821\u9a8c\u52a8\u4f5c\u62bd\u79bb\u6210\u4e00\u4e2a\u6821\u9a8cmodule\u3002\u6bd4\u5982\u4e0a\u8ff0\u82b1\u5457\u6848\u76ee\u7684\u662f\u5224\u65ad\u7528\u6237\u662f\u5426\u53ef\u4ee5\u6b63\u5e38\u501f\u82b1\u5457\uff0c\u4f46\u662f\u201c\u5f53\u7528\u6237\u5904\u4e8e\u9ed1\u540d\u5355\u65f6\u89e6\u53d1\u6821\u9a8c\u201d\u7684\u52a8\u4f5c\u53ef\u4ee5\u63d0\u6210\u4e00\u4e2amodule\u3002\u5f53\u7528\u6237\u4f7f\u7528\u652f\u4ed8\u5b9d\u7684\u5176\u4ed6\u91d1\u878d\u4e1a\u52a1\u65f6\uff0c\u4e5f\u53ef\u4ee5\u6267\u884c\u8be5module\u3002\u90a3\u4e48\u7b2c3\u6b65\u7684\u4ee3\u7801\u53ef\u4ee5\u5199\u4e3a\uff1a</li> </ol> <p><code>java    @Component    public class UserControllerValidator {        @Resource        private BlackListUserValidateModule blackListUserValidateModule;        public void useHuaBei(User user) {            String username = user.getUsername();            blackListUserValidateModule.validate(username);        }    }</code></p> <p><code>java    @Component    public class BlackListUserValidateModule {        public void validate(String username) {            if (BlackList.blackList.contains(username)) {                throw new ValidateException(501, \"\u7528\u6237\u5728\u9ed1\u540d\u5355\u4e0a\uff0c\u65e0\u64cd\u4f5c\u6743\u9650\");            }        }    }</code></p> <ol> <li>\u5c06\u6821\u9a8c\u52a8\u4f5c\u62bd\u79bb\u4e3amodule\u4e5f\u6709\u522b\u7684\u597d\u5904\uff0c\u53ef\u4ee5\u65b9\u4fbf\u975e\u963b\u585e\u6821\u9a8c\u7684\u5904\u7406\u3002\uff08\u540e\u9762\u4f1a\u8bb2\uff09</li> </ol>"},{"location":"Java/SpringBoot/%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C/#_8","title":"\u52a8\u6001\u975e\u963b\u585e\u6821\u9a8c","text":""},{"location":"Java/SpringBoot/%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C/#_9","title":"\u80cc\u666f","text":"<p>\u52a8\u6001\u975e\u963b\u585e\u6821\u9a8c\u5c5e\u4e8e\u52a8\u6001\u6821\u9a8c\uff0c\u5b83\u9002\u7528\u4e8e\u4ee5\u4e0b\u573a\u666f\uff1a</p> <p>\u5047\u5b9a\u7528\u6237\u501f\u82b1\u5457\uff0c\u5f53\u501f\u94b1\u91d1\u989d\u8d85\u8fc71000\u5143\u65f6\uff0c\u6bcf\u6b21\u501f\u94b1\u65f6\u82b1\u5457\u90fd\u4f1a\u201c\u63d0\u793a\u201d\u7528\u6237\u501f\u6b3e\u592a\u591a\uff0c\u6b64\u65f6\u524d\u7aef\u5c55\u793a\u4e00\u4e2a\u5f39\u6846\uff0c\u5f39\u6846\u4e2d\u6709\u201c\u7ee7\u7eed\u501f\u94b1\u201d\u548c\u201c\u653e\u5f03\u501f\u94b1\u201d\u4e24\u4e2a\u6309\u94ae\u3002\u5982\u679c\u7528\u6237\u6267\u610f\u501f\u94b1\uff0c\u5219\u4ecd\u7136\u53ef\u4ee5\u501f\u94b1\u6210\u529f\u3002</p> <p>\u66f4\u8fdb\u4e00\u6b65\uff0c\u4e00\u4e2a\u64cd\u4f5c\u4e2d\u53ef\u80fd\u5305\u542b\u591a\u79cd\u975e\u963b\u585e\u6821\u9a8c\u3002\u6bd4\u5982\u82b1\u5457\u53ef\u80fd\u8fd8\u6709\u4e00\u79cd\u975e\u963b\u585e\u6821\u9a8c\u89c4\u5219\uff1a\u5f53\u7528\u623710\u5929\u4e4b\u7c7b\u6ca1\u6709\u8fd8\u94b1\u884c\u4e3a\u65f6\uff0c\u6bcf\u6b21\u53d6\u94b1\u90fd\u4f1a\u63d0\u793a\u7528\u6237\u201c\u5c3d\u5feb\u8fd8\u94b1\u201d\u3002\u6b64\u65f6\u524d\u7aef\u5c55\u793a\u4e00\u4e2a\u5f39\u6846\uff0c\u5f39\u6846\u4e2d\u6709\u201c\u7ee7\u7eed\u501f\u94b1\u201d\u548c\u201c\u5148\u8fd8\u94b1\u201d\u4e24\u4e2a\u6309\u94ae\u3002\u5982\u679c\u7528\u6237\u6267\u610f\u501f\u94b1\uff0c\u5219\u4ecd\u7136\u53ef\u4ee5\u501f\u94b1\u6210\u529f\u3002</p> <p>\u5f53\u7528\u6237\u7684\u4e00\u4e2a\u64cd\u4f5c\u89e6\u53d1\u591a\u4e2a\u975e\u963b\u585e\u6821\u9a8c\u65f6\uff0c\u524d\u7aef\u4f1a\u591a\u6b21\u5f39\u6846\uff0c\u4e5f\u5c31\u662f\u8bf4\u540e\u7aef\u9700\u8981\u4e00\u6b21\u6027\u6355\u83b7\u6240\u6709\u7684\u5f02\u5e38\uff0c\u800c\u4e0d\u80fd\u6355\u83b7\u4e00\u4e2a\u5f02\u5e38\u540e\u5c31\u4e2d\u65ad\u6267\u884c\u3002</p> <p>\u8fd9\u79cd\u6821\u9a8c\u662f\u4e00\u79cd\u63d0\u793a\u4fe1\u606f\uff0c\u800c\u4e0d\u662f\u4e00\u79cd\u5f3a\u5236\u63aa\u65bd\u3002\u56e0\u6b64\u540d\u5b57\u4e2d\u5305\u542b\u201c\u975e\u963b\u585e\u201d\u3002</p>"},{"location":"Java/SpringBoot/%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C/#_10","title":"\u6280\u672f\u5b9e\u73b0","text":"<p>\u6dfb\u52a0\u65b0\u7684\u5207\u9762\uff0c\u6a2a\u5207\u6240\u6709<code>xxxNonBlockValidModule</code>\u7684<code>validate</code>\u65b9\u6cd5\u3002</p> <p>\u4e3a\u4ec0\u4e48\u975e\u963b\u585e\u6821\u9a8c\u7684\u5207\u9762\u4e0d\u80fd\u76f4\u63a5\u5207\u4e1a\u52a1\u7c7b\u5462\uff1f\u5047\u5b9a\u76f4\u63a5\u5207\u4e1a\u52a1\u7c7b\uff0c\u5982\u679c\u4e1a\u52a1\u7c7b\u4e2d\u7684\u67d0\u4e00\u4e2a<code>module</code>\u62a5\u9519\uff0c\u5219\u4f1a\u4e2d\u65ad\u6267\u884c\uff0c\u8fd9\u6837\u5c31\u4e0d\u80fd\u4e00\u6b21\u6027\u83b7\u53d6\u6240\u6709\u975e\u963b\u585e\u6821\u9a8c\u4fe1\u606f\u4e86\u3002</p> <p>\u5982\u679c\u6211\u4eec\u5207<code>validmodule</code>\uff0c\u5f53<code>validmodule</code>\u629b\u51fa\u5f02\u5e38\u65f6\uff0c\u5e76\u4e0d\u4f1a\u5f71\u54cd\u5176\u4ed6<code>validmodule</code>\u7684\u6267\u884c\u3002</p> <p>\u5f53\u6211\u4eec\u6355\u83b7\u5230\u975e\u963b\u585e\u6821\u9a8c\u65f6\uff0c\u5e94\u8be5\u5c06\u5f02\u5e38\u4fe1\u606f\u653e\u5728\u4e00\u4e2a\u5c5e\u4e8e\u5f53\u524d\u8bf7\u6c42\u7684\u5168\u5c40\u53d8\u91cf\u4e2d\uff0c\u4e5f\u5373\u901a\u8fc7ThreadLocal\u5bf9\u8c61\u5c06\u5f02\u5e38\u4fe1\u606f\u5199\u5728\u5f53\u524d\u7ebf\u7a0b\u4e2d\u3002</p>"},{"location":"Java/SpringBoot/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/","title":"\u5b9a\u65f6\u4efb\u52a1","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/#timer","title":"Timer\u6982\u8ff0","text":"<ol> <li><code>java.util.Timer</code> \u662f\u4e00\u4e2a\u5de5\u5177\u7c7b\u8ba1\u65f6\u5668\uff0c\u7528\u4e8e\u5728\u540e\u53f0\u5b50\u7ebf\u7a0b\u4e2d\u6267\u884c\u7684\u4efb\u52a1\uff0c\u53ef\u5b89\u6392\u4efb\u52a1\u6267\u884c\u4e00\u6b21\uff0c\u6216\u8005\u5b9a\u671f\u91cd\u590d\u6267\u884c\u3002 </li> <li>\u4e0e\u6bcf\u4e2a Timer \u5bf9\u8c61\u76f8\u5bf9\u5e94\u7684\u662f\u5355\u4e2a\u540e\u53f0\u7ebf\u7a0b\uff0c\u7528\u4e8e\u987a\u5e8f\u5730\u6267\u884c\u6240\u6709\u8ba1\u65f6\u5668\u4efb\u52a1\u3002\u56e0\u6b64\u53ef\u80fd\u4f1a\u51fa\u73b0\u963b\u585e\u7684\u60c5\u51b5\u3002</li> </ol>"},{"location":"Java/SpringBoot/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/#cron","title":"cron\u8868\u8fbe\u5f0f","text":"<p>cron\u8868\u8fbe\u5f0f\u7528\u4e8e\u8bbe\u8ba1\u5b9a\u65f6\u4efb\u52a1\u7684\u6267\u884c\u7b56\u7565\uff0c\u53ef\u4ee5\u53c2\u8003\u8fd9\u4e2a\u6559\u7a0b\u3002</p>"},{"location":"Java/SpringBoot/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/#spring-boottimer","title":"Spring Boot\u4e2d\u4f7f\u7528Timer","text":"<p>\u901a\u5e38\u6211\u4eec\u5c06\u5b9a\u65f6\u4efb\u52a1\uff08\u7c7b+\u51fd\u6570\uff09\u653e\u5728\u4e00\u4e2a\u914d\u7f6e\u7c7b\u91cc\u9762\u3002</p> <pre><code>package com.lee.schedule.task;\n\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.scheduling.annotation.EnableScheduling;\nimport org.springframework.scheduling.annotation.Scheduled;\n\n@Configuration\n@EnableScheduling\npublic class UpdateInfo {\n    @Scheduled(cron = \"0 0 12 * * ?\")\n    public void task() {\n        System.out.println(\"\u6bcf\u5929\u4e2d\u534812\u70b9\u6267\u884c\u4e00\u6b21\");\n    }\n}\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u4e2d\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5c06\u5b9a\u65f6\u4efb\u52a1\u653e\u5728task\u51fd\u6570\u4e2d\u5373\u53ef\u3002</p>"},{"location":"Java/SpringBoot/%E5%B8%B8%E8%A7%81%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/","title":"\u5e38\u89c1\u6570\u636e\u6a21\u578b","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/%E5%B8%B8%E8%A7%81%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/#_2","title":"\u7528\u6237\u7c7b","text":"<p>PO\uff1a</p> <pre><code>Long uId;  // \u7528\u6237ID\nString username;  // \u7528\u6237\u540d\nString password;  // \u767b\u5f55\u5bc6\u7801\nString photoImg;  // \u5934\u50cfURL\nString profile;  // \u4e2a\u4eba\u7b80\u4ecb\nboolean hasDeleted;  // \u7528\u6237\u662f\u5426\u6ce8\u9500\nDateTime createTime;  // \u7528\u6237\u521b\u5efa\u65f6\u95f4\nDateTime deletedTime;  // \u7528\u6237\u4e0a\u6b21\u6ce8\u9500\u65f6\u95f4\nInteger power;  // \u7528\u6237\u6743\u9650\nInteger followerCount;  // \u7c89\u4e1d\u6570\nInteger thumbsUpCount;  // \u88ab\u70b9\u8d5e\u6570\nInteger starsCount;  // \u88ab\u6536\u85cf\u6570\n// ......\n</code></pre> <p>VO\uff1a</p> <pre><code>Long uId;  // \u7528\u6237ID\nString username;  // \u7528\u6237\u540d\nString photoImg;  // \u5934\u50cfURL\nString profile;  // \u4e2a\u4eba\u7b80\u4ecb\nInteger followerCount;  // \u7c89\u4e1d\u6570\nInteger thumbsUpCount;  // \u88ab\u70b9\u8d5e\u6570\nInteger starsCount;  // \u88ab\u6536\u85cf\u6570\n// ......\n</code></pre>"},{"location":"Java/SpringBoot/%E5%B8%B8%E8%A7%81%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/#_3","title":"\u6587\u7ae0","text":"<p>PO\uff1a</p> <pre><code>Long pId;  // \u6587\u7ae0ID\nLong uId;  // \u53d1\u5e03\u8005ID\nString title;  // \u6587\u7ae0\u6807\u9898\nString content;  // \u6587\u7ae0\u5185\u5bb9\nboolean hasDeleted;  // \u6587\u7ae0\u662f\u5426\u88ab\u5220\u9664\nDateTime createTime;  // \u6587\u7ae0\u53d1\u5e03\u65f6\u95f4\nInteger thumbsUp;  // \u70b9\u8d5e\u6570\nInteger viewCount;  // \u6d4f\u89c8\u6570\nInteger star;  // \u6536\u85cf\u6570\nString ip;  // \u53d1\u5e03IP\nString ipArea;  // IP\u5c5e\u5730\n// ......\n</code></pre> <p>VO\uff1a</p> <pre><code>Long pId;  // \u6587\u7ae0ID\nString username;  // \u53d1\u5e03\u8005\nString title;  // \u6587\u7ae0\u6807\u9898\nString content;  // \u6587\u7ae0\u5185\u5bb9\nDateTime createTime;  // \u6587\u7ae0\u53d1\u5e03\u65f6\u95f4\nInteger thumbsUp;  // \u70b9\u8d5e\u6570\nInteger viewCount;  // \u6d4f\u89c8\u6570\nInteger star;  // \u6536\u85cf\u6570\nboolean hasThumbsup;  // \u201c\u6211\u201d\u662f\u5426\u70b9\u8d5e\u8be5\u6587\u7ae0\nboolean hasStar;  // \u201c\u6211\u201d\u662f\u5426\u6536\u85cf\u8be5\u6587\u7ae0\nString ipArea;  // IP\u5c5e\u5730\n// ......\n</code></pre>"},{"location":"Java/SpringBoot/%E5%B8%B8%E8%A7%81%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/#_4","title":"\u8bc4\u8bba","text":"<p>PO\uff1a</p> <pre><code>Long cId;  // \u8bc4\u8bbaID\nLong pId;  // \u8bc4\u8bba\u6240\u5c5e\u6587\u7ae0ID\nLong uId;  // \u53d1\u5e03\u8005ID\nString content;  // \u8bc4\u8bba\u5185\u5bb9\nDateTime createTime;  // \u8bc4\u8bba\u53d1\u5e03\u65f6\u95f4\nString ip;\nString ipArea;\n</code></pre> <p>VO\uff1a</p> <pre><code>Long cId;  // \u8bc4\u8bbaID\nLong pId;  // \u8bc4\u8bba\u6240\u5c5e\u6587\u7ae0ID\nString username;  // \u53d1\u5e03\u8005\nString content;  // \u8bc4\u8bba\u5185\u5bb9\nboolean hasThumbsup;  // \u201c\u6211\u201d\u662f\u5426\u70b9\u8d5e\u8be5\u6587\u7ae0\nDateTime createTime;  // \u8bc4\u8bba\u53d1\u5e03\u65f6\u95f4\n</code></pre>"},{"location":"Java/SpringBoot/%E5%B8%B8%E8%A7%81%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B/#_5","title":"\u5546\u54c1\u7c7b","text":"<p>PO\uff1a</p> <pre><code>Long gId;  // \u5546\u54c1ID\nLong uId;  // \u53d1\u5e03\u8005ID\nString goodsName;  // \u5546\u54c1\u540d\u79f0\nString goodsDesc;  // \u5546\u54c1\u63cf\u8ff0\nDouble price;  // \u5546\u54c1\u4ef7\u683c\nboolean hasDeleted;  // \u5546\u54c1\u662f\u5426\u88ab\u5220\u9664\nDateTime createTime;  // \u5546\u54c1\u53d1\u5e03\u65f6\u95f4\nString ip;  // \u53d1\u5e03IP\nString ipArea;  // IP\u5c5e\u5730\n// ......\n</code></pre> <p>VO\uff1a</p> <pre><code>Long gId;  // \u5546\u54c1ID\nString username;  // \u53d1\u5e03\u8005\nString goodsName;  // \u5546\u54c1\u540d\u79f0\nString goodsDesc;  // \u5546\u54c1\u63cf\u8ff0\nDouble price;  // \u5546\u54c1\u4ef7\u683c\nDateTime createTime;  // \u5546\u54c1\u53d1\u5e03\u65f6\u95f4\nString ipArea;  // IP\u5c5e\u5730\n// ......\n</code></pre>"},{"location":"Java/SpringBoot/%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/","title":"\u6587\u4ef6\u4e0b\u8f7d","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/#_2","title":"\u524d\u8a00","text":"<p>\u7f51\u4e0a\u6709\u5f88\u591a\u76f8\u5173\u4ee3\u7801\uff0c\u90fd\u662f\u7528\u8f93\u5165\u6d41\u64cd\u4f5c<code>File</code>\u5bf9\u8c61\uff0c\u4f46\u662f<code>File</code>\u5bf9\u8c61\u5e76\u4e0d\u662f\u4e00\u4e2a\u5185\u5b58\u4e2d\u7684\u6570\u636e\uff0c\u800c\u6211\u4eec\u4ece\u6570\u636e\u5e93\u4e2d\u83b7\u53d6\u5230\u7684\u6587\u4ef6\u6570\u636e\u662f<code>byte[]</code>\u7c7b\u578b\uff0c\u56e0\u6b64\u4e0d\u8981\u53c2\u8003\u90a3\u4e9b\u6559\u7a0b\u3002</p>"},{"location":"Java/SpringBoot/%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/#_3","title":"\u6838\u5fc3\u4ee3\u7801","text":"<p>\u5047\u5b9a<code>paper.getPaperContent()</code>\u53ef\u4ee5\u83b7\u5f97\u4e00\u4e2a<code>byte[]</code>\u3002</p> <pre><code>package com.lee.mymail.controller;\n\nimport com.lee.mymail.pojo.Paper;\nimport com.lee.mymail.service.DownloadService;\nimport org.apache.tomcat.util.http.fileupload.IOUtils;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport javax.annotation.Resource;\nimport javax.servlet.ServletOutputStream;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.*;\nimport java.net.URLEncoder;\n\n/**\n * @author \u6653\u9f99coding\n */\n@RestController\n@RequestMapping(\"/download\")\npublic class DownloadController {\n    @Resource\n    private DownloadService downloadService;\n    @RequestMapping(\"\")\n    public String download(HttpServletResponse response) throws IOException {\n        Paper paper = downloadService.download();\n        // \u4ee5\u9644\u4ef6\u7684\u5f62\u5f0f\u4e0b\u8f7d\uff0c\u5e76\u8bbe\u7f6e\u6587\u4ef6\u540d\u7684\u7f16\u7801\u65b9\u5f0f\n        response.setHeader(\"Content-Disposition\", \"attachment;filename=\" + URLEncoder.encode(paper.getPaperName(), \"UTF-8\"));\n        // \u83b7\u53d6\u5b57\u8282\u6d41\u7684\u6570\u636e\n        InputStream is = new ByteArrayInputStream(paper.getPaperContent());\n        // \u83b7\u53d6\u54cd\u5e94\u8f93\u51fa\u6d41\n        ServletOutputStream os = response.getOutputStream();\n        IOUtils.copy(is, os);\n        IOUtils.closeQuietly(is);\n        IOUtils.closeQuietly(os);\n        return \"\u4e0b\u8f7d\u6210\u529f\";\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/%E6%97%A5%E5%BF%97/","title":"Spring Boot \u65e5\u5fd7\u5b9e\u6218","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/%E6%97%A5%E5%BF%97/#_1","title":"\u524d\u8a00","text":"<p>Java\u4e2d\uff0c\u65e5\u5fd7\u901a\u5e38\u5206\u7c7b\u65e5\u5fd7\u95e8\u9762\uff08\u63a5\u53e3\uff09\u548c\u65e5\u5fd7\u6846\u67b6\uff08\u5b9e\u73b0\uff09\u4e24\u90e8\u5206\u3002\u4f7f\u7528\u65f6\u5fc5\u987b\u9009\u62e9\u4e00\u4e2a\u65e5\u5fd7\u95e8\u9762\u548c\u65e5\u5fd7\u6846\u67b6\u642d\u914d\u5728\u4e00\u8d77\u3002</p> <p>\u65e5\u5fd7\u95e8\u9762\u901a\u5e38\u6709\uff1aslf4j\uff0cjcl......</p> <p>\u65e5\u5fd7\u6846\u67b6\u901a\u5e38\u6709\uff1alogback\uff0clog4j......</p> <p>\u901a\u5e38\u6211\u4eec\u91c7\u7528slf4j+logback\u7684\u642d\u914d\u65b9\u5f0f\u3002</p>"},{"location":"Java/SpringBoot/%E6%97%A5%E5%BF%97/#springboot","title":"SpringBoot\u4e2d\u914d\u7f6e\u65e5\u5fd7\u6846\u67b6","text":"<p>\u5728classpath:/resources\u76ee\u5f55\u4e0b\uff0c\u521b\u5efa<code>logback-spring.xml</code>\u6587\u4ef6\uff0c\u5e76\u7c98\u8d34\u4e0b\u9762\u7684\u5185\u5bb9\u3002\uff08\u4e0d\u5728yml\u4e2d\u914d\u7f6e\u65e5\u5fd7\u4fe1\u606f\u662f\u56e0\u4e3ayml\u914d\u7f6e\u7684\u529f\u80fd\u4e0d\u591f\u5f3a\u5927\u3002\uff09</p> <p>\u91cd\u8981\u914d\u7f6e\uff1a</p> <ol> <li>error\u65e5\u5fd7\u548cinfo\u65e5\u5fd7\u5206\u5f00\u5b58\u50a8\u3002</li> <li>\u6eda\u52a8\u5b58\u50a8\u65e5\u5fd7\u3002</li> </ol> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;configuration scan=\"true\" scanPeriod=\"10 seconds\"&gt;\n    &lt;!--property \u7684name\u662f\u53d8\u91cf\u7684\u540d\u79f0\uff0cvalue\u662f\u53d8\u91cf\u7684\u503c--&gt;\n    &lt;!-- \u65e5\u5fd7\u5b58\u653e\u8def\u5f84 --&gt;\n    &lt;property name=\"log.path\" value=\"logs\" /&gt;\n    &lt;!-- \u65e5\u5fd7\u8f93\u51fa\u683c\u5f0f --&gt;\n    &lt;!--%d\u8868\u793a\u65e5\u671f\uff0c%thread\u8868\u793a\u5f53\u524d\u5148\u4ece\u540d\uff0c%-5level\u8868\u793a\u4ece\u5de6\u663e\u793a5\u4e2a\u5b57\u7b26\u5bbd\u5ea6\uff0c%msg\u8868\u793a\u65e5\u5fd7\u6d88\u606f\uff0c%n\u662f\u6362\u884c\u7b26--&gt;\n    &lt;property name=\"log.pattern\" value=\"%d{HH:mm:ss.SSS} [%thread] %-5level %logger{20} - [%method,%line] - %msg%n\" /&gt;\n\n     &lt;!-- \u63a7\u5236\u53f0\u8f93\u51fa --&gt;\n     &lt;appender name=\"console\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;\n         &lt;!--\u663e\u793a\u65e5\u5fd7\u6700\u4f4e\u7ea7\u522b\uff0c\u9ed8\u8ba4\u662finfo--&gt;\n&lt;!--         &lt;filter class=\"ch.qos.logback.classic.filter.ThresholdFilter\"&gt;--&gt;\n&lt;!--             &lt;level&gt;debug&lt;/level&gt;--&gt;\n&lt;!--         &lt;/filter&gt;--&gt;\n\n        &lt;encoder&gt;\n          &lt;pattern&gt;${log.pattern}&lt;/pattern&gt;\n          &lt;!-- \u8bbe\u7f6e\u5b57\u7b26\u96c6 --&gt;\n          &lt;charset&gt;UTF-8&lt;/charset&gt;\n        &lt;/encoder&gt;\n     &lt;/appender&gt;\n\n    &lt;!-- \u7cfb\u7edfinfo\u65e5\u5fd7\u8f93\u51fa --&gt;\n    &lt;appender name=\"file_info\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"&gt;\n        &lt;!-- \u6b63\u5728\u8bb0\u5f55\u7684\u65e5\u5fd7\u6587\u6863\u7684\u8def\u5f84\u53ca\u6587\u6863\u540d --&gt;\n        &lt;file&gt;${log.path}/info/sys-info.log&lt;/file&gt;\n        &lt;!-- \u57fa\u4e8e\u65f6\u95f4\u521b\u5efa\u65e5\u5fd7\u6587\u4ef6(\u6700\u5e38\u89c1\uff0c\u5efa\u8bae\u4f7f\u7528) --&gt;\n        &lt;rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\"&gt;\n            &lt;!-- \u65e5\u5fd7\u6587\u4ef6\u540d\u683c\u5f0f --&gt;\n            &lt;fileNamePattern&gt;${log.path}/sys-info.%d{yyyy-MM-dd}.log&lt;/fileNamePattern&gt;\n            &lt;!-- \u65e5\u5fd7\u6700\u5927\u7684\u5386\u53f2 60\u5929 --&gt;\n            &lt;maxHistory&gt;60&lt;/maxHistory&gt;\n        &lt;/rollingPolicy&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;${log.pattern}&lt;/pattern&gt;\n            &lt;!-- \u8bbe\u7f6e\u5b57\u7b26\u96c6 --&gt;\n            &lt;charset&gt;UTF-8&lt;/charset&gt;\n        &lt;/encoder&gt;\n\n        &lt;filter class=\"ch.qos.logback.classic.filter.LevelFilter\"&gt;\n            &lt;!-- \u8fc7\u6ee4\u7684\u7ea7\u522b --&gt;\n            &lt;level&gt;INFO&lt;/level&gt;\n            &lt;!-- \u5339\u914d\u65f6\u7684\u64cd\u4f5c\uff1a\u63a5\u6536\uff08\u8bb0\u5f55\uff09 --&gt;\n            &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;\n            &lt;!-- \u4e0d\u5339\u914d\u65f6\u7684\u64cd\u4f5c\uff1a\u62d2\u7edd\uff08\u4e0d\u8bb0\u5f55\uff09 --&gt;\n            &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;\n        &lt;/filter&gt;\n    &lt;/appender&gt;\n\n    &lt;!-- \u7cfb\u7edferror\u65e5\u5fd7\u8f93\u51fa --&gt;\n    &lt;appender name=\"file_error\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"&gt;\n        &lt;file&gt;${log.path}/error/sys-error.log&lt;/file&gt;\n        &lt;!-- \u5faa\u73af\u653f\u7b56\uff1a\u57fa\u4e8e\u65f6\u95f4\u521b\u5efa\u65e5\u5fd7\u6587\u4ef6 --&gt;\n        &lt;rollingPolicy class=\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\"&gt;\n            &lt;!-- \u65e5\u5fd7\u6587\u4ef6\u540d\u683c\u5f0f --&gt;\n            &lt;fileNamePattern&gt;${log.path}/sys-error.%d{yyyy-MM-dd}.log&lt;/fileNamePattern&gt;\n            &lt;!-- \u65e5\u5fd7\u6700\u5927\u7684\u5386\u53f2 60\u5929 --&gt;\n            &lt;maxHistory&gt;60&lt;/maxHistory&gt;\n        &lt;/rollingPolicy&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;${log.pattern}&lt;/pattern&gt;\n            &lt;!-- \u8bbe\u7f6e\u5b57\u7b26\u96c6 --&gt;\n            &lt;charset&gt;UTF-8&lt;/charset&gt;\n        &lt;/encoder&gt;\n\n        &lt;filter class=\"ch.qos.logback.classic.filter.LevelFilter\"&gt;\n            &lt;!-- \u8fc7\u6ee4\u7684\u7ea7\u522b --&gt;\n            &lt;level&gt;ERROR&lt;/level&gt;\n            &lt;!-- \u5339\u914d\u65f6\u7684\u64cd\u4f5c\uff1a\u63a5\u6536\uff08\u8bb0\u5f55\uff09 --&gt;\n            &lt;onMatch&gt;ACCEPT&lt;/onMatch&gt;\n            &lt;!-- \u4e0d\u5339\u914d\u65f6\u7684\u64cd\u4f5c\uff1a\u62d2\u7edd\uff08\u4e0d\u8bb0\u5f55\uff09 --&gt;\n            &lt;onMismatch&gt;DENY&lt;/onMismatch&gt;\n        &lt;/filter&gt;\n    &lt;/appender&gt;\n\n    &lt;appender name=\"async_file_info\" class=\"ch.qos.logback.classic.AsyncAppender\"&gt;\n        &lt;!--  \u5f53\u961f\u5217\u7684\u5269\u4f59\u5bb9\u91cf\u5c0f\u4e8e\u8fd9\u4e2a\u9608\u503c\u5e76\u4e14\u5f53\u524d\u65e5\u5fd7level\u4e3a TRACE, DEBUG or INFO \uff0c\u5219\u4e22\u5f03\u8fd9\u4e9b\u65e5\u5fd7\u3002  --&gt;\n        &lt;discardingThreshold&gt;0&lt;/discardingThreshold&gt;\n        &lt;!--  \u66f4\u6539\u9ed8\u8ba4\u7684\u961f\u5217\u7684\u6df1\u5ea6,\u8be5\u503c\u4f1a\u5f71\u54cd\u6027\u80fd.\u9ed8\u8ba4\u503c\u4e3a256  --&gt;\n        &lt;queueSize&gt;1024&lt;/queueSize&gt;\n        &lt;!--  \u65b0\u589e\u8fd9\u884c\u4e3a\u4e86\u6253\u5370\u6808\u5806\u4fe1\u606f  --&gt;\n        &lt;includeCallerData&gt;true&lt;/includeCallerData&gt;\n        &lt;!--  \u6dfb\u52a0\u9644\u52a0\u7684appender,\u6700\u591a\u53ea\u80fd\u6dfb\u52a0\u4e00\u4e2a  --&gt;\n        &lt;appender-ref ref=\"file_info\"/&gt;\n    &lt;/appender&gt;\n    &lt;appender name=\"async_file_error\" class=\"ch.qos.logback.classic.AsyncAppender\"&gt;\n        &lt;!--  \u5f53\u961f\u5217\u7684\u5269\u4f59\u5bb9\u91cf\u5c0f\u4e8e\u8fd9\u4e2a\u9608\u503c\u5e76\u4e14\u5f53\u524d\u65e5\u5fd7level\u4e3a TRACE, DEBUG or INFO \uff0c\u5219\u4e22\u5f03\u8fd9\u4e9b\u65e5\u5fd7\u3002  --&gt;\n        &lt;discardingThreshold&gt;0&lt;/discardingThreshold&gt;\n        &lt;!--  \u66f4\u6539\u9ed8\u8ba4\u7684\u961f\u5217\u7684\u6df1\u5ea6,\u8be5\u503c\u4f1a\u5f71\u54cd\u6027\u80fd.\u9ed8\u8ba4\u503c\u4e3a256  --&gt;\n        &lt;queueSize&gt;1024&lt;/queueSize&gt;\n        &lt;!--  \u65b0\u589e\u8fd9\u884c\u4e3a\u4e86\u6253\u5370\u6808\u5806\u4fe1\u606f  --&gt;\n        &lt;includeCallerData&gt;true&lt;/includeCallerData&gt;\n        &lt;!--  \u6dfb\u52a0\u9644\u52a0\u7684appender,\u6700\u591a\u53ea\u80fd\u6dfb\u52a0\u4e00\u4e2a  --&gt;\n        &lt;appender-ref ref=\"file_error\"/&gt;\n    &lt;/appender&gt;\n    &lt;appender name=\"async_file_debug\" class=\"ch.qos.logback.classic.AsyncAppender\"&gt;\n        &lt;!--  \u5f53\u961f\u5217\u7684\u5269\u4f59\u5bb9\u91cf\u5c0f\u4e8e\u8fd9\u4e2a\u9608\u503c\u5e76\u4e14\u5f53\u524d\u65e5\u5fd7level\u4e3a TRACE, DEBUG or INFO \uff0c\u5219\u4e22\u5f03\u8fd9\u4e9b\u65e5\u5fd7\u3002  --&gt;\n        &lt;discardingThreshold&gt;0&lt;/discardingThreshold&gt;\n        &lt;!--  \u66f4\u6539\u9ed8\u8ba4\u7684\u961f\u5217\u7684\u6df1\u5ea6,\u8be5\u503c\u4f1a\u5f71\u54cd\u6027\u80fd.\u9ed8\u8ba4\u503c\u4e3a256  --&gt;\n        &lt;queueSize&gt;1024&lt;/queueSize&gt;\n        &lt;!--  \u65b0\u589e\u8fd9\u884c\u4e3a\u4e86\u6253\u5370\u6808\u5806\u4fe1\u606f  --&gt;\n        &lt;includeCallerData&gt;true&lt;/includeCallerData&gt;\n        &lt;!--  \u6dfb\u52a0\u9644\u52a0\u7684appender,\u6700\u591a\u53ea\u80fd\u6dfb\u52a0\u4e00\u4e2a  --&gt;\n        &lt;appender-ref ref=\"file_debug\"/&gt;\n    &lt;/appender&gt;\n\n    &lt;!-- \u7cfb\u7edf\u6a21\u5757\u65e5\u5fd7\u7ea7\u522b\u63a7\u5236  --&gt;\n    &lt;logger name=\"cn.xj\" level=\"info\" /&gt;\n    &lt;!-- Spring\u65e5\u5fd7\u7ea7\u522b\u63a7\u5236  --&gt;\n    &lt;logger name=\"org.springframework\" level=\"warn\" /&gt;\n\n    &lt;!--\u7cfb\u7edf\u64cd\u4f5c\u65e5\u5fd7--&gt;\n    &lt;root level=\"info\"&gt;\n        &lt;appender-ref ref=\"console\" /&gt;\n        &lt;appender-ref ref=\"async_file_info\" /&gt;\n        &lt;appender-ref ref=\"async_file_error\" /&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>"},{"location":"Java/SpringBoot/%E6%97%A5%E5%BF%97/#_2","title":"\u5b9e\u6218","text":"<p>\u5efa\u8bae\u5728RestControllerAdvice\u4e2d\u6355\u83b7\u5f02\u5e38\u5e76\u5904\u7406\u3002\u8f93\u51fa<code>log.error()</code>\u6216<code>log.info()</code>\u5373\u53ef\u5c06\u65e5\u5fd7\u8f93\u51fa\u5230\u63a7\u5236\u53f0\u548c\u672c\u5730\u6587\u4ef6\u4e2d\u3002</p> <ul> <li>\u6355\u83b7\u5f02\u5e38</li> </ul> <pre><code>@RestControllerAdvice\n@Slf4j\npublic class GlobalExceptionHandler {\n    @ExceptionHandler(value = BizException.class)\n    public String bizException(BizException e) {  // \u8fd4\u56de\u503c\u901a\u5e38\u662f\u5bf9\u8c61\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49ResponseResult\n        Map&lt;String, String&gt; userInfo = new HashMap&lt;&gt;();\n        userInfo.put(\"username\", \"lhl\");\n        // \u5148\u6253\u5370\u6587\u5b57\u9519\u8bef\u63d0\u793a\uff0c\u518d\u5c06e\u4f20\u5165error\u51fd\u6570\uff0c\u6253\u5370\u9519\u8bef\u5806\u6808\u3002\n        log.error(\"\u4e1a\u52a1\u5f02\u5e38\uff0c\u63d0\u793a\u4fe1\u606f: {}\\n\u5f53\u524d\u7528\u6237\u4fe1\u606f: {}\\n\u5f02\u5e38\u5806\u6808: \", e.getMessage(), JSONUtil.toJsonStr(userInfo), e);\n        return \"\u4e1a\u52a1\u5f02\u5e38\";\n    }\n\n    @ExceptionHandler(value = SysException.class)\n    public String sysException(SysException e) {\n        log.error(\"\u7cfb\u7edf\u5f02\u5e38\uff0c\u63d0\u793a\u4fe1\u606f: {}\", e.getMessage(), e);\n        return \"\u7cfb\u7edf\u5f02\u5e38\";\n    }\n\n    @ExceptionHandler(value = Throwable.class)\n    public String throwable(Throwable e) {\n        log.error(\"\u672a\u77e5\u5f02\u5e38\uff0c\u63d0\u793a\u4fe1\u606f: {}\", e.getMessage(), e);\n        return \"\u672a\u77e5\u5f02\u5e38\";\n    }\n}\n</code></pre> <ul> <li>\u629b\u51fa\u5f02\u5e38</li> </ul> <pre><code>// \u52a0\u5165\u6211\u4eec\u6355\u83b7\u4e86\u4e00\u4e2a\u5e95\u5c42\u5305\u629b\u51fa\u7684Exception\ntry {\n    work();  // \u5047\u5b9a\u8fd9\u662f\u5e95\u5c42\u5305\u629b\u51fa\u7684\u5f02\u5e38\n} catch (Exception e) {\n    throw new SysException(\"IPUtils ERROR\", e);  // \u81ea\u5df1\u5c01\u88c5\u4e00\u4e2a\u5f02\u5e38\uff0c\u9700\u8981\u3010\u89e3\u91ca\u5f02\u5e38\u539f\u56e0\u3011\u5e76\u3010\u643a\u5e26\u539f\u6765\u7684\u5f02\u5e38\u5bf9\u8c61\u3011\n}\n</code></pre>"},{"location":"Java/SpringBoot/%E6%97%A5%E5%BF%97/#controlleradviceaop","title":"\u8fc7\u6ee4\u5668\u3001\u62e6\u622a\u5668\u3001controlleradvice\u548caop\u7684\u6267\u884c\u987a\u5e8f","text":"<p>\u4ece\u5916\u5230\u5185\uff0c\u5206\u522b\u662f\uff1a\u8fc7\u6ee4\u5668\u3001\u62e6\u622a\u5668\u3001controlleradvice\u3001aop\u3002</p>"},{"location":"Java/SpringBoot/%E7%BE%8E%E5%9B%A2Spring%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84/","title":"\u7f8e\u56e2Spring\u9879\u76ee\u7ed3\u6784","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/%E7%BE%8E%E5%9B%A2Spring%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84/#_1","title":"\u5206\u5c42\u601d\u60f3","text":"<p>\u7f8e\u56e2\u5c06\u9879\u76ee\u4e3b\u8981\u5206\u4e3a\u8fd9\u4e9b\u6a21\u5757\uff1aapi\u3001api-impl\u3001biz\u3001common\u3001dao......\u5176\u5b9e\u548cMVC\u7684\u4e09\u5c42\u601d\u60f3\u6bd4\u8f83\u7c7b\u4f3c\u3002</p>"},{"location":"Java/SpringBoot/%E7%BE%8E%E5%9B%A2Spring%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84/#_2","title":"\u5c01\u88c5\u601d\u60f3","text":"<p>\u51fd\u6570\u7684\u53c2\u6570\u5217\u8868\u548c\u8fd4\u56de\u503c\u901a\u5e38\u4f1a\u88ab\u5c01\u88c5\u6210\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5c24\u5176\u662f\u53c2\u6570\u5217\u8868\u4e2d\u53c2\u6570\u6570\u91cf\u5927\u4e8e5\u3002</p>"},{"location":"Java/SpringBoot/%E7%BE%8E%E5%9B%A2Spring%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84/#_3","title":"\u5bf9\u8c61\u8f6c\u6362\u601d\u60f3","text":"<p>api/controller\u5c42model\u7684\u8f6c\u6362\u4f7f\u7528converter\u3002</p> <p>biz/service\u5c42model\u7684\u8f6c\u6362\u4f7f\u7528assembler\u3002</p>"},{"location":"Java/SpringBoot/%E7%BE%8E%E5%9B%A2Spring%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84/#apicontroller","title":"API/Controller\u5c42","text":""},{"location":"Java/SpringBoot/%E8%8E%B7%E5%8F%96ip%E5%9C%B0%E5%9D%80/","title":"\u83b7\u53d6ip\u5730\u5740","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/%E8%8E%B7%E5%8F%96ip%E5%9C%B0%E5%9D%80/#_1","title":"\u5199\u5728\u524d\u9762","text":"<p>ip\u5730\u5740\u4fe1\u606f\u5b58\u653e\u5728http\u8bf7\u6c42\u4e2d\u3002\u60f3\u8981\u83b7\u53d6http\u8bf7\u6c42\u4fe1\u606f\uff0c\u901a\u5e38\u8fd8\u9700\u8981\u53e6\u5916\u4e00\u4e2a\u5de5\u5177\u7c7b\u83b7\u53d6http\u8bf7\u6c42\u4fe1\u606f\u3002</p>"},{"location":"Java/SpringBoot/%E8%8E%B7%E5%8F%96ip%E5%9C%B0%E5%9D%80/#_2","title":"\u5b9e\u6218\u4ee3\u7801","text":"<p>\u83b7\u53d6ip \u5de5\u5177\u7c7b\uff1aIPUtil.java</p> <pre><code>package com.lee.getip.util;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.util.ObjectUtils;\n\nimport javax.servlet.http.HttpServletRequest;\nimport java.net.InetAddress;\nimport java.net.UnknownHostException;\n\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class IPUtil {\n    private static final Logger logger = LoggerFactory.getLogger(IPUtil.class);\n    private static final String IP_UTILS_FLAG = \",\";\n    private static final String UNKNOWN = \"unknown\";\n    private static final String LOCALHOST_IP = \"0:0:0:0:0:0:0:1\";\n    private static final String LOCALHOST_IP1 = \"127.0.0.1\";\n\n    /**\n     * \u83b7\u53d6IP\u5730\u5740\n     * &lt;p&gt;\n     * \u4f7f\u7528Nginx\u7b49\u53cd\u5411\u4ee3\u7406\u8f6f\u4ef6\uff0c \u5219\u4e0d\u80fd\u901a\u8fc7request.getRemoteAddr()\u83b7\u53d6IP\u5730\u5740\n     * \u5982\u679c\u4f7f\u7528\u4e86\u591a\u7ea7\u53cd\u5411\u4ee3\u7406\u7684\u8bdd\uff0cX-Forwarded-For\u7684\u503c\u5e76\u4e0d\u6b62\u4e00\u4e2a\uff0c\u800c\u662f\u4e00\u4e32IP\u5730\u5740\uff0cX-Forwarded-For\u4e2d\u7b2c\u4e00\u4e2a\u975eunknown\u7684\u6709\u6548IP\u5b57\u7b26\u4e32\uff0c\u5219\u4e3a\u771f\u5b9eIP\u5730\u5740\n     */\n    public static String getIpAddr(HttpServletRequest request) {\n        String ip = null;\n        try {\n            //\u4ee5\u4e0b\u4e24\u4e2a\u83b7\u53d6\u5728k8s\u4e2d\uff0c\u5c06\u771f\u5b9e\u7684\u5ba2\u6237\u7aefIP\uff0c\u653e\u5230\u4e86x-Original-Forwarded-For\u3002\u800c\u5c06WAF\u7684\u56de\u6e90\u5730\u5740\u653e\u5230\u4e86 x-Forwarded-For\u4e86\u3002\n            ip = request.getHeader(\"X-Original-Forwarded-For\");\n            if (ObjectUtils.isEmpty(ip) || UNKNOWN.equalsIgnoreCase(ip)) {\n                ip = request.getHeader(\"X-Forwarded-For\");\n            }\n            //\u83b7\u53d6nginx\u7b49\u4ee3\u7406\u7684ip\n            if (ObjectUtils.isEmpty(ip) || UNKNOWN.equalsIgnoreCase(ip)) {\n                ip = request.getHeader(\"x-forwarded-for\");\n            }\n            if (ObjectUtils.isEmpty(ip) || UNKNOWN.equalsIgnoreCase(ip)) {\n                ip = request.getHeader(\"Proxy-Client-IP\");\n            }\n            if (ObjectUtils.isEmpty(ip) || ip.length() == 0 || UNKNOWN.equalsIgnoreCase(ip)) {\n                ip = request.getHeader(\"WL-Proxy-Client-IP\");\n            }\n            if (ObjectUtils.isEmpty(ip) || UNKNOWN.equalsIgnoreCase(ip)) {\n                ip = request.getHeader(\"HTTP_CLIENT_IP\");\n            }\n            if (ObjectUtils.isEmpty(ip) || UNKNOWN.equalsIgnoreCase(ip)) {\n                ip = request.getHeader(\"HTTP_X_FORWARDED_FOR\");\n            }\n            //\u517c\u5bb9k8s\u96c6\u7fa4\u83b7\u53d6ip\n            if (ObjectUtils.isEmpty(ip) || UNKNOWN.equalsIgnoreCase(ip)) {\n                ip = request.getRemoteAddr();\n                if (LOCALHOST_IP1.equalsIgnoreCase(ip) || LOCALHOST_IP.equalsIgnoreCase(ip)) {\n                    //\u6839\u636e\u7f51\u5361\u53d6\u672c\u673a\u914d\u7f6e\u7684IP\n                    InetAddress iNet = null;\n                    try {\n                        iNet = InetAddress.getLocalHost();\n                    } catch (UnknownHostException e) {\n                        logger.error(\"getClientIp error: {}\", String.valueOf(e));\n                    }\n                    assert iNet != null;\n                    ip = iNet.getHostAddress();\n                }\n            }\n        } catch (Exception e) {\n            logger.error(\"IPUtils ERROR \", e);\n        }\n        //\u4f7f\u7528\u4ee3\u7406\uff0c\u5219\u83b7\u53d6\u7b2c\u4e00\u4e2aIP\u5730\u5740\n        if (!ObjectUtils.isEmpty(ip) &amp;&amp; ip.indexOf(IP_UTILS_FLAG) &gt; 0) {\n            ip = ip.substring(0, ip.indexOf(IP_UTILS_FLAG));\n        }\n        return ip;\n    }\n}\n</code></pre> <p>\u5b9e\u6218\u4ee3\u7801</p> <pre><code>package com.lee.getip.controller;\n\nimport com.lee.getip.util.HttpContextUtil;\nimport com.lee.getip.util.IPUtil;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport javax.servlet.http.HttpServletRequest;\nimport java.util.HashMap;\nimport java.util.Map;\n\n\n@RestController\n@RequestMapping(\"/getip\")\npublic class LoginController {\n    // \u83b7\u53d6http\u8bf7\u6c42\u4fe1\u606f\n    @Resource\n    private HttpServletRequest request;\n    @RequestMapping(\"\")\n    public Map&lt;String, Object&gt; getIp() {\n        //\u83b7\u53d6IP\u5730\u5740\n        String ipAddress = IPUtil.getIpAddr(request);\n        Map&lt;String, Object&gt; res = new HashMap&lt;&gt;();\n        res.put(\"ip\u5730\u5740\uff1a\", ipAddress);\n        return res;\n    }\n}\n</code></pre>"},{"location":"Java/SpringBoot/%E9%9D%99%E6%80%81%E6%A0%A1%E9%AA%8C%26%E5%8A%A8%E6%80%81%E6%A0%A1%E9%AA%8C/","title":"\u9759\u6001\u6821\u9a8c&amp;\u52a8\u6001\u6821\u9a8c","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/%E9%9D%99%E6%80%81%E6%A0%A1%E9%AA%8C%26%E5%8A%A8%E6%80%81%E6%A0%A1%E9%AA%8C/#_2","title":"\u9759\u6001\u6821\u9a8c","text":"<p>\u7b80\u5355\u6765\u8bf4\uff0c\u9759\u6001\u6821\u9a8c\u5c31\u662f\u4e0d\u6d89\u53ca\u903b\u8f91\u7684\u6821\u9a8c\u3002\u4e3e\u4e2a\u4f8b\u5b50\u3002</p> <pre><code>class Student {\n    // \u8bbe\u5b9aname\u7684\u957f\u5ea6\u5fc5\u987b\u5c0f\u4e8e10\u4e2a\u5b57\u7b26\n    private String name;\n    // \u8bbe\u5b9a\u5e74\u9f84\u7684\u8303\u56f4\u5728[0, 200]\n    private Integer age;\n}\n</code></pre> <p>\u9759\u6001\u6821\u9a8c\u7684\u89c4\u5219\u5199\u597d\u540e\uff0c\u5c31\u4e0d\u7528\u4fee\u6539\u3002</p>"},{"location":"Java/SpringBoot/%E9%9D%99%E6%80%81%E6%A0%A1%E9%AA%8C%26%E5%8A%A8%E6%80%81%E6%A0%A1%E9%AA%8C/#_3","title":"\u9759\u6001\u6821\u9a8c\u6846\u67b6","text":"<ol> <li>\u5f15\u5165\u4f9d\u8d56\uff1a</li> </ol> <p><code>xml    &lt;dependency&gt;        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;    &lt;/dependency&gt;</code></p> <p>\u5e38\u7528\u6ce8\u89e3\uff1a</p> \u6ce8\u89e3 \u529f\u80fd @NotNull \u4e0d\u80fd\u4e3anull\uff0c\u53ef\u4ee5\u662f\u7a7a @NotEmpty \u4e0d\u80fd\u4e3anull\uff0c\u96c6\u5408\u3001\u6570\u7ec4\u3001map\u7b49size()\u4e0d\u80fd\u4e3a0\uff1b\u5b57\u7b26\u4e32trim()\u540e\u53ef\u4ee5\u7b49\u4e8e\u201c\u201d @NotBlank \u5b57\u7b26\u4e32\u4e0d\u80fd\u4e3anull,\u5b57\u7b26\u4e32trim()\u540e\u4e5f\u4e0d\u80fd\u7b49\u4e8e\u201c\u201d @Range \u503c\u5fc5\u987b\u5728\u6307\u5b9a\u8303\u56f4\u5185 @Digits \u7528\u4e8eBigDecimal\u5b57\u6bb5\uff0cinteger\u8868\u793a\u6574\u6570\u4f4d\u6570\uff0cfraction\u8868\u793a\u5c0f\u6570\u4f4d\u6570 <p>\u4f7f\u7528\u65f6\u673a\uff1a\u8bf7\u6c42\u4f20\u5165Controller\u5c42\u65f6\uff0c\u901a\u5e38\u9700\u8981\u6821\u9a8c\u53c2\u6570\u662f\u5426\u5408\u6cd5\u3002</p>"},{"location":"Java/SpringBoot/%E9%9D%99%E6%80%81%E6%A0%A1%E9%AA%8C%26%E5%8A%A8%E6%80%81%E6%A0%A1%E9%AA%8C/#_4","title":"\u81ea\u5b9a\u4e49\u9759\u6001\u6821\u9a8c","text":""},{"location":"Java/SpringBoot/%E9%9D%99%E6%80%81%E6%A0%A1%E9%AA%8C%26%E5%8A%A8%E6%80%81%E6%A0%A1%E9%AA%8C/#_5","title":"\u52a8\u6001\u6821\u9a8c","text":"<p>\u7b80\u5355\u6765\u8bf4\uff0c\u52a8\u6001\u6821\u9a8c\u5c31\u662f\u6d89\u53ca\u903b\u8f91\u7684\u6821\u9a8c\u3002\u6bd4\u5982\u4f60\u6709\u4e00\u4e2a\u4ed3\u5e93\uff0c\u4f60\u60f3\u4ece\u4ed3\u5e93\u4e2d\u53d6\u51fa\u7269\u54c1\u65f6\uff0c\u9700\u8981\u6821\u9a8c\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <ol> <li> <p>\u4ed3\u5e93\u4e2d\u662f\u5426\u5305\u542b\u8be5\u7269\u54c1\u3002</p> </li> <li> <p>\u8be5\u7269\u54c1\u7684\u6570\u91cf\u662f\u5426\u6ee1\u8db3\u51fa\u5e93\u8981\u6c42\u3002</p> </li> </ol> <p>......</p> <p>\u4ee5\u4e0a\u6821\u9a8c\u4e0d\u5efa\u8bae\u76f4\u63a5\u5199\u5728\u4e1a\u52a1\u4ee3\u7801\u4e2d\uff0c\u800c\u662f\u4f7f\u7528\u52a8\u6001\u6821\u9a8c\u3002</p> <p>\u603b\u4e4b\uff0c\u52a8\u6001\u6821\u9a8c\u7684\u89c4\u5219\u53ef\u80fd\u4f1a\u968f\u65f6\u53d8\u5316\u3002</p>"},{"location":"Java/SpringBoot/%E6%B3%A8%E8%A7%A3/Component%E6%B3%A8%E8%A7%A3%E5%92%8CConfiguration%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%BC%82%E5%90%8C/","title":"Component\u6ce8\u89e3\u548cConfiguration\u6ce8\u89e3\u7684\u5f02\u540c","text":"<p>[toc]</p>"},{"location":"Java/SpringBoot/%E6%B3%A8%E8%A7%A3/Component%E6%B3%A8%E8%A7%A3%E5%92%8CConfiguration%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%BC%82%E5%90%8C/#_1","title":"\u901f\u8bb0","text":"<p>@Component\u662flite\u6a21\u5f0f\uff0c\u7c7b\u76f4\u63a5\u6258\u7ba1\u7ed9IOC\u5bb9\u5668\u3002\u4e0d\u540c@Bean\u4fee\u9970\u7684\u65b9\u6cd5\u76f8\u4e92\u5f15\u7528\u65f6\uff0c\u65e0\u6cd5\u505a\u5230\u5355\u4f8b\u3002</p> <p>@Configuration\u662ffull\u6a21\u5f0f\uff0c\u751f\u6210\u4ee3\u7406\u7c7b\u6258\u7ba1\u7ed9IOC\u5bb9\u5668\u3002\u4e0d\u540c@Bean\u4fee\u9970\u7684\u65b9\u6cd5\u76f8\u4e92\u5f15\u7528\u65f6\uff0c\u53ef\u4ee5\u505a\u5230\u5355\u4f8b\u3002</p>"},{"location":"Java/SpringBoot/%E6%B3%A8%E8%A7%A3/Component%E6%B3%A8%E8%A7%A3%E5%92%8CConfiguration%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%BC%82%E5%90%8C/#_2","title":"\u914d\u7f6e\u7c7b\u7684\u4e24\u79cd\u6a21\u5f0f","text":"<p>\u914d\u7f6e\u7c7b\u5206\u4e3alite\u6a21\u5f0f\u548cfull\u6a21\u5f0f\u3002</p>"},{"location":"Java/SpringBoot/%E6%B3%A8%E8%A7%A3/Component%E6%B3%A8%E8%A7%A3%E5%92%8CConfiguration%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%BC%82%E5%90%8C/#lite","title":"lite\u6a21\u5f0f","text":"<p>lite\u6a21\u5f0f\u5305\u542b\u4ee5\u4e0b\u7c7b\uff1a</p> <ul> <li>\u6ca1\u6709\u88ab@Configuration\u4fee\u9970\uff0c\u88ab@Component\u4fee\u9970</li> <li>\u6ca1\u6709\u88ab@Configuration\u4fee\u9970\uff0c\u88ab@ComponentScan\u4fee\u9970</li> <li>\u6ca1\u6709\u88ab@Configuration\u4fee\u9970\uff0c\u88ab@Import\u4fee\u9970</li> <li>\u6ca1\u6709\u88ab@Configuration\u4fee\u9970\uff0c\u88ab@ImportResource\u4fee\u9970</li> <li>\u6ca1\u6709\u4efb\u4f55Spring\u76f8\u5173\u6ce8\u89e3\uff0c\u7c7b\u91cc\u9762\u6709@Bean\u4fee\u9970\u7684\u65b9\u6cd5</li> <li>\u88ab@Configuration\u4fee\u9970\uff0c\u4f46\u662f\u5c5e\u6027proxyBeanMethods = false</li> </ul> <p>lite\u6a21\u5f0f\u7684\u7279\u5f81\uff1a</p> <ul> <li>lite\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\u7c7b\u4e0d\u751f\u6210\u4ee3\u7406\uff0c\u539f\u59cb\u7c7b\u578b\u8fdb\u5165\u5bb9\u5668</li> <li>lite\u6a21\u5f0f\u4e0b\u7684@Bean\u65b9\u6cd5\u53ef\u4ee5\u662fprivate\u548cfinal</li> <li>\u5355\u4f8bscope\u4e0b\u4e0d\u540c@Bean\u65b9\u6cd5\u5f15\u7528\u65f6\u65e0\u6cd5\u505a\u5230\u5355\u4f8b</li> </ul>"},{"location":"Java/SpringBoot/%E6%B3%A8%E8%A7%A3/Component%E6%B3%A8%E8%A7%A3%E5%92%8CConfiguration%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%BC%82%E5%90%8C/#full","title":"full\u6a21\u5f0f","text":"<p>full\u6a21\u5f0f\u5305\u542b\u4ee5\u4e0b\u7c7b\uff1a</p> <ul> <li>\u88ab@Configuration\u4fee\u9970\uff0c\u4e14\u5c5e\u6027proxyBeanMethods = true(proxyBeanMethods \u9ed8\u8ba4\u4e3atrue)</li> </ul> <p>full\u6a21\u5f0f\u7684\u7279\u5f81\uff1a</p> <ul> <li>full\u6a21\u5f0f\u4e0b\u7684\u914d\u7f6e\u7c7b\u4f1a\u88abCGLIB\u4ee3\u7406\u751f\u6210\u4ee3\u7406\u7c7b\u53d6\u4ee3\u539f\u59cb\u7c7b\u578b(\u5728\u5bb9\u5668\u4e2d)</li> <li>full\u6a21\u5f0f\u4e0b\u7684@Bean\u65b9\u6cd5\u4e0d\u80fd\u662fprivate\u548cfinal</li> <li>\u5355\u4f8bscope\u4e0b\u4e0d\u540c@Bean\u65b9\u6cd5\u53ef\u4ee5\u4e92\u76f8\u5f15\u7528\uff0c\u8fbe\u5230\u5355\u5b9e\u4f8b\u7684\u8bed\u4e49</li> </ul>"},{"location":"Java/SpringBoot/%E6%B3%A8%E8%A7%A3/Import%E6%B3%A8%E8%A7%A3/","title":"Import\u6ce8\u89e3","text":"<p>Spring\u4e2d\uff0c<code>@Import</code>\u6ce8\u89e3\u7684\u4f5c\u7528\u662f\u5c06\u5176\u4ed6\u7c7b\u6258\u7ba1\u7ed9IOC\u5bb9\u5668\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a</p> <p>\u5047\u5b9a\u7c7bA\u80fd\u88abSpring\u626b\u63cf\u5230\u5e76\u653e\u5165IOC\u5bb9\u5668\u3002</p> <pre><code>@Component\npublic class A {}\n</code></pre> <p>\u7c7bB\u4e0a\u9762\u6ca1\u6709\u4efb\u4f55\u6ce8\u89e3\uff0c\u6309\u7406\u8bf4\u7c7bB\u65e0\u6cd5\u88ab\u6258\u7ba1\u7ed9IOC\u5bb9\u5668\u3002</p> <pre><code>public class B {}\n</code></pre> <p>\u4f46\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba9\u88ab\u6258\u7ba1\u7684\u7c7bA\u4e3b\u52a8\u5c06\u7c7bB\u5f15\u5165IOC\u5bb9\u5668\u3002</p> <pre><code>@Component\n@Import({B.class})\npublic class A {}\n\npublic class B {}\n</code></pre> <p>\u90a3\u4e48\u6b64\u65f6\u7c7bB\u5c31\u88ab\u6258\u7ba1\u7ed9IOC\u5bb9\u5668\u5566\uff5e</p> <p>\u7279\u522b\u6ce8\u610f\uff1a\u53ea\u6709\u88ab\u6258\u7ba1\u7684\u7c7b\u624d\u6709\u8d44\u683c\u4e3b\u52a8\u5c06\u522b\u7684\u7c7b\u5f15\u5165IOC\u5bb9\u5668\u3002\u4e0a\u8ff0\u6848\u4f8b\u4e2d\uff0c\u5982\u679c\u7c7bA\u5fc5\u987b\u6709<code>@Component</code>\u6ce8\u89e3\uff0c\u624d\u80fd\u5c06\u7c7bB\u5f15\u5165IOC\u5bb9\u5668\u4e2d\u3002</p>"},{"location":"Linux/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%BB%E5%90%8E%E6%84%9F/","title":"Linux\u9ad8\u6027\u80fd\u670d\u52a1\u5668\u8bfb\u540e\u611f","text":"<p>[toc]</p>"},{"location":"Linux/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%BB%E5%90%8E%E6%84%9F/#_1","title":"\u5176\u4ed6","text":"<p>\u53c2\u8003\u6587\u6863</p> <p>\u95ee\u9898\uff1a\u5728Unix\u7cfb\u7edf\u4e2d\uff0c\u4e00\u5207\u4e1c\u897f\u90fd\u53ef\u4ee5\u62bd\u8c61\u4e3a\u6587\u4ef6\u5417\uff1f</p> <p>\u7b54\u6848\uff1a\u662f\u6ef4\uff01</p> <p>\u95ee\u9898\uff1a\u4ec0\u4e48\u662fsocket\uff1f</p> <p>\u7b54\u6848\uff1asocket\u5373\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u6587\u4ef6\uff0c\u4e00\u4e9bsocket\u51fd\u6570\u5c31\u662f\u5bf9\u5176\u8fdb\u884c\u7684\u64cd\u4f5c\uff08\u8bfb/\u5199IO\u3001\u6253\u5f00\u3001\u5173\u95ed\uff09\u3002</p>"},{"location":"Linux/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%AF%BB%E5%90%8E%E6%84%9F/#5","title":"\u7b2c5\u7ae0","text":"<p>\u95ee\u9898\uff1a\u7f51\u7edc\u5e8f\u548c\u4e3b\u673a\u5e8f\u5982\u4f55\u5bf9\u5e94\u5927\u7aef\u5e8f\u548c\u5c0f\u7aef\u5e8f\u5462\uff1f</p> <p>\u7b54\u6848\uff1a\u7f51\u7edc\u5e8f\u662f\u5927\u7aef\u5e8f\uff0c\u4e3b\u673a\u5e8f\u901a\u5e38\u662f\u5c0f\u7aef\u5e8f\u3002</p> <p>\u95ee\u9898\uff1a\u4e3b\u673a\u5e8f\u548c\u7f51\u7edc\u5e8f\u76f8\u4e92\u8f6c\u6362\u7684api\uff1f</p> <p>\u7b54\u6848\uff1a</p> <pre><code>#include &lt;netinet/in.h&gt;\nhtonl();  // host to net long\nhtons();  // host to net short\nntohl();  // net to host long\nntohs();  // net to host short\n</code></pre> <p>\u95ee\u9898\uff1asocket\u901a\u4fe1\u6d89\u53ca\u5230\u4e24\u65b9\uff0c\u5982\u4f55\u8868\u793a\u4ed6\u4eec\u7684\u5730\u5740\u5462\uff1f</p> <p>\u7b54\u6848\uff1a\u4f7f\u7528socket\u5730\u5740\u8868\u793a\u4ed6\u4eec\u3002</p> <p>\u95ee\u9898\uff1a\u534f\u8bae\u7c07\u662f\u4ec0\u4e48\uff1f\u6211\u4eec\u901a\u5e38\u4f7f\u7528\u54ea\u4e2a\u534f\u8bae\u7c07\u5462\uff1f</p> <p>\u7b54\u6848\uff1a\u534f\u8bae\u7c07\u662f\u4e00\u5927\u5806\u534f\u8bae\u7684\u96c6\u5408\uff1b\u901a\u5e38\u4f7f\u7528TCP/IP\u534f\u8bae\u7c07\uff0c\u91cc\u9762\u5305\u62ec\u4e86TCP\uff0cUDP\uff0cDNS...\u7b49\u534f\u8bae\u3002</p> <p>\u95ee\u9898\uff1aTCP/IP\u534f\u8bae\u7c07\u7684socket\u5730\u5740\u7ed3\u6784\u662f\u600e\u6837\u7684\uff1f\uff08\u4e86\u89e3\u5373\u53ef\uff0c\u9700\u8981\u65f6\u67e5\u5c31\u884c\uff09</p> <p>\u7b54\u6848\uff1a</p> <pre><code>struct sockaddr_in {\n    sa_family_t sin_family;  // \u5730\u5740\u65cf\uff0c\u901a\u5e38\u8bbe\u4e3aAF_INET\n    u_int16_t sin_port;  // \u7aef\u53e3\u53f7\uff0c\u7528\u7f51\u7edc\u5b57\u8282\u5e8f\u8868\u793a\n    struct in_addr sin_addr;  // ipv4\u7ed3\u6784\u4f53\n};\n// ipv4\u7ed3\u6784\u4f53\nstruct in_addr {\n    u_int32_t s_addr;  // ipv4\u5730\u5740\uff0c\u8981\u7528\u7f51\u7edc\u5b57\u8282\u5e8f\u8868\u793a\n};\n</code></pre> <p>\u95ee\u9898\uff1aip\u5730\u5740\u548c\u70b9\u5206\u5341\u8fdb\u5236\u5982\u4f55\u76f8\u4e92\u8f6c\u6362\uff1f\uff08\u9700\u8981\u65f6\u641c\u5c31\u884c\uff09</p> <p>\u7b54\u6848\uff1a</p> <p>\u95ee\u9898\uff1a\u5982\u4f55\u521b\u5efasocket\uff1f\uff08\u91cd\u8981\uff0c\u9700\u8981\u7684\u65f6\u5019\u76f4\u63a5\u6284\uff09</p> <p>\u7b54\u6848\uff1a</p> <pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\nint socket(int domain, int type, int protocol);\n// \u5982\u679cdomain\u4e3aPF_INET\uff0c\u5219\u4f7f\u7528IPv4\u534f\u8bae\uff08\u5e38\u7528\uff09\uff1b\u5982\u679c\u4e3aPF_INET6\uff0c\u5219\u4f7f\u7528IPv6\u534f\u8bae\uff08\u4e0d\u5e38\u7528\uff09\u3002\n// \u5982\u679ctype\u4e3aSOCK_STREAM\uff0c\u5219\u4f7f\u7528tcp\u534f\u8bae\uff1b\u5982\u679ctype\u4e3aSOCK_UGRAM\uff0c\u5219\u4f7f\u7528UDP\u534f\u8bae\u3002\n// ??? type\u4e3aSOCK_NONBLOCK\u548cSOCK_CLOEXEC\n</code></pre> <p>\u95ee\u9898\uff1a\u5982\u4f55\u7ed9socket\u8bbe\u7f6e\u5730\u5740\uff1f</p> <p>\u7b54\u6848\uff1a</p> <pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\nint bind(int sockfd, const struct sockaddr* my_addr, socklen_t addrlen);\n</code></pre> <p>\u6210\u529f\u8fd4\u56de0\uff0c\u5931\u8d25\u8fd4\u56de-1\u3002</p> <p>\u95ee\u9898\uff1a\u5982\u4f55\u76d1\u542csocket\uff1f</p> <p>\u7b54\u6848\uff1a</p> <pre><code>#include &lt;sys/socket.h&gt;\nint listen(int sockfd, int backlog);\n// sockfd\u6307\u88ab\u76d1\u542c\u7684socket\uff0cbacklog\u6307\u76d1\u542c\u961f\u5217\u7684\u6700\u5927\u957f\u5ea6\n</code></pre>"},{"location":"Linux/Unix%E9%AB%98%E7%BA%A7%E7%8E%AF%E5%A2%83%E7%BC%96%E7%A8%8B/","title":"Unix\u9ad8\u7ea7\u73af\u5883\u7f16\u7a0b","text":"<p>[toc]</p>"},{"location":"Linux/Unix%E9%AB%98%E7%BA%A7%E7%8E%AF%E5%A2%83%E7%BC%96%E7%A8%8B/#_1","title":"\u6587\u4ef6","text":"<p>\u95ee\u9898\uff1a\u6587\u4ef6\u7684\u57fa\u672c\u64cd\u4f5c\u6709\u54ea\u4e9b\uff1f</p> <p>\u7b54\u6848\uff1a</p> <pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nvoid opt1() {\n        // \u6587\u4ef6\u6253\u5f00\u65b9\u5f0f\uff1a\n        // O_RDONLY     \u4ee5\u53ea\u8bfb\u7684\u5f62\u5f0f\u6253\u5f00\n        // O_WRONLY     \u4ee5\u53ea\u5199\u7684\u5f62\u5f0f\u6253\u5f00\n        // O_RDWR       \u4ee5\u53ef\u8bfb\u53ef\u5199\u7684\u5f62\u5f0f\u6253\u5f00\n        int fd = open(\"./t1.txt\", O_RDWR);\n        if (fd == -1) {\n                cout &lt;&lt; \"\u6587\u4ef6\u6253\u5f00\u5931\u8d25\uff01\" &lt;&lt; endl;\n        }\n        else {\n                cout &lt;&lt; \"\u6210\u529f\u6253\u5f00\u6587\u4ef6\uff01\uff01\uff01\" &lt;&lt; endl;\n        }\n}\n\nvoid opt2() {\n        // O_CREAT      \u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u521b\u5efa\u6587\u4ef6\uff0c\u901a\u8fc7mode\u6307\u5b9a\u6587\u4ef6\u7684\u6743\u9650\n        int fd = open(\"./t2.txt\", O_CREAT);\n        if (fd == -1) {\n                cout &lt;&lt; \"\u6587\u4ef6\u6253\u5f00\u5931\u8d25\uff01\" &lt;&lt; endl;\n        }\n        else {\n                cout &lt;&lt; \"\u6210\u529f\u6253\u5f00\u6587\u4ef6\uff01\uff01\uff01\" &lt;&lt; endl;\n        }\n}\n\n// \u601d\u8003\uff1a\u4e3a\u4ec0\u4e48\u7528opt3\u521b\u5efa\u7684\u6587\u4ef6\u4e00\u4f1a\u513f\u662f\u7ea2\u5e95\uff0c\u4e00\u4f1a\u513f\u662f\u9ec4\u5e95\nvoid opt3() {\n        // O_CREAT \u548c O_EXCL \u4e00\u8d77\u4f7f\u7528\u65f6\uff0c\u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u5219\u521b\u5efa\u6587\u4ef6\uff1b\u5426\u5219\u62a5\u9519\n        int fd = open(\"./t3.txt\", O_CREAT | O_EXCL);\n        if (fd == -1) {\n                cout &lt;&lt; \"\u6587\u4ef6\u6253\u5f00\u5931\u8d25\" &lt;&lt; endl;\n        }\n        else {\n                cout &lt;&lt; \"\u6210\u529f\u6253\u5f00\u6587\u4ef6\uff01\uff01\uff01\" &lt;&lt; endl;\n        }\n}\n\nvoid opt4() {\n        // O_TRUNC      \u5982\u679c\u6709\u6587\u4ef6\uff0c\u5219\u6e05\u7a7a\u5e76\u6253\u5f00\u6587\u4ef6\u3002\u5426\u5219\u8fd4\u56de\u9519\u8bef\uff01\n        int fd = open(\"./t4.txt\", O_TRUNC);\n        if (fd == -1) {\n                cout &lt;&lt; \"\u6587\u4ef6\u6253\u5f00\u5931\u8d25\" &lt;&lt; endl;\n        }\n        else {\n                cout &lt;&lt; \"\u6210\u529f\u6253\u5f00\u6587\u4ef6\uff01\uff01\uff01\" &lt;&lt; endl;\n        }\n}\n\nvoid opt5() {\n        // O_APPEND     \u5982\u679c\u6709\u6587\u4ef6\uff0c\u6253\u5f00\u6587\u4ef6\u3002\u5426\u5219\u8fd4\u56de\u9519\u8bef\uff01\n        int fd = open(\"./t4.txt\", O_APPEND);\n        if (fd == -1) {\n                cout &lt;&lt; \"\u6587\u4ef6\u6253\u5f00\u5931\u8d25\" &lt;&lt; endl;\n        }\n        else {\n                cout &lt;&lt; \"\u6210\u529f\u6253\u5f00\u6587\u4ef6\uff01\uff01\uff01\" &lt;&lt; endl;\n        }\n}\n\nint main() {\n        return 0;\n}\n</code></pre> <p>\u95ee\u9898\uff1apid\u548cPCB\u662f\u4ec0\u4e48\uff1f\u4ec0\u4e48\u662f\u6587\u4ef6\u63cf\u8ff0\u7b26\u8868\u9879\uff1f\u4ec0\u4e48\u662f\u6587\u4ef6\u63cf\u8ff0\u7b26\uff08fd\uff09\uff1fstruct file\u5bf9\u8c61\u8bb0\u5f55\u4e86\u54ea\u4e9b\u4fe1\u606f\uff1f</p> <p>\u7b54\u6848\uff1a</p> <p>\u6bcf\u4e2a\u8fdb\u7a0b\u6709\u81ea\u5df1\u7684pid\u548cPCB\uff1b</p> <p>\u8fdb\u7a0b\u4e2d\u7684PCB\u4e2d\u8bb0\u5f55\u4e86\u8be5\u8fdb\u7a0b\u4f7f\u7528\u8ba1\u7b97\u673a\u8d44\u6e90\u7684\u60c5\u51b5\uff1b</p> <p>\u8fdb\u7a0b\u6bcf\u6253\u5f00\u4e00\u4e2a\u6587\u4ef6\uff0c\u5185\u6838\u4f1a\u4ea7\u751f\u4e00\u4e2astruct file\u7c7b\u578b\u7684\u5bf9\u8c61\uff0c\u5e76\u5c06\u8be5\u5bf9\u8c61\u8bb0\u5f55\u5230\u8fdb\u7a0bPCB\u6587\u4ef6\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\u8868\u9879\u4e2d\uff1b</p> <p>\u6587\u4ef6\u63cf\u8ff0\u8868\u9879\u7684\u4e0b\u6807\u5c31\u662f\u6587\u4ef6\u63cf\u8ff0\u7b26\uff1b</p> <p>struct file\u5bf9\u8c61\u7684\u6210\u5458\u5b57\u6bb5\u8bb0\u5f55\u4e86\u6587\u4ef6\u7684\u72b6\u6001\u3001\u8bfb\u5199\u4f4d\u7f6e\u3001\u8def\u5f84\u7b49\u4fe1\u606f\uff1b</p> <p>\u95ee\u9898\uff1atask_stuct\uff0cfiles_stuct\uff0cfiles\u7684\u5173\u7cfb\u662f\u4ec0\u4e48\uff1f</p> <p>\u7b54\u6848\uff1a</p> <p>\u53c2\u8003\u6587\u6863</p> <p></p> <p>task_stuct\u662f\u4e00\u4e2a\u8fdb\u7a0b\u7684PCB\uff0c\u7ba1\u7406\u8be5\u8fdb\u7a0b\u76f8\u5173\u7684\u6240\u6709\u8d44\u6e90\u3002</p> <p>files_stuct\u662f\u7528\u4e8e\u7ba1\u7406\u8be5\u8fdb\u7a0b\u6253\u5f00\u7684\u6240\u6709\u6587\u4ef6\uff0c\u88ab\u6253\u5f00\u7684\u6587\u4ef6\u6307\u9488\u5b58\u653e\u5728fd_array\u9759\u6001\u6570\u7ec4\u548cfdtable\u52a8\u6001\u6570\u7ec4\u4e2d\u3002</p> <p>fd\u5c31\u662ffies_stuct\u7684\u4e0b\u6807\u3002</p> <p>\u95ee\u9898\uff1a\u5e38\u89c1\u6587\u4ef6\u63cf\u8ff0\u7b260,1,2\uff1f</p> <p>\u7b54\u6848\uff1a</p> <p>0\uff1a\u6807\u51c6\u8f93\u5165  \u952e\u76d8</p> <p>1\uff1a\u6807\u51c6\u8f93\u51fa  \u663e\u793a\u5668</p> <p>2\uff1a\u6807\u51c6\u9519\u8bef\u8f93\u51fa    \u663e\u793a\u5668</p> <p>\u95ee\u9898\uff1a\u6587\u4ef6\u6709\u54ea\u4e9b\u7c7b\u578b\uff1f</p> <p>\u7b54\u6848\uff1a</p> <p><code>-</code>\uff1a\u666e\u901a\u6587\u4ef6</p> <p><code>d</code>\uff1a\u6587\u4ef6\u5939\u6587\u4ef6</p> <p><code>c</code>\uff1a\u5b57\u7b26\u8bbe\u5907\u6587\u4ef6</p> <p><code>b</code>\uff1a\u5757\u8bbe\u5907\u6587\u4ef6</p> <p><code>p</code>\uff1a\u7ba1\u9053\u6587\u4ef6</p> <p><code>s</code>\uff1asocket\u6587\u4ef6</p> <p><code>l</code>\uff1a\u8f6f\u94fe\u63a5\u6587\u4ef6</p> <p>\u5efa\u8bae\u5230<code>/dev</code>\u76ee\u5f55\u4e0b\u67e5\u770b\u6587\u4ef6\u3002</p> <p>\u95ee\u9898\uff1a\u6587\u4ef6\u6709\u54ea\u4e09\u79cd\u8bbf\u95ee\u6743\u9650\uff1f\u6709\u54ea\u4e09\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u7528\u6237\uff1f</p> <p>\u95ee\u9898\uff1aumask\u662f\u4ec0\u4e48\uff1f\u5982\u4f55\u67e5\u770b\u548c\u4fee\u6539\u8fdb\u7a0b\u7684umask\u63a9\u7801\uff1f</p> <p>\u7b54\u6848\uff1a</p> <ol> <li>\u901a\u5e38root\u7528\u6237\u7684umask\u63a9\u7801\u662f0022\uff0c\u666e\u901a\u7528\u6237\u662f0002\u3002\u7b2c\u4e00\u4e2a0\u8868\u793a\u516b\u8fdb\u5236\u3002\u540e\u9762\u4e09\u4f4d\u6570\u5206\u522b\u9488\u5bf9\u4e09\u79cd\u7528\u6237\uff1a\u81ea\u5df1\uff0c\u7ec4\u5185\u6210\u5458\uff0c\u5176\u4ed6\u4eba\u3002</li> <li> <p>umask\u7684\u4f5c\u7528\uff1a\u5bf9\u4e8e0002\uff0c\u521b\u5efa\u7684\u6587\u4ef6\u6743\u9650\u662f\u5176\u4ed6\u4eba\u4e0d\u53ef\u5199\uff1b\u5bf9\u4e8e0022\uff0c\u521b\u5efa\u6587\u4ef6\u7684\u6743\u9650\u662f\u7ec4\u5185\u6210\u5458\u548c\u5176\u4ed6\u4eba\u4e0d\u53ef\u5199\u3002</p> </li> <li> <p>\u67e5\u770b\u8fdb\u7a0b\u7684umask\u63a9\u7801\uff1a<code>umask</code>\u3002</p> </li> <li>\u4fee\u6539\u8fdb\u7a0b\u7684umask\u63a9\u7801\uff1a<code>umask 0022</code></li> </ol> <p>\u95ee\u9898\uff1a\u5b9e\u73b0\u4e00\u4e2acp\u529f\u80fd\uff1f</p> <p>\u7b54\u6848\uff1a</p> <pre><code>#include &lt;unistd.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;iostream&gt;\n\n // \u6587\u4ef6\u8bfb\u53d6\n// #include &lt;unistd.h&gt;\n//\n// ssize_t read(int fd, void* buf, size_t count);\n//\n// fd: \u6307\u5b9a\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\n// buf: \u6587\u4ef6\u4e2d\u8bfb\u53d6\u5230\u7684\u6570\u636e\u653e\u5230\u8be5\u5185\u5b58\u5730\u5740\n// count: \u6307\u5b9a\u6700\u591a\u8bfb\u53d6\u7684\u5b57\u8282\u6570\n//      \u6210\u529f \u8fd4\u56de\u8bfb\u53d6\u5230\u7684\u5b57\u8282\u6570\n//      \u5931\u8d25 \u8fd4\u56de-1\n//      0 \u4ee3\u8868\u8bfb\u53d6\u5230\u672b\u5c3e\n//\n//\u6587\u4ef6\u5199\u5165\n// #include &lt;unistd.h&gt;\n//\n// ssize_t write(int fd, const void* buf, size_t count);\n//\n// fd: \u6307\u5b9a\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\n// buf: \u8be5\u5185\u5b58\u5730\u5740\u4e2d\u7684\u6570\u636e\u8bfb\u5165fd\u5bf9\u5e94\u7684\u6587\u4ef6\u4e2d\n// count: \u6307\u5b9a\u4e86\u5199\u5165\u6587\u4ef6\u7684\u6700\u5927\u5b57\u8282\u6570\n//      \u6210\u529f: \u8fd4\u56de\u5b9e\u9645\u5199\u5165\u7684\u5b57\u8282\u6570\n//      \u5931\u8d25: -1\n//\n//\n// #include &lt;sys/types.h&gt;\n// #include &lt;unistd.h&gt;\n// off_t lseek(int fd, off_t offset, int whence)\n\n\nint cp_file(int src_fd, int dst_fd) {\n        int total = 0;\n        // \u4ece\u6e90\u6587\u4ef6\u4e2d\u8bfb\u53d6\u6570\u636e\u5230buf\n        int len_r, len_w;\n        char buf[4096];\n        while ((len_r = read(src_fd, buf, 4096)) &gt; 0) {\n                char* p = buf;\n                while (len_r &gt; 0) {\n                        len_w = write(dst_fd, p, len_r);\n                        len_r -= len_w;\n                        total += len_w;\n                        p += len_w;\n                }\n        }\n        return total;\n}\n\n// \u901a\u8fc7\u547d\u4ee4\u884c\u4f20\u9012\u6587\u4ef6\u540d\u5b57\n// argv[1] \u6e90\u6587\u4ef6\u540d\u5b57\n// argv[2] \u76ee\u6807\u6587\u4ef6\u540d\u6b21\nint main(int argc, char* argv[]) {\n        // \u4ee5\u53ea\u8bfb\u7684\u65b9\u5f0f\u6253\u5f00\u6587\u4ef6\n        int src_fd = open(argv[1], O_RDONLY);\n\n        // \u4ee5\u53ea\u5199\u7684\u65b9\u5f0f\u6253\u5f00\u6587\u4ef6\n        //      \u5982\u679c\u6587\u4ef6\u4e0d\u5b58\u5728\uff0c\u521b\u5efa\u6587\u4ef6\uff0c\u6307\u5b9a\u6587\u4ef6\u7684\u6743\u9650\u4e3a0644\n        //      \u5982\u679c\u6587\u4ef6\u5b58\u5728\uff0c\u5c06\u6587\u4ef6\u7684\u5185\u5bb9\u60c5\u51b5\n\n        int dst_fd = open(argv[2], O_WRONLY | O_CREAT | O_TRUNC, 0777);\n\n        if (src_fd == -1 || dst_fd == -1) {\n                std::cout &lt;&lt; \"\u6587\u4ef6\u6253\u5f00\u5931\u8d25\uff01\" &lt;&lt; std::endl;\n        }\n        else {\n                cp_file(src_fd, dst_fd);\n        }\n        // \u5173\u95ed\u6587\u4ef6\u63cf\u8ff0\u7b26\n        close(src_fd);\n        close(dst_fd);\n        return 0;\n}\n</code></pre>"},{"location":"Linux/Unix%E9%AB%98%E7%BA%A7%E7%8E%AF%E5%A2%83%E7%BC%96%E7%A8%8B/#_2","title":"\u8fdb\u7a0b","text":"<p>\u95ee\u9898\uff1a\u4ec0\u4e48\u662f\u8fdb\u7a0b\uff1f</p> <p>\u7b54\u6848\uff1a\u8fdb\u7a0b\u662f\u8fd0\u884c\u7a0b\u5e8f\u7684\u5b9e\u4f8b\u3002\uff08\u8fd8\u662f\u6bd4\u8f83\u62bd\u8c61~\uff09</p> <p>\u95ee\u9898\uff1a\u67e5\u770b\u8fdb\u7a0b\u7684\u5e38\u89c1\u6307\u4ee4\uff1f</p> <p>\u7b54\u6848\uff1a</p> <pre><code>pstree      \u7528\u6237\u7ea7\u8fdb\u7a0b\u6811\uff0c\u53ef\u4ee5\u67e5\u770b\u7236\u5b50\u8fdb\u7a0b\u548c\u5144\u5f1f\u8fdb\u7a0b\u5173\u7cfb\nps -aux     \u7cfb\u7edf\u8fdb\u7a0b\u60c5\u51b5\ntop         \u8fdb\u7a0b\u5b9e\u65bd\u60c5\u51b5\n</code></pre> <p>\u95ee\u9898\uff1a\u8fdb\u7a0b\u7684\u72b6\u6001\uff1f</p> <p>\u7b54\u6848\uff1a</p> <pre><code>O\uff1a\u5c31\u7eea\nR\uff1a\u8fd0\u884c\nS\uff1a\u53ef\u5524\u9192\u7761\u7720\nD\uff1a\u4e0d\u53ef\u5524\u9192\u7761\u7720\nT\uff1a\u6682\u505c\uff0c\u63a5\u6536\u5230SIGSTOP\u4fe1\u53f7\u8f6c\u5165\u6682\u505c\uff0c\u63a5\u6536\u5230\u55f7SIGCONT\u4fe1\u53f7\u8f6c\u5165\u8fd0\u884c\nX\uff1a\u6b7b\u4ea1\nZ\uff1a\u50f5\u5c38\u8fdb\u7a0b\uff0c\u5df2\u505c\u6b62\u8fd0\u884c\uff0c\u4f46\u7236\u8fdb\u7a0b\u5c1a\u672a\u83b7\u53d6\u5176\u72b6\u6001\n&lt;\uff1a\u9ad8\u4f18\u5148\u7ea7\nN\uff1a\u4f4e\u4f18\u5148\u7ea7\nL\uff1a\ns\uff1a\nI\uff1a\n+\uff1a\n</code></pre> <p>\u95ee\u9898\uff1a\u8fdb\u7a0b\u7684\u521b\u5efa\uff1f</p> <p>\u7b54\u6848\uff1a</p> <p>\u51fd\u6570\u5b9a\u4e49\uff1a</p> <pre><code>#include &lt;unistd.h&gt;\npid_t fork(void);\n/*\n\u529f\u80fd\uff1a\u521b\u5efa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\n\u8fd4\u56de\u503c\uff1a\n    \u7236\u8fdb\u7a0b\u4e2d\uff1a\n        \u521b\u5efa\u5931\u8d25\uff0c\u8fd4\u56de-1\n        \u521b\u5efa\u6210\u529f\uff0c\u8fd4\u56de\u5b50\u8fdb\u7a0b\u7684pid\n    \u5b50\u8fdb\u7a0b\u4e2d\uff1a\u8fd4\u56de0\n*/\n</code></pre> <p>\u5b9e\u9645\u6848\u4f8b\uff1a</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n\nint main() {\n        // \u5728\u7236\u8fdb\u7a0b\u4e2d\u521b\u5efa\u4e00\u4e2a\u5b50\u8fdb\u7a0b\n        pid_t pid = fork();  // \u8fd9\u4e00\u6b65\u6267\u884c\u5b8c\u540e\uff0c\u5b50\u8fdb\u7a0b\u4e2d\u4e5f\u4f1a\u590d\u5236\u4e00\u4efd\u76f8\u540c\u7684\u4ee3\u7801\n        if (pid == -1) {\n                printf(\"\u5b50\u8fdb\u7a0b\u521b\u5efa\u5931\u8d25~\\n\");\n        }\n        else if (pid == 0) {\n                printf(\"\u5b50\u8fdb\u7a0b\u6267\u884c\uff01\\n\");\n        }\n        else {\n                printf(\"\u7236\u8fdb\u7a0b\u6267\u884c\uff01\\n\");\n        }\n        printf(\"\u7236\u5b50\u8fdb\u7a0b\u90fd\u4f1a\u6267\u884c\uff01\\n\");\n        return 0;\n}\n\n/*\n\u6267\u884c\u7ed3\u679c\uff1a\n\u7236\u8fdb\u7a0b\u6267\u884c\uff01\n\u7236\u5b50\u8fdb\u7a0b\u90fd\u4f1a\u6267\u884c\uff01\n\u5b50\u8fdb\u7a0b\u6267\u884c\uff01\n\u7236\u5b50\u8fdb\u7a0b\u90fd\u4f1a\u6267\u884c\uff01\n*/\n</code></pre> <p>\u95ee\u9898\uff1a\u5b50\u8fdb\u7a0b\u521b\u5efa\u6210\u529f\u540e\uff0c\u4f1a\u53d7\u5230\u7236\u8fdb\u7a0b\u7684\u201c\u5236\u7ea6\u201d\u5417\uff1f</p> <p>\u7b54\u6848\uff1a\u5b50\u8fdb\u7a0b\u521b\u5efa\u6210\u529f\u540e\uff0c\u5c31\u662f\u72ec\u7acb\u7684\u8d44\u6e90\u8c03\u5ea6\u5355\u4f4d\uff0c\u8c01\u5148\u8c03\u5ea6\u53d6\u51b3\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u3002</p> <p>\u95ee\u9898\uff1a\u5b50\u8fdb\u7a0b\u548c\u7236\u8fdb\u7a0b\u5171\u4eabPCB\u5417\uff1f\u5982\u679c\u5171\u4eab\uff0c\u5f53\u5b50\u8fdb\u7a0b\u6709\u5199\u64cd\u4f5c\u65f6\uff0c\u5982\u4f55\u907f\u514d\u5f71\u54cd\u7236\u8fdb\u7a0b\u7684PCB\u5462\uff1f</p> <p>\u7b54\u6848\uff1a\u5171\u4eab\uff1b\u5982\u679c\u5b50\u8fdb\u7a0b\u6709\u5199\u64cd\u4f5c\u65f6\uff0c\u4f1a\u4ece\u7236\u8fdb\u7a0b\u4e2d\u590d\u5236\u4e00\u90e8\u5206\u8d44\u6e90\u653e\u5230\u5b50\u8fdb\u7a0b\u4e2d\uff0c\u8fd9\u90e8\u5206\u8d44\u6e90\u4e0d\u88ab\u5171\u4eab\u3002</p> <p>\u95ee\u9898\uff1a\u8fdb\u7a0b\u5982\u4f55\u7ec8\u6b62\uff1freturn\u548cexit\u4e24\u79cd\u9000\u51fa\u65b9\u5f0f\u7684\u9000\u51fa\u72b6\u6001\u7801\u6709\u4f55\u4e0d\u540c\uff1f</p> <p>\u7b54\u6848\uff1a</p> <ol> <li>return\u3001exit</li> <li>\u9000\u51fa\u72b6\u6001\u7801\u7684\u53d6\u503c\u8303\u56f4\u662f0~255\uff1breturn x \u7684\u9000\u51fa\u72b6\u6001\u7801\u662fx\uff1bexit(x)\u7684\u9000\u51fa\u72b6\u6001\u7801\u662fx &amp; 0377\u3002</li> </ol> <p>\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n\nint main() {\n    getchar();  // \u8ba9\u4ee3\u7801\u6267\u884c\u5230\u8fd9\u4e00\u6b65\u505c\u4e0b\u6765\n    exit(3);  // \u8fd4\u56de 3&amp;0377 \u7ed9\u7236\u8fdb\u7a0b\n}\n/*\n\u7136\u540e\u91cd\u65b0\u5f00\u4e00\u4e2abash2\uff0c\u7528pstree\u67e5\u770b\u8be5\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\u3002\u5f97\u77e5bash\u662f\u8be5\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\u3002\u63a5\u4e0b\u6765\u76f4\u63a5\u8f93\u5165\u4e00\u4e2a\u6362\u884c\u7b26\u3002\u5728bash\u4e2d\u8f93\u5165echo $?\u5373\u53ef\u5f97\u5230exit\u4f20\u9012\u7ed9\u7236\u8fdb\u7a0b\u7684\u53c2\u6570\u3002\n*/\n</code></pre> <p>\u95ee\u9898\uff1a\u4ec0\u4e48\u662f\u9057\u8a00\u51fd\u6570\uff1f</p> <p>\u7b54\u6848\uff1a\u4f7f\u7528exit\u6216return\u7ed3\u675f\u8fdb\u7a0b\u4e4b\u524d\u9700\u8981\u6267\u884c\u7684\u51fd\u6570\u3002\u4f7f\u7528atexit\u51fd\u6570\u548con_exit\u51fd\u6570\u6ce8\u518c\u9057\u8a00\u51fd\u6570\u3002</p> <p>\u51fd\u6570\u5b9a\u4e49</p> <pre><code>#include &lt;stdlib.h&gt;\nint atexit(void(*function)(void));\n/*\n\u529f\u80fd\uff1a\u5411\u8fdb\u7a0b\u6ce8\u518c\u9057\u8a00\u51fd\u6570function\n\u53c2\u6570\uff1afunction\uff1a\u9057\u8a00\u51fd\u6570\u7684\u5730\u5740\n\u8fd4\u56de\u503c\uff1a\u6210\u529f\u8fd4\u56de0\uff0c\u5931\u8d25\u8fd4\u56de\u975e0\n\n\u6ce8\u518c\u51e0\u6b21\u9057\u8a00\u51fd\u6570\uff0c\u5c31\u4f1a\u8c03\u7528\u51e0\u6b21\u9057\u8a00\u51fd\u6570\uff0c\u4f46\u662f\u6ce8\u518c\u987a\u5e8f\u548c\u8c03\u7528\u987a\u5e8f\u76f8\u53cd\u3002\n\u5b50\u8fdb\u7a0b\u7ee7\u627f\u7236\u8fdb\u7a0b\u7684\u9057\u8a00\u51fd\u6570\n*/\n\nint on_exit(void(*function)(int, void*), void* arg);\n/*\n\u529f\u80fd\uff1a\u60f3\u8fdb\u7a0b\u6ce8\u518c\u9057\u8a00\u51fd\u6570function\n\u53c2\u6570\uff1a\n    function\uff1a\u9057\u8a00\u51fd\u6570\u5730\u5740\n    arg\uff1a\u4f20\u9012\u7ed9\u9057\u8a00\u51fd\u6570function\u7684\u53c2\u6570\n\u8fd4\u56de\u503c\uff1a\n    \u6210\u529f 0\n    \u5931\u8d25 \u975e0\n*/\n</code></pre> <p>\u5b9e\u6218</p> <p>atexit\u51fd\u6570</p> <pre><code>\n#include &lt;stdlib.h&gt;\n#include &lt;cstdio&gt;\n#include &lt;unistd.h&gt;\n\nvoid bye1() {\n        printf(\"\u6211\u6b7b\u55661~\\n\");\n}\n\nvoid bye2() {\n        printf(\"\u6211\u6b7b\u55662~\\n\");\n}\n\nint main() {\n        // \u5411\u8fdb\u7a0b\u6ce8\u518c\u9057\u8a00\u51fd\u6570\n        atexit(bye1);\n        atexit(bye2);\n        // \u6ce8\u518c\u9057\u8a00\u51fd\u6570\u4e4b\u540e\u518d\u521b\u5efa\u5b50\u8fdb\u7a0b\n        pid_t pid = fork();\n        if (pid == -1) {\n                printf(\"\u5b50\u8fdb\u7a0b\u521b\u5efa\u5931\u8d25~\");\n        }\n        return 0;\n}\n</code></pre> <p>on_exit\u51fd\u6570</p> <pre><code>\n#include &lt;stdlib.h&gt;\n#include &lt;cstdio&gt;\n#include &lt;unistd.h&gt;\n\nvoid bye1() {\n        printf(\"\u6211\u6b7b\u55661~\\n\");\n}\n\nvoid bye2() {\n        printf(\"\u6211\u6b7b\u55662~\\n\");\n}\n\nint main() {\n        // \u5411\u8fdb\u7a0b\u6ce8\u518c\u9057\u8a00\u51fd\u6570\n        atexit(bye1);\n        atexit(bye2);\n        // \u6ce8\u518c\u9057\u8a00\u51fd\u6570\u4e4b\u540e\u518d\u521b\u5efa\u5b50\u8fdb\u7a0b\n        pid_t pid = fork();\n        if (pid == -1) {\n                printf(\"\u5b50\u8fdb\u7a0b\u521b\u5efa\u5931\u8d25~\");\n        }\n        return 0;\n}\n</code></pre> <p>\u95ee\u9898\uff1a\u7236\u8fdb\u7a0b\u5982\u4f55\u56de\u6536\u5b50\u8fdb\u7a0b\u7684\u8d44\u6e90\uff1f</p> <p>\u7b54\u6848\uff1a</p> <p>\u7236\u8fdb\u7a0b\u56de\u6536\u5b50\u8fdb\u7a0b\u8d44\u6e90\u4e4b\u524d\uff0c\u8981\u4fdd\u8bc1\u5b50\u8fdb\u7a0b\u6267\u884c\u5b8c\u6bd5\uff1b\u5426\u5219\u7236\u8fdb\u7a0b\u9700\u8981\u963b\u585e\uff0c\u76f4\u5230\u5b50\u8fdb\u7a0b\u6267\u884c\u5b8c\u6bd5\u3002</p> <pre><code>pid_t wait(int* status);\n/* \n\u529f\u80fd\uff1a\u963b\u585e\u7b49\u5f85\u5b50\u8fdb\u7a0b\u7ed3\u675f\uff0c\n\u53c2\u6570\uff1a\u7528\u4e8e\u5b58\u653e\u5b50\u8fdb\u7a0b\u7684\u9000\u51fa\u72b6\u6001\u7801\n\u8fd4\u56de\u503c\uff1a\n    \u6210\u529f\uff1a\u7ec8\u6b62\u5b50\u8fdb\u7a0b\u7684id\n    \u5931\u8d25\uff1a-1\n*/\n</code></pre> <p>\u5b9e\u6218\uff1a</p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\n\nint main() {\n    // \u521b\u5efa\u5b50\u8fdb\u7a0b\n    pid_t pid = fork();\n    if (pid == -1) {\n        printf(\"\u5b50\u8fdb\u7a0b\u521b\u5efa\u5931\u8d25\");\n    }\n    else if (pid == 0) {\n        printf(\"\u5b50\u8fdb\u7a0b\u6267\u884c\uff0cpid=%d\\n\", getpid());\n        // \u8ba9\u5b50\u8fdb\u7a0b\u6682\u65f6\u963b\u585e\u5728\u6b64\u5904\uff0c\u65b9\u4fbf\u53d1\u9001\u4fe1\u53f7\n        getchar();\n        exit(-1);\n    }\n    else {\n        int code = 0;  // code\u662f\u5b50\u8fdb\u7a0b\u7684\u9000\u51fa\u72b6\u6001\u7801\n        printf(\"\u7236\u8fdb\u7a0b\u5f00\u59cb\u6267\u884c\uff01\\n\");\n        // wait\u51fd\u6570\u4f7f\u5f97\u7236\u8fdb\u7a0b\u963b\u585e\uff0c\u7b49\u5f85\u56de\u6536\u5b50\u8fdb\u7a0b\u8d44\u6e90\n        wait(&amp;code);\n        printf(\"code=%d\\n\", code);\n        if (WIFEXITED(code)) {  // \u5b50\u8fdb\u7a0b\u6b63\u5e38\u7ec8\u6b62\n            printf(\"\u5b50\u8fdb\u7a0b\u6b63\u5e38\u7684\u9000\u51fa\u72b6\u6001\u7801\u662f\uff1a%d\\n\", WEXITSTATUS(code));\n        }\n        if (WIFSIGNALED(code)) {  // \u5b50\u8fdb\u7a0b\u88ab\u4fe1\u53f7\u6253\u65ad\n            printf(\"\u5b50\u8fdb\u7a0b\u88ab\u4fe1\u53f7 %d \u6253\u65ad\\n\", WTERMSIG(code));\n        }\n        printf(\"\u7236\u8fdb\u7a0b\u7ee7\u7eed\u6267\u884c\uff01\\n\");\n    }\n\n    return 0;\n}\n</code></pre> <pre><code>pid_t waitpid(pid_t pid, int* status, int options);\n/*\n\u529f\u80fd\uff1a\u963b\u585e\u9876\u6234\u8fdb\u7a0b\u7ed3\u675f\uff0c\u7136\u540e\u6325\u624b\u5b50\u8fdb\u7a0b\u7684\u8d44\u6e90\n\u53c2\u6570\uff1a\n    pid\uff1a\u6307\u5b9a\u8981\u56de\u6536\u7684\u5b50\u8fdb\u7a0bid\n    status\uff1a\u7528\u4e8e\u5b58\u50a8\u5b50\u8fdb\u7a0b\u7684\u9000\u51fa\u72b6\u6001\u7801\n\n\u5173\u4e8epid\u7684\u53d6\u503c\uff1a\n    pid &lt; -1    \uff1f\uff1f\uff1f\n    pid = -1    \u7b49\u5f85\u4efb\u610f\u5b50\u8fdb\u7a0b\n    pid = 0     \u7b49\u5f85\u548c\u7236\u8fdb\u7a0b\u540c\u7ec4\u7684\u5b50\u8fdb\u7a0b\n    pid &gt; 0     pid\u7684\u503c\u6307\u5b9a\u4e86\u8981\u6265\u5e26\u7684\u5b50\u8fdb\u7a0b\u7684pid\n*/\n</code></pre> <p>\u95ee\u9898\uff1await\u548cwaitpid\u7684\u533a\u522b\uff1f</p> <p>wait\u7b49\u5f85\u7684\u662f\u7b2c\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0cwaitpid\u53ef\u6307\u5b9a\u7b49\u5f85\u67d0\u4e2a\u5b50\u8fdb\u7a0b\u3002</p> <p>\u95ee\u9898\uff1a\u5982\u4f55\u68c0\u67e5\u67d0\u4e2a\u8fdb\u7a0b\u7ec8\u6b62\u7684\u539f\u56e0\uff1f</p> <p>\u7b54\u6848\uff1a</p> <p>\u83b7\u53d6\u5230\u8be5\u8fdb\u7a0b\u5411\u5176\u7236\u8fdb\u7a0b\u53d1\u9001\u7684\u9000\u51fa\u72b6\u6001\u7801\uff08\u60f3\u60f3\u600e\u4e48\u83b7\u53d6\uff09\uff0c\u7136\u540e\u8c03\u7528\u4e0b\u9762\u7684\u5b8f\u5373\u53ef\u3002</p> <pre><code>WIFEXITED(status)\uff1a\u5982\u679c\u8fdb\u7a0b\u6b63\u5e38\u7ed3\u675f\uff0c\u8fd4\u56de\u771f\nWEXITSTATUS(status)\uff1a\u83b7\u53d6\u8fdb\u7a0b\u7684\u9000\u51fa\u72b6\u6001\u7801\uff08\u6211\u6bd4\u8f83\u56f0\u60d1\uff0c\u660e\u660estatus\u5c31\u662f\u9000\u51fa\u72b6\u6001\u7801  \u5440\uff09\nWIFSIGNALED(status)\uff1a\u5982\u679c\u8fdb\u7a0b\u88ab\u4fe1\u53f7\u6253\u65ad\uff0c\u8fd4\u56de\u771f\nWTERMSIG(status)\uff1a\u83b7\u53d6\u6253\u65ad\u8fdb\u7a0b\u7684\u4fe1\u53f7\u7684\u7f16\u53f7\n\n\u7ed9\u8fdb\u7a0b\u53d1\u9001\u4fe1\u53f7\uff1akill -\u4fe1\u53f7\u7f16\u53f7 \u8fdb\u7a0b\u7684pid\n</code></pre>"},{"location":"Linux/Unix%E9%AB%98%E7%BA%A7%E7%8E%AF%E5%A2%83%E7%BC%96%E7%A8%8B/#_3","title":"\u8fdb\u7a0b\u4e4b\u95f4\u901a\u4fe1","text":"<p>\u65e0\u540d\u7ba1\u9053\uff1a</p> <p>\u7ba1\u9053\u662f\u5185\u6838\u7a7a\u95f4\u4e2d\u7684\u4e00\u5757\u5185\u5b58\u7a7a\u95f4\u3002</p> <p>\u8fdb\u7a0b\u4e4b\u95f4\u901a\u4fe1\u5fc5\u987b\u501f\u52a9\u7ba1\u9053\u3002</p> <p>\u7ba1\u9053\u5206\u4e3a\u65e0\u540d\u7ba1\u9053\u548c\u6709\u540d\u7ba1\u9053\u3002</p> <p>\u65e0\u540d\u7ba1\u9053\u7528\u4e8e\u7236\u5b50\u6216\u5144\u5f1f\u8fdb\u7a0b\u4e4b\u95f4\u3002\u4f7f\u7528<code>pipe(2)</code>\u521b\u5efa\u65e0\u540d\u7ba1\u9053\u3002</p> <pre><code>#include &lt;unistd.h&gt;\nint pipe(int pipefd[2]);\n\n// \u529f\u80fd\uff1a\u521b\u5efa\u4e00\u4e2a\u5355\u5de5\u7684\u65e0\u540d\u7ba1\u9053\n// pipefd[0] \u6307\u5411\u7ba1\u9053\u8bfb\u7aef\uff0cpipefd[1]\u6307\u5411\u7ba1\u9053\u5199\u7aef     \n</code></pre> <p>\u6709\u540d\u7ba1\u9053\uff1a</p> <p>\u6709\u540d\u7ba1\u9053\u5b9e\u9645\u4e0a\u662f\u4e00\u79cd\u6587\u4ef6\u3002</p> <p>fifo.cpp \u521b\u5efa\u7ba1\u9053\u6587\u4ef6</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n\nint main(int argc, char* argv[]) {\n    // \u521b\u5efa\u7ba1\u9053\u7c7b\u578b\u7684\u6587\u4ef6\n    // \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u6587\u4ef6\u540d\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u6587\u4ef6\u7684\u6743\u9650\uff08\u53ef\u80fd\u4f1a\u88ab\u63a9\u7801\u4fee\u6539\uff09\n    int ff = mkfifo(argv[1], 0644);\n\n    if (ff == -1) {\n        std::cerr &lt;&lt; \"\u6587\u4ef6\u521b\u5efa\u5931\u8d25~\" &lt;&lt; std::endl;\n    }\n\n    std::cout &lt;&lt; \"\u7ba1\u9053\u6587\u4ef6\" &lt;&lt; argv[1] &lt;&lt; \"\u6210\u529f\u521b\u5efa\uff01\" &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre> <p>pa.cpp \u5411\u7ba1\u9053\u6587\u4ef6\u5199\u5165\u6570\u636e</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char* argv[]) {\n    // \u4ee5 \u5199 \u7684\u65b9\u5f0f\u6253\u5f00\u7ba1\u9053\u6587\u4ef6\n    int fd = open(argv[1], O_WRONLY);\n\n    if (fd == -1) {\n        std::cerr &lt;&lt; \"\u6587\u4ef6\u6253\u5f00\u5931\u8d25~\" &lt;&lt; std::endl;\n    }\n\n    // \u5411 \u7ba1\u9053\u6587\u4ef6 \u4e2d\u5199\u5165\u6570\u636e\n    const char* msg = \"this is a msg...\\n\";\n    write(fd, msg, strlen(msg));\n\n    close(fd);\n\n    return 0;\n}\n</code></pre> <p>pb.cpp \u4ece\u7ba1\u9053\u6587\u4ef6\u8bfb\u53d6\u6570\u636e</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;string.h&gt;\n\nint main(int argc, char* argv[]) {\n    int fd = open(argv[1], O_RDONLY);\n\n    if (fd == -1) {\n        std::cerr &lt;&lt; \"\u6587\u4ef6\u6253\u5f00\u5931\u8d25~\" &lt;&lt; std::endl;\n    }\n\n    // \u4ece \u7ba1\u9053\u6587\u4ef6 \u4e2d\u8bfb\u53d6\u6570\u636e\n    char buf[1 &lt;&lt; 13] = { 0 };\n    int len = read(fd, buf, 1 &lt;&lt; 13);\n\n    write(1, buf, len);\n\n    close(fd);\n\n    return 0;\n}\n</code></pre>"},{"location":"Linux/Unix%E9%AB%98%E7%BA%A7%E7%8E%AF%E5%A2%83%E7%BC%96%E7%A8%8B/#_4","title":"\u4fe1\u53f7","text":"<p>\u95ee\u9898\uff1a\u4fe1\u53f7\u662f\u4ec0\u4e48\uff1f</p> <p>\u7b54\u6848\uff1a\u7ba1\u4ed6\u662f\u4ec0\u4e48\uff0c\u53ea\u8981\u77e5\u9053\u6211\u4eec\u53ef\u4ee5\u7ed9\u8fdb\u7a0b\u53d1\u4fe1\u53f7\uff0c\u8fdb\u7a0b\u6536\u5230\u4fe1\u53f7\u540e\u4f1a\u505a\u4e00\u4e9b\u4e8b\uff0c\u4fe1\u53f7\u4ec0\u4e48\u65f6\u5019\u4f20\u9012\u5230\u662f\u4e0d\u786e\u5b9a\u7684\u3002</p> <p>\u95ee\u9898\uff1a\u7cfb\u7edf\u6709\u54ea\u4e9b\u4fe1\u53f7\uff1f</p> <p>\u7b54\u6848\uff1a<code>kill -l</code>\u53ef\u4ee5\u67e5\u770b\u3002</p> <p>\u95ee\u9898\uff1a\u5e38\u89c1\u4fe1\u53f7\uff1f</p> <pre><code>kill 2      ctrl + c\nkill 3      ctrl + \\\nkill 9      \u6740\u6b7b\nkill 11     \u7528\u6237\u81ea\u5df1\u4f7f\u7528\nkill 12     \u7528\u6237\u81ea\u5df1\u4f7f\u7528\nkill 14     \u65f6\u949f\u4fe1\u53f7\nkill 17     \u5b50\u8fdb\u7a0b\u7ec8\u6b62\u65f6\u7ed9\u7236\u8fdb\u7a0b\u53d1\u9001\u7684\u4fe1\u53f7\n</code></pre> <p>\u95ee\u9898\uff1a\u4fe1\u53f7\u7684\u751f\u547d\u5468\u671f\uff1f</p> <p>\u7b54\u6848\uff1a</p> <pre><code>1. \u4fe1\u53f7\u88ab\u751f\u6210\uff0c\u5e76\u88ab\u53d1\u9001\u7ed9\u7cfb\u7edf\u5185\u6838\n2. \u7cfb\u7edf\u5185\u6838\u5b58\u50a8\u4fe1\u53f7\uff0c\u76f4\u5230\u53ef\u4ee5\u5904\u7406\u5b83\n3. \u4e00\u65e6\u6709\u7a7a\u95f2\uff0c\u5185\u6838\u4f1a\u6309\u7167\u4ee5\u4e0b\u4e09\u79cd\u65b9\u5f0f\u5904\u7406\u4fe1\u53f7\n    a) \u5ffd\u7565\u4fe1\u53f7\uff1a\u4ec0\u4e48\u4e5f\u4e0d\u505a\u3002\u6ce8\u610fSIGKILL\u548cSIGSTOP\u4fe1\u53f7\u4e0d\u80fd\u88ab\u5ffd\u7565\n    b) \u6355\u83b7\u4fe1\u53f7\uff1a\u5185\u6838\u6682\u505c\u6536\u5230\u4fe1\u53f7\u7684\u8fdb\u7a0b\uff0c\u5e76\u8df3\u8f6c\u5230\u4e8b\u5148\u6ce8\u518c\u597d\u7684\u4fe1\u53f7\u5904\u7406\u51fd\u6570\uff08\u901a\u5e38\u7531\u7a0b\u5e8f\u5458\u5236\u5b9a\u8be5\u51fd\u6570\uff09\uff0c\u51fd\u6570\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u91cd\u65b0\u8df3\u56de\u6355\u83b7\u4fe1\u53f7\u7684\u5730\u65b9\u3002SIGKILL\u548cSIGSTOP\u4fe1\u53f7\u4e0d\u80fd\u88ab\u6355\u83b7\u3002\n    c) \u9ed8\u8ba4\u4fe1\u53f7\uff1a\u4e0d\u540c\u4fe1\u53f7\u901a\u5e38\u7531\u4e0d\u540c\u7684\u9ed8\u8ba4\u64cd\u4f5c\uff0c\u901a\u5e38\u662f\u7ec8\u6b62\u6536\u5230\u4fe1\u53f7\u7684\u8fdb\u7a0b\uff0c\u4e5f\u6709\u4e9b\u9ed8\u8ba4\u64cd\u4f5c\u662f\u5bf9\u4fe1\u53f7\u89c6\u800c\u4e0d\u89c1\u3002\n</code></pre> <p>\u95ee\u9898\uff1a\u5982\u4f55\u5411\u8fdb\u7a0b\u6ce8\u518c\u4fe1\u53f7\u5904\u7406\u51fd\u6570\uff1f</p> <p>\u7b54\u6848\uff1a</p>"},{"location":"Linux/linux%E6%8C%82%E8%BD%BD%28mount%29/","title":"Linux \u6302\u8f7d","text":"<p>[toc]</p>"},{"location":"Linux/linux%E6%8C%82%E8%BD%BD%28mount%29/#mount","title":"\u4ec0\u4e48\u662f\u6302\u8f7d Mount","text":"<p>Linux\u7cfb\u7edf\u4e2d\uff0c\u6240\u6709\u8bbe\u5907\u90fd\u53ef\u770b\u505a\u6587\u4ef6\u3002\u6302\u8f7d\u662f\u6307\u5c06\u4e00\u4e2a\u8bbe\u5907\u6302\u63a5\u5230\u4e00\u4e2a\u5df2\u5b58\u5728\u7684\u76ee\u5f55\u4e0a\uff0c\u8fd9\u4e2a\u76ee\u5f55\u53ef\u4ee5\u4e0d\u4e3a\u7a7a\uff0c\u4f46\u6302\u8f7d\u4ee5\u540e\u8be5\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u5185\u5bb9\u90fd\u5c06\u4e0d\u53ef\u4f7f\u7528\u3002</p> <p>\u5f53\u6211\u4eec\u8bbf\u95ee\u5b58\u50a8\u8bbe\u5907\u4e2d\u7684\u6587\u4ef6\uff0c\u5fc5\u987b\u5c06\u6587\u4ef6\u6240\u5728\u7684\u5206\u533a\u6302\u8f7d\u5230\u4e00\u4e2a\u5df2\u5b58\u5728\u7684\u76ee\u5f55\u4e0a\uff0c\u7136\u540e\u901a\u8fc7\u8bbf\u95ee\u8fd9\u4e2a\u76ee\u5f55\u6765\u8bbf\u95ee\u8be5\u5b58\u50a8\u8bbe\u5907\u3002</p> <p>\u6302\u8f7d\u9700\u8981\u6302\u8f7d\u6e90\u548c\u6302\u8f7d\u70b9\u3002</p>"},{"location":"Linux/linux%E6%8C%82%E8%BD%BD%28mount%29/#_1","title":"\u5982\u4f55\u6302\u8f7d","text":"<p>\u6211\u4e5f\u4e0d\u592a\u6e05\u695a\u3002</p>"},{"location":"Linux/tmux%E7%9A%84%E9%85%8D%E7%BD%AE/","title":"Tmux\u7684\u914d\u7f6e","text":"<p>[toc]</p>"},{"location":"Linux/tmux%E7%9A%84%E9%85%8D%E7%BD%AE/#tmux","title":"tmux\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>set-option -g status-keys vi\nsetw -g mode-keys vi\n\nsetw -g monitor-activity on\n\n# setw -g c0-change-trigger 10\n# setw -g c0-change-interval 100\n\n# setw -g c0-change-interval 50\n# setw -g c0-change-trigger  75\n\n\nset-window-option -g automatic-rename on\nset-option -g set-titles on\nset -g history-limit 100000\n\n#set-window-option -g utf8 on\n\n# set command prefix\nset-option -g prefix C-a\nunbind-key C-b\nbind-key C-a send-prefix\n\nbind h select-pane -L\nbind j select-pane -D\nbind k select-pane -U\nbind l select-pane -R\n\nbind -n M-Left select-pane -L\nbind -n M-Right select-pane -R\nbind -n M-Up select-pane -U\nbind -n M-Down select-pane -D\n\nbind &lt; resize-pane -L 7\nbind &gt; resize-pane -R 7\nbind - resize-pane -D 7\nbind + resize-pane -U 7\n\n\nbind-key -n M-l next-window\nbind-key -n M-h previous-window\n\n\n\nset -g status-interval 1\n# status bar\nset -g status-bg black\nset -g status-fg blue\n\n\n#set -g status-utf8 on\nset -g status-justify centre\nset -g status-bg default\nset -g status-left \" #[fg=green]#S@#H #[default]\"\nset -g status-left-length 20\n\n\n# mouse support\n# for tmux 2.1\n# set -g mouse-utf8 on\nset -g mouse on\n#\n# for previous version\n#set -g mode-mouse on\n#set -g mouse-resize-pane on\n#set -g mouse-select-pane on\n#set -g mouse-select-window on\n\n\n#set -g status-right-length 25\nset -g status-right \"#[fg=green]%H:%M:%S #[fg=magenta]%a %m-%d #[default]\"\n\n# fix for tmux 1.9\nbind '\"' split-window -vc \"#{pane_current_path}\"\nbind '%' split-window -hc \"#{pane_current_path}\"\nbind 'c' new-window -c \"#{pane_current_path}\"\n\n# run-shell \"powerline-daemon -q\"\n\n# vim: ft=conf\n</code></pre>"},{"location":"Linux/tmux%E7%9A%84%E9%85%8D%E7%BD%AE/#_1","title":"\u5b89\u88c5\u65b9\u6cd5\u4ee5\u53ca\u914d\u7f6e\u8def\u5f84","text":"<p>\u5b89\u88c5\u65b9\u6cd5\uff08centos\uff09\uff1a</p> <pre><code>yum install tmux\n</code></pre> <p>\u914d\u7f6e\u8def\u5f84\uff1a</p> <p>\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0ctmux \u4f1a\u5728\u4e24\u4e2a\u4f4d\u7f6e\u67e5\u627e\u914d\u7f6e\u6587\u4ef6\u3002\u9996\u5148\u67e5\u627e <code>/etc/tmux.conf</code> \u4f5c\u4e3a\u7cfb\u7edf\u914d\u7f6e\uff0c\u7136\u540e\u5728\u5f53\u524d\u7528\u6237\u7684\u4e3b\u76ee\u5f55\u4e0b\u67e5\u627e <code>.tmux.conf</code> \u6587\u4ef6\uff08~/.tmux.conf \u4f18\u5148\u7ea7\u66f4\u9ad8\uff09\u3002\u5982\u679c\u8fd9\u4e24\u4e2a\u6587\u4ef6\u90fd\u4e0d\u5b58\u5728\uff0ctmux \u5c31\u4f1a\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\u3002\u5982\u679c\u4e0d\u9700\u8981\u4f7f\u7528\u7cfb\u7edf\u914d\u7f6e\uff0c\u5c31\u53ea\u9700\u8981\u5728\u4e3b\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u914d\u7f6e\u6587\u4ef6\u5373\u53ef\uff08\u5373 <code>~/.tmux.conf</code> \u6587\u4ef6\uff09\u3002\u547d\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>touch ~/.tmux.conf\n</code></pre> <p>\u5907\u6ce8\uff1a\u4e0d\u540c\u7684tmux\u7248\u672c\u53ef\u80fd\u4f1a\u4fee\u6539\u90e8\u5206\u4fe1\u606f\u3002</p>"},{"location":"Linux/tmux%E7%9A%84%E9%85%8D%E7%BD%AE/#tmux_1","title":"tmux\u4f7f\u7528\u6559\u7a0b","text":"<p>tmux\u4f7f\u7528\u6559\u7a0b</p>"},{"location":"Linux/%E6%B5%85%E8%B0%88Linux%E7%9A%84namespace/","title":"\u6d45\u8c08Linux\u7684namespace","text":"<p>[toc]</p>"},{"location":"Linux/%E6%B5%85%E8%B0%88Linux%E7%9A%84namespace/#linuxnamespace_1","title":"\u4ec0\u4e48\u662fLinux\u4e2d\u7684namespace","text":"<p>namespace\u662fLinux\u5185\u6838\u7684\u4e00\u4e2a\u7279\u6027\uff0c\u5b83\u5bf9\u5185\u6838\u8d44\u6e90\u8fdb\u884c\u5206\u533a\uff0c\u4f7f\u5f97\u4e00\u7ec4\u8fdb\u7a0b\u770b\u5230\u4e00\u7ec4\u8d44\u6e90\uff0c\u800c\u53e6\u4e00\u7ec4\u8fdb\u7a0b\u5219\u770b\u5230\u53e6\u4e00\u7ec4\u8d44\u6e90\uff0c\u5b9e\u73b0\u4e86\u8d44\u6e90\u9694\u79bb\u548c\u865a\u62df\u5316\u7279\u6027\u3002\u6b64\u65f6PID\uff0cIPC\u7b49\u7cfb\u7edf\u8d44\u6e90\u90fd\u4e0d\u662f\u5168\u5c40\u552f\u4e00\u7684\u4e86\u3002\u7cfb\u7edf\u4e2d\u53ef\u4ee5\u51fa\u73b0PID\u76f8\u540c\uff0c\u4f46namespace\u4e0d\u540c\u7684\u8fdb\u7a0b\u3002</p> <p>\u4ece\u5185\u68385.6\u7248\u5f00\u59cb\uff0c\u67098\u79cd\u540d\u79f0\u7a7a\u95f4\u3002</p> namespace \u9694\u79bb\u5185\u5bb9 UTS \u4e3b\u673a\u540d\u548c\u57df\u540d IPC \u4fe1\u53f7\u91cf\u3001\u6d88\u606f\u961f\u5217\u548c\u5171\u4eab\u5185\u5b58 PID \u8fdb\u7a0b\u7f16\u53f7 Network \u7f51\u7edc\u8bbe\u5907\u3001\u7f51\u7edc\u6808\u3001\u7aef\u53e3 Mount \u6302\u8f7d\u70b9\uff08\u6587\u4ef6\u7cfb\u7edf\uff09 User \u7528\u6237\u548c\u7528\u6237\u7ec4"},{"location":"MySQL/MySQL%E2%80%94%E2%80%94%E8%81%94%E5%90%88%E7%B4%A2%E5%BC%95%E5%92%8C%E6%9C%80%E5%B7%A6%E5%8C%B9%E9%85%8D/","title":"MySQL\u2014\u2014\u8054\u5408\u7d22\u5f15\uff08TODO\uff09","text":"<p>[toc]</p> <p>\u53c2\u8003\u6587\u6863</p>"},{"location":"MySQL/MySQL%E2%80%94%E2%80%94%E8%81%94%E5%90%88%E7%B4%A2%E5%BC%95%E5%92%8C%E6%9C%80%E5%B7%A6%E5%8C%B9%E9%85%8D/#_1","title":"\u5173\u4e8e\u8054\u5408\u7d22\u5f15","text":"<p>\u5c06\u591a\u4e2a\u5b57\u6bb5\u5408\u5728\u4e00\u8d77\u5efa\u7acb\u7d22\u5f15\u3002\u8054\u5408\u7d22\u5f15\u7684\u987a\u5e8f\u975e\u5e38\u91cd\u8981\uff01</p> <p>\u5efa\u7acb\u8054\u5408\u7d22\u5f15\u7684\u4f18\u70b9\uff1a</p> <ol> <li>\u51cf\u5c11\u5f00\u9500\u3002\u56e0\u4e3a\u591a\u4e00\u4e2a\u7d22\u5f15\u5c31\u9700\u8981\u591a\u6784\u5efa\u4e00\u9897\u7d22\u5f15\u6811\u3002</li> <li>\u5b9e\u73b0\u7d22\u5f15\u8986\u76d6\uff0c\u65e0\u9700\u56de\u8868\u67e5\u8be2\u3002</li> </ol>"},{"location":"MySQL/MySQL%E2%80%94%E2%80%94%E9%94%81/","title":"MySQL\u2014\u2014\u9501\uff08TODO\uff09","text":"<p>[toc]</p>"},{"location":"MySQL/MySQL%E2%80%94%E2%80%94%E9%94%81/#_1","title":"\u5206\u7c7b","text":"<p>\u6309\u7167\u9501\u7684\u6027\u8d28\u5206\u7c7b\uff1a\u5171\u4eab\u9501\u548c\u72ec\u5360\u9501\u3002</p> <p>\u6309\u7167\u9501\u7684\u8303\u56f4\u5206\u7c7b\uff1a\u5168\u5c40\u9501\u3001\u8868\u7ea7\u9501\u3001\u884c\u7ea7\u9501\u3002</p>"},{"location":"MySQL/MySQL%E2%80%94%E2%80%94%E9%94%81/#_2","title":"\u5171\u4eab\u9501","text":"<p>\u524d\u63d0\uff1a\u4e0b\u8ff0\u4e0d\u540c\u4e8b\u52a1\u83b7\u53d6\u7684\u9501\u7684\u8303\u56f4\u4e00\u81f4\u3002</p> <ol> <li>\u591a\u4e2a\u4e8b\u52a1\u53ef\u4ee5\u540c\u65f6\u83b7\u53d6\u5171\u4eab\u9501\uff0c\u7528\u4e8e\u8bfb\u53d6\u6570\u636e\u3002</li> <li>\u5b58\u5728\u4e8b\u52a1\u83b7\u53d6\u5171\u4eab\u9501\u65f6\uff0c\u5176\u4ed6\u4e8b\u52a1\u4e0d\u80fd\u83b7\u53d6\u72ec\u5360\u9501\u3002</li> </ol>"},{"location":"MySQL/MySQL%E2%80%94%E2%80%94%E9%94%81/#_3","title":"\u72ec\u5360\u9501","text":"<p>\u524d\u63d0\uff1a\u4e0b\u8ff0\u4e0d\u540c\u4e8b\u52a1\u83b7\u53d6\u7684\u9501\u7684\u8303\u56f4\u4e00\u81f4\u3002</p> <p>\u4e00\u4e2a\u4e8b\u52a1\u83b7\u53d6\u72ec\u5360\u9501\u65f6\uff0c\u5176\u4ed6\u4e8b\u52a1\u4e0d\u80fd\u83b7\u53d6\u5171\u4eab\u9501\u548c\u6392\u4ed6\u9501\u3002</p> <p>\u5171\u4eab\u9501\u548c\u72ec\u5360\u9501\u4e4b\u95f4\u7684\u5173\u7cfb\uff1a</p> \u5f53\u524d\u8bf7\u6c42\\\u8bf7\u6c42\u9501\u7c7b\u578b S\uff08\u5171\u4eab\u9501\uff09 X\uff08\u72ec\u5360\u9501\uff09 S\uff08\u5171\u4eab\u9501\uff09 \u517c\u5bb9 \u51b2\u7a81 X\uff08\u72ec\u5360\u9501\uff09 \u51b2\u7a81 \u51b2\u7a81"},{"location":"MySQL/MySQL%E2%80%94%E2%80%94%E9%94%81/#_4","title":"\u5168\u5c40\u9501","text":"<p>\u7528\u4e8e\u5168\u5e93\u5907\u4efd\uff0c\u6848\u4f8b\u5982\u4e0b\uff1a</p> <pre><code># \u52a0\u5168\u8868\u9501\nflush tables with read lock;\n# \u65e0\u6cd5\u6267\u884c\u4fee\u6539\u64cd\u4f5c\nupdate user set username = 'lihailong' where id = 1;\n# \u53ef\u4ee5\u6267\u884c\u67e5\u8be2\u64cd\u4f5c\nselect * from user;\n# \u89e3\u9501\nunlock tables;\n# \u53ef\u4ee5\u6267\u884c\u67e5\u8be2\u64cd\u4f5c\nupdate user set username = 'lihailong' where id = 1;\n</code></pre>"},{"location":"MySQL/MySQL%E2%80%94%E2%80%94%E9%94%81/#_5","title":"\u8868\u7ea7\u9501","text":"<p>\u5143\u6570\u636e\u9501\u548c\u610f\u5411\u9501\u662f\u6bd4\u8f83\u91cd\u8981\u7684\u8868\u9501\u3002</p> <ol> <li>\u5143\u6570\u636e\u9501\uff08MDL\uff09</li> </ol> <p>\u7cfb\u7edf\u81ea\u52a8\u63a7\u5236\uff0c\u907f\u514dDML\u548cDDL\u51b2\u7a81\u3002\u5f53\u4e00\u5f20\u8868\u589e\u5220\u6539\u67e5\u65f6\uff0c\u52a0MDL\u8bfb\u9501\u3002\u5f53\u4e00\u5f20\u8868\u7ed3\u6784\u53d1\u751f\u53d8\u66f4\u65f6\uff0c\u52a0MDL\u5199\u9501\u3002</p> <ol> <li> <p>\u610f\u5411\u9501</p> </li> <li> <p>\u610f\u5411\u9501\u7684\u4f5c\u7528\u662f\uff1a\u534f\u8c03\u884c\u9501\u4e0e\u8868\u9501\u3002</p> </li> <li> <p>\u5f53\u4e8b\u52a1A\u5bf9\u4e00\u884c\u6570\u636e\u52a0\u4e0a\u72ec\u5360\u9501\u65f6\uff0c\u540c\u65f6\u4f1a\u5bf9\u8868\u52a0\u4e0a\u610f\u5411\u72ec\u5360\u9501\uff08IX\uff09\uff1b\u5f53\u4e8b\u52a1A\u5bf9\u4e00\u884c\u6570\u636e\u52a0\u4e0a\u5171\u4eab\u9501\u65f6\uff0c\u540c\u65f6\u4f1a\u5bf9\u8868\u52a0\u4e0a\u610f\u5411\u5171\u4eab\u9501\uff08IS\uff09\u3002</p> </li> <li> <p>IS\u4e0e\u8868\u5171\u4eab\u9501\u517c\u5bb9\uff0c\u4e0e\u8868\u72ec\u5360\u9501\u4e92\u65a5\u3002</p> <p><code>sql  # 1  begin;  # 1  select * from user where id = 1 in share mode;  # 2  lock tables user read;  # \u6b63\u5e38\u6267\u884c\uff0cIS\u4e0e\u8868\u5171\u4eab\u9501\u517c\u5bb9  # 2  lock tables user write;  # \u963b\u585e\uff0cIS\u4e0e\u8868\u72ec\u5360\u9501\u4e92\u65a5</code></p> </li> <li> <p>IX\u4e0e\u8868\u5171\u4eab\u9501\u548c\u8868\u72ec\u5360\u9501\u90fd\u4e92\u65a5\u3002</p> <p><code>sql  # 1  begin;  # 1  select * from user for update;  # 2  lock tables user read;  # \u963b\u585e\uff0cIX\u4e0e\u8868\u5171\u4eab\u9501\u4e92\u65a5  # 2  lock tables user write;  # \u963b\u585e\uff0cIX\u4e0e\u8868\u6392\u4ed6\u9501\u4e92\u65a5</code></p> </li> </ol>"},{"location":"MySQL/MySQL%E2%80%94%E2%80%94%E9%94%81/#_6","title":"\u884c\u7ea7\u9501","text":"<ol> <li> <p>\u6982\u89c8</p> </li> <li> <p>\u4e3b\u8981\u5e94\u7528\u4e8eInnoDB\u5b58\u50a8\u5f15\u64ce\u3002MyISAM\u4e0d\u652f\u6301\u884c\u7ea7\u9501\u3002</p> </li> <li> <p>\u5e38\u89c1\u7684\u884c\u7ea7\u9501\u6709\uff1a\u884c\u9501\u3001\u95f4\u9699\u9501\u3001\u4e34\u952e\u9501\u3002</p> </li> <li> <p>\u4e0d\u540cSQL\u8bed\u53e5\u5bf9\u5e94\u7684\u9501\u7c7b\u578b\uff1a</p> SQL \u9501\u7c7b\u578b \u8bf4\u660e INSERT/UPDATE/DELETE \u72ec\u5360\u9501 \u81ea\u52a8\u52a0\u9501 SELECT \u4e0d\u52a0\u9501 SELECT ... LOCK IN SHARE MODE \u5171\u4eab\u9501 \u624b\u52a8\u5728SELCT\u8bed\u53e5\u540e\u6dfb\u52a0LOCK IN SHARE MODE SELECT ... FOR UPDATE \u72ec\u5360\u9501 \u624b\u52a8\u5728SELCT\u8bed\u53e5\u540e\u6dfb\u52a0FOR UPDATE </li> <li> <p>\u95f4\u9699\u9501\u548c\u4e34\u952e\u9501\u4e3b\u8981\u89e3\u51b3\u4e86\u5e7b\u8bfb\u95ee\u9898\u3002</p> </li> <li> <p>\u884c\u9501\uff1a\u9501\u5b9a\u4e00\u4e2a\u884c\u8bb0\u5f55\u3002\u9002\u7528\u4e8eRC\u9694\u79bb\u7ea7\u522b\u3002</p> </li> <li> <p>\u95f4\u9699\u9501</p> </li> <li> <p>\u95f4\u9699\u9501\u7531\u7cfb\u7edf\u521b\u5efa\uff0c\u9501\u5b9a\u67e5\u8be2\u8303\u56f4\u4e2d\u7684\u95f4\u9699\uff08\u4e0d\u662f\u9501\u884c\u8bb0\u5f55\uff09\u3002\u9002\u7528\u4e8eRR\u53ca\u4ee5\u4e0a\u7684\u9694\u79bb\u7ea7\u522b\u3002</p> </li> <li> <p>\u95f4\u9699\u9501\u7684\u4f5c\u7528\u662f\u9632\u6b62\u5176\u4ed6\u4e8b\u52a1\u5411\u8be5\u95f4\u9699\u63d2\u5165\u884c\u8bb0\u5f55\u3002\u4f46\u662f\u5176\u4ed6\u4e8b\u52a1\u4ecd\u7136\u53ef\u4ee5\u7ed9\u8be5\u95f4\u9699\u52a0\u9501\u3002\u95f4\u9699\u9501\u4e0e\u95f4\u9699\u9501\u53ef\u4ee5\u53e0\u52a0\u3002</p> </li> <li> <p>\u5047\u5b9a\u6709\u5982\u4e0b\u6570\u636e\uff1a</p> id\uff08unique index\uff09 1 5 10 <p><code>sql  # 1  begin;  # 2  begin;  # 1  select * from user where id = 3 for update;  # \u4f18\u5316\u4e3a\u95f4\u9699\u9501\uff0c\u9501id=15\uff5eid=30\u4e4b\u95f4\u7684\u95f4\u9699  # 2  select * from user where id = 3 for update;  # \u6b63\u5e38\u6267\u884c\uff0c\u95f4\u9699\u9501\u4e0e\u95f4\u9699\u9501\u4e0d\u4f1a\u51b2\u7a81  # 2  insert into user values(2);  # \u963b\u585e\uff0c\u9501id=5\u5de6\u8fb9\u7684\u4e00\u4e2a\u95f4\u9699  # 2  insert into user values(12);  # \u6b63\u5e38\u6267\u884c</code></p> </li> </ol> <p>\u4e34\u952e\u9501</p> <p>\u7cfb\u7edf\u521b\u5efa\uff0c\u9501\u5b9a\u67e5\u8be2\u8303\u56f4\u4e2d\u7684\u7d22\u5f15\u884c\u548c\u95f4\u9699\u3002\u9002\u7528\u4e8eRR\u9694\u79bb\u7ea7\u522b\u3002</p> <p>\u603b\u7ed3\uff1a</p> <p>RR\u7ea7\u522b\u4e0b\uff0c\u5982\u679c\u67e5\u8be2\u8d70\u552f\u4e00\uff08\u6216\u4e3b\u952e\uff09\u7d22\u5f15\uff0c\u90a3\u4e48\u626b\u63cf\u8303\u56f4\u5185\u7684\u8282\u70b9\u548c\u533a\u95f4\u90fd\u8981\u52a0\u9501\u3002</p> <p>RR\u7ea7\u522b\u4e0b\uff0c\u5982\u679c\u67e5\u8be2\u8d70\u666e\u901a\u7d22\u5f15\uff0c\u626b\u63cf\u8303\u56f4\u4e3a<code>[a, b]</code>\uff0c\u90a3\u4e48\u52a0\u9501\u8303\u56f4\u62d3\u5c55\u5230<code>[A, B]</code>\uff0c\u5176\u4e2d<code>A &lt; a &amp;&amp; b &lt; B &amp;&amp; A\u662fa\u5de6\u4fa7\u6700\u63a5\u8fd1\u7684\u8282\u70b9 &amp;&amp; B\u662fb\u53f3\u4fa7\u6700\u63a5\u8fd1\u7684\u8282\u70b9</code>\u3002</p> <p>\u5982\u4e0b\u56fe\uff1a</p> <p></p>"},{"location":"MySQL/MySQL%E2%80%94%E2%80%94%E9%94%81/#_7","title":"\u91cd\u70b9","text":"<ol> <li>\u5982\u679c\u64cd\u4f5c\u4e0d\u8d70\u7d22\u5f15\uff0c\u90a3\u4e48\u884c\u9501\u4f1a\u5347\u7ea7\u4e3a\u8868\u9501\uff01</li> </ol> <pre><code># 1\nbegin;\n# 2\nbegin;\n# 1\nselect * from user where age = 20 for update;  # \u5047\u5b9aage\u5c5e\u6027\u6ca1\u6709\u7d22\u5f15\n# 2\nupdate user set age = 40 where age = 30;  # \u963b\u585e\uff0c\u56e0\u4e3a\u9501\u4e86\u6574\u5f20\u8868\n</code></pre>"},{"location":"MySQL/MySQL%E2%80%94%E2%80%94%E9%94%81/#_8","title":"\u5b9e\u6218\u6848\u4f8b","text":"<p>\u5206\u522b\u5206\u6790\u4ee5\u4e0b\u6848\u4f8b\u7684\u6267\u884c\u8fc7\u7a0b\u3002</p> <ol> <li>\u5047\u5b9a\u6709\u4e8b\u52a11\u548c\u4e8b\u52a12\u548c\u4ee5\u4e0b\u6570\u636e\u3002</li> </ol> <p>user\u8868\uff1a</p> id username 1 Longcoding 2 Xiaoming <pre><code># 1\nbegin;\n# 2\nbegin;\n# 1\nupdate user set username = 'lc' where id = 1;\n# 2\nselect username from user where id = 1;  # \u663e\u793aLongcoding\u800c\u4e0d\u662flc\n</code></pre> <ol> <li>\u5047\u5b9a\u6709\u4e8b\u52a11\u548c\u4e8b\u52a12\u548c\u4ee5\u4e0b\u6570\u636e</li> </ol> <p>user\u8868\uff1a</p> id username 1 Longcoding 2 Xiaoming <pre><code># 1\nbegin;\n# 1\nselect * from user;\n# 2\nalter table user add column score int;  # \u4e8b\u52a12\u4f1a\u88ab\u963b\u585e\n# 1\ncommit;  # \u91ca\u653e\u5143\u6570\u636e\u9501\uff0c\u4e8b\u52a12\u7acb\u5373\u6267\u884c\n</code></pre> <p>\u540c\u6837\u7684\u573a\u666f\uff1a</p> <pre><code># 1\nbegin;\n# 2\nalter table user add column score int;  # \u4e8b\u52a12\u6b63\u5e38\u6267\u884c\n# \u56e0\u4e3a\u4e8b\u52a11\u6ca1\u6267\u884cdml\u8bed\u53e5\uff0c\u56e0\u6b64\u4e0d\u4f1a\u7ed9\u8868\u52a0\u4e0a\u5143\u6570\u636e\u9501\n</code></pre> <p>select object_schema, object_name, index_name, lock_type, lock_mode, lock_data from performance_schema.data_locks;</p>"},{"location":"MySQL/MySQL%E4%B9%8BMVCC/","title":"MySQL\u4e4bMVCC\uff08TODO\uff09","text":"<p>[toc]</p>"},{"location":"MySQL/MySQL%E4%B9%8BMVCC/#_1","title":"\u6982\u89c8","text":"<p>MVCC\uff1aMulti-Version Concurrency Control\uff08\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236\uff09\uff0c\u8fd9\u91cc\u7279\u6307InnoDB\u5f15\u64ce\u5728RC\u6216RR\u9694\u79bb\u7ea7\u522b\u4e0b\u591a\u4e2a\u4e8b\u52a1\u8bfb\u5199\u5e76\u53d1\u65f6\u7684\u51b2\u7a81\u548c\u9694\u79bb\u95ee\u9898\u3002</p> <p>MVCC\u7684\u6838\u5fc3\u601d\u60f3\u662f\u7ef4\u62a4\u6570\u636e\u7684UndoLog\u7248\u672c\u94fe\uff0c\u5e76\u91c7\u7528\u8bfb\u5feb\u7167\u3001\u5199\u5b9e\u65f6\u7684\u7b56\u7565\u89e3\u51b3\u8bfb\u5199\u51b2\u7a81\uff0c\u540c\u65f6\u57fa\u4e8eReadView\u673a\u5236\u51b3\u5b9a\u5feb\u7167\u8bfb\u7684\u7248\u672c\u3002</p> <p>MVCC\u5b9e\u73b0\u9700\u8981\u6570\u636e\u5e93\u4e2d\u7684\u884c\u8bb0\u5f55\u76843\u4e2a\u9690\u5f0f\u5b57\u6bb5\uff0cundo log\u65e5\u5fd7\u3001readView\u3002</p> <p>\u5f53\u524d\u8bfb\uff1a\u8bfb\u53d6\u6700\u65b0\u7684\u7248\u672c\u3002\u5bf9\u5e94SQL\uff1a<code>select ... for update</code>,  <code>select ... lock in share mode</code>,  <code>update</code>,  <code>insert</code>,  <code>delete</code>\u3002</p> <p>\u5feb\u7167\u8bfb\uff1a\u8bfb\u53d6\u5386\u53f2\u7248\u672c\u3002\u5bf9\u5e94SQL\uff1a<code>select ...</code>\u3002</p>"},{"location":"MySQL/MySQL%E4%B9%8BMVCC/#undolog","title":"UndoLog\u7248\u672c\u94fe","text":"<p>\u884c\u8bb0\u5f55\u76843\u4e2a\u9690\u5f0f\u5b57\u6bb5\uff1a</p> <ul> <li> <p><code>row_id</code>\uff1a\u6570\u636e\u8868\u6ca1\u5b9a\u4e49\u4e3b\u952e\u65f6\uff0c\u81ea\u52a8\u751f\u6210<code>row_id</code>\u4f5c\u4e3a\u4e3b\u952e\u3002</p> </li> <li> <p><code>trx_id</code>\uff1a\u8bb0\u5f55\u4e86\u65b0\u589e/\u6700\u8fd1\u4fee\u6539\u8fd9\u6761\u884c\u8bb0\u5f55\u7684\u4e8b\u52a1ID\uff0c\u4e8b\u52a1ID\u81ea\u589e\u3002</p> </li> <li> <p><code>roll_pointer</code>\uff1a\u6307\u5411\u4e0a\u4e00\u4e2a\u7248\u672c\u7684\u6570\u636e\uff0c\u5982\u4e0b\u56fe\uff1a</p> </li> </ul> <p>\u5f53\u4e8b\u52a1100\uff08trx_id=100\uff09\u6267\u884c\u4e86 <code>insert into t_user values(1,'\u5f20\u4e09',20);</code>\u4e4b\u540e\uff1a </p> <p>\u5f53\u4e8b\u52a1102\uff08trx_id=102\uff09\u6267\u884c\u4e86 <code>update t_user set name='\u674e\u56db' where id=1;</code>\u4e4b\u540e\uff1a </p> <p>\u5f53\u4e8b\u52a1103\uff08trx_id=103\uff09\u6267\u884c\u4e86 <code>update t_user set name='\u738b\u4e94' where id=1;</code>\u4e4b\u540e\uff1a</p> <p></p>"},{"location":"MySQL/MySQL%E4%B9%8BMVCC/#readview","title":"ReadView","text":"<p>ReadView\u673a\u5236\u4e2d\uff0c\u67094\u4e2a\u91cd\u8981\u7684\u53d8\u91cf\uff1a</p> <ul> <li><code>m_ids</code>\uff1a\u6d3b\u8dc3\u4e8b\u52a1\uff08\u672a\u63d0\u4ea4\u4e8b\u52a1\uff09ID\u3002</li> <li><code>min_trx_id</code>\uff1a<code>m_ids</code>\u4e2d\u6700\u5c0f\u4e8b\u52a1ID\u3002</li> <li><code>max_trx_id</code>\uff1a\u4e0b\u4e00\u4e2a\u8981\u5206\u914d\u7684\u4e8b\u52a1ID\uff08\u4e0d\u662f<code>m_ids</code>\u4e2d\u6700\u5927\u7684\u4e8b\u52a1id + 1\uff09\u3002</li> <li><code>creator_trx_id</code>\uff1a\u751f\u6210ReadView\u7684\u4e8b\u52a1ID\u3002</li> </ul> <p>RC\u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u6bcf\u4e00\u6b21\u5feb\u7167\u8bfb\u90fd\u4f1a\u751f\u6210\u4e00\u4e2a\u6700\u65b0\u7684ReadView\u3002</p> <p>RR\u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u53ea\u6709\u7b2c\u4e00\u6b21\u5feb\u7167\u8bfb\u624d\u4f1a\u751f\u6210\u4e00\u4e2a\u6700\u65b0\u7684ReadView\u3002</p> <p>\u8be6\u7ec6\u7b97\u6cd5\u6682\u672a\u603b\u7ed3\u3002</p>"},{"location":"MySQL/MySQL%E4%BA%8B%E5%8A%A1/","title":"MySQL \u4e8b\u52a1","text":"<p>\u53c2\u8003\u6587\u7ae0\uff1a</p> <p>MySQL\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b\u548c\u5b9e\u73b0\u539f\u7406</p> <p>\u95ee\u9898\uff1a</p> <ol> <li>\u4e8b\u52a1\u662f\u4ec0\u4e48\uff1f</li> </ol> <p>\u7b54\u6848\uff1a\u6570\u636e\u5e93\u4e8b\u52a1\u662f\u6307\u4e00\u7cfb\u5217\u64cd\u4f5c\u7684\u96c6\u5408\u3002\u4e8b\u52a1\u8981\u4e48\u6210\u529f\uff0c\u8981\u4e48\u5931\u8d25\u3002\u5047\u5b9a\u5bf9\u4e8e\u201d\u53d6\u94b1\u4e8b\u52a1\u201c\uff0c\u5176\u4e2d\u5305\u542b5\u4e2a\u64cd\u4f5c\u3002\u90a3\u4e48\u8fd95\u4e2a\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6210\u529f\uff0c\u8981\u4e48\u5168\u90e8\u5931\u8d25\u3002</p> <ol> <li> <p>\u4e8b\u52a1\u7684\u56db\u5927\u7279\u6027\uff08<code>ACID</code>\uff09\u662f\u4ec0\u4e48\uff1f</p> </li> <li> <p>\u539f\u5b50\u6027\uff08Atomicity\uff09\uff1a\u4e8b\u52a1\u662f\u6700\u5c0f\u7684\u6267\u884c\u5355\u5143\u3002</p> </li> <li> <p>\u4e00\u81f4\u6027\uff08Consistency\uff09\uff1a\u7cfb\u7edf\u4ece\u4e00\u4e2a\u6b63\u786e\u7684\u72b6\u6001\uff0c\u53d8\u4e3a\u53e6\u4e00\u4e2a\u6b63\u786e\u7684\u72b6\u6001\u3002\u6bd4\u5982\u8f6c\u8d26\u7684\u8fc7\u7a0b\u4e2d\uff0c\u8f6c\u8d26\u53cc\u65b9\u7684\u603b\u91d1\u989d\u56fa\u5b9a\uff0c\u4e00\u65b9\u90fd\u5230100\u5143\uff0c\u53e6\u4e00\u65b9\u5c31\u5f97\u652f\u51fa100\u5143\u3002</p> </li> <li> <p>\u9694\u79bb\u6027\uff08Isolation\uff09\uff1a\u4e8b\u52a1\u4e4b\u95f4\u76f8\u4e92\u4e0d\u5e72\u6270\u3002</p> </li> <li> <p>\u6301\u4e45\u6027\uff08Durability\uff09\uff1a\u4e00\u65e6\u4e8b\u52a1\u63d0\u4ea4\uff0c\u6240\u505a\u7684\u4fee\u6539\u5c06\u6c38\u8fdc\u4fdd\u5b58\u5728\u6570\u636e\u5e93\u4e2d\u3002</p> </li> <li> <p>\u4e8b\u52a1\u9694\u79bb\u662f\u4ec0\u4e48\uff1f</p> </li> </ol> <p>\u7b54\u6848\uff1a\u4e3e\u4e2a\u4f8b\u5b50\u3002\u5b58\u94b1\u548c\u53d6\u94b1\u5206\u522b\u662f\u4e00\u4e2a\u4e8b\u52a1\u3002\u4e24\u4e2a\u4e8b\u52a1\u5728\u540c\u65f6\u6267\u884c\u7684\u65f6\u5019\uff0c\u6211\u4eec\u8981\u91c7\u7528\u4e00\u5b9a\u7684\u9694\u79bb\u63aa\u65bd\uff0c\u4e5f\u5373\u4eba\u4e3a\u5b89\u6392\u5982\u4f55\u540c\u65f6\u6267\u884c\u4e24\u4e2a\u4e8b\u52a1\u3002</p> <ol> <li>\u4e8b\u52a1\u7684\u9694\u79bb\u6709\u54ea\u51e0\u4e2a\u7ea7\u522b\uff1f\u6bcf\u4e2a\u9694\u79bb\u7ea7\u522b\u5206\u522b\u89e3\u51b3\u4e86\u4ec0\u4e48\u95ee\u9898\uff1f</li> </ol> \u9694\u79bb\u7ea7\u522b \u810f\u8bfb \u4e0d\u53ef\u91cd\u590d\u8bfb \u5e7b\u8bfb \u8bfb\u672a\u63d0\u4ea4 \u2718 \u2718 \u2718 \u8bfb\u5df2\u63d0\u4ea4 \u2714 \u2718 \u2718 \u53ef\u91cd\u590d\u8bfb \u2714 \u2714 \u2718 \u4e32\u884c\u5316 \u2714 \u2714 \u2714 <ol> <li>\u4ec0\u4e48\u662f\u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u3001\u5e7b\u8bfb\uff1f\uff08\u5047\u5b9a\u6709\u4e8b\u52a1A\u548c\u4e8b\u52a1B\uff0c\u5c5e\u6027money = 1000\uff09</li> </ol> <p>\u7b54\u6848\uff1a</p> <ol> <li>\u810f\u8bfb\u662f\u6307\u4e8b\u52a1A\u64cd\u4f5c<code>money = money - 300</code>\uff0c\u4f46\u662f\u5e76\u672acommit\u3002\u8fd9\u65f6\u4e8b\u52a1B\u6070\u597d\u8bfb\u53d6\u5230\u7684\u7ed3\u679c\u662f<code>money = 700</code>\u3002\u810f\u8bfb\u7684\u98ce\u9669\u5728\u4e8e\u4e8b\u52a1A\u4e00\u65e6\u505arollback\u64cd\u4f5c\uff0c\u90a3\u4e48<code>money = 1000</code>\u3002\u4e00\u53e5\u8bdd\uff1a\u810f\u8bfb\u5c31\u662f\u4e8b\u52a1A\u8bfb\u53d6\u4e86\u4e8b\u52a1B\u4fee\u6539\u4f46\u5e76\u672a\u63d0\u4ea4\u7684\u6570\u636e\u3002</li> <li>\u4e0d\u53ef\u91cd\u590d\u8bfb\u662f\u6307\u4e8b\u52a1A\u7b2c\u4e00\u6b21\u67e5\u8be2<code>money = 1000</code>\uff0c\u63a5\u7740\u4e8b\u52a1B\u4e2d\u64cd\u4f5c<code>money = money - 300</code>\uff0c\u5e76\u4e14commit\u3002\u6b64\u65f6\u4e8b\u52a1A\u4e2d\u518d\u6b21\u67e5\u8be2\u7684\u7ed3\u679c\u662f<code>money = 700</code>\u3002\u7531\u4e8e\u4e8b\u52a1\u5177\u6709\u539f\u5b50\u6027\uff0c\u56e0\u6b64\u4e8b\u52a1A\u5728commit\u4e4b\u524d\u7684\u4efb\u4f55\u65f6\u95f4\u67e5\u8be2\u76f8\u540c\u8bb0\u5f55\u90fd\u8981\u5f97\u5230\u76f8\u540c\u7684\u503c\u3002\u4e00\u53e5\u8bdd\uff1a\u4e0d\u53ef\u91cd\u590d\u8bfb\u662f\u6307\u5728\u5e76\u53d1\u66f4\u65b0\u65f6\uff0c\u4e8b\u52a1A\u524d\u540e\u67e5\u8be2\u76f8\u540c\u6570\u636e\u65f6\u7684\u524d\u540e\u4e0d\u4e00\u81f4\u3002</li> <li> <p>\u5e7b\u8bfb\uff1a\u4e8b\u52a1A\u6309\u7167\u4e00\u5b9a\u6761\u4ef6\u8bfb\u53d6\u6570\u636e\uff0c\u671f\u95f4\u4e8b\u52a1B\u63d2\u5165\u4e86\u76f8\u540c\u641c\u7d22\u6761\u4ef6\u7684\u65b0\u6570\u636e\u3002\u4e8b\u52a1A\u518d\u6b21\u6309\u7167\u539f\u5148\u6761\u4ef6\u8bfb\u53d6\u6570\u636e\uff0c\u53d1\u73b0\u4e86\u4e8b\u52a1B\u4ea7\u751f\u7684\u65b0\u6570\u636e\uff0c\u4e00\u53e5\u8bdd\uff1a\u4e8b\u52a1A\u5728\u4e0d\u540c\u65f6\u95f4\u6267\u884c\u76f8\u540c\u6761\u4ef6\u7684\u67e5\u8be2\uff0c\u6570\u636e\u6761\u6570\u4e0d\u4e00\u81f4\u3002</p> </li> <li> <p>\u4ec0\u4e48\u662f\u3010\u4e32\u884c\u5316\u3011\uff1f</p> </li> </ol> <p>\u5047\u5b9a\u6709\u4e8b\u52a1A, B, C, D, E, F\u3002A\u67e5\u8be2\uff0cB\u67e5\u8be2\uff0cC\u4fee\u6539\uff0cD\u67e5\u8be2\uff0cE\u4fee\u6539\uff0cF\u67e5\u8be2\u3002\u521a\u5f00\u59cb\u76f4\u63a5\u6267\u884cA, B\u3002C\u672a\u6267\u884c\uff0c\u5219\u4f1a\u963b\u585e\u540e\u9762\u7684\u6240\u6709\u4e8b\u52a1\u3002A,Bcommit\u540e\u6267\u884cC\uff0c\u7136\u540e\u6267\u884cD\u3002\u5f53E\u672a\u6267\u884c\u65f6\uff0c\u4f1a\u963b\u585eF\u3002\u5f53Ecommit\u540e\uff0c\u6267\u884cF\u3002</p>"},{"location":"MySQL/MySQL%E5%87%A0%E7%A7%8Dlog/","title":"MySQL\u51e0\u79cdlog","text":"<p>[toc]</p>"},{"location":"MySQL/MySQL%E5%87%A0%E7%A7%8Dlog/#binlog","title":"BINLOG","text":""},{"location":"MySQL/MySQL%E5%87%A0%E7%A7%8Dlog/#_1","title":"\u662f\u4ec0\u4e48","text":"<p>\u7528\u4e8e\u8bb0\u5f55\u6570\u636e\u5e93\u7684\u589e\u3001\u5220\u3001\u6539\u3001\u8868\u7ed3\u6784\u53d8\u66f4\u64cd\u4f5c\uff0c\u5e76\u4ee5\u4e8c\u8fdb\u5236\u7684\u5f62\u5f0f\u5b58\u653e\u5728\u786c\u76d8\u4e2d\u3002\u4efb\u4f55\u5b58\u50a8\u5f15\u64ce\u90fd\u4f1a\u8bb0\u5f55binlog\u65e5\u5fd7\u3002</p>"},{"location":"MySQL/MySQL%E5%87%A0%E7%A7%8Dlog/#binlog_1","title":"binlog\u5e94\u7528\u573a\u666f","text":"<ol> <li>\u4e3b\u4ece\u590d\u5236\uff1a\u4e3b\u6570\u636e\u5e93\u8bb0\u5f55 binlog\uff0c\u5e76\u5c06\u5176\u53d1\u9001\u7ed9\u4ece\u6570\u636e\u5e93\uff0c\u4ece\u6570\u636e\u5e93\u6839\u636e binlog \u4e2d\u7684\u64cd\u4f5c\u8fdb\u884c\u6570\u636e\u540c\u6b65\uff0c\u4f7f\u5f97\u4ece\u6570\u636e\u5e93\u7684\u6570\u636e\u4e0e\u4e3b\u6570\u636e\u5e93\u4fdd\u6301\u4e00\u81f4\u3002</li> <li>\u6570\u636e\u6062\u590d\u3002</li> </ol>"},{"location":"MySQL/MySQL%E5%87%A0%E7%A7%8Dlog/#binlog_2","title":"binlog\u5237\u76d8","text":"<p>binlog\u5237\u76d8\u662f\u6307\u5c06\u4e8c\u8fdb\u5236\u65e5\u5fd7\u6570\u636e\u4ece\u5185\u5b58\u7f13\u51b2\u533a\u5199\u5165\u78c1\u76d8\u7684\u8fc7\u7a0b\u3002</p> <p><code>sync_binlog</code>\u63a7\u5236\u4e86 binlog \u6570\u636e\u5199\u5165\u78c1\u76d8\u7684\u9891\u7387\u3002</p> <ul> <li><code>0</code>\uff1a\u8868\u793a binlog \u5728\u6bcf\u6b21\u63d0\u4ea4\u4e8b\u52a1\u65f6\uff0c\u90fd\u53ea\u5199\u5165\u5230\u64cd\u4f5c\u7cfb\u7edf\u7f13\u51b2\u533a\uff0c\u7531\u64cd\u4f5c\u7cfb\u7edf\u51b3\u5b9a\u5237\u65b0\u5230\u78c1\u76d8\u7684\u65f6\u673a\uff08\u5f02\u6b65\u5237\u76d8\uff09\u3002</li> <li><code>1</code>\uff1a\u8868\u793a binlog \u5728\u6bcf\u6b21\u63d0\u4ea4\u4e8b\u52a1\u65f6\uff0c\u90fd\u5c06\u6570\u636e\u76f4\u63a5\u5237\u76d8\u5230\u78c1\u76d8\uff0c\u4ee5\u786e\u4fdd\u6570\u636e\u6301\u4e45\u5316\u5b58\u50a8\uff08\u540c\u6b65\u5237\u76d8\uff09\u3002</li> <li><code>N</code>\uff1a\u5176\u4e2d N \u662f\u4e00\u4e2a\u5927\u4e8e 1 \u7684\u503c\uff0c\u8868\u793a binlog \u5728\u6bcf N \u4e2a\u63d0\u4ea4\u4e8b\u52a1\u65f6\uff0c\u624d\u5c06\u6570\u636e\u5237\u76d8\u5230\u78c1\u76d8\u3002\u8fd9\u53ef\u4ee5\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u5e73\u8861\u6027\u80fd\u548c\u6570\u636e\u5b89\u5168\u6027\u3002</li> </ul> <p><code>1</code>\u7684\u6548\u679c\u6700\u597d\uff0c\u4f46\u662f\u6027\u80fd\u8f83\u5dee\u3002</p>"},{"location":"MySQL/MySQL%E5%87%A0%E7%A7%8Dlog/#binlog_3","title":"binlog\u65e5\u5fd7\u7684\u4e09\u79cd\u683c\u5f0f","text":"<p>STATMENT</p> <p>\u8bb0\u5f55\u5185\u5bb9\uff1aSQL\u8bed\u53e5\u3002</p> <p>\u4f18\u70b9\uff1a\u683c\u5f0f\u7b80\u5355\u9ad8\u6548\u3002</p> <p>\u7f3a\u70b9\uff1a\u4f7f\u7528\u968f\u673a\u51fd\u6570\u3001\u65f6\u95f4\u51fd\u6570\u7b49\u64cd\u4f5c\u4f1a\u5bfc\u81f4\u4e3b\u4ece\u6570\u636e\u5e93\u4e0d\u4e00\u81f4\u3002</p> <p>ROW</p> <p>\u8bb0\u5f55\u5185\u5bb9\uff1a\u53d8\u5316\u7684\u884c\u4fe1\u606f\u3002</p> <p>\u4f18\u70b9\uff1a\u6570\u636e\u590d\u5236\u7684\u51c6\u786e\u6027\u3002</p> <p>\u7f3a\u70b9\uff1a\u4ea7\u751f\u66f4\u591a\u7684binlog\u6570\u636e\u3002\u5c24\u5176\u662fALTER table\u64cd\u4f5c\u3002</p> <p>MIXED</p> <p>\u8bb0\u5f55\u5185\u5bb9\uff1aSQL\u8bed\u53e5\u6216\u53d8\u5316\u7684\u884c\u4fe1\u606f\u3002</p> <p>\u4f18\u70b9\uff1a\u96c6\u5927\u6210\u8005\u3002</p> <p>\u7f3a\u70b9\uff1a\u65e0\u3002</p>"},{"location":"MySQL/MySQL%E5%87%A0%E7%A7%8Dlog/#redolog","title":"REDOLOG","text":"<p>Redo Log\u4e3b\u8981\u5e94\u7528\u4e8e\u4fdd\u8bc1\u4e8b\u52a1\u7684\u6301\u4e45\u6027\uff1aRedo Log\u8bb0\u5f55\u4e8b\u52a1\u7684\u66f4\u6539\u64cd\u4f5c\u3002\u5f53\u6570\u636e\u5e93\u53d1\u751f\u6545\u969c\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7Redo Log\u91cd\u65b0\u6267\u884c\u4e8b\u52a1\u7684\u4fee\u6539\u3002</p> <p>Redo Log\u5305\u62ec\u4e24\u90e8\u5206\uff1a\u5185\u5b58\u4e2d\u7684<code>redo log buffer</code>\u548c\u786c\u76d8\u4e2d\u7684<code>redo log file</code>\u3002</p> <p>\u5728\u8ba1\u7b97\u673a\u64cd\u4f5c\u7cfb\u7edf\u4e2d\uff0c\u7528\u6237\u7a7a\u95f4(user space)\u4e0b\u7684\u7f13\u51b2\u533a\u6570\u636e\u4e00\u822c\u60c5\u51b5\u4e0b\u662f\u65e0\u6cd5\u76f4\u63a5\u5199\u5165\u78c1\u76d8\u7684\uff0c\u4e2d\u95f4\u5fc5\u987b\u7ecf\u8fc7\u64cd\u4f5c\u7cfb\u7edf\u5185\u6838\u7a7a\u95f4(kernel space)\u7f13\u51b2\u533a(OS Buffer)\u3002\u56e0\u6b64\uff0c<code>redo log buffer</code>\u5199\u5165<code>redo log file</code>\u5b9e\u9645\u4e0a\u662f\u5148\u5199\u5165OS Buffer\uff0c\u7136\u540e\u518d\u901a\u8fc7\u7cfb\u7edf\u8c03\u7528fsync()\u5c06\u5176\u5237\u5230<code>redo log file</code>\u4e2d\u3002</p> <p>mysql\u652f\u6301\u4e09\u79cd\u5c06<code>redo log buffer</code>\u5199\u5165<code>redo log file</code>\u7684\u65f6\u673a\uff0c\u53ef\u4ee5\u901a\u8fc7<code>innodb_flush_log_at_trx_commit</code>\u53c2\u6570\u914d\u7f6e\uff0c\u5404\u53c2\u6570\u503c\u542b\u4e49\u5982\u4e0b\uff1a</p> <p></p> <p></p>"},{"location":"MySQL/MySQL%E5%87%A0%E7%A7%8Dlog/#undo-log","title":"Undo Log","text":"<p>Undo\u662f\u6307\u56de\u6eda\uff0c\u800c\u4e0d\u662f\u6ca1\u6709\u505a\u3002</p> <p>\u6570\u636e\u5e93\u4e8b\u52a1\u56db\u5927\u7279\u6027\u4e2d\u6709\u4e00\u4e2a\u662f\u539f\u5b50\u6027\uff0c\u5177\u4f53\u6765\u8bf4\u5c31\u662f \u539f\u5b50\u6027\u662f\u6307\u5bf9\u6570\u636e\u5e93\u7684\u4e00\u7cfb\u5217\u64cd\u4f5c\uff0c\u8981\u4e48\u5168\u90e8\u6210\u529f\uff0c\u8981\u4e48\u5168\u90e8\u5931\u8d25\uff0c\u4e0d\u53ef\u80fd\u51fa\u73b0\u90e8\u5206\u6210\u529f\u7684\u60c5\u51b5\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0c\u539f\u5b50\u6027\u5e95\u5c42\u5c31\u662f\u901a\u8fc7undo log\u5b9e\u73b0\u7684\u3002undo log\u4e3b\u8981\u8bb0\u5f55\u4e86\u6570\u636e\u7684\u903b\u8f91\u53d8\u5316\uff0c\u6bd4\u5982\u4e00\u6761INSERT\u8bed\u53e5\uff0c\u5bf9\u5e94\u4e00\u6761DELETE\u7684undo log\uff0c\u5bf9\u4e8e\u6bcf\u4e2aUPDATE\u8bed\u53e5\uff0c\u5bf9\u5e94\u4e00\u6761\u76f8\u53cd\u7684UPDATE\u7684undo log\uff0c\u8fd9\u6837\u5728\u53d1\u751f\u9519\u8bef\u65f6\uff0c\u5c31\u80fd\u56de\u6eda\u5230\u4e8b\u52a1\u4e4b\u524d\u7684\u6570\u636e\u72b6\u6001\u3002</p>"},{"location":"MySQL/MySQL%E5%9F%BA%E7%A1%80/","title":"MySQL\u57fa\u7840","text":"<p>[toc]</p>"},{"location":"MySQL/MySQL%E5%9F%BA%E7%A1%80/#mysql_1","title":"MySQL\u7cfb\u7edf\u6846\u67b6","text":"<ol> <li>\u8fde\u63a5\u6c60\u3002</li> </ol> <p><code>mysql    -- \u6700\u5927\u8fde\u63a5\u6570    show VARIABLES LIKE 'max_connections';    -- \u5355\u6b21\u6700\u5927\u6570\u636e\u62a5\u6587    show VARIABLES LIKE 'max_allowed_packet';</code></p> <ol> <li>SQL\u89e3\u6790\u5668\uff1a\u89e3\u6790SQL\u3002</li> <li>SQL\u4f18\u5316\u5668\uff1a\u4f18\u5316SQL\u8bed\u53e5\u3002</li> <li>\u5b58\u50a8\u5f15\u64ce\uff1a\u5904\u7406SQL\u6267\u884c\u8ba1\u5212\uff0c\u5b9e\u65bd\u8bfb\u5199\u64cd\u4f5c\u3002</li> <li>innoDB\uff1a\u9ed8\u8ba4\u3002</li> <li>MyISAM\uff1a\u4e0d\u5e38\u7528\u3002</li> <li>......</li> </ol>"},{"location":"MySQL/MySQL%E5%9F%BA%E7%A1%80/#mysql_2","title":"MySQL\u6570\u636e\u5199\u5165\u539f\u7406","text":"<ol> <li> <p>\u8bb0\u5f55Undo Log\u3002</p> </li> <li> <p>\u5c06\u4fee\u6539\u7684\u6570\u636e\u6682\u65f6\u5199\u5165\u5185\u5b58\u7684<code>Buffer Pool</code>\u4e2d\u3002</p> </li> <li> <p>\u4e3a\u9632\u6b62<code>Buffer Pool</code>\u4e2d\u7684\u6570\u636e\u5f02\u5e38\u4e22\u5931\uff0c\u7279\u610f\u7528<code>Redo Log</code>\u8bb0\u5f55\u53d8\u66f4\u6570\u636e\u3002\u800c<code>Redo Log Buffer</code>\u662f<code>Redo Log</code>\u4e34\u65f6\u5199\u5165\u5185\u5b58\u7684\u7f13\u5b58\u3002</p> </li> </ol> <p><code>Redo Log</code>\u5237\u76d8\u7b56\u7565\uff1a<code>innodb_flush_log_at_trx_commit</code>\u3002</p> <ol> <li>\u503c\u4e3a1\uff08\u9ed8\u8ba4\uff09\uff1a\u6bcf\u6b21\u63d0\u4ea4\u4e8b\u52a1\u524d\uff0c\u5c06\u4fe1\u606f\u5199\u5165<code>Redo Log Buffer</code>\uff0c\u540c\u65f6\u5c06\u4fe1\u606f\u6dfb\u52a0\u5230\u64cd\u4f5c\u7cfb\u7edf\u7684\u5185\u5b58\u4e2d\uff0c\u5e76\u7acb\u5373\u5237\u76d8\u3002</li> <li>\u503c\u4e3a0\uff1a\u6bcf\u6b21\u63d0\u4ea4\u4e8b\u52a1\u524d\uff0c\u5c06\u4fe1\u606f\u5199\u5165<code>Redo Log Buffer</code>\uff0c\u6bcf\u96941s\uff0c\u653e\u5165\u7cfb\u7edf\u5185\u5b58\u5e76\u5237\u76d8\u4e00\u6b21\u3002</li> <li> <p>\u503c\u4e3a2\uff1a\u6bcf\u6b21\u63d0\u4ea4\u4e8b\u52a1\u524d\uff0c\u5c06\u4fe1\u606f\u5199\u5165<code>Redo Log Buffer</code>\uff0c\u540c\u65f6\u5c06\u4fe1\u606f\u6dfb\u52a0\u5230\u64cd\u4f5c\u7cfb\u7edf\u7684\u5185\u5b58\u4e2d\uff0c\u6bcf\u96941s\uff0c\u5237\u76d8\u4e00\u6b21\u3002</p> </li> <li> <p>\u5237\u76d8\u64cd\u4f5c\u3002</p> </li> <li> <p><code>Redo Log</code>\u5199\u5165\u7684\u540c\u65f6\uff0c\u8fdb\u884c<code>Binlog</code>\u7684\u5237\u76d8\u3002<code>Binlog</code>\u7684\u4f5c\u7528\u662f\u5386\u53f2\u6570\u636e\u67e5\u8be2\u3001\u6570\u636e\u5e93\u5907\u4efd\u548c\u6062\u590d\u3001\u4e3b\u4ece\u590d\u5236\u7b49\u529f\u80fd\u3002</p> </li> </ol>"},{"location":"MySQL/MySQL%E5%9F%BA%E7%A1%80/#mysql_3","title":"MySQL\u5b58\u50a8\u7ed3\u6784","text":"<p>\u6570\u636e\u4f1a\u5b58\u653e\u4e0e\u5185\u5b58\u548c\u78c1\u76d8\uff0c\u4f46\u6700\u7ec8\u4f1a\u5b58\u653e\u5230\u78c1\u76d8\u3002\u4e0b\u9762\u7740\u91cd\u8ba8\u8bba\u78c1\u76d8\u5982\u4f55\u7ba1\u7406\u6570\u636e\u3002</p> <p>\u9ed8\u8ba4\u4e3a\u6bcf\u4e2a\u8868\u521b\u5efa\u4e00\u4e2a<code>ibd</code>\u6587\u4ef6\uff0c<code>show variables like 'innodb_file_per_table';</code>\u53ef\u67e5\u770b\u662f\u5426\u5f00\u542f\u3002</p> <p>mysql\u4e2d\u6240\u6709\u6570\u636e\u90fd\u4f1a\u88ab\u5b58\u653e\u5230\u8868\u7a7a\u95f4\u4e2d\uff0c\u8868\u7a7a\u95f4\u5206\u4e3a5\u7c7b\uff1a\u7cfb\u7edf\u8868\u7a7a\u95f4\u3001\u72ec\u7acb\u8868\u7a7a\u95f4\uff08ibd\u6587\u4ef6\uff09......\u7740\u91cd\u8bb2ibd\u6587\u4ef6\u3002</p> <p>\u9875\uff1a16KB\uff0c\u4e00\u4e2a\u9875\u5bf9\u5e94\u4e00\u4e2a\u7d22\u5f15\u6811\u8282\u70b9\uff0c\u9875\u5206\u4e3a12\u79cd\uff0c\u6700\u5e38\u7528\u7684\u662f\u201c\u7d22\u5f15\u9875\u201d\uff0c\u7528\u4e8e\u5b58\u50a8\u6570\u636e\u548c\u7d22\u5f15\u3002\u6570\u636e\u884c\u5206\u4e3a4\u7c7b\uff0c\u67e5\u770b\u884c\u7c7b\u578b\uff1a<code>SELECT t.SPACE, t.NAME, t.ROW_FORMAT FROM information_schema.INNODB_SYS_TABLESPACES t WHERE name='\u5e93\u540d/\u8868\u540d'</code>\u3002\u884c\u6700\u59278KB\uff0c\u4f46\u5927\u5c0f\u4e0d\u56fa\u5b9a\u3002\u4e00\u884c\u5305\u62ec\u771f\u5b9e\u6570\u636e\u548c\u989d\u5916\u6570\u636e\u3002</p> <p>\u533a\uff1a\u5305\u542b64\u9875\uff081MB\uff09\uff0c\u6570\u636e\u5c3d\u91cf\u6328\u5728\u4e00\u8d77\uff0c\u8de8\u9875\u8bfb\u533a\u65f6\u51cf\u5c11\u78c1\u5934\u79fb\u52a8\u3002\u9891\u7e41\u8bfb\u533a\u7684\u533a\u653e\u5165\u5185\u5b58\u3002</p> <p>\u7ec4\uff1a\u5305\u542b256\u4e2a\u533a\u3002</p> <p>\u4e0d\u540c\u5b58\u50a8\u5f15\u64ce\u7684\u7ed3\u6784\u4e0d\u4e00\u6837\u3002<code>InnoDB</code>\u5f15\u64ce\u4e0b\uff0c\u65b0\u5efa\u8868\u65f6\u4f1a<code>*.ibd</code>\u6587\u4ef6\uff0c\u7528\u4e8e\u8bb0\u5f55\u8868\u7ed3\u6784\u3001\u6570\u636e\u3001\u7d22\u5f15\u7b49\u3002\u5177\u4f53\u7ed3\u6784\u5982\u4e0b\uff1a</p> <p></p> <p>\u5176\u4e2d\u9875\u662f\u57fa\u672c\u5355\u4f4d\u3002</p>"},{"location":"MySQL/MySQL%E5%9F%BA%E7%A1%80/#sql","title":"SQL\u6267\u884c\u539f\u7406","text":"<ol> <li> <p>\u8fde\u63a5\u9a71\u52a8\u5fc5\u987b\u4e00\u6b21\u6027\u5c06SQL\u8bed\u53e5\u53d1\u9001\u7ed9\u8fde\u63a5\u6c60\u3002\u53ef\u8bbe\u7f6e<code>max_allowed_packet</code>\u4f20\u8f93\u6570\u636e\u5305\u5927\u5c0f\u4e0a\u9650\u3002</p> </li> <li> <p>\u67e5\u8be2\u7f13\u5b58\u5728MySQL8.0\u4e2d\u88ab\u5e9f\u5f03\u3002\u5e9f\u5f03\u7684\u539f\u56e0\u5982\u4e0b\uff1a</p> </li> <li> <p>\u7f13\u5b58\u547d\u4e2d\u7387\u4f4e\u3002</p> </li> <li>\u5efa\u7acb\u65b0\u7684\u65e0\u7528\u7684\u7f13\u5b58\u3002</li> <li> <p>\u6570\u636e\u4e0e\u7f13\u5b58\u540c\u6b65\u9700\u8981\u4e00\u5b9a\u4ee3\u4ef7\u3002</p> </li> <li> <p>SQL\u89e3\u91ca\u5668\u901a\u8fc7\u8bcd\u6cd5\u5206\u6790\u3001\u8bed\u6cd5\u5206\u6790SQL\u8bed\u53e5\u3002</p> </li> <li> <p>\u9884\u5904\u7406\u5668\u4f1a\u62c6\u5206\u8bf7\u6c42\uff0c\u5148\u63d0\u4ea4SQL\u6a21\u7248\u8bed\u53e5\uff0c\u518d\u63d0\u4ea4\u53c2\u6570\u5e76\u6267\u884c\u3002\u591a\u6b21\u91cd\u590d\u7684\u8bed\u53e5\u53ea\u9700\u63d0\u4ea4\u4e00\u6b21\u6a21\u7248\uff0c\u540e\u7eed\u4fee\u6539\u53c2\u6570\u5373\u53ef\u3002</p> </li> <li> <p>SQL\u4f18\u5316\u5668\u7528\u4e8e\u4f18\u5316SQL\uff0c\u5e38\u7528\u6307\u4ee4\u6709\uff1a</p> </li> </ol> <p><code>mysql    -- \u6253\u5f00\u4f18\u5316\u6210\u672c\u5206\u6790\u8f68\u8ff9    SHOW VARIABLES LIKE 'optimizer_trace';    SET query_cache_type = 'enabled=on';    -- \u67e5\u9605\u540e\u4e00\u5b9a\u8981\u8bb0\u5f97\u5173\u95ed    SET query_cache_type = 'enabled=off';</code></p> <p>\u6ce8\u610f\uff1a\u65e0\u6cd5\u8ba1\u7b97\u5b50\u67e5\u8be2\u548c\u5305\u542bUNION\u7684\u67e5\u8be2\u3002</p> <ol> <li> <p>\u4f18\u5316\u540e\u7684SQL\u4f20\u8f93\u7ed9SQL\u6267\u884c\u5668\u3002</p> </li> <li> <p>\u4f18\u5316\u5668\u6267\u884c\u65f6\uff0c\u6bcf\u4e00\u5f20\u8868\u90fd\u6709\u4e00\u4e2ahandler\u5b9e\u4f8b\u3002</p> </li> <li> <p>\u901a\u8fc7TCP\u534f\u8bae\u5c06\u6570\u636e\u8fd4\u56de\u7ed9MySQL\u5ba2\u6237\u7aef\u3002</p> </li> </ol>"},{"location":"MySQL/MySQL%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7/","title":"MySQL\u6027\u80fd\u5206\u6790\u5de5\u5177","text":"<p>[toc]</p>"},{"location":"MySQL/MySQL%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7/#_1","title":"\u6570\u636e\u51c6\u5907","text":"<p>\u76f4\u63a5\u7528\u3002</p> <pre><code># \u8868\u4e00\nCREATE TABLE s1 (\nid INT AUTO_INCREMENT,\nkey1 VARCHAR(100),\nkey2 INT,\nkey3 VARCHAR(100),\nkey_part1 VARCHAR(100),\nkey_part2 VARCHAR(100),\nkey_part3 VARCHAR(100),\ncommon_field VARCHAR(100),\nPRIMARY KEY (id),\nINDEX idx_key1 (key1),\nUNIQUE INDEX idx_key2 (key2),\nINDEX idx_key3 (key3),\nINDEX idx_key_part(key_part1, key_part2, key_part3)\n) ENGINE=INNODB CHARSET=utf8;\n\n# \u8868\u4e8c\nCREATE TABLE s2 (\nid INT AUTO_INCREMENT,\nkey1 VARCHAR(100),\nkey2 INT,\nkey3 VARCHAR(100),\nkey_part1 VARCHAR(100),\nkey_part2 VARCHAR(100),\nkey_part3 VARCHAR(100),\ncommon_field VARCHAR(100),\nPRIMARY KEY (id),\nINDEX idx_key1 (key1),\nUNIQUE INDEX idx_key2 (key2),\nINDEX idx_key3 (key3),\nINDEX idx_key_part(key_part1, key_part2, key_part3)\n) ENGINE=INNODB CHARSET=utf8;\n\n# \u8bbe\u7f6e\u53c2\u6570log_bin_trust_function_creators\nset global log_bin_trust_function_creators=1; # \u4e0d\u52a0global\u53ea\u662f\u5f53\u524d\u7a97\u53e3\u6709\u6548\u3002\n\n# \u521b\u5efa\u51fd\u6570\nDELIMITER //\nCREATE FUNCTION rand_string1(n INT)\nRETURNS VARCHAR(255) #\u8be5\u51fd\u6570\u4f1a\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\nBEGIN\nDECLARE chars_str VARCHAR(100) DEFAULT\n'abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ';\nDECLARE return_str VARCHAR(255) DEFAULT '';\nDECLARE i INT DEFAULT 0;\nWHILE i &lt; n DO\nSET return_str =CONCAT(return_str,SUBSTRING(chars_str,FLOOR(1+RAND()*52),1));\nSET i = i + 1;\nEND WHILE;\nRETURN return_str;\nEND //\nDELIMITER ;\n\n# \u521b\u5efa\u5f80s1\u8868\u4e2d\u63d2\u5165\u6570\u636e\u7684\u5b58\u50a8\u8fc7\u7a0b\nDELIMITER //\nCREATE PROCEDURE insert_s1 (IN min_num INT (10),IN max_num INT (10))\nBEGIN\nDECLARE i INT DEFAULT 0;\nSET autocommit = 0;\nREPEAT\nSET i = i + 1;\nINSERT INTO s1 VALUES(\n(min_num + i),\nrand_string1(6),\n(min_num + 30 * i + 5),\nrand_string1(6),\nrand_string1(10),\nrand_string1(5),\nrand_string1(10),\nrand_string1(10));\nUNTIL i = max_num\nEND REPEAT;\nCOMMIT;\nEND //\nDELIMITER ;\n\n# \u521b\u5efa\u5f80s2\u8868\u4e2d\u63d2\u5165\u6570\u636e\u7684\u5b58\u50a8\u8fc7\u7a0b\nDELIMITER //\nCREATE PROCEDURE insert_s2 (IN min_num INT (10),IN max_num INT (10))\nBEGIN\nDECLARE i INT DEFAULT 0;\nSET autocommit = 0;\nREPEAT\nSET i = i + 1;\nINSERT INTO s2 VALUES(\n(min_num + i),\nrand_string1(6),\n(min_num + 30 * i + 5),\nrand_string1(6),\nrand_string1(10),\nrand_string1(5),\nrand_string1(10),\nrand_string1(10));\nUNTIL i = max_num\nEND REPEAT;\nCOMMIT;\nEND //\nDELIMITER ;\n\n# s1\u8868\u6570\u636e\u7684\u6dfb\u52a01\u4e07\u6761\u8bb0\u5f55\uff1a\nCALL insert_s1(10001,10000);\n\n# s2\u8868\u6570\u636e\u7684\u6dfb\u52a01\u4e07\u6761\u8bb0\u5f55\uff1a\nCALL insert_s2(10001,10000);\n\n</code></pre>"},{"location":"MySQL/MySQL%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7/#explain","title":"EXPLAIN\u5404\u5217\u7684\u4f5c\u7528","text":""},{"location":"MySQL/MySQL%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7/#table","title":"table","text":"<p>\u4e0d\u8bba\u67e5\u8be2\u8bed\u53e5\u6709\u591a\u590d\u6742\uff0c\u91cc\u8fb9\u5305\u542b\u4e86\u591a\u5c11\u4e2a\u8868 \uff0c\u5230\u6700\u540e\u4e5f\u662f\u9700\u8981\u5bf9\u6bcf\u4e2a\u8868\u8fdb\u884c\u5355\u8868\u8bbf\u95ee \u7684\uff0c\u6240\u4ee5MySQL\u89c4\u5b9aEXPLAIN\u8bed\u53e5\u8f93\u51fa\u7684\u6bcf\u6761\u8bb0\u5f55\u90fd\u5bf9\u5e94\u7740\u67d0\u4e2a\u5355\u8868\u7684\u8bbf\u95ee\u65b9\u6cd5\uff0c\u8be5\u6761\u8bb0\u5f55\u7684table\u5217\u4ee3\u8868\u7740\u8be5\u8868\u7684\u8868\u540d\uff08\u6709\u65f6\u4e0d\u662f\u771f\u5b9e\u7684\u8868\u540d\u5b57\uff0c\u53ef\u80fd\u662f\u7b80\u79f0\uff09\u3002</p> <p>\u6848\u4f8b\uff1a</p> <pre><code>EXPLAIN SELECT * FROM s1;\n# s1\u662f\u9a71\u52a8\u8868\uff0cs2\u662f\u88ab\u9a71\u52a8\u8868\nEXPLAIN SELECT * FROM s1 INNER JOIN s2;\n</code></pre>"},{"location":"MySQL/MySQL%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7/#id","title":"id","text":"<p>\u5728\u4e00\u4e2a\u5927\u7684\u67e5\u8be2\u8bed\u53e5\u4e2d\u6bcf\u4e2aSELECT\u5173\u952e\u5b57\u90fd\u5bf9\u5e94\u4e00\u4e2a\u552f\u4e00\u7684id\uff0c\u901a\u5e38\u51fa\u73b0\u4e86\u51e0\u4e2aselect\u5173\u952e\u5b57\u5c31\u5bf9\u5e94\u51e0\u4e2aid\u3002</p> <ul> <li>id\u5982\u679c\u76f8\u540c\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e00\u7ec4\uff0c\u4ece\u4e0a\u5f80\u4e0b\u987a\u5e8f\u6267\u884c\u3002</li> <li>\u5728\u6240\u6709\u7ec4\u4e2d\uff0cid\u503c\u8d8a\u5927\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u8d8a\u5148\u6267\u884c\u3002</li> <li>\u4e00\u4e2aid\u53f7\u4ee3\u8868\u4e00\u8d9f\u72ec\u7acb\u7684\u67e5\u8be2\uff0c\u4e00\u4e2aSQL\u7684\u67e5\u8be2\u8d9f\u6570\u8d8a\u5c11\u8d8a\u597d\u3002</li> </ul> <pre><code> EXPLAIN SELECT * FROM s1 WHERE key1 = 'a';\n\n #\u591a\u8868\u67e5\u8be2\n EXPLAIN SELECT * FROM s1 INNER JOIN s2;\n\n\n EXPLAIN SELECT * FROM s1 WHERE key1 IN (SELECT key1 FROM s2) OR key3 = 'a';\n\n # \u67e5\u8be2\u4f18\u5316\u5668\u53ef\u80fd\u5bf9\u6d89\u53ca\u5b50\u67e5\u8be2\u7684\u67e5\u8be2\u8bed\u53e5\u8fdb\u884c\u91cd\u5199,\u8f6c\u53d8\u4e3a\u591a\u8868\u67e5\u8be2\u7684\u64cd\u4f5c\n EXPLAIN SELECT * FROM s1 WHERE key1 IN (SELECT key2 FROM s2 WHERE common_field = 'a');\n\n\n # Union\u53bb\u91cd--&gt;UNION\u53d6\u5e76\u96c6\u5e76\u53bb\u91cd\u65f6\u4ea7\u751f\u4e00\u4e2a\u4e34\u65f6\u8868\n EXPLAIN SELECT * FROM s1 UNION SELECT * FROM s2;\n\n\n # UNION ALL\u4e0d\u7528\u53bb\u91cd\uff0c\u53ea\u6709\u4e24\u4e2aid/\u884c\n EXPLAIN SELECT * FROM s1  UNION ALL SELECT * FROM s2;\n\n</code></pre>"},{"location":"MySQL/MySQL%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7/#select_type","title":"select_type","text":"<p>\u4e00\u6761\u5927\u7684\u67e5\u8be2\u8bed\u53e5\u91cc\u8fb9\u53ef\u4ee5\u5305\u542b\u82e5\u5e72\u4e2aSELECT\u5173\u952e\u5b57\uff0c\u6bcf\u4e2aSELECT\u5173\u952e\u5b57\u4ee3\u8868\u7740\u4e00\u4e2a\u5c0f\u7684\u67e5\u8be2\u8bed\u53e5\u3002\u53ea\u8981\u77e5\u9053\u4e86\u67d0\u4e2a\u5c0f\u67e5\u8be2\u7684select_type\u5c5e\u6027\uff0c\u5c31\u77e5\u9053\u4e86\u8fd9\u4e2a\u5c0f\u67e5\u8be2\u5728\u6574\u4e2a\u5927\u67e5\u8be2\u4e2d\u626e\u6f14\u4e86\u4e00\u4e2a\u4ec0\u4e48\u89d2\u8272\u3002</p> <p>\u4e2a\u4eba\u611f\u89c9\u4e0d\u592a\u91cd\u8981\uff0c\u9700\u8981\u7684\u65f6\u5019\u7ee7\u7eed\u8865\u5145\u5427\u3002</p>"},{"location":"MySQL/MySQL%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7/#type","title":"type\u2606","text":"<p>\u6267\u884c\u8ba1\u5212\u7684\u4e00\u6761\u8bb0\u5f55\u5c31\u4ee3\u8868\u7740MySQL\u5bf9\u67d0\u4e2a\u8868\u7684\u6267\u884c\u67e5\u8be2\u65f6\u7684\u8bbf\u95ee\u65b9\u6cd5\uff0c\u5176\u4e2d\u7684type\u5217\u5c31\u8868\u660e\u4e86\u8fd9\u4e2a\u8bbf\u95ee\u65b9\u6cd5\u662f\u5565\uff0c\u662f\u8f83\u4e3a\u91cd\u8981\u7684\u4e00\u4e2a\u6307\u6807\u3002</p> <p>\u6027\u80fd\u6392\u5e8f\uff1a<code>system</code> &gt; <code>const</code> &gt; <code>eq_rep</code> &gt; <code>ref</code> &gt; <code>ref_or_null</code> &gt; <code>index_merge</code> &gt; <code>unique_subquery</code> &gt; <code>index_subquery</code> &gt; <code>range</code> &gt; <code>index</code> &gt; <code>all</code>\u3002</p> <ol> <li><code>system</code>\uff1ainnodb\u5f15\u64ce\u4e2d\u6ca1\u6709\u8fd9\u79cd\u8bbf\u95ee\u65b9\u6cd5\u3002</li> <li></li> <li> <p>\u521b\u5efa\u4e00\u5f20\u8868</p> </li> </ol> <p><code>sql    CREATE TABLE `test` (      `id` int(4) NOT NULL AUTO_INCREMENT,      `a` varchar(10) NOT NULL,      `b` varchar(10) NOT NULL,      `c` varchar(10) NOT NULL,      `d` varchar(10) NOT NULL,      `e` varchar(10) NOT NULL,      PRIMARY KEY (`id`),      UNIQUE KEY `idx_a_b_c` (`a`,`b`,`c`) USING BTREE    ) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;</code></p> <ol> <li>\u63d2\u5165\u4e00\u6761\u6570\u636e\uff1a</li> </ol> <p><code>id=1 a=2 b=2 c=2 d=2 e=2</code></p> <ol> <li>\u5728SQL\u8bed\u53e5\u524d\u52a0\u4e0a<code>explain</code>\u5373\u53ef\u67e5\u770b\u6267\u884c\u8fc7\u7a0b\uff1a</li> </ol> <p><code>sql    explain select * from test where id = 1;</code></p> <p>\u53ef\u4ee5\u770b\u5230\u8fd0\u884c\u7ed3\u679c\u4e3a\uff1a</p> id select_type table type possible_keys filtered Extra 1 SIMPLE test const PRIMARY 100.0 Using where <p>\u91cd\u70b9\u662ftype\u7c7b\u578b\u7684\u503c\uff01</p>"},{"location":"MySQL/MySQL%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7/#type_1","title":"type\u7684\u7c7b\u578b","text":""},{"location":"MySQL/MySQL%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7/#_2","title":"\u5176\u4ed6","text":"<p>explain\u53ea\u4f1a\u67e5\u8be2SQL\u8bed\u53e5\u6267\u884c\u8fc7\u7a0b\uff0c\u5e76\u4e0d\u4f1a\u771f\u6b63\u6267\u884cSQL\u8bed\u53e5\u3002</p>"},{"location":"MySQL/MySQL%E7%B4%A2%E5%BC%95/","title":"MySQL\u7d22\u5f15","text":"<p>[toc]</p>"},{"location":"MySQL/MySQL%E7%B4%A2%E5%BC%95/#_1","title":"\u7d22\u5f15\u7684\u5206\u7c7b","text":"<ul> <li>\u4ece\u529f\u80fd\u903b\u8f91\u4e0a\u8bf4\uff0c\u7d22\u5f15\u4e3b\u8981\u67094\u79cd\uff0c\u5206\u522b\u662f\u666e\u901a\u7d22\u5f15\u3001\u552f\u4e00\u7d22\u5f15\u3001\u4e3b\u952e\u7d22\u5f15\u3001\u5168\u6587\u7d22\u5f15\u3002</li> <li>\u6309\u7167\u7269\u7406\u5b9e\u73b0\u65b9\u5f0f\uff0c\u7d22\u5f15\u53ef\u4ee5\u5206\u4e3a2\u79cd:\u805a\u7c07\u7d22\u5f15\u548c\u975e\u805a\u7c07\u7d22\u5f15\u3002</li> <li>\u6309\u7167\u4f5c\u7528\u5b57\u6bb5\u4e2a\u81f4\u8fdb\u884c\u5212\u5206\uff0c\u5206\u6210\u5355\u5217\u7d22\u5f15\u548c\u8054\u5408\u7d22\u5f15\u3002</li> </ul> <p>\u7ecf\u5e38\u4f7f\u7528\u7684\u662f\u666e\u901a\u7d22\u5f15\u3001\u552f\u4e00\u7d22\u5f15\u548c\u8054\u5408\u7d22\u5f15\u3002</p> <p>\u666e\u901a\u7d22\u5f15\uff08NORMAL\uff09\uff1a\u5728\u521b\u5efa\u666e\u901a\u7d22\u5f15\u65f6\uff0c\u4e0d\u9644\u52a0\u4efb\u4f55\u9650\u5236\u6761\u4ef6\uff0c\u53ea\u662f\u7528\u4e8e\u63d0\u9ad8\u67e5\u8be2\u6548\u7387\u3002</p> <p>\u552f\u4e00\u7d22\u5f15\uff08UNIQUE\uff09\uff1a\u5728\u521b\u5efa\u552f\u4e00\u6027\u7d22\u5f15\u65f6\uff0c\u9650\u5236\u8be5\u7d22\u5f15\u7684\u503c\u5fc5\u987b\u662f\u552f\u4e00\u7684\uff0c\u4f46\u5141\u8bb8\u6709\u7a7a\u503c\u3002\u5728\u4e00\u5f20\u6570\u636e\u8868\u91cc\u53ef\u4ee5\u6709\u591a\u4e2a\u552f\u4e00\u7d22\u5f15\u3002</p> <p>\u4e3b\u952e\u7d22\u5f15\uff1a\u4e3b\u952e\u7d22\u5f15\u5c31\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u552f\u4e00\u6027\u7d22\u5f15\uff0c\u5728\u552f\u4e00\u7d22\u5f15\u7684\u57fa\u7840\u4e0a\u589e\u52a0\u4e86\u4e0d\u4e3a\u7a7a\u7684\u7ea6\u675f\uff0c\u4e5f\u5c31\u662fNOT NULL+UNIQUE\uff0c\u4e00\u5f20\u8868\u91cc\u6700\u591a\u53ea\u6709\u4e00\u4e2a\u4e3b\u952e\u7d22\u5f15\u3002</p> <p>\u5355\u5217\u7d22\u5f15\uff1a\u5728\u8868\u4e2d\u7684\u5355\u4e2a\u5b57\u6bb5\u4e0a\u521b\u5efa\u7d22\u5f15\u3002</p> <p>\u591a\u5217\uff08\u7ec4\u5408\u3001\u8054\u5408\uff09\u7d22\u5f15\uff1a\u591a\u5217\u7d22\u5f15\u662f\u5728\u8868\u7684\u591a\u4e2a\u5b57\u6bb5\u7ec4\u5408\u4e0a\u521b\u5efa\u4e00\u4e2a\u7d22\u5f15\u3002\u4f7f\u7528\u7ec4\u5408\u7d22\u5f15\u65f6\u9075\u5faa\u6700\u5de6\u524d\u7f00\u96c6\u5408\u3002</p> <p>\u5168\u6587\u7d22\u5f15\uff1a\u9700\u8981\u7528\u7684\u65f6\u5019\u518d\u641c\u7d22\u5427\u3002</p> <p>\u7a7a\u95f4\u7d22\u5f15\uff08SPACIAL\uff09\uff1a\u9700\u8981\u7528\u7684\u65f6\u5019\u518d\u641c\u7d22\u5427\u3002</p>"},{"location":"MySQL/MySQL%E7%B4%A2%E5%BC%95/#_2","title":"\u7d22\u5f15\u7684\u521b\u5efa","text":"<p>\u4e2a\u4eba\u4e60\u60ef\u7528Navicat\u81ea\u5e26\u7684\u5de5\u5177\u521b\u5efa\uff0c\u4e0d\u4e60\u60ef\u4f7f\u7528\u547d\u4ee4\u884c\u3002</p> <p>\u9690\u85cf\u7d22\u5f15</p>"},{"location":"MySQL/Mysql%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/","title":"Mysql\u6743\u9650\u7ba1\u7406","text":"<p>[toc]</p>"},{"location":"MySQL/Mysql%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/#mysql_1","title":"\u67e5\u770bMysql\u7528\u6237","text":"<ol> <li>\u67e5\u770b\u6240\u6709\u7684\u7528\u6237\u7684host\uff1a<code>SELECT user, host FROM mysql.user</code>\u3002\u5176\u4e2dhost=localhost\u65f6\uff0c\u8868\u793a\u53ea\u6709\u672c\u673a\u624d\u80fd\u8bbf\u95ee\u6570\u636e\u5e93\uff1bhost=%\u65f6\uff0c\u6240\u6709\u5916\u90e8\u94fe\u63a5\u90fd\u80fd\u8bbf\u95ee\u6570\u636e\u5e93\u3002</li> </ol> <pre><code>+------------------+-----------+\n| user             | host      |\n+------------------+-----------+\n| mysql.infoschema | localhost |\n| mysql.session    | localhost |\n| mysql.sys        | localhost |\n| root             | localhost |\n| root             | %         |\n+------------------+-----------+\n</code></pre> <ol> <li>\u67e5\u770b\u5f53\u524d\u7528\u6237\uff1a<code>SELECT CURRENT_USER()</code>\u3002</li> </ol> <pre><code>+----------------+\n| current_user() |\n+----------------+\n| root@localhost |\n+----------------+\n</code></pre>"},{"location":"MySQL/Mysql%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/#mysql_2","title":"\u521b\u5efaMysql\u7528\u6237","text":"<ol> <li>\u521b\u5efa\u7528\u6237<code>lihailong</code>\uff0c\u5bc6\u7801<code>123456</code>\uff0c\u6240\u6709IP\u90fd\u53ef\u4ee5\u8bbf\u95ee\uff1a<code>CREATE USER 'lihailong'@'%' IDENTIFIED BY '123456'</code>\u3002</li> <li>\u521b\u5efa\u7528\u6237<code>xiaolong</code>\uff0c\u5bc6\u7801<code>123</code>\uff0c\u4ec5\u672c\u673a\u53ef\u4ee5\u8bbf\u95ee\uff1a<code>CREATE USER 'xiaolong'@'localhost' IDENTIFIED BY '123456'</code>\u3002</li> </ol>"},{"location":"MySQL/Mysql%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/#_1","title":"\u6388\u6743","text":"<ol> <li>\u7ed9host\u4e3a<code>localhost</code>\u7528\u6237<code>lihailong</code>\u6388\u4e88\u6570\u636e\u5e93<code>testdb</code>\u7684\u8868<code>user_table</code>\u6388\u4e88\u589e\u5220\u6539\u67e5\u6743\u9650\uff1a<code>GRANT select, update, insert, delete ON testdb.user_table TO 'lihailong'@'localhost'</code>\u3002</li> <li>\u5982\u679c\u8981\u6388\u4e88\u5168\u90e8\u6743\u9650\uff0c\u53ef\u4ee5\u7528ALL\uff1a<code>GRANT all privileges ON testdb.user_table TO 'lihailong'@'localhost'</code>\u3002</li> <li>testdb\u662f\u6570\u636e\u5e93\uff0cuser_table\u662f\u6570\u636e\u8868\uff0c\u901a\u914d\u7b26\u662f<code>*</code>\u3002</li> <li>\u5982\u679c\u60f3\u4fee\u6539\u7528\u6237<code>lihailong</code>\u7684<code>host</code>\uff0c\u6267\u884c\uff1a<code>update mysql.user set host = 'localhost' where user = 'lihailong'</code>\u3002</li> <li>\u4fee\u6539\u7528\u6237<code>lihailong</code>\u7684\u5bc6\u7801\uff1a<code>alter user 'lihailong'@'%' identified by 'a839oihjf@#FA#@A%23a';</code></li> </ol>"},{"location":"MySQL/Mysql%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/#_2","title":"\u5220\u9664\u7528\u6237","text":"<ol> <li>\u5220\u9664\u7528\u6237<code>'lihailong'@'%'</code>\uff1a<code>drop user 'lihailong'@'%'</code></li> </ol>"},{"location":"MySQL/mysql%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E5%88%A0%E9%99%A4/","title":"mysql\u7684\u5b89\u88c5\u548c\u5220\u9664","text":"<p>[toc]</p>"},{"location":"MySQL/mysql%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E5%88%A0%E9%99%A4/#windowsmysql","title":"Windows\u5b89\u88c5mysql","text":""},{"location":"MySQL/mysql%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E5%88%A0%E9%99%A4/#windowsmysql_1","title":"Windows\u5220\u9664mysql","text":"<p>\u4ee5\u7ba1\u7406\u5458\u7684\u8eab\u4efd\u8fd0\u884c\u547d\u4ee4\u884c\uff0c\u7136\u540e\u8f93\u5165<code>sc delete MySQL80</code>\u3002\uff08\u6ce8\u610f\uff1aMySQL80\u662f\u6211\u7684\u670d\u52a1\u540d\u79f0\uff0c\u4f60\u7684\u7535\u8111\u53ef\u80fd\u4e0d\u662f\u8fd9\u4e2a\u540d\u5b57\uff09</p>"},{"location":"MySQL/mysql%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E5%88%A0%E9%99%A4/#linuxcentos7mysql","title":"Linux(CentOS7)\u5b89\u88c5mysql","text":"<ol> <li>\u53bbmysql Yum Repository\u9009\u62e9\u9002\u5408\u81ea\u5df1\u7248\u672c\u7684mysql\u7684RPM\u5305\u3002</li> </ol> <ol> <li> <p>\u5728linux\u547d\u4ee4\u884c\u4e2d\u4f7f\u7528wget\u4e0b\u8f7d\u8be5rpm\u5305\u3002\u8f93\u5165\uff1a<code>wget \u94fe\u63a5\u5730\u5740</code>\u5373\u53ef\u4e0b\u8f7dmysql\u7684rpm\u5305\u3002</p> </li> <li> <p>\u5b89\u88c5mysql\u7684rpm\u5305\uff1a</p> </li> </ol> <p><code>sudo rpm -Uvh platform-and-version-specific-package-name.rpm</code></p> <p>\u5176\u4e2dplatform-and-version-specific-package-name.rpm\u662f\u4f60\u4e0b\u8f7d\u7684rpm\u5305\u7684\u540d\u79f0\u3002    \u6211\u7684\u5305\u540d\u662f\uff1amysql80-community-release-el7-6.noarch.rpm    \u6240\u4ee5\u6211\u8f93\u5165\uff1a</p> <p><code>sudo rpm -Uvh mysql80-community-release-el7-6.noarch.rpm</code></p> <p>\u5907\u6ce8\uff1a<code>yum update</code>\u4f1a\u66f4\u65b0\u6211\u7684mysql\u7684rpm\u5305</p> <ol> <li>\u5982\u679c\u60f3\u5b89\u88c5mysql5.7\uff0c\u8fdb\u5165<code>/etc/yum.repos.d/mysql-community.repo</code>\uff1a</li> </ol> <p>```    [mysql57-community]    ...    enabled=1    ...</p> <p>[mysql80-community]    ...    enable=0    ...    ```</p> <p>\u5bf9\u76ee\u6807\u7248\u672c\u8bbe\u7f6e<code>enable=1</code>\uff0c\u5bf9\u5176\u4ed6\u7248\u672c\u8bbe\u7f6e<code>enable=0</code>\u3002</p> <ol> <li>\u5b89\u88c5mysql</li> </ol> <pre><code>sudo yum install mysql-community-server\n</code></pre>"},{"location":"MySQL/mysql%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E5%88%A0%E9%99%A4/#linuxcentos7mysql_1","title":"Linux(CentOS7)\u5220\u9664mysql","text":"<ol> <li> <p>\u5047\u5b9alinux\u5df2\u5b89\u88c5mysql\uff0c\u8f93\u5165<code>service mysqld status</code>\u67e5\u770b\u5f53\u524dmysql\u6570\u636e\u5e93\u7684\u72b6\u6001\uff0c\u5e76\u8f93\u5165<code>service mysqld stop</code>\u5173\u95edmysql\u3002</p> </li> <li> <p>\u8f93\u5165<code>rpm -ga|grep -i mysql</code>\u67e5\u770b\u5f53\u524d\u5b89\u88c5\u4e86\u54ea\u4e9bmysql\u7ec4\u4ef6\u3002</p> </li> </ol> <p></p> <ol> <li>\u4f9d\u6b21\u5220\u9664\u76f8\u5173\u7ec4\u4ef6\u3002</li> </ol> <p><code>rpm -ev --nodeps mysql-community-client-plugins-8.0.29-1.el7.x86_64    rpm -ev --nodeps mysql-community-libs-8.0.29-1.el7.x86_64    rpm -ev --nodeps mysql80-community-release-el7-6.noarch    rpm -ev --nodeps mysql-community-client-8.0.29-1.el7.x86_64    rpm -ev --nodeps mysql-community-common-8.0.29-1.el7.x86_64    rpm -ev --nodeps mysql-community-icu-data-files-8.0.29-1.el7.x86_64    rpm -ev --nodeps mysql-community-server-8.0.29-1.el7.x86_64</code></p> <ol> <li>\u67e5\u770b\u4e0emysql\u76f8\u5173\u7684\u6b8b\u7559\u6587\u4ef6\u3002</li> </ol> <p>\u8f93\u5165\uff1a<code>find / -name mysql</code></p> <p>\u200b   \u5220\u9664\u4ee5\u4e0b\u76ee\u5f55\u4e2d\u7684mysql\u6b8b\u7559\u6587\u4ef6\uff1a</p> <pre><code>/var/spool/*\n/var/lib/mysql\n/usr/*\n/run\n</code></pre>"},{"location":"MySQL/ngram%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2/","title":"ngram\u6a21\u7cca\u67e5\u8be2","text":"<p>[toc]</p>"},{"location":"MySQL/ngram%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2/#_1","title":"\u662f\u4ec0\u4e48","text":"<p>\u4eceMySQL 5.7.6\u5f00\u59cb\uff0cMySQL\u5185\u7f6e\u4e86ngram\u5168\u6587\u89e3\u6790\u5668\uff0c\u652f\u6301\u4e2d\u6587\u3001\u65e5\u6587\u3001\u97e9\u6587\u5168\u6587\u7d22\u5f15\u3002</p> <p>\u7528ngram\u5168\u6587\u89e3\u6790\u5668\u5bf9\u201c\u751f\u65e5\u5feb\u4e50\u201d\u8fdb\u884c\u5206\u8bcd\u3002</p> <pre><code>n=1: '\u751f', '\u65e5', '\u5feb', '\u4e50' \nn=2: '\u751f\u65e5', '\u65e5\u5feb', '\u5feb\u4e50' \nn=3: '\u751f\u65e5\u5feb', '\u65e5\u5feb\u4e50' \nn=4: '\u751f\u65e5\u5feb\u4e50'\n</code></pre> <p>\u5047\u5b9a\u6211\u4eec\u641c\u7d22\u201c\u4f60\u751f\u65e5\u662f\u201d\u8fd9\u56db\u4e2a\u5b57\uff0c\u6570\u636e\u5e93\u4e2d\u7684\u4e00\u6761\u6570\u636e\u5305\u542b\u201c\u751f\u65e5\u5feb\u4e50\u201d\u5b50\u4e32\u3002</p> <p>ngram\u4f1a\u5c06\u6211\u4eec\u641c\u7d22\u7684\u5b57\u5206\u6210\uff1a<code>\u4f60\u751f</code>\u3001<code>\u751f\u65e5</code>\u3001<code>\u65e5\u662f</code>\uff1b\u540c\u65f6\u4e5f\u4f1a\u5c06\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u5206\u6210<code>\u751f\u65e5</code>\u3001<code>\u65e5\u5feb</code>\u3001<code>\u5feb\u4e50</code>\u3002\u53ef\u4ee5\u770b\u51fa\uff0c<code>\u751f\u65e5</code>\u5173\u952e\u5b57\u5339\u914d\uff0c\u6240\u4ee5\u547d\u4e2d\u76ee\u6807\u3002</p>"},{"location":"MySQL/ngram%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2/#_2","title":"\u600e\u4e48\u505a","text":"<ol> <li> <p>\u627e\u5230MySQL\u7684\u914d\u7f6e\u6587\u4ef6<code>my.ini</code>\uff0c\u5343\u4e07\u522b\u627e\u9519\uff01</p> </li> <li> <p>\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e\uff1a</p> </li> </ol> <p><code>ini    # \u5168\u6587\u68c0\u7d22\u5206\u8bcd\u6570    ngram_token_size=2</code></p> <p>\u6ce8\uff1a\u5047\u5b9a\u6570\u636e\u5e93\u4e2d\u6709\u201d\u751f\u65e5\u5feb\u4e50\u201c\u56db\u4e2a\u5b57\uff0c\u6211\u4eec\u641c\u7d22\u201d\u751f\u65e5\u201c\uff0c\u5168\u6587\u68c0\u7d22\u5206\u8bcd\u6570\u662f3\uff0c\u90a3\u4e48\u65e0\u6cd5\u547d\u4e2d\u76ee\u6807\uff01</p> <ol> <li>\u7ed9\u76f8\u5e94\u7684\u5b57\u6bb5\u6dfb\u52a0\u5168\u6587\u7d22\u5f15\uff0c\u6ce8\u610f\u5206\u6790\u5668\u8981\u586bngram\u3002</li> </ol> <p></p> <ol> <li>\u8f93\u5165\u67e5\u8be2\u8bed\u53e5\uff1a</li> </ol> <p><code>sql    SELECT * FROM `user` WHERE MATCH(content) against('\u6570\u5b66');</code></p> <p>\u91cd\u8981\u5efa\u8bae\uff1a</p> <ol> <li>\u5982\u679c\u9488\u5bf9\u4e24\u4e2a\u5b57\u6bb5\u5efa\u7acb\u5168\u6587\u7d22\u5f15\uff0csql\u8bed\u53e5\u4e2d\u53eaMATCH\u4e86\u4e00\u4e2a\u5b57\u6bb5\uff0c\u5219\u4f1a\u62a5\u9519\uff0c\u6240\u4ee5\u5efa\u8bae\u9488\u5bf9\u5355\u4e2a\u5b57\u6bb5\u5efa\u7acb\u5168\u6587\u7d22\u5f15\u3002</li> <li>WHERE \u6761\u4ef6\u4e2d\u53ea\u80fd\u7528\u7b49\u53f7\uff1b\u4e0d\u8981\u7528ORDER BY\u3002</li> </ol>"},{"location":"MySQL/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%20Mysql%20%E7%B4%A2%E5%BC%95%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86/","title":"\u6df1\u5165\u7406\u89e3 Mysql \u7d22\u5f15\u5e95\u5c42\u539f\u7406","text":"<p>\u53c2\u8003\u6587\u7ae0</p> <p>\u63d0\u95ee\uff1a</p> <ol> <li>\u7d22\u5f15\u662f\u4ec0\u4e48\uff1f</li> </ol> <p>\u7b54\uff1a\u7d22\u5f15\u76f8\u5f53\u4e8e\u4e66\u672c\u7684\u76ee\u5f55\uff0c\u65b9\u4fbf\u6211\u4eec\u5feb\u901f\u67e5\u627e\u6570\u636e\u3002\u6df1\u5165\u70b9\u8bb2\uff0c\u7d22\u5f15\u662f\u6570\u636e\u7ed3\u6784\u3002</p> <ol> <li>\u54c8\u5e0c\u8868\u505a\u7d22\u5f15\u7684\u597d\u5904\u662f\u4ec0\u4e48\uff1fmysql\u4e3a\u4ec0\u4e48\u4e0d\u7528\u54c8\u5e0c\u8868\u505a\u7d22\u5f15\uff1f</li> </ol> <p>\u7b54\uff1a\u597d\u5904\u662f\u53ef\u4ee5\u7528O(1)\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u67e5\u8be2\u6570\u636e\u3002MySQL\u4e0d\u7528\u54c8\u5e0c\u8868\u505a\u7d22\u5f15\u662f\u56e0\u4e3a\u4e0d\u80fd\u505a\u5230\u9ad8\u6548\u8303\u56f4\u67e5\u627e\u3002</p> <ol> <li>AVL\u6811\u505a\u7d22\u5f15\u7684\u597d\u5904\u662f\u4ec0\u4e48\uff1fmysql\u4e3a\u4ec0\u4e48\u4e0d\u7528\u54c8\u5e0c\u8868\u505a\u7d22\u5f15\uff1f</li> </ol> <p>\u7b54\uff1a\u597d\u5904\u662f\u7528O(NlogN)\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u67e5\u8be2\u6570\u636e\uff0c\u5e76\u652f\u6301\u8303\u56f4\u67e5\u627e\u3001\u6570\u636e\u6392\u5e8f\u3002\u4f46\u662f\u8fd8\u662f\u6709\u4f18\u5316\u7684\u7a7a\u95f4\u3002\u8fd9\u91cc\u9700\u8981\u4e86\u89e3\u4e00\u4e9b\u5173\u4e8e\u78c1\u76d8IO\u7684\u77e5\u8bc6\u3002</p> <p>\u200b    \u5173\u4e8e\u78c1\u76d8IO\uff1a</p> <p>\u200b    a. \u6570\u636e\u5e93\u67e5\u8be2\u6570\u636e\u7684\u74f6\u9888\u662f\u78c1\u76d8IO\uff0c\u5982\u679c\u4f7f\u7528\u7684\u662f AVL \u6811\uff0c\u6211\u4eec\u6bcf\u4e00\u4e2a\u6811\u8282\u70b9\u53ea\u5b58\u50a8\u4e86\u4e00\u4e2a\u6570\u636e\uff0c\u6211\u4eec\u4e00\u6b21\u78c1\u76d8 IO \u53ea\u80fd\u53d6\u51fa\u6765\u4e00\u4e2a\u8282\u70b9\u4e0a\u7684\u6570\u636e\u52a0\u8f7d\u5230\u5185\u5b58\u91cc\uff0c\u90a3\u6bd4\u5982\u67e5\u8be2 id=7 \u8fd9\u4e2a\u6570\u636e\u6211\u4eec\u5c31\u8981\u8fdb\u884c\u78c1\u76d8 IO \u4e09\u6b21\uff0c\u8fd9\u662f\u591a\u4e48\u6d88\u8017\u65f6\u95f4\u7684\u3002\u6240\u4ee5\u6211\u4eec\u8bbe\u8ba1\u6570\u636e\u5e93\u7d22\u5f15\u65f6\u9700\u8981\u9996\u5148\u8003\u8651\u600e\u4e48\u5c3d\u53ef\u80fd\u51cf\u5c11\u78c1\u76d8 IO \u7684\u6b21\u6570\u3002</p> <p>\u200b    b. \u78c1\u76d8 IO \u6709\u4e2a\u6709\u4e2a\u7279\u70b9\uff0c\u5c31\u662f\u4ece\u78c1\u76d8\u8bfb\u53d6 1B \u6570\u636e\u548c 1KB \u6570\u636e\u6240\u6d88\u8017\u7684\u65f6\u95f4\u662f\u57fa\u672c\u4e00\u6837\u7684\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a\u601d\u8def\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4e00\u4e2a\u6811\u8282\u70b9\u4e0a\u5c3d\u53ef\u80fd\u591a\u5730\u5b58\u50a8\u6570\u636e\uff0c\u4e00\u6b21\u78c1\u76d8 IO \u5c31\u591a\u52a0\u8f7d\u70b9\u6570\u636e\u5230\u5185\u5b58\uff0c\u8fd9\u5c31\u662f B \u6811\uff0cB+\u6811\u7684\u7684\u8bbe\u8ba1\u539f\u7406\u4e86\u3002</p> <ol> <li>B-\u6811\u505a\u7d22\u5f15\u7684\u597d\u5904\u662f\u4ec0\u4e48\uff1fmysql\u4e3a\u4ec0\u4e48\u4e0d\u7528\u54c8\u5e0c\u8868\u505a\u7d22\u5f15\uff1f</li> </ol> <p>\u7b54\uff1a\u597d\u5904\u662f\u7528O(logH)\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u67e5\u8be2\u6570\u636e(H &lt; N)\u3002\u4f46\u662f\u8fd8\u6709\u4f18\u5316\u7a7a\u95f4\uff1a\u6bcf\u4e2a\u8282\u70b9\u4e0d\u5b58\u5b9e\u9645\u6570\u636e\uff0c\u53ea\u5b58\u7d22\u5f15\uff0c\u8fd9\u6837\u6bcf\u4e2a\u8282\u70b9\u5c31\u80fd\u5b58\u66f4\u591a\u6570\u636e\uff0c\u6811\u7684\u5c42\u6570\u8fdb\u4e00\u6b65\u964d\u4f4e\u3002\u6240\u6709\u6570\u636e\u5b58\u653e\u5728\u53f6\u5b50\u8282\u70b9\u3002</p> <ol> <li>mysql\u4e3a\u4ec0\u4e48\u7528B+\u6811\u505a\u7d22\u5f15\uff1f</li> </ol> <p>\u7b54\uff1a\u89c1\u7b2c4\u70b9\u3002</p> <ol> <li>\u805a\u96c6\u7d22\u5f15\u548c\u975e\u805a\u96c6\u7d22\u5f15\u662f\u4ec0\u4e48\uff1f</li> </ol> <p>\u7b54\uff1a\u628a\u6570\u636e\u548c\u7d22\u5f15\u5206\u5f00\uff0c\u8fd9\u53eb\u975e\u805a\u96c6\u7d22\u5f15\u65b9\u5f0f\uff1b\u628a\u6570\u636e\u548c\u7d22\u5f15\u5408\u5728\u4e00\u8d77\uff0c\u8fd9\u53eb\u805a\u96c6\u7d22\u5f15\u65b9\u5f0f\u3002</p> <ol> <li>innodb\u548cmyisam\u5f15\u64ce\u7684\u533a\u522b\uff1f\uff08\u56f4\u7ed5\u975e\u805a\u96c6\u7d22\u5f15\u65b9\u5f0f\u548c\u805a\u96c6\u7d22\u5f15\u65b9\u5f0f\uff09</li> </ol> <p>\u7b54\uff1a</p> <pre><code>1. \u4e0a\u5c42\u7684\u533a\u522b\uff1amyisam\u67e5\u8be2\u6027\u80fd\u66f4\u597d\uff0c\u4f46\u4e0d\u652f\u6301\u4e8b\u52a1\u3002\n\n2. \u5e95\u5c42\u539f\u7406\uff1a\u5efa\u8868\u65f6 InnoDB \u5c31\u4f1a\u81ea\u52a8\u5efa\u7acb\u597d\u4e3b\u952e ID \u7d22\u5f15\u6811\uff0c\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48 Mysql \u5728\u5efa\u8868\u65f6\u8981\u6c42\u5fc5\u987b\u6307\u5b9a\u4e3b\u952e\u7684\u539f\u56e0(\u5982\u679c\u6ca1\u6709\u6307\u660e\uff0c\u6570\u636e\u5e93\u4f1a\u81ea\u52a8\u6dfb\u52a0\u4e00\u4e2a\u770b\u4e0d\u89c1\u7684\u4e3b\u952e)\u3002\u5f53\u6211\u4eec\u4e3a\u8868\u91cc\u7684\u4e00\u4e2a\u5b57\u6bb5user_name\u52a0\u7d22\u5f15\u65f6InnoDB \u5c31\u4f1a\u5efa\u7acb user_name \u7d22\u5f15 B+\u6811\uff0c\u8282\u70b9\u91cc\u5b58\u7684\u662f user_name \u8fd9\u4e2a KEY\uff0c\u53f6\u5b50\u8282\u70b9\u5b58\u50a8\u7684\u6570\u636e\u7684\u662f\u4e3b\u952e KEY\u3002\u6ce8\u610f\uff0c**\u53f6\u5b50\u5b58\u50a8\u7684\u662f\u4e3b\u952e KEY\uff01**\u62ff\u5230\u4e3b\u952e KEY \u540e\uff0cInnoDB \u624d\u4f1a\u53bb\u4e3b\u952e\u7d22\u5f15\u6811\u91cc\u6839\u636e\u521a\u5728 user_name \u7d22\u5f15\u6811\u627e\u5230\u7684\u4e3b\u952e KEY \u67e5\u627e\u5230\u5bf9\u5e94\u7684\u6570\u636e\u3002\n\n   \u95ee\u9898\u6765\u4e86\uff0c\u4e3a\u4ec0\u4e48 InnoDB \u53ea\u5728\u4e3b\u952e\u7d22\u5f15\u6811\u7684\u53f6\u5b50\u8282\u70b9\u5b58\u50a8\u4e86\u5177\u4f53\u6570\u636e\uff0c\u4f46\u662f\u5176\u4ed6\u7d22\u5f15\u6811\u5374\u4e0d\u5b58\u5177\u4f53\u6570\u636e\u5462\uff0c\u800c\u8981\u591a\u6b64\u4e00\u4e3e\u5148\u627e\u5230\u4e3b\u952e\uff0c\u518d\u5728\u4e3b\u952e\u7d22\u5f15\u6811\u627e\u5230\u5bf9\u5e94\u7684\u6570\u636e\u5462?\n\n   \u5176\u5b9e\u5f88\u7b80\u5355\uff0c\u56e0\u4e3a InnoDB \u9700\u8981\u8282\u7701\u5b58\u50a8\u7a7a\u95f4\u3002\u4e00\u4e2a\u8868\u91cc\u53ef\u80fd\u6709\u5f88\u591a\u4e2a\u7d22\u5f15\uff0cInnoDB \u90fd\u4f1a\u7ed9\u6bcf\u4e2a\u52a0\u4e86\u7d22\u5f15\u7684\u5b57\u6bb5\u751f\u6210\u7d22\u5f15\u6811\uff0c\u5982\u679c\u6bcf\u4e2a\u5b57\u6bb5\u7684\u7d22\u5f15\u6811\u90fd\u5b58\u50a8\u4e86\u5177\u4f53\u6570\u636e\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8868\u7684\u7d22\u5f15\u6570\u636e\u6587\u4ef6\u5c31\u53d8\u5f97\u975e\u5e38\u5de8\u5927\uff08\u6570\u636e\u6781\u5ea6\u5197\u4f59\u4e86\uff09\u3002\u4ece\u8282\u7ea6\u78c1\u76d8\u7a7a\u95f4\u7684\u89d2\u5ea6\u6765\u8bf4\uff0c\u771f\u7684\u6ca1\u6709\u5fc5\u8981\u6bcf\u4e2a\u5b57\u6bb5\u7d22\u5f15\u6811\u90fd\u5b58\u5177\u4f53\u6570\u636e\uff0c\u901a\u8fc7\u8fd9\u79cd\u770b\u4f3c\u201c\u591a\u6b64\u4e00\u4e3e\u201d\u7684\u6b65\u9aa4\uff0c\u5728\u727a\u7272\u8f83\u5c11\u67e5\u8be2\u7684\u6027\u80fd\u4e0b\u8282\u7701\u4e86\u5de8\u5927\u7684\u78c1\u76d8\u7a7a\u95f4\uff0c\u8fd9\u662f\u975e\u5e38\u6709\u503c\u5f97\u7684\u3002\n</code></pre>"},{"location":"Python/Django%E9%83%A8%E7%BD%B2%E6%96%B9%E6%A1%88/","title":"Django\u90e8\u7f72\u65b9\u6848","text":"<p>[toc]</p>"},{"location":"Python/Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2Django/","title":"Linux\u670d\u52a1\u5668\u90e8\u7f72Django","text":""},{"location":"Python/Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2Django/#_1","title":"\u524d\u8a00","text":"<p>\u6839\u636e\u6211\u591a\u6b21\u5c1d\u8bd5\uff0c\u4e0d\u5efa\u8bae\u5728\u5bbf\u4e3b\u673a\u4e0a\u76f4\u63a5\u90e8\u7f72Django\uff0c\u800c\u662f\u62c9\u53d6\u4e00\u4e2aPython\u7684\u5b98\u65b9docker\u955c\u50cf\uff0c\u5e76\u5728Python\u5bb9\u5668\u4e2d\u90e8\u7f72Django\uff0c\u7406\u7531\u5982\u4e0b\uff1a</p> <p>\u5bbf\u4e3b\u673a\u5b89\u88c5Python\u4e0d\u65b9\u4fbf\uff0cPython 3.10\u4ee5\u540e\u9700\u8981openssl\u5e93\u7684\u7248\u672c\u5927\u4e8e1.1.1\uff0c\u7136\u800ccentos\u7684yum\u6e90\u4e2d\u7684openssl\u7248\u672c\u9ed8\u8ba4\u4e3a1.0.7\uff08Ubuntu\u7cfb\u7edf\u4e0d\u6e05\u695a\uff09\uff0c\u800c\u901a\u8fc7\u6e90\u7801\u5b89\u88c5openssl\u6bd4\u8f83\u9ebb\u70e6\uff0c\u7efc\u5408\u8003\u8651\u4e0b\u6765\uff0c\u51b3\u5b9a\u5728docker\u5bb9\u5668\u4e2d\u8fd0\u884cDjango\u3002</p>"},{"location":"Python/Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2Django/#_2","title":"\u6b65\u9aa4","text":""},{"location":"Python/Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2Django/#_3","title":"\u7b2c\u4e00\u6b21\u5b89\u88c5","text":"<ol> <li> <p>\u5b89\u88c5docker\u6700\u65b0\u7248\u3002</p> </li> <li> <p>\u914d\u7f6edocker\u955c\u50cf\u6e90\uff08\u5fc5\u5e94\uff0c\u7b80\u5355\uff09\u3002</p> </li> <li> <p>\u62c9\u53d6python3.9\u7248\u672c\u7684\u955c\u50cf\uff1a<code>docker pull python:3.9</code>\u3002\u4e0d\u8981\u7528\u9ad8\u4e8e3.9\u7684\u7248\u672c\uff0c\u5e94\u8be5\u4f1a\u6709\u517c\u5bb9\u6027\u95ee\u9898\uff0c\u6bd4\u5982dddocr\u4e0d\u517c\u5bb9\u9ad8\u7248\u672cpython\u3002</p> </li> <li> <p>docker\u5bb9\u5668\u5bf9\u5916\u66b4\u9732\u4e00\u4e2a\u7aef\u53e3\uff0c\u8fd0\u884cPython docker\u5bb9\u5668\u3002</p> </li> <li> <p>\u8fdb\u5165\u540e\u4fee\u6539debian\u955c\u50cf\u6e90\uff0cdebian\u7248\u672c\u5e94\u8be5\u662f12\uff0c\u5982\u679c\u4e0d\u662f\uff0c\u5219\u53c2\u8003\u7f51\u4e0a\u7684\u955c\u50cf\u6e90\u914d\u7f6e\u65b9\u5f0f\u3002\u5982\u679c\u662f\uff0c\u5219\u6309\u7167\u4e0b\u9762\u7684\u65b9\u5f0f\u914d\u7f6edebian\u955c\u50cf\u6e90\u3002</p> </li> <li> <p>\u8fdb\u5165\u76ee\u5f55\uff1a/etc/apt/sources.list.d</p> </li> <li> <p>\u5907\u4efd\u6587\u4ef6debian.sources\u4e3adebian.sources.bak</p> </li> <li> <p>\u67e5\u770bdebian.sources\u6587\u4ef6</p> </li> <li> <p>```Bash       Types: deb       # http://snapshot.debian.org/archive/debian/20231218T000000Z       URIs: http://deb.debian.org/debian       Suites: bookworm bookworm-updates       Components: main       Signed-By: /usr/share/keyrings/debian-archive-keyring.gpg</p> <p>Types: deb   # http://snapshot.debian.org/archive/debian-security/20231218T000000Z   URIs: http://deb.debian.org/debian-security   Suites: bookworm-security   Components: main   Signed-By: /usr/share/keyrings/debian-archive-keyring.gpg   ```</p> </li> <li> <p>\u5c06<code>deb.debian.org</code>\u66ff\u6362\u4e3a<code>mirrors.tuna.tsinghua.edu.cn</code>\uff0c\u8fd9\u91cc\u7ed9\u51fa\u4e00\u4e2a\u7b80\u5355\u7684\u65b9\u6cd5\uff1a</p> </li> <li> <p><code>Bash       sed -i 's/deb.debian.org/mirrors.tuna.tsinghua.edu.cn/g' /etc/apt/sources.list.d/debian.sources</code></p> </li> <li></li> <li> <p>\u914d\u7f6epip\u7684\u955c\u50cf\u6e90\uff1a<code>pip config set global.index-url</code>https://mirrors.aliyun.com/pypi/simple<code>``\uff0c\u914d\u7f6e\u6210\u529f\u540e\u53ef\u4ee5\u67e5\u770b\u4e00\u4e0b\uff1a</code>pip config list``</p> </li> <li> <p>\u4e0b\u8f7dvim\uff1a<code>apt-get update</code> <code>apt-get install vim</code>\u3002</p> </li> <li> <p>git clone\u4ee3\u7801\u3002python\u955c\u50cf\u5e94\u8be5\u9ed8\u8ba4\u5e26\u6709git\u5de5\u5177\u3002\u4f46\u662f\u6709\u65f6\u5019\u4f1a\u9047\u5230github\u8eab\u4efd\u9a8c\u8bc1\u7684\u60c5\u51b5\uff0c\u5982\u679c\u51fa\u73b0\uff0c\u5efa\u8bae\u5bb9\u5668\u751f\u6210ssh key\u5e76\u4e0a\u4f20\u5230\u81ea\u5df1\u7684GitHub\u8d26\u6237\uff0c\u4eca\u540e\u7528ssh\u7684\u65b9\u5f0fclone \u4ee3\u7801\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u7528https\u7684\u65b9\u5f0fclone\u4ee3\u7801\u3002\u4e00\u822c\u6765\u8bf4GitHub\u5f88\u6162\uff0c\u5efa\u8bae\u5c06\u4ee3\u7801\u4e0a\u4f20\u5230gitee\u4e0a\u9762\u3002</p> </li> <li> <p>\u4e0b\u8f7d\u597d\u4ee3\u7801\u540e\uff0c\u9700\u8981\u5148\u5b89\u88c5mysql-client\u7684\u4e00\u4e9b\u524d\u7f6e\u5de5\u5177\uff1a<code>apt-get install python3-dev default-libmysqlclient-dev build-essential pkg-config</code> \uff0c\u7136\u540e\u5b89\u88c5mysql-client\uff1a<code>pip install mysqlclient</code>\u53c2\u8003\uff1ahttps://github.com/PyMySQL/mysqlclient</p> </li> <li> <p>\u5b89\u88c5requirements.txt\u4e2d\u7684\u4f9d\u8d56\uff1a<code>pip install -r requirements.txt</code>\u3002</p> </li> <li> <p>\u4fee\u6539settings.py\u4e2d\u7684\u6570\u636e\u5e93\u914d\u7f6e\uff0c\u76ee\u524d\u6765\u770b\uff0chost\u65e0\u6cd5\u8bc6\u522b<code>host.docker.internal</code>\uff0c\u5efa\u8bae\u586b\u5199\u5f53\u524d\u7f51\u7edc\u7684\u7f51\u5173\u5230ip\uff08\u4f8b\u5982172.17.0.1\uff09\uff0c\u4e4b\u540e\u518d\u770b\u770b\u600e\u4e48\u56de\u4e8b\u3002</p> </li> <li> <p>\u8fd0\u884cDjango\uff1a<code>python manager runserver 0.0.0.0:1234</code>. \u7aef\u53e3\u53ef\u4ee5\u81ea\u5df1\u968f\u4fbf\u6307\u5b9a\u3002</p> </li> <li> <p>prod\u73af\u5883\u4e2d\uff0c\u4e0d\u8981\u76f4\u63a5\u4fee\u6539\u4ee3\u7801\uff0c\u5c24\u5176\u662f\u76f4\u63a5\u4fee\u6539model\u4ee3\u7801\uff01\u800c\u662f\u5728dev\u73af\u5883\u4fee\u6539\u540e\uff0c\u4e0a\u4f20\u5230GitHub\uff0c\u518d\u4ece\u751f\u4ea7\u73af\u5883clone\u4e0b\u6765\uff0c\u5e76\u4e14\u5c06dev\u73af\u5883\u4e2d\u6570\u636e\u5e93\u4e2d\u7684\u8fc1\u79fb\u8868\uff08django_migrations\uff09\u4e00\u8d77\u590d\u5236\u5230prod\u73af\u5883\u4e2d\u3002</p> </li> </ol>"},{"location":"Python/Linux%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2Django/#_4","title":"\u6301\u7eed\u66f4\u65b0","text":"<p>\u5982\u679c\u4e4b\u524d\u5df2\u7ecf\u90e8\u7f72\u6210\u529f\u4e86\uff0c\u5f53\u66f4\u65b0\u4ee3\u7801\u65f6\uff0c\u9700\u8981\u505a\u4ee5\u4e0b\u4e8b\u60c5\u3002</p> <ol> <li>\u5c06\u4ee3\u7801push\u5230\u8fdc\u7a0b\u4ed3\u5e93\uff0c\u5e76\u5728\u751f\u4ea7\u73af\u5883\u4e0bpull\u4ee3\u7801\u3002</li> <li>\u67e5\u770bDjango\u8fdb\u7a0b\u76d1\u63a7\u7684\u7aef\u53e3\u53f7\u5bf9\u5e94\u7684pid\uff0c\u7136\u540e<code>kill -15</code>\u8fd9\u4e2a\u8fdb\u7a0b\u3002</li> <li>\u8fdb\u5165\u9879\u76ee\u6839\u76ee\u5f55\uff0c<code>python manage runserver 0.0.0.0:5555</code>\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u5176\u4ed6\u7aef\u53e3\u53f7\u3002</li> </ol>"},{"location":"Python/Pycharm%E7%AE%A1%E7%90%86python%E9%A1%B9%E7%9B%AE/","title":"Pycharm\u7ba1\u7406python\u9879\u76ee","text":"<p>[toc]</p>"},{"location":"Python/Pycharm%E7%AE%A1%E7%90%86python%E9%A1%B9%E7%9B%AE/#_1","title":"\u5199\u5728\u524d\u9762","text":"<p>\u5f53\u6211\u521a\u4f7f\u7528pycharm\u7684\u65f6\u5019\uff0c\u9047\u5230\u8fc7\u5f88\u591a\u95ee\u9898\u3002virtualenv\u662f\u4ec0\u4e48\uff1fpython\u7684\u7f16\u8bd1\u5668\uff08\u5b9e\u9645\u4e0a\u662f\u89e3\u91ca\u5668\uff09\u5b89\u88c5\u5728\u54ea\u91cc\uff1fpython\u7684\u4f9d\u8d56\u5305\u653e\u5728\u54ea\u91cc\uff1fpip\u662f\u4ec0\u4e48\uff1f</p> <p>\u770b\u4e86\u8fd9\u7bc7\u6587\u7ae0\uff0c\u6211\u5bf9pycharm\u7ba1\u7406python\u9879\u76ee\u6709\u4e86\u66f4\u6df1\u7684\u7406\u89e3\u3002</p>"},{"location":"Python/Pycharm%E7%AE%A1%E7%90%86python%E9%A1%B9%E7%9B%AE/#python","title":"python\u4ee3\u7801\u5982\u4f55\u8fd0\u884c","text":"<p>Python\u662f\u7f16\u8bd1+\u89e3\u91ca\u578b\u7684\u8bed\u8a00\uff0c\u6267\u884c\u7684\u65f6\u5019\u662f\u7531Python\u89e3\u91ca\u5668\u9010\u884c\u7f16\u8bd1+\u89e3\u91ca\uff0c\u7136\u540e\u8fd0\u884c\uff0c\u56e0\u4e3a\u5728\u8fd0\u884c\u7684\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u7f16\u8bd1+\u89e3\u91ca\uff0c\u6240\u4ee5Python\u7684\u8fd0\u884c\u6027\u80fd\u4f1a\u4f4e\u4e8e\u7f16\u8bd1\u578b\u8bed\u8a00\u3002</p> <p>\u56e0\u6b64\u60f3\u8981\u8fd0\u884cpython\u4ee3\u7801\uff0c\u9700\u8981python\u89e3\u6790\u5668\u3002\u6211\u4eec\u53bb\u5b98\u7f51\u4e0b\u8f7dPython\u7684\u5b89\u88c5\u5305\uff08\u5b89\u88c5\u5305\u5305\u542b\u89e3\u91ca\u5668\u3001pip\u5305\u7b49\uff09\uff0c\u5e76\u4e14\u6307\u5b9a\u5b89\u88c5\u8def\u5f84\u3002\u4e4b\u540e\u6211\u4eec\u9700\u8981\u5c06python\u89e3\u91ca\u5668\u7684\u8def\u5f84\u548cpip\u7684\u8def\u5f84\u52a0\u5165\u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u4ee5\u4fbf\u5728\u4efb\u4f55\u8def\u5f84\u90fd\u80fd\u8bbf\u95ee\u5b83\u4eec\u3002\u8fd9\u91cc\u5c55\u793a\u6211\u7684python\u89e3\u91ca\u5668\u548cpip\u7684\u76ee\u5f55\uff0c\u4ec5\u4f9b\u53c2\u8003\u3002</p> <pre><code>D:\\mydoc\\environment\\python\\\nD:\\mydoc\\environment\\python\\Scripts\n</code></pre>"},{"location":"Python/Pycharm%E7%AE%A1%E7%90%86python%E9%A1%B9%E7%9B%AE/#pip","title":"\u5173\u4e8epip","text":"<p>pip\u5176\u5b9e\u5c31\u662fpython\u7684\u4e00\u4e2a\u5305\uff0c\u53ea\u662f\u5b83\u7684\u7279\u522b\u4e4b\u5904\u5728\u4e8e\u53ef\u4ee5\u5b89\u88c5\u548c\u7ba1\u7406\u522b\u7684\u4f9d\u8d56\u5305\u3002</p> <p>\u5e38\u7528\u6307\u4ee4\uff1a</p> <pre><code># \u67e5\u770bpip\u5305\u7684\u7248\u672c\u53ca\u4f4d\u7f6e\npip -V\n\n# \u4fee\u6539pip\u7684\u955c\u50cf\u6e90\uff08\u901a\u5e38\u662f\u5168\u5c40\u4fee\u6539\uff0c\u5bf9\u6574\u4e2a\u7535\u8111\u7684pip\u5305\u90fd\u6709\u6548\uff09\n# pip\u4f1a\u5728%APPDATA%/pip \u76ee\u5f55\u4e0b\u67e5\u627epip.ini \u6587\u4ef6\uff0c\u5e76\u5199\u5165\u6570\u636e\npip config set global.index-url https://mirrors.aliyun.com/pypi/simple/\npip config set install.trusted-host mirrors.aliyun.com\n\n# \u5b89\u88c5\u5305\npip install \u5305\u540d\n# \u5347\u7ea7\u5305\npip install -U \u5305\u540d\n# \u83b7\u53d6\u66f4\u591a\u5e2e\u52a9\npip --help\n</code></pre>"},{"location":"Python/Pycharm%E7%AE%A1%E7%90%86python%E9%A1%B9%E7%9B%AE/#virtualenv","title":"\u5173\u4e8evirtualenv","text":"<p>virtualenv\u662f\u4e00\u4e2a\u5305\uff0c\u7528\u6765\u521b\u5efa\u72ec\u7acb\u7684Python\u865a\u62df\u73af\u5883\uff0c\u53ef\u4ee5\u5c06\u6bcf\u4e2a\u9879\u76ee\u4e0e\u5176\u4ed6\u9879\u76ee\u72ec\u7acb\u5f00\u6765\uff0c\u4e92\u4e0d\u5f71\u54cd\uff0c\u89e3\u51b3\u4e86\u4f9d\u8d56\u5305\u7248\u672c\u51b2\u7a81\u7684\u95ee\u9898\u3002\u6211\u901a\u5e38\u57fa\u4e8evirtualenv\u521b\u5efa\u9879\u76ee\u3002</p> <p>virtualenv\u521b\u5efa\u7684\u9879\u76ee\u4e2d\u4f1a\u57fa\u4e8e\u539f\u59cb\u7684python\u73af\u5883\uff0c\u91cd\u65b0\u521b\u5efa\u65b0\u7684python\u89e3\u91ca\u5668\u548c\u65b0\u7684\u4f9d\u8d56\u5305\uff08\u4f9d\u8d56\u5305\u4e5f\u53ef\u4ee5\u4ece\u5168\u5c40\u7ee7\u627f\uff0c\u4e0d\u8fc7\u6211\u901a\u5e38\u4e0d\u4f1a\u8fd9\u4e48\u505a\uff0c\u56e0\u4e3a\u53ef\u80fd\u5bfc\u81f4\u4f9d\u8d56\u51b2\u7a81\uff09\uff0c\u901a\u5e38\u4f9d\u8d56\u5305\u4e2d\u6709pip\u3002</p> <p>\u5efa\u8bae\u4f7f\u7528\u547d\u4ee4\u884c\u7684\u65b9\u5f0f\u521b\u5efa\u4e00\u4e2a\u865a\u62df\u73af\u5883\uff0c\u8fd9\u6837\u4f1a\u5bf9virtualenv\u6709\u66f4\u6df1\u7684\u7406\u89e3\u3002</p>"},{"location":"Python/Pycharm%E7%AE%A1%E7%90%86python%E9%A1%B9%E7%9B%AE/#windows","title":"Windows\u4e0b\u8fd0\u884c\u865a\u62df\u73af\u5883","text":"<p>\u9996\u5148\u9700\u8981\u4fdd\u8bc1\u5168\u5c40\u6709python\u89e3\u91ca\u5668\u5e76\u914d\u7f6e\u5230\u73af\u5883\u53d8\u91cf\u4e2d\uff0c\u540c\u65f6\u5168\u5c40\u6709pip\u5305\u3002</p> <ol> <li>\u5b89\u88c5\u4f9d\u8d56\u5305\uff1a<code>pip install virtualenv</code></li> <li>\u521b\u5efa\u865a\u62df\u73af\u5883\uff1a<code>virtualenv venv</code>\uff0cvenv\u662f\u865a\u62df\u6587\u4ef6\u7684\u540d\u5b57\uff0c\u4e4b\u540e\u4f1a\u5c06\u4f9d\u8d56\u5305\u7b49\u6587\u4ef6\u5b58\u653e\u5230venv\u4e2d\u3002</li> <li>\u6fc0\u6d3b\u865a\u62df\u73af\u5883\uff1a<code>.\\venv\\Scripts\\activate</code>\u3002\u5982\u679c\u60f3\u9000\u51fa\u865a\u62df\u73af\u5883\uff0c\u8f93\u5165\uff1a<code>deactivate</code>\u3002deactivate\u548cactivate\u5728\u540c\u4e00\u76ee\u5f55\u4e0b\u3002</li> <li></li> </ol>"},{"location":"Python/Python%E5%BC%82%E5%B8%B8-%E6%9C%80%E4%BD%B3%E5%AE%9E%E6%88%98/","title":"Python\u5f02\u5e38-\u6700\u4f73\u5b9e\u6218","text":""},{"location":"Python/Python%E5%BC%82%E5%B8%B8-%E6%9C%80%E4%BD%B3%E5%AE%9E%E6%88%98/#_1","title":"\u524d\u8a00","text":"<p>\u5728Python\u4e2d\uff0c\u5f02\u5e38\u7c7b\u901a\u5e38\u8981\u7ee7\u627fException\u7c7b\u3002\u5728Python\u4e2d\uff0cexception\u548cerror\u7684\u533a\u522b\u5e76\u4e0d\u50cfJava\u8bed\u8a00\u90a3\u4e48\u660e\u786e\u3002\u6bd4\u5982\u5728Python\u7684\u6e90\u7801\u4e2d\uff0c\u6709\u5982\u4e0b\u7684\u5f02\u5e38\u7c7b\uff1a</p> <pre><code>class ValueError(Exception):\n    pass\n</code></pre> <p>\u53ef\u89c1\u5728python\u4e2d\uff0cerror\u548cexception\u662f\u6df7\u7528\u7684\u3002</p>"},{"location":"Python/Python%E5%BC%82%E5%B8%B8-%E6%9C%80%E4%BD%B3%E5%AE%9E%E6%88%98/#_2","title":"\u81ea\u5b9a\u4e49\u5f02\u5e38","text":"<ol> <li>\u5b9a\u4e49\u5f02\u5e38</li> </ol> <pre><code>class BizException(Exception):  # \u4e00\u5b9a\u8981\u7ee7\u627fException\u7c7b\n    pass\n</code></pre> <ol> <li>\u629b\u51fa\u5f02\u5e38</li> </ol> <pre><code>raise Exception('\u6545\u610f\u629b\u51fa\u5f02\u5e38\uff01')  # \u624b\u52a8\u629b\u51fa\u5f02\u5e38\uff0c\u901a\u5e38\u7528\u4e8e\u66ff\u6362\u539f\u6765\u7684\u5f02\u5e38\uff0c\u56e0\u4e3a\u539f\u6765\u7684\u5f02\u5e38\u4fe1\u606f\u53ef\u80fd\u4e0d\u5bb9\u6613\u627e\u5230\u5f02\u5e38\u539f\u56e0\n</code></pre> <ol> <li>\u6355\u83b7\u5f02\u5e38</li> </ol> <pre><code># \u5efa\u8bae\u91c7\u7528\u4e0b\u9762\u7684\u88c5\u9970\u5668\u6355\u83b7\u5f02\u5e38\n# \u5efa\u8bae\u88c5\u9970\u5668\u653e\u5728\u6700\u4e0a\u5c42\u51fd\u6570\u4e0a\u3002\n</code></pre>"},{"location":"Python/Python%E5%BC%82%E5%B8%B8-%E6%9C%80%E4%BD%B3%E5%AE%9E%E6%88%98/#_3","title":"\u65e5\u5fd7\u8bb0\u5f55\u5f02\u5e38","text":"<ol> <li>\u81ea\u5b9a\u4e49\u88c5\u9970\u5668\uff1a\u4e0b\u9762\u7684\u4ee3\u7801\u5355\u72ec\u653e\u5728\u6587\u4ef6\u4e2d\uff0c\u6587\u4ef6\u53ef\u4ee5\u547d\u540d\u4e3a<code>record_exception_log.py</code>\u3002</li> </ol> <p>\u9700\u8981<code>pip install objprint</code>\u3002</p> <pre><code>import logging\nimport os\nimport traceback\nfrom logging import StreamHandler\nfrom logging.handlers import TimedRotatingFileHandler\n\nfrom objprint import objstr  # pip install objprint\n\nfilename = \"logs/error/error.log\"\nif not os.path.exists(os.path.dirname(filename)):  # \u5982\u679c\u76ee\u5f55\u4e0d\u5b58\u5728\uff0c\u5219\u521b\u5efa\u8be5\u76ee\u5f55\n    os.makedirs(os.path.dirname(filename))\nlogger = logging.getLogger(__name__)  # \u65e5\u5fd7\u5bf9\u8c61\u540d\u79f0\nlogger.setLevel(level=logging.INFO)  # \u65e5\u5fd7\u7ea7\u522b\n# \u4e0b\u9762\u8bbe\u7f6e\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\u751f\u6210\u4e00\u4efd\u65b0\u7684\u65e5\u5fd7\u6587\u4ef6\uff0c\u4e14\u65e5\u5fd7\u6587\u4ef6\u7684\u603b\u6570\u5c0f\u4e8e\u4e00\u4e2a\u503c\ntimeRotatingFilehandler = TimedRotatingFileHandler(filename, when=\"D\", interval=1,\n                                                   backupCount=60, encoding='utf-8')  # \u6307\u5b9a\u65e5\u5fd7\u540d\uff0c\u8ba1\u65f6\u5355\u4f4d\uff0c\u8ba1\u65f6\u95f4\u9694\uff0c\u6700\u591a\u6587\u4ef6\u6570\u91cf\nformatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')  # \u65e5\u5fd7\u683c\u5f0f\ntimeRotatingFilehandler.setFormatter(formatter)\nstreamHandler = StreamHandler()\nlogger.addHandler(timeRotatingFilehandler)  # \u4e00\u5b9a\u8981\u7ed9logger\u5bf9\u8c61\u52a0\u5165handler\nlogger.addHandler(streamHandler)  # \u4e00\u5b9a\u8981\u7ed9logger\u5bf9\u8c61\u52a0\u5165handler\n\n\ndef record_exception_log(f):\n    def wrapper(*args, **kwargs):\n        try:\n            return f(*args, **kwargs)\n        except Exception as e:\n            logger.error(\"======error log start======\\n\")\n            logger.error(\"function name:\\t\")\n            logger.error(f.__name__)\n            logger.error(\"args:\\t\")\n            logger.error(objstr(args))\n            logger.error('error reason:')\n            logger.error(e.__str__())\n            logger.error(\"error logs:\\t\")\n            logger.error(traceback.format_exc())\n            logger.error(\"======error log end======\\n\")\n            # \u6709\u65f6\u5019\u6211\u4eec\u8fd8\u9700\u8981\u5c06\u5f02\u5e38\u5f80\u4e0a\u629b\uff0c\u6bd4\u5982\u8ba9\u5168\u5c40\u5f02\u5e38\u88c5\u9970\u5668\u6355\u83b7\u5f02\u5e38\uff0c\u5e76\u8fd4\u56de\u81ea\u5b9a\u4e49\u9519\u8bef\u4fe1\u606f\n            raise e\n\n    return wrapper\n</code></pre> <ol> <li>\u7528\u4e8e\u67d0\u4e2a\u51fd\u6570\u7684\u5b9a\u4e49\u4e0a\u9762</li> </ol> <pre><code>@record_exception_log()\ndef func(a, b, c):\n    try:\n        # \u4ee3\u7801 ...\n    except Exception as e:\n        raise Exception('\u624b\u52a8\u629b\u51fa\u5f02\u5e38\uff0c\u5f02\u5e38\u8be6\u60c5:' + str(e))\n</code></pre>"},{"location":"Python/Python%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6-logging/","title":"Python\u65e5\u5fd7\u6846\u67b6-logging","text":""},{"location":"Python/Python%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6-logging/#print","title":"\u4e3a\u4ec0\u4e48\u4e0d\u76f4\u63a5\u4f7f\u7528print","text":"<ol> <li>\u4f7f\u7528Python\u7684logging\u6a21\u5757\u53ef\u4ee5\u81ea\u5b9a\u4e49\u663e\u793a\u4e0d\u540c\u7ea7\u522b\u7684\u65e5\u5fd7\u4fe1\u606f\u3002</li> <li>logging\u53ef\u4ee5\u81ea\u5b9a\u4e49\u5c06\u65e5\u5fd7\u5185\u5bb9\u8f93\u5165\u5230\u67d0\u4e2a\u5730\u65b9\uff0c\u800cprint\u53ea\u80fd\u8f93\u51fa\u5230\u6807\u51c6\u8f93\u51fa\u4e2d\u3002</li> </ol>"},{"location":"Python/Python%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6-logging/#handler","title":"\u5173\u4e8ehandler","text":"<p>logging\u6a21\u5757\u4e2d\u6709\u5f88\u591a\u79cdhandler\u7c7b\u3002\u4e0d\u540c\u7684handler\u5bf9\u8c61\u53ef\u4ee5\u5c06\u65e5\u5fd7\u4fe1\u606f\u8f93\u5165\u5230\u4e0d\u540c\u7684\u5730\u65b9\u3002</p>"},{"location":"Python/Python%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6-logging/#_1","title":"\u57fa\u672c\u77e5\u8bc6","text":"<ol> <li>\u5efa\u8bae\u4f7f\u7528logger\u5bf9\u8c61\u6253\u5370\u65e5\u5fd7\u3002</li> <li>\u5efa\u8baelogger\u5bf9\u8c61\u4e2d\u6dfb\u52a01\u4e2a\u6216\u591a\u4e2ahandler\u5bf9\u8c61\u3002</li> <li>\u5e38\u7528\u7684Handler\u6709StreamHandler\u3001FileHandler\u3001TimedRotatingFileHandler\u3002</li> </ol> <p>\u5173\u4e8eStreamHandler\u548cFileHandler\uff1a</p> <pre><code>import logging\n\n# logger.setLevel &gt; handler.setLevel &gt; logging.basicConfig\nlogger = logging.getLogger(__name__)  # \u65e5\u5fd7\u5bf9\u8c61\u540d\u79f0\nlogger.setLevel(level=logging.DEBUG)  # \u65e5\u5fd7\u7ea7\u522b\nhandler = logging.StreamHandler()  # handler\u7c7b\u578b\n# handler = logging.FileHandler(\"log.txt\")\nformatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')  # \u65e5\u5fd7\u683c\u5f0f\nhandler.setFormatter(formatter)\nlogger.addHandler(handler)  # \u4e00\u5b9a\u8981\u7ed9logger\u5bf9\u8c61\u52a0\u5165handler\n\nlogger.info(\"Start print log\")\nlogger.debug(\"Do something\")\nlogger.warning(\"Something maybe fail.\")\nlogger.info(\"Finish\")\n</code></pre> <p>\u5173\u4e8eTimedRotatingFileHandler</p> <pre><code>import logging\nimport time\nfrom logging.handlers import TimedRotatingFileHandler\n\n\nlogger = logging.getLogger(__name__)  # \u65e5\u5fd7\u5bf9\u8c61\u540d\u79f0\nlogger.setLevel(level=logging.DEBUG)  # \u65e5\u5fd7\u7ea7\u522b\nhandler = TimedRotatingFileHandler(\"demo.log\", when=\"s\", interval=1, backupCount=15)  # \u6307\u5b9a\u65e5\u5fd7\u6587\u4ef6\u540d\uff0c\u8ba1\u65f6\u5355\u4f4d\uff0c\u8ba1\u65f6\u95f4\u9694\uff0c\u6700\u591a\u6587\u4ef6\u6570\u91cf\nformatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')  # \u65e5\u5fd7\u683c\u5f0f\nhandler.setFormatter(formatter)\nlogger.addHandler(handler)  # \u4e00\u5b9a\u8981\u7ed9logger\u5bf9\u8c61\u52a0\u5165handler\n\nfor i in range(3000):\n    logger.info(i)\n    print(i)  # \u7528\u4e8edebug\n    time.sleep(0.3)\n</code></pre>"},{"location":"Python/Python%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6-logging/#_2","title":"\u6700\u4f73\u5b9e\u6218","text":"<p>\u6587\u4ef6\u8def\u5f84\uff1a\u6839\u76ee\u5f55/handler/Loghandler.py</p> <pre><code>import logging\nimport os.path\nfrom logging.handlers import TimedRotatingFileHandler\n\n\n# \u8def\u5f84\u89c4\u8303:\u6839\u76ee\u5f55/handler/logHandler.py\nCURRENT_PATH = os.path.dirname(os.path.abspath(__file__))\nROOT_PATH = os.path.join(CURRENT_PATH, os.pardir)\n# \u786e\u4fdd\u6839\u8def\u5f84\u4e0b\u9762\u6709log\u6587\u4ef6\u5939\nLOG_PATH = os.path.join(ROOT_PATH, 'log')\n\n\nclass LogHandler(logging.Logger):\n    def __init__(self, log_file_name='log',  # \u6307\u5b9a\u65e5\u5fd7\u6587\u4ef6\u540d\u79f0\n                 min_level=logging.DEBUG,  # \u9ed8\u8ba4\u8f93\u51faDEBUG\u53ca\u4ee5\u4e0a\u7684\u6570\u636e\n                 stream=True,\n                 file=True):\n        self.log_file_name = log_file_name\n        self.min_level = min_level\n        logging.Logger.__init__(self, self.log_file_name, level=self.min_level)\n        if stream:\n            self.__setStreamHandler__()\n        if file:\n            self.__setFileHandler__()\n\n    def __setStreamHandler__(self, level=None):\n        stream_handler = logging.StreamHandler()\n        formatter = logging.Formatter('%(asctime)s %(filename)s[line:%(lineno)d] %(levelname)s %(message)s')\n        stream_handler.setFormatter(formatter)\n        if not level:\n            stream_handler.setLevel(self.min_level)\n        else:\n            stream_handler.setLevel(level)\n        self.addHandler(stream_handler)\n\n    def __setFileHandler__(self, level=None):\n        # \u5f53\u524d\u65e5\u5fd7\u6587\u4ef6\u662f\u7531\u54ea\u4e2a\u65e5\u5fd7\u5bf9\u8c61\u6253\u5370\u51fa\u6765\u7684\n        file_name = os.path.join(LOG_PATH, '{name}.log'.format(name=self.log_file_name))\n        # \u4fdd\u5b581\u5e74\u7684\u65e5\u5fd7\n        file_handler = TimedRotatingFileHandler(filename=file_name, when='D', interval=1, backupCount=365, encoding='utf-8')\n        file_handler.suffix = '%Y%m%d.log'\n        if not level:\n            file_handler.setLevel(self.min_level)\n        else:\n            file_handler.setLevel(level)\n        formatter = logging.Formatter('%(asctime)s %(filename)s[line:%(lineno)d] %(levelname)s %(message)s')\n\n        file_handler.setFormatter(formatter)\n        self.file_handler = file_handler\n        self.addHandler(file_handler)\n\n\nif __name__ == '__main__':\n    # \u4e00\u4e9b\u4f7f\u7528\u4e60\u60ef:\n    # \u5927\u591a\u51fa\u60c5\u51b5\u4e0b\uff0c\u53ea\u4f1a\u6253\u5370info\u7ea7\u522b\u548cerror\u7ea7\u522b\u7684\u65e5\u5fd7\u3002info\u4ee3\u8868\u6b63\u5e38\u60c5\u51b5\uff0cerror\u4ee3\u8868\u5f02\u5e38\u60c5\u51b5\u3002\n    # \u6253\u5370info\u7ea7\u522b\u65e5\u5fd7\u65f6\uff0c\u521b\u5efa\u65e5\u5fd7\u5bf9\u8c61\u6307\u5b9a\u540d\u79f0\u4e3ainfo\uff0c\u4e14\u65e5\u5fd7\u5bf9\u8c61\u540d\u4e3alog_info\n    log_info = LogHandler('info')\n    log_info.info('\u6253\u5370info\u65e5\u5fd7')\n\n    log_error = LogHandler('error')\n    log_error.error('\u6253\u5370error\u65e5\u5fd7')\n</code></pre>"},{"location":"Python/Python%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8C%85%E7%AE%A1%E7%90%86/","title":"Python\u6a21\u5757\u5316\u5305\u7ba1\u7406","text":""},{"location":"Python/Python%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8C%85%E7%AE%A1%E7%90%86/#_1","title":"\u524d\u8a00","text":"<p>Python\u7684\u6a21\u5757\u5316\u5305\u7ba1\u7406\u7c7b\u4f3cJava\u7684\u5305\u7ba1\u7406\u3002\u9700\u8981\u5148\u77e5\u9053\u4e00\u4e0b\u6982\u5ff5\uff1a</p> <ol> <li>\u6a21\u5757\uff1a\u4e00\u4e2a\u540e\u7f00\u4e3a.py\u7684\u6587\u4ef6\uff0c\u53eb\u505a\u4e00\u4e2a\u6a21\u5757\u3002</li> <li>\u5305\uff1a\u4e00\u4e2a\u5305\u542b\u5f88\u591a.py\u6587\u4ef6\u7684\u6587\u4ef6\u5939\uff0c\u901a\u5e38\u8be5\u6587\u4ef6\u5939\u4e0b\u6709\u4e00\u4e2a<code>__init__.py</code>\u6587\u4ef6\u3002\u5728pycharm\u4e2d\u521b\u5efapackage\u7684\u65f6\u5019\uff0c\u76f8\u5f53\u4e8e\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939\u5e76\u5728\u6587\u4ef6\u5939\u4e0b\u9762\u751f\u6210\u4e00\u4e2a<code>__init__.py</code>\u6587\u4ef6\u3002</li> <li>\u5e93\uff1a\u53ef\u80fd\u5305\u542b\u591a\u4e2a\u5305\u3002\u53ef\u4ee5\u8ba4\u4e3a\u662f\u4e00\u4e2a\u5b8c\u6574\u9879\u76ee\u7684\u6253\u5305\u3002</li> </ol>"},{"location":"Python/Python%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8C%85%E7%AE%A1%E7%90%86/#_2","title":"\u5b9e\u6218","text":"<p>\u4f7f\u7528pycharm\u521b\u5efa\u4e00\u4e2a\u7a7a\u7684python\u9879\u76ee\u3002\u5206\u522b\u601d\u8003\u4e0b\u8ff0\u60c5\u51b5\u7684import\u8bed\u53e5\u8be5\u600e\u4e48\u5199\u3002\u6838\u5fc3\u662fimport\u7684\u6839\u8def\u5f84\u662f\u5f53\u524d\u9879\u76ee\u7684\u6839\u76ee\u5f55\u3002\u901a\u5e38\u5efa\u8bae\u4e00\u4e2a\u6587\u4ef6\u5939\u4e0b\u653e\u4e00\u4e2a<code>__init__.py</code>\u6587\u4ef6\u3002</p> <ul> <li>\u6848\u4f8b1</li> </ul> <pre><code>a.py\nb.py\n# a.py\ndef func_a():\n    print('func a')\n# b.py\nimport a  # \u4e3a\u4ec0\u4e48\u8fd9\u4e48\u5199\na.func_a()\n\n# \u53e6\u4e00\u79cd\u5199\u6cd5\nfrom a import func_a  # \u4e3a\u4ec0\u4e48\u8fd9\u4e48\u5199\nfunc_a()\n</code></pre> <ul> <li>\u6848\u4f8b2</li> </ul> <pre><code>a.py\np\n--b.py\n# b.py\ndef func_b():\n    print('func b')\n# a.py\nimport p.b  # \u601d\u8003\u4e3a\u4ec0\u4e48\u8fd9\u4e48\u5199\n\np.b.func_b()    \n\n# \u4e5f\u53ef\u4ee5\u8fd9\u4e48\u5199\nimport p.b as pkg\n\npkg.func_b()\n</code></pre> <ul> <li>\u6848\u4f8b3</li> </ul> <pre><code>a.py\np\n--p2\n------b.py\n# a.py\ndef func_a():\n    print('func a')\n# b.py\nimport a  # \u601d\u8003\u4e3a\u4ec0\u4e48\u8fd9\u4e48\u5199\n\na.func_a()\n</code></pre>"},{"location":"Python/Python%E7%9A%84%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/","title":"Python\u7684\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316","text":""},{"location":"Python/Python%E7%9A%84%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/#_1","title":"\u524d\u8a00","text":"<p>\u5728Python\u4e2d\uff0c\u5e8f\u5217\u5316\u4e00\u4e2a\u5bf9\u8c61\u662f\u975e\u5e38\u9ebb\u70e6\u7684\u4e8b\uff0c<code>json.dumps</code>\u53ea\u80fd\u5e8f\u5217\u5316dict\uff0c\u6ca1\u6cd5\u5e8f\u5217\u5316\u5bf9\u8c61\u3002\u5373\u4fbf\u8c03\u7528\u5bf9\u8c61\u7684<code>__dict__</code>\u51fd\u6570\uff0c\u4e5f\u4f1a\u6709\u95ee\u9898\uff0c\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u6848\u4f8b\uff1a</p> <pre><code>import json\n\n\nclass Subject:\n    def __init__(self, name: str = '', score: float = 0):\n        self.name = name\n        self.score = score\n\n\nclass Person:\n    def __init__(self, username: str = '', age: int = 0, subject: Subject = None):\n        self.username = username\n        self.age = age\n        self.subject = subject\n\n\nsubject = Subject(name='math', score=99)\nperson = Person('lhl', 8, subject=subject)\ns = json.dumps(person)  # \u5e8f\u5217\u5316\u5931\u8d25\uff0c\u56e0\u4e3a\u5bf9\u8c61\u4e2d\u8fd8\u5d4c\u5957\u5bf9\u8c61\nprint(s)\n</code></pre>"},{"location":"Python/Python%E7%9A%84%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/#_2","title":"\u5b9e\u6218","text":"<p>\u5efa\u8bae\u4f7f\u7528<code>jsonpickle</code>\uff0c\u4f7f\u7528\u524d\u9700\u8981pip install\u3002</p> <pre><code>import json\n\nimport jsonpickle\n\n\nclass Subject:\n    def __init__(self, name: str = '', score: float = 0):\n        self.name = name\n        self.score = score\n\n\nclass Person:\n    def __init__(self, username: str = '', age: int = 0, subject: Subject = None):\n        self.username = username\n        self.age = age\n        self.subject = subject\n\n\nsubject = Subject(name='math', score=99)\nperson = Person('lhl', 8, subject=subject)\ns = jsonpickle.encode(person)  # \u5e8f\u5217\u5316 {\"py/object\": \"__main__.Person\", \"username\": \"lhl\", \"age\": 8, \"subject\": {\"py/object\": \"__main__.Subject\", \"name\": \"math\", \"score\": 99}}\nprint(s)\nobj = jsonpickle.decode(s)  # \u53cd\u5e8f\u5217\u5316\nprint(obj.username)\n</code></pre> <p>\u4e0a\u8ff0\u4ee3\u7801\u4e2d\uff0c\u4f60\u53ef\u80fd\u4f1a\u53d1\u73b0\u6709<code>py/object</code>\u5c5e\u6027\uff0c\u8fd9\u662f\u4e3a\u4e86\u53cd\u5e8f\u5217\u5316\u65f6\u627e\u5230\u6307\u5b9a\u7684\u7c7b\uff08\u641e\u4e0d\u61c2Python\u4e3a\u4ec0\u4e48\u9700\u8981\u8fd9\u4e2a\u5c5e\u6027\uff0cJava/Golang\u4e2d\u90fd\u4e0d\u9700\u8981\u4e00\u4e2a\u5c5e\u6027\u6307\u5b9a\u5bf9\u8c61\uff09</p> <p>\u5982\u679c\u6211\u4eec\u60f3\u8981\u5f97\u5230\u5bf9\u8c61\u5e8f\u5217\u5316\u540e\u7eaf\u6b63\u7684Json\u5b57\u7b26\u4e32\uff0c\u5728encode\u51fd\u6570\u4e2d\u4f20\u5165\u53c2\u6570unpicklable=False\u5373\u53ef\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>import jsonpickle\n\n\nclass Subject:\n    def __init__(self, name: str = '', score: float = 0):\n        self.name = name\n        self.score = score\n\n\nclass Person:\n    def __init__(self, username: str = '', age: int = 0, subject: Subject = None):\n        self.username = username\n        self.age = age\n        self.subject = subject\n\n\nsubject = Subject(name='math', score=99)\nperson = Person('lhl', 8, subject=subject)\ns = jsonpickle.encode(person, unpicklable=False)\nprint(s)\n</code></pre>"},{"location":"Python/Python%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8/","title":"Python\u81ea\u5b9a\u4e49\u5168\u5c40\u5f02\u5e38","text":""},{"location":"Python/Python%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8/#_1","title":"\u9700\u6c42","text":"<p>\u6211\u4eec\u5e0c\u671b\u5728\u4e00\u4e2acontroller\u5c42\u7684\u51fd\u6570func\u4e0a\u6807\u6ce8\u4e00\u4e2a\u88c5\u9970\u5668\uff0c\u5f53func\u4e2d\u629b\u51fa\uff08raise\uff09\u5f02\u5e38\u540e\uff0c\u7edf\u4e00\u8fd4\u56de\u9519\u8bef\u4fe1\u606f\u3002</p>"},{"location":"Python/Python%E8%87%AA%E5%AE%9A%E4%B9%89%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8/#_2","title":"\u4ee3\u7801","text":"<p>\u81ea\u5b9a\u4e49\u5f02\u5e38\u88c5\u9970\u5668</p> <pre><code>from django.http import JsonResponse\n\n\ndef error_resp(f):\n    def wrapper(*args, **kwargs):\n        try:\n            return f(*args, **kwargs)\n        except Exception as e:\n            return JsonResponse({  # \u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u81ea\u5b9a\u4e49\u8fd4\u56de\u5f02\u5e38\u4fe1\u606f\n                'success': False,\n                'msg': e.__str__()\n            }, json_dumps_params={'ensure_ascii': False})\n\n    return wrapper\n</code></pre> <p>\u4f7f\u7528</p> <pre><code>@error_resp  # \u5916\u5c42\u88c5\u9970\u5668\n@record_exception_log  # \u5185\u5c42\u88c5\u9970\u5668\uff08\u5148\u4e0d\u7ba1\u5b83\u7684\u4f5c\u7528\uff09\ndef first_login(request):\n    pass\n</code></pre> <p>\u3010\u6ce8\u610f\u3011\u4e00\u5b9a\u8981\u786e\u4fdd<code>error_resp</code>\u5728\u6700\u5916\u5c42\uff0c\u5e76\u4e14\u4fdd\u8bc1\u5185\u5b58\u88c5\u9970\u5668\u4e0d\u80fd\u6355\u83b7\u5f02\u5e38\uff08\u6216\u8005\u5185\u5b58\u88c5\u9970\u5668\u6355\u83b7\u5b8c\u5f02\u5e38\u540e\u8fd8\u8981\u629b\u51fa\u5f02\u5e38\uff09</p>"},{"location":"Python/Scrapy/","title":"Scrapy","text":"<p>[toc]</p> <ol> <li>\u5b89\u88c5Scrapy\uff1a<code>pip install scrapy</code>\u3002</li> <li>\u521d\u59cb\u5316\u9879\u76ee\uff1a<code>scrapy startproject mypro</code>\uff0c\u5e76\u8fdb\u5165\u8be5\u76ee\u5f55<code>mypro</code>\u3002</li> <li>\u8fd0\u884c\u9879\u76ee\uff1a<code>scrapy gensprider example example.com</code>\u3002</li> </ol>"},{"location":"Python/django%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/","title":"django\u4f7f\u7528\u624b\u518c","text":"<p>[toc]</p>"},{"location":"Python/django%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#django_1","title":"\u521b\u5efaDjango\u9879\u76ee","text":"<ol> <li> <p>\u6253\u5f00Pycharm\uff0cPycharm\u53ef\u4ee5\u76f4\u63a5\u542f\u52a8Django\u9879\u76ee\u3002</p> </li> <li> <p>\u4e5f\u53ef\u4ee5\u624b\u52a8\u5b89\u88c5django\u4f9d\u8d56\uff0c\u5e76\u521d\u59cb\u5316Django\u9879\u76ee\uff1a<code>django-admin startproject mysite</code>\u3002\u5176\u4e2dmysite\u662f\u9879\u76ee\u540d\u3002</p> </li> <li> <p>\u6211\u4eec\u5c06<code>manage.py</code>\u6240\u5728\u7684\u76ee\u5f55\u79f0\u4e3a\u6839\u76ee\u5f55\uff0c\u5728\u6839\u76ee\u5f55\u4e0b\u6267\u884c\u542f\u52a8web\u670d\u52a1\u3002</p> </li> </ol> <p><code>bash    # \u65b9\u5f0f1.\u76f4\u63a5\u8fd0\u884c\u9879\u76ee\uff0c\u9ed8\u8ba48000\u7aef\u53e3    python manage.py runserver    # \u65b9\u5f0f2.\u76d1\u542c\u67d0\u4e2a\u7aef\u53e3    python manage.py runserver 0.0.0.0:8000</code></p> <ol> <li> <p>\u6839\u76ee\u5f55\u4e0b\u6267\u884c\uff1a<code>python manage.py startapp polls</code>\u3002\u8fd9\u91cc\u6211\u4eec\u521b\u5efa\u4e86\u4e00\u4e2a\u540d\u4e3apolls\u7684\u5e94\u7528\u3002</p> </li> <li> <p>\u5c06\u65b0\u521b\u5efa\u7684polls\u5e94\u7528\u52a0\u8f7d\u5230<code>/mysite/mysite/settings.py</code>\u6587\u4ef6\u4e2d\u3002</p> </li> </ol> <p><code>python    INSTALLED_APPS = [        'django.contrib.admin',        'django.contrib.auth',        'django.contrib.contenttypes',        'django.contrib.sessions',        'django.contrib.messages',        'django.contrib.staticfiles',        # \u4e0b\u9762\u662f\u81ea\u5df1\u521b\u5efa\u7684\u5e94\u7528        'polls'    ]</code></p> <ol> <li>\u9879\u76ee\u7ed3\u6784\uff1a</li> </ol> <p><code>mysite       # \u6839\u8def\u5f84\u6267\u884cdjango-admin startproject mysite\uff0c\u521b\u5efa\u6b64\u9879\u76ee    ----mysite   # \u4e3b\u5e94\u7528    ----polls    # \u81ea\u5b9a\u4e49\u5e94\u7528</code></p> <p>\u9879\u76ee\u5305\u542b\u5e94\u7528\u3002\u6bd4\u5982\uff0c\u56fe\u4e66\u7ba1\u7406\u7cfb\u7edf\u662f\u4e00\u4e2a\u9879\u76ee\u3002\u501f\u4e66\u662f\u4e00\u4e2a\u5e94\u7528\uff0c\u8fd8\u4e66\u662f\u53e6\u4e00\u4e2a\u5e94\u7528\u3002</p> <p>\u5f53\u7136\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4e0d\u7528\u521b\u5efa\u65b0\u5e94\u7528\uff0c\u800c\u662f\u76f4\u63a5\u4f7f\u7528\u521d\u59cb\u5316\u7684\u4e3b\u5e94\u7528\uff0c\u6b64\u65f6\u4e00\u5b9a\u8981\u5728\u4e3b\u5e94\u7528\u76ee\u5f55\u4e0b\u521b\u5efa\u4e00\u4e2a<code>migrations</code>\u6587\u4ef6\uff0c\u4f8b\u5982\uff1a<code>mysite/mysite/migrations</code></p>"},{"location":"Python/django%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#django_2","title":"\u7f16\u5199Django\u5e94\u7528","text":"<ol> <li>\u7f16\u5199polls\u5e94\u7528\u7684\u89c6\u56fe\u6587\u4ef6<code>/mysite/polls/views.py</code>\u3002\u7c7b\u4f3cSpring Boot\u7684controller\u6587\u4ef6\u3002</li> </ol> <p>```python    from django.http import HttpResponse</p> <p>def index(request):        return HttpResponse(\"Hello, world. You're at the polls index.\")    ```</p> <ol> <li>\u914d\u7f6epolls\u5e94\u7528\u7684URL\u6620\u5c04\u5173\u7cfb\uff0c\u7f16\u5199\u6587\u4ef6<code>/mysite/polls/urls.py</code>\u3002</li> </ol> <p>```python    from django.urls import path    from . import views</p> <p>urlpatterns = [        path(\"\", views.index, name=\"index\"), # name\u5c5e\u6027\u7279\u522b\u9002\u7528\u4e8e\u6a21\u677f\u3002\u5bf9\u4e8e\u524d\u540e\u7aef\u5206\u79bb\u7684\u9879\u76ee\u6765\u8bf4\uff0c\u610f\u4e49\u4e0d\u5927\uff0c\u53ef\u4ee5\u4e0d\u7528\u8bbe\u7f6ename\u5c5e\u6027\u3002    ]    ```</p> <ol> <li>\u7f16\u5199mysite\u9879\u76ee\u7684URL\u6620\u5c04\u5173\u7cfb\uff0c\u7f16\u5199\u6587\u4ef6<code>/pro/mysite/mysite/urls.py</code>\u3002</li> </ol> <p>```python    from django.contrib import admin    from django.urls import path, include</p> <p>urlpatterns = [        path('admin/', admin.site.urls),        path('polls/', include('polls.urls'))  # \u6211\u6dfb\u52a0\u7684    ]    ```</p> <ol> <li>\u8bbf\u95ee<code>http://localhost:8000/polls</code>\u3002</li> </ol>"},{"location":"Python/django%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_1","title":"\u8fde\u63a5\u6570\u636e\u5e93","text":"<p>Django\u4f1a\u9ed8\u8ba4\u4f7f\u7528SQLite\u6570\u636e\u5e93\u3002\u4f46\u662f\u9879\u76ee\u4e2d\u901a\u5e38\u4f7f\u7528MySQL\u6570\u636e\u5e93\uff0c\u56e0\u6b64\u9700\u8981\u5982\u4e0b\u914d\u7f6e\u3002</p> <ol> <li> <p>\u5b89\u88c5MySQL\u9a71\u52a8\u7a0b\u5e8f\uff1a<code>pip install mysqlclient</code>\u3002</p> </li> <li> <p>\u4e3b\u5e94\u7528<code>/mysite/settings.py</code>\u4e2d\u914d\u7f6e\u6570\u636e\u5e93\u3002</p> </li> </ol> <p>```python    ''' \u9ed8\u8ba4\u6570\u636e\u5e93\u914d\u7f6e    DATABASES = {        'default': {            'ENGINE': 'django.db.backends.sqlite3',            'NAME': BASE_DIR / 'db.sqlite3',        }    }    '''</p> <p># Mysql \u6570\u636e\u5e93\u914d\u7f6e    DATABASES = {        'default': {            \"ENGINE\": \"django.db.backends.mysql\", # \u9009\u62e9MySQL\u5f15\u64ce            \"NAME\": \"django_db\",  # \u6570\u636e\u5e93\u540d            \"USER\": \"root\",            \"PASSWORD\": \"root\",            \"HOST\": \"127.0.0.1\",            \"PORT\": \"3306\",        }    }    ```</p> <ol> <li>\u786e\u4fdd\u5f53\u524d\u5e94\u7528\u88ab\u6ce8\u518c\uff1a\u8fdb\u5165\u4e3b\u5e94\u7528\u7684<code>/mysite/settings.py</code>\uff0c\u627e\u5230<code>INSTALLED_APPS</code>\uff0c\u6ce8\u518c\u81ea\u5df1\u7684\u5e94\u7528\u3002</li> </ol> <p><code>python    INSTALLED_APPS = [        # \u81ea\u5df1\u914d\u7f6e        'polls'    ]</code></p> <ol> <li> <p>\u8fc1\u79fb\u6570\u636e\u5e93\uff0c\u8fdb\u5165\u6839\u76ee\u5f55\uff0c\u6267\u884c\uff1a<code>python manage.py migrate</code>\u3002\u6b64\u65f6\u53ef\u4ee5\u770b\u5230\u6570\u636e\u5e93\u4e2d\u751f\u6210\u4e86\u5f88\u591a\u6570\u636e\u8868\u3002</p> </li> <li> <p>\u6211\u4eec\u53ef\u4ee5\u5728\u81ea\u5df1\u7684\u5e94\u7528\u4e2d\u521b\u5efaModel\uff0c\u5e76\u540c\u6b65\u5230\u6570\u636e\u5e93\u3002\u7b80\u5355\u6765\u8bf4\uff0c\u5c31\u662f\u5728<code>/polls/models.py</code>\u6587\u4ef6\u4e2d\u521b\u5efa\u4e00\u4e2aclass\uff0c\u7136\u540e\u6570\u636e\u5e93\u4e2d\u81ea\u52a8\u751f\u6210\u5bf9\u5e94\u7684\u6570\u636e\u8868\u3002</p> </li> <li> <p>\u7f16\u5199\u6587\u4ef6<code>/polls/models.py</code>\u3002</p> </li> </ol> <p>```python    import decimal    from datetime import datetime    from django.db import models</p> <p># \u5b57\u6bb5\u8bbe\u7f6e\u5efa\u8bae\uff1a\u5efa\u8bae\u6240\u6709\u503c\u90fd\u8bbe\u5b9a\u9ed8\u8ba4\u503c\u3002    class Book(models.Model):        title: str = models.CharField(max_length=100)        author: str = models.CharField(max_length=100)        publication_date: datetime = models.DateTimeField(default=datetime.now())        # \u6574\u6570\u6570\u4f4d+\u5c0f\u6570\u6570\u4f4d &lt;= 8  \u4e24\u4f4d\u5c0f\u6570  \u9ed8\u8ba4\u662f0.00        price: decimal = models.DecimalField(max_digits=8, decimal_places=2, default=0.00)        code: int = models.IntegerField(default=0)</p> <pre><code>   # \u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528__dict__ \u56e0\u4e3a__dict__\u4e2d\u5305\u542b\u5f88\u591a\u7236\u7c7b\u7684\u5b57\u6bb5\uff0c\u5728\u4f7f\u7528update_or_create\u7b49\u65b9\u6cd5\u65f6\u4f1a\u62a5\u9519\n   def get_dict(self):\n       result_dict = {\n           'title': self.title,\n           'author': self.author,\n           'publication_date': self.publication_date,\n           'price': self.price,\n           'code': self.code\n       }\n       return result_dict\n\n   # \u5047\u5b9a\u9700\u8981\u5bf9Book\u6570\u7ec4\u81ea\u5b9a\u4e49\u6392\u5e8f\uff0c\u53ef\u4ee5\u91cd\u5199__lt__\u51fd\u6570\uff0c\u7136\u540e\u53ef\u4ee5\u76f4\u63a5sort\u8fd9\u4e2a\u6570\u7ec4: book_arr.sort()\n   def __lt__(self, other):\n       if isinstance(other, Book):\n           if self.title != other.title:\n               return self.title &lt; other.title\n           if self.author != other.author:\n               return self.author &lt; other.author\n           return self.publication_date &lt; other.publication_date\n       return NotImplemented\n\n   # \u5982\u679c\u60f3\u5bf9Book\u6570\u7ec4\u53bb\u91cd\uff0c\u5219\u9700\u8981\u91cd\u5199__hash__\u51fd\u6570\u548c__eq__\u51fd\u6570\u3002\u53bb\u91cd\u65f6\u53ea\u9700\u8981: book_arr = list(set(book_arr))\n   def __hash__(self):\n       return hash((self.title, self.author))\n\n   def __eq__(self, other):\n       if isinstance(other, Book):\n           return (self.title == other.title\n                   and self.author == other.author)\n       return False\n\n   class Meta:\n       db_table = 'xnxy_book'  # \u81ea\u5b9a\u4e49\u6570\u636e\u8868\u540d\n</code></pre> <p>```</p> <ol> <li>\u8fc1\u79fb\u6570\u636e\uff1a</li> </ol> <p><code>bash    python manage.py makemigrations    python manage.py migrate</code></p> <ol> <li>\u5907\u6ce8\uff1a</li> </ol> <p>\u5f3a\u70c8\u5efa\u8bae\u9075\u5faa\u8fc1\u79fb\u5de5\u5177\u4fee\u6539\u6570\u636e\u8868\uff01</p> <p>\u4e0d\u8981\u76f4\u63a5\u5728\u6570\u636e\u5e93\u4e2d\u4fee\u6539/\u5220\u9664\u6570\u636e\u8868\uff01\u8fd9\u6837\u53ef\u80fd\u5bfc\u81f4\u8fc1\u79fb\u8bb0\u5f55\u66f4\u65b0\u5931\u8d25\u3002\u53ef\u4ee5\u5220\u9664makemigrations\u8868\u4e2d\u7684\u8fc1\u79fb\u8bb0\u5f55\u89e3\u51b3\u8be5\u95ee\u9898\u3002</p>"},{"location":"Python/django%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#sql","title":"SQL\u589e\u5220\u6539\u67e5","text":"<p>\u589e</p> <pre><code># \u65b9\u6cd5\u4e00\nbook: Book = Book(title='C++')\nbook.save()  # \u4fdd\u5b58\u5931\u8d25\uff0c\u56e0\u4e3acode\u5c5e\u6027\u6ca1\u6709\u9ed8\u8ba4\u503c\uff0c\u4e0d\u80fd\u4e3a\u7a7a\n\nbook: Book = Book(title='C++', code=1)  # \u5373\u4fbf\u6ca1\u6709\u6307\u5b9aauthor\uff0c\u4f46\u662f\u4e5f\u4f1a\u4e3aauthor\u5206\u914d\u4e00\u4e2a\u7a7a\u5b57\u7b26\u4e32\nbook.save()  # \u4fdd\u5b58\u6210\u529f\uff0c\u6ce8\u610fsave\u51fd\u6570\u6ca1\u6709\u8fd4\u56de\u503c\n\n\n# \u65b9\u6cd5\u4e8c (\u5efa\u8bae)\ninserted_book = Book.objects.create(title='C++', author='\u6653\u9f99')  # \u4f1a\u8fd4\u56de\u63d2\u5165\u5230\u6570\u636e\u5e93\u4e2d\u7684\u503c\nprint(inserted_book)\n\n# \u65b9\u6cd5\u4e09 (\u66f4\u5efa\u8bae)\nbook = Book()\n# ... \u5047\u5b9a\u6211\u4eec\u5df2\u7ecf\u521d\u59cb\u5316\u4e86book\u5bf9\u8c61\ninserted_book = Book.objects.create(**book.get_dict())  # \u8fd9\u79cd\u65b9\u5f0f\u53ef\u4ee5\u76f4\u63a5\u5c06\u5bf9\u8c61\u63d2\u5165\u5230\u6570\u636e\u5e93\u4e2d\nprint(inserted_book)\n</code></pre> <p>\u6279\u91cf\u589e</p> <pre><code>course_arr = [Course(), Course(), Course()]\nBook.objects.bulk_create(course_arr)\n</code></pre> <p>\u4e0d\u5b58\u5728\u5c31\u3010\u589e\u3011\uff0c\u5b58\u5728\u5c31\u3010\u6539\u3011</p> <p>\u5047\u5b9a\u6570\u636e\u8868\u4e2d\u7684\u6570\u636e\u5982\u4e0b\uff1a</p> id title author price code publication_date 1 Java \u4e00\u9f99 1.00 1 2023-10-08 00:00:00.000000 2 C++ \u4e8c\u9f99 2.00 2 2023-10-08 00:00:00.000000 3 C++ \u4e09\u9f99 3.00 3 2023-10-08 00:00:00.000000 <pre><code># defaults\u4e2d\u65f6\u4fee\u6539\u540e\u7684\u5b57\u6bb5\u503c\uff0cdefaults\u4e2d\u6ca1\u6709\u6d89\u53ca\u5230\u7684\u5b57\u6bb5\u4fdd\u6301\u539f\u503c\u3002\u975edefaults\u503c\u5c31\u662f\u67e5\u8be2\u6761\u4ef6\u3002\n# \u4e24\u4e2a\u8fd4\u56de\u503c\uff1a\u7b2c1\u4e2a\u662f\u4fee\u6539/\u63d2\u5165\u7684\u5bf9\u8c61\u7684\u7ed3\u6784\uff1b\u7b2c2\u4e2a\u7528\u4e8e\u5224\u65ad\u662f\u5426\u662f\u65b0\u5efa\u7684\u5bf9\u8c61\n# \u786e\u4fdd\u53ea\u80fd\u67e5\u8be2\u51fa1\u4e2a\u503c\ncreated_book, is_created = Book.objects.update_or_create(title='Java', defaults={'author': '\u5927\u9f99'})\nif is_created:\n    print('\u521b\u5efa\u5bf9\u8c61')\nelse:\n    print('\u4fee\u6539\u5bf9\u8c61')\nprint(created_book)\n'''\n\u6253\u5370\u7ed3\u679c:\n\u4fee\u6539\u5bf9\u8c61\n{title:Java,author:\u5927\u9f99,publication_date:2023-10-08 00:00:00+00:00,price:1.00,code:1}\n'''\n</code></pre> <pre><code># \u62a5\u9519\uff0c\u56e0\u4e3a\u5b58\u5728\u4e24\u4e2a\u6ee1\u8db3\u6761\u4ef6\u7684\u503c\ncreated_book, is_created = Book.objects.update_or_create(title='C++', defaults={'author': '\u5927\u9f99'})\n</code></pre> <pre><code># \u63d2\u5165\u6210\u529f\ncreated_book, is_created = Book.objects.update_or_create(title='Python', defaults={'author': '\u5927\u9f99', 'code': 3})\n</code></pre> <p>\u5220</p> <pre><code>Book.objects.filter(title='C++', author='\u6653\u9f99').delete()\n</code></pre> <p>\u6279\u91cf\u5220\u9664</p> <p>\u8fd9\u91cc\u7684\u6279\u91cf\u5220\u9664\u662f\u6307\u5220\u9664\u591a\u4e2a\u884c\u8bb0\u5f55\uff0c\u5e76\u4e14\u8fd9\u4e9b\u884c\u8bb0\u5f55\u7684\u503c\u5404\u4e0d\u76f8\u540c\u3002</p> <pre><code>objects = [\n    {'title': 'C++', 'author': '\u4e8c\u9f99'},\n    {'title': 'Python', 'author': 'x\u9f99'},\n    {'title': 'PHP', 'author': '\u5929\u9f99'}\n]\nquery_conditions = []\nfor obj in objects:\n    query_conditions.append(Q(title=obj['title']) &amp; Q(author=obj['author']))\n\nfinal_query = reduce(lambda x, y: x | y, query_conditions)\n\nresult_arr = Book.objects.filter(final_query)\nresult_arr.delete()\n</code></pre> <p>\u6539</p> <pre><code>Book.objects.filter(title='C++').update(author='\u6653\u9f99')\n</code></pre> <p>\u67e5</p> <pre><code>from django.db.models import Q\n\nbook_query_set = Book.objects.filter(Q(title='C++') &amp; Q(author='\u4e8c\u9f99'))\nbook_arr = [book for book in book_query_set]  # book_arr\u4e2d\u7684\u5143\u7d20\u7c7b\u578b\u662fBook\nprint(book_arr)\n</code></pre>"},{"location":"Python/django%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_2","title":"\u83b7\u53d6\u8bf7\u6c42\u53c2\u6570","text":"<p>\u53c2\u8003acwing\u6559\u7a0b\u3002</p> <p>django-admin --version \u67e5\u770bdjango\u7248\u672c</p> <p>django-admin startproject <code>acapp</code></p> <p>\u76ee\u5f55\u7ed3\u6784\uff1a</p> <pre><code>acapp/\n|-- acapp\n|   |-- __init__.py\n|   |-- asgi.py\n|   |-- settings.py\n|   |-- urls.py\n|   `-- wsgi.py\n`-- manage.py\n</code></pre> <p>\u542f\u52a8\u670d\u52a1\uff1a</p> <p>python3 manage.py runserver 0.0.0.0:8000</p> <p>windows\u4e0a\u628apython3 \u6539\u6210 python</p> <p>\u6b64\u65f6\u4e0d\u80fd\u6b63\u5e38\u8bbf\u95ee\uff0c\u9700\u5728<code>acapp/acapp/settings.py</code>\u4e2d\u914d\u7f6eALLOWED_HOSTS\u3002\u53ef\u4ee5\u8f93\u5165<code>ag ALLOWD_HOSTS</code>\u67e5\u770b\u5173\u952e\u5b57\u5728\u54ea\u91cc\u3002</p> <p>\u8fd0\u884c\u6210\u529f\uff01</p> <p>\u6dfb\u52a0.gitignore\uff0c\u586b\u5199<code>**/__pychach__</code>\uff0c<code>*.swp</code></p> <p>python3 manage.py startapp game</p> <p>\u521b\u5efa\u7ba1\u7406\u5458</p> <p>python3 manage.py createsuperuser</p> <p>\u8fdb\u5165game\u76ee\u5f55</p> <p>touch urls.py</p> <p>mkdir templates</p> <pre><code>modules views urls\u53ef\u4ee5\u53ea\u662f\u4e00\u4e2a\u6587\u4ef6\ntemplates\u5fc5\u987b\u662f\u6587\u4ef6\u5939\nmodules \u5b58\u6570\u636e\uff08class\uff09\nviews \u5b58\u89c6\u56fe\uff08\u51fd\u6570\u903b\u8f91\uff09\nurls \u8def\u7531\n</code></pre> <p>\u6b64\u65f6\u76ee\u5f55\u7ed3\u6784\u662f\uff1a</p> <pre><code>.\n|-- acapp\n|   |-- __init__.py\n|   |-- __pycache__\n|   |   |-- __init__.cpython-38.pyc\n|   |   |-- settings.cpython-38.pyc\n|   |   |-- urls.cpython-38.pyc\n|   |   `-- wsgi.cpython-38.pyc\n|   |-- asgi.py\n|   |-- settings.py\n|   |-- urls.py\n|   `-- wsgi.py\n|-- db.sqlite3\n|-- game\n|   |-- __init__.py\n|   |-- admin.py\n|   |-- apps.py\n|   |-- migrations\n|   |   `-- __init__.py\n|   |-- models.py\n|   |-- templates\n|   |-- tests.py\n|   |-- urls.py\n|   `-- views.py\n`-- manage.py\n</code></pre> <p>\u7f16\u8f91game\u4e2d\u7684views.py\u6587\u4ef6\u3002</p> <pre><code>from django.http import HttpResponse\n\ndef index(request):\n    return HttpResponse(\"\u6211\u7684\u7b2c\u4e00\u4e2adjango\u7f51\u9875\")\n\ndef play(request):\n    return HttpResponse(\"\u6e38\u620f\u754c\u9762\")\n</code></pre> <p>\u7f16\u8f91game\u4e2d\u7684urls\u6587\u4ef6\uff1a</p> <pre><code>from django.urls import path\nfrom game.views import index, play\n\n\nurlpatterns = [\n    path('game/', index, name=\"index\"),\n    path('play/', play, name='play')\n]\n</code></pre> <p>\u5c06game\u4e2d\u7684urls\u5f15\u5165\u5230\u603b\u7684urls\u4e2d\uff08acapp\u4e2d\uff09</p> <pre><code>from django.contrib import admin\nfrom django.urls import path, include\n\nurlpatterns = [\n    path('', include('game.urls')),\n    path('admin/', admin.site.urls),\n]\n</code></pre> <p>\u7b2c\u4e8c\u8282\u8bfe</p> <p>django\u9879\u76ee\u7ed3\u6784</p> <pre><code>templates\u76ee\u5f55: \u7ba1\u7406html\u6587\u4ef6\nurls\u76ee\u5f55: \u8def\u7531\u914d\u7f6e\u6587\u4ef6\nmodels\u76ee\u5f55:\nviews\u76ee\u5f55: http\u51fd\u6570\nstatic\u76ee\u5f55\uff1a\u5b58\u653e\u9759\u6001\u6587\u4ef6\uff0c\u5305\u62echtml\uff0ccss\uff0cjs\uff0cpng...\nconsumers\u76ee\u5f55: \u7ba1\u7406websocket\u51fd\u6570\n</code></pre> <p>\u5220\u6389\u4e4b\u524d\u7684urls, models, views\u6587\u4ef6\uff0c\u5efa\u7acb\u5bf9\u5e94\u76843\u4e2a\u76ee\u5f55\uff0c\u5206\u522b\u521b\u5efa<code>__init__.py</code>\u6587\u4ef6</p> <p>\u91cd\u65b0\u914d\u7f6eacapp\u4e2d\u7684urls\u3002</p> <p>\u5728acapp\u7684settings.py\u4e2d\u8bbe\u7f6e\u65f6\u533a\uff0c\u5c06<code>TIME_ZONE</code>\u7684\u503c\u6539\u4e3a<code>Asia/Shanghai</code></p> <p>\u5c06\u4e4b\u524d\u521b\u5efa\u7684game\u52a0\u5165acapp\u4e2d\uff1a</p> <pre><code>game\u76ee\u5f55\u4e0b\u627e\u5230apps.py\uff0c\u590d\u5236\u7c7b\u540dGameConfig\u3002\u5728acapp\u76ee\u5f55\u4e0b\u7684settings.py\u6587\u4ef6\u4e2d\u7684INSTALLED_APPS\u4e2d\u52a0\u4e0agame.apps.GameConfig\uff0c\u5e76\u4e14\u5728STATIC_URL\u5904\u52a0\u4e0a\u8fd9\u4e9b\u4ee3\u7801\uff1a\n\n# \u4e60\u60ef\u5728static\u4e2d\u5b58\u5f00\u53d1\u8005\u6587\u4ef6\nSTATIC_ROOT = os.path.join(BASE_DIR, 'static')\n# \u4e60\u60ef\u5728media\u4e2d\u5b58\u653e\u7528\u6237\u6587\u4ef6\nMEDIA_ROOT = os.path.join(BASE_DIR, 'media')\nMEDIA_URL = '/media/'\nSTATIC_URL = '/static/'\n</code></pre> <p>\u7136\u540e\u518dgame/static \u76ee\u5f55\u4e0b\u521b\u5efa\u5982\u4e0b\u76ee\u5f55</p> <pre><code>static\n|-- audio\n|-- css\n|-- image\n|   |-- menu\n|   |-- playground\n|   `-- settings\n`-- js\n</code></pre> <p>\u4f7f\u7528wget\u5c06\u80cc\u666f\u56fe\u7247\u4e0b\u8f7d\u5230\u670d\u52a1\u5668\u4e2d\u3002</p> <p>\u7f16\u5199\u811a\u672c\uff0c\u5c06\u6240\u6709js\u6587\u4ef6\u653e\u5728\u67d0\u4e2a\u76ee\u5f55\u3002</p> <p>\u5728<code>/acapp/scripts/</code>\u4e0b\u521b\u5efa\u6587\u4ef6compress_game_js.sh\uff0c\u8f93\u5165\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>#! /bin/bash\n\nJS_PATH=/home/lhl/acapp/game/static/js/\nJS_PATH_DIST=${JS_PATH}dist/\nJS_PATH_SRC=${JS_PATH}src/\n\nfind $JS_PATH_SRC -type f -name '*.js' | sort | xargs cat &gt; ${JS_PATH_DIST}game.js\n</code></pre> <p>\u5e76\u5728JS_PATH\u4e0b\u521b\u5efadist\u548csrc\u76ee\u5f55\u3002</p> <p>acapp/game/template\u4e2d\u6dfb\u52a0\u6587\u4ef6\u5939multiends\uff0c\u5e76\u521b\u5efaweb.html\u6587\u4ef6\uff0c\u7f16\u5199\u5982\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>{ load static %}\n&lt;head&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://cdn.acwing.com/static/jquery-ui-dist/jquery-ui.min.css\" /&gt;\n    &lt;script src=\"https://cdn.acwing.com/static/jquery/js/jquery-3.3.1.min.js\"&gt;&lt;/script&gt;\n    &lt;link rel=\"stylesheet\" href=\"{% static 'css/game.css' %}\" /&gt;\n    &lt;script src=\"{% static 'js/dist/game.js' %}\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n\n&lt;body style=\"margin: 0\"&gt;\n    &lt;div id=\"ac_game_12345678\"&gt;&lt;/div&gt;\n    &lt;script&gt;\n        $(document).ready(function() {\n            let ac_game = new AcGame();\n        })\n    &lt;/script&gt;\n&lt;/body&gt;\n</code></pre> <p>\u8bf7\u6c42\uff1a</p> <pre><code>def verify(request):\n    print('request.method=' + str(request.method))\n    # \u524d\u7aef\u8bbf\u95ee\uff1ahttp://localhost:8000/verify?username=lhl&amp;password=123\n    print('request.GET=' + str(request.GET))\n    print('request.POST=' + str(request.POST))\n</code></pre>"},{"location":"Python/django%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#b","title":"B\u7ad9","text":"<p>pip\u5b89\u88c5\uff1amysqlclient</p>"},{"location":"Python/encode%E5%92%8Cdecode/","title":"encode\u548cdecode","text":"<p>\u5b98\u65b9\u6587\u6863</p>"},{"location":"Python/encode%E5%92%8Cdecode/#_1","title":"\u4e3a\u4ec0\u4e48\u8981\u77e5\u9053\u7f16\u7801\u53ef\u89e3\u7801","text":"<p>\u8ba1\u7b97\u673a\u672c\u8d28\u4e0a\u5904\u740601\u8fd9\u6837\u7684\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u4e3a\u4e86\u8ba9\u4eba\u7c7b\u7406\u89e3\u4e8c\u8fdb\u5236\u6570\u636e\uff0c\u4eba\u7c7b\u901a\u8fc7\u67d0\u79cd\u201c\u7f16\u7801\u201d\u548c\u201c\u89e3\u7801\u201d\u65b9\u5f0f\uff0c\u5efa\u7acb\u6587\u5b57\u4e0e\u4e8c\u8fdb\u5236\u6570\u636e\u7684\u4e00\u4e00\u5bf9\u5e94\u5173\u7cfb\u3002</p>"},{"location":"Python/lxml%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/","title":"lxml\u4f7f\u7528\u624b\u518c","text":"<p>[toc]</p>"},{"location":"Python/lxml%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#lxml_1","title":"lxml\u5e93\u6709\u4ec0\u4e48\u7528","text":"<p>lxml \u5e93\u63d0\u4f9b\u4e86\u4e00\u4e2a etree \u6a21\u5757\uff0c\u8be5\u6a21\u5757\u4e13\u95e8\u7528\u6765\u89e3\u6790 HTML/XML \u6587\u6863\u3002</p>"},{"location":"Python/lxml%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_1","title":"\u4e00\u4e9b\u5751","text":"<p>Chrome\u6d4f\u89c8\u5668\u6709\u65f6\u4f1a\u81ea\u52a8\u589e\u52a0tbody\uff0c\u5bfc\u81f4\u65e0\u6cd5\u89e3\u6790\u5230\u67d0\u4e2a\u5143\u7d20\u3002\u5de8\u5751\uff01</p>"},{"location":"Python/lxml%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_2","title":"\u57fa\u672c\u4f7f\u7528\u65b9\u6cd5","text":"<ol> <li> <p>pycharm\u4e2d\u5b89\u88c5lxml\u3002</p> </li> <li> <p>\u53c2\u8003\u5982\u4e0b\u6848\u4f8b\uff1a</p> </li> </ol> <p>```python    from lxml import etree</p> <p>def main():        # \u5b9a\u4e49html\u6587\u672c        html_text = \"\"\"                                 \u64cd\u4f5c\u7cfb\u7edf                                             \u674e\u8001\u5e08                                             IV-A101                             \"\"\"</p> <pre><code>   # \u89e3\u6790HTML\u6587\u672c\n   tree = etree.HTML(html_text)\n\n   # \u6848\u4f8b1\uff1a\u83b7\u53d6 class=\"content\" \u6807\u7b7e\u4e2d\u7684 \"\u64cd\u4f5c\u7cfb\u7edf\" \u6587\u5b57\n   # \u6b65\u9aa41\uff1a\u5b9a\u4f4d\u5230 &lt;div class=\"content\"&gt;&lt;/div&gt; \u8fd9\u3010\u7c7b\u3011\u6807\u7b7e\n   tags = tree.xpath('//div[@class=\"content\"]')\n   # \u6b65\u9aa42\uff1a\u904d\u5386\u8fd9\u7c7b\u6807\u7b7e\n   for tag in tags:\n       # \u8fd9\u6837\u83b7\u53d6\u5230\u7684\u6587\u672c\u53ef\u80fd\u6709\u6362\u884c\u7b26\u548ctab\u952e\uff0c\u5b9e\u9645\u4e0a\u4e0d\u4e00\u5b9a\u4f1a\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\n       # \u3010\u6ce8\u610f\u3011xpath\u4e2d\u7684\u53c2\u6570\u5fc5\u987b\u4ee5 ./ \u5f00\u5934\uff0c\u800c\u4e0d\u662f / \u6216\u8005 //\n       name = tag.xpath('./text()')\n       print(name)\n\n   # \u6848\u4f8b2\uff1a\u83b7\u53d6 class=\"content\" \u6807\u7b7e\u4e2d\u7684\u6240\u6709\u6587\u5b57\n   # \u57fa\u4e8e\u4e0a\u8ff0\u83b7\u5f97\u7684tags\n   for tag in tags:\n       name = tag.xpath('.//text()')\n       print(name)\n</code></pre> <p>if name == 'main':        main()</p> <p>```</p> <pre><code>from lxml import etree\n\ndef main():\n    html_text = \"\"\"\n        &lt;div&gt;\n            &lt;div class=\"course\"&gt;\n                &lt;div class=\"name\"&gt;\u64cd\u4f5c\u7cfb\u7edf&lt;/div&gt;\n                &lt;div class=\"teacher\"&gt;\u674e\u8001\u5e08&lt;/div&gt;\n                &lt;div class=\"room\"&gt;IV-A401&lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=\"course\"&gt;\n                &lt;div class=\"name\"&gt;\u6570\u636e\u7ed3\u6784&lt;/div&gt;\n                &lt;div class=\"teacher\"&gt;\u5f20\u8001\u5e08&lt;/div&gt;\n                &lt;div class=\"room\"&gt;&lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    \"\"\"\n\n    # \u8981\u6c42\uff1a\u83b7\u53d6\u4e0a\u8ff0html\u6587\u672c\u7684\u8bfe\u7a0b\u4fe1\u606f\uff0c\u5982\u679c\u8bfe\u7a0b\u7684\u67d0\u4e2a\u5c5e\u6027\u4e3a\u7a7a\uff0c\u4e5f\u8981\u5c06\u5b83\u663e\u793a\u51fa\u6765\n    tree = etree.HTML(html_text)\n    courses = tree.xpath('//div[@class=\"course\"]')\n\n    # \u8fd9\u6837\u5199\u7684\u7f3a\u70b9\u662f\u6ca1\u6cd5\u663e\u793a\u8bfe\u7a0b \u6570\u636e\u7ed3\u6784 \u7684\u6559\u5ba4\n    for course in courses:\n        print(course.xpath('.//text()'))\n\n    # \u5e94\u8be5\u5b9a\u4f4d\u5230\u6240\u6709\u7684\u5b50div(\u5c5e\u6027\u4e3aname \u6216 teacher \u6216 room)\uff0c\u5982\u4e0b\n    for course in courses:\n        # \u83b7\u53d6\u5230\u5b50div\n        for data in course.xpath('./div'):\n            print(data.xpath('./text()'))\n\n\nif __name__ == '__main__':\n    main()\n\n</code></pre>"},{"location":"Python/matplotlib/","title":"matplotlib","text":"<p>[toc]</p> <pre><code>import matplotlib.pyplot as plt\n\nif __name__ == '__main__':\n    # \u7eff\u8272\u7ebf\u6761\uff0c\u7ea2\u8272\u5185\u586b\u5145\n    plt.plot([1, 2, 3, 4], [3, 6, 11, 12], marker='o', mfc='red', color='green', linestyle=':')\n    # \u8bbe\u7f6e\u4e2d\u6587\u5b57\u4f53\n    plt.rcParams['font.sans-serif'] = ['SimHei']\n    # \u8bbe\u7f6e\u6a2a\u7eb5\u5750\u6807\n    plt.xlabel(\"\u6a2a\u5750\u6807\")\n    plt.ylabel(\"\u7eb5\u5750\u6807\")\n    # \u8bbe\u7f6e\u6a2a\u7eb5\u5750\u6807\u8303\u56f4\n    plt.xticks(range(0, 6))\n    plt.yticks(range(0, 16))\n    # \u8bbe\u7f6e\u7f51\u683c\u7ebf\n    plt.grid(color='black', linestyle='--')\n    plt.show()\n</code></pre>"},{"location":"Python/playwright%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/","title":"playwright\u4f7f\u7528\u624b\u518c","text":"<p>[toc]</p>"},{"location":"Python/playwright%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#playwright_1","title":"playwright\u662f\u4ec0\u4e48","text":"<p>\u5b83\u7c7b\u4f3cselenium\uff0c\u53ef\u4ee5\u6a21\u62df\u4eba\u70b9\u51fbweb\u7f51\u9875\uff0c\u6211\u5c06\u5b83\u7528\u4e8e\u83b7\u53d6cookie\uff0c\u4ece\u800c\u8fdb\u884c\u540e\u7eed\u7684\u722c\u866b\u5de5\u4f5c\u3002</p>"},{"location":"Python/playwright%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#playwright_2","title":"\u5b89\u88c5playwright","text":"<p>\u6761\u4ef6\uff1a</p> <p>python3.9 </p> <p>pip23.0</p> <pre><code># \u5b89\u88c5playwright\npip install playwright\n# \u5b89\u88c5chromium\uff0cfirefox\u7b49\u9a71\u52a8\uff08\u5b89\u88c5\u6709\u70b9\u6162\uff0c\u6211\u4e5f\u6ca1\u529e\u6cd5~\uff09\npython -m playwright install\n</code></pre>"},{"location":"Python/playwright%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_1","title":"\u7b80\u5355\u6848\u4f8b","text":"<p>\u6a21\u62df\u767e\u5ea6\u641c\u7d22\uff1a</p> <pre><code>from playwright.sync_api import sync_playwright\n\nwith sync_playwright() as p:\n    # \u83b7\u53d6\u6d4f\u89c8\u5668\n    browser = p.chromium.launch(headless=False)\n    # \u83b7\u53d6\u4f1a\u8bdd\uff08\u4e0d\u540c\u4f1a\u8bdd\u7684\u6570\u636e\u76f8\u4e92\u9694\u79bb\uff09\n    context = browser.new_context()\n    # \u83b7\u53d6\u9875\u9762\n    page = context.new_page()\n    # \u8df3\u8f6c\u5230 https://www.baidu.com\n    page.goto(\"https://www.baidu.com\")\n    # \u83b7\u53d6\u9875\u9762\u7684\u6807\u9898\n    print(page.title())\n    # \u5b9a\u4f4d\u8f93\u5165\u6846\u5e76\u70b9\u51fb\n    page.locator(\"input[name=\\\"wd\\\"]\").click()\n    # \u8f93\u5165\u6846\u4e2d\u8f93\u5165\u5185\u5bb9\n    page.locator(\"input[name=\\\"wd\\\"]\").fill(\"\u6653\u9f99coding\")\n    # \u70b9\u51fb\u641c\u7d22\u6309\u94ae\n    page.locator(\"//*[@id=\\\"su\\\"]\").click()\n\n    page.close()\n    context.close()\n    browser.close()\n</code></pre> <p>\u767b\u5f55\u6559\u52a1\u5904\uff1a</p> <pre><code></code></pre>"},{"location":"Python/python%E5%AD%97%E5%85%B8%E7%9A%84%E4%BD%BF%E7%94%A8/","title":"python\u5b57\u5178\u7684\u4f7f\u7528","text":"<p>[toc]</p> <p>\u57fa\u672c\u4f7f\u7528\uff1a</p> <pre><code>hashTable = dict()\nhashTable['name'] = 'lhl'\nhashTable['age'] = 8\n</code></pre> <p>\u5982\u679c\u60f3\u4ee5\u4eba\u7684\u59d3\u540d\u4f5c\u4e3akey\uff0c\u4fdd\u5b58\u4e0d\u540c\u4eba\u7684\u4fe1\u606f\uff0c\u9700\u8981\u8fd9\u4e48\u505a\u3002</p> <p>\u6ce8\u610f\uff1a\u7528<code>[]</code>\u8bbf\u95ee\u5b57\u5178\u7684\u503c\uff0c\u800c\u4e0d\u662f\u7528<code>.</code></p> <pre><code>p_arr = dict()\np_arr['lhl'] = {\n    'age': 8,\n    'score': 100\n}\np_arr['lhl']['birthday'] = '2023-01-01'\n\np_arr['tourist'] = {\n    'age': 18,\n    'score': 3600,\n}\n\nprint(p_arr['lhl'])\n</code></pre> <p>\u4f7f\u7528\u4e24\u4e2a\u5217\u8868\u521d\u59cb\u5316python\u5b57\u5178\uff1a</p> <pre><code>arr1 = [\"X\", \"Y\", \"Z\"]\narr2 = [5, 6, 8]\ndict1 = dict(zip(arr1, arr2))\nprint(dict1)\n</code></pre>"},{"location":"Python/python%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/","title":"Python\u5b57\u7b26\u4e32\u5904\u7406","text":"<p>[toc]</p>"},{"location":"Python/python%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/#_1","title":"\u5b50\u4e32\u662f\u5426\u5b58\u5728\u4e8e\u6a21\u677f\u4e32","text":"<pre><code>str1 = 'hello world!'\nsub = 'or'\nprint(sub in str1)  # True\n</code></pre>"},{"location":"Python/python%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/#_2","title":"\u5b50\u4e32\u51fa\u73b0\u7684\u6b21\u6570","text":"<pre><code>s = \"\u661f\u671f\u4e00\u661f\u671f\u4e09\"\nprint(s.count(\"\u661f\u671f\"))  # 2\n</code></pre>"},{"location":"Python/python%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/#_3","title":"\u67e5\u627e\u4e00\u4e2a\u5b57\u7b26\u5728\u7ed9\u5b9a\u5b57\u7b26\u4e32\u4e2d\u7684\u9996\u6b21\u51fa\u73b0\u4f4d\u7f6e\u548c\u6700\u540e\u4e00\u6b21\u51fa\u73b0\u7684\u4f4d\u7f6e","text":"<pre><code>s = 'I have an apple, I have a pen. Oh ~ applepen'\nprint(s.find(\"apple\"))  # 10\nprint(s.rfind(\"apple\"))  # 36\nprint(s.find(\"has\"))  # -1\n</code></pre>"},{"location":"Python/python%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/#_4","title":"\u5b57\u7b26\u4e32\u5206\u5272","text":"<pre><code>s = 'Welcome,this is my house,do you like it?'\nprint(s.split(','))  # ['Welcome', 'this is my house', 'do you like it?']\nprint(s.split(',', maxsplit=1))  # ['Welcome', 'this is my house,do you like it?']\nprint(s.rsplit(',', maxsplit=1))  # ['Welcome,this is my house', 'do you like it?']\nprint(s.split('bad'))  # ['Welcome,this is my house,do you like it?']\nprint(s.partition(','))  # \u8fd4\u56de tuple ('Welcome', ',', 'this is my house,do you like it?')\nprint(s.rpartition(','))  # ('Welcome,this is my house', ',', 'do you like it?')\n</code></pre>"},{"location":"Python/requests%E6%95%99%E5%AD%A6/","title":"requests\u6559\u5b66","text":"<p>[toc]</p>"},{"location":"Python/requests%E6%95%99%E5%AD%A6/#_1","title":"\u524d\u8a00","text":"<p>\u672c\u6587\u4e3b\u8981\u56f4\u7ed5\u5982\u4f55<code>requests</code>\u5e93\u7684\u4f7f\u7528\u65b9\u6cd5\u5c55\u5f00\u8bb2\u89e3\u3002</p> <p><code>requests</code>\u5e93\u53ef\u4ee5\u7528\u4e8e\u53d1\u9001<code>HTTP</code>\u8bf7\u6c42\u3002</p>"},{"location":"Python/requests%E6%95%99%E5%AD%A6/#api","title":"\u4e3b\u8981API","text":"<p>\u5efa\u8bae\uff1a\u4f7f\u7528<code>session</code>\u5bf9\u8c61\u53d1\u9001\u4fe1\u606f\uff0c\u800c\u4e0d\u662f\u4f7f\u7528<code>requests</code>\u5bf9\u8c61\u53d1\u9001\u4fe1\u606f\u3002</p> <p><code>session</code>\u5bf9\u8c61\u53ef\u4ee5\u4fdd\u5b58cookies\u3001\u5934\u90e8\u4fe1\u606f\uff0c\u4ee5\u4fbf\u5728\u591a\u6b21\u8bbf\u95ee\u4e2d\u4e0d\u7528\u91cd\u590d\u66f4\u65b0cookie\u3002</p> <p><code>session</code>\u5bf9\u8c61\u83b7\u53d6\u65b9\u5f0f\uff1a<code>session = requests.session()</code>\u3002</p> <p>\u8bf7\u6c42\u51fd\u6570</p> <p>\u4e3b\u8981\u7531\u4e24\u4e2a\u51fd\u6570\u53ef\u4ee5\u7528\u4e8e\u53d1\u9001\u8bf7\u6c42\uff1a<code>session.get()</code>\u548c<code>session.post()</code>\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>requests.get()</code>\u548c<code>requests.post()</code>\u3002</p> <p>\u5173\u4e8eCookie</p> <p>\u5efa\u8bae\u4f7f\u7528<code>session</code>\u5bf9\u8c61\uff0c\u8fd9\u6837\u5c31\u4e0d\u7528\u7ef4\u62a4\u66f4\u65b0<code>cookie</code>\u3002</p> <p>\u5982\u679c\u4f7f\u7528<code>requests</code>\u5bf9\u8c61\uff0c\u90a3\u4e48\u9700\u8981\u7ef4\u62a4<code>cookie</code>\u4fe1\u606f\uff0c\u6ce8\u610f\u4ee5\u4e0b\u95ee\u9898\uff1a</p> <p>\u4e00\u5b9a\u4e0d\u8981\u628aCookie\u8f6c\u6210\u5b57\u7b26\u4e32\uff0c\u5426\u5219\u4f1a\u51fa\u73b0\u7ec6\u788e\u7684\u95ee\u9898\u3002\u4f7f\u7528Cookie\u65f6\uff0c\u76f4\u63a5\u4f7f\u7528<code>RequestsCookieJar</code>\u5bf9\u8c61\u3002</p> <pre><code>import requests\nfrom requests.cookies import RequestsCookieJar\n\n\n# \u9996\u5148\u521b\u5efacookie\u5bf9\u8c61\u3002\u4e00\u4e2aCookie\u5bf9\u8c61\u4e2d\u53ef\u4ee5\u5b58\u653e\u591a\u6761Cookie\u4fe1\u606f\u3002\ncookies = RequestsCookieJar()\ncookies.set('name', 'lhl')\nresp = requests.get(url='http://localhost:8080', cookies=cookies)\nprint(resp.text)  # \u5f97\u5230 name=lhl\n</code></pre> <p>\u57fa\u4e8eSpring Boot\u7684\u670d\u52a1\u5668\u90e8\u5206\u4ee3\u7801</p> <pre><code>package com.lee.cookiedemo.controller;\n\nimport org.springframework.web.bind.annotation.CookieValue;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping\npublic class IndexController {\n    @RequestMapping\n    public String get(@CookieValue(\"name\") String name) {\n        return \"name=\" + name;\n    }\n}\n</code></pre> <p>\u662f\u5426\u9a8c\u8bc1SSL\u8bc1\u4e66</p> <p><code>session.get(verify=False)</code>\u3002\u9ed8\u8ba4\u503c\u4e3aTrue\uff0c\u9a8c\u8bc1\u8bc1\u4e66\u53ef\u4ee5\u9632\u6b62\u4e2d\u95f4\u4eba\u653b\u51fb\u3002</p> <p>\u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u6211\u4e60\u60ef\u8bbe\u5b9a\u4e3a<code>False</code>\u3002\u56e0\u4e3a\u5f88\u591a\u7f51\u7ad9\u7684<code>SSL</code>\u8bc1\u4e66\u65e0\u6cd5\u901a\u8fc7\u9a8c\u8bc1\uff08\u6bd4\u5982\u6bd4\u8f83\u5783\u573e\u7684\u6559\u52a1\u5904\u7f51\u7ad9\uff09\u3002</p> <p>\u81ea\u52a8\u91cd\u5b9a\u5411</p> <p><code>session.get(allow_redirects=True)</code>\u3002\u9ed8\u8ba4\u503c\u4e3atrue\u3002</p> <p>\u5f53\u8bbf\u95ee\u67d0\u4e2aURL\uff08\u4f8b\u5982<code>localhost:8080/redirect</code>\uff09\u65f6\uff0c\u670d\u52a1\u5668\u53ef\u80fd\u4f1a\u8fd4\u56de\u4e00\u4e2a\u91cd\u5b9a\u5411\u62a5\u6587\uff0c\u5ba2\u6237\u7aef\u63a5\u6536\u5230\u4fe1\u606f\u540e\uff0c\u4f1a\u8bbf\u95ee\u91cd\u5b9a\u5411\u62a5\u6587\u4e2d\u7684\u5730\u5740\u3002</p> <p>\u91cd\u5b9a\u5411\u62a5\u6587\u9700\u8981\u6ee1\u8db3\u5982\u4e0b\u683c\u5f0f\uff1a</p> <ol> <li>\u72b6\u6001\u7801\u662f302.</li> <li>HTTP\u7684headers\u4e2d\u6709<code>Location</code>\u5b57\u6bb5\u3002</li> </ol> <p>Pyrhon\u7684requests\u5e93\u4e2d\uff0c\u5f53\u53d1\u51fa\u4e00\u4e2ahttp\u8bf7\u6c42\u540e\uff0c\u5982\u679c\u63a5\u6536\u5230\u91cd\u5b9a\u5411\u62a5\u6587\uff0c\u9ed8\u8ba4\u4f1a\u8bbf\u95ee\u91cd\u5b9a\u5411\u76ee\u6807\u5730\u5740\u3002\u5982\u679c\u5c06<code>allow_redirects</code>\u5c5e\u6027\u8bbe\u7f6e\u4e3a<code>False</code>\uff0c\u5219\u4e0d\u4f1a\u53d1\u751f\u8df3\u8f6c\u3002</p> <p>\u6d4b\u8bd5\u6848\u4f8b\uff1a</p> <p>\u670d\u52a1\u5668\u4ee3\u7801\uff08Spring Boot\uff09</p> <pre><code>package com.lee.cookiedemo.controller;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\n@RequestMapping\npublic class IndexController {\n    @RequestMapping(\"redirect\")\n    public ResponseEntity&lt;Void&gt; redirect() {\n        // \u8bbe\u7f6e\u91cd\u5b9a\u5411\u7684URL\n        String redirectUrl = \"http://example.com\";\n\n        // \u521b\u5efa\u4e00\u4e2a ResponseEntity\uff0c\u5e76\u8bbe\u7f6e\u72b6\u6001\u7801\u548c\u91cd\u5b9a\u5411\u7684URL\n        ResponseEntity&lt;Void&gt; responseEntity = ResponseEntity.status(HttpStatus.FOUND)\n                .header(\"Location\", redirectUrl)\n                .build();\n\n        // \u8fd4\u56de ResponseEntity \u5bf9\u8c61\n        return responseEntity;\n    }\n}\n</code></pre> <p>\u722c\u866b\u4ee3\u7801</p> <pre><code>import requests\n\n# \u9ed8\u8ba4\u5141\u8bb8\u91cd\u5b9a\u5411\nresp = requests.get(url='http://localhost:8080/redirect')\nprint('text=\\n' + resp.text)\n\n# \u7981\u7528\u91cd\u5b9a\u5411\nresp = requests.get(url='http://localhost:8080/redirect', allow_redirects=False)\nprint('text=\\n' + resp.text)\n</code></pre> <p>\u4e71\u7801\u95ee\u9898</p> <p>\u5f53\u6211\u4eec\u722c\u53d6\u4e00\u4e2ahtml\u6587\u4ef6\u540e\uff0c\u6709\u65f6\u4f1a\u53d1\u73b0html\u6587\u4ef6\u4e2d\u7684\u4e2d\u6587\u4e71\u7801\u3002\u539f\u56e0\u662f\u5728\u54cd\u5e94\u7684headers\u4e2d\uff0c\u6ca1\u6709\u6307\u660e\u6570\u636e\u7684\u7f16\u7801\u65b9\u5f0f\u3002\u6b64\u65f6Python\u4f1a\u91c7\u7528\u9ed8\u8ba4\u7684<code>ISO-8859-1</code>\u7f16\u7801\u65b9\u5f0f\uff0c\u4ece\u800c\u5bfc\u81f4\u4e2d\u6587\u4e71\u7801\u3002</p> <p>\u89e3\u51b3\u65b9\u5f0f\u662f\u6307\u5b9ahttp\u54cd\u5e94\u7684\u7f16\u7801\u65b9\u5f0f\uff1a<code>resp.encoding = 'utf-8'</code>\u3002</p> <p>\u6848\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>import requests\n\nresp = requests.get('https://www.baidu.com')  # \u4f7f\u7528\u524d\u5173\u95ed\u4ee3\u7406\nprint(resp.encoding)\nprint(resp.text)\nresp.encoding = 'utf-8'\nprint(resp.text)\n</code></pre> <p>\u6709\u65f6\u5019\u722c\u53d6\u7684html\u6587\u4ef6\u6ca1\u6709\u4e71\u7801\uff0c\u4f46\u7528\u6d4f\u89c8\u5668\u6253\u5f00\u540e\u4e71\u7801\u3002\u53ef\u80fd\u662f\u6d4f\u89c8\u5668\u91c7\u7528\u7684\u9519\u8bef\u7684\u89e3\u7801\u65b9\u5f0f\u89e3\u7801\u6570\u636e\u3002\u6b64\u65f6\u6211\u4eec\u53ea\u9700\u8981\u5728html\u6587\u4ef6\u4e2d\u52a0\u5165\uff1a<code>&lt;meta charset=\"UTF-8\"&gt;</code>\u5373\u53ef\u3002</p>"},{"location":"Python/%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E8%A1%8Cdjango%E9%A1%B9%E7%9B%AE/","title":"\u670d\u52a1\u5668\u8fd0\u884cdjango\u9879\u76ee","text":"<p>[toc]</p>"},{"location":"Python/%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E8%A1%8Cdjango%E9%A1%B9%E7%9B%AE/#_1","title":"\u672c\u9879\u76ee\u505a\u4e86\u4ec0\u4e48","text":"<p>\u672c\u9879\u76ee\u57fa\u4e8eDjango\uff0c\u4f7f\u7528playwright\u81ea\u52a8\u6293\u53d6\u6559\u52a1\u5904\u8bfe\u8868\uff0c\u5e76\u8fd4\u56de\u7ed9\u524d\u7aef\u3002</p>"},{"location":"Python/%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E8%A1%8Cdjango%E9%A1%B9%E7%9B%AE/#_2","title":"\u524d\u7f6e\u6761\u4ef6","text":"<p>\u6211\u4f7f\u7528docker\u955c\u50cf\u521b\u5efa\u4e86Ubuntu 20.04\u5bb9\u5668\u3002\u6bcf\u4e2a\u5bb9\u5668\u4e2d\u4ec5\u8fd0\u884c\u4e00\u4e2apython\u9879\u76ee\uff0c\u56e0\u6b64\u4e0d\u7528venv\u3002</p> <p>Ubuntu 20.04 \u9ed8\u8ba4\u5b89\u88c5python3.8\uff0c\u5982\u679c\u8981\u5b89\u88c5\u522b\u7684\u7248\u672c\uff0c\u4e0d\u8981\u53c2\u8003\u8be5\u6587\u7ae0\u3002</p>"},{"location":"Python/%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E8%A1%8Cdjango%E9%A1%B9%E7%9B%AE/#_3","title":"\u5b89\u88c5\u5fc5\u5907\u8f6f\u4ef6","text":"<pre><code>apt-get update\napt-get install -y vim\n</code></pre> <p>\u66f4\u6362\u56fd\u5185\u955c\u50cf\u6e90\uff0c\u5907\u4efd<code>/etc/apt/source.list</code>\uff0c\u5e76\u7528\u4ee5\u4e0b\u5185\u5bb9\u66ff\u6362\uff1a</p> <pre><code>deb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal main restricted\ndeb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates main restricted\ndeb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal universe\ndeb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates universe\ndeb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal multiverse\ndeb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-updates multiverse\ndeb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-backports main restricted universe multiverse\ndeb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security main restricted\ndeb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security universe\ndeb http://mirrors.tuna.tsinghua.edu.cn/ubuntu/ focal-security multiverse\n</code></pre> <pre><code>apt-get update\n</code></pre>"},{"location":"Python/%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%90%E8%A1%8Cdjango%E9%A1%B9%E7%9B%AE/#python","title":"\u5b89\u88c5python\u9879\u76ee\u76f8\u5173\u4f9d\u8d56\u5305","text":"<pre><code>apt-get install -y python3-pip\npip -V\n# \u914d\u7f6e\u6e05\u534e\u6e90\npip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple\n</code></pre> <p>requirements.txt</p> <pre><code>ddddocr~=1.4.7\nPillow~=9.4.0\nlxml~=4.9.2\nplaywright~=1.30.0\nrequests~=2.28.2\nDjango~=4.1.5\n</code></pre> <p>pip install -r requirements.txt</p> <p>playwright install </p>"},{"location":"Python/%E7%88%AC%E8%99%AB/","title":"\u722c\u866b","text":"<p>[toc]</p>"},{"location":"Python/%E7%88%AC%E8%99%AB/#_2","title":"\u524d\u8a00","text":"<ol> <li>\u4f7f\u7528\u722c\u866b\u9700\u8981\u5305\u542b\u57fa\u672c\u7684\u5934\u6587\u4ef6\uff1a</li> </ol> <p>```python    # \u548c\u7f51\u7edc\u8bf7\u6c42\u76f8\u5173    import requests    # \u7528\u4e8e\u6293\u53d6\u9875\u9762\u4e2d\u6307\u5b9a\u5185\u5bb9    from lxml import etree    # \u548c\u9a8c\u8bc1\u7801\u8bc6\u522b\u76f8\u5173    import ddddocr</p> <p># \u5176\u4ed6    import json    import os    ```</p> <ol> <li> <p>\u722c\u53d6\u6570\u636e\u7684\u6b65\u9aa4\uff1a</p> </li> <li> <p>\u81ea\u5b9a\u4e49\u8bf7\u6c42\u5934\u90e8\u548c\u76ee\u6807\u5730\u5740</p> <p>```python</p> <p>```</p> </li> </ol>"},{"location":"Python/%E7%88%AC%E8%99%AB/#_3","title":"\u6848\u4f8b\u4e00\uff1a\u722c\u53d6\u767e\u5ea6\u641c\u7d22\u7ed3\u679c","text":"<p>\u5173\u952e\uff1a\u8be5\u6848\u4f8b\u5305\u542brequest\u8bf7\u6c42\u4ee5\u53ca\u81ea\u5b9a\u4e49\u8bf7\u6c42\u53c2\u6570\u3002</p> <pre><code>import requests\n\ndef search():\n    # 1. \u81ea\u5b9a\u4e49\u8bf7\u6c42\u5934\n    headers = {\n        'User-Agent': 'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Mobile Safari/537.36'\n    }\n    # 2. \u81ea\u5b9a\u4e49\u8bf7\u6c42\u4e3b\u673a\n    url = 'http://cn.bing.com/search?'\n    # 3. \u8bbe\u5b9a\u53c2\u6570\n    q = input('\u8bf7\u8f93\u5165\u5173\u952e\u5b57\uff1a')\n    pages = int(input('\u8bf7\u8f93\u5165\u9875\u6570\uff1a'))\n    params = {\n        'q': q,\n        'first': (pages - 1) * 10\n    }\n    # 4. \u83b7\u53d6\u8fd4\u56de\u4fe1\u606f\uff0c\u5e76\u83b7\u53d6\u8fd4\u56de\u4fe1\u606f\u7684\u6587\u672c\u4fe1\u606f\n    resp = requests.get(url=url, params=params, headers=headers)\n    pageText = resp.text\n    # 5. \u5c06\u6570\u636e\u5199\u5165\u78c1\u76d8\n    fileName = q + '.html'\n    with open(fileName, 'w', encoding='utf-8') as fp:\n        fp.write(pageText)\n    print(fileName, \"\u4fdd\u5b58\u6210\u529f\uff01\")\n\n\nif __name__ == '__main__':\n    search()\n</code></pre>"},{"location":"Python/%E7%88%AC%E8%99%AB/#_4","title":"\u6848\u4f8b\u4e8c\uff1a\u722c\u53d6\u9875\u9762\u5185\u67d0\u4e2a\u7f51\u7edc\u8bf7\u6c42","text":"<p>\u4e00\u4e2a\u754c\u9762\u53ef\u80fd\u5305\u542b\u591a\u4e2aajax\u8bf7\u6c42\uff0c\u6709\u65f6\u5019\u6211\u4eec\u4e0d\u9700\u8981\u6293\u53d6\u6574\u4e2a\u754c\u9762\uff0c\u53ea\u9700\u8981\u6293\u53d6\u754c\u9762\u7684\u67d0\u4e2aajax\u8bf7\u6c42\u3002</p> <p>\u8fd4\u56derequest\u8bf7\u6c42\u7684\u4fe1\u606f\u662fjson\u683c\u5f0f\uff0c\u6b64\u65f6\u9700\u8981\u4fee\u6539\u63a5\u6536\u53c2\u6570\uff0c\u53c2\u8003\u4e0b\u8ff0\u6848\u4f8b\u3002</p> <pre><code>def getFilm():\n    headers = {\n        'User-Agent': 'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) '\n                      'Chrome/99.0.4844.51 Mobile Safari/537.36 '\n    }\n    url = 'https://movie.douban.com/j/search_subjects?'\n    params = {\n        'type': 'movie',\n        'tag': '\u6700\u65b0',\n        'source': 'index',\n        'page_limit': 50,\n        'page_start': 0\n    }\n    resp = requests.get(url=url, params=params, headers=headers)\n    # \u83b7\u53d6json\u6570\u636e\n    dicObj = resp.json()\n    # \u5199\u5165json\u6570\u636e\n    with open('resp.txt', 'w', encoding='utf-8') as fp:\n        json.dump(obj=dicObj, fp=fp)\n</code></pre>"},{"location":"Python/%E7%88%AC%E8%99%AB/#_5","title":"\u6848\u4f8b\u4e09\uff1a\u722c\u53d6\u5fc5\u5e94\u641c\u7d22\u7684\u6807\u9898","text":"<p>\u83b7\u53d6\u5fc5\u5e94\u641c\u7d22\u7684\u5173\u952e\u5b57\u6807\u9898\u3002\u6b64\u65f6\u6211\u4eec\u9700\u8981\u6293\u53d6HTML\u6587\u672c\u7684\u67d0\u4e00\u7c7b\u6570\u636e\u3002\u7528\u5230\u7684\u89e3\u6790\u5de5\u5177\u662fetree\u3002</p> <p>\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u76f4\u63a5\u83b7\u53d6\u67d0\u4e2a\u5143\u7d20\u7684xpath\u503c\uff0c\u4e5f\u53ef\u4ee5\u5728\u6d4f\u89c8\u5668\u4e2d\u641c\u7d22xpath\u503c\u3002\u8fd9\u5bf9\u4e8e\u8c03\u8bd5\u975e\u5e38\u65b9\u4fbf\u3002</p> <pre><code>def useXpath():\n    headers = {\n        'User-Agent': 'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Mobile Safari/537.36'\n    }\n    url = 'http://cn.bing.com/search?'\n    q = input('\u8bf7\u8f93\u5165\u5173\u952e\u5b57\uff1a')\n    pages = int(input('\u8bf7\u8f93\u5165\u9875\u6570\uff1a'))\n    params = {\n        'q': q,\n        'first': (pages - 1) * 10\n    }\n    resp = requests.get(url=url, params=params, headers=headers)\n    pageText = resp.text\n    fileName = q + '.html'\n    with open(fileName, 'w', encoding='utf-8') as fp:\n        fp.write(pageText)\n    print(fileName, \"\u4fdd\u5b58\u6210\u529f\uff01\")\n    # \u901a\u8fc7HTML\u51fd\u6570\u89e3\u6790\u6587\u672c\u5f97\u5230 \u6587\u6863\u6811(lxml.etree._Element) \u7c7b\u578b\u7684\u5143\u7d20\n    tree = etree.HTML(pageText)\n    # xpath\u89e3\u6790\u540e\u5f97\u5230\u7684\u4e5f\u662f \u6587\u6863\u6811 \u7c7b\u578b\u7684\u5143\u7d20\n    titleList = tree.xpath('//*[@id=\"b_results\"]/li//div[1]/a/h2')\n    print('len=', len(titleList))\n    for title in titleList:\n        # \u5c06 lxml.etree._Element \u8f6c\u6362\u6210 str\n        titleText = title.xpath('./text()')\n        print(titleText)\n\n\nif __name__ == '__main__':\n    useXpath()\n</code></pre>"},{"location":"Python/%E7%88%AC%E8%99%AB/#_6","title":"\u6848\u4f8b\u56db\uff1a\u6a21\u62df\u767b\u9646\u6559\u52a1\u5904","text":"<p>\u767b\u5f55\u6d41\u7a0b\uff1a</p> <p>\u53ef\u4ee5\u901a\u8fc7Chrome\u6d4f\u89c8\u5668\u5148\u5206\u89e3\u4e00\u4e0b\u767b\u9646\u8fc7\u7a0b\u4e2d\u4f1a\u9047\u5230\u54ea\u4e9b\u6b65\u9aa4\u3002\u8fd9\u91cc\u76f4\u63a5\u7ed9\u51fa\u7ed3\u8bba\u3002</p> <ol> <li>\u8bbf\u95ee\u6559\u52a1\u5904\u7f51\u5740\uff0c\u6b64\u65f6\u6211\u4eec\u5f97\u5230\u7f51\u7ad9\u8fd4\u56de\u7684<code>\u9a8c\u8bc1\u7801\u56fe\u7247\u94fe\u63a5</code>\u548c<code>cookie</code>\u4fe1\u606f\u3002</li> <li>\u518d\u6b21\u8bbf\u95ee<code>\u9a8c\u8bc1\u7801\u56fe\u7247\u94fe\u63a5</code>\uff0c\u4ee5\u5b57\u8282\u6d41\u7684\u65b9\u5f0f\u5c06\u56fe\u7247\u52a0\u8f7d\u5230\u672c\u5730\uff0c\u518d\u901a\u8fc7\u672c\u5730\u7684<code>ddddocr</code>\u5e93\u8bc6\u522b\u9a8c\u8bc1\u7801\u3002</li> <li>\u5c06\u9a8c\u8bc1\u7801\u3001cookie\u548c\u4e2a\u4eba\u4fe1\u606f\u901a\u8fc7post\u8bf7\u6c42\uff0c\u518d\u6b21\u53d1\u9001\u7ed9\u7f51\u7ad9\uff0c\u5373\u53ef\u767b\u5f55\u6210\u529f\u3002</li> </ol> <p>\u601d\u8003\uff1a\u4e3a\u4ec0\u4e48\u7b2c\u4e00\u6b65\u6211\u4eec\u4e0d\u76f4\u63a5\u83b7\u53d6 \u9a8c\u8bc1\u7801\u56fe\u7247\uff0c\u800c\u8981\u5148\u83b7\u53d6 \u9a8c\u8bc1\u7801\u56fe\u7247\u7684\u94fe\u63a5\u5462\uff1f</p> <p>\u7ec6\u8282\u601d\u8003\uff1a</p> <ol> <li>\u5982\u4f55\u83b7\u53d6cookies\u4ee5\u53ca\u643a\u5e26cookie\u5462\uff1f</li> </ol> <p>\u7b54\uff1acookies\u672c\u8d28\u4e0a\u662f\u5305\u542b\u5728headers\u4e2d\u7684\u4e00\u4e2akey-value\u952e\u503c\u5bf9\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528<code>resp.headers.get('Set-Cookie')</code>\u76f4\u63a5\u83b7\u53d6\u5bf9\u5e94\u7684\u503c(<code>resp = requeset(url)</code>)\u3002\u6216\u8005\u4f7f\u7528Python\u81ea\u5e26\u7684API<code>resp.cookies.items()</code>\u83b7\u53d6\u3002</p> <p>\u4f7f\u7528\u65f6\u53ef\u4ee5\u540c\u65f6\u91c7\u7528\u4e24\u79cd\u7b56\u7565\uff0c\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u9009\u62e9\u5408\u9002\u7684\u65b9\u6cd5\u3002</p> <ol> <li>\u5982\u4f55\u643a\u5e26cookies\u53d1\u9001\u5230\u670d\u52a1\u5668\u5462\uff1f</li> </ol> <p>\u7b54\uff1a\u540c\u7406\uff0c\u5411headers\u4e2d\u63d2\u5165\u4e00\u4e2a\u5173\u4e8ecookie\u7684str\u5373\u53ef\u3002\u4e5f\u53ef\u4ee5\u8c03\u7528Python\u81ea\u5e26\u7684API\uff08\u4e0d\u8fc7\u6211\u4e2a\u4eba\u4e0d\u592a\u5efa\u8bae\uff09\u3002</p> <pre><code>def loginJWC():\n    # \u767b\u5f55\u6559\u52a1\u5904\n\n    # \u5efa\u8bae\u5c06headers\u4e2d\u7684\u5185\u5bb9\u586b\u5199\u5b8c\u6574\n    headers = {\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',\n        'Accept-Encoding': 'gzip, deflate',\n        'Accept-Language': 'en-US,en;q=0.9,zh-CN;q=0.8,zh;q=0.7',\n        'Cache-Control': 'max-age=0',\n        'Connection': 'keep-alive',\n        'Content-Type': 'application/x-www-form-urlencoded',\n        'Host': '202.119.81.113:8080',\n        'Origin': 'http://202.119.81.113:8080',\n        'Referer': 'http://202.119.81.113:8080/',\n        'Upgrade-Insecure-Requests': '1',\n        'User-Agent': 'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) '\n                      'Chrome/99.0.4844.51 Mobile Safari/537.36 ',\n    }\n    # \u7b2c\u4e00\u6b21\u8bf7\u6c42\u5730\u5740\n    url = 'http://202.119.81.113:8080'\n\n    # \u83b7\u53d6\u9875\u9762\u8fd4\u56de\u4fe1\u606f\n    resp = requests.get(url=url, headers=headers)\n\n    # \u83b7\u53d6cookie(\u4efb\u9009\u4e00\u79cd\u65b9\u6cd5\u5373\u53ef)\n    # \u65b9\u6cd5\u4e00: \u4ece\u54cd\u5e94\u6807\u5934\u4e2d\u83b7\u53d6cookie\n    # print('cookie1=', resp.headers.get('Set-Cookie'))\n    # \u65b9\u6cd5\u4e8c: \u76f4\u63a5\u8c03\u7528cookies\u53c2\u6570\n    ck = resp.cookies.items()[0]\n    print('ck=', ck)\n    # \u5c06\u83b7\u53d6\u5230\u7684Cookie\u5b58\u5165headers(\u4e5f\u53ef\u4ee5\u5c06Cookie\u4f20\u5165request\u5bf9\u8c61\u7684post\u51fd\u6570\u4e2d\uff0c\u4e0d\u8fc7\u6211\u4e0d\u63a8\u8350)\n    headers['Cookie'] = ck[0] + '=' + ck[1]\n\n    # \u83b7\u53d6\u9875\u9762\u6587\u672c\n    pageText = resp.text\n    # \u5c06\u6587\u672c\u89e3\u6790\u5230\u6587\u6863\u6811\n    tree = etree.HTML(pageText)\n\n    # \u83b7\u53d6\u9a8c\u8bc1\u7801\u5730\u5740\n    imgPath = tree.xpath('//img[@id=\"SafeCodeImg\"]/@src')[0]\n    imgPath = url + str(imgPath)\n    # \u4ee5 \u5b57\u8282\u6d41 \u7684\u65b9\u5f0f\u83b7\u53d6\u56fe\u7247\u4fe1\u606f\n    img = requests.post(url=imgPath, headers=headers).content\n    # \u8c03\u7528\u9a8c\u8bc1\u7801\u8bc6\u522b\u5e93\n    ocr = ddddocr.DdddOcr()\n    code = ocr.classification(img=img)\n    print('code=', code)\n    with open('coding.jpg', 'w+b') as fp:\n        fp.write(img)\n\n    # \u66f4\u65b0url\u4e3a\u767b\u5f55\u4fe1\u606f\u53d1\u9001\u5230\u7684url\n    url = 'http://202.119.81.113:8080/Logon.do'\n    # \u65b0\u589e\u8bf7\u6c42\u53c2\u6570\n    params = {\n        'method': 'logon'\n    }\n    # \u643a\u5e26\u4e2a\u4eba\u4fe1\u606f\n    data = {\n        'USERNAME': '920106840520',\n        'PASSWORD': '123456789qwe',\n        'RANDOMCODE': code\n    }\n    resp = requests.post(url=url, params=params, headers=headers, data=data)\n    pageText = resp.text\n\n    with open('jwc.html', 'w', encoding='utf-8') as fp:\n        fp.write(pageText)\n\n    print('headers=', resp.headers)\n\n    if (len(resp.cookies) == 0):\n        print('\u9a8c\u8bc1\u5931\u8d25~')\n        return\n    print('\u9a8c\u8bc1\u6210\u529f\uff01')\n\n    newCk = resp.cookies.items()[0]\n    print('newCk=', newCk)\n    # \u66f4\u65b0headers\u4e2d\u7684cookies\n    headers['Cookie'] = newCk[0] + '=' + newCk[1]\n\n    # \u83b7\u53d6\u8bfe\u8868\n\n    # \u66f4\u65b0\u94fe\u63a5\n    url = 'http://202.119.81.112:9080/njlgdx/xskb/xskb_list.do'\n    # \u66f4\u65b0\u8bf7\u6c42\u53c2\u6570\n    params.clear()\n    params['Ves632DSdyV'] = 'NEW_XSD_PYGL'\n\nif __name__ == '__main__':\n    loginJWC()\n</code></pre>"},{"location":"Python/%E7%88%AC%E8%99%AB/#_7","title":"\u722c\u53d6\u6559\u52a1\u5904\u8bfe\u7a0b","text":"<pre><code>import time\nfrom xml.etree import ElementTree\nimport requests\nimport ddddocr\nfrom lxml import etree\n\ncookies = {}\n\n\ndef login_jwc():\n    # \u4f7f\u7528while\u5faa\u73af\u662f\u4e3a\u4e86\u9632\u6b62\u9a8c\u8bc1\u7801\u8bc6\u522b\u9519\u8bef\n    while True:\n        global cookies\n        headers = {\n            'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',\n            'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8',\n            'Cache-Control': 'max-age=0',\n            'Connection': 'keep-alive',\n            'Upgrade-Insecure-Requests': '1',\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36',\n        }\n\n        # \u7b2c\u4e00\u6b21\u83b7\u53d6cookie\n        response = requests.get('http://202.119.81.113:8080/', headers=headers, verify=False)\n\n        # \u5c06\u7b2c\u4e00\u6b21\u83b7\u53d6\u7684cookie\u643a\u5e26\u4e0a\uff0c\u5e76\u53d1\u9001\u767b\u5f55\u8bf7\u6c42\n        cookies = {\n            response.cookies.items()[0][0]: response.cookies.items()[0][1]\n        }\n\n        # \u83b7\u53d6\u9a8c\u8bc1\u7801\n        headers = {\n            'Accept': 'image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8',\n            'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8',\n            'Connection': 'keep-alive',\n            'Referer': 'http://202.119.81.113:8080/',\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36',\n        }\n\n        # \u6b64\u65f6response\u662fimage\u683c\u5f0f\n        response = requests.get('http://202.119.81.113:8080/verifycode.servlet', cookies=cookies, headers=headers, verify=False)\n\n        # \u4fdd\u5b58\u9a8c\u8bc1\u7801(\u751f\u4ea7\u73af\u5883\u4e2d\u7528\u4e0d\u4e0a)\n        with open('a.png', 'wb') as fp:\n            fp.write(response.content)\n\n        orc = ddddocr.DdddOcr()\n        code = orc.classification(img=response.content)\n        print('code=' + code)\n\n        # \u767b\u5f55 \u6b65\u9aa41\n        headers = {\n            'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',\n            'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8',\n            'Cache-Control': 'max-age=0',\n            'Origin': 'http://202.119.81.113:8080',\n            'Proxy-Connection': 'keep-alive',\n            'Referer': 'http://202.119.81.113:8080/',\n            'Upgrade-Insecure-Requests': '1',\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36',\n        }\n\n        params = {\n            'method': 'logon',\n        }\n\n        # USERNAME\u548cPASSWORD\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u83b7\u5f97\n        data = {\n            'USERNAME': '920106840520',\n            'PASSWORD': '123456789qwe',\n            'useDogCode': '',\n            'RANDOMCODE': code,\n        }\n\n        response = requests.post(\n            'http://202.119.81.113:8080/Logon.do',\n            params=params,\n            cookies=cookies,\n            headers=headers,\n            data=data,\n            verify=False,\n            allow_redirects=False  # \u8fd9\u4e00\u6b65\u5f88\u5173\u952e\n        )\n\n        if 'Location' in response.headers:\n            break\n\n        # \u83b7\u53d6\u9519\u8bef\u4fe1\u606f\n        tree = etree.HTML(response.text)\n        msg = tree.xpath('/html/body/form/div/div/div[2]/div[1]/font/text()')[0]\n        if msg == '\u8be5\u5e10\u53f7\u4e0d\u5b58\u5728\u6216\u5bc6\u7801\u9519\u8bef,\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458!':\n            print(msg)\n            return\n\n    # \u767b\u5f55 \u6b65\u9aa42\n    headers = {\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',\n        'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8',\n        'Cache-Control': 'max-age=0',\n        'Proxy-Connection': 'keep-alive',\n        'Referer': 'http://202.119.81.113:8080/',\n        'Upgrade-Insecure-Requests': '1',\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36',\n    }\n\n    response = requests.get(\n        response.headers['Location'],\n        cookies=cookies,\n        headers=headers,\n        verify=False,\n        allow_redirects=False  # \u8fd9\u4e00\u6b65\u5f88\u5173\u952e\n    )\n\n    # print(response.headers)\n    # cookie_str \u7c7b\u4f3c JSESSIONID=EF37E2DB570ACCC8A0460F35911AAB78; Path=/njlgdx\n    cookie_str = response.headers['Set-Cookie']\n    sub_str = cookie_str.split(';')[0]\n\n    # \u767b\u5f55 \u6b65\u9aa43\n    cookies = {\n        sub_str.split('=')[0]: sub_str.split('=')[1]\n    }\n\n    headers = {\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',\n        'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8',\n        'Cache-Control': 'max-age=0',\n        'Proxy-Connection': 'keep-alive',\n        'Referer': 'http://202.119.81.113:8080/',\n        'Upgrade-Insecure-Requests': '1',\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36',\n    }\n\n    response = requests.get(response.headers['Location'], cookies=cookies, headers=headers, verify=False)\n\n    #========================\u81f3\u6b64\u767b\u5f55\u6210\u529f=========================\n    # \u643a\u5e26\u4e0a\u83b7\u53d6\u7684cookie\uff0c\u5373\u53ef\u5728\u6559\u52a1\u5904\u4e2d\u8fdb\u884c\u5404\u79cd\u64cd\u4f5c\u5566\uff01\n    text = response.text\n    with open('jwc.html', 'w', encoding='utf-8') as fp:\n        fp.write(text)\n\n\ndef get_course_table():\n    headers = {\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',\n        'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8',\n        'Cache-Control': 'max-age=0',\n        'Origin': 'http://202.119.81.112:9080',\n        'Proxy-Connection': 'keep-alive',\n        'Referer': 'http://202.119.81.112:9080/njlgdx/xskb/xskb_list.do?Ves632DSdyV=NEW_XSD_PYGL',\n        'Upgrade-Insecure-Requests': '1',\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36',\n    }\n\n    params = {\n        'Ves632DSdyV': 'NEW_XSD_PYGL',\n    }\n\n    data = [\n        ('cj0701id', ''),\n        ('zc', ''),\n        ('demo', ''),\n        ('xnxq01id', '2022-2023-2'),\n        ('pageIndex', '1'),\n    ]\n\n    response = requests.post(\n        'http://202.119.81.112:9080/njlgdx/xskb/xskb_list.do',\n        params=params,\n        cookies=cookies,\n        headers=headers,\n        data=data,\n        verify=False,\n    )\n\n    text = response.text\n\n    with open('class_table.html', 'w', encoding='utf-8') as fp:\n        fp.write(text)\n\n    tree = etree.HTML(text)\n\n    lis = tree.xpath('//div[@class=\"kbcontent\"]//text()')\n    print(lis)\n\n\nif __name__ == '__main__':\n    start = time.time()\n    login_jwc()\n    get_course_table()\n    end = time.time()\n    print('\u8fd0\u884c\u65f6\u95f4\uff1a' + str(end - start) + '\u79d2')\n\n</code></pre>"},{"location":"Python/%E7%88%AC%E8%99%AB/#selenium","title":"\u6848\u4f8b\u4e94\uff1a\u4f7f\u7528selenium\u6a21\u62df\u767b\u9646\u6559\u52a1\u5904","text":"<pre><code>import time\n\nfrom selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\nfrom selenium.webdriver.chrome.service import Service\nfrom selenium.webdriver.common.by import By\nfrom PIL import Image\nimport ddddocr\n\nopts = Options()\n# \u4e0d\u80fd\u5c06\u52a0\u8f7d\u7b56\u7565\u5199\u6210normal\uff0c\u5426\u5219\u5728\u65e0\u5934\u6a21\u5f0f\u4e0b\u4f1a\u52a0\u8f7d\u5931\u8d25\uff08\u6211\u4e5f\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\uff09\nopts.page_load_strategy = 'normal'\n# opts.add_argument('--headless')\nservice = Service('C:\\Program Files (x86)\\Google\\Chrome\\Application\\chromedriver.exe')\nwd = webdriver.Chrome(service=service, options=opts)\n\n\ndef visitJWC():\n    wd.get('http://202.119.81.113:8080/')\n\n    while True:\n        # \u901a\u8fc7xpath\u83b7\u53d6\u5143\u7d20\u7684\u64cd\u4f5c\u8981\u653e\u5728while\u5faa\u73af\u91cc\n        username = wd.find_element(By.XPATH, '/html/body/form/div/div/div[2]/div[1]/table/tbody/tr[2]/td[2]/input')\n        password = wd.find_element(By.XPATH, '/html/body/form/div/div/div[2]/div[1]/table/tbody/tr[3]/td[2]/input[1]')\n        rand_code = wd.find_element(By.XPATH, '/html/body/form/div/div/div[2]/div[1]/table/tbody/tr[4]/td[2]/input')\n        username.clear()\n        username.send_keys('9201068405208')\n        password.clear()\n        password.send_keys('123456789qwe')\n        pic = wd.find_element(By.XPATH, '/html/body/form/div/div/div[2]/div[1]/table/tbody/tr[4]/td[2]/img')\n\n        # \u83b7\u53d6\u67d0\u4e2a\u5143\u7d20\u7684\u622a\u56fe\n        is_pic = pic.screenshot('./code.jpg')\n        if is_pic:\n            print('\u622a\u5c4f\u6210\u529f\uff01')\n        else:\n            print('\u622a\u5c4f\u5931\u8d25~')\n            return\n        img = Image.open('./code.jpg')\n        ocr = ddddocr.DdddOcr()\n        code = ocr.classification(img=img)\n\n        # \u6e05\u7a7a\u9a8c\u8bc1\u7801\uff0c\u5e76\u586b\u5199\u65b0\u7684\u9a8c\u8bc1\u7801\n        rand_code.clear()\n        rand_code.send_keys(code)\n\n        login_btn = wd.find_element(By.XPATH, '/html/body/form/div/div/div[2]/div[1]/table/tbody/tr[5]/td/input[1]')\n        login_btn.click()\n\n        try:\n            wrong_tag = wd.find_element(By.XPATH, '/html/body/form/div/div/div[2]/div[1]/font')\n        except:\n            print('\u767b\u5f55\u6210\u529f\uff01')\n            break\n        else:\n            print(wrong_tag.text)\n            if wrong_tag.text == '\u8be5\u5e10\u53f7\u4e0d\u5b58\u5728\u6216\u5bc6\u7801\u9519\u8bef,\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458!':\n                break\n\n\nif __name__ == '__main__':\n    start = time.time()\n    visitJWC()\n    end = time.time()\n    print('\u8fd0\u884c\u65f6\u95f4\uff1a' + str(end - start) + '\u79d2')\n</code></pre>"},{"location":"Python/%E7%88%AC%E8%99%AB/#request","title":"\u4f7f\u7528request\u767b\u5f55\u6559\u52a1\u5904","text":"<pre><code>import time\n\nimport requests\nimport ddddocr\n\nstart = time.time()\n\nheaders = {\n    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',\n    'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8',\n    'Cache-Control': 'max-age=0',\n    'Connection': 'keep-alive',\n    'Upgrade-Insecure-Requests': '1',\n    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36',\n}\n\n# \u7b2c\u4e00\u6b21\u83b7\u53d6cookie\nresponse = requests.get('http://202.119.81.113:8080/', headers=headers, verify=False)\n\n# \u5c06\u7b2c\u4e00\u6b21\u83b7\u53d6\u7684cookie\u643a\u5e26\u4e0a\uff0c\u5e76\u53d1\u9001\u767b\u5f55\u8bf7\u6c42\ncookies = {\n    response.cookies.items()[0][0]: response.cookies.items()[0][1]\n}\n\n# \u83b7\u53d6\u9a8c\u8bc1\u7801\nheaders = {\n    'Accept': 'image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8',\n    'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8',\n    'Connection': 'keep-alive',\n    'Referer': 'http://202.119.81.113:8080/',\n    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36',\n}\n\n# \u6b64\u65f6response\u662fimage\u683c\u5f0f\nresponse = requests.get('http://202.119.81.113:8080/verifycode.servlet', cookies=cookies, headers=headers, verify=False)\n\n# \u4fdd\u5b58\u9a8c\u8bc1\u7801\nwith open('a.png', 'wb') as fp:\n    fp.write(response.content)\n\norc = ddddocr.DdddOcr()\ncode = orc.classification(img=response.content)\nprint('code=' + code)\n\n# \u767b\u5f55 \u6b65\u9aa41\nheaders = {\n    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',\n    'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8',\n    'Cache-Control': 'max-age=0',\n    'Origin': 'http://202.119.81.113:8080',\n    'Proxy-Connection': 'keep-alive',\n    'Referer': 'http://202.119.81.113:8080/',\n    'Upgrade-Insecure-Requests': '1',\n    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36',\n}\n\nparams = {\n    'method': 'logon',\n}\n\ndata = {\n    'USERNAME': '920106840520',\n    'PASSWORD': '123456789qwe',\n    'useDogCode': '',\n    'RANDOMCODE': code,\n}\n\nresponse = requests.post(\n    'http://202.119.81.113:8080/Logon.do',\n    params=params,\n    cookies=cookies,\n    headers=headers,\n    data=data,\n    verify=False,\n    allow_redirects=False  # \u8fd9\u4e00\u6b65\u5f88\u5173\u952e\n)\n\n# \u767b\u5f55 \u6b65\u9aa42\nheaders = {\n    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',\n    'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8',\n    'Cache-Control': 'max-age=0',\n    # 'Cookie': 'JSESSIONID=3E5339BDC4CAB28B50E826A5477C307F',\n    'Proxy-Connection': 'keep-alive',\n    'Referer': 'http://202.119.81.113:8080/',\n    'Upgrade-Insecure-Requests': '1',\n    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36',\n}\n\nresponse = requests.get(\n    response.headers['Location'],\n    cookies=cookies,\n    headers=headers,\n    verify=False,\n    allow_redirects=False  # \u8fd9\u4e00\u6b65\u5f88\u5173\u952e\n)\n\n# print(response.headers)\n# cookie_str \u7c7b\u4f3c JSESSIONID=EF37E2DB570ACCC8A0460F35911AAB78; Path=/njlgdx\ncookie_str = response.headers['Set-Cookie']\nsub_str = cookie_str.split(';')[0]\n\n# \u767b\u5f55 \u6b65\u9aa43\ncookies = {\n    sub_str.split('=')[0]: sub_str.split('=')[1]\n}\n\nheaders = {\n    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',\n    'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8',\n    'Cache-Control': 'max-age=0',\n    'Proxy-Connection': 'keep-alive',\n    'Referer': 'http://202.119.81.113:8080/',\n    'Upgrade-Insecure-Requests': '1',\n    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36',\n}\n\nresponse = requests.get(response.headers['Location'], cookies=cookies, headers=headers, verify=False)\n\n#========================\u81f3\u6b64\u767b\u5f55\u6210\u529f=========================\n\n# print(response.text)\n\nend = time.time()\n\nprint('\u8fd0\u884c\u65f6\u95f4\uff1a' + str(end - start) + '\u79d2\u3002')\n\ntext = response.text\nwith open('a.html', 'w', encoding='utf-8') as fp:\n    fp.write(text)\n</code></pre>"},{"location":"Python/%E7%88%AC%E8%99%AB/#_8","title":"\u722c\u53d6\u6559\u52a1\u5904\u8bfe\u8868\u4fe1\u606f","text":"<pre><code>import copy\nimport time\nfrom xml.etree import ElementTree\nimport requests\nimport ddddocr\nfrom lxml import etree\n\ncookies = {}\n\n\ndef login_jwc():\n    # \u4f7f\u7528while\u5faa\u73af\u662f\u4e3a\u4e86\u9632\u6b62\u9a8c\u8bc1\u7801\u8bc6\u522b\u9519\u8bef\n    while True:\n        global cookies\n        headers = {\n            'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',\n            'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8',\n            'Cache-Control': 'max-age=0',\n            'Connection': 'keep-alive',\n            'Upgrade-Insecure-Requests': '1',\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36',\n        }\n\n        # \u7b2c\u4e00\u6b21\u83b7\u53d6cookie\n        response = requests.get('http://202.119.81.113:8080/', headers=headers, verify=False)\n\n        # \u5c06\u7b2c\u4e00\u6b21\u83b7\u53d6\u7684cookie\u643a\u5e26\u4e0a\uff0c\u5e76\u53d1\u9001\u767b\u5f55\u8bf7\u6c42\n        cookies = {\n            response.cookies.items()[0][0]: response.cookies.items()[0][1]\n        }\n\n        # \u83b7\u53d6\u9a8c\u8bc1\u7801\n        headers = {\n            'Accept': 'image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8',\n            'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8',\n            'Connection': 'keep-alive',\n            'Referer': 'http://202.119.81.113:8080/',\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36',\n        }\n\n        # \u6b64\u65f6response\u662fimage\u683c\u5f0f\n        response = requests.get('http://202.119.81.113:8080/verifycode.servlet', cookies=cookies, headers=headers, verify=False)\n\n        # \u4fdd\u5b58\u9a8c\u8bc1\u7801(\u751f\u4ea7\u73af\u5883\u4e2d\u7528\u4e0d\u4e0a)\n        with open('a.png', 'wb') as fp:\n            fp.write(response.content)\n\n        orc = ddddocr.DdddOcr()\n        code = orc.classification(img=response.content)\n        print('code=' + code)\n\n        # \u767b\u5f55 \u6b65\u9aa41\n        headers = {\n            'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',\n            'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8',\n            'Cache-Control': 'max-age=0',\n            'Origin': 'http://202.119.81.113:8080',\n            'Proxy-Connection': 'keep-alive',\n            'Referer': 'http://202.119.81.113:8080/',\n            'Upgrade-Insecure-Requests': '1',\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36',\n        }\n\n        params = {\n            'method': 'logon',\n        }\n\n        # USERNAME\u548cPASSWORD\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u83b7\u5f97\n        data = {\n            'USERNAME': '920106840520',\n            'PASSWORD': '123456789qwe',\n            'useDogCode': '',\n            'RANDOMCODE': code,\n        }\n\n        response = requests.post(\n            'http://202.119.81.113:8080/Logon.do',\n            params=params,\n            cookies=cookies,\n            headers=headers,\n            data=data,\n            verify=False,\n            allow_redirects=False  # \u8fd9\u4e00\u6b65\u5f88\u5173\u952e\n        )\n\n        if 'Location' in response.headers:\n            break\n\n        # \u83b7\u53d6\u9519\u8bef\u4fe1\u606f\n        tree = etree.HTML(response.text)\n        msg = tree.xpath('/html/body/form/div/div/div[2]/div[1]/font/text()')[0]\n        if msg == '\u8be5\u5e10\u53f7\u4e0d\u5b58\u5728\u6216\u5bc6\u7801\u9519\u8bef,\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458!':\n            print(msg)\n            return\n\n    # \u767b\u5f55 \u6b65\u9aa42\n    headers = {\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',\n        'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8',\n        'Cache-Control': 'max-age=0',\n        'Proxy-Connection': 'keep-alive',\n        'Referer': 'http://202.119.81.113:8080/',\n        'Upgrade-Insecure-Requests': '1',\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36',\n    }\n\n    response = requests.get(\n        response.headers['Location'],\n        cookies=cookies,\n        headers=headers,\n        verify=False,\n        allow_redirects=False  # \u8fd9\u4e00\u6b65\u5f88\u5173\u952e\n    )\n\n    # print(response.headers)\n    # cookie_str \u7c7b\u4f3c JSESSIONID=EF37E2DB570ACCC8A0460F35911AAB78; Path=/njlgdx\n    cookie_str = response.headers['Set-Cookie']\n    sub_str = cookie_str.split(';')[0]\n\n    # \u767b\u5f55 \u6b65\u9aa43\n    cookies = {\n        sub_str.split('=')[0]: sub_str.split('=')[1]\n    }\n\n    headers = {\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',\n        'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8',\n        'Cache-Control': 'max-age=0',\n        'Proxy-Connection': 'keep-alive',\n        'Referer': 'http://202.119.81.113:8080/',\n        'Upgrade-Insecure-Requests': '1',\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36',\n    }\n\n    response = requests.get(response.headers['Location'], cookies=cookies, headers=headers, verify=False)\n\n    #========================\u81f3\u6b64\u767b\u5f55\u6210\u529f=========================\n    # \u643a\u5e26\u4e0a\u83b7\u53d6\u7684cookie\uff0c\u5373\u53ef\u5728\u6559\u52a1\u5904\u4e2d\u8fdb\u884c\u5404\u79cd\u64cd\u4f5c\u5566\uff01\n    text = response.text\n    with open('jwc.html', 'w', encoding='utf-8') as fp:\n        fp.write(text)\n\n\n# \u53ea\u89e3\u6790 \u661f\u671f\u4e00(14-14\u5c0f\u8282 \u8fd9\u6837\u7684\u5b57\u7b26\u4e32\ndef parse_single(s: str) -&gt; list[int]:\n    day = s.split('(')[0]\n    if day == '\u661f\u671f\u4e00':\n        day_res = 1\n    elif day == '\u661f\u671f\u4e8c':\n        day_res = 2\n    elif day == '\u661f\u671f\u4e09':\n        day_res = 3\n    elif day == '\u661f\u671f\u56db':\n        day_res = 4\n    elif day == '\u661f\u671f\u4e94':\n        day_res = 5\n    elif day == '\u661f\u671f\u516d':\n        day_res = 6\n    else:\n        day_res = 7\n\n    # count \u662f 08-10\n    count = s.split('(')[1].split(')')[0].split('\u5c0f\u8282')[0]\n    lesson_start = int(count.split('-')[0])\n    lesson_count = int(count.split('-')[1]) - int(count.split('-')[0]) + 1\n    return [day_res, lesson_start, lesson_count]\n\n\n# \u89e3\u6790\u7c7b\u4f3c \u661f\u671f\u4e00(14-14\u5c0f\u8282) \u6216 \u661f\u671f\u4e8c(08-10\u5c0f\u8282) \u6216 \u661f\u671f\u4e00(14-14\u5c0f\u8282)\u661f\u671f\u4e8c(08-10\u5c0f\u8282) \u7684\u5b57\u7b26\u4e32\n# \u8fd4\u56de\u4e09\u4e2a\u6570 [1, 8, 2] \u8868\u793a\u5468\u4e00\uff0c\u7b2c8\u5c0f\u8282\uff0c2\u8282\u8bfe\ndef parse_time(s: str) -&gt; list[list[int]]:\n    res = []\n    if s.count('\u661f\u671f') == 1:\n        res.append(parse_single(s))\n\n    # \u661f\u671f\u4e00(14-14\u5c0f\u8282)\u661f\u671f\u4e8c(08-10\u5c0f\u8282)\n    elif s.count('\u661f\u671f') == 2:\n        one = s.rsplit('\u661f\u671f', maxsplit=1)[0]\n        two = s.split(')', maxsplit=1)[1]\n        res.append(parse_single(one))\n        res.append(parse_single(two))\n\n    return res\n\n\n# \u89e3\u6790\u7c7b\u4f3c 1-16(\u5468) \u6216 1(\u5468) \u7684\u5b57\u7b26\u4e32\ndef parse_week(s: str) -&gt; list[int]:\n    # num \u662f 1-16 \u6216 1 \u8fd9\u79cd\u5f62\u5f0f\n    num = s.split('(')[0]\n    if '-' in num:\n        start_week = int(num.split('-')[0])\n        end_week = int(num.split('-')[1])\n        return [start_week, end_week]\n    else:\n        return [int(num), int(num)]\n\n\ndef parse_final_table(my_course: list[list[dict]], courses: dict):\n    for name, data in courses.items():\n        start_week, end_week = data['week']\n        # \u661f\u671f\u4e0b\u6807\u504f\u79fb\n        for week in range(start_week - 1, end_week):\n            # \u67d0\u4e00\u5468\u53ef\u80fd\u6709\u591a\u8282\u8bfe\n            for idx in range(len(data['time'])):\n                my_course[week].append({\n                    'name': name,\n                    'code': data['code'],\n                    'order': data['order'],\n                    'teacher': data['teacher'],\n                    'course_time': data['time'][idx],\n                    'score': data['score'],\n                    'room': data['room'][idx] if len(data['room']) != 0 else '',\n                    'type': data['type'],\n                    'stage': data['stage']\n                })\n\n\n\n\ndef get_course_table() -&gt; dict:\n    headers = {\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',\n        'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8',\n        'Cache-Control': 'max-age=0',\n        'Origin': 'http://202.119.81.112:9080',\n        'Proxy-Connection': 'keep-alive',\n        'Referer': 'http://202.119.81.112:9080/njlgdx/xskb/xskb_list.do?Ves632DSdyV=NEW_XSD_PYGL',\n        'Upgrade-Insecure-Requests': '1',\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36',\n    }\n\n    params = {\n        'Ves632DSdyV': 'NEW_XSD_PYGL',\n    }\n\n    data = [\n        ('cj0701id', ''),\n        ('zc', ''),\n        ('demo', ''),\n        ('xnxq01id', '2022-2023-2'),\n        ('pageIndex', '1'),\n    ]\n\n    response = requests.post(\n        'http://202.119.81.112:9080/njlgdx/xskb/xskb_list.do',\n        params=params,\n        cookies=cookies,\n        headers=headers,\n        data=data,\n        verify=False,\n    )\n\n    text = response.text\n\n    with open('class_table.html', 'w', encoding='utf-8') as fp:\n        fp.write(text)\n\n    tree = etree.HTML(text)\n\n    blocks_top = tree.xpath('//div[@class=\"kbcontent\"]')\n\n    # \u8bfe\u7a0b\n    c_arr = []\n    # \u5468\u6b21\n    w_arr = []\n    for block in blocks_top:\n        for content in block.xpath('./text()'):\n            if ('-----' not in content) and content != '\\xa0' and content != '':\n                c_arr.append(content)\n        for content in block.xpath('./font[@title=\"\u5468\u6b21(\u8282\u6b21)\"]/text()'):\n            if content != ' ':\n                w_arr.append(content)\n\n    courses = dict()\n    for i in range(len(c_arr)):\n        courses[c_arr[i]] = {\n            'week': w_arr[i]\n        }\n\n    # print(courses)\n\n    blocks_bottom = tree.xpath('//*[@id=\"dataList\"]//tr')\n    for row in blocks_bottom:\n        col = row.xpath('./td')\n        if len(col) != 10:\n            continue\n        data = []\n        for detail in col:\n            content = detail.xpath('./text()')\n            if len(content):\n                data.append(content[0])\n            else:\n                data.append('')\n        print(data[3])\n        if courses.__contains__(data[3]):\n            print('YES')\n        else:\n            print('NO')\n        courses[data[3]]['code'] = data[1]\n        courses[data[3]]['order'] = data[2]\n        courses[data[3]]['teacher'] = data[4]\n        courses[data[3]]['time'] = data[5]\n        courses[data[3]]['score'] = data[6]\n        courses[data[3]]['room'] = data[7]\n        courses[data[3]]['type'] = data[8]\n        courses[data[3]]['stage'] = data[9]\n\n    # \u6253\u5370\u521d\u6b65\u7ed3\u679c\n    # for name, data in courses.items():\n    #     print(name)\n    #     print(data)\n\n    for _, data in courses.items():\n        p_week = parse_week(data['week'])\n        p_time = parse_time(data['time'])\n        data['week'] = p_week\n        data['time'] = p_time\n        if len(p_time) == 2:\n            data['room'] = data['room'].split(',')\n\n    # \u6253\u5370\u52a0\u5de5\u540e\u7684\u6570\u636e\n    # for name, data in courses.items():\n    #     print(name)\n    #     print(data)\n\n    my_courses = [[] for week in range(25)]\n    parse_final_table(my_courses, courses)\n\n    return my_courses\n\n\ndef main():\n    start = time.time()\n    login_jwc()\n    my_course = get_course_table()\n\n    week = 1\n    for courses in my_course:\n        print('\u7b2c' + str(week) + '\u5468')\n        for course in courses:\n            print(course, end=' ')\n        print()\n        week += 1\n\n    end = time.time()\n    print('\u8fd0\u884c\u65f6\u95f4\uff1a' + str(end - start) + '\u79d2')\n\n\nif __name__ == '__main__':\n    main()\n\n</code></pre>"},{"location":"Python/%E7%88%AC%E8%99%AB/#_9","title":"\u767b\u5f55\u6559\u52a1\u5904\u6700\u7ec8\u7248","text":"<pre><code># -*-coding:utf-8 -*-\n\nimport time\nfrom django.http import JsonResponse, HttpResponse\nimport ddddocr\nfrom PIL import Image\nfrom lxml import etree\nfrom playwright.sync_api import Page, expect, sync_playwright\n\n\n# \u53ea\u89e3\u6790 \u661f\u671f\u4e00(14-14\u5c0f\u8282 \u8fd9\u6837\u7684\u5b57\u7b26\u4e32\ndef parse_single(s: str) -&gt; list[int]:\n    day = s.split('(')[0]\n    if day == '\u661f\u671f\u4e00':\n        day_res = 1\n    elif day == '\u661f\u671f\u4e8c':\n        day_res = 2\n    elif day == '\u661f\u671f\u4e09':\n        day_res = 3\n    elif day == '\u661f\u671f\u56db':\n        day_res = 4\n    elif day == '\u661f\u671f\u4e94':\n        day_res = 5\n    elif day == '\u661f\u671f\u516d':\n        day_res = 6\n    else:\n        day_res = 7\n\n    # count \u662f 08-10\n    count = s.split('(')[1].split(')')[0].split('\u5c0f\u8282')[0]\n    lesson_start = int(count.split('-')[0])\n    lesson_count = int(count.split('-')[1]) - int(count.split('-')[0]) + 1\n    return [day_res, lesson_start, lesson_count]\n\n\n# \u89e3\u6790\u7c7b\u4f3c \u661f\u671f\u4e00(14-14\u5c0f\u8282) \u6216 \u661f\u671f\u4e8c(08-10\u5c0f\u8282) \u6216 \u661f\u671f\u4e00(14-14\u5c0f\u8282)\u661f\u671f\u4e8c(08-10\u5c0f\u8282) \u7684\u5b57\u7b26\u4e32\n# \u8fd4\u56de\u4e09\u4e2a\u6570 [1, 8, 2] \u8868\u793a\u5468\u4e00\uff0c\u7b2c8\u5c0f\u8282\uff0c2\u8282\u8bfe\ndef parse_time(s: str) -&gt; list[list[int]]:\n    res = []\n    if s.count('\u661f\u671f') == 1:\n        res.append(parse_single(s))\n\n    # \u661f\u671f\u4e00(14-14\u5c0f\u8282)\u661f\u671f\u4e8c(08-10\u5c0f\u8282)\n    elif s.count('\u661f\u671f') == 2:\n        one = s.rsplit('\u661f\u671f', maxsplit=1)[0]\n        two = s.split(')', maxsplit=1)[1]\n        res.append(parse_single(one))\n        res.append(parse_single(two))\n\n    return res\n\n\n# \u89e3\u6790\u7c7b\u4f3c 1-16(\u5468) \u6216 1(\u5468) \u7684\u5b57\u7b26\u4e32\ndef parse_week(s: str) -&gt; list[int]:\n    # num \u662f 1-16 \u6216 1 \u8fd9\u79cd\u5f62\u5f0f\n    num = s.split('(')[0]\n    if '-' in num:\n        start_week = int(num.split('-')[0])\n        end_week = int(num.split('-')[1])\n        return [start_week, end_week]\n    else:\n        return [int(num), int(num)]\n\n\ndef parse_final_table(my_course: list[list[dict]], courses: dict):\n    for name, data in courses.items():\n        start_week, end_week = data['week']\n        # \u661f\u671f\u4e0b\u6807\u504f\u79fb\n        for week in range(start_week - 1, end_week):\n            # \u67d0\u4e00\u5468\u53ef\u80fd\u6709\u591a\u8282\u8bfe\n            for idx in range(len(data['time'])):\n                my_course[week].append({\n                    'name': name,\n                    'code': data['code'],\n                    'order': data['order'],\n                    'teacher': data['teacher'],\n                    'day': data['time'][idx][0],\n                    'lesson_start': data['time'][idx][1],\n                    'lesson_count': data['time'][idx][2],\n                    'score': data['score'],\n                    'room': data['room'][idx] if len(data['room']) != 0 else '',\n                    'type': data['type'],\n                    'stage': data['stage']\n                })\n\n\ndef login_jwc(username: str, password: str):\n    with sync_playwright() as p:\n        browser = p.chromium.launch(headless=False)\n        context = browser.new_context()\n        page = context.new_page()\n        page.goto(\"http://202.119.81.113:8080/\")\n        # \u5faa\u73af\u767b\u5f55\n        while True:\n            page.locator(\"#userAccount\").fill(username, timeout=10000)\n            page.locator(\"#userPassword\").fill(password, timeout=10000)\n            # \u9a8c\u8bc1\u7801\u622a\u56fe\n            page.query_selector(\"#SafeCodeImg\").screenshot(path=\"./code.png\")\n\n            # \u83b7\u53d6ocr\u5bf9\u8c61\n            ocr = ddddocr.DdddOcr()\n\n            # \u83b7\u53d6\u56fe\u7247\n            img = Image.open(\"./code.png\")\n\n            # ocr\u5bf9\u8c61\u8bc6\u522b\u56fe\u7247\n            safe_code = ocr.classification(img=img)\n            print(\"\u9a8c\u8bc1\u7801\uff1a\" + safe_code)\n\n            # \u83b7\u53d6\u9a8c\u8bc1\u7801\u8f93\u5165\u6846\n            page.locator(\"#RANDOMCODE\").fill(safe_code)\n\n            # \u70b9\u51fb \u786e\u8ba4\u767b\u5f55 \u6309\u94ae\n            page.locator(\"#btnSubmit\").click()\n\n            if \"\u9a8c\u8bc1\u7801\u9519\u8bef\" in page.content():\n                print(\"\u9a8c\u8bc1\u7801\u9519\u8bef\uff01\uff01\")\n            elif \"\u8be5\u5e10\u53f7\u4e0d\u5b58\u5728\u6216\u5bc6\u7801\u9519\u8bef\" in page.content():\n                print(\"\u8be5\u5e10\u53f7\u4e0d\u5b58\u5728\u6216\u5bc6\u7801\u9519\u8bef!\")\n                return None\n            elif \"\u5176\u5b83\u5730\u65b9\u767b\u5f55\" in page.content():\n                print(\"\u60a8\u7684\u8d26\u53f7\u5728\u5176\u5b83\u5730\u65b9\u767b\u5f55\")\n            else:\n                break\n\n        cnt = 1\n        while \"\u6211\u7684\u684c\u9762\" not in page.content():\n            # \u963b\u585ecnt\u79d2\uff0c\u4f9d\u6b21\u9012\u589e\n            time.sleep(cnt)\n            # \u5237\u65b0\u4e00\u6b21\u5f53\u524d\u9875\u9762(\u611f\u89c9\u50cf\u662f\u6559\u52a1\u5904\u7684\u95ee\u9898)\n            page.reload()\n            cnt += 1\n            if cnt &gt; 30:\n                break\n\n        # \u8bbf\u95ee\u6559\u52a1\u5904\u8bfe\u8868\n        page.goto(\"http://202.119.81.112:9080/njlgdx/xskb/xskb_list.do?Ves632DSdyV=NEW_XSD_PYGL\")\n\n        with open('./kb.html', 'w', encoding='utf-8') as fp:\n            fp.write(page.content())\n\n        tree = etree.HTML(page.content())\n\n        # \u89e3\u6790\u8bfe\u8868\u5185\u5bb9\n        blocks_top = tree.xpath('//div[@class=\"kbcontent\"]')\n\n        # \u8bfe\u7a0b\n        c_arr = []\n        # \u5468\u6b21\n        w_arr = []\n        for block in blocks_top:\n            for content in block.xpath('./text()'):\n                if ('-----' not in content) and content != '\\xa0' and content != '':\n                    c_arr.append(content)\n            for content in block.xpath('./font[@title=\"\u5468\u6b21(\u8282\u6b21)\"]/text()'):\n                if content != ' ':\n                    w_arr.append(content)\n\n        courses = dict()\n        for i in range(len(c_arr)):\n            courses[c_arr[i]] = {\n                'week': w_arr[i]\n            }\n\n        # print(courses)\n\n        # blocks_bottom \u662f\u4e0b\u9762\u4e00\u6574\u5757\u8868\u683c\n        blocks_bottom = tree.xpath('//*[@id=\"dataList\"]//tr')\n        # \u904d\u5386\u8868\u683c\u7684\u6bcf\u4e00\u884c\n        for row in blocks_bottom:\n            # \u83b7\u53d6\u6bcf\u4e00\u884c\u7684\u6bcf\u4e00\u5217\u5143\u7d20\n            col = row.xpath('./td')\n            if len(col) != 10:\n                continue\n            # data \u662f \u4e00\u884c\u8bfe\u7a0b\u6570\u636e\n            data = []\n            for detail in col:\n                content = detail.xpath('./text()')\n                if len(content) == 1:\n                    data.append(content[0])\n                elif len(content) == 2:\n                    data.append(content)\n                else:\n                    data.append('')\n            print(data[3])\n            courses[data[3]]['code'] = data[1]\n            courses[data[3]]['order'] = data[2]\n            courses[data[3]]['teacher'] = data[4]\n            courses[data[3]]['time'] = data[5]\n            courses[data[3]]['score'] = data[6]\n            courses[data[3]]['room'] = data[7].split(',')\n            courses[data[3]]['type'] = data[8]\n            courses[data[3]]['stage'] = data[9]\n\n        # \u6253\u5370\u521d\u6b65\u7ed3\u679c\n        print('\u6253\u5370\u521d\u6b65\u7ed3\u679c')\n        for name, data in courses.items():\n            print(name)\n            print(data)\n\n        for _, data in courses.items():\n            data['week'] = parse_week(data['week'])\n            p_time = []\n\n            # \u89e3\u6790 ['\u661f\u671f\u4e00(02-03\u5c0f\u8282)', '\u661f\u671f\u4e09(02-03\u5c0f\u8282)'] \u6216 \u661f\u671f\u56db(04-05\u5c0f\u8282)\n            if len(data['time']) == 2:\n                for t in data['time']:\n                    p_time.append(parse_single(t))\n            else:\n                p_time.append(parse_single(data['time']))\n\n            data['time'] = p_time\n\n        # \u6253\u5370\u52a0\u5de5\u540e\u7684\u6570\u636e\n        # print('\u6253\u5370\u52a0\u5de5\u540e\u7684\u6570\u636e')\n        # for name, data in courses.items():\n        #     print(name)\n        #     print(data)\n\n        # \u683c\u5f0f\u5982\u4e0b\uff1a\n        # \u64cd\u4f5c\u7cfb\u7edf\n        # {'week': [2, 9], 'code': '06022005', 'order': '1', 'teacher': '\u8877\u5b9c', 'time': [[1, 2, 2], [3, 2, 2]], 'score': '2', 'room': ['\u2163-A106', '\u2163-A106'], 'type': '\u5fc5\u4fee', 'stage': '\u9884\u7f6e'}\n        # \u6216\n        # {'week': [2, 13], 'code': '06029905', 'order': '0', 'teacher': '\u8521\u5fd7\u6210', 'time': [[4, 4, 2]], 'score': '2', 'room': ['\u2163-B306'], 'type': '\u4efb\u9009', 'stage': '\u4e00\u9009'}\n\n        my_courses = [[] for week in range(25)]\n        parse_final_table(my_courses, courses)\n\n        page.close()\n        context.close()\n        browser.close()\n\n        return my_courses\n\n\ndef verify(request):\n    if request.method != 'GET':\n        return JsonResponse({\n            'success': False,\n            'msg': 'Only support GET method'\n        })\n    username = request.GET.get('username')\n    password = request.GET.get('password')\n    if username is None or password is None:\n        return JsonResponse({\n            'success': False,\n            'msg': 'wrong params'\n        })\n\n    my_course = login_jwc(str(username), str(password))\n    if my_course is None:\n        return JsonResponse({\n            'success': False,\n            'msg': '\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef'\n        }, json_dumps_params={'ensure_ascii': False})\n\n    return JsonResponse({\n        'success': True,\n        'data': my_course\n    }, json_dumps_params={'ensure_ascii': False})\n\n</code></pre>"},{"location":"Python/%E7%88%AC%E8%99%AB/#_10","title":"\u6682\u672a\u6574\u7406","text":"<pre><code>import requests\nimport json\n# \u5bfc\u5165etree\nfrom lxml import etree\n\nimport os\nimport ddddocr\n\n\ndef getFromBaidu():\n    header = {\n        'User-Agent': 'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/99.0.4844.51 Mobile Safari/537.36'\n    }\n    url = 'https://www.baidu.com/s?'\n    wd = input('\u8bf7\u8f93\u5165\u5173\u952e\u5b57\uff1a')\n    param = {\n        \"wd\": wd\n    }\n    resp = requests.get(url=url, params=param, headers=header)\n    pageText = resp.text\n    fileName = wd + '.html'\n    with open(fileName, 'w', encoding='utf-8') as fp:\n        fp.write(pageText)\n    print(fileName, \"\u4fdd\u5b58\u6210\u529f\uff01\")\n\n\ndef BaiduTranslation():\n    header = {\n        'User-Agent': 'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) '\n                      'Chrome/99.0.4844.51 Mobile Safari/537.36 '\n    }\n    url = 'https://fanyi.baidu.com/sug'\n    kw = input(\"\u8bf7\u8f93\u5165\u7ffb\u8bd1\u5185\u5bb9\uff1a\")\n    param = {\n        \"kw\": kw\n    }\n    resp = requests.post(url=url, params=param, headers=header)\n    dicObj = resp.json()\n    fileName = kw + '.txt'\n    with open(fileName, 'w', encoding='utf-8') as fp:\n        json.dump(dicObj, fp=fp)\n    print(fileName, \"\u7ffb\u8bd1\u6210\u529f\uff01\")\n\n\ndef getFilm():\n    header = {\n        'User-Agent': 'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) '\n                      'Chrome/99.0.4844.51 Mobile Safari/537.36 '\n    }\n    url = 'https://movie.douban.com/j/search_subjects?'\n    param = {\n        'type': 'movie',\n        'tag': '\u6700\u65b0',\n        'source': 'index',\n        'page_limit': 50,\n        'page_start': 0\n    }\n    resp = requests.get(url=url, params=param, headers=header)\n    dicObj = resp.json()\n    with open('resp.txt', 'w', encoding='utf-8') as fp:\n        json.dump(obj=dicObj, fp=fp)\n\n\ndef useTree():\n    # from lxml import etree\n    # \u6ca1\u6709parser\u4f1a\u5bfc\u81f4\u4e71\u7801\n    tree = etree.parse('resp.html', parser=etree.HTMLParser(encoding='utf-8'))\n\n    # \u4ece\u6839\u8282\u70b9\u5f00\u59cb\u5b9a\u4f4d\n    title = tree.xpath('/html/head/title')\n    # print(title)\n\n    # // \u8868\u793a\u591a\u4e2a\u5c42\u7ea7\n    div = tree.xpath('/html//div')\n    # print(div)\n\n    # \u901a\u8fc7class\u5b9a\u4e49\u6807\u7b7e\n    person = tree.xpath('//div[@class=\"person\"]')\n    # print(person)\n\n    # \u901a\u8fc7\u7d22\u5f15\u5b9a\u4f4d\uff0c\u7d22\u5f15\u4ece1\u5f00\u59cb\n    p = tree.xpath('//div[@class=\"person\"]//li[2]/text()')\n    # print(p)\n\n\ndef get58HouseInfo():\n    header = {\n        'User-Agent': 'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) '\n                      'Chrome/99.0.4844.51 Mobile Safari/537.36 '\n    }\n    url = 'https://nj.58.com/ershoufang/'\n    resp = requests.get(url=url, headers=header)\n    pageText = resp.text\n    # print(pageText)\n    tree = etree.HTML(pageText)\n    fp = open('./news.html', 'w', encoding='utf-8')\n    fp.write(pageText)\n    # print(tree)\n    liList = tree.xpath('//div[@class=\"title-wrap lines2\"]/span')\n    print(liList)\n    for li in liList:\n        htmlTitle = li.xpath('./text()')[0]\n        print(htmlTitle)\n\n\ndef getPic():\n    # \u8bbe\u7f6e\u8bf7\u6c42\u5934\n    header = {\n        'User-Agent': 'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) '\n                      'Chrome/99.0.4844.51 Mobile Safari/537.36 '\n    }\n    # \u8bbe\u7f6e\u76ee\u6807\u8bbf\u95ee\u5730\u5740\n    url = 'https://www1.visualchina.com/creative-image/zhongguo/'\n    # \u53d1\u9001get\u8bf7\u6c42\uff0c\u5e76\u83b7\u53d6\u54cd\u5e94\n    resp = requests.get(url=url, headers=header)\n    # \u83b7\u53d6\u54cd\u5e94\u4e2d\u7684\u5185\u5bb9\uff08Unicode\u7f16\u7801\uff09\n    pageText = resp.text\n    # \u521b\u5efa\u6587\u4ef6\uff0c\u5e76\u5199\u5165\u6570\u636e\n    with open('./news.html', 'w', encoding='utf-8') as fp:\n        fp.write(pageText)\n\n    # \u5c06\u54cd\u5e94\u5185\u5bb9\u4ee5HTML\u7684\u65b9\u5f0f\u52a0\u8f7d\u5230tree\u4e2d\n    tree = etree.HTML(pageText)\n\n    # # \u83b7\u53d6\u524d\u540e\u6807\u7b7e\u4e4b\u95f4\u7684\u503c\n    # liList = tree.xpath('//figure//span')\n    # for li in liList:\n    #     content = li.xpath('./text()')[0]\n    #     print(content)\n\n    if not os.path.exists('images'):\n        os.mkdir(path='./images')\n    # \u83b7\u53d6\u6807\u7b7e\u5185\u90e8\u7684\u5c5e\u6027\u503c\n    imgList = tree.xpath('//figure//img')\n    for img in imgList:\n        imgName = img.xpath('./@alt')[0] + '.jpg'\n        imgSrc = 'https:' + img.xpath('./@data-src')[0]\n        print(imgSrc)\n        imgData = requests.get(url=imgSrc, headers=header).content\n        imgPath = './images/' + imgName\n        with open(imgPath, 'wb') as fp:\n            fp.write(imgData)\n            print('\u6210\u529f\u4e0b\u8f7d', imgName)\n\n\ndef getFans():\n    header = {\n        'User-Agent': 'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) '\n                      'Chrome/99.0.4844.51 Mobile Safari/537.36 '\n    }\n    url = 'https://space.bilibili.com/23947287/fans/fans'\n    resp = requests.get(url=url, headers=header)\n    pageText = resp.text\n    print(pageText)\n\n    with open('fanslist.html', 'w', encoding='utf-8') as fp:\n        fp.write(pageText)\n    tree = etree.HTML(pageText)\n    li = tree.xpath('//span[@class=\"fans-name\"]')\n    for item in li:\n        name = item.xpath('./text()')\n        print(name)\n\n\ndef loginJWC():\n    headers = {\n        'User-Agent': 'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) '\n                      'Chrome/99.0.4844.51 Mobile Safari/537.36 ',\n    }\n    # \u7b2c\u4e00\u6b21\u8bf7\u6c42\u5730\u5740\n    url = 'http://202.119.81.113:8080'\n\n    # \u83b7\u53d6\u9875\u9762\u8fd4\u56de\u4fe1\u606f\n    resp = requests.get(url=url, headers=headers)\n\n    # \u83b7\u53d6\u9875\u9762\u5185\u5bb9\uff08\u9ed8\u8ba4\u4f7f\u7528Unicode\u7f16\u7801\u65b9\u5f0f\u5c55\u793a\u5185\u5bb9\uff09\n    pageText = resp.text\n\n    # \u83b7\u53d6\u8fd4\u56decookies\uff08\u8fd4\u56de\u503c\u4e3alist&lt;tuple&gt;\uff09\n    cookies = resp.cookies.items()\n    # \u89e3\u6790cookies\uff0c\u5e76\u52a0\u5165\u8bf7\u6c42\u5934\n    ck = cookies[0][0] + '=' + cookies[0][1]\n    print(cookies)\n    headers['Cookie'] = ck\n\n    # \u5c06html\u9875\u9762\u6570\u636e\u52a0\u8f7d\u5230tree\u4e2d\n    tree = etree.HTML(pageText)\n\n    # \u83b7\u53d6\u6807\u7b7e\u5185\u90e8\u7684\u5c5e\u6027\u5bf9\u5e94\u7684\u503c\uff08\u5b57\u7b26\u4e32\u5f62\u5f0f\uff09\n    imgPath = url + tree.xpath('//img[@id=\"SafeCodeImg\"]/@src')[0]\n\n    # \u4ee5\u5b57\u8282\u6d41\u7684\u65b9\u5f0f\u83b7\u53d6\u54cd\u5e94\u6570\u636e\n    imgData = requests.get(url=imgPath, headers=headers).content\n    with open('code.jpg', 'wb') as fp:\n        fp.write(imgData)\n\n    # \u4f7f\u7528ocr\u7834\u89e3\u9a8c\u8bc1\u7801\n    ocr = ddddocr.DdddOcr()\n    randomCode = ocr.classification(imgData)\n    print(randomCode)\n\n    # \u7b2c\u4e8c\u6b21\u8bf7\u6c42\u5730\u5740\n    url = 'http://202.119.81.113:8080/Logon.do?method=logon'\n    # \u8bbe\u7f6epost\u8bf7\u6c42\u7684\u643a\u5e26\u53c2\u6570\n    data = {\n        'USERNAME': '920106840520',\n        'PASSWORD': '123456789qwe',\n        'useDogCode': '',\n        'RANDOMCODE': randomCode\n    }\n    resp = requests.post(url=url, data=data, headers=headers)\n    pageText = resp.text\n\n    with open('./resp.html', 'w', encoding='utf-8') as fp:\n        fp.write(pageText)\n\n\ndef loginACW():\n    headers = {\n        'User-Agent': 'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) '\n                      'Chrome/99.0.4844.51 Mobile Safari/537.36 ',\n    }\n    # \u7b2c\u4e00\u6b21\u8bf7\u6c42\u5730\u5740\n    url = 'https://www.acwing.com/user/account/signin/'\n\n    # \u83b7\u53d6\u9875\u9762\u8fd4\u56de\u4fe1\u606f\n    resp = requests.post(url=url, headers=headers)\n\n    # \u83b7\u53d6\u9875\u9762\u5185\u5bb9\uff08\u9ed8\u8ba4\u4f7f\u7528Unicode\u7f16\u7801\u65b9\u5f0f\u5c55\u793a\u5185\u5bb9\uff09\n    pageText = resp.text\n\n    with open('./acw.html', 'w', encoding='utf-8') as fp:\n        fp.write(pageText)\n\n\n    # \u5c06html\u9875\u9762\u6570\u636e\u52a0\u8f7d\u5230tree\u4e2d\n    tree = etree.HTML(pageText)\n    value = tree.xpath('//input[@name=\"csrfmiddlewaretoken\"]/@value')\n\n    print(value)\n\n    # \u7b2c\u4e8c\u6b21\u8bf7\u6c42\u5730\u5740\n    url = 'http://202.119.81.113:8080/Logon.do?method=logon'\n    # \u8bbe\u7f6epost\u8bf7\u6c42\u7684\u643a\u5e26\u53c2\u6570\n    data = {\n        'USERNAME': '920106840520',\n        'PASSWORD': '123456789qwe',\n        'useDogCode': '',\n        # 'RANDOMCODE': randomCode\n    }\n    resp = requests.post(url=url, data=data, headers=headers)\n    pageText = resp.text\n\n\nif __name__ == '__main__':\n    # getFromBaidu()\n    # BaiduTranslation()\n    # getFilm()\n    # useTree()\n    # get58HouseInfo()\n    # getPic()\n    # getFans()\n    # loginJWC()\n    # testLogin()\n    loginACW()\n</code></pre>"},{"location":"Python/%E8%A3%85%E9%A5%B0%E5%99%A8/","title":"\u88c5\u9970\u5668","text":"<p>[toc]</p>"},{"location":"Python/%E8%A3%85%E9%A5%B0%E5%99%A8/#_2","title":"\u4ec0\u4e48\u662f\u88c5\u9970\u5668\uff1f","text":"<p>\u88c5\u9970\u5668\u5c31\u662f\u4e00\u4e2a\u8bed\u6cd5\u7cd6\u800c\u5df2\u3002</p> <p>\u5728\u6b64\u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u77e5\u9053\u51fd\u6570\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u53ef\u4ee5\u88ab\u653e\u5165\u53c2\u6570\u5217\u8868\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u88ab\u5f53\u4f5c\u8fd4\u56de\u503c\u3002</p>"},{"location":"Python/%E8%A3%85%E9%A5%B0%E5%99%A8/#_3","title":"\u6848\u4f8b","text":"<pre><code>def dec(f):\n    return 1\n\n\n# \u51fd\u6570\u4e0a\u5199@dec\u76f8\u5f53\u4e8e\n# double = dec(double)\n@dec\ndef double(x):\n    return x * 2\n\n\nprint(double)  # \u4e3a\u4ec0\u4e48\u662f1\uff1f\n\n</code></pre> <p>\u770b\u4e00\u4e2a\u66f4\u96be\u7684\u4f8b\u5b50</p> <pre><code>import time\n\n\ndef timeit(f):  # \u63a5\u6536\u4e00\u4e2a\u51fd\u6570\u5bf9\u8c61\n    def wrapper():\n        '''\n        wrapper\u51fd\u6570\u5c31\u662f\u589e\u5f3a\u7248\u7684\u539f\u51fd\u6570\n        wrapper\u51fd\u6570\u7684\u8fd4\u56de\u503c\u5fc5\u987b\u548c\u539f\u51fd\u6570\u4e2d\u4e00\u81f4\n        wrapper\u51fd\u6570\u8981\u6709\u8c03\u7528\u539f\u51fd\u6570\u7684\u903b\u8f91\n        '''\n        start_time = time.time()\n        ret = f()\n        end_time = time.time()\n        print(\"run time:\" + str(end_time - start_time))\n        print(\"ret=\" + str(ret))\n        return ret\n    return wrapper  # \u8fd4\u56de\u4e00\u4e2a\u51fd\u6570\u5bf9\u8c61\n\n\n@timeit\ndef my_func():\n    x = 0\n    for i in range(100000):\n        x += i\n    return x\n\n\nmy_func()\n\n</code></pre>"},{"location":"Web%E5%AE%9E%E6%88%98%E7%BB%8F%E9%AA%8C/JWT%E7%9A%84%E5%9D%8F%E5%A4%84/","title":"JWT\u7684\u574f\u5904","text":""},{"location":"Web%E5%AE%9E%E6%88%98%E7%BB%8F%E9%AA%8C/JWT%E7%9A%84%E5%9D%8F%E5%A4%84/#_1","title":"\u53c2\u8003\u6587\u7ae0","text":"<p>https://mp.weixin.qq.com/s/7F_zrBnbKVktrIo2PSxgHw</p>"},{"location":"Web%E5%AE%9E%E6%88%98%E7%BB%8F%E9%AA%8C/JWT%E7%9A%84%E5%9D%8F%E5%A4%84/#_2","title":"\u524d\u7f6e\u77e5\u8bc6","text":"<ol> <li>\u65e0\u72b6\u6001JWT\uff1aJWT\u4e2d\u5b58\u7528\u6237\u4fe1\u606f\uff0cSession\u6570\u636e\u76f4\u63a5\u7f16\u7801\u5230JWT\u4e2d\u3002</li> <li>\u6709\u72b6\u6001JWT\uff1aJWT\u4e2d\u901a\u5e38\u5b58Session\u5f15\u7528\uff08\u6216SessionId\uff09\uff0cSession\u6570\u636e\u5b58\u653e\u5728\u670d\u52a1\u7aef\u3002</li> </ol>"},{"location":"Web%E5%AE%9E%E6%88%98%E7%BB%8F%E9%AA%8C/JWT%E7%9A%84%E5%9D%8F%E5%A4%84/#jwt_1","title":"JWT\u7684\u4f18\u52bf\u5e76\u4e0d\u660e\u663e","text":"<ol> <li>JWT\u6613\u4e8e\u6c34\u5e73\u62d3\u5c55\uff1a\u65e0\u72b6\u6001\u7684JWT\u624d\u6613\u4e8e\u6c34\u5e73\u62d3\u5c55\u3002\u56e0\u4e3a\u65b0\u589e\u670d\u52a1\u5668\u65f6\uff0c\u670d\u52a1\u5668\u4e0d\u4f1a\u5b58\u653e\u4efb\u4f55JWT Token\uff1b\u5bf9\u4e8eSession\u673a\u5236\uff0c\u5982\u679c\u65b0\u589e\u670d\u52a1\u5668\uff0c\u9700\u8981\u4fdd\u8bc1\u5728\u8fd9\u4e2a\u670d\u52a1\u5668\u4e2d\u6709\u7528\u6237Session\u4fe1\u606f\u624d\u884c\u3002</li> </ol> <p>\u7136\u800c\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e2aRedis\u5b58\u653e\u4e00\u4e2a\u670d\u52a1\u5668\u96c6\u7fa4\u7528\u5230\u7684Session\u4fe1\u606f\u3002\u5e76\u4e14\u7edd\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u540e\u7aef\u9879\u76ee\u90fd\u662f\u5355\u4f53\u7684\uff0c\u7528\u6237\u91cf\u5f88\u5c0f\u3002</p> <ol> <li></li> </ol>"},{"location":"Web%E5%AE%9E%E6%88%98%E7%BB%8F%E9%AA%8C/JWT%E7%9A%84%E5%9D%8F%E5%A4%84/#jwt_2","title":"JWT\u7684\u7f3a\u70b9","text":"<ol> <li>\u65e0\u6cd5\u76f4\u63a5\u5e9f\u5f03\uff0c\u5f53\u7136\u6211\u4eec\u53ef\u4ee5\u5728Redis\u4e2d\u5b58\u653etoken\u8fbe\u5230\u8fd9\u79cd\u6548\u679c\uff0c\u4f46\u662f\u8fd9\u548c\u666e\u901a\u7684Session\u673a\u5236\u6709\u4ec0\u4e48\u533a\u522b\u5462\uff1f</li> <li>\u65e0\u6cd5\u76f4\u63a5\u7eed\u7b7e\u3002\u4f20\u7edf\u7684Cookie\u7eed\u7b7e\u65b9\u6848\u51e0\u4e4e\u6240\u6709\u6846\u67b6\u90fd\u81ea\u5e26\uff0c\u800cJWT\u7eed\u7b7e\u9700\u8981\u901a\u8fc7\u9ebb\u70e6\u7684\u64cd\u4f5c\uff08\u6bd4\u5982OAuth2.0\u7684\u53cctoken\u673a\u5236\uff09\u3002</li> </ol>"},{"location":"Web%E5%AE%9E%E6%88%98%E7%BB%8F%E9%AA%8C/JWT%E7%9A%84%E5%9D%8F%E5%A4%84/#jwt_3","title":"JWT\u7684\u9002\u7528\u573a\u666f","text":"<ol> <li>\u7ed9\u7528\u6237\u53d1\u4e00\u5c01\u90ae\u4ef6\u7528\u4e8e\u6fc0\u6d3b\u8d26\u53f7\uff0c30\u5206\u949f\u5185\u6709\u6548\u3002</li> </ol>"},{"location":"Web%E5%AE%9E%E6%88%98%E7%BB%8F%E9%AA%8C/OAuth2.0-%E5%8F%8Ctoken%E6%9C%BA%E5%88%B6/","title":"OAuth2.0-\u53cctoken\u673a\u5236","text":""},{"location":"Web%E5%AE%9E%E6%88%98%E7%BB%8F%E9%AA%8C/OAuth2.0-%E5%8F%8Ctoken%E6%9C%BA%E5%88%B6/#token","title":"\u53cctoken\u662f\u4ec0\u4e48","text":"<p>\u7b2c\u4e00\u6b21\u767b\u9646\u670d\u52a1\u5668\u540e\uff0c\u4f1a\u7ed9\u7528\u6237\u8fd4\u56de<code>access_token</code>\u548c<code>refresh_token</code>\u3002<code>access_token</code>\u7528\u4e8e\u8bbf\u95ee\u8d44\u6e90\uff0c\u6709\u6548\u65f6\u957f\u77ed\uff0c\u6bd4\u59825\u5206\u949f\uff1b<code>refresh_token</code>\u7528\u4e8e\u83b7\u53d6\u6700\u65b0\u7684<code>access_token</code>\uff0c\u6709\u6548\u65f6\u957f\u4e45\uff0c\u6bd4\u59827\u5929\u3002</p>"},{"location":"Web%E5%AE%9E%E6%88%98%E7%BB%8F%E9%AA%8C/OAuth2.0-%E5%8F%8Ctoken%E6%9C%BA%E5%88%B6/#token_1","title":"\u4e3a\u4ec0\u4e48\u8981\u53cctoken","text":"<ul> <li>\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u7528\u4e00\u4e2a\u6709\u6548\u65f6\u957f5\u5206\u949f\u7684access_token\u53bb\u8bbf\u95ee\u670d\u52a1\u5417\uff1f\u5f53\u7136\u53ef\u4ee5\uff0c\u4f46\u662f\u574f\u5904\u662f\u7528\u6237\u5728\u4f7f\u7528\u8f6f\u4ef6\u7684\u8fc7\u7a0b\u4e2d\uff0c\u521a\u6253\u5f00\u51e0\u4e2a\u9875\u9762\uff0ctoken\u76845\u5206\u949f\u65f6\u6548\u5c31\u8fc7\u671f\u4e86\uff0c\u8fd9\u6837\u7528\u6237\u53c8\u5f97\u91cd\u65b0\u767b\u9646\u4e00\u6b21\uff0c\u975e\u5e38\u6298\u78e8\uff01\uff01\uff01</li> <li>\u90a3\u4e48\u53ef\u4ee5\u628aaccess_token\u7684\u6709\u6548\u65f6\u957f\u8bbe\u7f6e\u4e3a7\u5929\u5417\uff1f\u5f53\u7136\u53ef\u4ee5\uff0c\u4f46\u662f\u8fd9\u6837\u5c31\u4e0d\u5b89\u5168\u3002\u5982\u679caccess_token\u6cc4\u6f0f\uff0c\u4e0d\u6cd5\u5206\u5b50\u5c31\u80fd\u5229\u7528access_token\u83b7\u53d6\u6539\u7528\u6237\u7684\u4fe1\u606f\uff01</li> </ul> <p>\u56e0\u6b64\u5f15\u5165\u4e86\u53cctoken\u3002\u9996\u5148\u6211\u4eec\u8981\u9ed8\u8ba4\u4e00\u4e2a\u524d\u7f6e\u6761\u4ef6\uff0c\u7ecf\u5e38\u4f7f\u7528\u7684token\u5bb9\u6613\u6cc4\u6f0f\u3002</p> <p>\u5047\u8bbe\u7528\u6237\u5e73\u5747\u6bcf5\u5206\u949f\u4f1a\u5411\u670d\u52a1\u5668\u53d1\u8d7710\u6b21\u8bf7\u6c42\uff0c\u90a3\u4e48access_token\u5c31\u4f1a\u88ab\u4f20\u8f9310\u6b21\uff0c\u800crefresh_token\u53ea\u4f1a\u88ab\u4f20\u8f931\u6b21\uff08\u7528\u4e8e\u66f4\u65b0access_token\uff0c\u4e0d\u8ba1\u6700\u521d\u767b\u9646\u65f6\u4f20\u8f93\u7684access_token\uff09\u3002\u56e0\u6b64\u6211\u4eec\u8ba4\u4e3arefresh_token\u66f4\u5b89\u5168\u3002</p> <ul> <li>\u6709\u4eba\u5f00\u59cb\u729f\u4e86\uff0c\u201c\u5982\u679caccess_token\u4e22\u4e86\uff0c\u5c82\u4e0d\u662f\u574f\u4eba\u57285\u5206\u949f\u5185\u5c31\u80fd\u975e\u6cd5\u83b7\u53d6\u5230\u7528\u6237\u4fe1\u606f\uff1f\u201d</li> </ul> <p>\u786e\u5b9e\uff0c\u4f46\u662f\u63a7\u5236\u57285\u5206\u949f\u5185\u88ab\u975e\u6cd5\u83b7\u53d6\u6570\u636e\u603b\u4f1a\u66f4\u5b89\u5168\u4e00\u70b9\u5440\uff01</p> <ul> <li>\u8fd8\u6709\u4eba\u4e5f\u5728\u729f\uff0c\u201c\u5982\u679crefresh_token\u4e22\u4e86\uff0c\u5c82\u4e0d\u662f\u574f\u4eba\u57287\u5929\u5185\u90fd\u80fd\u901a\u8fc7refresh_token\u83b7\u53d6access_token\uff0c\u4ece\u800c\u975e\u6cd5\u83b7\u53d6\u7528\u6237\u6570\u636e\u5417\uff1f\u201d</li> </ul> <p>\u4f60\u8bf4\u7684\u4e5f\u5bf9\uff0c\u4f46\u662f\u8bb0\u4f4f\u6211\u4eec\u7684\u5047\u8bbe\uff1a\u201crefresh_token\u6bd4access_token\u66f4\u5b89\u5168\u201d\uff0c\u56e0\u4e3arefresh_token\u4f20\u8f93\u7684\u6b21\u6570\u8fdc\u8fdc\u4f4e\u4e8eaccess_token\u4f20\u8f93\u7684\u6b21\u6570\u3002\u5982\u679crefresh_token\u4e5f\u4e22\u4e86\uff0c\u90a3\u5c31\u8036\u7a23\u4e5f\u963b\u6b62\u4e0d\u4e86\u9ed1\u5ba2\u4fb5\u5165\u4f60\u7684\u6570\u636e\uff01</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/","title":"Java\u5f02\u5e38\u9762\u8bd5\u9898","text":"<p>\u76ee\u5f55</p> <p>Java\u5f02\u5e38\u67b6\u6784\u4e0e\u5f02\u5e38\u5173\u952e\u5b57</p> <p>Java\u5f02\u5e38\u7b80\u4ecb</p> <p>Java\u5f02\u5e38\u67b6\u6784</p> <p>1. Throwable</p> <p>2. Error\uff08\u9519\u8bef\uff09</p> <p>3. Exception\uff08\u5f02\u5e38\uff09</p> <p>\u8fd0\u884c\u65f6\u5f02\u5e38</p> <p>\u7f16\u8bd1\u65f6\u5f02\u5e38</p> <p>4. \u53d7\u68c0\u5f02\u5e38\u4e0e\u975e\u53d7\u68c0\u5f02\u5e38</p> <p>\u53d7\u68c0\u5f02\u5e38</p> <p>\u975e\u53d7\u68c0\u5f02\u5e38</p> <p>Java\u5f02\u5e38\u5173\u952e\u5b57</p> <p>Java\u5f02\u5e38\u5904\u7406</p> <p>\u58f0\u660e\u5f02\u5e38</p> <p>\u629b\u51fa\u5f02\u5e38</p> <p>\u6355\u83b7\u5f02\u5e38</p> <p>\u5982\u4f55\u9009\u62e9\u5f02\u5e38\u7c7b\u578b</p> <p>\u5e38\u89c1\u5f02\u5e38\u5904\u7406\u65b9\u5f0f</p> <p>\u76f4\u63a5\u629b\u51fa\u5f02\u5e38</p> <p>\u5c01\u88c5\u5f02\u5e38\u518d\u629b\u51fa</p> <p>\u6355\u83b7\u5f02\u5e38</p> <p>\u81ea\u5b9a\u4e49\u5f02\u5e38</p> <p>try-catch-finally</p> <p>try-with-resource</p> <p>Java\u5f02\u5e38\u5e38\u89c1\u9762\u8bd5\u9898</p> <p>1. Error \u548c Exception \u533a\u522b\u662f\u4ec0\u4e48\uff1f</p> <p>2. \u8fd0\u884c\u65f6\u5f02\u5e38\u548c\u4e00\u822c\u5f02\u5e38(\u53d7\u68c0\u5f02\u5e38)\u533a\u522b\u662f\u4ec0\u4e48\uff1f</p> <p>3. JVM \u662f\u5982\u4f55\u5904\u7406\u5f02\u5e38\u7684\uff1f</p> <p>4. throw \u548c throws \u7684\u533a\u522b\u662f\u4ec0\u4e48\uff1f</p> <p>5. final\u3001finally\u3001finalize \u6709\u4ec0\u4e48\u533a\u522b\uff1f</p> <p>6. NoClassDefFoundError \u548c ClassNotFoundException \u533a\u522b\uff1f</p> <p>7. try-catch-finally \u4e2d\u54ea\u4e2a\u90e8\u5206\u53ef\u4ee5\u7701\u7565\uff1f</p> <p>8. try-catch-finally \u4e2d\uff0c\u5982\u679c catch \u4e2d return \u4e86\uff0cfinally \u8fd8\u4f1a\u6267\u884c\u5417\uff1f</p> <p>9. \u7c7b ExampleA \u7ee7\u627f Exception\uff0c\u7c7b ExampleB \u7ee7\u627fExampleA\u3002</p> <p>10. \u5e38\u89c1\u7684 RuntimeException \u6709\u54ea\u4e9b\uff1f</p> <p>11. Java\u5e38\u89c1\u5f02\u5e38\u6709\u54ea\u4e9b</p> <p>Java\u5f02\u5e38\u5904\u7406\u6700\u4f73\u5b9e\u8df5</p> <p>1. \u5728 finally \u5757\u4e2d\u6e05\u7406\u8d44\u6e90\u6216\u8005\u4f7f\u7528 try-with-resource \u8bed\u53e5</p> <p>1.1 \u4f7f\u7528 finally \u4ee3\u7801\u5757</p> <p>1.2 Java 7 \u7684 try-with-resource \u8bed\u6cd5</p> <p>2. \u4f18\u5148\u660e\u786e\u7684\u5f02\u5e38</p> <p>3. \u5bf9\u5f02\u5e38\u8fdb\u884c\u6587\u6863\u8bf4\u660e</p> <p>4. \u4f7f\u7528\u63cf\u8ff0\u6027\u6d88\u606f\u629b\u51fa\u5f02\u5e38</p> <p>5. \u4f18\u5148\u6355\u83b7\u6700\u5177\u4f53\u7684\u5f02\u5e38</p> <p>6. \u4e0d\u8981\u6355\u83b7 Throwable \u7c7b</p> <p>7. \u4e0d\u8981\u5ffd\u7565\u5f02\u5e38</p> <p>8. \u4e0d\u8981\u8bb0\u5f55\u5e76\u629b\u51fa\u5f02\u5e38</p> <p>9. \u5305\u88c5\u5f02\u5e38\u65f6\u4e0d\u8981\u629b\u5f03\u539f\u59cb\u7684\u5f02\u5e38</p> <p>10. \u4e0d\u8981\u4f7f\u7528\u5f02\u5e38\u63a7\u5236\u7a0b\u5e8f\u7684\u6d41\u7a0b</p> <p>11. \u4f7f\u7528\u6807\u51c6\u5f02\u5e38</p> <p>12. \u5f02\u5e38\u4f1a\u5f71\u54cd\u6027\u80fd</p> <p>13. \u603b\u7ed3</p> <p>\u5f02\u5e38\u5904\u7406-\u963f\u91cc\u5df4\u5df4Java\u5f00\u53d1\u624b\u518c</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#java","title":"Java\u5f02\u5e38\u67b6\u6784\u4e0e\u5f02\u5e38\u5173\u952e\u5b57","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#java_1","title":"Java\u5f02\u5e38\u7b80\u4ecb","text":"<p>Java\u5f02\u5e38\u662fJava\u63d0\u4f9b\u7684\u4e00\u79cd\u8bc6\u522b\u53ca\u54cd\u5e94\u9519\u8bef\u7684\u4e00\u81f4\u6027\u673a\u5236\u3002 Java\u5f02\u5e38\u673a\u5236\u53ef\u4ee5\u4f7f\u7a0b\u5e8f\u4e2d\u5f02\u5e38\u5904\u7406\u4ee3\u7801\u548c\u6b63\u5e38\u4e1a\u52a1\u4ee3\u7801\u5206\u79bb\uff0c\u4fdd\u8bc1\u7a0b\u5e8f\u4ee3\u7801\u66f4\u52a0\u4f18\u96c5\uff0c\u5e76\u63d0\u9ad8\u7a0b\u5e8f\u5065\u58ee\u6027\u3002\u5728\u6709\u6548\u4f7f\u7528\u5f02\u5e38\u7684\u60c5\u51b5\u4e0b\uff0c\u5f02\u5e38\u80fd\u6e05\u6670\u7684\u56de\u7b54what, where, why\u8fd93\u4e2a\u95ee\u9898\uff1a\u5f02\u5e38\u7c7b\u578b\u56de\u7b54\u4e86\u201c\u4ec0\u4e48\u201d\u88ab\u629b\u51fa\uff0c\u5f02\u5e38\u5806\u6808\u8ddf\u8e2a\u56de\u7b54\u4e86\u201c\u5728\u54ea\u201d\u629b\u51fa\uff0c\u5f02\u5e38\u4fe1\u606f\u56de\u7b54\u4e86\u201c\u4e3a\u4ec0\u4e48\u201d\u4f1a\u629b\u51fa\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#java_2","title":"Java\u5f02\u5e38\u67b6\u6784","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#1-throwable","title":"1. Throwable","text":"<p>Throwable \u662f Java \u8bed\u8a00\u4e2d\u6240\u6709\u9519\u8bef\u4e0e\u5f02\u5e38\u7684\u8d85\u7c7b\u3002</p> <p>Throwable \u5305\u542b\u4e24\u4e2a\u5b50\u7c7b\uff1aError\uff08\u9519\u8bef\uff09\u548c Exception\uff08\u5f02\u5e38\uff09\uff0c\u5b83\u4eec\u901a\u5e38\u7528\u4e8e\u6307\u793a\u53d1\u751f\u4e86\u5f02\u5e38\u60c5\u51b5\u3002</p> <p>Throwable \u5305\u542b\u4e86\u5176\u7ebf\u7a0b\u521b\u5efa\u65f6\u7ebf\u7a0b\u6267\u884c\u5806\u6808\u7684\u5feb\u7167\uff0c\u5b83\u63d0\u4f9b\u4e86 printStackTrace() \u7b49\u63a5\u53e3\u7528\u4e8e\u83b7\u53d6\u5806\u6808\u8ddf\u8e2a\u6570\u636e\u7b49\u4fe1\u606f\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#2-error","title":"2. Error\uff08\u9519\u8bef\uff09","text":"<p>\u5b9a\u4e49\uff1aError \u7c7b\u53ca\u5176\u5b50\u7c7b\u3002\u7a0b\u5e8f\u4e2d\u65e0\u6cd5\u5904\u7406\u7684\u9519\u8bef\uff0c\u8868\u793a\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u4e2d\u51fa\u73b0\u4e86\u4e25\u91cd\u7684\u9519\u8bef\u3002</p> <p>\u7279\u70b9\uff1a\u6b64\u7c7b\u9519\u8bef\u4e00\u822c\u8868\u793a\u4ee3\u7801\u8fd0\u884c\u65f6 JVM \u51fa\u73b0\u95ee\u9898\u3002\u901a\u5e38\u6709 Virtual MachineError\uff08\u865a\u62df\u673a\u8fd0\u884c\u9519\u8bef\uff09\u3001NoClassDefFoundError\uff08\u7c7b\u5b9a\u4e49\u9519\u8bef\uff09\u7b49\u3002\u6bd4\u5982 OutOfMemoryError\uff1a\u5185\u5b58\u4e0d\u8db3\u9519\u8bef\uff1bStackOverflowError\uff1a\u6808\u6ea2\u51fa\u9519\u8bef\u3002\u6b64\u7c7b\u9519\u8bef\u53d1\u751f\u65f6\uff0cJVM \u5c06\u7ec8\u6b62\u7ebf\u7a0b\u3002</p> <p>\u8fd9\u4e9b\u9519\u8bef\u662f\u4e0d\u53d7\u68c0\u5f02\u5e38\uff0c\u975e\u4ee3\u7801\u6027\u9519\u8bef\u3002\u56e0\u6b64\uff0c\u5f53\u6b64\u7c7b\u9519\u8bef\u53d1\u751f\u65f6\uff0c\u5e94\u7528\u7a0b\u5e8f\u4e0d\u5e94\u8be5\u53bb\u5904\u7406\u6b64\u7c7b\u9519\u8bef\u3002\u6309\u7167Java\u60ef\u4f8b\uff0c\u6211\u4eec\u662f\u4e0d\u5e94\u8be5\u5b9e\u73b0\u4efb\u4f55\u65b0\u7684Error\u5b50\u7c7b\u7684\uff01</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#3-exception","title":"3. Exception\uff08\u5f02\u5e38\uff09","text":"<p>\u7a0b\u5e8f\u672c\u8eab\u53ef\u4ee5\u6355\u83b7\u5e76\u4e14\u53ef\u4ee5\u5904\u7406\u7684\u5f02\u5e38\u3002Exception \u8fd9\u79cd\u5f02\u5e38\u53c8\u5206\u4e3a\u4e24\u7c7b\uff1a\u8fd0\u884c\u65f6\u5f02\u5e38\u548c\u7f16\u8bd1\u65f6\u5f02\u5e38\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#_1","title":"\u8fd0\u884c\u65f6\u5f02\u5e38","text":"<p>\u5b9a\u4e49\uff1aRuntimeException \u7c7b\u53ca\u5176\u5b50\u7c7b\uff0c\u8868\u793a JVM \u5728\u8fd0\u884c\u671f\u95f4\u53ef\u80fd\u51fa\u73b0\u7684\u5f02\u5e38\u3002</p> <p>\u7279\u70b9\uff1aJava \u7f16\u8bd1\u5668\u4e0d\u4f1a\u68c0\u67e5\u5b83\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53\u7a0b\u5e8f\u4e2d\u53ef\u80fd\u51fa\u73b0\u8fd9\u7c7b\u5f02\u5e38\u65f6\uff0c\u5018\u82e5\u65e2\"\u6ca1\u6709\u901a\u8fc7throws\u58f0\u660e\u629b\u51fa\u5b83\"\uff0c\u4e5f\"\u6ca1\u6709\u7528try-catch\u8bed\u53e5\u6355\u83b7\u5b83\"\uff0c\u8fd8\u662f\u4f1a\u7f16\u8bd1\u901a\u8fc7\u3002\u6bd4\u5982NullPointerException\u7a7a\u6307\u9488\u5f02\u5e38\u3001ArrayIndexOutBoundException\u6570\u7ec4\u4e0b\u6807\u8d8a\u754c\u5f02\u5e38\u3001ClassCastException\u7c7b\u578b\u8f6c\u6362\u5f02\u5e38\u3001ArithmeticExecption\u7b97\u672f\u5f02\u5e38\u3002\u6b64\u7c7b\u5f02\u5e38\u5c5e\u4e8e\u4e0d\u53d7\u68c0\u5f02\u5e38\uff0c\u4e00\u822c\u662f\u7531\u7a0b\u5e8f\u903b\u8f91\u9519\u8bef\u5f15\u8d77\u7684\uff0c\u5728\u7a0b\u5e8f\u4e2d\u53ef\u4ee5\u9009\u62e9\u6355\u83b7\u5904\u7406\uff0c\u4e5f\u53ef\u4ee5\u4e0d\u5904\u7406\u3002\u867d\u7136 Java \u7f16\u8bd1\u5668\u4e0d\u4f1a\u68c0\u67e5\u8fd0\u884c\u65f6\u5f02\u5e38\uff0c\u4f46\u662f\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7 throws \u8fdb\u884c\u58f0\u660e\u629b\u51fa\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7 try-catch \u5bf9\u5b83\u8fdb\u884c\u6355\u83b7\u5904\u7406\u3002\u5982\u679c\u4ea7\u751f\u8fd0\u884c\u65f6\u5f02\u5e38\uff0c\u5219\u9700\u8981\u901a\u8fc7\u4fee\u6539\u4ee3\u7801\u6765\u8fdb\u884c\u907f\u514d\u3002\u4f8b\u5982\uff0c\u82e5\u4f1a\u53d1\u751f\u9664\u6570\u4e3a\u96f6\u7684\u60c5\u51b5\uff0c\u5219\u9700\u8981\u901a\u8fc7\u4ee3\u7801\u907f\u514d\u8be5\u60c5\u51b5\u7684\u53d1\u751f\uff01</p> <p>RuntimeException \u5f02\u5e38\u4f1a\u7531 Java \u865a\u62df\u673a\u81ea\u52a8\u629b\u51fa\u5e76\u81ea\u52a8\u6355\u83b7\uff08\u5c31\u7b97\u6211\u4eec\u6ca1\u5199\u5f02\u5e38\u6355\u83b7\u8bed\u53e5\u8fd0\u884c\u65f6\u4e5f\u4f1a\u629b\u51fa\u9519\u8bef\uff01\uff01\uff09\uff0c\u6b64\u7c7b\u5f02\u5e38\u7684\u51fa\u73b0\u7edd\u5927\u6570\u60c5\u51b5\u662f\u4ee3\u7801\u672c\u8eab\u6709\u95ee\u9898\u5e94\u8be5\u4ece\u903b\u8f91\u4e0a\u53bb\u89e3\u51b3\u5e76\u6539\u8fdb\u4ee3\u7801\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#_2","title":"\u7f16\u8bd1\u65f6\u5f02\u5e38","text":"<p>\u5b9a\u4e49: Exception \u4e2d\u9664 RuntimeException \u53ca\u5176\u5b50\u7c7b\u4e4b\u5916\u7684\u5f02\u5e38\u3002</p> <p>\u7279\u70b9: Java \u7f16\u8bd1\u5668\u4f1a\u68c0\u67e5\u5b83\u3002\u5982\u679c\u7a0b\u5e8f\u4e2d\u51fa\u73b0\u6b64\u7c7b\u5f02\u5e38\uff0c\u6bd4\u5982 ClassNotFoundException\uff08\u6ca1\u6709\u627e\u5230\u6307\u5b9a\u7684\u7c7b\u5f02\u5e38\uff09\uff0cIOException\uff08IO\u6d41\u5f02\u5e38\uff09\uff0c\u8981\u4e48\u901a\u8fc7throws\u8fdb\u884c\u58f0\u660e\u629b\u51fa\uff0c\u8981\u4e48\u901a\u8fc7try-catch\u8fdb\u884c\u6355\u83b7\u5904\u7406\uff0c\u5426\u5219\u4e0d\u80fd\u901a\u8fc7\u7f16\u8bd1\u3002\u5728\u7a0b\u5e8f\u4e2d\uff0c\u901a\u5e38\u4e0d\u4f1a\u81ea\u5b9a\u4e49\u8be5\u7c7b\u5f02\u5e38\uff0c\u800c\u662f\u76f4\u63a5\u4f7f\u7528\u7cfb\u7edf\u63d0\u4f9b\u7684\u5f02\u5e38\u7c7b\u3002\u8be5\u5f02\u5e38\u6211\u4eec\u5fc5\u987b\u624b\u52a8\u5728\u4ee3\u7801\u91cc\u6dfb\u52a0\u6355\u83b7\u8bed\u53e5\u6765\u5904\u7406\u8be5\u5f02\u5e38\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#4","title":"4. \u53d7\u68c0\u5f02\u5e38\u4e0e\u975e\u53d7\u68c0\u5f02\u5e38","text":"<p>Java \u7684\u6240\u6709\u5f02\u5e38\u53ef\u4ee5\u5206\u4e3a\u53d7\u68c0\u5f02\u5e38\uff08checked exception\uff09\u548c\u975e\u53d7\u68c0\u5f02\u5e38\uff08unchecked exception\uff09\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#_3","title":"\u53d7\u68c0\u5f02\u5e38","text":"<p>\u7f16\u8bd1\u5668\u8981\u6c42\u5fc5\u987b\u5904\u7406\u7684\u5f02\u5e38\u3002\u6b63\u786e\u7684\u7a0b\u5e8f\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u7ecf\u5e38\u5bb9\u6613\u51fa\u73b0\u7684\u3001\u7b26\u5408\u9884\u671f\u7684\u5f02\u5e38\u60c5\u51b5\u3002\u4e00\u65e6\u53d1\u751f\u6b64\u7c7b\u5f02\u5e38\uff0c\u5c31\u5fc5\u987b\u91c7\u7528\u67d0\u79cd\u65b9\u5f0f\u8fdb\u884c\u5904\u7406\u3002\u9664 RuntimeException \u53ca\u5176\u5b50\u7c7b\u5916\uff0c\u5176\u4ed6\u7684 Exception \u5f02\u5e38\u90fd\u5c5e\u4e8e\u53d7\u68c0\u5f02\u5e38\u3002\u7f16\u8bd1\u5668\u4f1a\u68c0\u67e5\u6b64\u7c7b\u5f02\u5e38\uff0c\u4e5f\u5c31\u662f\u8bf4\u5f53\u7f16\u8bd1\u5668\u68c0\u67e5\u5230\u5e94\u7528\u4e2d\u7684\u67d0\u5904\u53ef\u80fd\u4f1a\u6b64\u7c7b\u5f02\u5e38\u65f6\uff0c\u5c06\u4f1a\u63d0\u793a\u4f60\u5904\u7406\u672c\u5f02\u5e38\u2014\u2014\u8981\u4e48\u4f7f\u7528try-catch\u6355\u83b7\uff0c\u8981\u4e48\u4f7f\u7528\u65b9\u6cd5\u7b7e\u540d\u4e2d\u7528 throws \u5173\u952e\u5b57\u629b\u51fa\uff0c\u5426\u5219\u7f16\u8bd1\u4e0d\u901a\u8fc7\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#_4","title":"\u975e\u53d7\u68c0\u5f02\u5e38","text":"<p>\u7f16\u8bd1\u5668\u4e0d\u4f1a\u8fdb\u884c\u68c0\u67e5\u5e76\u4e14\u4e0d\u8981\u6c42\u5fc5\u987b\u5904\u7406\u7684\u5f02\u5e38\uff0c\u4e5f\u5c31\u8bf4\u5f53\u7a0b\u5e8f\u4e2d\u51fa\u73b0\u6b64\u7c7b\u5f02\u5e38\u65f6\uff0c\u5373\u4f7f\u6211\u4eec\u6ca1\u6709try-catch\u6355\u83b7\u5b83\uff0c\u4e5f\u6ca1\u6709\u4f7f\u7528throws\u629b\u51fa\u8be5\u5f02\u5e38\uff0c\u7f16\u8bd1\u4e5f\u4f1a\u6b63\u5e38\u901a\u8fc7\u3002\u8be5\u7c7b\u5f02\u5e38\u5305\u62ec\u8fd0\u884c\u65f6\u5f02\u5e38\uff08RuntimeException\u6781\u5176\u5b50\u7c7b\uff09\u548c\u9519\u8bef\uff08Error\uff09\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#java_3","title":"Java\u5f02\u5e38\u5173\u952e\u5b57","text":"<p>\u2022 try \u2013 \u7528\u4e8e\u76d1\u542c\u3002\u5c06\u8981\u88ab\u76d1\u542c\u7684\u4ee3\u7801(\u53ef\u80fd\u629b\u51fa\u5f02\u5e38\u7684\u4ee3\u7801)\u653e\u5728try\u8bed\u53e5\u5757\u4e4b\u5185\uff0c\u5f53try\u8bed\u53e5\u5757\u5185\u53d1\u751f\u5f02\u5e38\u65f6\uff0c\u5f02\u5e38\u5c31\u88ab\u629b\u51fa\u3002 \u2022 catch \u2013 \u7528\u4e8e\u6355\u83b7\u5f02\u5e38\u3002catch\u7528\u6765\u6355\u83b7try\u8bed\u53e5\u5757\u4e2d\u53d1\u751f\u7684\u5f02\u5e38\u3002 \u2022 finally \u2013 finally\u8bed\u53e5\u5757\u603b\u662f\u4f1a\u88ab\u6267\u884c\u3002\u5b83\u4e3b\u8981\u7528\u4e8e\u56de\u6536\u5728try\u5757\u91cc\u6253\u5f00\u7684\u7269\u529b\u8d44\u6e90(\u5982\u6570\u636e\u5e93\u8fde\u63a5\u3001\u7f51\u7edc\u8fde\u63a5\u548c\u78c1\u76d8\u6587\u4ef6)\u3002\u53ea\u6709finally\u5757\uff0c\u6267\u884c\u5b8c\u6210\u4e4b\u540e\uff0c\u624d\u4f1a\u56de\u6765\u6267\u884ctry\u6216\u8005catch\u5757\u4e2d\u7684return\u6216\u8005throw\u8bed\u53e5\uff0c\u5982\u679cfinally\u4e2d\u4f7f\u7528\u4e86return\u6216\u8005throw\u7b49\u7ec8\u6b62\u65b9\u6cd5\u7684\u8bed\u53e5\uff0c\u5219\u5c31\u4e0d\u4f1a\u8df3\u56de\u6267\u884c\uff0c\u76f4\u63a5\u505c\u6b62\u3002 \u2022 throw \u2013 \u7528\u4e8e\u629b\u51fa\u5f02\u5e38\u3002 \u2022 throws \u2013 \u7528\u5728\u65b9\u6cd5\u7b7e\u540d\u4e2d\uff0c\u7528\u4e8e\u58f0\u660e\u8be5\u65b9\u6cd5\u53ef\u80fd\u629b\u51fa\u7684\u5f02\u5e38\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#java_4","title":"Java\u5f02\u5e38\u5904\u7406","text":"<p>Java \u901a\u8fc7\u9762\u5411\u5bf9\u8c61\u7684\u65b9\u6cd5\u8fdb\u884c\u5f02\u5e38\u5904\u7406\uff0c\u4e00\u65e6\u65b9\u6cd5\u629b\u51fa\u5f02\u5e38\uff0c\u7cfb\u7edf\u81ea\u52a8\u6839\u636e\u8be5\u5f02\u5e38\u5bf9\u8c61\u5bfb\u627e\u5408\u9002\u5f02\u5e38\u5904\u7406\u5668\uff08Exception Handler\uff09\u6765\u5904\u7406\u8be5\u5f02\u5e38\uff0c\u628a\u5404\u79cd\u4e0d\u540c\u7684\u5f02\u5e38\u8fdb\u884c\u5206\u7c7b\uff0c\u5e76\u63d0\u4f9b\u4e86\u826f\u597d\u7684\u63a5\u53e3\u3002\u5728 Java \u4e2d\uff0c\u6bcf\u4e2a\u5f02\u5e38\u90fd\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5b83\u662f Throwable \u7c7b\u6216\u5176\u5b50\u7c7b\u7684\u5b9e\u4f8b\u3002\u5f53\u4e00\u4e2a\u65b9\u6cd5\u51fa\u73b0\u5f02\u5e38\u540e\u4fbf\u629b\u51fa\u4e00\u4e2a\u5f02\u5e38\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u4e2d\u5305\u542b\u6709\u5f02\u5e38\u4fe1\u606f\uff0c\u8c03\u7528\u8fd9\u4e2a\u5bf9\u8c61\u7684\u65b9\u6cd5\u53ef\u4ee5\u6355\u83b7\u5230\u8fd9\u4e2a\u5f02\u5e38\u5e76\u53ef\u4ee5\u5bf9\u5176\u8fdb\u884c\u5904\u7406\u3002Java \u7684\u5f02\u5e38\u5904\u7406\u662f\u901a\u8fc7 5 \u4e2a\u5173\u952e\u8bcd\u6765\u5b9e\u73b0\u7684\uff1atry\u3001catch\u3001throw\u3001throws \u548c finally\u3002</p> <p>\u5728Java\u5e94\u7528\u4e2d\uff0c\u5f02\u5e38\u7684\u5904\u7406\u673a\u5236\u5206\u4e3a\u58f0\u660e\u5f02\u5e38\uff0c\u629b\u51fa\u5f02\u5e38\u548c\u6355\u83b7\u5f02\u5e38\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#_5","title":"\u58f0\u660e\u5f02\u5e38","text":"<p>\u901a\u5e38\uff0c\u5e94\u8be5\u6355\u83b7\u90a3\u4e9b\u77e5\u9053\u5982\u4f55\u5904\u7406\u7684\u5f02\u5e38\uff0c\u5c06\u4e0d\u77e5\u9053\u5982\u4f55\u5904\u7406\u7684\u5f02\u5e38\u7ee7\u7eed\u4f20\u9012\u4e0b\u53bb\u3002\u4f20\u9012\u5f02\u5e38\u53ef\u4ee5\u5728\u65b9\u6cd5\u7b7e\u540d\u5904\u4f7f\u7528 throws \u5173\u952e\u5b57\u58f0\u660e\u53ef\u80fd\u4f1a\u629b\u51fa\u7684\u5f02\u5e38\u3002</p> <p>\u6ce8\u610f</p> <ul> <li>\u975e\u68c0\u67e5\u5f02\u5e38\uff08Error\u3001RuntimeException \u6216\u5b83\u4eec\u7684\u5b50\u7c7b\uff09\u4e0d\u53ef\u4f7f\u7528 throws \u5173\u952e\u5b57\u6765\u58f0\u660e\u8981\u629b\u51fa\u7684\u5f02\u5e38\u3002</li> <li>\u4e00\u4e2a\u65b9\u6cd5\u51fa\u73b0\u7f16\u8bd1\u65f6\u5f02\u5e38\uff0c\u5c31\u9700\u8981 try-catch/ throws \u5904\u7406\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u7f16\u8bd1\u9519\u8bef\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#_6","title":"\u629b\u51fa\u5f02\u5e38","text":"<p>\u5982\u679c\u4f60\u89c9\u5f97\u89e3\u51b3\u4e0d\u4e86\u67d0\u4e9b\u5f02\u5e38\u95ee\u9898\uff0c\u4e14\u4e0d\u9700\u8981\u8c03\u7528\u8005\u5904\u7406\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u629b\u51fa\u5f02\u5e38\u3002</p> <p>throw\u5173\u952e\u5b57\u4f5c\u7528\u662f\u5728\u65b9\u6cd5\u5185\u90e8\u629b\u51fa\u4e00\u4e2aThrowable\u7c7b\u578b\u7684\u5f02\u5e38\u3002\u4efb\u4f55Java\u4ee3\u7801\u90fd\u53ef\u4ee5\u901a\u8fc7throw\u8bed\u53e5\u629b\u51fa\u5f02\u5e38\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#_7","title":"\u6355\u83b7\u5f02\u5e38","text":"<p>\u7a0b\u5e8f\u901a\u5e38\u5728\u8fd0\u884c\u4e4b\u524d\u4e0d\u62a5\u9519\uff0c\u4f46\u662f\u8fd0\u884c\u540e\u53ef\u80fd\u4f1a\u51fa\u73b0\u67d0\u4e9b\u672a\u77e5\u7684\u9519\u8bef\uff0c\u4f46\u662f\u8fd8\u4e0d\u60f3\u76f4\u63a5\u629b\u51fa\u5230\u4e0a\u4e00\u7ea7\uff0c\u90a3\u4e48\u5c31\u9700\u8981\u901a\u8fc7try\u2026catch\u2026\u7684\u5f62\u5f0f\u8fdb\u884c\u5f02\u5e38\u6355\u83b7\uff0c\u4e4b\u540e\u6839\u636e\u4e0d\u540c\u7684\u5f02\u5e38\u60c5\u51b5\u6765\u8fdb\u884c\u76f8\u5e94\u7684\u5904\u7406\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#_8","title":"\u5982\u4f55\u9009\u62e9\u5f02\u5e38\u7c7b\u578b","text":"<p>\u53ef\u4ee5\u6839\u636e\u4e0b\u56fe\u6765\u9009\u62e9\u662f\u6355\u83b7\u5f02\u5e38\uff0c\u58f0\u660e\u5f02\u5e38\u8fd8\u662f\u629b\u51fa\u5f02\u5e38</p> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#_9","title":"\u5e38\u89c1\u5f02\u5e38\u5904\u7406\u65b9\u5f0f","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#_10","title":"\u76f4\u63a5\u629b\u51fa\u5f02\u5e38","text":"<p>\u901a\u5e38\uff0c\u5e94\u8be5\u6355\u83b7\u90a3\u4e9b\u77e5\u9053\u5982\u4f55\u5904\u7406\u7684\u5f02\u5e38\uff0c\u5c06\u4e0d\u77e5\u9053\u5982\u4f55\u5904\u7406\u7684\u5f02\u5e38\u7ee7\u7eed\u4f20\u9012\u4e0b\u53bb\u3002\u4f20\u9012\u5f02\u5e38\u53ef\u4ee5\u5728\u65b9\u6cd5\u7b7e\u540d\u5904\u4f7f\u7528 throws \u5173\u952e\u5b57\u58f0\u660e\u53ef\u80fd\u4f1a\u629b\u51fa\u7684\u5f02\u5e38\u3002</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>private static void readFile(String filePath) throws IOException { \n  File file = new File(filePath); \n  String result; \n  BufferedReader reader = new BufferedReader(new FileReader(file)); \n  while((result = reader.readLine())!=null) { \n    System.out.println(result); \n  } \n  reader.close(); \n}\n</code></pre>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#_11","title":"\u5c01\u88c5\u5f02\u5e38\u518d\u629b\u51fa","text":"<p>\u6709\u65f6\u6211\u4eec\u4f1a\u4ece catch \u4e2d\u629b\u51fa\u4e00\u4e2a\u5f02\u5e38\uff0c\u76ee\u7684\u662f\u4e3a\u4e86\u6539\u53d8\u5f02\u5e38\u7684\u7c7b\u578b\u3002\u591a\u7528\u4e8e\u5728\u591a\u7cfb\u7edf\u96c6\u6210\u65f6\uff0c\u5f53\u67d0\u4e2a\u5b50\u7cfb\u7edf\u6545\u969c\uff0c\u5f02\u5e38\u7c7b\u578b\u53ef\u80fd\u6709\u591a\u79cd\uff0c\u53ef\u4ee5\u7528\u7edf\u4e00\u7684\u5f02\u5e38\u7c7b\u578b\u5411\u5916\u66b4\u9732\uff0c\u4e0d\u9700\u66b4\u9732\u592a\u591a\u5185\u90e8\u5f02\u5e38\u7ec6\u8282\u3002</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>private static void readFile(String filePath) throws MyException { \n  try { \n    // code \n  } catch (IOException e) { \n    MyException ex = new MyException(\"read file failed.\"); \n    ex.initCause(e); \n    throw ex; \n  } \n}\n</code></pre>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#_12","title":"\u6355\u83b7\u5f02\u5e38","text":"<p>\u5728\u4e00\u4e2a try-catch \u8bed\u53e5\u5757\u4e2d\u53ef\u4ee5\u6355\u83b7\u591a\u4e2a\u5f02\u5e38\u7c7b\u578b\uff0c\u5e76\u5bf9\u4e0d\u540c\u7c7b\u578b\u7684\u5f02\u5e38\u505a\u51fa\u4e0d\u540c\u7684\u5904\u7406</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>private static void readFile(String filePath) { \n  try { \n    // code \n  } catch (FileNotFoundException e) { \n    // handle FileNotFoundException \n  } catch (IOException e){ \n    // handle IOException \n  } \n}\n</code></pre> <p>\u540c\u4e00\u4e2a catch \u4e5f\u53ef\u4ee5\u6355\u83b7\u591a\u79cd\u7c7b\u578b\u5f02\u5e38\uff0c\u7528 | \u9694\u5f00</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>private static void readFile(String filePath) { \n  try { \n    // code \n  } catch (FileNotFoundException | UnknownHostException e) { \n    // handle FileNotFoundException or UnknownHostException \n  } catch (IOException e){ \n    // handle IOException \n  } \n}\n</code></pre>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#_13","title":"\u81ea\u5b9a\u4e49\u5f02\u5e38","text":"<p>\u4e60\u60ef\u4e0a\uff0c\u5b9a\u4e49\u4e00\u4e2a\u5f02\u5e38\u7c7b\u5e94\u5305\u542b\u4e24\u4e2a\u6784\u9020\u51fd\u6570\uff0c\u4e00\u4e2a\u65e0\u53c2\u6784\u9020\u51fd\u6570\u548c\u4e00\u4e2a\u5e26\u6709\u8be6\u7ec6\u63cf\u8ff0\u4fe1\u606f\u7684\u6784\u9020\u51fd\u6570\uff08Throwable \u7684 toString \u65b9\u6cd5\u4f1a\u6253\u5370\u8fd9\u4e9b\u8be6\u7ec6\u4fe1\u606f\uff0c\u8c03\u8bd5\u65f6\u5f88\u6709\u7528\uff09</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>public class MyException extends Exception { \n  public MyException(){ \n  } \n\n  public MyException(String msg){ \n    super(msg); \n  } \n  // ... \n}\n</code></pre>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#try-catch-finally","title":"try-catch-finally","text":"<p>\u5f53\u65b9\u6cd5\u4e2d\u53d1\u751f\u5f02\u5e38\uff0c\u5f02\u5e38\u5904\u4e4b\u540e\u7684\u4ee3\u7801\u4e0d\u4f1a\u518d\u6267\u884c\uff0c\u5982\u679c\u4e4b\u524d\u83b7\u53d6\u4e86\u4e00\u4e9b\u672c\u5730\u8d44\u6e90\u9700\u8981\u91ca\u653e\uff0c\u5219\u9700\u8981\u5728\u65b9\u6cd5\u6b63\u5e38\u7ed3\u675f\u65f6\u548c catch \u8bed\u53e5\u4e2d\u90fd\u8c03\u7528\u91ca\u653e\u672c\u5730\u8d44\u6e90\u7684\u4ee3\u7801\uff0c\u663e\u5f97\u4ee3\u7801\u6bd4\u8f83\u7e41\u7410\uff0cfinally \u8bed\u53e5\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>private static void readFile(String filePath) throws MyException { \n  File file = new File(filePath); \n  String result; BufferedReader reader = null; \n  try { \n    reader = new BufferedReader(new FileReader(file)); \n    while((result = reader.readLine())!=null) { \n      System.out.println(result); \n    } \n  } catch (IOException e) { \n    System.out.println(\"readFile method catch block.\"); \n    MyException ex = new MyException(\"read file failed.\"); \n    ex.initCause(e); \n    throw ex; \n  } finally { \n    System.out.println(\"readFile method finally block.\"); \n    if (null != reader) { \n      try { \n        reader.close(); \n      } catch (IOException e) { \n        e.printStackTrace(); \n      } \n    } \n  } \n}\n</code></pre> <p>\u8c03\u7528\u8be5\u65b9\u6cd5\u65f6\uff0c\u8bfb\u53d6\u6587\u4ef6\u65f6\u82e5\u53d1\u751f\u5f02\u5e38\uff0c\u4ee3\u7801\u4f1a\u8fdb\u5165 catch \u4ee3\u7801\u5757\uff0c\u4e4b\u540e\u8fdb\u5165 finally \u4ee3\u7801\u5757\uff1b\u82e5\u8bfb\u53d6\u6587\u4ef6\u65f6\u672a\u53d1\u751f\u5f02\u5e38\uff0c\u5219\u4f1a\u8df3\u8fc7 catch \u4ee3\u7801\u5757\u76f4\u63a5\u8fdb\u5165 finally \u4ee3\u7801\u5757\u3002\u6240\u4ee5\u65e0\u8bba\u4ee3\u7801\u4e2d\u662f\u5426\u53d1\u751f\u5f02\u5e38\uff0cfianlly \u4e2d\u7684\u4ee3\u7801\u90fd\u4f1a\u6267\u884c\u3002</p> <p>\u82e5 catch \u4ee3\u7801\u5757\u4e2d\u5305\u542b return \u8bed\u53e5\uff0cfinally \u4e2d\u7684\u4ee3\u7801\u8fd8\u4f1a\u6267\u884c\u5417\uff1f\u5c06\u4ee5\u4e0a\u4ee3\u7801\u4e2d\u7684 catch \u5b50\u53e5\u4fee\u6539\u5982\u4e0b\uff1a</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>catch (IOException e) { \n  System.out.println(\"readFile method catch block.\"); \n  return; \n}\n</code></pre> <p>\u8c03\u7528 readFile \u65b9\u6cd5\uff0c\u89c2\u5bdf\u5f53 catch \u5b50\u53e5\u4e2d\u8c03\u7528 return \u8bed\u53e5\u65f6\uff0cfinally \u5b50\u53e5\u662f\u5426\u6267\u884c</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>readFile method catch block. \nreadFile method finally block.\n</code></pre> <p>\u53ef\u89c1\uff0c\u5373\u4f7f catch \u4e2d\u5305\u542b\u4e86 return \u8bed\u53e5\uff0cfinally \u5b50\u53e5\u4f9d\u7136\u4f1a\u6267\u884c\u3002\u82e5 finally \u4e2d\u4e5f\u5305\u542b return \u8bed\u53e5\uff0cfinally \u4e2d\u7684 return \u4f1a\u8986\u76d6\u524d\u9762\u7684 return.</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#try-with-resource","title":"try-with-resource","text":"<p>\u4e0a\u9762\u4f8b\u5b50\u4e2d\uff0cfinally \u4e2d\u7684 close \u65b9\u6cd5\u4e5f\u53ef\u80fd\u629b\u51fa IOException, \u4ece\u800c\u8986\u76d6\u4e86\u539f\u59cb\u5f02\u5e38\u3002JAVA 7 \u63d0\u4f9b\u4e86\u66f4\u4f18\u96c5\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u8d44\u6e90\u7684\u81ea\u52a8\u91ca\u653e\uff0c\u81ea\u52a8\u91ca\u653e\u7684\u8d44\u6e90\u9700\u8981\u662f\u5b9e\u73b0\u4e86 AutoCloseable \u63a5\u53e3\u7684\u7c7b\u3002</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>private static void tryWithResourceTest(){ \n  try (Scanner scanner = new Scanner(new FileInputStream(\"c:/abc\"),\"UTF-8\")){ \n    // code \n  } catch (IOException e){ \n    // handle exception \n  } \n}\n</code></pre> <p>try \u4ee3\u7801\u5757\u9000\u51fa\u65f6\uff0c\u4f1a\u81ea\u52a8\u8c03\u7528 scanner.close \u65b9\u6cd5\uff0c\u548c\u628a scanner.close \u65b9\u6cd5\u653e\u5728 finally \u4ee3\u7801\u5757\u4e2d\u4e0d\u540c\u7684\u662f\uff0c\u82e5 scanner.close \u629b\u51fa\u5f02\u5e38\uff0c\u5219\u4f1a\u88ab\u6291\u5236\uff0c\u629b\u51fa\u7684\u4ecd\u7136\u4e3a\u539f\u59cb\u5f02\u5e38\u3002\u88ab\u6291\u5236\u7684\u5f02\u5e38\u4f1a\u7531 addSusppressed \u65b9\u6cd5\u6dfb\u52a0\u5230\u539f\u6765\u7684\u5f02\u5e38\uff0c\u5982\u679c\u60f3\u8981\u83b7\u53d6\u88ab\u6291\u5236\u7684\u5f02\u5e38\u5217\u8868\uff0c\u53ef\u4ee5\u8c03\u7528 getSuppressed \u65b9\u6cd5\u6765\u83b7\u53d6\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#java_5","title":"Java\u5f02\u5e38\u5e38\u89c1\u9762\u8bd5\u9898","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#1-error-exception","title":"1. Error \u548c Exception \u533a\u522b\u662f\u4ec0\u4e48\uff1f","text":"<p>Error \u7c7b\u578b\u7684\u9519\u8bef\u901a\u5e38\u4e3a\u865a\u62df\u673a\u76f8\u5173\u9519\u8bef\uff0c\u5982\u7cfb\u7edf\u5d29\u6e83\uff0c\u5185\u5b58\u4e0d\u8db3\uff0c\u5806\u6808\u6ea2\u51fa\u7b49\uff0c\u7f16\u8bd1\u5668\u4e0d\u4f1a\u5bf9\u8fd9\u7c7b\u9519\u8bef\u8fdb\u884c\u68c0\u6d4b\uff0cJAVA \u5e94\u7528\u7a0b\u5e8f\u4e5f\u4e0d\u5e94\u5bf9\u8fd9\u7c7b\u9519\u8bef\u8fdb\u884c\u6355\u83b7\uff0c\u4e00\u65e6\u8fd9\u7c7b\u9519\u8bef\u53d1\u751f\uff0c\u901a\u5e38\u5e94\u7528\u7a0b\u5e8f\u4f1a\u88ab\u7ec8\u6b62\uff0c\u4ec5\u9760\u5e94\u7528\u7a0b\u5e8f\u672c\u8eab\u65e0\u6cd5\u6062\u590d\uff1b</p> <p>Exception \u7c7b\u7684\u9519\u8bef\u662f\u53ef\u4ee5\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u8fdb\u884c\u6355\u83b7\u5e76\u5904\u7406\u7684\uff0c\u901a\u5e38\u9047\u5230\u8fd9\u79cd\u9519\u8bef\uff0c\u5e94\u5bf9\u5176\u8fdb\u884c\u5904\u7406\uff0c\u4f7f\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u7ee7\u7eed\u6b63\u5e38\u8fd0\u884c\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#2","title":"2. \u8fd0\u884c\u65f6\u5f02\u5e38\u548c\u4e00\u822c\u5f02\u5e38(\u53d7\u68c0\u5f02\u5e38)\u533a\u522b\u662f\u4ec0\u4e48\uff1f","text":"<p>\u8fd0\u884c\u65f6\u5f02\u5e38\u5305\u62ec RuntimeException \u7c7b\u53ca\u5176\u5b50\u7c7b\uff0c\u8868\u793a JVM \u5728\u8fd0\u884c\u671f\u95f4\u53ef\u80fd\u51fa\u73b0\u7684\u5f02\u5e38\u3002 Java \u7f16\u8bd1\u5668\u4e0d\u4f1a\u68c0\u67e5\u8fd0\u884c\u65f6\u5f02\u5e38\u3002</p> <p>\u53d7\u68c0\u5f02\u5e38\u662fException \u4e2d\u9664 RuntimeException \u53ca\u5176\u5b50\u7c7b\u4e4b\u5916\u7684\u5f02\u5e38\u3002 Java \u7f16\u8bd1\u5668\u4f1a\u68c0\u67e5\u53d7\u68c0\u5f02\u5e38\u3002</p> <p>RuntimeException\u5f02\u5e38\u548c\u53d7\u68c0\u5f02\u5e38\u4e4b\u95f4\u7684\u533a\u522b\uff1a\u662f\u5426\u5f3a\u5236\u8981\u6c42\u8c03\u7528\u8005\u5fc5\u987b\u5904\u7406\u6b64\u5f02\u5e38\uff0c\u5982\u679c\u5f3a\u5236\u8981\u6c42\u8c03\u7528\u8005\u5fc5\u987b\u8fdb\u884c\u5904\u7406\uff0c\u90a3\u4e48\u5c31\u4f7f\u7528\u53d7\u68c0\u5f02\u5e38\uff0c\u5426\u5219\u5c31\u9009\u62e9\u975e\u53d7\u68c0\u5f02\u5e38(RuntimeException)\u3002\u4e00\u822c\u6765\u8bb2\uff0c\u5982\u679c\u6ca1\u6709\u7279\u6b8a\u7684\u8981\u6c42\uff0c\u6211\u4eec\u5efa\u8bae\u4f7f\u7528RuntimeException\u5f02\u5e38\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#3-jvm","title":"3. JVM \u662f\u5982\u4f55\u5904\u7406\u5f02\u5e38\u7684\uff1f","text":"<p>\u5728\u4e00\u4e2a\u65b9\u6cd5\u4e2d\u5982\u679c\u53d1\u751f\u5f02\u5e38\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4f1a\u521b\u5efa\u4e00\u4e2a\u5f02\u5e38\u5bf9\u8c61\uff0c\u5e76\u8f6c\u4ea4\u7ed9 JVM\uff0c\u8be5\u5f02\u5e38\u5bf9\u8c61\u5305\u542b\u5f02\u5e38\u540d\u79f0\uff0c\u5f02\u5e38\u63cf\u8ff0\u4ee5\u53ca\u5f02\u5e38\u53d1\u751f\u65f6\u5e94\u7528\u7a0b\u5e8f\u7684\u72b6\u6001\u3002\u521b\u5efa\u5f02\u5e38\u5bf9\u8c61\u5e76\u8f6c\u4ea4\u7ed9 JVM \u7684\u8fc7\u7a0b\u79f0\u4e3a\u629b\u51fa\u5f02\u5e38\u3002\u53ef\u80fd\u6709\u4e00\u7cfb\u5217\u7684\u65b9\u6cd5\u8c03\u7528\uff0c\u6700\u7ec8\u624d\u8fdb\u5165\u629b\u51fa\u5f02\u5e38\u7684\u65b9\u6cd5\uff0c\u8fd9\u4e00\u7cfb\u5217\u65b9\u6cd5\u8c03\u7528\u7684\u6709\u5e8f\u5217\u8868\u53eb\u505a\u8c03\u7528\u6808\u3002</p> <p>JVM \u4f1a\u987a\u7740\u8c03\u7528\u6808\u53bb\u67e5\u627e\u770b\u662f\u5426\u6709\u53ef\u4ee5\u5904\u7406\u5f02\u5e38\u7684\u4ee3\u7801\uff0c\u5982\u679c\u6709\uff0c\u5219\u8c03\u7528\u5f02\u5e38\u5904\u7406\u4ee3\u7801\u3002\u5f53 JVM \u53d1\u73b0\u53ef\u4ee5\u5904\u7406\u5f02\u5e38\u7684\u4ee3\u7801\u65f6\uff0c\u4f1a\u628a\u53d1\u751f\u7684\u5f02\u5e38\u4f20\u9012\u7ed9\u5b83\u3002\u5982\u679c JVM \u6ca1\u6709\u627e\u5230\u53ef\u4ee5\u5904\u7406\u8be5\u5f02\u5e38\u7684\u4ee3\u7801\u5757\uff0cJVM \u5c31\u4f1a\u5c06\u8be5\u5f02\u5e38\u8f6c\u4ea4\u7ed9\u9ed8\u8ba4\u7684\u5f02\u5e38\u5904\u7406\u5668\uff08\u9ed8\u8ba4\u5904\u7406\u5668\u4e3a JVM \u7684\u4e00\u90e8\u5206\uff09\uff0c\u9ed8\u8ba4\u5f02\u5e38\u5904\u7406\u5668\u6253\u5370\u51fa\u5f02\u5e38\u4fe1\u606f\u5e76\u7ec8\u6b62\u5e94\u7528\u7a0b\u5e8f\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#4-throw-throws","title":"4. throw \u548c throws \u7684\u533a\u522b\u662f\u4ec0\u4e48\uff1f","text":"<p>Java \u4e2d\u7684\u5f02\u5e38\u5904\u7406\u9664\u4e86\u5305\u62ec\u6355\u83b7\u5f02\u5e38\u548c\u5904\u7406\u5f02\u5e38\u4e4b\u5916\uff0c\u8fd8\u5305\u62ec\u58f0\u660e\u5f02\u5e38\u548c\u62cb\u51fa\u5f02\u5e38\uff0c\u53ef\u4ee5\u901a\u8fc7 throws \u5173\u952e\u5b57\u5728\u65b9\u6cd5\u4e0a\u58f0\u660e\u8be5\u65b9\u6cd5\u8981\u62cb\u51fa\u7684\u5f02\u5e38\uff0c\u6216\u8005\u5728\u65b9\u6cd5\u5185\u90e8\u901a\u8fc7 throw \u62cb\u51fa\u5f02\u5e38\u5bf9\u8c61\u3002</p> <p>throws \u5173\u952e\u5b57\u548c throw \u5173\u952e\u5b57\u5728\u4f7f\u7528\u4e0a\u7684\u51e0\u70b9\u533a\u522b\u5982\u4e0b\uff1a</p> <ul> <li>throw \u5173\u952e\u5b57\u7528\u5728\u65b9\u6cd5\u5185\u90e8\uff0c\u53ea\u80fd\u7528\u4e8e\u629b\u51fa\u4e00\u79cd\u5f02\u5e38\uff0c\u7528\u6765\u629b\u51fa\u65b9\u6cd5\u6216\u4ee3\u7801\u5757\u4e2d\u7684\u5f02\u5e38\uff0c\u53d7\u67e5\u5f02\u5e38\u548c\u975e\u53d7\u67e5\u5f02\u5e38\u90fd\u53ef\u4ee5\u88ab\u629b\u51fa\u3002</li> <li>throws \u5173\u952e\u5b57\u7528\u5728\u65b9\u6cd5\u58f0\u660e\u4e0a\uff0c\u53ef\u4ee5\u629b\u51fa\u591a\u4e2a\u5f02\u5e38\uff0c\u7528\u6765\u6807\u8bc6\u8be5\u65b9\u6cd5\u53ef\u80fd\u629b\u51fa\u7684\u5f02\u5e38\u5217\u8868\u3002\u4e00\u4e2a\u65b9\u6cd5\u7528 throws \u6807\u8bc6\u4e86\u53ef\u80fd\u629b\u51fa\u7684\u5f02\u5e38\u5217\u8868\uff0c\u8c03\u7528\u8be5\u65b9\u6cd5\u7684\u65b9\u6cd5\u4e2d\u5fc5\u987b\u5305\u542b\u53ef\u5904\u7406\u5f02\u5e38\u7684\u4ee3\u7801\uff0c\u5426\u5219\u4e5f\u8981\u5728\u65b9\u6cd5\u7b7e\u540d\u4e2d\u7528 throws \u5173\u952e\u5b57\u58f0\u660e\u76f8\u5e94\u7684\u5f02\u5e38\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#5-finalfinallyfinalize","title":"5. final\u3001finally\u3001finalize \u6709\u4ec0\u4e48\u533a\u522b\uff1f","text":"<ul> <li>final\u53ef\u4ee5\u4fee\u9970\u7c7b\u3001\u53d8\u91cf\u3001\u65b9\u6cd5\uff0c\u4fee\u9970\u7c7b\u8868\u793a\u8be5\u7c7b\u4e0d\u80fd\u88ab\u7ee7\u627f\u3001\u4fee\u9970\u65b9\u6cd5\u8868\u793a\u8be5\u65b9\u6cd5\u4e0d\u80fd\u88ab\u91cd\u5199\u3001\u4fee\u9970\u53d8\u91cf\u8868\u793a\u8be5\u53d8\u91cf\u662f\u4e00\u4e2a\u5e38\u91cf\u4e0d\u80fd\u88ab\u91cd\u65b0\u8d4b\u503c\u3002</li> <li>finally\u4e00\u822c\u4f5c\u7528\u5728try-catch\u4ee3\u7801\u5757\u4e2d\uff0c\u5728\u5904\u7406\u5f02\u5e38\u7684\u65f6\u5019\uff0c\u901a\u5e38\u6211\u4eec\u5c06\u4e00\u5b9a\u8981\u6267\u884c\u7684\u4ee3\u7801\u65b9\u6cd5finally\u4ee3\u7801\u5757\u4e2d\uff0c\u8868\u793a\u4e0d\u7ba1\u662f\u5426\u51fa\u73b0\u5f02\u5e38\uff0c\u8be5\u4ee3\u7801\u5757\u90fd\u4f1a\u6267\u884c\uff0c\u4e00\u822c\u7528\u6765\u5b58\u653e\u4e00\u4e9b\u5173\u95ed\u8d44\u6e90\u7684\u4ee3\u7801\u3002</li> <li>finalize\u662f\u4e00\u4e2a\u65b9\u6cd5\uff0c\u5c5e\u4e8eObject\u7c7b\u7684\u4e00\u4e2a\u65b9\u6cd5\uff0c\u800cObject\u7c7b\u662f\u6240\u6709\u7c7b\u7684\u7236\u7c7b\uff0cJava \u4e2d\u5141\u8bb8\u4f7f\u7528 finalize()\u65b9\u6cd5\u5728\u5783\u573e\u6536\u96c6\u5668\u5c06\u5bf9\u8c61\u4ece\u5185\u5b58\u4e2d\u6e05\u9664\u51fa\u53bb\u4e4b\u524d\u505a\u5fc5\u8981\u7684\u6e05\u7406\u5de5\u4f5c\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#6-noclassdeffounderror-classnotfoundexception","title":"6. NoClassDefFoundError \u548c ClassNotFoundException \u533a\u522b\uff1f","text":"<p>NoClassDefFoundError \u662f\u4e00\u4e2a Error \u7c7b\u578b\u7684\u5f02\u5e38\uff0c\u662f\u7531 JVM \u5f15\u8d77\u7684\uff0c\u4e0d\u5e94\u8be5\u5c1d\u8bd5\u6355\u83b7\u8fd9\u4e2a\u5f02\u5e38\u3002</p> <p>\u5f15\u8d77\u8be5\u5f02\u5e38\u7684\u539f\u56e0\u662f JVM \u6216 ClassLoader \u5c1d\u8bd5\u52a0\u8f7d\u67d0\u7c7b\u65f6\u5728\u5185\u5b58\u4e2d\u627e\u4e0d\u5230\u8be5\u7c7b\u7684\u5b9a\u4e49\uff0c\u8be5\u52a8\u4f5c\u53d1\u751f\u5728\u8fd0\u884c\u671f\u95f4\uff0c\u5373\u7f16\u8bd1\u65f6\u8be5\u7c7b\u5b58\u5728\uff0c\u4f46\u662f\u5728\u8fd0\u884c\u65f6\u5374\u627e\u4e0d\u5230\u4e86\uff0c\u53ef\u80fd\u662f\u53d8\u5f02\u540e\u88ab\u5220\u9664\u4e86\u7b49\u539f\u56e0\u5bfc\u81f4\uff1b</p> <p>ClassNotFoundException \u662f\u4e00\u4e2a\u53d7\u67e5\u5f02\u5e38\uff0c\u9700\u8981\u663e\u5f0f\u5730\u4f7f\u7528 try-catch \u5bf9\u5176\u8fdb\u884c\u6355\u83b7\u548c\u5904\u7406\uff0c\u6216\u5728\u65b9\u6cd5\u7b7e\u540d\u4e2d\u7528 throws \u5173\u952e\u5b57\u8fdb\u884c\u58f0\u660e\u3002\u5f53\u4f7f\u7528 Class.forName, ClassLoader.loadClass \u6216 ClassLoader.findSystemClass \u52a8\u6001\u52a0\u8f7d\u7c7b\u5230\u5185\u5b58\u7684\u65f6\u5019\uff0c\u901a\u8fc7\u4f20\u5165\u7684\u7c7b\u8def\u5f84\u53c2\u6570\u6ca1\u6709\u627e\u5230\u8be5\u7c7b\uff0c\u5c31\u4f1a\u629b\u51fa\u8be5\u5f02\u5e38\uff1b\u53e6\u4e00\u79cd\u629b\u51fa\u8be5\u5f02\u5e38\u7684\u53ef\u80fd\u539f\u56e0\u662f\u67d0\u4e2a\u7c7b\u5df2\u7ecf\u7531\u4e00\u4e2a\u7c7b\u52a0\u8f7d\u5668\u52a0\u8f7d\u81f3\u5185\u5b58\u4e2d\uff0c\u53e6\u4e00\u4e2a\u52a0\u8f7d\u5668\u53c8\u5c1d\u8bd5\u53bb\u52a0\u8f7d\u5b83\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#7-try-catch-finally","title":"7. try-catch-finally \u4e2d\u54ea\u4e2a\u90e8\u5206\u53ef\u4ee5\u7701\u7565\uff1f","text":"<p>\u7b54\uff1acatch \u53ef\u4ee5\u7701\u7565</p> <p>\u539f\u56e0</p> <p>\u66f4\u4e3a\u4e25\u683c\u7684\u8bf4\u6cd5\u5176\u5b9e\u662f\uff1atry\u53ea\u9002\u5408\u5904\u7406\u8fd0\u884c\u65f6\u5f02\u5e38\uff0ctry+catch\u9002\u5408\u5904\u7406\u8fd0\u884c\u65f6\u5f02\u5e38+\u666e\u901a\u5f02\u5e38\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u4f60\u53ea\u7528try\u53bb\u5904\u7406\u666e\u901a\u5f02\u5e38\u5374\u4e0d\u52a0\u4ee5catch\u5904\u7406\uff0c\u7f16\u8bd1\u662f\u901a\u4e0d\u8fc7\u7684\uff0c\u56e0\u4e3a\u7f16\u8bd1\u5668\u786c\u6027\u89c4\u5b9a\uff0c\u666e\u901a\u5f02\u5e38\u5982\u679c\u9009\u62e9\u6355\u83b7\uff0c\u5219\u5fc5\u987b\u7528catch\u663e\u793a\u58f0\u660e\u4ee5\u4fbf\u8fdb\u4e00\u6b65\u5904\u7406\u3002\u800c\u8fd0\u884c\u65f6\u5f02\u5e38\u5728\u7f16\u8bd1\u65f6\u6ca1\u6709\u5982\u6b64\u89c4\u5b9a\uff0c\u6240\u4ee5catch\u53ef\u4ee5\u7701\u7565\uff0c\u4f60\u52a0\u4e0acatch\u7f16\u8bd1\u5668\u4e5f\u89c9\u5f97\u65e0\u53ef\u539a\u975e\u3002</p> <p>\u7406\u8bba\u4e0a\uff0c\u7f16\u8bd1\u5668\u770b\u4efb\u4f55\u4ee3\u7801\u90fd\u4e0d\u987a\u773c\uff0c\u90fd\u89c9\u5f97\u53ef\u80fd\u6709\u6f5c\u5728\u7684\u95ee\u9898\uff0c\u6240\u4ee5\u4f60\u5373\u4f7f\u5bf9\u6240\u6709\u4ee3\u7801\u52a0\u4e0atry\uff0c\u4ee3\u7801\u5728\u8fd0\u884c\u671f\u65f6\u4e5f\u53ea\u4e0d\u8fc7\u662f\u5728\u6b63\u5e38\u8fd0\u884c\u7684\u57fa\u7840\u4e0a\u52a0\u4e00\u5c42\u76ae\u3002\u4f46\u662f\u4f60\u4e00\u65e6\u5bf9\u4e00\u6bb5\u4ee3\u7801\u52a0\u4e0atry\uff0c\u5c31\u7b49\u4e8e\u663e\u793a\u5730\u627f\u8bfa\u7f16\u8bd1\u5668\uff0c\u5bf9\u8fd9\u6bb5\u4ee3\u7801\u53ef\u80fd\u629b\u51fa\u7684\u5f02\u5e38\u8fdb\u884c\u6355\u83b7\u800c\u975e\u5411\u4e0a\u629b\u51fa\u5904\u7406\u3002\u5982\u679c\u662f\u666e\u901a\u5f02\u5e38\uff0c\u7f16\u8bd1\u5668\u8981\u6c42\u5fc5\u987b\u7528catch\u6355\u83b7\u4ee5\u4fbf\u8fdb\u4e00\u6b65\u5904\u7406\uff1b\u5982\u679c\u8fd0\u884c\u65f6\u5f02\u5e38\uff0c\u6355\u83b7\u7136\u540e\u4e22\u5f03\u5e76\u4e14+finally\u626b\u5c3e\u5904\u7406\uff0c\u6216\u8005\u52a0\u4e0acatch\u6355\u83b7\u4ee5\u4fbf\u8fdb\u4e00\u6b65\u5904\u7406\u3002</p> <p>\u81f3\u4e8e\u52a0\u4e0afinally\uff0c\u5219\u662f\u5728\u4e0d\u7ba1\u6709\u6ca1\u6355\u83b7\u5f02\u5e38\uff0c\u90fd\u8981\u8fdb\u884c\u7684\u201c\u626b\u5c3e\u201d\u5904\u7406\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#8-try-catch-finally-catch-return-finally","title":"8. try-catch-finally \u4e2d\uff0c\u5982\u679c catch \u4e2d return \u4e86\uff0cfinally \u8fd8\u4f1a\u6267\u884c\u5417\uff1f","text":"<p>\u7b54\uff1a\u4f1a\u6267\u884c\uff0c\u5728 return \u524d\u6267\u884c\u3002</p> <p>\u6ce8\u610f\uff1a\u5728 finally \u4e2d\u6539\u53d8\u8fd4\u56de\u503c\u7684\u505a\u6cd5\u662f\u4e0d\u597d\u7684\uff0c\u56e0\u4e3a\u5982\u679c\u5b58\u5728 finally \u4ee3\u7801\u5757\uff0ctry\u4e2d\u7684 return \u8bed\u53e5\u4e0d\u4f1a\u7acb\u9a6c\u8fd4\u56de\u8c03\u7528\u8005\uff0c\u800c\u662f\u8bb0\u5f55\u4e0b\u8fd4\u56de\u503c\u5f85 finally \u4ee3\u7801\u5757\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\u518d\u5411\u8c03\u7528\u8005\u8fd4\u56de\u5176\u503c\uff0c\u7136\u540e\u5982\u679c\u5728 finally \u4e2d\u4fee\u6539\u4e86\u8fd4\u56de\u503c\uff0c\u5c31\u4f1a\u8fd4\u56de\u4fee\u6539\u540e\u7684\u503c\u3002\u663e\u7136\uff0c\u5728 finally \u4e2d\u8fd4\u56de\u6216\u8005\u4fee\u6539\u8fd4\u56de\u503c\u4f1a\u5bf9\u7a0b\u5e8f\u9020\u6210\u5f88\u5927\u7684\u56f0\u6270\uff0cC#\u4e2d\u76f4\u63a5\u7528\u7f16\u8bd1\u9519\u8bef\u7684\u65b9\u5f0f\u6765\u963b\u6b62\u7a0b\u5e8f\u5458\u5e72\u8fd9\u79cd\u9f8c\u9f8a\u7684\u4e8b\u60c5\uff0cJava \u4e2d\u4e5f\u53ef\u4ee5\u901a\u8fc7\u63d0\u5347\u7f16\u8bd1\u5668\u7684\u8bed\u6cd5\u68c0\u67e5\u7ea7\u522b\u6765\u4ea7\u751f\u8b66\u544a\u6216\u9519\u8bef\u3002</p> <p>\u4ee3\u7801\u793a\u4f8b1\uff1a</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>public static int getInt() { \n  int a = 10; \n  try { \n    System.out.println(a / 0); a = 20; \n  } catch (ArithmeticException e) { \n    a = 30; \n    return a; \n    /* \n    * return a \u5728\u7a0b\u5e8f\u6267\u884c\u5230\u8fd9\u4e00\u6b65\u7684\u65f6\u5019\uff0c\u8fd9\u91cc\u4e0d\u662freturn a \u800c\u662f return 30\uff1b\u8fd9\u4e2a\u8fd4\u56de\u8def\u5f84\u5c31\u5f62\u6210\u4e86 \n    * \u4f46\u662f\u5462\uff0c\u5b83\u53d1\u73b0\u540e\u9762\u8fd8\u6709finally\uff0c\u6240\u4ee5\u7ee7\u7eed\u6267\u884cfinally\u7684\u5185\u5bb9\uff0ca=40 \n    * \u518d\u6b21\u56de\u5230\u4ee5\u524d\u7684\u8def\u5f84,\u7ee7\u7eed\u8d70return 30\uff0c\u5f62\u6210\u8fd4\u56de\u8def\u5f84\u4e4b\u540e\uff0c\u8fd9\u91cc\u7684a\u5c31\u4e0d\u662fa\u53d8\u91cf\u4e86\uff0c\u800c\u662f\u5e38\u91cf30 \n    */ \n  } finally { \n    a = 40; \n  } return a; \n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a30</p> <p>\u4ee3\u7801\u793a\u4f8b2\uff1a</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>public static int getInt() { \n  int a = 10; \n  try { \n    System.out.println(a / 0); a = 20; \n  } catch (ArithmeticException e) { \n    a = 30; return a; \n  } finally { \n    a = 40; \n    //\u5982\u679c\u8fd9\u6837\uff0c\u5c31\u53c8\u91cd\u65b0\u5f62\u6210\u4e86\u4e00\u6761\u8fd4\u56de\u8def\u5f84\uff0c\u7531\u4e8e\u53ea\u80fd\u901a\u8fc71\u4e2areturn\u8fd4\u56de\uff0c\u6240\u4ee5\u8fd9\u91cc\u76f4\u63a5\u8fd4\u56de40 \n    return a; \n  } \n}\n</code></pre> <p>\u6267\u884c\u7ed3\u679c\uff1a40</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#9-examplea-exception-exampleb-examplea","title":"9. \u7c7b ExampleA \u7ee7\u627f Exception\uff0c\u7c7b ExampleB \u7ee7\u627fExampleA\u3002","text":"<p>\u6709\u5982\u4e0b\u4ee3\u7801\u7247\u65ad\uff1a</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>try { \n  throw new ExampleB(\"b\") \n  } catch\uff08ExampleA e\uff09{ \n  System.out.println(\"ExampleA\"); \n} catch\uff08Exception e\uff09{ \n  System.out.println(\"Exception\"); \n}\n</code></pre> <p>\u8bf7\u95ee\u6267\u884c\u6b64\u6bb5\u4ee3\u7801\u7684\u8f93\u51fa\u662f\u4ec0\u4e48\uff1f</p> <p>\u7b54\uff1a</p> <p>\u8f93\u51fa\uff1aExampleA\u3002\uff08\u6839\u636e\u91cc\u6c0f\u4ee3\u6362\u539f\u5219[\u80fd\u4f7f\u7528\u7236\u7c7b\u578b\u7684\u5730\u65b9\u4e00\u5b9a\u80fd\u4f7f\u7528\u5b50\u7c7b\u578b]\uff0c\u6293\u53d6 ExampleA \u7c7b\u578b\u5f02\u5e38\u7684 catch \u5757\u80fd\u591f\u6293\u4f4f try \u5757\u4e2d\u629b\u51fa\u7684 ExampleB \u7c7b\u578b\u7684\u5f02\u5e38\uff09</p> <p>\u9762\u8bd5\u9898 - \u8bf4\u51fa\u4e0b\u9762\u4ee3\u7801\u7684\u8fd0\u884c\u7ed3\u679c\u3002\uff08\u6b64\u9898\u7684\u51fa\u5904\u662f\u300aJava \u7f16\u7a0b\u601d\u60f3\u300b\u4e00\u4e66\uff09</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>class Annoyance extends Exception { \n} \n\nclass Sneeze extends Annoyance { \n} \n\nclass Human { \n  public static void main(String[] args) throws Exception { \n    try { \n      try { \n        throw new Sneeze(); \n      } catch ( Annoyance a ) { \n        System.out.println(\"Caught Annoyance\"); \n        throw a; \n      } \n    } catch ( Sneeze s ) { \n      System.out.println(\"Caught Sneeze\"); \n      return ; \n    } finally { \n      System.out.println(\"Hello World!\"); \n    } \n  } \n}\n</code></pre> <p>\u7ed3\u679c</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>Caught Annoyance \nCaught Sneeze \nHello World!\n</code></pre>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#10-runtimeexception","title":"10. \u5e38\u89c1\u7684 RuntimeException \u6709\u54ea\u4e9b\uff1f","text":"<ul> <li>ClassCastException(\u7c7b\u8f6c\u6362\u5f02\u5e38)</li> <li>IndexOutOfBoundsException(\u6570\u7ec4\u8d8a\u754c)</li> <li>NullPointerException(\u7a7a\u6307\u9488)</li> <li>ArrayStoreException(\u6570\u636e\u5b58\u50a8\u5f02\u5e38\uff0c\u64cd\u4f5c\u6570\u7ec4\u65f6\u7c7b\u578b\u4e0d\u4e00\u81f4)</li> <li>\u8fd8\u6709IO\u64cd\u4f5c\u7684BufferOverflowException\u5f02\u5e38</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#11-java","title":"11. Java\u5e38\u89c1\u5f02\u5e38\u6709\u54ea\u4e9b","text":"<p>java.lang.IllegalAccessError\uff1a\u8fdd\u6cd5\u8bbf\u95ee\u9519\u8bef\u3002\u5f53\u4e00\u4e2a\u5e94\u7528\u8bd5\u56fe\u8bbf\u95ee\u3001\u4fee\u6539\u67d0\u4e2a\u7c7b\u7684\u57df\uff08Field\uff09\u6216\u8005\u8c03\u7528\u5176\u65b9\u6cd5\uff0c\u4f46\u662f\u53c8\u8fdd\u53cd\u57df\u6216\u65b9\u6cd5\u7684\u53ef\u89c1\u6027\u58f0\u660e\uff0c\u5219\u629b\u51fa\u8be5\u5f02\u5e38\u3002</p> <p>java.lang.InstantiationError\uff1a\u5b9e\u4f8b\u5316\u9519\u8bef\u3002\u5f53\u4e00\u4e2a\u5e94\u7528\u8bd5\u56fe\u901a\u8fc7Java\u7684new\u64cd\u4f5c\u7b26\u6784\u9020\u4e00\u4e2a\u62bd\u8c61\u7c7b\u6216\u8005\u63a5\u53e3\u65f6\u629b\u51fa\u8be5\u5f02\u5e38.</p> <p>java.lang.OutOfMemoryError\uff1a\u5185\u5b58\u4e0d\u8db3\u9519\u8bef\u3002\u5f53\u53ef\u7528\u5185\u5b58\u4e0d\u8db3\u4ee5\u8ba9Java\u865a\u62df\u673a\u5206\u914d\u7ed9\u4e00\u4e2a\u5bf9\u8c61\u65f6\u629b\u51fa\u8be5\u9519\u8bef\u3002</p> <p>java.lang.StackOverflowError\uff1a\u5806\u6808\u6ea2\u51fa\u9519\u8bef\u3002\u5f53\u4e00\u4e2a\u5e94\u7528\u9012\u5f52\u8c03\u7528\u7684\u5c42\u6b21\u592a\u6df1\u800c\u5bfc\u81f4\u5806\u6808\u6ea2\u51fa\u6216\u8005\u9677\u5165\u6b7b\u5faa\u73af\u65f6\u629b\u51fa\u8be5\u9519\u8bef\u3002</p> <p>java.lang.ClassCastException\uff1a\u7c7b\u9020\u578b\u5f02\u5e38\u3002\u5047\u8bbe\u6709\u7c7bA\u548cB\uff08A\u4e0d\u662fB\u7684\u7236\u7c7b\u6216\u5b50\u7c7b\uff09\uff0cO\u662fA\u7684\u5b9e\u4f8b\uff0c\u90a3\u4e48\u5f53\u5f3a\u5236\u5c06O\u6784\u9020\u4e3a\u7c7bB\u7684\u5b9e\u4f8b\u65f6\u629b\u51fa\u8be5\u5f02\u5e38\u3002\u8be5\u5f02\u5e38\u7ecf\u5e38\u88ab\u79f0\u4e3a\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u5f02\u5e38\u3002</p> <p>java.lang.ClassNotFoundException\uff1a\u627e\u4e0d\u5230\u7c7b\u5f02\u5e38\u3002\u5f53\u5e94\u7528\u8bd5\u56fe\u6839\u636e\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u7c7b\u540d\u6784\u9020\u7c7b\uff0c\u800c\u5728\u904d\u5386CLASSPAH\u4e4b\u540e\u627e\u4e0d\u5230\u5bf9\u5e94\u540d\u79f0\u7684class\u6587\u4ef6\u65f6\uff0c\u629b\u51fa\u8be5\u5f02\u5e38\u3002</p> <p>java.lang.ArithmeticException\uff1a\u7b97\u672f\u6761\u4ef6\u5f02\u5e38\u3002\u8b6c\u5982\uff1a\u6574\u6570\u9664\u96f6\u7b49\u3002</p> <p>java.lang.ArrayIndexOutOfBoundsException\uff1a\u6570\u7ec4\u7d22\u5f15\u8d8a\u754c\u5f02\u5e38\u3002\u5f53\u5bf9\u6570\u7ec4\u7684\u7d22\u5f15\u503c\u4e3a\u8d1f\u6570\u6216\u5927\u4e8e\u7b49\u4e8e\u6570\u7ec4\u5927\u5c0f\u65f6\u629b\u51fa\u3002</p> <p>java.lang.IndexOutOfBoundsException\uff1a\u7d22\u5f15\u8d8a\u754c\u5f02\u5e38\u3002\u5f53\u8bbf\u95ee\u67d0\u4e2a\u5e8f\u5217\u7684\u7d22\u5f15\u503c\u5c0f\u4e8e0\u6216\u5927\u4e8e\u7b49\u4e8e\u5e8f\u5217\u5927\u5c0f\u65f6\uff0c\u629b\u51fa\u8be5\u5f02\u5e38\u3002</p> <p>java.lang.InstantiationException\uff1a\u5b9e\u4f8b\u5316\u5f02\u5e38\u3002\u5f53\u8bd5\u56fe\u901a\u8fc7newInstance()\u65b9\u6cd5\u521b\u5efa\u67d0\u4e2a\u7c7b\u7684\u5b9e\u4f8b\uff0c\u800c\u8be5\u7c7b\u662f\u4e00\u4e2a\u62bd\u8c61\u7c7b\u6216\u63a5\u53e3\u65f6\uff0c\u629b\u51fa\u8be5\u5f02\u5e38\u3002</p> <p>java.lang.NoSuchFieldException\uff1a\u5c5e\u6027\u4e0d\u5b58\u5728\u5f02\u5e38\u3002\u5f53\u8bbf\u95ee\u67d0\u4e2a\u7c7b\u7684\u4e0d\u5b58\u5728\u7684\u5c5e\u6027\u65f6\u629b\u51fa\u8be5\u5f02\u5e38\u3002</p> <p>java.lang.NoSuchMethodException\uff1a\u65b9\u6cd5\u4e0d\u5b58\u5728\u5f02\u5e38\u3002\u5f53\u8bbf\u95ee\u67d0\u4e2a\u7c7b\u7684\u4e0d\u5b58\u5728\u7684\u65b9\u6cd5\u65f6\u629b\u51fa\u8be5\u5f02\u5e38\u3002</p> <p>java.lang.NullPointerException\uff1a\u7a7a\u6307\u9488\u5f02\u5e38\u3002\u5f53\u5e94\u7528\u8bd5\u56fe\u5728\u8981\u6c42\u4f7f\u7528\u5bf9\u8c61\u7684\u5730\u65b9\u4f7f\u7528\u4e86null\u65f6\uff0c\u629b\u51fa\u8be5\u5f02\u5e38\u3002\u8b6c\u5982\uff1a\u8c03\u7528null\u5bf9\u8c61\u7684\u5b9e\u4f8b\u65b9\u6cd5\u3001\u8bbf\u95eenull\u5bf9\u8c61\u7684\u5c5e\u6027\u3001\u8ba1\u7b97null\u5bf9\u8c61\u7684\u957f\u5ea6\u3001\u4f7f\u7528throw\u8bed\u53e5\u629b\u51fanull\u7b49\u7b49\u3002</p> <p>java.lang.NumberFormatException\uff1a\u6570\u5b57\u683c\u5f0f\u5f02\u5e38\u3002\u5f53\u8bd5\u56fe\u5c06\u4e00\u4e2aString\u8f6c\u6362\u4e3a\u6307\u5b9a\u7684\u6570\u5b57\u7c7b\u578b\uff0c\u800c\u8be5\u5b57\u7b26\u4e32\u786e\u4e0d\u6ee1\u8db3\u6570\u5b57\u7c7b\u578b\u8981\u6c42\u7684\u683c\u5f0f\u65f6\uff0c\u629b\u51fa\u8be5\u5f02\u5e38\u3002</p> <p>java.lang.StringIndexOutOfBoundsException\uff1a\u5b57\u7b26\u4e32\u7d22\u5f15\u8d8a\u754c\u5f02\u5e38\u3002\u5f53\u4f7f\u7528\u7d22\u5f15\u503c\u8bbf\u95ee\u67d0\u4e2a\u5b57\u7b26\u4e32\u4e2d\u7684\u5b57\u7b26\uff0c\u800c\u8be5\u7d22\u5f15\u503c\u5c0f\u4e8e0\u6216\u5927\u4e8e\u7b49\u4e8e\u5e8f\u5217\u5927\u5c0f\u65f6\uff0c\u629b\u51fa\u8be5\u5f02\u5e38\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#java_6","title":"Java\u5f02\u5e38\u5904\u7406\u6700\u4f73\u5b9e\u8df5","text":"<p>\u5728 Java \u4e2d\u5904\u7406\u5f02\u5e38\u5e76\u4e0d\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u4e8b\u60c5\u3002\u4e0d\u4ec5\u4ec5\u521d\u5b66\u8005\u5f88\u96be\u7406\u89e3\uff0c\u5373\u4f7f\u4e00\u4e9b\u6709\u7ecf\u9a8c\u7684\u5f00\u53d1\u8005\u4e5f\u9700\u8981\u82b1\u8d39\u5f88\u591a\u65f6\u95f4\u6765\u601d\u8003\u5982\u4f55\u5904\u7406\u5f02\u5e38\uff0c\u5305\u62ec\u9700\u8981\u5904\u7406\u54ea\u4e9b\u5f02\u5e38\uff0c\u600e\u6837\u5904\u7406\u7b49\u7b49\u3002\u8fd9\u4e5f\u662f\u7edd\u5927\u591a\u6570\u5f00\u53d1\u56e2\u961f\u90fd\u4f1a\u5236\u5b9a\u4e00\u4e9b\u89c4\u5219\u6765\u89c4\u8303\u8fdb\u884c\u5f02\u5e38\u5904\u7406\u7684\u539f\u56e0\u3002\u800c\u56e2\u961f\u4e4b\u95f4\u7684\u8fd9\u4e9b\u89c4\u8303\u5f80\u5f80\u662f\u622a\u7136\u4e0d\u540c\u7684\u3002</p> <p>\u672c\u6587\u7ed9\u51fa\u51e0\u4e2a\u88ab\u5f88\u591a\u56e2\u961f\u4f7f\u7528\u7684\u5f02\u5e38\u5904\u7406\u6700\u4f73\u5b9e\u8df5\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#1-finally-try-with-resource","title":"1. \u5728 finally \u5757\u4e2d\u6e05\u7406\u8d44\u6e90\u6216\u8005\u4f7f\u7528 try-with-resource \u8bed\u53e5","text":"<p>\u5f53\u4f7f\u7528\u7c7b\u4f3cInputStream\u8fd9\u79cd\u9700\u8981\u4f7f\u7528\u540e\u5173\u95ed\u7684\u8d44\u6e90\u65f6\uff0c\u4e00\u4e2a\u5e38\u89c1\u7684\u9519\u8bef\u5c31\u662f\u5728try\u5757\u7684\u6700\u540e\u5173\u95ed\u8d44\u6e90\u3002</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>public void doNotCloseResourceInTry() { \n  FileInputStream inputStream = null; \n  try { \n    File file = new File(\"./tmp.txt\"); \n    inputStream = new FileInputStream(file); \n    // use the inputStream to read a file \n    // do NOT do this \n    inputStream.close(); \n  } catch (FileNotFoundException e) { \n    log.error(e); \n  } catch (IOException e) { \n    log.error(e); \n  } \n}\n</code></pre> <p>\u95ee\u9898\u5c31\u662f\uff0c\u53ea\u6709\u6ca1\u6709\u5f02\u5e38\u629b\u51fa\u7684\u65f6\u5019\uff0c\u8fd9\u6bb5\u4ee3\u7801\u624d\u53ef\u4ee5\u6b63\u5e38\u5de5\u4f5c\u3002try \u4ee3\u7801\u5757\u5185\u4ee3\u7801\u4f1a\u6b63\u5e38\u6267\u884c\uff0c\u5e76\u4e14\u8d44\u6e90\u53ef\u4ee5\u6b63\u5e38\u5173\u95ed\u3002\u4f46\u662f\uff0c\u4f7f\u7528 try \u4ee3\u7801\u5757\u662f\u6709\u539f\u56e0\u7684\uff0c\u4e00\u822c\u8c03\u7528\u4e00\u4e2a\u6216\u591a\u4e2a\u53ef\u80fd\u629b\u51fa\u5f02\u5e38\u7684\u65b9\u6cd5\uff0c\u800c\u4e14\uff0c\u4f60\u81ea\u5df1\u4e5f\u53ef\u80fd\u4f1a\u629b\u51fa\u4e00\u4e2a\u5f02\u5e38\uff0c\u8fd9\u610f\u5473\u7740\u4ee3\u7801\u53ef\u80fd\u4e0d\u4f1a\u6267\u884c\u5230 try \u4ee3\u7801\u5757\u7684\u6700\u540e\u90e8\u5206\u3002\u7ed3\u679c\u5c31\u662f\uff0c\u4f60\u5e76\u6ca1\u6709\u5173\u95ed\u8d44\u6e90\u3002</p> <p>\u6240\u4ee5\uff0c\u4f60\u5e94\u8be5\u628a\u6e05\u7406\u5de5\u4f5c\u7684\u4ee3\u7801\u653e\u5230 finally \u91cc\u53bb\uff0c\u6216\u8005\u4f7f\u7528 try-with-resource \u7279\u6027\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#11-finally","title":"1.1 \u4f7f\u7528 finally \u4ee3\u7801\u5757","text":"<p>\u4e0e\u524d\u9762\u51e0\u884c try \u4ee3\u7801\u5757\u4e0d\u540c\uff0cfinally \u4ee3\u7801\u5757\u603b\u662f\u4f1a\u88ab\u6267\u884c\u3002\u4e0d\u7ba1 try \u4ee3\u7801\u5757\u6210\u529f\u6267\u884c\u4e4b\u540e\u8fd8\u662f\u4f60\u5728 catch \u4ee3\u7801\u5757\u4e2d\u5904\u7406\u5b8c\u5f02\u5e38\u540e\u90fd\u4f1a\u6267\u884c\u3002\u56e0\u6b64\uff0c\u4f60\u53ef\u4ee5\u786e\u4fdd\u4f60\u6e05\u7406\u4e86\u6240\u6709\u6253\u5f00\u7684\u8d44\u6e90\u3002</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>public void closeResourceInFinally() { \n  FileInputStream inputStream = null; \n  try { \n    File file = new File(\"./tmp.txt\"); \n    inputStream = new FileInputStream(file); \n    // use the inputStream to read a file \n  } catch (FileNotFoundException e) { \n    log.error(e); \n  } finally { \n    if (inputStream != null) { \n      try { \n        inputStream.close(); \n          } catch (IOException e) { \n        log.error(e); \n      } \n    } \n  } \n}\n</code></pre>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#12-java-7-try-with-resource","title":"1.2 Java 7 \u7684 try-with-resource \u8bed\u6cd5","text":"<p>\u5982\u679c\u4f60\u7684\u8d44\u6e90\u5b9e\u73b0\u4e86 AutoCloseable \u63a5\u53e3\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u8bed\u6cd5\u3002\u5927\u591a\u6570\u7684 Java \u6807\u51c6\u8d44\u6e90\u90fd\u7ee7\u627f\u4e86\u8fd9\u4e2a\u63a5\u53e3\u3002\u5f53\u4f60\u5728 try \u5b50\u53e5\u4e2d\u6253\u5f00\u8d44\u6e90\uff0c\u8d44\u6e90\u4f1a\u5728 try \u4ee3\u7801\u5757\u6267\u884c\u540e\u6216\u5f02\u5e38\u5904\u7406\u540e\u81ea\u52a8\u5173\u95ed\u3002</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>public void automaticallyCloseResource() { \n  File file = new File(\"./tmp.txt\"); \n  try (FileInputStream inputStream = new FileInputStream(file);) { \n    // use the inputStream to read a file \n  } catch (FileNotFoundException e) { \n    log.error(e); \n  } catch (IOException e) { \n    log.error(e); \n  } \n}\n</code></pre>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#2_1","title":"2. \u4f18\u5148\u660e\u786e\u7684\u5f02\u5e38","text":"<p>\u4f60\u629b\u51fa\u7684\u5f02\u5e38\u8d8a\u660e\u786e\u8d8a\u597d\uff0c\u6c38\u8fdc\u8bb0\u4f4f\uff0c\u4f60\u7684\u540c\u4e8b\u6216\u8005\u51e0\u4e2a\u6708\u4e4b\u540e\u7684\u4f60\uff0c\u5c06\u4f1a\u8c03\u7528\u4f60\u7684\u65b9\u6cd5\u5e76\u4e14\u5904\u7406\u5f02\u5e38\u3002</p> <p>\u56e0\u6b64\u9700\u8981\u4fdd\u8bc1\u63d0\u4f9b\u7ed9\u4ed6\u4eec\u5c3d\u53ef\u80fd\u591a\u7684\u4fe1\u606f\u3002\u8fd9\u6837\u4f60\u7684 API \u66f4\u5bb9\u6613\u88ab\u7406\u89e3\u3002\u4f60\u7684\u65b9\u6cd5\u7684\u8c03\u7528\u8005\u80fd\u591f\u66f4\u597d\u7684\u5904\u7406\u5f02\u5e38\u5e76\u4e14\u907f\u514d\u989d\u5916\u7684\u68c0\u67e5\u3002</p> <p>\u56e0\u6b64\uff0c\u603b\u662f\u5c1d\u8bd5\u5bfb\u627e\u6700\u9002\u5408\u4f60\u7684\u5f02\u5e38\u4e8b\u4ef6\u7684\u7c7b\uff0c\u4f8b\u5982\uff0c\u629b\u51fa\u4e00\u4e2a NumberFormatException \u6765\u66ff\u6362\u4e00\u4e2a IllegalArgumentException \u3002\u907f\u514d\u629b\u51fa\u4e00\u4e2a\u4e0d\u660e\u786e\u7684\u5f02\u5e38\u3002</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>public void doNotDoThis() throws Exception { \n  ... \n  } \n\npublic void doThis() throws NumberFormatException { \n  ... \n  }\n</code></pre>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#3","title":"3. \u5bf9\u5f02\u5e38\u8fdb\u884c\u6587\u6863\u8bf4\u660e","text":"<p>\u5f53\u5728\u65b9\u6cd5\u4e0a\u58f0\u660e\u629b\u51fa\u5f02\u5e38\u65f6\uff0c\u4e5f\u9700\u8981\u8fdb\u884c\u6587\u6863\u8bf4\u660e\u3002\u76ee\u7684\u662f\u4e3a\u4e86\u7ed9\u8c03\u7528\u8005\u63d0\u4f9b\u5c3d\u53ef\u80fd\u591a\u7684\u4fe1\u606f\uff0c\u4ece\u800c\u53ef\u4ee5\u66f4\u597d\u5730\u907f\u514d\u6216\u5904\u7406\u5f02\u5e38\u3002 \u5728 Javadoc \u6dfb\u52a0 @throws \u58f0\u660e\uff0c\u5e76\u4e14\u63cf\u8ff0\u629b\u51fa\u5f02\u5e38\u7684\u573a\u666f\u3002</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>public void doSomething(String input) throws MyBusinessException { \n  ... \n  }\n</code></pre>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#4_1","title":"4. \u4f7f\u7528\u63cf\u8ff0\u6027\u6d88\u606f\u629b\u51fa\u5f02\u5e38","text":"<p>\u5728\u629b\u51fa\u5f02\u5e38\u65f6\uff0c\u9700\u8981\u5c3d\u53ef\u80fd\u7cbe\u786e\u5730\u63cf\u8ff0\u95ee\u9898\u548c\u76f8\u5173\u4fe1\u606f\uff0c\u8fd9\u6837\u65e0\u8bba\u662f\u6253\u5370\u5230\u65e5\u5fd7\u4e2d\u8fd8\u662f\u5728\u76d1\u63a7\u5de5\u5177\u4e2d\uff0c\u90fd\u80fd\u591f\u66f4\u5bb9\u6613\u88ab\u4eba\u9605\u8bfb\uff0c\u4ece\u800c\u53ef\u4ee5\u66f4\u597d\u5730\u5b9a\u4f4d\u5177\u4f53\u9519\u8bef\u4fe1\u606f\u3001\u9519\u8bef\u7684\u4e25\u91cd\u7a0b\u5ea6\u7b49\u3002</p> <p>\u4f46\u8fd9\u91cc\u5e76\u4e0d\u662f\u8bf4\u8981\u5bf9\u9519\u8bef\u4fe1\u606f\u957f\u7bc7\u5927\u8bba\uff0c\u56e0\u4e3a\u672c\u6765 Exception \u7684\u7c7b\u540d\u5c31\u80fd\u591f\u53cd\u6620\u9519\u8bef\u7684\u539f\u56e0\uff0c\u56e0\u6b64\u53ea\u9700\u8981\u7528\u4e00\u5230\u4e24\u53e5\u8bdd\u63cf\u8ff0\u5373\u53ef\u3002</p> <p>\u5982\u679c\u629b\u51fa\u4e00\u4e2a\u7279\u5b9a\u7684\u5f02\u5e38\uff0c\u5b83\u7684\u7c7b\u540d\u5f88\u53ef\u80fd\u5df2\u7ecf\u63cf\u8ff0\u4e86\u8fd9\u79cd\u9519\u8bef\u3002\u6240\u4ee5\uff0c\u4f60\u4e0d\u9700\u8981\u63d0\u4f9b\u5f88\u591a\u989d\u5916\u7684\u4fe1\u606f\u3002\u4e00\u4e2a\u5f88\u597d\u7684\u4f8b\u5b50\u662f NumberFormatException \u3002\u5f53\u4f60\u4ee5\u9519\u8bef\u7684\u683c\u5f0f\u63d0\u4f9b String \u65f6\uff0c\u5b83\u5c06\u88ab java.lang.Long \u7c7b\u7684\u6784\u9020\u51fd\u6570\u629b\u51fa\u3002</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>try { \n  new Long(\"xyz\"); \n} catch (NumberFormatException e) { \n  log.error(e); \n}\n</code></pre>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#5","title":"5. \u4f18\u5148\u6355\u83b7\u6700\u5177\u4f53\u7684\u5f02\u5e38","text":"<p>\u5927\u591a\u6570 IDE \u90fd\u53ef\u4ee5\u5e2e\u52a9\u4f60\u5b9e\u73b0\u8fd9\u4e2a\u6700\u4f73\u5b9e\u8df5\u3002\u5f53\u4f60\u5c1d\u8bd5\u9996\u5148\u6355\u83b7\u8f83\u4e0d\u5177\u4f53\u7684\u5f02\u5e38\u65f6\uff0c\u5b83\u4eec\u4f1a\u62a5\u544a\u65e0\u6cd5\u8bbf\u95ee\u7684\u4ee3\u7801\u5757\u3002</p> <p>\u4f46\u95ee\u9898\u5728\u4e8e\uff0c\u53ea\u6709\u5339\u914d\u5f02\u5e38\u7684\u7b2c\u4e00\u4e2a catch \u5757\u4f1a\u88ab\u6267\u884c\u3002 \u56e0\u6b64\uff0c\u5982\u679c\u9996\u5148\u6355\u83b7 IllegalArgumentException \uff0c\u5219\u6c38\u8fdc\u4e0d\u4f1a\u5230\u8fbe\u5e94\u8be5\u5904\u7406\u66f4\u5177\u4f53\u7684 NumberFormatException \u7684 catch \u5757\uff0c\u56e0\u4e3a\u5b83\u662f IllegalArgumentException \u7684\u5b50\u7c7b\u3002</p> <p>\u603b\u662f\u4f18\u5148\u6355\u83b7\u6700\u5177\u4f53\u7684\u5f02\u5e38\u7c7b\uff0c\u5e76\u5c06\u4e0d\u592a\u5177\u4f53\u7684 catch \u5757\u6dfb\u52a0\u5230\u5217\u8868\u7684\u672b\u5c3e\u3002</p> <p>\u4f60\u53ef\u4ee5\u5728\u4e0b\u9762\u7684\u4ee3\u7801\u7247\u65ad\u4e2d\u770b\u5230\u8fd9\u6837\u4e00\u4e2a try-catch \u8bed\u53e5\u7684\u4f8b\u5b50\u3002 \u7b2c\u4e00\u4e2a catch \u5757\u5904\u7406\u6240\u6709 NumberFormatException \u5f02\u5e38\uff0c\u7b2c\u4e8c\u4e2a\u5904\u7406\u6240\u6709\u975e NumberFormatException \u5f02\u5e38\u7684IllegalArgumentException \u5f02\u5e38\u3002</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>public void catchMostSpecificExceptionFirst() { \n  try { \n    doSomething(\"A message\"); \n  } catch (NumberFormatException e) { \n    log.error(e); \n  } catch (IllegalArgumentException e) { \n    log.error(e) \n    } \n}\n</code></pre>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#6-throwable","title":"6. \u4e0d\u8981\u6355\u83b7 Throwable \u7c7b","text":"<p>Throwable \u662f\u6240\u6709\u5f02\u5e38\u548c\u9519\u8bef\u7684\u8d85\u7c7b\u3002\u4f60\u53ef\u4ee5\u5728 catch \u5b50\u53e5\u4e2d\u4f7f\u7528\u5b83\uff0c\u4f46\u662f\u4f60\u6c38\u8fdc\u4e0d\u5e94\u8be5\u8fd9\u6837\u505a\uff01</p> <p>\u5982\u679c\u5728 catch \u5b50\u53e5\u4e2d\u4f7f\u7528 Throwable \uff0c\u5b83\u4e0d\u4ec5\u4f1a\u6355\u83b7\u6240\u6709\u5f02\u5e38\uff0c\u4e5f\u5c06\u6355\u83b7\u6240\u6709\u7684\u9519\u8bef\u3002JVM \u629b\u51fa\u9519\u8bef\uff0c\u6307\u51fa\u4e0d\u5e94\u8be5\u7531\u5e94\u7528\u7a0b\u5e8f\u5904\u7406\u7684\u4e25\u91cd\u95ee\u9898\u3002 \u5178\u578b\u7684\u4f8b\u5b50\u662f OutOfMemoryError \u6216\u8005 StackOverflowError \u3002\u4e24\u8005\u90fd\u662f\u7531\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u4e4b\u5916\u7684\u60c5\u51b5\u5f15\u8d77\u7684\uff0c\u65e0\u6cd5\u5904\u7406\u3002</p> <p>\u6240\u4ee5\uff0c\u6700\u597d\u4e0d\u8981\u6355\u83b7 Throwable \uff0c\u9664\u975e\u4f60\u786e\u5b9a\u81ea\u5df1\u5904\u4e8e\u4e00\u79cd\u7279\u6b8a\u7684\u60c5\u51b5\u4e0b\u80fd\u591f\u5904\u7406\u9519\u8bef\u3002</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>public void doNotCatchThrowable() { \n  try { \n    // do something \n  } catch (Throwable t) { \n    // don't do this! \n  } \n}\n</code></pre>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#7","title":"7. \u4e0d\u8981\u5ffd\u7565\u5f02\u5e38","text":"<p>\u5f88\u591a\u65f6\u5019\uff0c\u5f00\u53d1\u8005\u5f88\u6709\u81ea\u4fe1\u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\uff0c\u56e0\u6b64\u5199\u4e86\u4e00\u4e2acatch\u5757\uff0c\u4f46\u662f\u6ca1\u6709\u505a\u4efb\u4f55\u5904\u7406\u6216\u8005\u8bb0\u5f55\u65e5\u5fd7\u3002</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>public void doNotIgnoreExceptions() { \n  try { \n    // do something \n  } catch (NumberFormatException e) { \n    // this will never happen \n  } \n}\n</code></pre> <p>\u4f46\u73b0\u5b9e\u662f\u7ecf\u5e38\u4f1a\u51fa\u73b0\u65e0\u6cd5\u9884\u6599\u7684\u5f02\u5e38\uff0c\u6216\u8005\u65e0\u6cd5\u786e\u5b9a\u8fd9\u91cc\u7684\u4ee3\u7801\u672a\u6765\u662f\u4e0d\u662f\u4f1a\u6539\u52a8(\u5220\u9664\u4e86\u963b\u6b62\u5f02\u5e38\u629b\u51fa\u7684\u4ee3\u7801)\uff0c\u800c\u6b64\u65f6\u7531\u4e8e\u5f02\u5e38\u88ab\u6355\u83b7\uff0c\u4f7f\u5f97\u65e0\u6cd5\u62ff\u5230\u8db3\u591f\u7684\u9519\u8bef\u4fe1\u606f\u6765\u5b9a\u4f4d\u95ee\u9898\u3002</p> <p>\u5408\u7406\u7684\u505a\u6cd5\u662f\u81f3\u5c11\u8981\u8bb0\u5f55\u5f02\u5e38\u7684\u4fe1\u606f\u3002</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>public void logAnException() { \n  try { \n    // do something \n  } catch (NumberFormatException e) { \n    log.error(\"This should never happen: \" + e); \n  } \n}\n</code></pre>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#8","title":"8. \u4e0d\u8981\u8bb0\u5f55\u5e76\u629b\u51fa\u5f02\u5e38","text":"<p>\u8fd9\u53ef\u80fd\u662f\u672c\u6587\u4e2d\u6700\u5e38\u88ab\u5ffd\u7565\u7684\u6700\u4f73\u5b9e\u8df5\u3002\u53ef\u4ee5\u53d1\u73b0\u5f88\u591a\u4ee3\u7801\u751a\u81f3\u7c7b\u5e93\u4e2d\u90fd\u4f1a\u6709\u6355\u83b7\u5f02\u5e38\u3001\u8bb0\u5f55\u65e5\u5fd7\u5e76\u518d\u6b21\u629b\u51fa\u7684\u903b\u8f91\u3002\u5982\u4e0b\uff1a</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>try { \n  new Long(\"xyz\"); \n} catch (NumberFormatException e) { \n  log.error(e); \n  throw e; \n}\n</code></pre> <p>\u8fd9\u4e2a\u5904\u7406\u903b\u8f91\u770b\u7740\u662f\u5408\u7406\u7684\u3002\u4f46\u8fd9\u7ecf\u5e38\u4f1a\u7ed9\u540c\u4e00\u4e2a\u5f02\u5e38\u8f93\u51fa\u591a\u6761\u65e5\u5fd7\u3002\u5982\u4e0b\uff1a</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>17:44:28,945 ERROR TestExceptionHandling:65 - java.lang.NumberFormatException: For input string: \"xyz\" \n  Exception in thread \"main\" java.lang.NumberFormatException: For input string: \"xyz\" \n    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65) \n    at java.lang.Long.parseLong(Long.java:589) at java.lang.Long.(Long.java:965) \n    at com.stackify.example.TestExceptionHandling.logAndThrowException(TestExceptionHandling.java:63) \n    at com.stackify.example.TestExceptionHandling.main(TestExceptionHandling.java:58)\n</code></pre> <p>\u5982\u4e0a\u6240\u793a\uff0c\u540e\u9762\u7684\u65e5\u5fd7\u4e5f\u6ca1\u6709\u9644\u52a0\u66f4\u6709\u7528\u7684\u4fe1\u606f\u3002\u5982\u679c\u60f3\u8981\u63d0\u4f9b\u66f4\u52a0\u6709\u7528\u7684\u4fe1\u606f\uff0c\u90a3\u4e48\u53ef\u4ee5\u5c06\u5f02\u5e38\u5305\u88c5\u4e3a\u81ea\u5b9a\u4e49\u5f02\u5e38\u3002</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>public void wrapException(String input) throws MyBusinessException { \n  try { \n    // do something \n  } catch (NumberFormatException e) { \n    throw new MyBusinessException(\"A message that describes the error.\", e); \n  } \n}\n</code></pre> <p>\u56e0\u6b64\uff0c\u4ec5\u4ec5\u5f53\u60f3\u8981\u5904\u7406\u5f02\u5e38\u65f6\u624d\u53bb\u6355\u83b7\uff0c\u5426\u5219\u53ea\u9700\u8981\u5728\u65b9\u6cd5\u7b7e\u540d\u4e2d\u58f0\u660e\u8ba9\u8c03\u7528\u8005\u53bb\u5904\u7406\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#9","title":"9. \u5305\u88c5\u5f02\u5e38\u65f6\u4e0d\u8981\u629b\u5f03\u539f\u59cb\u7684\u5f02\u5e38","text":"<p>\u6355\u83b7\u6807\u51c6\u5f02\u5e38\u5e76\u5305\u88c5\u4e3a\u81ea\u5b9a\u4e49\u5f02\u5e38\u662f\u4e00\u4e2a\u5f88\u5e38\u89c1\u7684\u505a\u6cd5\u3002\u8fd9\u6837\u53ef\u4ee5\u6dfb\u52a0\u66f4\u4e3a\u5177\u4f53\u7684\u5f02\u5e38\u4fe1\u606f\u5e76\u80fd\u591f\u505a\u9488\u5bf9\u7684\u5f02\u5e38\u5904\u7406\u3002 \u5728\u4f60\u8fd9\u6837\u505a\u65f6\uff0c\u8bf7\u786e\u4fdd\u5c06\u539f\u59cb\u5f02\u5e38\u8bbe\u7f6e\u4e3a\u539f\u56e0\uff08\u6ce8\uff1a\u53c2\u8003\u4e0b\u65b9\u4ee3\u7801 NumberFormatException e \u4e2d\u7684\u539f\u59cb\u5f02\u5e38 e \uff09\u3002Exception \u7c7b\u63d0\u4f9b\u4e86\u7279\u6b8a\u7684\u6784\u9020\u51fd\u6570\u65b9\u6cd5\uff0c\u5b83\u63a5\u53d7\u4e00\u4e2a Throwable \u4f5c\u4e3a\u53c2\u6570\u3002\u5426\u5219\uff0c\u4f60\u5c06\u4f1a\u4e22\u5931\u5806\u6808\u8ddf\u8e2a\u548c\u539f\u59cb\u5f02\u5e38\u7684\u6d88\u606f\uff0c\u8fd9\u5c06\u4f1a\u4f7f\u5206\u6790\u5bfc\u81f4\u5f02\u5e38\u7684\u5f02\u5e38\u4e8b\u4ef6\u53d8\u5f97\u56f0\u96be\u3002</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>public void wrapException(String input) throws MyBusinessException { \n  try { \n    // do something \n  } catch (NumberFormatException e) { \n    throw new MyBusinessException(\"A message that describes the error.\", e); \n  } \n}\n</code></pre>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#10","title":"10. \u4e0d\u8981\u4f7f\u7528\u5f02\u5e38\u63a7\u5236\u7a0b\u5e8f\u7684\u6d41\u7a0b","text":"<p>\u4e0d\u5e94\u8be5\u4f7f\u7528\u5f02\u5e38\u63a7\u5236\u5e94\u7528\u7684\u6267\u884c\u6d41\u7a0b\uff0c\u4f8b\u5982\uff0c\u672c\u5e94\u8be5\u4f7f\u7528if\u8bed\u53e5\u8fdb\u884c\u6761\u4ef6\u5224\u65ad\u7684\u60c5\u51b5\u4e0b\uff0c\u4f60\u5374\u4f7f\u7528\u5f02\u5e38\u5904\u7406\uff0c\u8fd9\u662f\u975e\u5e38\u4e0d\u597d\u7684\u4e60\u60ef\uff0c\u4f1a\u4e25\u91cd\u5f71\u54cd\u5e94\u7528\u7684\u6027\u80fd\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#11","title":"11. \u4f7f\u7528\u6807\u51c6\u5f02\u5e38","text":"<p>\u5982\u679c\u4f7f\u7528\u5185\u5efa\u7684\u5f02\u5e38\u53ef\u4ee5\u89e3\u51b3\u95ee\u9898\uff0c\u5c31\u4e0d\u8981\u5b9a\u4e49\u81ea\u5df1\u7684\u5f02\u5e38\u3002Java API \u63d0\u4f9b\u4e86\u4e0a\u767e\u79cd\u9488\u5bf9\u4e0d\u540c\u60c5\u51b5\u7684\u5f02\u5e38\u7c7b\u578b\uff0c\u5728\u5f00\u53d1\u4e2d\u9996\u5148\u5c3d\u53ef\u80fd\u4f7f\u7528 Java API \u63d0\u4f9b\u7684\u5f02\u5e38\uff0c\u5982\u679c\u6807\u51c6\u7684\u5f02\u5e38\u4e0d\u80fd\u6ee1\u8db3\u4f60\u7684\u8981\u6c42\uff0c\u8fd9\u65f6\u5019\u521b\u5efa\u81ea\u5df1\u7684\u5b9a\u5236\u5f02\u5e38\u3002\u5c3d\u53ef\u80fd\u5f97\u4f7f\u7528\u6807\u51c6\u5f02\u5e38\u6709\u5229\u4e8e\u65b0\u52a0\u5165\u7684\u5f00\u53d1\u8005\u770b\u61c2\u9879\u76ee\u4ee3\u7801\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#12","title":"12. \u5f02\u5e38\u4f1a\u5f71\u54cd\u6027\u80fd","text":"<p>\u5f02\u5e38\u5904\u7406\u7684\u6027\u80fd\u6210\u672c\u975e\u5e38\u9ad8\uff0c\u6bcf\u4e2a Java \u7a0b\u5e8f\u5458\u5728\u5f00\u53d1\u65f6\u90fd\u5e94\u7262\u8bb0\u8fd9\u53e5\u8bdd\u3002\u521b\u5efa\u4e00\u4e2a\u5f02\u5e38\u975e\u5e38\u6162\uff0c\u629b\u51fa\u4e00\u4e2a\u5f02\u5e38\u53c8\u4f1a\u6d88\u80171~5ms\uff0c\u5f53\u4e00\u4e2a\u5f02\u5e38\u5728\u5e94\u7528\u7684\u591a\u4e2a\u5c42\u7ea7\u4e4b\u95f4\u4f20\u9012\u65f6\uff0c\u4f1a\u62d6\u7d2f\u6574\u4e2a\u5e94\u7528\u7684\u6027\u80fd\u3002</p> <ul> <li>\u4ec5\u5728\u5f02\u5e38\u60c5\u51b5\u4e0b\u4f7f\u7528\u5f02\u5e38\uff1b</li> <li>\u5728\u53ef\u6062\u590d\u7684\u5f02\u5e38\u60c5\u51b5\u4e0b\u4f7f\u7528\u5f02\u5e38\uff1b</li> </ul> <p>\u5c3d\u7ba1\u4f7f\u7528\u5f02\u5e38\u6709\u5229\u4e8e Java \u5f00\u53d1\uff0c\u4f46\u662f\u5728\u5e94\u7528\u4e2d\u6700\u597d\u4e0d\u8981\u6355\u83b7\u592a\u591a\u7684\u8c03\u7528\u6808\uff0c\u56e0\u4e3a\u5728\u5f88\u591a\u60c5\u51b5\u4e0b\u90fd\u4e0d\u9700\u8981\u6253\u5370\u8c03\u7528\u6808\u5c31\u77e5\u9053\u54ea\u91cc\u51fa\u9519\u4e86\u3002\u56e0\u6b64\uff0c\u5f02\u5e38\u6d88\u606f\u5e94\u8be5\u63d0\u4f9b\u6070\u5230\u597d\u5904\u7684\u4fe1\u606f\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#13","title":"13. \u603b\u7ed3","text":"<p>\u7efc\u4e0a\u6240\u8ff0\uff0c\u5f53\u4f60\u629b\u51fa\u6216\u6355\u83b7\u5f02\u5e38\u7684\u65f6\u5019\uff0c\u6709\u5f88\u591a\u4e0d\u540c\u7684\u60c5\u51b5\u9700\u8981\u8003\u8651\uff0c\u800c\u4e14\u5927\u90e8\u5206\u4e8b\u60c5\u90fd\u662f\u4e3a\u4e86\u6539\u5584\u4ee3\u7801\u7684\u53ef\u8bfb\u6027\u6216\u8005 API \u7684\u53ef\u7528\u6027\u3002</p> <p>\u5f02\u5e38\u4e0d\u4ec5\u4ec5\u662f\u4e00\u4e2a\u9519\u8bef\u63a7\u5236\u673a\u5236\uff0c\u4e5f\u662f\u4e00\u4e2a\u901a\u4fe1\u5a92\u4ecb\u3002\u56e0\u6b64\uff0c\u4e3a\u4e86\u548c\u540c\u4e8b\u66f4\u597d\u7684\u5408\u4f5c\uff0c\u4e00\u4e2a\u56e2\u961f\u5fc5\u987b\u8981\u5236\u5b9a\u51fa\u4e00\u4e2a\u6700\u4f73\u5b9e\u8df5\u548c\u89c4\u5219\uff0c\u53ea\u6709\u8fd9\u6837\uff0c\u56e2\u961f\u6210\u5458\u624d\u80fd\u7406\u89e3\u8fd9\u4e9b\u901a\u7528\u6982\u5ff5\uff0c\u540c\u65f6\u5728\u5de5\u4f5c\u4e2d\u4f7f\u7528\u5b83\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Java%E5%BC%82%E5%B8%B8%E9%9D%A2%E8%AF%95%E9%A2%98/#-java","title":"\u5f02\u5e38\u5904\u7406-\u963f\u91cc\u5df4\u5df4Java\u5f00\u53d1\u624b\u518c","text":"<ol> <li>\u3010\u5f3a\u5236\u3011Java \u7c7b\u5e93\u4e2d\u5b9a\u4e49\u7684\u53ef\u4ee5\u901a\u8fc7\u9884\u68c0\u67e5\u65b9\u5f0f\u89c4\u907f\u7684RuntimeException\u5f02\u5e38\u4e0d\u5e94\u8be5\u901a\u8fc7catch \u7684\u65b9\u5f0f\u6765\u5904\u7406\uff0c\u6bd4\u5982\uff1aNullPointerException\uff0cIndexOutOfBoundsException\u7b49\u7b49\u3002 \u8bf4\u660e\uff1a\u65e0\u6cd5\u901a\u8fc7\u9884\u68c0\u67e5\u7684\u5f02\u5e38\u9664\u5916\uff0c\u6bd4\u5982\uff0c\u5728\u89e3\u6790\u5b57\u7b26\u4e32\u5f62\u5f0f\u7684\u6570\u5b57\u65f6\uff0c\u53ef\u80fd\u5b58\u5728\u6570\u5b57\u683c\u5f0f\u9519\u8bef\uff0c\u4e0d\u5f97\u4e0d\u901a\u8fc7catch NumberFormatException\u6765\u5b9e\u73b0\u3002 \u6b63\u4f8b\uff1aif (obj != null) {\u2026} \u53cd\u4f8b\uff1atry { obj.method(); } catch (NullPointerException e) {\u2026}</li> <li>\u3010\u5f3a\u5236\u3011\u5f02\u5e38\u4e0d\u8981\u7528\u6765\u505a\u6d41\u7a0b\u63a7\u5236\uff0c\u6761\u4ef6\u63a7\u5236\u3002 \u8bf4\u660e\uff1a\u5f02\u5e38\u8bbe\u8ba1\u7684\u521d\u8877\u662f\u89e3\u51b3\u7a0b\u5e8f\u8fd0\u884c\u4e2d\u7684\u5404\u79cd\u610f\u5916\u60c5\u51b5\uff0c\u4e14\u5f02\u5e38\u7684\u5904\u7406\u6548\u7387\u6bd4\u6761\u4ef6\u5224\u65ad\u65b9\u5f0f\u8981\u4f4e\u5f88\u591a\u3002</li> <li>\u3010\u5f3a\u5236\u3011catch\u65f6\u8bf7\u5206\u6e05\u7a33\u5b9a\u4ee3\u7801\u548c\u975e\u7a33\u5b9a\u4ee3\u7801\uff0c\u7a33\u5b9a\u4ee3\u7801\u6307\u7684\u662f\u65e0\u8bba\u5982\u4f55\u4e0d\u4f1a\u51fa\u9519\u7684\u4ee3\u7801\u3002\u5bf9\u4e8e\u975e\u7a33\u5b9a\u4ee3\u7801\u7684catch\u5c3d\u53ef\u80fd\u8fdb\u884c\u533a\u5206\u5f02\u5e38\u7c7b\u578b\uff0c\u518d\u505a\u5bf9\u5e94\u7684\u5f02\u5e38\u5904\u7406\u3002 \u8bf4\u660e\uff1a\u5bf9\u5927\u6bb5\u4ee3\u7801\u8fdb\u884ctry-catch\uff0c\u4f7f\u7a0b\u5e8f\u65e0\u6cd5\u6839\u636e\u4e0d\u540c\u7684\u5f02\u5e38\u505a\u51fa\u6b63\u786e\u7684\u5e94\u6fc0\u53cd\u5e94\uff0c\u4e5f\u4e0d\u5229\u4e8e\u5b9a\u4f4d\u95ee\u9898\uff0c\u8fd9\u662f\u4e00\u79cd\u4e0d\u8d1f\u8d23\u4efb\u7684\u8868\u73b0\u3002 \u6b63\u4f8b\uff1a\u7528\u6237\u6ce8\u518c\u7684\u573a\u666f\u4e2d\uff0c\u5982\u679c\u7528\u6237\u8f93\u5165\u975e\u6cd5\u5b57\u7b26\uff0c\u6216\u7528\u6237\u540d\u79f0\u5df2\u5b58\u5728\uff0c\u6216\u7528\u6237\u8f93\u5165\u5bc6\u7801\u8fc7\u4e8e\u7b80\u5355\uff0c\u5728\u7a0b\u5e8f\u4e0a\u4f5c\u51fa\u5206\u95e8\u522b\u7c7b\u7684\u5224\u65ad\uff0c\u5e76\u63d0\u793a\u7ed9\u7528\u6237\u3002</li> <li>\u3010\u5f3a\u5236\u3011\u6355\u83b7\u5f02\u5e38\u662f\u4e3a\u4e86\u5904\u7406\u5b83\uff0c\u4e0d\u8981\u6355\u83b7\u4e86\u5374\u4ec0\u4e48\u90fd\u4e0d\u5904\u7406\u800c\u629b\u5f03\u4e4b\uff0c\u5982\u679c\u4e0d\u60f3\u5904\u7406\u5b83\uff0c\u8bf7\u5c06\u8be5\u5f02\u5e38\u629b\u7ed9\u5b83\u7684\u8c03\u7528\u8005\u3002\u6700\u5916\u5c42\u7684\u4e1a\u52a1\u4f7f\u7528\u8005\uff0c\u5fc5\u987b\u5904\u7406\u5f02\u5e38\uff0c\u5c06\u5176\u8f6c\u5316\u4e3a\u7528\u6237\u53ef\u4ee5\u7406\u89e3\u7684\u5185\u5bb9\u3002</li> <li>\u3010\u5f3a\u5236\u3011\u6709try\u5757\u653e\u5230\u4e86\u4e8b\u52a1\u4ee3\u7801\u4e2d\uff0ccatch\u5f02\u5e38\u540e\uff0c\u5982\u679c\u9700\u8981\u56de\u6eda\u4e8b\u52a1\uff0c\u4e00\u5b9a\u8981\u6ce8\u610f\u624b\u52a8\u56de\u6eda\u4e8b\u52a1\u3002</li> <li>\u3010\u5f3a\u5236\u3011finally\u5757\u5fc5\u987b\u5bf9\u8d44\u6e90\u5bf9\u8c61\u3001\u6d41\u5bf9\u8c61\u8fdb\u884c\u5173\u95ed\uff0c\u6709\u5f02\u5e38\u4e5f\u8981\u505atry-catch\u3002 \u8bf4\u660e\uff1a\u5982\u679cJDK7\u53ca\u4ee5\u4e0a\uff0c\u53ef\u4ee5\u4f7f\u7528try-with-resources\u65b9\u5f0f\u3002</li> <li>\u3010\u5f3a\u5236\u3011\u4e0d\u8981\u5728finally\u5757\u4e2d\u4f7f\u7528return\u3002 \u8bf4\u660e\uff1atry\u5757\u4e2d\u7684return\u8bed\u53e5\u6267\u884c\u6210\u529f\u540e\uff0c\u5e76\u4e0d\u9a6c\u4e0a\u8fd4\u56de\uff0c\u800c\u662f\u7ee7\u7eed\u6267\u884cfinally\u5757\u4e2d\u7684\u8bed\u53e5\uff0c\u5982\u679c\u6b64\u5904\u5b58\u5728return\u8bed\u53e5\uff0c\u5219\u5728\u6b64\u76f4\u63a5\u8fd4\u56de\uff0c\u65e0\u60c5\u4e22\u5f03\u6389try\u5757\u4e2d\u7684\u8fd4\u56de\u70b9\u3002 \u53cd\u4f8b\uff1a</li> </ol> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>private int x = 0; \npublic int checkReturn() { \n  try { \n    // x\u7b49\u4e8e1\uff0c\u6b64\u5904\u4e0d\u8fd4\u56de \n    return ++x; \n  } finally { \n    // \u8fd4\u56de\u7684\u7ed3\u679c\u662f2 \n    return ++x; \n  } \n}\n</code></pre> <ol> <li>\u3010\u5f3a\u5236\u3011\u6355\u83b7\u5f02\u5e38\u4e0e\u629b\u5f02\u5e38\uff0c\u5fc5\u987b\u662f\u5b8c\u5168\u5339\u914d\uff0c\u6216\u8005\u6355\u83b7\u5f02\u5e38\u662f\u629b\u5f02\u5e38\u7684\u7236\u7c7b\u3002 \u8bf4\u660e\uff1a\u5982\u679c\u9884\u671f\u5bf9\u65b9\u629b\u7684\u662f\u7ee3\u7403\uff0c\u5b9e\u9645\u63a5\u5230\u7684\u662f\u94c5\u7403\uff0c\u5c31\u4f1a\u4ea7\u751f\u610f\u5916\u60c5\u51b5\u3002</li> <li>\u3010\u5f3a\u5236\u3011\u5728\u8c03\u7528RPC\u3001\u4e8c\u65b9\u5305\u3001\u6216\u52a8\u6001\u751f\u6210\u7c7b\u7684\u76f8\u5173\u65b9\u6cd5\u65f6\uff0c\u6355\u6349\u5f02\u5e38\u5fc5\u987b\u4f7f\u7528Throwable\u7c7b\u6765\u8fdb\u884c\u62e6\u622a\u3002 \u8bf4\u660e\uff1a\u901a\u8fc7\u53cd\u5c04\u673a\u5236\u6765\u8c03\u7528\u65b9\u6cd5\uff0c\u5982\u679c\u627e\u4e0d\u5230\u65b9\u6cd5\uff0c\u629b\u51faNoSuchMethodException\u3002\u4ec0\u4e48\u60c5\u51b5\u4f1a\u629b\u51faNoSuchMethodError\u5462\uff1f\u4e8c\u65b9\u5305\u5728\u7c7b\u51b2\u7a81\u65f6\uff0c\u4ef2\u88c1\u673a\u5236\u53ef\u80fd\u5bfc\u81f4\u5f15\u5165\u975e\u9884\u671f\u7684\u7248\u672c\u4f7f\u7c7b\u7684\u65b9\u6cd5\u7b7e\u540d\u4e0d\u5339\u914d\uff0c\u6216\u8005\u5728\u5b57\u8282\u7801\u4fee\u6539\u6846\u67b6\uff08\u6bd4\u5982\uff1aASM\uff09\u52a8\u6001\u521b\u5efa\u6216\u4fee\u6539\u7c7b\u65f6\uff0c\u4fee\u6539\u4e86\u76f8\u5e94\u7684\u65b9\u6cd5\u7b7e\u540d\u3002\u8fd9\u4e9b\u60c5\u51b5\uff0c\u5373\u4f7f\u4ee3\u7801\u7f16\u8bd1\u671f\u662f\u6b63\u786e\u7684\uff0c\u4f46\u5728\u4ee3\u7801\u8fd0\u884c\u671f\u65f6\uff0c\u4f1a\u629b\u51faNoSuchMethodError\u3002</li> <li>\u3010\u63a8\u8350\u3011\u65b9\u6cd5\u7684\u8fd4\u56de\u503c\u53ef\u4ee5\u4e3anull\uff0c\u4e0d\u5f3a\u5236\u8fd4\u56de\u7a7a\u96c6\u5408\uff0c\u6216\u8005\u7a7a\u5bf9\u8c61\u7b49\uff0c\u5fc5\u987b\u6dfb\u52a0\u6ce8\u91ca\u5145\u5206\u8bf4\u660e\u4ec0\u4e48\u60c5\u51b5\u4e0b\u4f1a\u8fd4\u56denull\u503c\u3002 \u8bf4\u660e\uff1a\u672c\u624b\u518c\u660e\u786e\u9632\u6b62NPE\u662f\u8c03\u7528\u8005\u7684\u8d23\u4efb\u3002\u5373\u4f7f\u88ab\u8c03\u7528\u65b9\u6cd5\u8fd4\u56de\u7a7a\u96c6\u5408\u6216\u8005\u7a7a\u5bf9\u8c61\uff0c\u5bf9\u8c03\u7528\u8005\u6765\u8bf4\uff0c\u4e5f\u5e76\u975e\u9ad8\u6795\u65e0\u5fe7\uff0c\u5fc5\u987b\u8003\u8651\u5230\u8fdc\u7a0b\u8c03\u7528\u5931\u8d25\u3001\u5e8f\u5217\u5316\u5931\u8d25\u3001\u8fd0\u884c\u65f6\u5f02\u5e38\u7b49\u573a\u666f\u8fd4\u56denull\u7684\u60c5\u51b5\u3002</li> <li>\u3010\u63a8\u8350\u3011\u9632\u6b62NPE\uff0c\u662f\u7a0b\u5e8f\u5458\u7684\u57fa\u672c\u4fee\u517b\uff0c\u6ce8\u610fNPE\u4ea7\u751f\u7684\u573a\u666f\uff1a 1\uff09 \u8fd4\u56de\u7c7b\u578b\u4e3a\u57fa\u672c\u6570\u636e\u7c7b\u578b\uff0creturn\u5305\u88c5\u6570\u636e\u7c7b\u578b\u7684\u5bf9\u8c61\u65f6\uff0c\u81ea\u52a8\u62c6\u7bb1\u6709\u53ef\u80fd\u4ea7\u751fNPE\u3002 \u53cd\u4f8b\uff1apublic int f() { return Integer\u5bf9\u8c61}\uff0c \u5982\u679c\u4e3anull\uff0c\u81ea\u52a8\u89e3\u7bb1\u629bNPE\u3002 2\uff09 \u6570\u636e\u5e93\u7684\u67e5\u8be2\u7ed3\u679c\u53ef\u80fd\u4e3anull\u3002 3\uff09 \u96c6\u5408\u91cc\u7684\u5143\u7d20\u5373\u4f7fisNotEmpty\uff0c\u53d6\u51fa\u7684\u6570\u636e\u5143\u7d20\u4e5f\u53ef\u80fd\u4e3anull\u3002 4\uff09 \u8fdc\u7a0b\u8c03\u7528\u8fd4\u56de\u5bf9\u8c61\u65f6\uff0c\u4e00\u5f8b\u8981\u6c42\u8fdb\u884c\u7a7a\u6307\u9488\u5224\u65ad\uff0c\u9632\u6b62NPE\u3002 5\uff09 \u5bf9\u4e8eSession\u4e2d\u83b7\u53d6\u7684\u6570\u636e\uff0c\u5efa\u8bae\u8fdb\u884cNPE\u68c0\u67e5\uff0c\u907f\u514d\u7a7a\u6307\u9488\u3002 6\uff09 \u7ea7\u8054\u8c03\u7528obj.getA().getB().getC()\uff1b\u4e00\u8fde\u4e32\u8c03\u7528\uff0c\u6613\u4ea7\u751fNPE\u3002    \u6b63\u4f8b\uff1a\u4f7f\u7528JDK8\u7684Optional\u7c7b\u6765\u9632\u6b62NPE\u95ee\u9898\u3002</li> <li>\u3010\u63a8\u8350\u3011\u5b9a\u4e49\u65f6\u533a\u5206unchecked / checked \u5f02\u5e38\uff0c\u907f\u514d\u76f4\u63a5\u629b\u51fanew RuntimeException()\uff0c\u66f4\u4e0d\u5141\u8bb8\u629b\u51faException\u6216\u8005Throwable\uff0c\u5e94\u4f7f\u7528\u6709\u4e1a\u52a1\u542b\u4e49\u7684\u81ea\u5b9a\u4e49\u5f02\u5e38\u3002\u63a8\u8350\u4e1a\u754c\u5df2\u5b9a\u4e49\u8fc7\u7684\u81ea\u5b9a\u4e49\u5f02\u5e38\uff0c\u5982\uff1aDAOException / ServiceException\u7b49\u3002</li> <li>\u3010\u53c2\u8003\u3011\u5bf9\u4e8e\u516c\u53f8\u5916\u7684http/api\u5f00\u653e\u63a5\u53e3\u5fc5\u987b\u4f7f\u7528\u201c\u9519\u8bef\u7801\u201d\uff1b\u800c\u5e94\u7528\u5185\u90e8\u63a8\u8350\u5f02\u5e38\u629b\u51fa\uff1b\u8de8\u5e94\u7528\u95f4RPC\u8c03\u7528\u4f18\u5148\u8003\u8651\u4f7f\u7528Result\u65b9\u5f0f\uff0c\u5c01\u88c5isSuccess()\u65b9\u6cd5\u3001\u201c\u9519\u8bef\u7801\u201d\u3001\u201c\u9519\u8bef\u7b80\u77ed\u4fe1\u606f\u201d\u3002 \u8bf4\u660e\uff1a\u5173\u4e8eRPC\u65b9\u6cd5\u8fd4\u56de\u65b9\u5f0f\u4f7f\u7528Result\u65b9\u5f0f\u7684\u7406\u7531\uff1a 1\uff09\u4f7f\u7528\u629b\u5f02\u5e38\u8fd4\u56de\u65b9\u5f0f\uff0c\u8c03\u7528\u65b9\u5982\u679c\u6ca1\u6709\u6355\u83b7\u5230\u5c31\u4f1a\u4ea7\u751f\u8fd0\u884c\u65f6\u9519\u8bef\u3002 2\uff09\u5982\u679c\u4e0d\u52a0\u6808\u4fe1\u606f\uff0c\u53ea\u662fnew\u81ea\u5b9a\u4e49\u5f02\u5e38\uff0c\u52a0\u5165\u81ea\u5df1\u7684\u7406\u89e3\u7684error message\uff0c\u5bf9\u4e8e\u8c03\u7528\u7aef\u89e3\u51b3\u95ee\u9898\u7684\u5e2e\u52a9\u4e0d\u4f1a\u592a\u591a\u3002\u5982\u679c\u52a0\u4e86\u6808\u4fe1\u606f\uff0c\u5728\u9891\u7e41\u8c03\u7528\u51fa\u9519\u7684\u60c5\u51b5\u4e0b\uff0c\u6570\u636e\u5e8f\u5217\u5316\u548c\u4f20\u8f93\u7684\u6027\u80fd\u635f\u8017\u4e5f\u662f\u95ee\u9898\u3002</li> <li>\u3010\u53c2\u8003\u3011\u907f\u514d\u51fa\u73b0\u91cd\u590d\u7684\u4ee3\u7801\uff08Don\u2019t Repeat Yourself\uff09\uff0c\u5373DRY\u539f\u5219\u3002 \u8bf4\u660e\uff1a\u968f\u610f\u590d\u5236\u548c\u7c98\u8d34\u4ee3\u7801\uff0c\u5fc5\u7136\u4f1a\u5bfc\u81f4\u4ee3\u7801\u7684\u91cd\u590d\uff0c\u5728\u4ee5\u540e\u9700\u8981\u4fee\u6539\u65f6\uff0c\u9700\u8981\u4fee\u6539\u6240\u6709\u7684\u526f\u672c\uff0c\u5bb9\u6613\u9057\u6f0f\u3002\u5fc5\u8981\u65f6\u62bd\u53d6\u5171\u6027\u65b9\u6cd5\uff0c\u6216\u8005\u62bd\u8c61\u516c\u5171\u7c7b\uff0c\u751a\u81f3\u662f\u7ec4\u4ef6\u5316\u3002 \u6b63\u4f8b\uff1a\u4e00\u4e2a\u7c7b\u4e2d\u6709\u591a\u4e2apublic\u65b9\u6cd5\uff0c\u90fd\u9700\u8981\u8fdb\u884c\u6570\u884c\u76f8\u540c\u7684\u53c2\u6570\u6821\u9a8c\u64cd\u4f5c\uff0c\u8fd9\u4e2a\u65f6\u5019\u8bf7\u62bd\u53d6\uff1a    private boolean checkParam(DTO dto) {\u2026}</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/","title":"MySQL\u9762\u8bd5","text":"<p>\u76ee\u5f55</p> <p>\u6570\u636e\u5e93\u57fa\u7840\u77e5\u8bc6</p> <p>\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u6570\u636e\u5e93</p> <p>\u4ec0\u4e48\u662fSQL\uff1f</p> <p>\u4ec0\u4e48\u662fMySQL?</p> <p>\u6570\u636e\u5e93\u4e09\u5927\u8303\u5f0f\u662f\u4ec0\u4e48</p> <p>mysql\u6709\u5173\u6743\u9650\u7684\u8868\u90fd\u6709\u54ea\u51e0\u4e2a</p> <p>MySQL\u7684binlog\u6709\u6709\u51e0\u79cd\u5f55\u5165\u683c\u5f0f\uff1f\u5206\u522b\u6709\u4ec0\u4e48\u533a\u522b\uff1f</p> <p>\u6570\u636e\u7c7b\u578b</p> <p>mysql\u6709\u54ea\u4e9b\u6570\u636e\u7c7b\u578b</p> <p>\u5f15\u64ce</p> <p>MySQL\u5b58\u50a8\u5f15\u64ceMyISAM\u4e0eInnoDB\u533a\u522b</p> <p>MyISAM\u7d22\u5f15\u4e0eInnoDB\u7d22\u5f15\u7684\u533a\u522b\uff1f</p> <p>InnoDB\u5f15\u64ce\u76844\u5927\u7279\u6027</p> <p>\u5b58\u50a8\u5f15\u64ce\u9009\u62e9</p> <p>\u7d22\u5f15</p> <p>\u4ec0\u4e48\u662f\u7d22\u5f15\uff1f</p> <p>\u7d22\u5f15\u6709\u54ea\u4e9b\u4f18\u7f3a\u70b9\uff1f</p> <p>\u7d22\u5f15\u4f7f\u7528\u573a\u666f\uff08\u91cd\u70b9\uff09</p> <p>\u7d22\u5f15\u6709\u54ea\u51e0\u79cd\u7c7b\u578b\uff1f</p> <p>\u7d22\u5f15\u7684\u6570\u636e\u7ed3\u6784\uff08b\u6811\uff0chash\uff09</p> <p>\u7d22\u5f15\u7684\u57fa\u672c\u539f\u7406</p> <p>\u7d22\u5f15\u7b97\u6cd5\u6709\u54ea\u4e9b\uff1f</p> <p>\u7d22\u5f15\u8bbe\u8ba1\u7684\u539f\u5219\uff1f</p> <p>\u521b\u5efa\u7d22\u5f15\u7684\u539f\u5219\uff08\u91cd\u4e2d\u4e4b\u91cd\uff09</p> <p>\u521b\u5efa\u7d22\u5f15\u7684\u4e09\u79cd\u65b9\u5f0f\uff0c\u5220\u9664\u7d22\u5f15</p> <p>\u521b\u5efa\u7d22\u5f15\u65f6\u9700\u8981\u6ce8\u610f\u4ec0\u4e48\uff1f</p> <p>\u4f7f\u7528\u7d22\u5f15\u67e5\u8be2\u4e00\u5b9a\u80fd\u63d0\u9ad8\u67e5\u8be2\u7684\u6027\u80fd\u5417\uff1f\u4e3a\u4ec0\u4e48</p> <p>\u767e\u4e07\u7ea7\u522b\u6216\u4ee5\u4e0a\u7684\u6570\u636e\u5982\u4f55\u5220\u9664</p> <p>\u524d\u7f00\u7d22\u5f15</p> <p>\u4ec0\u4e48\u662f\u6700\u5de6\u524d\u7f00\u539f\u5219\uff1f\u4ec0\u4e48\u662f\u6700\u5de6\u5339\u914d\u539f\u5219</p> <p>B\u6811\u548cB+\u6811\u7684\u533a\u522b</p> <p>\u4f7f\u7528B\u6811\u7684\u597d\u5904</p> <p>\u4f7f\u7528B+\u6811\u7684\u597d\u5904</p> <p>Hash\u7d22\u5f15\u548cB+\u6811\u6240\u6709\u6709\u4ec0\u4e48\u533a\u522b\u6216\u8005\u8bf4\u4f18\u52a3\u5462?</p> <p>\u6570\u636e\u5e93\u4e3a\u4ec0\u4e48\u4f7f\u7528B+\u6811\u800c\u4e0d\u662fB\u6811</p> <p>B+\u6811\u5728\u6ee1\u8db3\u805a\u7c07\u7d22\u5f15\u548c\u8986\u76d6\u7d22\u5f15\u7684\u65f6\u5019\u4e0d\u9700\u8981\u56de\u8868\u67e5\u8be2\u6570\u636e\uff0c</p> <p>\u4ec0\u4e48\u662f\u805a\u7c07\u7d22\u5f15\uff1f\u4f55\u65f6\u4f7f\u7528\u805a\u7c07\u7d22\u5f15\u4e0e\u975e\u805a\u7c07\u7d22\u5f15</p> <p>\u975e\u805a\u7c07\u7d22\u5f15\u4e00\u5b9a\u4f1a\u56de\u8868\u67e5\u8be2\u5417\uff1f</p> <p>\u8054\u5408\u7d22\u5f15\u662f\u4ec0\u4e48\uff1f\u4e3a\u4ec0\u4e48\u9700\u8981\u6ce8\u610f\u8054\u5408\u7d22\u5f15\u4e2d\u7684\u987a\u5e8f\uff1f</p> <p>\u4e8b\u52a1</p> <p>\u4ec0\u4e48\u662f\u6570\u636e\u5e93\u4e8b\u52a1\uff1f</p> <p>\u4e8b\u7269\u7684\u56db\u5927\u7279\u6027(ACID)\u4ecb\u7ecd\u4e00\u4e0b?</p> <p>\u4ec0\u4e48\u662f\u810f\u8bfb\uff1f\u5e7b\u8bfb\uff1f\u4e0d\u53ef\u91cd\u590d\u8bfb\uff1f</p> <p>\u4ec0\u4e48\u662f\u4e8b\u52a1\u7684\u9694\u79bb\u7ea7\u522b\uff1fMySQL\u7684\u9ed8\u8ba4\u9694\u79bb\u7ea7\u522b\u662f\u4ec0\u4e48\uff1f</p> <p>\u9501</p> <p>\u5bf9MySQL\u7684\u9501\u4e86\u89e3\u5417</p> <p>\u9694\u79bb\u7ea7\u522b\u4e0e\u9501\u7684\u5173\u7cfb</p> <p>\u6309\u7167\u9501\u7684\u7c92\u5ea6\u5206\u6570\u636e\u5e93\u9501\u6709\u54ea\u4e9b\uff1f\u9501\u673a\u5236\u4e0eInnoDB\u9501\u7b97\u6cd5</p> <p>\u4ece\u9501\u7684\u7c7b\u522b\u4e0a\u5206MySQL\u90fd\u6709\u54ea\u4e9b\u9501\u5462\uff1f\u50cf\u4e0a\u9762\u90a3\u6837\u5b50\u8fdb\u884c\u9501\u5b9a\u5c82\u4e0d\u662f\u6709\u70b9\u963b\u788d\u5e76\u53d1\u6548\u7387\u4e86</p> <p>MySQL\u4e2dInnoDB\u5f15\u64ce\u7684\u884c\u9501\u662f\u600e\u4e48\u5b9e\u73b0\u7684\uff1f</p> <p>InnoDB\u5b58\u50a8\u5f15\u64ce\u7684\u9501\u7684\u7b97\u6cd5\u6709\u4e09\u79cd</p> <p>\u4ec0\u4e48\u662f\u6b7b\u9501\uff1f\u600e\u4e48\u89e3\u51b3\uff1f</p> <p>\u6570\u636e\u5e93\u7684\u4e50\u89c2\u9501\u548c\u60b2\u89c2\u9501\u662f\u4ec0\u4e48\uff1f\u600e\u4e48\u5b9e\u73b0\u7684\uff1f</p> <p>\u89c6\u56fe</p> <p>\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u89c6\u56fe\uff1f\u4ec0\u4e48\u662f\u89c6\u56fe\uff1f</p> <p>\u89c6\u56fe\u6709\u54ea\u4e9b\u7279\u70b9\uff1f</p> <p>\u89c6\u56fe\u7684\u4f7f\u7528\u573a\u666f\u6709\u54ea\u4e9b\uff1f</p> <p>\u89c6\u56fe\u7684\u4f18\u70b9</p> <p>\u89c6\u56fe\u7684\u7f3a\u70b9</p> <p>\u4ec0\u4e48\u662f\u6e38\u6807\uff1f</p> <p>\u5b58\u50a8\u8fc7\u7a0b\u4e0e\u51fd\u6570</p> <p>\u4ec0\u4e48\u662f\u5b58\u50a8\u8fc7\u7a0b\uff1f\u6709\u54ea\u4e9b\u4f18\u7f3a\u70b9\uff1f</p> <p>\u89e6\u53d1\u5668</p> <p>\u4ec0\u4e48\u662f\u89e6\u53d1\u5668\uff1f\u89e6\u53d1\u5668\u7684\u4f7f\u7528\u573a\u666f\u6709\u54ea\u4e9b\uff1f</p> <p>MySQL\u4e2d\u90fd\u6709\u54ea\u4e9b\u89e6\u53d1\u5668\uff1f</p> <p>\u5e38\u7528SQL\u8bed\u53e5</p> <p>SQL\u8bed\u53e5\u4e3b\u8981\u5206\u4e3a\u54ea\u51e0\u7c7b</p> <p>\u8d85\u952e\u3001\u5019\u9009\u952e\u3001\u4e3b\u952e\u3001\u5916\u952e\u5206\u522b\u662f\u4ec0\u4e48\uff1f</p> <p>SQL \u7ea6\u675f\u6709\u54ea\u51e0\u79cd\uff1f</p> <p>\u516d\u79cd\u5173\u8054\u67e5\u8be2</p> <p>\u4ec0\u4e48\u662f\u5b50\u67e5\u8be2</p> <p>\u5b50\u67e5\u8be2\u7684\u4e09\u79cd\u60c5\u51b5</p> <p>mysql\u4e2d in \u548c exists \u533a\u522b</p> <p>varchar\u4e0echar\u7684\u533a\u522b</p> <p>varchar(50)\u4e2d50\u7684\u6db5\u4e49</p> <p>int(20)\u4e2d20\u7684\u6db5\u4e49</p> <p>mysql\u4e3a\u4ec0\u4e48\u8fd9\u4e48\u8bbe\u8ba1</p> <p>mysql\u4e2dint(10)\u548cchar(10)\u4ee5\u53cavarchar(10)\u7684\u533a\u522b</p> <p>FLOAT\u548cDOUBLE\u7684\u533a\u522b\u662f\u4ec0\u4e48\uff1f</p> <p>drop\u3001delete\u4e0etruncate\u7684\u533a\u522b</p> <p>UNION\u4e0eUNION ALL\u7684\u533a\u522b\uff1f</p> <p>SQL\u4f18\u5316</p> <p>\u5982\u4f55\u5b9a\u4f4d\u53ca\u4f18\u5316SQL\u8bed\u53e5\u7684\u6027\u80fd\u95ee\u9898\uff1f\u521b\u5efa\u7684\u7d22\u5f15\u6709\u6ca1\u6709\u88ab\u4f7f\u7528\u5230?\u6216\u8005\u8bf4\u600e\u4e48\u624d\u53ef\u4ee5\u77e5\u9053\u8fd9\u6761\u8bed\u53e5\u8fd0\u884c\u5f88\u6162\u7684\u539f\u56e0\uff1f</p> <p>SQL\u7684\u751f\u547d\u5468\u671f\uff1f</p> <p>\u5927\u8868\u6570\u636e\u67e5\u8be2\uff0c\u600e\u4e48\u4f18\u5316</p> <p>\u8d85\u5927\u5206\u9875\u600e\u4e48\u5904\u7406\uff1f</p> <p>mysql \u5206\u9875</p> <p>\u6162\u67e5\u8be2\u65e5\u5fd7</p> <p>\u5173\u5fc3\u8fc7\u4e1a\u52a1\u7cfb\u7edf\u91cc\u9762\u7684sql\u8017\u65f6\u5417\uff1f\u7edf\u8ba1\u8fc7\u6162\u67e5\u8be2\u5417\uff1f\u5bf9\u6162\u67e5\u8be2\u90fd\u600e\u4e48\u4f18\u5316\u8fc7\uff1f</p> <p>\u4e3a\u4ec0\u4e48\u8981\u5c3d\u91cf\u8bbe\u5b9a\u4e00\u4e2a\u4e3b\u952e\uff1f</p> <p>\u4e3b\u952e\u4f7f\u7528\u81ea\u589eID\u8fd8\u662fUUID\uff1f</p> <p>\u5b57\u6bb5\u4e3a\u4ec0\u4e48\u8981\u6c42\u5b9a\u4e49\u4e3anot null\uff1f</p> <p>\u5982\u679c\u8981\u5b58\u50a8\u7528\u6237\u7684\u5bc6\u7801\u6563\u5217\uff0c\u5e94\u8be5\u4f7f\u7528\u4ec0\u4e48\u5b57\u6bb5\u8fdb\u884c\u5b58\u50a8\uff1f</p> <p>\u4f18\u5316\u67e5\u8be2\u8fc7\u7a0b\u4e2d\u7684\u6570\u636e\u8bbf\u95ee</p> <p>\u4f18\u5316\u957f\u96be\u7684\u67e5\u8be2\u8bed\u53e5</p> <p>\u4f18\u5316\u7279\u5b9a\u7c7b\u578b\u7684\u67e5\u8be2\u8bed\u53e5</p> <p>\u4f18\u5316\u5173\u8054\u67e5\u8be2</p> <p>\u4f18\u5316\u5b50\u67e5\u8be2</p> <p>\u4f18\u5316LIMIT\u5206\u9875</p> <p>\u4f18\u5316UNION\u67e5\u8be2</p> <p>\u4f18\u5316WHERE\u5b50\u53e5</p> <p>\u6570\u636e\u5e93\u4f18\u5316</p> <p>\u4e3a\u4ec0\u4e48\u8981\u4f18\u5316</p> <p>\u6570\u636e\u5e93\u7ed3\u6784\u4f18\u5316</p> <p>MySQL\u6570\u636e\u5e93cpu\u98d9\u5347\u5230500%\u7684\u8bdd\u4ed6\u600e\u4e48\u5904\u7406\uff1f</p> <p>\u5927\u8868\u600e\u4e48\u4f18\u5316\uff1f\u67d0\u4e2a\u8868\u6709\u8fd1\u5343\u4e07\u6570\u636e\uff0cCRUD\u6bd4\u8f83\u6162\uff0c\u5982\u4f55\u4f18\u5316\uff1f\u5206\u5e93\u5206\u8868\u4e86\u662f\u600e\u4e48\u505a\u7684\uff1f\u5206\u8868\u5206\u5e93\u4e86\u6709\u4ec0\u4e48\u95ee\u9898\uff1f\u6709\u7528\u5230\u4e2d\u95f4\u4ef6\u4e48\uff1f\u4ed6\u4eec\u7684\u539f\u7406\u77e5\u9053\u4e48\uff1f</p> <p>\u5782\u76f4\u5206\u8868</p> <p>\u9002\u7528\u573a\u666f</p> <p>\u7f3a\u70b9</p> <p>\u6c34\u5e73\u5206\u8868\uff1a</p> <p>\u9002\u7528\u573a\u666f</p> <p>\u6c34\u5e73\u5207\u5206\u7684\u7f3a\u70b9</p> <p>MySQL\u7684\u590d\u5236\u539f\u7406\u4ee5\u53ca\u6d41\u7a0b</p> <p>\u8bfb\u5199\u5206\u79bb\u6709\u54ea\u4e9b\u89e3\u51b3\u65b9\u6848\uff1f</p> <p>\u5907\u4efd\u8ba1\u5212\uff0cmysqldump\u4ee5\u53caxtranbackup\u7684\u5b9e\u73b0\u539f\u7406</p> <p>\u6570\u636e\u8868\u635f\u574f\u7684\u4fee\u590d\u65b9\u5f0f\u6709\u54ea\u4e9b\uff1f</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_1","title":"\u6570\u636e\u5e93\u57fa\u7840\u77e5\u8bc6","text":""},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_2","title":"\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u6570\u636e\u5e93","text":"<p>\u6570\u636e\u4fdd\u5b58\u5728\u5185\u5b58</p> <p>\u4f18\u70b9\uff1a \u5b58\u53d6\u901f\u5ea6\u5feb</p> <p>\u7f3a\u70b9\uff1a \u6570\u636e\u4e0d\u80fd\u6c38\u4e45\u4fdd\u5b58</p> <p>\u6570\u636e\u4fdd\u5b58\u5728\u6587\u4ef6</p> <p>\u4f18\u70b9\uff1a \u6570\u636e\u6c38\u4e45\u4fdd\u5b58</p> <p>\u7f3a\u70b9\uff1a1\uff09\u901f\u5ea6\u6bd4\u5185\u5b58\u64cd\u4f5c\u6162\uff0c\u9891\u7e41\u7684IO\u64cd\u4f5c\u30022\uff09\u67e5\u8be2\u6570\u636e\u4e0d\u65b9\u4fbf</p> <p>\u6570\u636e\u4fdd\u5b58\u5728\u6570\u636e\u5e93</p> <p>1\uff09\u6570\u636e\u6c38\u4e45\u4fdd\u5b58</p> <p>2\uff09\u4f7f\u7528SQL\u8bed\u53e5\uff0c\u67e5\u8be2\u65b9\u4fbf\u6548\u7387\u9ad8\u3002</p> <p>3\uff09\u7ba1\u7406\u6570\u636e\u65b9\u4fbf</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#sql","title":"\u4ec0\u4e48\u662fSQL\uff1f","text":"<p>\u7ed3\u6784\u5316\u67e5\u8be2\u8bed\u8a00(Structured Query Language)\u7b80\u79f0SQL\uff0c\u662f\u4e00\u79cd\u6570\u636e\u5e93\u67e5\u8be2\u8bed\u8a00\u3002</p> <p>\u4f5c\u7528\uff1a\u7528\u4e8e\u5b58\u53d6\u6570\u636e\u3001\u67e5\u8be2\u3001\u66f4\u65b0\u548c\u7ba1\u7406\u5173\u7cfb\u6570\u636e\u5e93\u7cfb\u7edf\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#mysql","title":"\u4ec0\u4e48\u662fMySQL?","text":"<p>MySQL\u662f\u4e00\u4e2a\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\uff0c\u7531\u745e\u5178MySQL AB \u516c\u53f8\u5f00\u53d1\uff0c\u5c5e\u4e8e Oracle \u65d7\u4e0b\u4ea7\u54c1\u3002MySQL \u662f\u6700\u6d41\u884c\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u4e4b\u4e00\uff0c\u5728 WEB \u5e94\u7528\u65b9\u9762\uff0cMySQL\u662f\u6700\u597d\u7684 RDBMS (Relational Database Management System\uff0c\u5173\u7cfb\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf) \u5e94\u7528\u8f6f\u4ef6\u4e4b\u4e00\u3002\u5728Java\u4f01\u4e1a\u7ea7\u5f00\u53d1\u4e2d\u975e\u5e38\u5e38\u7528\uff0c\u56e0\u4e3a MySQL \u662f\u5f00\u6e90\u514d\u8d39\u7684\uff0c\u5e76\u4e14\u65b9\u4fbf\u6269\u5c55\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_3","title":"\u6570\u636e\u5e93\u4e09\u5927\u8303\u5f0f\u662f\u4ec0\u4e48","text":"<p>\u7b2c\u4e00\u8303\u5f0f\uff1a\u6bcf\u4e2a\u5217\u90fd\u4e0d\u53ef\u4ee5\u518d\u62c6\u5206\u3002</p> <p>\u7b2c\u4e8c\u8303\u5f0f\uff1a\u5728\u7b2c\u4e00\u8303\u5f0f\u7684\u57fa\u7840\u4e0a\uff0c\u975e\u4e3b\u952e\u5217\u5b8c\u5168\u4f9d\u8d56\u4e8e\u4e3b\u952e\uff0c\u800c\u4e0d\u80fd\u662f\u4f9d\u8d56\u4e8e\u4e3b\u952e\u7684\u4e00\u90e8\u5206\u3002</p> <p>\u7b2c\u4e09\u8303\u5f0f\uff1a\u5728\u7b2c\u4e8c\u8303\u5f0f\u7684\u57fa\u7840\u4e0a\uff0c\u975e\u4e3b\u952e\u5217\u53ea\u4f9d\u8d56\u4e8e\u4e3b\u952e\uff0c\u4e0d\u4f9d\u8d56\u4e8e\u5176\u4ed6\u975e\u4e3b\u952e\u3002</p> <p>\u5728\u8bbe\u8ba1\u6570\u636e\u5e93\u7ed3\u6784\u7684\u65f6\u5019\uff0c\u8981\u5c3d\u91cf\u9075\u5b88\u4e09\u8303\u5f0f\uff0c\u5982\u679c\u4e0d\u9075\u5b88\uff0c\u5fc5\u987b\u6709\u8db3\u591f\u7684\u7406\u7531\u3002\u6bd4\u5982\u6027\u80fd\u3002\u4e8b\u5b9e\u4e0a\u6211\u4eec\u7ecf\u5e38\u4f1a\u4e3a\u4e86\u6027\u80fd\u800c\u59a5\u534f\u6570\u636e\u5e93\u7684\u8bbe\u8ba1\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#mysql_1","title":"mysql\u6709\u5173\u6743\u9650\u7684\u8868\u90fd\u6709\u54ea\u51e0\u4e2a","text":"<p>MySQL\u670d\u52a1\u5668\u901a\u8fc7\u6743\u9650\u8868\u6765\u63a7\u5236\u7528\u6237\u5bf9\u6570\u636e\u5e93\u7684\u8bbf\u95ee\uff0c\u6743\u9650\u8868\u5b58\u653e\u5728mysql\u6570\u636e\u5e93\u91cc\uff0c\u7531mysql_install_db\u811a\u672c\u521d\u59cb\u5316\u3002\u8fd9\u4e9b\u6743\u9650\u8868\u5206\u522buser\uff0cdb\uff0ctable_priv\uff0ccolumns_priv\u548chost\u3002\u4e0b\u9762\u5206\u522b\u4ecb\u7ecd\u4e00\u4e0b\u8fd9\u4e9b\u8868\u7684\u7ed3\u6784\u548c\u5185\u5bb9\uff1a</p> <ul> <li>user\u6743\u9650\u8868\uff1a\u8bb0\u5f55\u5141\u8bb8\u8fde\u63a5\u5230\u670d\u52a1\u5668\u7684\u7528\u6237\u5e10\u53f7\u4fe1\u606f\uff0c\u91cc\u9762\u7684\u6743\u9650\u662f\u5168\u5c40\u7ea7\u7684\u3002</li> <li>db\u6743\u9650\u8868\uff1a\u8bb0\u5f55\u5404\u4e2a\u5e10\u53f7\u5728\u5404\u4e2a\u6570\u636e\u5e93\u4e0a\u7684\u64cd\u4f5c\u6743\u9650\u3002</li> <li>table_priv\u6743\u9650\u8868\uff1a\u8bb0\u5f55\u6570\u636e\u8868\u7ea7\u7684\u64cd\u4f5c\u6743\u9650\u3002</li> <li>columns_priv\u6743\u9650\u8868\uff1a\u8bb0\u5f55\u6570\u636e\u5217\u7ea7\u7684\u64cd\u4f5c\u6743\u9650\u3002</li> <li>host\u6743\u9650\u8868\uff1a\u914d\u5408db\u6743\u9650\u8868\u5bf9\u7ed9\u5b9a\u4e3b\u673a\u4e0a\u6570\u636e\u5e93\u7ea7\u64cd\u4f5c\u6743\u9650\u4f5c\u66f4\u7ec6\u81f4\u7684\u63a7\u5236\u3002\u8fd9\u4e2a\u6743\u9650\u8868\u4e0d\u53d7GRANT\u548cREVOKE\u8bed\u53e5\u7684\u5f71\u54cd\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#mysqlbinlog","title":"MySQL\u7684binlog\u6709\u6709\u51e0\u79cd\u5f55\u5165\u683c\u5f0f\uff1f\u5206\u522b\u6709\u4ec0\u4e48\u533a\u522b\uff1f","text":"<p>\u6709\u4e09\u79cd\u683c\u5f0f\uff0cstatement\uff0crow\u548cmixed\u3002</p> <ul> <li>statement\u6a21\u5f0f\u4e0b\uff0c\u6bcf\u4e00\u6761\u4f1a\u4fee\u6539\u6570\u636e\u7684sql\u90fd\u4f1a\u8bb0\u5f55\u5728binlog\u4e2d\u3002\u4e0d\u9700\u8981\u8bb0\u5f55\u6bcf\u4e00\u884c\u7684\u53d8\u5316\uff0c\u51cf\u5c11\u4e86binlog\u65e5\u5fd7\u91cf\uff0c\u8282\u7ea6\u4e86IO\uff0c\u63d0\u9ad8\u6027\u80fd\u3002\u7531\u4e8esql\u7684\u6267\u884c\u662f\u6709\u4e0a\u4e0b\u6587\u7684\uff0c\u56e0\u6b64\u5728\u4fdd\u5b58\u7684\u65f6\u5019\u9700\u8981\u4fdd\u5b58\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u540c\u65f6\u8fd8\u6709\u4e00\u4e9b\u4f7f\u7528\u4e86\u51fd\u6570\u4e4b\u7c7b\u7684\u8bed\u53e5\u65e0\u6cd5\u88ab\u8bb0\u5f55\u590d\u5236\u3002</li> <li>row\u7ea7\u522b\u4e0b\uff0c\u4e0d\u8bb0\u5f55sql\u8bed\u53e5\u4e0a\u4e0b\u6587\u76f8\u5173\u4fe1\u606f\uff0c\u4ec5\u4fdd\u5b58\u54ea\u6761\u8bb0\u5f55\u88ab\u4fee\u6539\u3002\u8bb0\u5f55\u5355\u5143\u4e3a\u6bcf\u4e00\u884c\u7684\u6539\u52a8\uff0c\u57fa\u672c\u662f\u53ef\u4ee5\u5168\u90e8\u8bb0\u4e0b\u6765\u4f46\u662f\u7531\u4e8e\u5f88\u591a\u64cd\u4f5c\uff0c\u4f1a\u5bfc\u81f4\u5927\u91cf\u884c\u7684\u6539\u52a8(\u6bd4\u5982alter table)\uff0c\u56e0\u6b64\u8fd9\u79cd\u6a21\u5f0f\u7684\u6587\u4ef6\u4fdd\u5b58\u7684\u4fe1\u606f\u592a\u591a\uff0c\u65e5\u5fd7\u91cf\u592a\u5927\u3002</li> <li>mixed\uff0c\u4e00\u79cd\u6298\u4e2d\u7684\u65b9\u6848\uff0c\u666e\u901a\u64cd\u4f5c\u4f7f\u7528statement\u8bb0\u5f55\uff0c\u5f53\u65e0\u6cd5\u4f7f\u7528statement\u7684\u65f6\u5019\u4f7f\u7528row\u3002</li> </ul> <p>\u6b64\u5916\uff0c\u65b0\u7248\u7684MySQL\u4e2d\u5bf9row\u7ea7\u522b\u4e5f\u505a\u4e86\u4e00\u4e9b\u4f18\u5316\uff0c\u5f53\u8868\u7ed3\u6784\u53d1\u751f\u53d8\u5316\u7684\u65f6\u5019\uff0c\u4f1a\u8bb0\u5f55\u8bed\u53e5\u800c\u4e0d\u662f\u9010\u884c\u8bb0\u5f55\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_4","title":"\u6570\u636e\u7c7b\u578b","text":""},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#mysql_2","title":"mysql\u6709\u54ea\u4e9b\u6570\u636e\u7c7b\u578b","text":"\u5206\u7c7b \u7c7b\u578b\u540d\u79f0 \u8bf4\u660e \u6574\u6570\u7c7b\u578b tinyInt \u5f88\u5c0f\u7684\u6574\u6570(8\u4f4d\u4e8c\u8fdb\u5236) smallint \u5c0f\u7684\u6574\u6570(16\u4f4d\u4e8c\u8fdb\u5236) mediumint \u4e2d\u7b49\u5927\u5c0f\u7684\u6574\u6570(24\u4f4d\u4e8c\u8fdb\u5236) int(integer) \u666e\u901a\u5927\u5c0f\u7684\u6574\u6570(32\u4f4d\u4e8c\u8fdb\u5236) \u5c0f\u6570\u7c7b\u578b float \u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570 double \u53cc\u7cbe\u5ea6\u6d6e\u70b9\u6570 decimal(m,d) \u538b\u7f29\u4e25\u683c\u7684\u5b9a\u70b9\u6570 \u65e5\u671f\u7c7b\u578b year YYYY 1901~2155 time HH:MM:SS -838:59:59~838:59:59 date YYYY-MM-DD 1000-01-01~9999-12-3 datetime YYYY-MM-DD HH:MM:SS 1000-01-01 00:00:00~ 9999-12-31 23:59:59 timestamp YYYY-MM-DD HH:MM:SS 19700101 00:00:01 UTC~2038-01-19 03:14:07UTC \u6587\u672c\u3001\u4e8c\u8fdb\u5236\u7c7b\u578b CHAR(M) M\u4e3a0~255\u4e4b\u95f4\u7684\u6574\u6570 VARCHAR(M) M\u4e3a0~65535\u4e4b\u95f4\u7684\u6574\u6570 TINYBLOB \u5141\u8bb8\u957f\u5ea60~255\u5b57\u8282 BLOB \u5141\u8bb8\u957f\u5ea60~65535\u5b57\u8282 MEDIUMBLOB \u5141\u8bb8\u957f\u5ea60~167772150\u5b57\u8282 LONGBLOB \u5141\u8bb8\u957f\u5ea60~4294967295\u5b57\u8282 TINYTEXT \u5141\u8bb8\u957f\u5ea60~255\u5b57\u8282 TEXT \u5141\u8bb8\u957f\u5ea60~65535\u5b57\u8282 MEDIUMTEXT \u5141\u8bb8\u957f\u5ea60~167772150\u5b57\u8282 LONGTEXT \u5141\u8bb8\u957f\u5ea60~4294967295\u5b57\u8282 VARBINARY(M) \u5141\u8bb8\u957f\u5ea60~M\u4e2a\u5b57\u8282\u7684\u53d8\u957f\u5b57\u8282\u5b57\u7b26\u4e32 BINARY(M) \u5141\u8bb8\u957f\u5ea60~M\u4e2a\u5b57\u8282\u7684\u5b9a\u957f\u5b57\u8282\u5b57\u7b26\u4e32 <ul> <li> <p>1\u3001\u6574\u6570\u7c7b\u578b\uff0c\u5305\u62ecTINYINT\u3001SMALLINT\u3001MEDIUMINT\u3001INT\u3001BIGINT\uff0c\u5206\u522b\u8868\u793a1\u5b57\u8282\u30012\u5b57\u8282\u30013\u5b57\u8282\u30014\u5b57\u8282\u30018\u5b57\u8282\u6574\u6570\u3002\u4efb\u4f55\u6574\u6570\u7c7b\u578b\u90fd\u53ef\u4ee5\u52a0\u4e0aUNSIGNED\u5c5e\u6027\uff0c\u8868\u793a\u6570\u636e\u662f\u65e0\u7b26\u53f7\u7684\uff0c\u5373\u975e\u8d1f\u6574\u6570\u3002   \u957f\u5ea6\uff1a\u6574\u6570\u7c7b\u578b\u53ef\u4ee5\u88ab\u6307\u5b9a\u957f\u5ea6\uff0c\u4f8b\u5982\uff1aINT(11)\u8868\u793a\u957f\u5ea6\u4e3a11\u7684INT\u7c7b\u578b\u3002\u957f\u5ea6\u5728\u5927\u591a\u6570\u573a\u666f\u662f\u6ca1\u6709\u610f\u4e49\u7684\uff0c\u5b83\u4e0d\u4f1a\u9650\u5236\u503c\u7684\u5408\u6cd5\u8303\u56f4\uff0c\u53ea\u4f1a\u5f71\u54cd\u663e\u793a\u5b57\u7b26\u7684\u4e2a\u6570\uff0c\u800c\u4e14\u9700\u8981\u548cUNSIGNED ZEROFILL\u5c5e\u6027\u914d\u5408\u4f7f\u7528\u624d\u6709\u610f\u4e49\u3002   \u4f8b\u5b50\uff0c\u5047\u5b9a\u7c7b\u578b\u8bbe\u5b9a\u4e3aINT(5)\uff0c\u5c5e\u6027\u4e3aUNSIGNED ZEROFILL\uff0c\u5982\u679c\u7528\u6237\u63d2\u5165\u7684\u6570\u636e\u4e3a12\u7684\u8bdd\uff0c\u90a3\u4e48\u6570\u636e\u5e93\u5b9e\u9645\u5b58\u50a8\u6570\u636e\u4e3a00012\u3002</p> </li> <li> <p>2\u3001\u5b9e\u6570\u7c7b\u578b\uff0c\u5305\u62ecFLOAT\u3001DOUBLE\u3001DECIMAL\u3002   DECIMAL\u53ef\u4ee5\u7528\u4e8e\u5b58\u50a8\u6bd4BIGINT\u8fd8\u5927\u7684\u6574\u578b\uff0c\u80fd\u5b58\u50a8\u7cbe\u786e\u7684\u5c0f\u6570\u3002   \u800cFLOAT\u548cDOUBLE\u662f\u6709\u53d6\u503c\u8303\u56f4\u7684\uff0c\u5e76\u652f\u6301\u4f7f\u7528\u6807\u51c6\u7684\u6d6e\u70b9\u8fdb\u884c\u8fd1\u4f3c\u8ba1\u7b97\u3002   \u8ba1\u7b97\u65f6FLOAT\u548cDOUBLE\u76f8\u6bd4DECIMAL\u6548\u7387\u66f4\u9ad8\u4e00\u4e9b\uff0cDECIMAL\u4f60\u53ef\u4ee5\u7406\u89e3\u6210\u662f\u7528\u5b57\u7b26\u4e32\u8fdb\u884c\u5904\u7406\u3002</p> </li> <li> <p>3\u3001\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u5305\u62ecVARCHAR\u3001CHAR\u3001TEXT\u3001BLOB   VARCHAR\u7528\u4e8e\u5b58\u50a8\u53ef\u53d8\u957f\u5b57\u7b26\u4e32\uff0c\u5b83\u6bd4\u5b9a\u957f\u7c7b\u578b\u66f4\u8282\u7701\u7a7a\u95f4\u3002   VARCHAR\u4f7f\u7528\u989d\u59161\u62162\u4e2a\u5b57\u8282\u5b58\u50a8\u5b57\u7b26\u4e32\u957f\u5ea6\u3002\u5217\u957f\u5ea6\u5c0f\u4e8e255\u5b57\u8282\u65f6\uff0c\u4f7f\u75281\u5b57\u8282\u8868\u793a\uff0c\u5426\u5219\u4f7f\u75282\u5b57\u8282\u8868\u793a\u3002   VARCHAR\u5b58\u50a8\u7684\u5185\u5bb9\u8d85\u51fa\u8bbe\u7f6e\u7684\u957f\u5ea6\u65f6\uff0c\u5185\u5bb9\u4f1a\u88ab\u622a\u65ad\u3002   CHAR\u662f\u5b9a\u957f\u7684\uff0c\u6839\u636e\u5b9a\u4e49\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\u5206\u914d\u8db3\u591f\u7684\u7a7a\u95f4\u3002   CHAR\u4f1a\u6839\u636e\u9700\u8981\u4f7f\u7528\u7a7a\u683c\u8fdb\u884c\u586b\u5145\u65b9\u4fbf\u6bd4\u8f83\u3002   CHAR\u9002\u5408\u5b58\u50a8\u5f88\u77ed\u7684\u5b57\u7b26\u4e32\uff0c\u6216\u8005\u6240\u6709\u503c\u90fd\u63a5\u8fd1\u540c\u4e00\u4e2a\u957f\u5ea6\u3002   CHAR\u5b58\u50a8\u7684\u5185\u5bb9\u8d85\u51fa\u8bbe\u7f6e\u7684\u957f\u5ea6\u65f6\uff0c\u5185\u5bb9\u540c\u6837\u4f1a\u88ab\u622a\u65ad\u3002</p> </li> </ul> <p>\u4f7f\u7528\u7b56\u7565\uff1a   \u5bf9\u4e8e\u7ecf\u5e38\u53d8\u66f4\u7684\u6570\u636e\u6765\u8bf4\uff0cCHAR\u6bd4VARCHAR\u66f4\u597d\uff0c\u56e0\u4e3aCHAR\u4e0d\u5bb9\u6613\u4ea7\u751f\u788e\u7247\u3002   \u5bf9\u4e8e\u975e\u5e38\u77ed\u7684\u5217\uff0cCHAR\u6bd4VARCHAR\u5728\u5b58\u50a8\u7a7a\u95f4\u4e0a\u66f4\u6709\u6548\u7387\u3002   \u4f7f\u7528\u65f6\u8981\u6ce8\u610f\u53ea\u5206\u914d\u9700\u8981\u7684\u7a7a\u95f4\uff0c\u66f4\u957f\u7684\u5217\u6392\u5e8f\u65f6\u4f1a\u6d88\u8017\u66f4\u591a\u5185\u5b58\u3002   \u5c3d\u91cf\u907f\u514d\u4f7f\u7528TEXT/BLOB\u7c7b\u578b\uff0c\u67e5\u8be2\u65f6\u4f1a\u4f7f\u7528\u4e34\u65f6\u8868\uff0c\u5bfc\u81f4\u4e25\u91cd\u7684\u6027\u80fd\u5f00\u9500\u3002</p> <ul> <li> <p>4\u3001\u679a\u4e3e\u7c7b\u578b\uff08ENUM\uff09\uff0c\u628a\u4e0d\u91cd\u590d\u7684\u6570\u636e\u5b58\u50a8\u4e3a\u4e00\u4e2a\u9884\u5b9a\u4e49\u7684\u96c6\u5408\u3002   \u6709\u65f6\u53ef\u4ee5\u4f7f\u7528ENUM\u4ee3\u66ff\u5e38\u7528\u7684\u5b57\u7b26\u4e32\u7c7b\u578b\u3002   ENUM\u5b58\u50a8\u975e\u5e38\u7d27\u51d1\uff0c\u4f1a\u628a\u5217\u8868\u503c\u538b\u7f29\u5230\u4e00\u4e2a\u6216\u4e24\u4e2a\u5b57\u8282\u3002   ENUM\u5728\u5185\u90e8\u5b58\u50a8\u65f6\uff0c\u5176\u5b9e\u5b58\u7684\u662f\u6574\u6570\u3002   \u5c3d\u91cf\u907f\u514d\u4f7f\u7528\u6570\u5b57\u4f5c\u4e3aENUM\u679a\u4e3e\u7684\u5e38\u91cf\uff0c\u56e0\u4e3a\u5bb9\u6613\u6df7\u4e71\u3002   \u6392\u5e8f\u662f\u6309\u7167\u5185\u90e8\u5b58\u50a8\u7684\u6574\u6570</p> </li> <li> <p>5\u3001\u65e5\u671f\u548c\u65f6\u95f4\u7c7b\u578b\uff0c\u5c3d\u91cf\u4f7f\u7528timestamp\uff0c\u7a7a\u95f4\u6548\u7387\u9ad8\u4e8edatetime\uff0c   \u7528\u6574\u6570\u4fdd\u5b58\u65f6\u95f4\u6233\u901a\u5e38\u4e0d\u65b9\u4fbf\u5904\u7406\u3002   \u5982\u679c\u9700\u8981\u5b58\u50a8\u5fae\u5999\uff0c\u53ef\u4ee5\u4f7f\u7528bigint\u5b58\u50a8\u3002   \u770b\u5230\u8fd9\u91cc\uff0c\u8fd9\u9053\u771f\u9898\u662f\u4e0d\u662f\u5c31\u6bd4\u8f83\u5bb9\u6613\u56de\u7b54\u4e86\u3002</p> </li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_5","title":"\u5f15\u64ce","text":""},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#mysqlmyisaminnodb","title":"MySQL\u5b58\u50a8\u5f15\u64ceMyISAM\u4e0eInnoDB\u533a\u522b","text":"<p>\u5b58\u50a8\u5f15\u64ceStorage engine\uff1aMySQL\u4e2d\u7684\u6570\u636e\u3001\u7d22\u5f15\u4ee5\u53ca\u5176\u4ed6\u5bf9\u8c61\u662f\u5982\u4f55\u5b58\u50a8\u7684\uff0c\u662f\u4e00\u5957\u6587\u4ef6\u7cfb\u7edf\u7684\u5b9e\u73b0\u3002</p> <p>\u5e38\u7528\u7684\u5b58\u50a8\u5f15\u64ce\u6709\u4ee5\u4e0b\uff1a</p> <ul> <li>Innodb\u5f15\u64ce\uff1aInnodb\u5f15\u64ce\u63d0\u4f9b\u4e86\u5bf9\u6570\u636e\u5e93ACID\u4e8b\u52a1\u7684\u652f\u6301\u3002\u5e76\u4e14\u8fd8\u63d0\u4f9b\u4e86\u884c\u7ea7\u9501\u548c\u5916\u952e\u7684\u7ea6\u675f\u3002\u5b83\u7684\u8bbe\u8ba1\u7684\u76ee\u6807\u5c31\u662f\u5904\u7406\u5927\u6570\u636e\u5bb9\u91cf\u7684\u6570\u636e\u5e93\u7cfb\u7edf\u3002</li> <li>MyIASM\u5f15\u64ce(\u539f\u672cMysql\u7684\u9ed8\u8ba4\u5f15\u64ce)\uff1a\u4e0d\u63d0\u4f9b\u4e8b\u52a1\u7684\u652f\u6301\uff0c\u4e5f\u4e0d\u652f\u6301\u884c\u7ea7\u9501\u548c\u5916\u952e\u3002</li> <li>MEMORY\u5f15\u64ce\uff1a\u6240\u6709\u7684\u6570\u636e\u90fd\u5728\u5185\u5b58\u4e2d\uff0c\u6570\u636e\u7684\u5904\u7406\u901f\u5ea6\u5feb\uff0c\u4f46\u662f\u5b89\u5168\u6027\u4e0d\u9ad8\u3002</li> </ul> <p>MyISAM\u4e0eInnoDB\u533a\u522b</p> MyISAM Innodb \u5b58\u50a8\u7ed3\u6784 \u6bcf\u5f20\u8868\u88ab\u5b58\u653e\u5728\u4e09\u4e2a\u6587\u4ef6\uff1afrm-\u8868\u683c\u5b9a\u4e49\u3001MYD(MYData)-\u6570\u636e\u6587\u4ef6\u3001MYI(MYIndex)-\u7d22\u5f15\u6587\u4ef6 \u6240\u6709\u7684\u8868\u90fd\u4fdd\u5b58\u5728\u540c\u4e00\u4e2a\u6570\u636e\u6587\u4ef6\u4e2d\uff08\u4e5f\u53ef\u80fd\u662f\u591a\u4e2a\u6587\u4ef6\uff0c\u6216\u8005\u662f\u72ec\u7acb\u7684\u8868\u7a7a\u95f4\u6587\u4ef6\uff09\uff0cInnoDB\u8868\u7684\u5927\u5c0f\u53ea\u53d7\u9650\u4e8e\u64cd\u4f5c\u7cfb\u7edf\u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u4e00\u822c\u4e3a2GB \u5b58\u50a8\u7a7a\u95f4 MyISAM\u53ef\u88ab\u538b\u7f29\uff0c\u5b58\u50a8\u7a7a\u95f4\u8f83\u5c0f InnoDB\u7684\u8868\u9700\u8981\u66f4\u591a\u7684\u5185\u5b58\u548c\u5b58\u50a8\uff0c\u5b83\u4f1a\u5728\u4e3b\u5185\u5b58\u4e2d\u5efa\u7acb\u5176\u4e13\u7528\u7684\u7f13\u51b2\u6c60\u7528\u4e8e\u9ad8\u901f\u7f13\u51b2\u6570\u636e\u548c\u7d22\u5f15 \u53ef\u79fb\u690d\u6027\u3001\u5907\u4efd\u53ca\u6062\u590d \u7531\u4e8eMyISAM\u7684\u6570\u636e\u662f\u4ee5\u6587\u4ef6\u7684\u5f62\u5f0f\u5b58\u50a8\uff0c\u6240\u4ee5\u5728\u8de8\u5e73\u53f0\u7684\u6570\u636e\u8f6c\u79fb\u4e2d\u4f1a\u5f88\u65b9\u4fbf\u3002\u5728\u5907\u4efd\u548c\u6062\u590d\u65f6\u53ef\u5355\u72ec\u9488\u5bf9\u67d0\u4e2a\u8868\u8fdb\u884c\u64cd\u4f5c \u514d\u8d39\u7684\u65b9\u6848\u53ef\u4ee5\u662f\u62f7\u8d1d\u6570\u636e\u6587\u4ef6\u3001\u5907\u4efd binlog\uff0c\u6216\u8005\u7528 mysqldump\uff0c\u5728\u6570\u636e\u91cf\u8fbe\u5230\u51e0\u5341G\u7684\u65f6\u5019\u5c31\u76f8\u5bf9\u75db\u82e6\u4e86 \u6587\u4ef6\u683c\u5f0f \u6570\u636e\u548c\u7d22\u5f15\u662f\u5206\u522b\u5b58\u50a8\u7684\uff0c\u6570\u636e.MYD\uff0c\u7d22\u5f15.MYI \u6570\u636e\u548c\u7d22\u5f15\u662f\u96c6\u4e2d\u5b58\u50a8\u7684\uff0c.ibd \u8bb0\u5f55\u5b58\u50a8\u987a\u5e8f \u6309\u8bb0\u5f55\u63d2\u5165\u987a\u5e8f\u4fdd\u5b58 \u6309\u4e3b\u952e\u5927\u5c0f\u6709\u5e8f\u63d2\u5165 \u5916\u952e \u4e0d\u652f\u6301 \u652f\u6301 \u4e8b\u52a1 \u4e0d\u652f\u6301 \u652f\u6301 \u9501\u652f\u6301\uff08\u9501\u662f\u907f\u514d\u8d44\u6e90\u4e89\u7528\u7684\u4e00\u4e2a\u673a\u5236\uff0cMySQL\u9501\u5bf9\u7528\u6237\u51e0\u4e4e\u662f\u900f\u660e\u7684\uff09 \u8868\u7ea7\u9501\u5b9a \u884c\u7ea7\u9501\u5b9a\u3001\u8868\u7ea7\u9501\u5b9a\uff0c\u9501\u5b9a\u529b\u5ea6\u5c0f\u5e76\u53d1\u80fd\u529b\u9ad8 SELECT MyISAM\u66f4\u4f18 INSERT\u3001UPDATE\u3001DELETE InnoDB\u66f4\u4f18 select count(*) myisam\u66f4\u5feb\uff0c\u56e0\u4e3amyisam\u5185\u90e8\u7ef4\u62a4\u4e86\u4e00\u4e2a\u8ba1\u6570\u5668\uff0c\u53ef\u4ee5\u76f4\u63a5\u8c03\u53d6\u3002 \u7d22\u5f15\u7684\u5b9e\u73b0\u65b9\u5f0f B+\u6811\u7d22\u5f15\uff0cmyisam \u662f\u5806\u8868 B+\u6811\u7d22\u5f15\uff0cInnodb \u662f\u7d22\u5f15\u7ec4\u7ec7\u8868 \u54c8\u5e0c\u7d22\u5f15 \u4e0d\u652f\u6301 \u652f\u6301 \u5168\u6587\u7d22\u5f15 \u652f\u6301 \u4e0d\u652f\u6301"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#myisaminnodb","title":"MyISAM\u7d22\u5f15\u4e0eInnoDB\u7d22\u5f15\u7684\u533a\u522b\uff1f","text":"<ul> <li>InnoDB\u7d22\u5f15\u662f\u805a\u7c07\u7d22\u5f15\uff0cMyISAM\u7d22\u5f15\u662f\u975e\u805a\u7c07\u7d22\u5f15\u3002</li> <li>InnoDB\u7684\u4e3b\u952e\u7d22\u5f15\u7684\u53f6\u5b50\u8282\u70b9\u5b58\u50a8\u7740\u884c\u6570\u636e\uff0c\u56e0\u6b64\u4e3b\u952e\u7d22\u5f15\u975e\u5e38\u9ad8\u6548\u3002</li> <li>MyISAM\u7d22\u5f15\u7684\u53f6\u5b50\u8282\u70b9\u5b58\u50a8\u7684\u662f\u884c\u6570\u636e\u5730\u5740\uff0c\u9700\u8981\u518d\u5bfb\u5740\u4e00\u6b21\u624d\u80fd\u5f97\u5230\u6570\u636e\u3002</li> <li>InnoDB\u975e\u4e3b\u952e\u7d22\u5f15\u7684\u53f6\u5b50\u8282\u70b9\u5b58\u50a8\u7684\u662f\u4e3b\u952e\u548c\u5176\u4ed6\u5e26\u7d22\u5f15\u7684\u5217\u6570\u636e\uff0c\u56e0\u6b64\u67e5\u8be2\u65f6\u505a\u5230\u8986\u76d6\u7d22\u5f15\u4f1a\u975e\u5e38\u9ad8\u6548\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#innodb4","title":"InnoDB\u5f15\u64ce\u76844\u5927\u7279\u6027","text":"<ul> <li>\u63d2\u5165\u7f13\u51b2\uff08insert buffer)</li> <li>\u4e8c\u6b21\u5199(double write)</li> <li>\u81ea\u9002\u5e94\u54c8\u5e0c\u7d22\u5f15(ahi)</li> <li>\u9884\u8bfb(read ahead)</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_6","title":"\u5b58\u50a8\u5f15\u64ce\u9009\u62e9","text":"<p>\u5982\u679c\u6ca1\u6709\u7279\u522b\u7684\u9700\u6c42\uff0c\u4f7f\u7528\u9ed8\u8ba4\u7684Innodb\u5373\u53ef\u3002</p> <p>MyISAM\uff1a\u4ee5\u8bfb\u5199\u63d2\u5165\u4e3a\u4e3b\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u6bd4\u5982\u535a\u5ba2\u7cfb\u7edf\u3001\u65b0\u95fb\u95e8\u6237\u7f51\u7ad9\u3002</p> <p>Innodb\uff1a\u66f4\u65b0\uff08\u5220\u9664\uff09\u64cd\u4f5c\u9891\u7387\u4e5f\u9ad8\uff0c\u6216\u8005\u8981\u4fdd\u8bc1\u6570\u636e\u7684\u5b8c\u6574\u6027\uff1b\u5e76\u53d1\u91cf\u9ad8\uff0c\u652f\u6301\u4e8b\u52a1\u548c\u5916\u952e\u3002\u6bd4\u5982OA\u81ea\u52a8\u5316\u529e\u516c\u7cfb\u7edf\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_7","title":"\u7d22\u5f15","text":""},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_8","title":"\u4ec0\u4e48\u662f\u7d22\u5f15\uff1f","text":"<p>\u7d22\u5f15\u662f\u4e00\u79cd\u7279\u6b8a\u7684\u6587\u4ef6(InnoDB\u6570\u636e\u8868\u4e0a\u7684\u7d22\u5f15\u662f\u8868\u7a7a\u95f4\u7684\u4e00\u4e2a\u7ec4\u6210\u90e8\u5206)\uff0c\u5b83\u4eec\u5305\u542b\u7740\u5bf9\u6570\u636e\u8868\u91cc\u6240\u6709\u8bb0\u5f55\u7684\u5f15\u7528\u6307\u9488\u3002</p> <p>\u7d22\u5f15\u662f\u4e00\u79cd\u6570\u636e\u7ed3\u6784\u3002\u6570\u636e\u5e93\u7d22\u5f15\uff0c\u662f\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u4e2d\u4e00\u4e2a\u6392\u5e8f\u7684\u6570\u636e\u7ed3\u6784\uff0c\u4ee5\u534f\u52a9\u5feb\u901f\u67e5\u8be2\u3001\u66f4\u65b0\u6570\u636e\u5e93\u8868\u4e2d\u6570\u636e\u3002\u7d22\u5f15\u7684\u5b9e\u73b0\u901a\u5e38\u4f7f\u7528B\u6811\u53ca\u5176\u53d8\u79cdB+\u6811\u3002</p> <p>\u66f4\u901a\u4fd7\u7684\u8bf4\uff0c\u7d22\u5f15\u5c31\u76f8\u5f53\u4e8e\u76ee\u5f55\u3002\u4e3a\u4e86\u65b9\u4fbf\u67e5\u627e\u4e66\u4e2d\u7684\u5185\u5bb9\uff0c\u901a\u8fc7\u5bf9\u5185\u5bb9\u5efa\u7acb\u7d22\u5f15\u5f62\u6210\u76ee\u5f55\u3002\u7d22\u5f15\u662f\u4e00\u4e2a\u6587\u4ef6\uff0c\u5b83\u662f\u8981\u5360\u636e\u7269\u7406\u7a7a\u95f4\u7684\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_9","title":"\u7d22\u5f15\u6709\u54ea\u4e9b\u4f18\u7f3a\u70b9\uff1f","text":"<p>\u7d22\u5f15\u7684\u4f18\u70b9</p> <ul> <li>\u53ef\u4ee5\u5927\u5927\u52a0\u5feb\u6570\u636e\u7684\u68c0\u7d22\u901f\u5ea6\uff0c\u8fd9\u4e5f\u662f\u521b\u5efa\u7d22\u5f15\u7684\u6700\u4e3b\u8981\u7684\u539f\u56e0\u3002</li> <li>\u901a\u8fc7\u4f7f\u7528\u7d22\u5f15\uff0c\u53ef\u4ee5\u5728\u67e5\u8be2\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4f7f\u7528\u4f18\u5316\u9690\u85cf\u5668\uff0c\u63d0\u9ad8\u7cfb\u7edf\u7684\u6027\u80fd\u3002</li> </ul> <p>\u7d22\u5f15\u7684\u7f3a\u70b9</p> <ul> <li>\u65f6\u95f4\u65b9\u9762\uff1a\u521b\u5efa\u7d22\u5f15\u548c\u7ef4\u62a4\u7d22\u5f15\u8981\u8017\u8d39\u65f6\u95f4\uff0c\u5177\u4f53\u5730\uff0c\u5f53\u5bf9\u8868\u4e2d\u7684\u6570\u636e\u8fdb\u884c\u589e\u52a0\u3001\u5220\u9664\u548c\u4fee\u6539\u7684\u65f6\u5019\uff0c\u7d22\u5f15\u4e5f\u8981\u52a8\u6001\u7684\u7ef4\u62a4\uff0c\u4f1a\u964d\u4f4e\u589e/\u6539/\u5220\u7684\u6267\u884c\u6548\u7387\uff1b</li> <li>\u7a7a\u95f4\u65b9\u9762\uff1a\u7d22\u5f15\u9700\u8981\u5360\u7269\u7406\u7a7a\u95f4\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_10","title":"\u7d22\u5f15\u4f7f\u7528\u573a\u666f\uff08\u91cd\u70b9\uff09","text":"<p>where</p> <p></p> <p>\u4e0a\u56fe\u4e2d\uff0c\u6839\u636eid\u67e5\u8be2\u8bb0\u5f55\uff0c\u56e0\u4e3aid\u5b57\u6bb5\u4ec5\u5efa\u7acb\u4e86\u4e3b\u952e\u7d22\u5f15\uff0c\u56e0\u6b64\u6b64SQL\u6267\u884c\u53ef\u9009\u7684\u7d22\u5f15\u53ea\u6709\u4e3b\u952e\u7d22\u5f15\uff0c\u5982\u679c\u6709\u591a\u4e2a\uff0c\u6700\u7ec8\u4f1a\u9009\u4e00\u4e2a\u8f83\u4f18\u7684\u4f5c\u4e3a\u68c0\u7d22\u7684\u4f9d\u636e\u3002</p> <p>-- \u589e\u52a0\u4e00\u4e2a\u6ca1\u6709\u5efa\u7acb\u7d22\u5f15\u7684\u5b57\u6bb5 alter table innodb1 add sex char(1); -- \u6309sex\u68c0\u7d22\u65f6\u53ef\u9009\u7684\u7d22\u5f15\u4e3anull EXPLAIN SELECT * from innodb1 where sex='\u7537';</p> <ul> <li>1</li> <li>2</li> <li>3</li> <li>4</li> </ul> <p></p> <p>\u53ef\u4ee5\u5c1d\u8bd5\u5728\u4e00\u4e2a\u5b57\u6bb5\u672a\u5efa\u7acb\u7d22\u5f15\u65f6\uff0c\u6839\u636e\u8be5\u5b57\u6bb5\u67e5\u8be2\u7684\u6548\u7387\uff0c\u7136\u540e\u5bf9\u8be5\u5b57\u6bb5\u5efa\u7acb\u7d22\u5f15\uff08alter table \u8868\u540d add index(\u5b57\u6bb5\u540d)\uff09\uff0c\u540c\u6837\u7684SQL\u6267\u884c\u7684\u6548\u7387\uff0c\u4f60\u4f1a\u53d1\u73b0\u67e5\u8be2\u6548\u7387\u4f1a\u6709\u660e\u663e\u7684\u63d0\u5347\uff08\u6570\u636e\u91cf\u8d8a\u5927\u8d8a\u660e\u663e\uff09\u3002</p> <p>order by</p> <p>\u5f53\u6211\u4eec\u4f7f\u7528order by\u5c06\u67e5\u8be2\u7ed3\u679c\u6309\u7167\u67d0\u4e2a\u5b57\u6bb5\u6392\u5e8f\u65f6\uff0c\u5982\u679c\u8be5\u5b57\u6bb5\u6ca1\u6709\u5efa\u7acb\u7d22\u5f15\uff0c\u90a3\u4e48\u6267\u884c\u8ba1\u5212\u4f1a\u5c06\u67e5\u8be2\u51fa\u7684\u6240\u6709\u6570\u636e\u4f7f\u7528\u5916\u90e8\u6392\u5e8f\uff08\u5c06\u6570\u636e\u4ece\u786c\u76d8\u5206\u6279\u8bfb\u53d6\u5230\u5185\u5b58\u4f7f\u7528\u5185\u90e8\u6392\u5e8f\uff0c\u6700\u540e\u5408\u5e76\u6392\u5e8f\u7ed3\u679c\uff09\uff0c\u8fd9\u4e2a\u64cd\u4f5c\u662f\u5f88\u5f71\u54cd\u6027\u80fd\u7684\uff0c\u56e0\u4e3a\u9700\u8981\u5c06\u67e5\u8be2\u6d89\u53ca\u5230\u7684\u6240\u6709\u6570\u636e\u4ece\u78c1\u76d8\u4e2d\u8bfb\u5230\u5185\u5b58\uff08\u5982\u679c\u5355\u6761\u6570\u636e\u8fc7\u5927\u6216\u8005\u6570\u636e\u91cf\u8fc7\u591a\u90fd\u4f1a\u964d\u4f4e\u6548\u7387\uff09\uff0c\u66f4\u65e0\u8bba\u8bfb\u5230\u5185\u5b58\u4e4b\u540e\u7684\u6392\u5e8f\u4e86\u3002</p> <p>\u4f46\u662f\u5982\u679c\u6211\u4eec\u5bf9\u8be5\u5b57\u6bb5\u5efa\u7acb\u7d22\u5f15alter table \u8868\u540d add index(\u5b57\u6bb5\u540d)\uff0c\u90a3\u4e48\u7531\u4e8e\u7d22\u5f15\u672c\u8eab\u662f\u6709\u5e8f\u7684\uff0c\u56e0\u6b64\u76f4\u63a5\u6309\u7167\u7d22\u5f15\u7684\u987a\u5e8f\u548c\u6620\u5c04\u5173\u7cfb\u9010\u6761\u53d6\u51fa\u6570\u636e\u5373\u53ef\u3002\u800c\u4e14\u5982\u679c\u5206\u9875\u7684\uff0c\u90a3\u4e48\u53ea\u7528\u53d6\u51fa\u7d22\u5f15\u8868\u67d0\u4e2a\u8303\u56f4\u5185\u7684\u7d22\u5f15\u5bf9\u5e94\u7684\u6570\u636e\uff0c\u800c\u4e0d\u7528\u50cf\u4e0a\u8ff0\u90a3\u53d6\u51fa\u6240\u6709\u6570\u636e\u8fdb\u884c\u6392\u5e8f\u518d\u8fd4\u56de\u67d0\u4e2a\u8303\u56f4\u5185\u7684\u6570\u636e\u3002\uff08\u4ece\u78c1\u76d8\u53d6\u6570\u636e\u662f\u6700\u5f71\u54cd\u6027\u80fd\u7684\uff09</p> <p>join</p> <p>\u5bf9join\u8bed\u53e5\u5339\u914d\u5173\u7cfb\uff08on\uff09\u6d89\u53ca\u7684\u5b57\u6bb5\u5efa\u7acb\u7d22\u5f15\u80fd\u591f\u63d0\u9ad8\u6548\u7387</p> <p>\u7d22\u5f15\u8986\u76d6</p> <p>\u5982\u679c\u8981\u67e5\u8be2\u7684\u5b57\u6bb5\u90fd\u5efa\u7acb\u8fc7\u7d22\u5f15\uff0c\u90a3\u4e48\u5f15\u64ce\u4f1a\u76f4\u63a5\u5728\u7d22\u5f15\u8868\u4e2d\u67e5\u8be2\u800c\u4e0d\u4f1a\u8bbf\u95ee\u539f\u59cb\u6570\u636e\uff08\u5426\u5219\u53ea\u8981\u6709\u4e00\u4e2a\u5b57\u6bb5\u6ca1\u6709\u5efa\u7acb\u7d22\u5f15\u5c31\u4f1a\u505a\u5168\u8868\u626b\u63cf\uff09\uff0c\u8fd9\u53eb\u7d22\u5f15\u8986\u76d6\u3002\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5c3d\u53ef\u80fd\u7684\u5728select\u540e\u53ea\u5199\u5fc5\u8981\u7684\u67e5\u8be2\u5b57\u6bb5\uff0c\u4ee5\u589e\u52a0\u7d22\u5f15\u8986\u76d6\u7684\u51e0\u7387\u3002</p> <p>\u8fd9\u91cc\u503c\u5f97\u6ce8\u610f\u7684\u662f\u4e0d\u8981\u60f3\u7740\u4e3a\u6bcf\u4e2a\u5b57\u6bb5\u5efa\u7acb\u7d22\u5f15\uff0c\u56e0\u4e3a\u4f18\u5148\u4f7f\u7528\u7d22\u5f15\u7684\u4f18\u52bf\u5c31\u5728\u4e8e\u5176\u4f53\u79ef\u5c0f\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_11","title":"\u7d22\u5f15\u6709\u54ea\u51e0\u79cd\u7c7b\u578b\uff1f","text":"<p>\u4e3b\u952e\u7d22\u5f15: \u6570\u636e\u5217\u4e0d\u5141\u8bb8\u91cd\u590d\uff0c\u4e0d\u5141\u8bb8\u4e3aNULL\uff0c\u4e00\u4e2a\u8868\u53ea\u80fd\u6709\u4e00\u4e2a\u4e3b\u952e\u3002</p> <p>\u552f\u4e00\u7d22\u5f15: \u6570\u636e\u5217\u4e0d\u5141\u8bb8\u91cd\u590d\uff0c\u5141\u8bb8\u4e3aNULL\u503c\uff0c\u4e00\u4e2a\u8868\u5141\u8bb8\u591a\u4e2a\u5217\u521b\u5efa\u552f\u4e00\u7d22\u5f15\u3002</p> <ul> <li>\u53ef\u4ee5\u901a\u8fc7 ALTER TABLE table_name ADD UNIQUE (column); \u521b\u5efa\u552f\u4e00\u7d22\u5f15</li> <li>\u53ef\u4ee5\u901a\u8fc7 ALTER TABLE table_name ADD UNIQUE (column1,column2); \u521b\u5efa\u552f\u4e00\u7ec4\u5408\u7d22\u5f15</li> </ul> <p>\u666e\u901a\u7d22\u5f15: \u57fa\u672c\u7684\u7d22\u5f15\u7c7b\u578b\uff0c\u6ca1\u6709\u552f\u4e00\u6027\u7684\u9650\u5236\uff0c\u5141\u8bb8\u4e3aNULL\u503c\u3002</p> <ul> <li>\u53ef\u4ee5\u901a\u8fc7ALTER TABLE table_name ADD INDEX index_name (column);\u521b\u5efa\u666e\u901a\u7d22\u5f15</li> <li>\u53ef\u4ee5\u901a\u8fc7ALTER TABLE table_name ADD INDEX index_name(column1, column2, column3);\u521b\u5efa\u7ec4\u5408\u7d22\u5f15</li> </ul> <p>\u5168\u6587\u7d22\u5f15\uff1a \u662f\u76ee\u524d\u641c\u7d22\u5f15\u64ce\u4f7f\u7528\u7684\u4e00\u79cd\u5173\u952e\u6280\u672f\u3002</p> <ul> <li>\u53ef\u4ee5\u901a\u8fc7ALTER TABLE table_name ADD FULLTEXT (column);\u521b\u5efa\u5168\u6587\u7d22\u5f15</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#bhash","title":"\u7d22\u5f15\u7684\u6570\u636e\u7ed3\u6784\uff08b\u6811\uff0chash\uff09","text":"<p>\u7d22\u5f15\u7684\u6570\u636e\u7ed3\u6784\u548c\u5177\u4f53\u5b58\u50a8\u5f15\u64ce\u7684\u5b9e\u73b0\u6709\u5173\uff0c\u5728MySQL\u4e2d\u4f7f\u7528\u8f83\u591a\u7684\u7d22\u5f15\u6709Hash\u7d22\u5f15\uff0cB+\u6811\u7d22\u5f15\u7b49\uff0c\u800c\u6211\u4eec\u7ecf\u5e38\u4f7f\u7528\u7684InnoDB\u5b58\u50a8\u5f15\u64ce\u7684\u9ed8\u8ba4\u7d22\u5f15\u5b9e\u73b0\u4e3a\uff1aB+\u6811\u7d22\u5f15\u3002\u5bf9\u4e8e\u54c8\u5e0c\u7d22\u5f15\u6765\u8bf4\uff0c\u5e95\u5c42\u7684\u6570\u636e\u7ed3\u6784\u5c31\u662f\u54c8\u5e0c\u8868\uff0c\u56e0\u6b64\u5728\u7edd\u5927\u591a\u6570\u9700\u6c42\u4e3a\u5355\u6761\u8bb0\u5f55\u67e5\u8be2\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u9009\u62e9\u54c8\u5e0c\u7d22\u5f15\uff0c\u67e5\u8be2\u6027\u80fd\u6700\u5feb\uff1b\u5176\u4f59\u5927\u90e8\u5206\u573a\u666f\uff0c\u5efa\u8bae\u9009\u62e9BTree\u7d22\u5f15\u3002</p> <p>1\uff09B\u6811\u7d22\u5f15</p> <p>mysql\u901a\u8fc7\u5b58\u50a8\u5f15\u64ce\u53d6\u6570\u636e\uff0c\u57fa\u672c\u4e0a90%\u7684\u4eba\u7528\u7684\u5c31\u662fInnoDB\u4e86\uff0c\u6309\u7167\u5b9e\u73b0\u65b9\u5f0f\u5206\uff0cInnoDB\u7684\u7d22\u5f15\u7c7b\u578b\u76ee\u524d\u53ea\u6709\u4e24\u79cd\uff1aBTREE\uff08B\u6811\uff09\u7d22\u5f15\u548cHASH\u7d22\u5f15\u3002B\u6811\u7d22\u5f15\u662fMysql\u6570\u636e\u5e93\u4e2d\u4f7f\u7528\u6700\u9891\u7e41\u7684\u7d22\u5f15\u7c7b\u578b\uff0c\u57fa\u672c\u6240\u6709\u5b58\u50a8\u5f15\u64ce\u90fd\u652f\u6301BTree\u7d22\u5f15\u3002\u901a\u5e38\u6211\u4eec\u8bf4\u7684\u7d22\u5f15\u4e0d\u51fa\u610f\u5916\u6307\u7684\u5c31\u662f\uff08B\u6811\uff09\u7d22\u5f15\uff08\u5b9e\u9645\u662f\u7528B+\u6811\u5b9e\u73b0\u7684\uff0c\u56e0\u4e3a\u5728\u67e5\u770b\u8868\u7d22\u5f15\u65f6\uff0cmysql\u4e00\u5f8b\u6253\u5370BTREE\uff0c\u6240\u4ee5\u7b80\u79f0\u4e3aB\u6811\u7d22\u5f15\uff09</p> <p></p> <p>\u67e5\u8be2\u65b9\u5f0f\uff1a</p> <p>\u4e3b\u952e\u7d22\u5f15\u533a:PI(\u5173\u8054\u4fdd\u5b58\u7684\u65f6\u6570\u636e\u7684\u5730\u5740)\u6309\u4e3b\u952e\u67e5\u8be2,</p> <p>\u666e\u901a\u7d22\u5f15\u533a:si(\u5173\u8054\u7684id\u7684\u5730\u5740,\u7136\u540e\u518d\u5230\u8fbe\u4e0a\u9762\u7684\u5730\u5740)\u3002\u6240\u4ee5\u6309\u4e3b\u952e\u67e5\u8be2,\u901f\u5ea6\u6700\u5feb</p> <p>B+tree\u6027\u8d28\uff1a</p> <p>1.\uff09n\u68f5\u5b50tree\u7684\u8282\u70b9\u5305\u542bn\u4e2a\u5173\u952e\u5b57\uff0c\u4e0d\u7528\u6765\u4fdd\u5b58\u6570\u636e\u800c\u662f\u4fdd\u5b58\u6570\u636e\u7684\u7d22\u5f15\u3002</p> <p>2.\uff09\u6240\u6709\u7684\u53f6\u5b50\u7ed3\u70b9\u4e2d\u5305\u542b\u4e86\u5168\u90e8\u5173\u952e\u5b57\u7684\u4fe1\u606f\uff0c\u53ca\u6307\u5411\u542b\u8fd9\u4e9b\u5173\u952e\u5b57\u8bb0\u5f55\u7684\u6307\u9488\uff0c\u4e14\u53f6\u5b50\u7ed3\u70b9\u672c\u8eab\u4f9d\u5173\u952e\u5b57\u7684\u5927\u5c0f\u81ea\u5c0f\u800c\u5927\u987a\u5e8f\u94fe\u63a5\u3002</p> <p>3.\uff09\u6240\u6709\u7684\u975e\u7ec8\u7aef\u7ed3\u70b9\u53ef\u4ee5\u770b\u6210\u662f\u7d22\u5f15\u90e8\u5206\uff0c\u7ed3\u70b9\u4e2d\u4ec5\u542b\u5176\u5b50\u6811\u4e2d\u7684\u6700\u5927\uff08\u6216\u6700\u5c0f\uff09\u5173\u952e\u5b57\u3002</p> <p>4.\uff09B+ \u6811\u4e2d\uff0c\u6570\u636e\u5bf9\u8c61\u7684\u63d2\u5165\u548c\u5220\u9664\u4ec5\u5728\u53f6\u8282\u70b9\u4e0a\u8fdb\u884c\u3002</p> <p>5.\uff09B+\u6811\u67092\u4e2a\u5934\u6307\u9488\uff0c\u4e00\u4e2a\u662f\u6811\u7684\u6839\u8282\u70b9\uff0c\u4e00\u4e2a\u662f\u6700\u5c0f\u5173\u952e\u7801\u7684\u53f6\u8282\u70b9\u3002</p> <p>2\uff09\u54c8\u5e0c\u7d22\u5f15</p> <p>\u7b80\u8981\u8bf4\u4e0b\uff0c\u7c7b\u4f3c\u4e8e\u6570\u636e\u7ed3\u6784\u4e2d\u7b80\u5355\u5b9e\u73b0\u7684HASH\u8868\uff08\u6563\u5217\u8868\uff09\u4e00\u6837\uff0c\u5f53\u6211\u4eec\u5728mysql\u4e2d\u7528\u54c8\u5e0c\u7d22\u5f15\u65f6\uff0c\u4e3b\u8981\u5c31\u662f\u901a\u8fc7Hash\u7b97\u6cd5\uff08\u5e38\u89c1\u7684Hash\u7b97\u6cd5\u6709\u76f4\u63a5\u5b9a\u5740\u6cd5\u3001\u5e73\u65b9\u53d6\u4e2d\u6cd5\u3001\u6298\u53e0\u6cd5\u3001\u9664\u6570\u53d6\u4f59\u6cd5\u3001\u968f\u673a\u6570\u6cd5\uff09\uff0c\u5c06\u6570\u636e\u5e93\u5b57\u6bb5\u6570\u636e\u8f6c\u6362\u6210\u5b9a\u957f\u7684Hash\u503c\uff0c\u4e0e\u8fd9\u6761\u6570\u636e\u7684\u884c\u6307\u9488\u4e00\u5e76\u5b58\u5165Hash\u8868\u7684\u5bf9\u5e94\u4f4d\u7f6e\uff1b\u5982\u679c\u53d1\u751fHash\u78b0\u649e\uff08\u4e24\u4e2a\u4e0d\u540c\u5173\u952e\u5b57\u7684Hash\u503c\u76f8\u540c\uff09\uff0c\u5219\u5728\u5bf9\u5e94Hash\u952e\u4e0b\u4ee5\u94fe\u8868\u5f62\u5f0f\u5b58\u50a8\u3002\u5f53\u7136\u8fd9\u53ea\u662f\u7b80\u7565\u6a21\u62df\u56fe\u3002</p> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_12","title":"\u7d22\u5f15\u7684\u57fa\u672c\u539f\u7406","text":"<p>\u7d22\u5f15\u7528\u6765\u5feb\u901f\u5730\u5bfb\u627e\u90a3\u4e9b\u5177\u6709\u7279\u5b9a\u503c\u7684\u8bb0\u5f55\u3002\u5982\u679c\u6ca1\u6709\u7d22\u5f15\uff0c\u4e00\u822c\u6765\u8bf4\u6267\u884c\u67e5\u8be2\u65f6\u904d\u5386\u6574\u5f20\u8868\u3002</p> <p>\u7d22\u5f15\u7684\u539f\u7406\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u628a\u65e0\u5e8f\u7684\u6570\u636e\u53d8\u6210\u6709\u5e8f\u7684\u67e5\u8be2</p> <ol> <li>\u628a\u521b\u5efa\u4e86\u7d22\u5f15\u7684\u5217\u7684\u5185\u5bb9\u8fdb\u884c\u6392\u5e8f</li> <li>\u5bf9\u6392\u5e8f\u7ed3\u679c\u751f\u6210\u5012\u6392\u8868</li> <li>\u5728\u5012\u6392\u8868\u5185\u5bb9\u4e0a\u62fc\u4e0a\u6570\u636e\u5730\u5740\u94fe</li> <li>\u5728\u67e5\u8be2\u7684\u65f6\u5019\uff0c\u5148\u62ff\u5230\u5012\u6392\u8868\u5185\u5bb9\uff0c\u518d\u53d6\u51fa\u6570\u636e\u5730\u5740\u94fe\uff0c\u4ece\u800c\u62ff\u5230\u5177\u4f53\u6570\u636e</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_13","title":"\u7d22\u5f15\u7b97\u6cd5\u6709\u54ea\u4e9b\uff1f","text":"<p>\u7d22\u5f15\u7b97\u6cd5\u6709 BTree\u7b97\u6cd5\u548cHash\u7b97\u6cd5</p> <p>BTree\u7b97\u6cd5</p> <p>BTree\u662f\u6700\u5e38\u7528\u7684mysql\u6570\u636e\u5e93\u7d22\u5f15\u7b97\u6cd5\uff0c\u4e5f\u662fmysql\u9ed8\u8ba4\u7684\u7b97\u6cd5\u3002\u56e0\u4e3a\u5b83\u4e0d\u4ec5\u53ef\u4ee5\u88ab\u7528\u5728=,&gt;,&gt;=,&lt;,&lt;=\u548cbetween\u8fd9\u4e9b\u6bd4\u8f83\u64cd\u4f5c\u7b26\u4e0a\uff0c\u800c\u4e14\u8fd8\u53ef\u4ee5\u7528\u4e8elike\u64cd\u4f5c\u7b26\uff0c\u53ea\u8981\u5b83\u7684\u67e5\u8be2\u6761\u4ef6\u662f\u4e00\u4e2a\u4e0d\u4ee5\u901a\u914d\u7b26\u5f00\u5934\u7684\u5e38\u91cf\uff0c \u4f8b\u5982\uff1a</p> <p>-- \u53ea\u8981\u5b83\u7684\u67e5\u8be2\u6761\u4ef6\u662f\u4e00\u4e2a\u4e0d\u4ee5\u901a\u914d\u7b26\u5f00\u5934\u7684\u5e38\u91cf select * from user where name like 'jack%'; -- \u5982\u679c\u4e00\u901a\u914d\u7b26\u5f00\u5934\uff0c\u6216\u8005\u6ca1\u6709\u4f7f\u7528\u5e38\u91cf\uff0c\u5219\u4e0d\u4f1a\u4f7f\u7528\u7d22\u5f15\uff0c\u4f8b\u5982\uff1a select * from user where name like '%jack';</p> <ul> <li>1</li> <li>2</li> <li>3</li> <li>4</li> </ul> <p>Hash\u7b97\u6cd5</p> <p>Hash Hash\u7d22\u5f15\u53ea\u80fd\u7528\u4e8e\u5bf9\u7b49\u6bd4\u8f83\uff0c\u4f8b\u5982=,&lt;=&gt;\uff08\u76f8\u5f53\u4e8e=\uff09\u64cd\u4f5c\u7b26\u3002\u7531\u4e8e\u662f\u4e00\u6b21\u5b9a\u4f4d\u6570\u636e\uff0c\u4e0d\u50cfBTree\u7d22\u5f15\u9700\u8981\u4ece\u6839\u8282\u70b9\u5230\u679d\u8282\u70b9\uff0c\u6700\u540e\u624d\u80fd\u8bbf\u95ee\u5230\u9875\u8282\u70b9\u8fd9\u6837\u591a\u6b21IO\u8bbf\u95ee\uff0c\u6240\u4ee5\u68c0\u7d22\u6548\u7387\u8fdc\u9ad8\u4e8eBTree\u7d22\u5f15\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_14","title":"\u7d22\u5f15\u8bbe\u8ba1\u7684\u539f\u5219\uff1f","text":"<ol> <li>\u9002\u5408\u7d22\u5f15\u7684\u5217\u662f\u51fa\u73b0\u5728where\u5b50\u53e5\u4e2d\u7684\u5217\uff0c\u6216\u8005\u8fde\u63a5\u5b50\u53e5\u4e2d\u6307\u5b9a\u7684\u5217</li> <li>\u57fa\u6570\u8f83\u5c0f\u7684\u7c7b\uff0c\u7d22\u5f15\u6548\u679c\u8f83\u5dee\uff0c\u6ca1\u6709\u5fc5\u8981\u5728\u6b64\u5217\u5efa\u7acb\u7d22\u5f15</li> <li>\u4f7f\u7528\u77ed\u7d22\u5f15\uff0c\u5982\u679c\u5bf9\u957f\u5b57\u7b26\u4e32\u5217\u8fdb\u884c\u7d22\u5f15\uff0c\u5e94\u8be5\u6307\u5b9a\u4e00\u4e2a\u524d\u7f00\u957f\u5ea6\uff0c\u8fd9\u6837\u80fd\u591f\u8282\u7701\u5927\u91cf\u7d22\u5f15\u7a7a\u95f4</li> <li>\u4e0d\u8981\u8fc7\u5ea6\u7d22\u5f15\u3002\u7d22\u5f15\u9700\u8981\u989d\u5916\u7684\u78c1\u76d8\u7a7a\u95f4\uff0c\u5e76\u964d\u4f4e\u5199\u64cd\u4f5c\u7684\u6027\u80fd\u3002\u5728\u4fee\u6539\u8868\u5185\u5bb9\u7684\u65f6\u5019\uff0c\u7d22\u5f15\u4f1a\u8fdb\u884c\u66f4\u65b0\u751a\u81f3\u91cd\u6784\uff0c\u7d22\u5f15\u5217\u8d8a\u591a\uff0c\u8fd9\u4e2a\u65f6\u95f4\u5c31\u4f1a\u8d8a\u957f\u3002\u6240\u4ee5\u53ea\u4fdd\u6301\u9700\u8981\u7684\u7d22\u5f15\u6709\u5229\u4e8e\u67e5\u8be2\u5373\u53ef\u3002</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_15","title":"\u521b\u5efa\u7d22\u5f15\u7684\u539f\u5219\uff08\u91cd\u4e2d\u4e4b\u91cd\uff09","text":"<p>\u7d22\u5f15\u867d\u597d\uff0c\u4f46\u4e5f\u4e0d\u662f\u65e0\u9650\u5236\u7684\u4f7f\u7528\uff0c\u6700\u597d\u7b26\u5408\u4e00\u4e0b\u51e0\u4e2a\u539f\u5219</p> <p>1\uff09 \u6700\u5de6\u524d\u7f00\u5339\u914d\u539f\u5219\uff0c\u7ec4\u5408\u7d22\u5f15\u975e\u5e38\u91cd\u8981\u7684\u539f\u5219\uff0cmysql\u4f1a\u4e00\u76f4\u5411\u53f3\u5339\u914d\u76f4\u5230\u9047\u5230\u8303\u56f4\u67e5\u8be2(&gt;\u3001&lt;\u3001between\u3001like)\u5c31\u505c\u6b62\u5339\u914d\uff0c\u6bd4\u5982a = 1 and b = 2 and c &gt; 3 and d = 4 \u5982\u679c\u5efa\u7acb(a,b,c,d)\u987a\u5e8f\u7684\u7d22\u5f15\uff0cd\u662f\u7528\u4e0d\u5230\u7d22\u5f15\u7684\uff0c\u5982\u679c\u5efa\u7acb(a,b,d,c)\u7684\u7d22\u5f15\u5219\u90fd\u53ef\u4ee5\u7528\u5230\uff0ca,b,d\u7684\u987a\u5e8f\u53ef\u4ee5\u4efb\u610f\u8c03\u6574\u3002</p> <p>2\uff09\u8f83\u9891\u7e41\u4f5c\u4e3a\u67e5\u8be2\u6761\u4ef6\u7684\u5b57\u6bb5\u624d\u53bb\u521b\u5efa\u7d22\u5f15</p> <p>3\uff09\u66f4\u65b0\u9891\u7e41\u5b57\u6bb5\u4e0d\u9002\u5408\u521b\u5efa\u7d22\u5f15</p> <p>4\uff09\u82e5\u662f\u4e0d\u80fd\u6709\u6548\u533a\u5206\u6570\u636e\u7684\u5217\u4e0d\u9002\u5408\u505a\u7d22\u5f15\u5217(\u5982\u6027\u522b\uff0c\u7537\u5973\u672a\u77e5\uff0c\u6700\u591a\u4e5f\u5c31\u4e09\u79cd\uff0c\u533a\u5206\u5ea6\u5b9e\u5728\u592a\u4f4e)</p> <p>5\uff09\u5c3d\u91cf\u7684\u6269\u5c55\u7d22\u5f15\uff0c\u4e0d\u8981\u65b0\u5efa\u7d22\u5f15\u3002\u6bd4\u5982\u8868\u4e2d\u5df2\u7ecf\u6709a\u7684\u7d22\u5f15\uff0c\u73b0\u5728\u8981\u52a0(a,b)\u7684\u7d22\u5f15\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u4fee\u6539\u539f\u6765\u7684\u7d22\u5f15\u5373\u53ef\u3002</p> <p>6\uff09\u5b9a\u4e49\u6709\u5916\u952e\u7684\u6570\u636e\u5217\u4e00\u5b9a\u8981\u5efa\u7acb\u7d22\u5f15\u3002</p> <p>7\uff09\u5bf9\u4e8e\u90a3\u4e9b\u67e5\u8be2\u4e2d\u5f88\u5c11\u6d89\u53ca\u7684\u5217\uff0c\u91cd\u590d\u503c\u6bd4\u8f83\u591a\u7684\u5217\u4e0d\u8981\u5efa\u7acb\u7d22\u5f15\u3002</p> <p>8\uff09\u5bf9\u4e8e\u5b9a\u4e49\u4e3atext\u3001image\u548cbit\u7684\u6570\u636e\u7c7b\u578b\u7684\u5217\u4e0d\u8981\u5efa\u7acb\u7d22\u5f15\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_16","title":"\u521b\u5efa\u7d22\u5f15\u7684\u4e09\u79cd\u65b9\u5f0f\uff0c\u5220\u9664\u7d22\u5f15","text":"<p>\u7b2c\u4e00\u79cd\u65b9\u5f0f\uff1a\u5728\u6267\u884cCREATE TABLE\u65f6\u521b\u5efa\u7d22\u5f15</p> <p>CREATE TABLE user_index2 ( id INT auto_increment PRIMARY KEY, first_name VARCHAR (16), last_name VARCHAR (16), id_card VARCHAR (18), information text, KEY name (first_name, last_name), FULLTEXT KEY (information), UNIQUE KEY (id_card) );</p> <ul> <li>1</li> <li>2</li> <li>3</li> <li>4</li> <li>5</li> <li>6</li> <li>7</li> <li>8</li> <li>9</li> <li>10</li> </ul> <p>\u7b2c\u4e8c\u79cd\u65b9\u5f0f\uff1a\u4f7f\u7528ALTER TABLE\u547d\u4ee4\u53bb\u589e\u52a0\u7d22\u5f15</p> <p>ALTER TABLE table_name ADD INDEX index_name (column_list);</p> <ul> <li>1</li> </ul> <p>ALTER TABLE\u7528\u6765\u521b\u5efa\u666e\u901a\u7d22\u5f15\u3001UNIQUE\u7d22\u5f15\u6216PRIMARY KEY\u7d22\u5f15\u3002</p> <p>\u5176\u4e2dtable_name\u662f\u8981\u589e\u52a0\u7d22\u5f15\u7684\u8868\u540d\uff0ccolumn_list\u6307\u51fa\u5bf9\u54ea\u4e9b\u5217\u8fdb\u884c\u7d22\u5f15\uff0c\u591a\u5217\u65f6\u5404\u5217\u4e4b\u95f4\u7528\u9017\u53f7\u5206\u9694\u3002</p> <p>\u7d22\u5f15\u540dindex_name\u53ef\u81ea\u5df1\u547d\u540d\uff0c\u7f3a\u7701\u65f6\uff0cMySQL\u5c06\u6839\u636e\u7b2c\u4e00\u4e2a\u7d22\u5f15\u5217\u8d4b\u4e00\u4e2a\u540d\u79f0\u3002\u53e6\u5916\uff0cALTER TABLE\u5141\u8bb8\u5728\u5355\u4e2a\u8bed\u53e5\u4e2d\u66f4\u6539\u591a\u4e2a\u8868\uff0c\u56e0\u6b64\u53ef\u4ee5\u5728\u540c\u65f6\u521b\u5efa\u591a\u4e2a\u7d22\u5f15\u3002</p> <p>\u7b2c\u4e09\u79cd\u65b9\u5f0f\uff1a\u4f7f\u7528CREATE INDEX\u547d\u4ee4\u521b\u5efa</p> <p>CREATE INDEX index_name ON table_name (column_list);</p> <ul> <li>1</li> </ul> <p>CREATE INDEX\u53ef\u5bf9\u8868\u589e\u52a0\u666e\u901a\u7d22\u5f15\u6216UNIQUE\u7d22\u5f15\u3002\uff08\u4f46\u662f\uff0c\u4e0d\u80fd\u521b\u5efaPRIMARY KEY\u7d22\u5f15\uff09</p> <p>\u5220\u9664\u7d22\u5f15</p> <p>\u6839\u636e\u7d22\u5f15\u540d\u5220\u9664\u666e\u901a\u7d22\u5f15\u3001\u552f\u4e00\u7d22\u5f15\u3001\u5168\u6587\u7d22\u5f15\uff1aalter table \u8868\u540d drop KEY \u7d22\u5f15\u540d</p> <p>alter table user_index drop KEY name; alter table user_index drop KEY id_card; alter table user_index drop KEY information;</p> <ul> <li>1</li> <li>2</li> <li>3</li> </ul> <p>\u5220\u9664\u4e3b\u952e\u7d22\u5f15\uff1aalter table \u8868\u540d drop primary key\uff08\u56e0\u4e3a\u4e3b\u952e\u53ea\u6709\u4e00\u4e2a\uff09\u3002\u8fd9\u91cc\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u4e3b\u952e\u81ea\u589e\u957f\uff0c\u90a3\u4e48\u4e0d\u80fd\u76f4\u63a5\u6267\u884c\u6b64\u64cd\u4f5c\uff08\u81ea\u589e\u957f\u4f9d\u8d56\u4e8e\u4e3b\u952e\u7d22\u5f15\uff09\uff1a</p> <p></p> <p>\u9700\u8981\u53d6\u6d88\u81ea\u589e\u957f\u518d\u884c\u5220\u9664\uff1a</p> <p>alter table user_index -- \u91cd\u65b0\u5b9a\u4e49\u5b57\u6bb5 MODIFY id int, drop PRIMARY KEY</p> <ul> <li>1</li> <li>2</li> <li>3</li> <li>4</li> </ul> <p>\u4f46\u901a\u5e38\u4e0d\u4f1a\u5220\u9664\u4e3b\u952e\uff0c\u56e0\u4e3a\u8bbe\u8ba1\u4e3b\u952e\u4e00\u5b9a\u4e0e\u4e1a\u52a1\u903b\u8f91\u65e0\u5173\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_17","title":"\u521b\u5efa\u7d22\u5f15\u65f6\u9700\u8981\u6ce8\u610f\u4ec0\u4e48\uff1f","text":"<ul> <li>\u975e\u7a7a\u5b57\u6bb5\uff1a\u5e94\u8be5\u6307\u5b9a\u5217\u4e3aNOT NULL\uff0c\u9664\u975e\u4f60\u60f3\u5b58\u50a8NULL\u3002\u5728mysql\u4e2d\uff0c\u542b\u6709\u7a7a\u503c\u7684\u5217\u5f88\u96be\u8fdb\u884c\u67e5\u8be2\u4f18\u5316\uff0c\u56e0\u4e3a\u5b83\u4eec\u4f7f\u5f97\u7d22\u5f15\u3001\u7d22\u5f15\u7684\u7edf\u8ba1\u4fe1\u606f\u4ee5\u53ca\u6bd4\u8f83\u8fd0\u7b97\u66f4\u52a0\u590d\u6742\u3002\u4f60\u5e94\u8be5\u75280\u3001\u4e00\u4e2a\u7279\u6b8a\u7684\u503c\u6216\u8005\u4e00\u4e2a\u7a7a\u4e32\u4ee3\u66ff\u7a7a\u503c\uff1b</li> <li>\u53d6\u503c\u79bb\u6563\u5927\u7684\u5b57\u6bb5\uff1a\uff08\u53d8\u91cf\u5404\u4e2a\u53d6\u503c\u4e4b\u95f4\u7684\u5dee\u5f02\u7a0b\u5ea6\uff09\u7684\u5217\u653e\u5230\u8054\u5408\u7d22\u5f15\u7684\u524d\u9762\uff0c\u53ef\u4ee5\u901a\u8fc7count()\u51fd\u6570\u67e5\u770b\u5b57\u6bb5\u7684\u5dee\u5f02\u503c\uff0c\u8fd4\u56de\u503c\u8d8a\u5927\u8bf4\u660e\u5b57\u6bb5\u7684\u552f\u4e00\u503c\u8d8a\u591a\u5b57\u6bb5\u7684\u79bb\u6563\u7a0b\u5ea6\u9ad8\uff1b</li> <li>\u7d22\u5f15\u5b57\u6bb5\u8d8a\u5c0f\u8d8a\u597d\uff1a\u6570\u636e\u5e93\u7684\u6570\u636e\u5b58\u50a8\u4ee5\u9875\u4e3a\u5355\u4f4d\u4e00\u9875\u5b58\u50a8\u7684\u6570\u636e\u8d8a\u591a\u4e00\u6b21IO\u64cd\u4f5c\u83b7\u53d6\u7684\u6570\u636e\u8d8a\u5927\u6548\u7387\u8d8a\u9ad8\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_18","title":"\u4f7f\u7528\u7d22\u5f15\u67e5\u8be2\u4e00\u5b9a\u80fd\u63d0\u9ad8\u67e5\u8be2\u7684\u6027\u80fd\u5417\uff1f\u4e3a\u4ec0\u4e48","text":"<p>\u901a\u5e38\uff0c\u901a\u8fc7\u7d22\u5f15\u67e5\u8be2\u6570\u636e\u6bd4\u5168\u8868\u626b\u63cf\u8981\u5feb\u3002\u4f46\u662f\u6211\u4eec\u4e5f\u5fc5\u987b\u6ce8\u610f\u5230\u5b83\u7684\u4ee3\u4ef7\u3002</p> <ul> <li>\u7d22\u5f15\u9700\u8981\u7a7a\u95f4\u6765\u5b58\u50a8\uff0c\u4e5f\u9700\u8981\u5b9a\u671f\u7ef4\u62a4\uff0c \u6bcf\u5f53\u6709\u8bb0\u5f55\u5728\u8868\u4e2d\u589e\u51cf\u6216\u7d22\u5f15\u5217\u88ab\u4fee\u6539\u65f6\uff0c\u7d22\u5f15\u672c\u8eab\u4e5f\u4f1a\u88ab\u4fee\u6539\u3002 \u8fd9\u610f\u5473\u7740\u6bcf\u6761\u8bb0\u5f55\u7684INSERT\uff0cDELETE\uff0cUPDATE\u5c06\u4e3a\u6b64\u591a\u4ed8\u51fa4\uff0c5 \u6b21\u7684\u78c1\u76d8I/O\u3002 \u56e0\u4e3a\u7d22\u5f15\u9700\u8981\u989d\u5916\u7684\u5b58\u50a8\u7a7a\u95f4\u548c\u5904\u7406\uff0c\u90a3\u4e9b\u4e0d\u5fc5\u8981\u7684\u7d22\u5f15\u53cd\u800c\u4f1a\u4f7f\u67e5\u8be2\u53cd\u5e94\u65f6\u95f4\u53d8\u6162\u3002\u4f7f\u7528\u7d22\u5f15\u67e5\u8be2\u4e0d\u4e00\u5b9a\u80fd\u63d0\u9ad8\u67e5\u8be2\u6027\u80fd\uff0c\u7d22\u5f15\u8303\u56f4\u67e5\u8be2(INDEX RANGE SCAN)\u9002\u7528\u4e8e\u4e24\u79cd\u60c5\u51b5:</li> <li>\u57fa\u4e8e\u4e00\u4e2a\u8303\u56f4\u7684\u68c0\u7d22\uff0c\u4e00\u822c\u67e5\u8be2\u8fd4\u56de\u7ed3\u679c\u96c6\u5c0f\u4e8e\u8868\u4e2d\u8bb0\u5f55\u6570\u768430%</li> <li>\u57fa\u4e8e\u975e\u552f\u4e00\u6027\u7d22\u5f15\u7684\u68c0\u7d22</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_19","title":"\u767e\u4e07\u7ea7\u522b\u6216\u4ee5\u4e0a\u7684\u6570\u636e\u5982\u4f55\u5220\u9664","text":"<p>\u5173\u4e8e\u7d22\u5f15\uff1a\u7531\u4e8e\u7d22\u5f15\u9700\u8981\u989d\u5916\u7684\u7ef4\u62a4\u6210\u672c\uff0c\u56e0\u4e3a\u7d22\u5f15\u6587\u4ef6\u662f\u5355\u72ec\u5b58\u5728\u7684\u6587\u4ef6,\u6240\u4ee5\u5f53\u6211\u4eec\u5bf9\u6570\u636e\u7684\u589e\u52a0,\u4fee\u6539,\u5220\u9664,\u90fd\u4f1a\u4ea7\u751f\u989d\u5916\u7684\u5bf9\u7d22\u5f15\u6587\u4ef6\u7684\u64cd\u4f5c,\u8fd9\u4e9b\u64cd\u4f5c\u9700\u8981\u6d88\u8017\u989d\u5916\u7684IO,\u4f1a\u964d\u4f4e\u589e/\u6539/\u5220\u7684\u6267\u884c\u6548\u7387\u3002\u6240\u4ee5\uff0c\u5728\u6211\u4eec\u5220\u9664\u6570\u636e\u5e93\u767e\u4e07\u7ea7\u522b\u6570\u636e\u7684\u65f6\u5019\uff0c\u67e5\u8be2MySQL\u5b98\u65b9\u624b\u518c\u5f97\u77e5\u5220\u9664\u6570\u636e\u7684\u901f\u5ea6\u548c\u521b\u5efa\u7684\u7d22\u5f15\u6570\u91cf\u662f\u6210\u6b63\u6bd4\u7684\u3002</p> <ol> <li>\u6240\u4ee5\u6211\u4eec\u60f3\u8981\u5220\u9664\u767e\u4e07\u6570\u636e\u7684\u65f6\u5019\u53ef\u4ee5\u5148\u5220\u9664\u7d22\u5f15\uff08\u6b64\u65f6\u5927\u6982\u8017\u65f6\u4e09\u5206\u591a\u949f\uff09</li> <li>\u7136\u540e\u5220\u9664\u5176\u4e2d\u65e0\u7528\u6570\u636e\uff08\u6b64\u8fc7\u7a0b\u9700\u8981\u4e0d\u5230\u4e24\u5206\u949f\uff09</li> <li>\u5220\u9664\u5b8c\u6210\u540e\u91cd\u65b0\u521b\u5efa\u7d22\u5f15(\u6b64\u65f6\u6570\u636e\u8f83\u5c11\u4e86)\u521b\u5efa\u7d22\u5f15\u4e5f\u975e\u5e38\u5feb\uff0c\u7ea6\u5341\u5206\u949f\u5de6\u53f3\u3002</li> <li>\u4e0e\u4e4b\u524d\u7684\u76f4\u63a5\u5220\u9664\u7edd\u5bf9\u662f\u8981\u5feb\u901f\u5f88\u591a\uff0c\u66f4\u522b\u8bf4\u4e07\u4e00\u5220\u9664\u4e2d\u65ad,\u4e00\u5207\u5220\u9664\u4f1a\u56de\u6eda\u3002\u90a3\u66f4\u662f\u5751\u4e86\u3002</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_20","title":"\u524d\u7f00\u7d22\u5f15","text":"<p>\u8bed\u6cd5\uff1aindex(field(10))\uff0c\u4f7f\u7528\u5b57\u6bb5\u503c\u7684\u524d10\u4e2a\u5b57\u7b26\u5efa\u7acb\u7d22\u5f15\uff0c\u9ed8\u8ba4\u662f\u4f7f\u7528\u5b57\u6bb5\u7684\u5168\u90e8\u5185\u5bb9\u5efa\u7acb\u7d22\u5f15\u3002</p> <p>\u524d\u63d0\uff1a\u524d\u7f00\u7684\u6807\u8bc6\u5ea6\u9ad8\u3002\u6bd4\u5982\u5bc6\u7801\u5c31\u9002\u5408\u5efa\u7acb\u524d\u7f00\u7d22\u5f15\uff0c\u56e0\u4e3a\u5bc6\u7801\u51e0\u4e4e\u5404\u4e0d\u76f8\u540c\u3002</p> <p>\u5b9e\u64cd\u7684\u96be\u5ea6\uff1a\u5728\u4e8e\u524d\u7f00\u622a\u53d6\u7684\u957f\u5ea6\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u5229\u7528select count(*)/count(distinct left(password,prefixLen));\uff0c\u901a\u8fc7\u4ece\u8c03\u6574prefixLen\u7684\u503c\uff08\u4ece1\u81ea\u589e\uff09\u67e5\u770b\u4e0d\u540c\u524d\u7f00\u957f\u5ea6\u7684\u4e00\u4e2a\u5e73\u5747\u5339\u914d\u5ea6\uff0c\u63a5\u8fd11\u65f6\u5c31\u53ef\u4ee5\u4e86\uff08\u8868\u793a\u4e00\u4e2a\u5bc6\u7801\u7684\u524dprefixLen\u4e2a\u5b57\u7b26\u51e0\u4e4e\u80fd\u786e\u5b9a\u552f\u4e00\u4e00\u6761\u8bb0\u5f55\uff09</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_21","title":"\u4ec0\u4e48\u662f\u6700\u5de6\u524d\u7f00\u539f\u5219\uff1f\u4ec0\u4e48\u662f\u6700\u5de6\u5339\u914d\u539f\u5219","text":"<ul> <li>\u987e\u540d\u601d\u4e49\uff0c\u5c31\u662f\u6700\u5de6\u4f18\u5148\uff0c\u5728\u521b\u5efa\u591a\u5217\u7d22\u5f15\u65f6\uff0c\u8981\u6839\u636e\u4e1a\u52a1\u9700\u6c42\uff0cwhere\u5b50\u53e5\u4e2d\u4f7f\u7528\u6700\u9891\u7e41\u7684\u4e00\u5217\u653e\u5728\u6700\u5de6\u8fb9\u3002</li> <li>\u6700\u5de6\u524d\u7f00\u5339\u914d\u539f\u5219\uff0c\u975e\u5e38\u91cd\u8981\u7684\u539f\u5219\uff0cmysql\u4f1a\u4e00\u76f4\u5411\u53f3\u5339\u914d\u76f4\u5230\u9047\u5230\u8303\u56f4\u67e5\u8be2(&gt;\u3001&lt;\u3001between\u3001like)\u5c31\u505c\u6b62\u5339\u914d\uff0c\u6bd4\u5982a = 1 and b = 2 and c &gt; 3 and d = 4 \u5982\u679c\u5efa\u7acb(a,b,c,d)\u987a\u5e8f\u7684\u7d22\u5f15\uff0cd\u662f\u7528\u4e0d\u5230\u7d22\u5f15\u7684\uff0c\u5982\u679c\u5efa\u7acb(a,b,d,c)\u7684\u7d22\u5f15\u5219\u90fd\u53ef\u4ee5\u7528\u5230\uff0ca,b,d\u7684\u987a\u5e8f\u53ef\u4ee5\u4efb\u610f\u8c03\u6574\u3002</li> <li>=\u548cin\u53ef\u4ee5\u4e71\u5e8f\uff0c\u6bd4\u5982a = 1 and b = 2 and c = 3 \u5efa\u7acb(a,b,c)\u7d22\u5f15\u53ef\u4ee5\u4efb\u610f\u987a\u5e8f\uff0cmysql\u7684\u67e5\u8be2\u4f18\u5316\u5668\u4f1a\u5e2e\u4f60\u4f18\u5316\u6210\u7d22\u5f15\u53ef\u4ee5\u8bc6\u522b\u7684\u5f62\u5f0f</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#bb","title":"B\u6811\u548cB+\u6811\u7684\u533a\u522b","text":"<ul> <li> <p>\u5728B\u6811\u4e2d\uff0c\u4f60\u53ef\u4ee5\u5c06\u952e\u548c\u503c\u5b58\u653e\u5728\u5185\u90e8\u8282\u70b9\u548c\u53f6\u5b50\u8282\u70b9\uff1b\u4f46\u5728B+\u6811\u4e2d\uff0c\u5185\u90e8\u8282\u70b9\u90fd\u662f\u952e\uff0c\u6ca1\u6709\u503c\uff0c\u53f6\u5b50\u8282\u70b9\u540c\u65f6\u5b58\u653e\u952e\u548c\u503c\u3002</p> </li> <li> <p>B+\u6811\u7684\u53f6\u5b50\u8282\u70b9\u6709\u4e00\u6761\u94fe\u76f8\u8fde\uff0c\u800cB\u6811\u7684\u53f6\u5b50\u8282\u70b9\u5404\u81ea\u72ec\u7acb\u3002</p> </li> </ul> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#b","title":"\u4f7f\u7528B\u6811\u7684\u597d\u5904","text":"<p>B\u6811\u53ef\u4ee5\u5728\u5185\u90e8\u8282\u70b9\u540c\u65f6\u5b58\u50a8\u952e\u548c\u503c\uff0c\u56e0\u6b64\uff0c\u628a\u9891\u7e41\u8bbf\u95ee\u7684\u6570\u636e\u653e\u5728\u9760\u8fd1\u6839\u8282\u70b9\u7684\u5730\u65b9\u5c06\u4f1a\u5927\u5927\u63d0\u9ad8\u70ed\u70b9\u6570\u636e\u7684\u67e5\u8be2\u6548\u7387\u3002\u8fd9\u79cd\u7279\u6027\u4f7f\u5f97B\u6811\u5728\u7279\u5b9a\u6570\u636e\u91cd\u590d\u591a\u6b21\u67e5\u8be2\u7684\u573a\u666f\u4e2d\u66f4\u52a0\u9ad8\u6548\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#b_1","title":"\u4f7f\u7528B+\u6811\u7684\u597d\u5904","text":"<p>\u7531\u4e8eB+\u6811\u7684\u5185\u90e8\u8282\u70b9\u53ea\u5b58\u653e\u952e\uff0c\u4e0d\u5b58\u653e\u503c\uff0c\u56e0\u6b64\uff0c\u4e00\u6b21\u8bfb\u53d6\uff0c\u53ef\u4ee5\u5728\u5185\u5b58\u9875\u4e2d\u83b7\u53d6\u66f4\u591a\u7684\u952e\uff0c\u6709\u5229\u4e8e\u66f4\u5feb\u5730\u7f29\u5c0f\u67e5\u627e\u8303\u56f4\u3002 B+\u6811\u7684\u53f6\u8282\u70b9\u7531\u4e00\u6761\u94fe\u76f8\u8fde\uff0c\u56e0\u6b64\uff0c\u5f53\u9700\u8981\u8fdb\u884c\u4e00\u6b21\u5168\u6570\u636e\u904d\u5386\u7684\u65f6\u5019\uff0cB+\u6811\u53ea\u9700\u8981\u4f7f\u7528O(logN)\u65f6\u95f4\u627e\u5230\u6700\u5c0f\u7684\u4e00\u4e2a\u8282\u70b9\uff0c\u7136\u540e\u901a\u8fc7\u94fe\u8fdb\u884cO(N)\u7684\u987a\u5e8f\u904d\u5386\u5373\u53ef\u3002\u800cB\u6811\u5219\u9700\u8981\u5bf9\u6811\u7684\u6bcf\u4e00\u5c42\u8fdb\u884c\u904d\u5386\uff0c\u8fd9\u4f1a\u9700\u8981\u66f4\u591a\u7684\u5185\u5b58\u7f6e\u6362\u6b21\u6570\uff0c\u56e0\u6b64\u4e5f\u5c31\u9700\u8981\u82b1\u8d39\u66f4\u591a\u7684\u65f6\u95f4</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#hashb","title":"Hash\u7d22\u5f15\u548cB+\u6811\u6240\u6709\u6709\u4ec0\u4e48\u533a\u522b\u6216\u8005\u8bf4\u4f18\u52a3\u5462?","text":"<p>\u9996\u5148\u8981\u77e5\u9053Hash\u7d22\u5f15\u548cB+\u6811\u7d22\u5f15\u7684\u5e95\u5c42\u5b9e\u73b0\u539f\u7406\uff1a</p> <p>hash\u7d22\u5f15\u5e95\u5c42\u5c31\u662fhash\u8868\uff0c\u8fdb\u884c\u67e5\u627e\u65f6\uff0c\u8c03\u7528\u4e00\u6b21hash\u51fd\u6570\u5c31\u53ef\u4ee5\u83b7\u53d6\u5230\u76f8\u5e94\u7684\u952e\u503c\uff0c\u4e4b\u540e\u8fdb\u884c\u56de\u8868\u67e5\u8be2\u83b7\u5f97\u5b9e\u9645\u6570\u636e\u3002B+\u6811\u5e95\u5c42\u5b9e\u73b0\u662f\u591a\u8def\u5e73\u8861\u67e5\u627e\u6811\u3002\u5bf9\u4e8e\u6bcf\u4e00\u6b21\u7684\u67e5\u8be2\u90fd\u662f\u4ece\u6839\u8282\u70b9\u51fa\u53d1\uff0c\u67e5\u627e\u5230\u53f6\u5b50\u8282\u70b9\u65b9\u53ef\u4ee5\u83b7\u5f97\u6240\u67e5\u952e\u503c\uff0c\u7136\u540e\u6839\u636e\u67e5\u8be2\u5224\u65ad\u662f\u5426\u9700\u8981\u56de\u8868\u67e5\u8be2\u6570\u636e\u3002</p> <p>\u90a3\u4e48\u53ef\u4ee5\u770b\u51fa\u4ed6\u4eec\u6709\u4ee5\u4e0b\u7684\u4e0d\u540c\uff1a</p> <ul> <li>hash\u7d22\u5f15\u8fdb\u884c\u7b49\u503c\u67e5\u8be2\u66f4\u5feb(\u4e00\u822c\u60c5\u51b5\u4e0b)\uff0c\u4f46\u662f\u5374\u65e0\u6cd5\u8fdb\u884c\u8303\u56f4\u67e5\u8be2\u3002</li> </ul> <p>\u56e0\u4e3a\u5728hash\u7d22\u5f15\u4e2d\u7ecf\u8fc7hash\u51fd\u6570\u5efa\u7acb\u7d22\u5f15\u4e4b\u540e\uff0c\u7d22\u5f15\u7684\u987a\u5e8f\u4e0e\u539f\u987a\u5e8f\u65e0\u6cd5\u4fdd\u6301\u4e00\u81f4\uff0c\u4e0d\u80fd\u652f\u6301\u8303\u56f4\u67e5\u8be2\u3002\u800cB+\u6811\u7684\u7684\u6240\u6709\u8282\u70b9\u7686\u9075\u5faa(\u5de6\u8282\u70b9\u5c0f\u4e8e\u7236\u8282\u70b9\uff0c\u53f3\u8282\u70b9\u5927\u4e8e\u7236\u8282\u70b9\uff0c\u591a\u53c9\u6811\u4e5f\u7c7b\u4f3c)\uff0c\u5929\u7136\u652f\u6301\u8303\u56f4\u3002</p> <ul> <li>hash\u7d22\u5f15\u4e0d\u652f\u6301\u4f7f\u7528\u7d22\u5f15\u8fdb\u884c\u6392\u5e8f\uff0c\u539f\u7406\u540c\u4e0a\u3002</li> <li>hash\u7d22\u5f15\u4e0d\u652f\u6301\u6a21\u7cca\u67e5\u8be2\u4ee5\u53ca\u591a\u5217\u7d22\u5f15\u7684\u6700\u5de6\u524d\u7f00\u5339\u914d\u3002\u539f\u7406\u4e5f\u662f\u56e0\u4e3ahash\u51fd\u6570\u7684\u4e0d\u53ef\u9884\u6d4b\u3002AAAA\u548cAAAAB\u7684\u7d22\u5f15\u6ca1\u6709\u76f8\u5173\u6027\u3002</li> <li>hash\u7d22\u5f15\u4efb\u4f55\u65f6\u5019\u90fd\u907f\u514d\u4e0d\u4e86\u56de\u8868\u67e5\u8be2\u6570\u636e\uff0c\u800cB+\u6811\u5728\u7b26\u5408\u67d0\u4e9b\u6761\u4ef6(\u805a\u7c07\u7d22\u5f15\uff0c\u8986\u76d6\u7d22\u5f15\u7b49)\u7684\u65f6\u5019\u53ef\u4ee5\u53ea\u901a\u8fc7\u7d22\u5f15\u5b8c\u6210\u67e5\u8be2\u3002</li> <li>hash\u7d22\u5f15\u867d\u7136\u5728\u7b49\u503c\u67e5\u8be2\u4e0a\u8f83\u5feb\uff0c\u4f46\u662f\u4e0d\u7a33\u5b9a\u3002\u6027\u80fd\u4e0d\u53ef\u9884\u6d4b\uff0c\u5f53\u67d0\u4e2a\u952e\u503c\u5b58\u5728\u5927\u91cf\u91cd\u590d\u7684\u65f6\u5019\uff0c\u53d1\u751fhash\u78b0\u649e\uff0c\u6b64\u65f6\u6548\u7387\u53ef\u80fd\u6781\u5dee\u3002\u800cB+\u6811\u7684\u67e5\u8be2\u6548\u7387\u6bd4\u8f83\u7a33\u5b9a\uff0c\u5bf9\u4e8e\u6240\u6709\u7684\u67e5\u8be2\u90fd\u662f\u4ece\u6839\u8282\u70b9\u5230\u53f6\u5b50\u8282\u70b9\uff0c\u4e14\u6811\u7684\u9ad8\u5ea6\u8f83\u4f4e\u3002</li> </ul> <p>\u56e0\u6b64\uff0c\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u76f4\u63a5\u9009\u62e9B+\u6811\u7d22\u5f15\u53ef\u4ee5\u83b7\u5f97\u7a33\u5b9a\u4e14\u8f83\u597d\u7684\u67e5\u8be2\u901f\u5ea6\u3002\u800c\u4e0d\u9700\u8981\u4f7f\u7528hash\u7d22\u5f15\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#bb_1","title":"\u6570\u636e\u5e93\u4e3a\u4ec0\u4e48\u4f7f\u7528B+\u6811\u800c\u4e0d\u662fB\u6811","text":"<ul> <li>B\u6811\u53ea\u9002\u5408\u968f\u673a\u68c0\u7d22\uff0c\u800cB+\u6811\u540c\u65f6\u652f\u6301\u968f\u673a\u68c0\u7d22\u548c\u987a\u5e8f\u68c0\u7d22\uff1b</li> <li>B+\u6811\u7a7a\u95f4\u5229\u7528\u7387\u66f4\u9ad8\uff0c\u53ef\u51cf\u5c11I/O\u6b21\u6570\uff0c\u78c1\u76d8\u8bfb\u5199\u4ee3\u4ef7\u66f4\u4f4e\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u7d22\u5f15\u672c\u8eab\u4e5f\u5f88\u5927\uff0c\u4e0d\u53ef\u80fd\u5168\u90e8\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\uff0c\u56e0\u6b64\u7d22\u5f15\u5f80\u5f80\u4ee5\u7d22\u5f15\u6587\u4ef6\u7684\u5f62\u5f0f\u5b58\u50a8\u7684\u78c1\u76d8\u4e0a\u3002\u8fd9\u6837\u7684\u8bdd\uff0c\u7d22\u5f15\u67e5\u627e\u8fc7\u7a0b\u4e2d\u5c31\u8981\u4ea7\u751f\u78c1\u76d8I/O\u6d88\u8017\u3002B+\u6811\u7684\u5185\u90e8\u7ed3\u70b9\u5e76\u6ca1\u6709\u6307\u5411\u5173\u952e\u5b57\u5177\u4f53\u4fe1\u606f\u7684\u6307\u9488\uff0c\u53ea\u662f\u4f5c\u4e3a\u7d22\u5f15\u4f7f\u7528\uff0c\u5176\u5185\u90e8\u7ed3\u70b9\u6bd4B\u6811\u5c0f\uff0c\u76d8\u5757\u80fd\u5bb9\u7eb3\u7684\u7ed3\u70b9\u4e2d\u5173\u952e\u5b57\u6570\u91cf\u66f4\u591a\uff0c\u4e00\u6b21\u6027\u8bfb\u5165\u5185\u5b58\u4e2d\u53ef\u4ee5\u67e5\u627e\u7684\u5173\u952e\u5b57\u4e5f\u5c31\u8d8a\u591a\uff0c\u76f8\u5bf9\u7684\uff0cIO\u8bfb\u5199\u6b21\u6570\u4e5f\u5c31\u964d\u4f4e\u4e86\u3002\u800cIO\u8bfb\u5199\u6b21\u6570\u662f\u5f71\u54cd\u7d22\u5f15\u68c0\u7d22\u6548\u7387\u7684\u6700\u5927\u56e0\u7d20\uff1b</li> <li>B+\u6811\u7684\u67e5\u8be2\u6548\u7387\u66f4\u52a0\u7a33\u5b9a\u3002B\u6811\u641c\u7d22\u6709\u53ef\u80fd\u4f1a\u5728\u975e\u53f6\u5b50\u7ed3\u70b9\u7ed3\u675f\uff0c\u8d8a\u9760\u8fd1\u6839\u8282\u70b9\u7684\u8bb0\u5f55\u67e5\u627e\u65f6\u95f4\u8d8a\u77ed\uff0c\u53ea\u8981\u627e\u5230\u5173\u952e\u5b57\u5373\u53ef\u786e\u5b9a\u8bb0\u5f55\u7684\u5b58\u5728\uff0c\u5176\u6027\u80fd\u7b49\u4ef7\u4e8e\u5728\u5173\u952e\u5b57\u5168\u96c6\u5185\u505a\u4e00\u6b21\u4e8c\u5206\u67e5\u627e\u3002\u800c\u5728B+\u6811\u4e2d\uff0c\u987a\u5e8f\u68c0\u7d22\u6bd4\u8f83\u660e\u663e\uff0c\u968f\u673a\u68c0\u7d22\u65f6\uff0c\u4efb\u4f55\u5173\u952e\u5b57\u7684\u67e5\u627e\u90fd\u5fc5\u987b\u8d70\u4e00\u6761\u4ece\u6839\u8282\u70b9\u5230\u53f6\u8282\u70b9\u7684\u8def\uff0c\u6240\u6709\u5173\u952e\u5b57\u7684\u67e5\u627e\u8def\u5f84\u957f\u5ea6\u76f8\u540c\uff0c\u5bfc\u81f4\u6bcf\u4e00\u4e2a\u5173\u952e\u5b57\u7684\u67e5\u8be2\u6548\u7387\u76f8\u5f53\u3002</li> <li>B-\u6811\u5728\u63d0\u9ad8\u4e86\u78c1\u76d8IO\u6027\u80fd\u7684\u540c\u65f6\u5e76\u6ca1\u6709\u89e3\u51b3\u5143\u7d20\u904d\u5386\u7684\u6548\u7387\u4f4e\u4e0b\u7684\u95ee\u9898\u3002B+\u6811\u7684\u53f6\u5b50\u8282\u70b9\u4f7f\u7528\u6307\u9488\u987a\u5e8f\u8fde\u63a5\u5728\u4e00\u8d77\uff0c\u53ea\u8981\u904d\u5386\u53f6\u5b50\u8282\u70b9\u5c31\u53ef\u4ee5\u5b9e\u73b0\u6574\u68f5\u6811\u7684\u904d\u5386\u3002\u800c\u4e14\u5728\u6570\u636e\u5e93\u4e2d\u57fa\u4e8e\u8303\u56f4\u7684\u67e5\u8be2\u662f\u975e\u5e38\u9891\u7e41\u7684\uff0c\u800cB\u6811\u4e0d\u652f\u6301\u8fd9\u6837\u7684\u64cd\u4f5c\u3002</li> <li>\u589e\u5220\u6587\u4ef6\uff08\u8282\u70b9\uff09\u65f6\uff0c\u6548\u7387\u66f4\u9ad8\u3002\u56e0\u4e3aB+\u6811\u7684\u53f6\u5b50\u8282\u70b9\u5305\u542b\u6240\u6709\u5173\u952e\u5b57\uff0c\u5e76\u4ee5\u6709\u5e8f\u7684\u94fe\u8868\u7ed3\u6784\u5b58\u50a8\uff0c\u8fd9\u6837\u53ef\u5f88\u597d\u63d0\u9ad8\u589e\u5220\u6548\u7387\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#b_2","title":"B+\u6811\u5728\u6ee1\u8db3\u805a\u7c07\u7d22\u5f15\u548c\u8986\u76d6\u7d22\u5f15\u7684\u65f6\u5019\u4e0d\u9700\u8981\u56de\u8868\u67e5\u8be2\u6570\u636e\uff0c","text":"<p>\u5728B+\u6811\u7684\u7d22\u5f15\u4e2d\uff0c\u53f6\u5b50\u8282\u70b9\u53ef\u80fd\u5b58\u50a8\u4e86\u5f53\u524d\u7684key\u503c\uff0c\u4e5f\u53ef\u80fd\u5b58\u50a8\u4e86\u5f53\u524d\u7684key\u503c\u4ee5\u53ca\u6574\u884c\u7684\u6570\u636e\uff0c\u8fd9\u5c31\u662f\u805a\u7c07\u7d22\u5f15\u548c\u975e\u805a\u7c07\u7d22\u5f15\u3002 \u5728InnoDB\u4e2d\uff0c\u53ea\u6709\u4e3b\u952e\u7d22\u5f15\u662f\u805a\u7c07\u7d22\u5f15\uff0c\u5982\u679c\u6ca1\u6709\u4e3b\u952e\uff0c\u5219\u6311\u9009\u4e00\u4e2a\u552f\u4e00\u952e\u5efa\u7acb\u805a\u7c07\u7d22\u5f15\u3002\u5982\u679c\u6ca1\u6709\u552f\u4e00\u952e\uff0c\u5219\u9690\u5f0f\u7684\u751f\u6210\u4e00\u4e2a\u952e\u6765\u5efa\u7acb\u805a\u7c07\u7d22\u5f15\u3002</p> <p>\u5f53\u67e5\u8be2\u4f7f\u7528\u805a\u7c07\u7d22\u5f15\u65f6\uff0c\u5728\u5bf9\u5e94\u7684\u53f6\u5b50\u8282\u70b9\uff0c\u53ef\u4ee5\u83b7\u53d6\u5230\u6574\u884c\u6570\u636e\uff0c\u56e0\u6b64\u4e0d\u7528\u518d\u6b21\u8fdb\u884c\u56de\u8868\u67e5\u8be2\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_22","title":"\u4ec0\u4e48\u662f\u805a\u7c07\u7d22\u5f15\uff1f\u4f55\u65f6\u4f7f\u7528\u805a\u7c07\u7d22\u5f15\u4e0e\u975e\u805a\u7c07\u7d22\u5f15","text":"<ul> <li>\u805a\u7c07\u7d22\u5f15\uff1a\u5c06\u6570\u636e\u5b58\u50a8\u4e0e\u7d22\u5f15\u653e\u5230\u4e86\u4e00\u5757\uff0c\u627e\u5230\u7d22\u5f15\u4e5f\u5c31\u627e\u5230\u4e86\u6570\u636e</li> <li>\u975e\u805a\u7c07\u7d22\u5f15\uff1a\u5c06\u6570\u636e\u5b58\u50a8\u4e8e\u7d22\u5f15\u5206\u5f00\u7ed3\u6784\uff0c\u7d22\u5f15\u7ed3\u6784\u7684\u53f6\u5b50\u8282\u70b9\u6307\u5411\u4e86\u6570\u636e\u7684\u5bf9\u5e94\u884c\uff0cmyisam\u901a\u8fc7key_buffer\u628a\u7d22\u5f15\u5148\u7f13\u5b58\u5230\u5185\u5b58\u4e2d\uff0c\u5f53\u9700\u8981\u8bbf\u95ee\u6570\u636e\u65f6\uff08\u901a\u8fc7\u7d22\u5f15\u8bbf\u95ee\u6570\u636e\uff09\uff0c\u5728\u5185\u5b58\u4e2d\u76f4\u63a5\u641c\u7d22\u7d22\u5f15\uff0c\u7136\u540e\u901a\u8fc7\u7d22\u5f15\u627e\u5230\u78c1\u76d8\u76f8\u5e94\u6570\u636e\uff0c\u8fd9\u4e5f\u5c31\u662f\u4e3a\u4ec0\u4e48\u7d22\u5f15\u4e0d\u5728key buffer\u547d\u4e2d\u65f6\uff0c\u901f\u5ea6\u6162\u7684\u539f\u56e0</li> </ul> <p>\u6f84\u6e05\u4e00\u4e2a\u6982\u5ff5\uff1ainnodb\u4e2d\uff0c\u5728\u805a\u7c07\u7d22\u5f15\u4e4b\u4e0a\u521b\u5efa\u7684\u7d22\u5f15\u79f0\u4e4b\u4e3a\u8f85\u52a9\u7d22\u5f15\uff0c\u8f85\u52a9\u7d22\u5f15\u8bbf\u95ee\u6570\u636e\u603b\u662f\u9700\u8981\u4e8c\u6b21\u67e5\u627e\uff0c\u975e\u805a\u7c07\u7d22\u5f15\u90fd\u662f\u8f85\u52a9\u7d22\u5f15\uff0c\u50cf\u590d\u5408\u7d22\u5f15\u3001\u524d\u7f00\u7d22\u5f15\u3001\u552f\u4e00\u7d22\u5f15\uff0c\u8f85\u52a9\u7d22\u5f15\u53f6\u5b50\u8282\u70b9\u5b58\u50a8\u7684\u4e0d\u518d\u662f\u884c\u7684\u7269\u7406\u4f4d\u7f6e\uff0c\u800c\u662f\u4e3b\u952e\u503c</p> <p>\u4f55\u65f6\u4f7f\u7528\u805a\u7c07\u7d22\u5f15\u4e0e\u975e\u805a\u7c07\u7d22\u5f15</p> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_23","title":"\u975e\u805a\u7c07\u7d22\u5f15\u4e00\u5b9a\u4f1a\u56de\u8868\u67e5\u8be2\u5417\uff1f","text":"<p>\u4e0d\u4e00\u5b9a\uff0c\u8fd9\u6d89\u53ca\u5230\u67e5\u8be2\u8bed\u53e5\u6240\u8981\u6c42\u7684\u5b57\u6bb5\u662f\u5426\u5168\u90e8\u547d\u4e2d\u4e86\u7d22\u5f15\uff0c\u5982\u679c\u5168\u90e8\u547d\u4e2d\u4e86\u7d22\u5f15\uff0c\u90a3\u4e48\u5c31\u4e0d\u5fc5\u518d\u8fdb\u884c\u56de\u8868\u67e5\u8be2\u3002</p> <p>\u4e3e\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u5047\u8bbe\u6211\u4eec\u5728\u5458\u5de5\u8868\u7684\u5e74\u9f84\u4e0a\u5efa\u7acb\u4e86\u7d22\u5f15\uff0c\u90a3\u4e48\u5f53\u8fdb\u884cselect age from employee where age &lt; 20\u7684\u67e5\u8be2\u65f6\uff0c\u5728\u7d22\u5f15\u7684\u53f6\u5b50\u8282\u70b9\u4e0a\uff0c\u5df2\u7ecf\u5305\u542b\u4e86age\u4fe1\u606f\uff0c\u4e0d\u4f1a\u518d\u6b21\u8fdb\u884c\u56de\u8868\u67e5\u8be2\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_24","title":"\u8054\u5408\u7d22\u5f15\u662f\u4ec0\u4e48\uff1f\u4e3a\u4ec0\u4e48\u9700\u8981\u6ce8\u610f\u8054\u5408\u7d22\u5f15\u4e2d\u7684\u987a\u5e8f\uff1f","text":"<p>MySQL\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a\u5b57\u6bb5\u540c\u65f6\u5efa\u7acb\u4e00\u4e2a\u7d22\u5f15\uff0c\u53eb\u505a\u8054\u5408\u7d22\u5f15\u3002\u5728\u8054\u5408\u7d22\u5f15\u4e2d\uff0c\u5982\u679c\u60f3\u8981\u547d\u4e2d\u7d22\u5f15\uff0c\u9700\u8981\u6309\u7167\u5efa\u7acb\u7d22\u5f15\u65f6\u7684\u5b57\u6bb5\u987a\u5e8f\u6328\u4e2a\u4f7f\u7528\uff0c\u5426\u5219\u65e0\u6cd5\u547d\u4e2d\u7d22\u5f15\u3002</p> <p>\u5177\u4f53\u539f\u56e0\u4e3a:</p> <p>MySQL\u4f7f\u7528\u7d22\u5f15\u65f6\u9700\u8981\u7d22\u5f15\u6709\u5e8f\uff0c\u5047\u8bbe\u73b0\u5728\u5efa\u7acb\u4e86\"name\uff0cage\uff0cschool\"\u7684\u8054\u5408\u7d22\u5f15\uff0c\u90a3\u4e48\u7d22\u5f15\u7684\u6392\u5e8f\u4e3a: \u5148\u6309\u7167name\u6392\u5e8f\uff0c\u5982\u679cname\u76f8\u540c\uff0c\u5219\u6309\u7167age\u6392\u5e8f\uff0c\u5982\u679cage\u7684\u503c\u4e5f\u76f8\u7b49\uff0c\u5219\u6309\u7167school\u8fdb\u884c\u6392\u5e8f\u3002</p> <p>\u5f53\u8fdb\u884c\u67e5\u8be2\u65f6\uff0c\u6b64\u65f6\u7d22\u5f15\u4ec5\u4ec5\u6309\u7167name\u4e25\u683c\u6709\u5e8f\uff0c\u56e0\u6b64\u5fc5\u987b\u9996\u5148\u4f7f\u7528name\u5b57\u6bb5\u8fdb\u884c\u7b49\u503c\u67e5\u8be2\uff0c\u4e4b\u540e\u5bf9\u4e8e\u5339\u914d\u5230\u7684\u5217\u800c\u8a00\uff0c\u5176\u6309\u7167age\u5b57\u6bb5\u4e25\u683c\u6709\u5e8f\uff0c\u6b64\u65f6\u53ef\u4ee5\u4f7f\u7528age\u5b57\u6bb5\u7528\u505a\u7d22\u5f15\u67e5\u627e\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\u56e0\u6b64\u5728\u5efa\u7acb\u8054\u5408\u7d22\u5f15\u7684\u65f6\u5019\u5e94\u8be5\u6ce8\u610f\u7d22\u5f15\u5217\u7684\u987a\u5e8f\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u5c06\u67e5\u8be2\u9700\u6c42\u9891\u7e41\u6216\u8005\u5b57\u6bb5\u9009\u62e9\u6027\u9ad8\u7684\u5217\u653e\u5728\u524d\u9762\u3002\u6b64\u5916\u53ef\u4ee5\u6839\u636e\u7279\u4f8b\u7684\u67e5\u8be2\u6216\u8005\u8868\u7ed3\u6784\u8fdb\u884c\u5355\u72ec\u7684\u8c03\u6574\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_25","title":"\u4e8b\u52a1","text":""},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_26","title":"\u4ec0\u4e48\u662f\u6570\u636e\u5e93\u4e8b\u52a1\uff1f","text":"<p>\u4e8b\u52a1\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u6570\u636e\u5e93\u64cd\u4f5c\u5e8f\u5217\uff0c\u4e5f\u662f\u6570\u636e\u5e93\u5e76\u53d1\u63a7\u5236\u7684\u57fa\u672c\u5355\u4f4d\uff0c\u5176\u6267\u884c\u7684\u7ed3\u679c\u5fc5\u987b\u4f7f\u6570\u636e\u5e93\u4ece\u4e00\u79cd\u4e00\u81f4\u6027\u72b6\u6001\u53d8\u5230\u53e6\u4e00\u79cd\u4e00\u81f4\u6027\u72b6\u6001\u3002\u4e8b\u52a1\u662f\u903b\u8f91\u4e0a\u7684\u4e00\u7ec4\u64cd\u4f5c\uff0c\u8981\u4e48\u90fd\u6267\u884c\uff0c\u8981\u4e48\u90fd\u4e0d\u6267\u884c\u3002</p> <p>\u4e8b\u52a1\u6700\u7ecf\u5178\u4e5f\u7ecf\u5e38\u88ab\u62ff\u51fa\u6765\u8bf4\u4f8b\u5b50\u5c31\u662f\u8f6c\u8d26\u4e86\u3002</p> <p>\u5047\u5982\u5c0f\u660e\u8981\u7ed9\u5c0f\u7ea2\u8f6c\u8d261000\u5143\uff0c\u8fd9\u4e2a\u8f6c\u8d26\u4f1a\u6d89\u53ca\u5230\u4e24\u4e2a\u5173\u952e\u64cd\u4f5c\u5c31\u662f\uff1a\u5c06\u5c0f\u660e\u7684\u4f59\u989d\u51cf\u5c111000\u5143\uff0c\u5c06\u5c0f\u7ea2\u7684\u4f59\u989d\u589e\u52a01000\u5143\u3002\u4e07\u4e00\u5728\u8fd9\u4e24\u4e2a\u64cd\u4f5c\u4e4b\u95f4\u7a81\u7136\u51fa\u73b0\u9519\u8bef\u6bd4\u5982\u94f6\u884c\u7cfb\u7edf\u5d29\u6e83\uff0c\u5bfc\u81f4\u5c0f\u660e\u4f59\u989d\u51cf\u5c11\u800c\u5c0f\u7ea2\u7684\u4f59\u989d\u6ca1\u6709\u589e\u52a0\uff0c\u8fd9\u6837\u5c31\u4e0d\u5bf9\u4e86\u3002\u4e8b\u52a1\u5c31\u662f\u4fdd\u8bc1\u8fd9\u4e24\u4e2a\u5173\u952e\u64cd\u4f5c\u8981\u4e48\u90fd\u6210\u529f\uff0c\u8981\u4e48\u90fd\u8981\u5931\u8d25\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#acid","title":"\u4e8b\u7269\u7684\u56db\u5927\u7279\u6027(ACID)\u4ecb\u7ecd\u4e00\u4e0b?","text":"<p>\u5173\u7cfb\u6027\u6570\u636e\u5e93\u9700\u8981\u9075\u5faaACID\u89c4\u5219\uff0c\u5177\u4f53\u5185\u5bb9\u5982\u4e0b\uff1a</p> <p></p> <ol> <li> <p>\u539f\u5b50\u6027\uff1a \u4e8b\u52a1\u662f\u6700\u5c0f\u7684\u6267\u884c\u5355\u4f4d\uff0c\u4e0d\u5141\u8bb8\u5206\u5272\u3002\u4e8b\u52a1\u7684\u539f\u5b50\u6027\u786e\u4fdd\u52a8\u4f5c\u8981\u4e48\u5168\u90e8\u5b8c\u6210\uff0c\u8981\u4e48\u5b8c\u5168\u4e0d\u8d77\u4f5c\u7528\uff1b</p> </li> <li> <p>\u4e00\u81f4\u6027\uff1a \u6267\u884c\u4e8b\u52a1\u524d\u540e\uff0c\u6570\u636e\u4fdd\u6301\u4e00\u81f4\uff0c\u591a\u4e2a\u4e8b\u52a1\u5bf9\u540c\u4e00\u4e2a\u6570\u636e\u8bfb\u53d6\u7684\u7ed3\u679c\u662f\u76f8\u540c\u7684\uff1b</p> </li> <li> <p>\u9694\u79bb\u6027\uff1a \u5e76\u53d1\u8bbf\u95ee\u6570\u636e\u5e93\u65f6\uff0c\u4e00\u4e2a\u7528\u6237\u7684\u4e8b\u52a1\u4e0d\u88ab\u5176\u4ed6\u4e8b\u52a1\u6240\u5e72\u6270\uff0c\u5404\u5e76\u53d1\u4e8b\u52a1\u4e4b\u95f4\u6570\u636e\u5e93\u662f\u72ec\u7acb\u7684\uff1b</p> </li> </ol> <p></p> <ol> <li>\u6301\u4e45\u6027\uff1a \u4e00\u4e2a\u4e8b\u52a1\u88ab\u63d0\u4ea4\u4e4b\u540e\u3002\u5b83\u5bf9\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u6539\u53d8\u662f\u6301\u4e45\u7684\uff0c\u5373\u4f7f\u6570\u636e\u5e93\u53d1\u751f\u6545\u969c\u4e5f\u4e0d\u5e94\u8be5\u5bf9\u5176\u6709\u4efb\u4f55\u5f71\u54cd\u3002</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_27","title":"\u4ec0\u4e48\u662f\u810f\u8bfb\uff1f\u5e7b\u8bfb\uff1f\u4e0d\u53ef\u91cd\u590d\u8bfb\uff1f","text":"<ul> <li>\u810f\u8bfb(Drity Read)\uff1a\u67d0\u4e2a\u4e8b\u52a1\u5df2\u66f4\u65b0\u4e00\u4efd\u6570\u636e\uff0c\u53e6\u4e00\u4e2a\u4e8b\u52a1\u5728\u6b64\u65f6\u8bfb\u53d6\u4e86\u540c\u4e00\u4efd\u6570\u636e\uff0c\u7531\u4e8e\u67d0\u4e9b\u539f\u56e0\uff0c\u524d\u4e00\u4e2aRollBack\u4e86\u64cd\u4f5c\uff0c\u5219\u540e\u4e00\u4e2a\u4e8b\u52a1\u6240\u8bfb\u53d6\u7684\u6570\u636e\u5c31\u4f1a\u662f\u4e0d\u6b63\u786e\u7684\u3002</li> <li>\u4e0d\u53ef\u91cd\u590d\u8bfb(Non-repeatable read):\u5728\u4e00\u4e2a\u4e8b\u52a1\u7684\u4e24\u6b21\u67e5\u8be2\u4e4b\u4e2d\u6570\u636e\u4e0d\u4e00\u81f4\uff0c\u8fd9\u53ef\u80fd\u662f\u4e24\u6b21\u67e5\u8be2\u8fc7\u7a0b\u4e2d\u95f4\u63d2\u5165\u4e86\u4e00\u4e2a\u4e8b\u52a1\u66f4\u65b0\u7684\u539f\u6709\u7684\u6570\u636e\u3002</li> <li>\u5e7b\u8bfb(Phantom Read):\u5728\u4e00\u4e2a\u4e8b\u52a1\u7684\u4e24\u6b21\u67e5\u8be2\u4e2d\u6570\u636e\u7b14\u6570\u4e0d\u4e00\u81f4\uff0c\u4f8b\u5982\u6709\u4e00\u4e2a\u4e8b\u52a1\u67e5\u8be2\u4e86\u51e0\u5217(Row)\u6570\u636e\uff0c\u800c\u53e6\u4e00\u4e2a\u4e8b\u52a1\u5374\u5728\u6b64\u65f6\u63d2\u5165\u4e86\u65b0\u7684\u51e0\u5217\u6570\u636e\uff0c\u5148\u524d\u7684\u4e8b\u52a1\u5728\u63a5\u4e0b\u6765\u7684\u67e5\u8be2\u4e2d\uff0c\u5c31\u4f1a\u53d1\u73b0\u6709\u51e0\u5217\u6570\u636e\u662f\u5b83\u5148\u524d\u6240\u6ca1\u6709\u7684\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#mysql_3","title":"\u4ec0\u4e48\u662f\u4e8b\u52a1\u7684\u9694\u79bb\u7ea7\u522b\uff1fMySQL\u7684\u9ed8\u8ba4\u9694\u79bb\u7ea7\u522b\u662f\u4ec0\u4e48\uff1f","text":"<p>\u4e3a\u4e86\u8fbe\u5230\u4e8b\u52a1\u7684\u56db\u5927\u7279\u6027\uff0c\u6570\u636e\u5e93\u5b9a\u4e49\u4e864\u79cd\u4e0d\u540c\u7684\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b\uff0c\u7531\u4f4e\u5230\u9ad8\u4f9d\u6b21\u4e3aRead uncommitted\u3001Read committed\u3001Repeatable read\u3001Serializable\uff0c\u8fd9\u56db\u4e2a\u7ea7\u522b\u53ef\u4ee5\u9010\u4e2a\u89e3\u51b3\u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u3001\u5e7b\u8bfb\u8fd9\u51e0\u7c7b\u95ee\u9898\u3002</p> \u9694\u79bb\u7ea7\u522b \u810f\u8bfb \u4e0d\u53ef\u91cd\u590d\u8bfb \u5e7b\u5f71\u8bfb READ-UNCOMMITTED \u221a \u221a \u221a READ-COMMITTED \u00d7 \u221a \u221a REPEATABLE-READ \u00d7 \u00d7 \u221a SERIALIZABLE \u00d7 \u00d7 \u00d7 <p>SQL \u6807\u51c6\u5b9a\u4e49\u4e86\u56db\u4e2a\u9694\u79bb\u7ea7\u522b\uff1a</p> <ul> <li>READ-UNCOMMITTED(\u8bfb\u53d6\u672a\u63d0\u4ea4)\uff1a \u6700\u4f4e\u7684\u9694\u79bb\u7ea7\u522b\uff0c\u5141\u8bb8\u8bfb\u53d6\u5c1a\u672a\u63d0\u4ea4\u7684\u6570\u636e\u53d8\u66f4\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u810f\u8bfb\u3001\u5e7b\u8bfb\u6216\u4e0d\u53ef\u91cd\u590d\u8bfb\u3002</li> <li>READ-COMMITTED(\u8bfb\u53d6\u5df2\u63d0\u4ea4)\uff1a \u5141\u8bb8\u8bfb\u53d6\u5e76\u53d1\u4e8b\u52a1\u5df2\u7ecf\u63d0\u4ea4\u7684\u6570\u636e\uff0c\u53ef\u4ee5\u963b\u6b62\u810f\u8bfb\uff0c\u4f46\u662f\u5e7b\u8bfb\u6216\u4e0d\u53ef\u91cd\u590d\u8bfb\u4ecd\u6709\u53ef\u80fd\u53d1\u751f\u3002</li> <li>REPEATABLE-READ(\u53ef\u91cd\u590d\u8bfb)\uff1a \u5bf9\u540c\u4e00\u5b57\u6bb5\u7684\u591a\u6b21\u8bfb\u53d6\u7ed3\u679c\u90fd\u662f\u4e00\u81f4\u7684\uff0c\u9664\u975e\u6570\u636e\u662f\u88ab\u672c\u8eab\u4e8b\u52a1\u81ea\u5df1\u6240\u4fee\u6539\uff0c\u53ef\u4ee5\u963b\u6b62\u810f\u8bfb\u548c\u4e0d\u53ef\u91cd\u590d\u8bfb\uff0c\u4f46\u5e7b\u8bfb\u4ecd\u6709\u53ef\u80fd\u53d1\u751f\u3002</li> <li>SERIALIZABLE(\u53ef\u4e32\u884c\u5316)\uff1a \u6700\u9ad8\u7684\u9694\u79bb\u7ea7\u522b\uff0c\u5b8c\u5168\u670d\u4eceACID\u7684\u9694\u79bb\u7ea7\u522b\u3002\u6240\u6709\u7684\u4e8b\u52a1\u4f9d\u6b21\u9010\u4e2a\u6267\u884c\uff0c\u8fd9\u6837\u4e8b\u52a1\u4e4b\u95f4\u5c31\u5b8c\u5168\u4e0d\u53ef\u80fd\u4ea7\u751f\u5e72\u6270\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u8be5\u7ea7\u522b\u53ef\u4ee5\u9632\u6b62\u810f\u8bfb\u3001\u4e0d\u53ef\u91cd\u590d\u8bfb\u4ee5\u53ca\u5e7b\u8bfb\u3002</li> </ul> <p>\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1aMysql \u9ed8\u8ba4\u91c7\u7528\u7684 REPEATABLE_READ\u9694\u79bb\u7ea7\u522b Oracle \u9ed8\u8ba4\u91c7\u7528\u7684 READ_COMMITTED\u9694\u79bb\u7ea7\u522b</p> <p>\u4e8b\u52a1\u9694\u79bb\u673a\u5236\u7684\u5b9e\u73b0\u57fa\u4e8e\u9501\u673a\u5236\u548c\u5e76\u53d1\u8c03\u5ea6\u3002\u5176\u4e2d\u5e76\u53d1\u8c03\u5ea6\u4f7f\u7528\u7684\u662fMVVC\uff08\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236\uff09\uff0c\u901a\u8fc7\u4fdd\u5b58\u4fee\u6539\u7684\u65e7\u7248\u672c\u4fe1\u606f\u6765\u652f\u6301\u5e76\u53d1\u4e00\u81f4\u6027\u8bfb\u548c\u56de\u6eda\u7b49\u7279\u6027\u3002</p> <p>\u56e0\u4e3a\u9694\u79bb\u7ea7\u522b\u8d8a\u4f4e\uff0c\u4e8b\u52a1\u8bf7\u6c42\u7684\u9501\u8d8a\u5c11\uff0c\u6240\u4ee5\u5927\u90e8\u5206\u6570\u636e\u5e93\u7cfb\u7edf\u7684\u9694\u79bb\u7ea7\u522b\u90fd\u662fREAD-COMMITTED(\u8bfb\u53d6\u63d0\u4ea4\u5185\u5bb9):\uff0c\u4f46\u662f\u4f60\u8981\u77e5\u9053\u7684\u662fInnoDB \u5b58\u50a8\u5f15\u64ce\u9ed8\u8ba4\u4f7f\u7528 REPEATABLE-READ\uff08\u53ef\u91cd\u8bfb\uff09\u5e76\u4e0d\u4f1a\u6709\u4efb\u4f55\u6027\u80fd\u635f\u5931\u3002</p> <p>InnoDB \u5b58\u50a8\u5f15\u64ce\u5728 \u5206\u5e03\u5f0f\u4e8b\u52a1 \u7684\u60c5\u51b5\u4e0b\u4e00\u822c\u4f1a\u7528\u5230SERIALIZABLE(\u53ef\u4e32\u884c\u5316)\u9694\u79bb\u7ea7\u522b\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_28","title":"\u9501","text":""},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#mysql_4","title":"\u5bf9MySQL\u7684\u9501\u4e86\u89e3\u5417","text":"<p>\u5f53\u6570\u636e\u5e93\u6709\u5e76\u53d1\u4e8b\u52a1\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u4f1a\u4ea7\u751f\u6570\u636e\u7684\u4e0d\u4e00\u81f4\uff0c\u8fd9\u65f6\u5019\u9700\u8981\u4e00\u4e9b\u673a\u5236\u6765\u4fdd\u8bc1\u8bbf\u95ee\u7684\u6b21\u5e8f\uff0c\u9501\u673a\u5236\u5c31\u662f\u8fd9\u6837\u7684\u4e00\u4e2a\u673a\u5236\u3002</p> <p>\u5c31\u50cf\u9152\u5e97\u7684\u623f\u95f4\uff0c\u5982\u679c\u5927\u5bb6\u968f\u610f\u8fdb\u51fa\uff0c\u5c31\u4f1a\u51fa\u73b0\u591a\u4eba\u62a2\u593a\u540c\u4e00\u4e2a\u623f\u95f4\u7684\u60c5\u51b5\uff0c\u800c\u5728\u623f\u95f4\u4e0a\u88c5\u4e0a\u9501\uff0c\u7533\u8bf7\u5230\u94a5\u5319\u7684\u4eba\u624d\u53ef\u4ee5\u5165\u4f4f\u5e76\u4e14\u5c06\u623f\u95f4\u9501\u8d77\u6765\uff0c\u5176\u4ed6\u4eba\u53ea\u6709\u7b49\u4ed6\u4f7f\u7528\u5b8c\u6bd5\u624d\u53ef\u4ee5\u518d\u6b21\u4f7f\u7528\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_29","title":"\u9694\u79bb\u7ea7\u522b\u4e0e\u9501\u7684\u5173\u7cfb","text":"<p>\u5728Read Uncommitted\u7ea7\u522b\u4e0b\uff0c\u8bfb\u53d6\u6570\u636e\u4e0d\u9700\u8981\u52a0\u5171\u4eab\u9501\uff0c\u8fd9\u6837\u5c31\u4e0d\u4f1a\u8ddf\u88ab\u4fee\u6539\u7684\u6570\u636e\u4e0a\u7684\u6392\u4ed6\u9501\u51b2\u7a81</p> <p>\u5728Read Committed\u7ea7\u522b\u4e0b\uff0c\u8bfb\u64cd\u4f5c\u9700\u8981\u52a0\u5171\u4eab\u9501\uff0c\u4f46\u662f\u5728\u8bed\u53e5\u6267\u884c\u5b8c\u4ee5\u540e\u91ca\u653e\u5171\u4eab\u9501\uff1b</p> <p>\u5728Repeatable Read\u7ea7\u522b\u4e0b\uff0c\u8bfb\u64cd\u4f5c\u9700\u8981\u52a0\u5171\u4eab\u9501\uff0c\u4f46\u662f\u5728\u4e8b\u52a1\u63d0\u4ea4\u4e4b\u524d\u5e76\u4e0d\u91ca\u653e\u5171\u4eab\u9501\uff0c\u4e5f\u5c31\u662f\u5fc5\u987b\u7b49\u5f85\u4e8b\u52a1\u6267\u884c\u5b8c\u6bd5\u4ee5\u540e\u624d\u91ca\u653e\u5171\u4eab\u9501\u3002</p> <p>SERIALIZABLE \u662f\u9650\u5236\u6027\u6700\u5f3a\u7684\u9694\u79bb\u7ea7\u522b\uff0c\u56e0\u4e3a\u8be5\u7ea7\u522b\u9501\u5b9a\u6574\u4e2a\u8303\u56f4\u7684\u952e\uff0c\u5e76\u4e00\u76f4\u6301\u6709\u9501\uff0c\u76f4\u5230\u4e8b\u52a1\u5b8c\u6210\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#innodb","title":"\u6309\u7167\u9501\u7684\u7c92\u5ea6\u5206\u6570\u636e\u5e93\u9501\u6709\u54ea\u4e9b\uff1f\u9501\u673a\u5236\u4e0eInnoDB\u9501\u7b97\u6cd5","text":"<p>\u5728\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\uff0c\u53ef\u4ee5\u6309\u7167\u9501\u7684\u7c92\u5ea6\u628a\u6570\u636e\u5e93\u9501\u5206\u4e3a\u884c\u7ea7\u9501(INNODB\u5f15\u64ce)\u3001\u8868\u7ea7\u9501(MYISAM\u5f15\u64ce)\u548c\u9875\u7ea7\u9501(BDB\u5f15\u64ce )\u3002</p> <p>MyISAM\u548cInnoDB\u5b58\u50a8\u5f15\u64ce\u4f7f\u7528\u7684\u9501\uff1a</p> <ul> <li>MyISAM\u91c7\u7528\u8868\u7ea7\u9501(table-level locking)\u3002</li> <li>InnoDB\u652f\u6301\u884c\u7ea7\u9501(row-level locking)\u548c\u8868\u7ea7\u9501\uff0c\u9ed8\u8ba4\u4e3a\u884c\u7ea7\u9501</li> </ul> <p>\u884c\u7ea7\u9501\uff0c\u8868\u7ea7\u9501\u548c\u9875\u7ea7\u9501\u5bf9\u6bd4</p> <p>\u884c\u7ea7\u9501 \u884c\u7ea7\u9501\u662fMysql\u4e2d\u9501\u5b9a\u7c92\u5ea6\u6700\u7ec6\u7684\u4e00\u79cd\u9501\uff0c\u8868\u793a\u53ea\u9488\u5bf9\u5f53\u524d\u64cd\u4f5c\u7684\u884c\u8fdb\u884c\u52a0\u9501\u3002\u884c\u7ea7\u9501\u80fd\u5927\u5927\u51cf\u5c11\u6570\u636e\u5e93\u64cd\u4f5c\u7684\u51b2\u7a81\u3002\u5176\u52a0\u9501\u7c92\u5ea6\u6700\u5c0f\uff0c\u4f46\u52a0\u9501\u7684\u5f00\u9500\u4e5f\u6700\u5927\u3002\u884c\u7ea7\u9501\u5206\u4e3a\u5171\u4eab\u9501 \u548c \u6392\u4ed6\u9501\u3002</p> <p>\u7279\u70b9\uff1a\u5f00\u9500\u5927\uff0c\u52a0\u9501\u6162\uff1b\u4f1a\u51fa\u73b0\u6b7b\u9501\uff1b\u9501\u5b9a\u7c92\u5ea6\u6700\u5c0f\uff0c\u53d1\u751f\u9501\u51b2\u7a81\u7684\u6982\u7387\u6700\u4f4e\uff0c\u5e76\u53d1\u5ea6\u4e5f\u6700\u9ad8\u3002</p> <p>\u8868\u7ea7\u9501 \u8868\u7ea7\u9501\u662fMySQL\u4e2d\u9501\u5b9a\u7c92\u5ea6\u6700\u5927\u7684\u4e00\u79cd\u9501\uff0c\u8868\u793a\u5bf9\u5f53\u524d\u64cd\u4f5c\u7684\u6574\u5f20\u8868\u52a0\u9501\uff0c\u5b83\u5b9e\u73b0\u7b80\u5355\uff0c\u8d44\u6e90\u6d88\u8017\u8f83\u5c11\uff0c\u88ab\u5927\u90e8\u5206MySQL\u5f15\u64ce\u652f\u6301\u3002\u6700\u5e38\u4f7f\u7528\u7684MYISAM\u4e0eINNODB\u90fd\u652f\u6301\u8868\u7ea7\u9501\u5b9a\u3002\u8868\u7ea7\u9501\u5b9a\u5206\u4e3a\u8868\u5171\u4eab\u8bfb\u9501\uff08\u5171\u4eab\u9501\uff09\u4e0e\u8868\u72ec\u5360\u5199\u9501\uff08\u6392\u4ed6\u9501\uff09\u3002</p> <p>\u7279\u70b9\uff1a\u5f00\u9500\u5c0f\uff0c\u52a0\u9501\u5feb\uff1b\u4e0d\u4f1a\u51fa\u73b0\u6b7b\u9501\uff1b\u9501\u5b9a\u7c92\u5ea6\u5927\uff0c\u53d1\u51fa\u9501\u51b2\u7a81\u7684\u6982\u7387\u6700\u9ad8\uff0c\u5e76\u53d1\u5ea6\u6700\u4f4e\u3002</p> <p>\u9875\u7ea7\u9501 \u9875\u7ea7\u9501\u662fMySQL\u4e2d\u9501\u5b9a\u7c92\u5ea6\u4ecb\u4e8e\u884c\u7ea7\u9501\u548c\u8868\u7ea7\u9501\u4e2d\u95f4\u7684\u4e00\u79cd\u9501\u3002\u8868\u7ea7\u9501\u901f\u5ea6\u5feb\uff0c\u4f46\u51b2\u7a81\u591a\uff0c\u884c\u7ea7\u51b2\u7a81\u5c11\uff0c\u4f46\u901f\u5ea6\u6162\u3002\u6240\u4ee5\u53d6\u4e86\u6298\u8877\u7684\u9875\u7ea7\uff0c\u4e00\u6b21\u9501\u5b9a\u76f8\u90bb\u7684\u4e00\u7ec4\u8bb0\u5f55\u3002</p> <p>\u7279\u70b9\uff1a\u5f00\u9500\u548c\u52a0\u9501\u65f6\u95f4\u754c\u4e8e\u8868\u9501\u548c\u884c\u9501\u4e4b\u95f4\uff1b\u4f1a\u51fa\u73b0\u6b7b\u9501\uff1b\u9501\u5b9a\u7c92\u5ea6\u754c\u4e8e\u8868\u9501\u548c\u884c\u9501\u4e4b\u95f4\uff0c\u5e76\u53d1\u5ea6\u4e00\u822c</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#mysql_5","title":"\u4ece\u9501\u7684\u7c7b\u522b\u4e0a\u5206MySQL\u90fd\u6709\u54ea\u4e9b\u9501\u5462\uff1f\u50cf\u4e0a\u9762\u90a3\u6837\u5b50\u8fdb\u884c\u9501\u5b9a\u5c82\u4e0d\u662f\u6709\u70b9\u963b\u788d\u5e76\u53d1\u6548\u7387\u4e86","text":"<p>\u4ece\u9501\u7684\u7c7b\u522b\u4e0a\u6765\u8bb2\uff0c\u6709\u5171\u4eab\u9501\u548c\u6392\u4ed6\u9501\u3002</p> <p>\u5171\u4eab\u9501: \u53c8\u53eb\u505a\u8bfb\u9501\u3002 \u5f53\u7528\u6237\u8981\u8fdb\u884c\u6570\u636e\u7684\u8bfb\u53d6\u65f6\uff0c\u5bf9\u6570\u636e\u52a0\u4e0a\u5171\u4eab\u9501\u3002\u5171\u4eab\u9501\u53ef\u4ee5\u540c\u65f6\u52a0\u4e0a\u591a\u4e2a\u3002</p> <p>\u6392\u4ed6\u9501: \u53c8\u53eb\u505a\u5199\u9501\u3002 \u5f53\u7528\u6237\u8981\u8fdb\u884c\u6570\u636e\u7684\u5199\u5165\u65f6\uff0c\u5bf9\u6570\u636e\u52a0\u4e0a\u6392\u4ed6\u9501\u3002\u6392\u4ed6\u9501\u53ea\u53ef\u4ee5\u52a0\u4e00\u4e2a\uff0c\u4ed6\u548c\u5176\u4ed6\u7684\u6392\u4ed6\u9501\uff0c\u5171\u4eab\u9501\u90fd\u76f8\u65a5\u3002</p> <p>\u7528\u4e0a\u9762\u7684\u4f8b\u5b50\u6765\u8bf4\u5c31\u662f\u7528\u6237\u7684\u884c\u4e3a\u6709\u4e24\u79cd\uff0c\u4e00\u79cd\u662f\u6765\u770b\u623f\uff0c\u591a\u4e2a\u7528\u6237\u4e00\u8d77\u770b\u623f\u662f\u53ef\u4ee5\u63a5\u53d7\u7684\u3002 \u4e00\u79cd\u662f\u771f\u6b63\u7684\u5165\u4f4f\u4e00\u665a\uff0c\u5728\u8fd9\u671f\u95f4\uff0c\u65e0\u8bba\u662f\u60f3\u5165\u4f4f\u7684\u8fd8\u662f\u60f3\u770b\u623f\u7684\u90fd\u4e0d\u53ef\u4ee5\u3002</p> <p>\u9501\u7684\u7c92\u5ea6\u53d6\u51b3\u4e8e\u5177\u4f53\u7684\u5b58\u50a8\u5f15\u64ce\uff0cInnoDB\u5b9e\u73b0\u4e86\u884c\u7ea7\u9501\uff0c\u9875\u7ea7\u9501\uff0c\u8868\u7ea7\u9501\u3002</p> <p>\u4ed6\u4eec\u7684\u52a0\u9501\u5f00\u9500\u4ece\u5927\u5230\u5c0f\uff0c\u5e76\u53d1\u80fd\u529b\u4e5f\u662f\u4ece\u5927\u5230\u5c0f\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#mysqlinnodb","title":"MySQL\u4e2dInnoDB\u5f15\u64ce\u7684\u884c\u9501\u662f\u600e\u4e48\u5b9e\u73b0\u7684\uff1f","text":"<p>\u7b54\uff1aInnoDB\u662f\u57fa\u4e8e\u7d22\u5f15\u6765\u5b8c\u6210\u884c\u9501</p> <p>\u4f8b: select * from tab_with_index where id = 1 for update;</p> <p>for update \u53ef\u4ee5\u6839\u636e\u6761\u4ef6\u6765\u5b8c\u6210\u884c\u9501\u9501\u5b9a\uff0c\u5e76\u4e14 id \u662f\u6709\u7d22\u5f15\u952e\u7684\u5217\uff0c\u5982\u679c id \u4e0d\u662f\u7d22\u5f15\u952e\u90a3\u4e48InnoDB\u5c06\u5b8c\u6210\u8868\u9501\uff0c\u5e76\u53d1\u5c06\u65e0\u4ece\u8c08\u8d77</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#innodb_1","title":"InnoDB\u5b58\u50a8\u5f15\u64ce\u7684\u9501\u7684\u7b97\u6cd5\u6709\u4e09\u79cd","text":"<ul> <li>Record lock\uff1a\u5355\u4e2a\u884c\u8bb0\u5f55\u4e0a\u7684\u9501</li> <li>Gap lock\uff1a\u95f4\u9699\u9501\uff0c\u9501\u5b9a\u4e00\u4e2a\u8303\u56f4\uff0c\u4e0d\u5305\u62ec\u8bb0\u5f55\u672c\u8eab</li> <li>Next-key lock\uff1arecord+gap \u9501\u5b9a\u4e00\u4e2a\u8303\u56f4\uff0c\u5305\u542b\u8bb0\u5f55\u672c\u8eab</li> </ul> <p>\u76f8\u5173\u77e5\u8bc6\u70b9\uff1a</p> <ol> <li>innodb\u5bf9\u4e8e\u884c\u7684\u67e5\u8be2\u4f7f\u7528next-key lock</li> <li>Next-locking keying\u4e3a\u4e86\u89e3\u51b3Phantom Problem\u5e7b\u8bfb\u95ee\u9898</li> <li>\u5f53\u67e5\u8be2\u7684\u7d22\u5f15\u542b\u6709\u552f\u4e00\u5c5e\u6027\u65f6\uff0c\u5c06next-key lock\u964d\u7ea7\u4e3arecord key</li> <li>Gap\u9501\u8bbe\u8ba1\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u963b\u6b62\u591a\u4e2a\u4e8b\u52a1\u5c06\u8bb0\u5f55\u63d2\u5165\u5230\u540c\u4e00\u8303\u56f4\u5185\uff0c\u800c\u8fd9\u4f1a\u5bfc\u81f4\u5e7b\u8bfb\u95ee\u9898\u7684\u4ea7\u751f</li> <li>\u6709\u4e24\u79cd\u65b9\u5f0f\u663e\u5f0f\u5173\u95edgap\u9501\uff1a\uff08\u9664\u4e86\u5916\u952e\u7ea6\u675f\u548c\u552f\u4e00\u6027\u68c0\u67e5\u5916\uff0c\u5176\u4f59\u60c5\u51b5\u4ec5\u4f7f\u7528record lock\uff09 A. \u5c06\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b\u8bbe\u7f6e\u4e3aRC B. \u5c06\u53c2\u6570innodb_locks_unsafe_for_binlog\u8bbe\u7f6e\u4e3a1</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_30","title":"\u4ec0\u4e48\u662f\u6b7b\u9501\uff1f\u600e\u4e48\u89e3\u51b3\uff1f","text":"<p>\u6b7b\u9501\u662f\u6307\u4e24\u4e2a\u6216\u591a\u4e2a\u4e8b\u52a1\u5728\u540c\u4e00\u8d44\u6e90\u4e0a\u76f8\u4e92\u5360\u7528\uff0c\u5e76\u8bf7\u6c42\u9501\u5b9a\u5bf9\u65b9\u7684\u8d44\u6e90\uff0c\u4ece\u800c\u5bfc\u81f4\u6076\u6027\u5faa\u73af\u7684\u73b0\u8c61\u3002</p> <p>\u5e38\u89c1\u7684\u89e3\u51b3\u6b7b\u9501\u7684\u65b9\u6cd5</p> <p>1\u3001\u5982\u679c\u4e0d\u540c\u7a0b\u5e8f\u4f1a\u5e76\u53d1\u5b58\u53d6\u591a\u4e2a\u8868\uff0c\u5c3d\u91cf\u7ea6\u5b9a\u4ee5\u76f8\u540c\u7684\u987a\u5e8f\u8bbf\u95ee\u8868\uff0c\u53ef\u4ee5\u5927\u5927\u964d\u4f4e\u6b7b\u9501\u673a\u4f1a\u3002</p> <p>2\u3001\u5728\u540c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\uff0c\u5c3d\u53ef\u80fd\u505a\u5230\u4e00\u6b21\u9501\u5b9a\u6240\u9700\u8981\u7684\u6240\u6709\u8d44\u6e90\uff0c\u51cf\u5c11\u6b7b\u9501\u4ea7\u751f\u6982\u7387\uff1b</p> <p>3\u3001\u5bf9\u4e8e\u975e\u5e38\u5bb9\u6613\u4ea7\u751f\u6b7b\u9501\u7684\u4e1a\u52a1\u90e8\u5206\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528\u5347\u7ea7\u9501\u5b9a\u9897\u7c92\u5ea6\uff0c\u901a\u8fc7\u8868\u7ea7\u9501\u5b9a\u6765\u51cf\u5c11\u6b7b\u9501\u4ea7\u751f\u7684\u6982\u7387\uff1b</p> <p>\u5982\u679c\u4e1a\u52a1\u5904\u7406\u4e0d\u597d\u53ef\u4ee5\u7528\u5206\u5e03\u5f0f\u4e8b\u52a1\u9501\u6216\u8005\u4f7f\u7528\u4e50\u89c2\u9501</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_31","title":"\u6570\u636e\u5e93\u7684\u4e50\u89c2\u9501\u548c\u60b2\u89c2\u9501\u662f\u4ec0\u4e48\uff1f\u600e\u4e48\u5b9e\u73b0\u7684\uff1f","text":"<p>\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\uff08DBMS\uff09\u4e2d\u7684\u5e76\u53d1\u63a7\u5236\u7684\u4efb\u52a1\u662f\u786e\u4fdd\u5728\u591a\u4e2a\u4e8b\u52a1\u540c\u65f6\u5b58\u53d6\u6570\u636e\u5e93\u4e2d\u540c\u4e00\u6570\u636e\u65f6\u4e0d\u7834\u574f\u4e8b\u52a1\u7684\u9694\u79bb\u6027\u548c\u7edf\u4e00\u6027\u4ee5\u53ca\u6570\u636e\u5e93\u7684\u7edf\u4e00\u6027\u3002\u4e50\u89c2\u5e76\u53d1\u63a7\u5236\uff08\u4e50\u89c2\u9501\uff09\u548c\u60b2\u89c2\u5e76\u53d1\u63a7\u5236\uff08\u60b2\u89c2\u9501\uff09\u662f\u5e76\u53d1\u63a7\u5236\u4e3b\u8981\u91c7\u7528\u7684\u6280\u672f\u624b\u6bb5\u3002</p> <p>\u60b2\u89c2\u9501\uff1a\u5047\u5b9a\u4f1a\u53d1\u751f\u5e76\u53d1\u51b2\u7a81\uff0c\u5c4f\u853d\u4e00\u5207\u53ef\u80fd\u8fdd\u53cd\u6570\u636e\u5b8c\u6574\u6027\u7684\u64cd\u4f5c\u3002\u5728\u67e5\u8be2\u5b8c\u6570\u636e\u7684\u65f6\u5019\u5c31\u628a\u4e8b\u52a1\u9501\u8d77\u6765\uff0c\u76f4\u5230\u63d0\u4ea4\u4e8b\u52a1\u3002\u5b9e\u73b0\u65b9\u5f0f\uff1a\u4f7f\u7528\u6570\u636e\u5e93\u4e2d\u7684\u9501\u673a\u5236</p> <p>\u4e50\u89c2\u9501\uff1a\u5047\u8bbe\u4e0d\u4f1a\u53d1\u751f\u5e76\u53d1\u51b2\u7a81\uff0c\u53ea\u5728\u63d0\u4ea4\u64cd\u4f5c\u65f6\u68c0\u67e5\u662f\u5426\u8fdd\u53cd\u6570\u636e\u5b8c\u6574\u6027\u3002\u5728\u4fee\u6539\u6570\u636e\u7684\u65f6\u5019\u628a\u4e8b\u52a1\u9501\u8d77\u6765\uff0c\u901a\u8fc7version\u7684\u65b9\u5f0f\u6765\u8fdb\u884c\u9501\u5b9a\u3002\u5b9e\u73b0\u65b9\u5f0f\uff1a\u4e50\u4e00\u822c\u4f1a\u4f7f\u7528\u7248\u672c\u53f7\u673a\u5236\u6216CAS\u7b97\u6cd5\u5b9e\u73b0\u3002</p> <p>\u4e24\u79cd\u9501\u7684\u4f7f\u7528\u573a\u666f</p> <p>\u4ece\u4e0a\u9762\u5bf9\u4e24\u79cd\u9501\u7684\u4ecb\u7ecd\uff0c\u6211\u4eec\u77e5\u9053\u4e24\u79cd\u9501\u5404\u6709\u4f18\u7f3a\u70b9\uff0c\u4e0d\u53ef\u8ba4\u4e3a\u4e00\u79cd\u597d\u4e8e\u53e6\u4e00\u79cd\uff0c\u50cf\u4e50\u89c2\u9501\u9002\u7528\u4e8e\u5199\u6bd4\u8f83\u5c11\u7684\u60c5\u51b5\u4e0b\uff08\u591a\u8bfb\u573a\u666f\uff09\uff0c\u5373\u51b2\u7a81\u771f\u7684\u5f88\u5c11\u53d1\u751f\u7684\u65f6\u5019\uff0c\u8fd9\u6837\u53ef\u4ee5\u7701\u53bb\u4e86\u9501\u7684\u5f00\u9500\uff0c\u52a0\u5927\u4e86\u7cfb\u7edf\u7684\u6574\u4e2a\u541e\u5410\u91cf\u3002</p> <p>\u4f46\u5982\u679c\u662f\u591a\u5199\u7684\u60c5\u51b5\uff0c\u4e00\u822c\u4f1a\u7ecf\u5e38\u4ea7\u751f\u51b2\u7a81\uff0c\u8fd9\u5c31\u4f1a\u5bfc\u81f4\u4e0a\u5c42\u5e94\u7528\u4f1a\u4e0d\u65ad\u7684\u8fdb\u884cretry\uff0c\u8fd9\u6837\u53cd\u5012\u662f\u964d\u4f4e\u4e86\u6027\u80fd\uff0c\u6240\u4ee5\u4e00\u822c\u591a\u5199\u7684\u573a\u666f\u4e0b\u7528\u60b2\u89c2\u9501\u5c31\u6bd4\u8f83\u5408\u9002\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_32","title":"\u89c6\u56fe","text":""},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_33","title":"\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u89c6\u56fe\uff1f\u4ec0\u4e48\u662f\u89c6\u56fe\uff1f","text":"<p>\u4e3a\u4e86\u63d0\u9ad8\u590d\u6742SQL\u8bed\u53e5\u7684\u590d\u7528\u6027\u548c\u8868\u64cd\u4f5c\u7684\u5b89\u5168\u6027\uff0cMySQL\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\u63d0\u4f9b\u4e86\u89c6\u56fe\u7279\u6027\u3002\u6240\u8c13\u89c6\u56fe\uff0c\u672c\u8d28\u4e0a\u662f\u4e00\u79cd\u865a\u62df\u8868\uff0c\u5728\u7269\u7406\u4e0a\u662f\u4e0d\u5b58\u5728\u7684\uff0c\u5176\u5185\u5bb9\u4e0e\u771f\u5b9e\u7684\u8868\u76f8\u4f3c\uff0c\u5305\u542b\u4e00\u7cfb\u5217\u5e26\u6709\u540d\u79f0\u7684\u5217\u548c\u884c\u6570\u636e\u3002\u4f46\u662f\uff0c\u89c6\u56fe\u5e76\u4e0d\u5728\u6570\u636e\u5e93\u4e2d\u4ee5\u50a8\u5b58\u7684\u6570\u636e\u503c\u5f62\u5f0f\u5b58\u5728\u3002\u884c\u548c\u5217\u6570\u636e\u6765\u81ea\u5b9a\u4e49\u89c6\u56fe\u7684\u67e5\u8be2\u6240\u5f15\u7528\u57fa\u672c\u8868\uff0c\u5e76\u4e14\u5728\u5177\u4f53\u5f15\u7528\u89c6\u56fe\u65f6\u52a8\u6001\u751f\u6210\u3002</p> <p>\u89c6\u56fe\u4f7f\u5f00\u53d1\u8005\u53ea\u5173\u5fc3\u611f\u5174\u8da3\u7684\u67d0\u4e9b\u7279\u5b9a\u6570\u636e\u548c\u6240\u8d1f\u8d23\u7684\u7279\u5b9a\u4efb\u52a1\uff0c\u53ea\u80fd\u770b\u5230\u89c6\u56fe\u4e2d\u6240\u5b9a\u4e49\u7684\u6570\u636e\uff0c\u800c\u4e0d\u662f\u89c6\u56fe\u6240\u5f15\u7528\u8868\u4e2d\u7684\u6570\u636e\uff0c\u4ece\u800c\u63d0\u9ad8\u4e86\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u5b89\u5168\u6027\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_34","title":"\u89c6\u56fe\u6709\u54ea\u4e9b\u7279\u70b9\uff1f","text":"<p>\u89c6\u56fe\u7684\u7279\u70b9\u5982\u4e0b:</p> <ul> <li>\u89c6\u56fe\u7684\u5217\u53ef\u4ee5\u6765\u81ea\u4e0d\u540c\u7684\u8868\uff0c\u662f\u8868\u7684\u62bd\u8c61\u548c\u5728\u903b\u8f91\u610f\u4e49\u4e0a\u5efa\u7acb\u7684\u65b0\u5173\u7cfb\u3002</li> <li>\u89c6\u56fe\u662f\u7531\u57fa\u672c\u8868(\u5b9e\u8868)\u4ea7\u751f\u7684\u8868(\u865a\u8868)\u3002</li> <li>\u89c6\u56fe\u7684\u5efa\u7acb\u548c\u5220\u9664\u4e0d\u5f71\u54cd\u57fa\u672c\u8868\u3002</li> <li>\u5bf9\u89c6\u56fe\u5185\u5bb9\u7684\u66f4\u65b0(\u6dfb\u52a0\uff0c\u5220\u9664\u548c\u4fee\u6539)\u76f4\u63a5\u5f71\u54cd\u57fa\u672c\u8868\u3002</li> <li>\u5f53\u89c6\u56fe\u6765\u81ea\u591a\u4e2a\u57fa\u672c\u8868\u65f6\uff0c\u4e0d\u5141\u8bb8\u6dfb\u52a0\u548c\u5220\u9664\u6570\u636e\u3002</li> </ul> <p>\u89c6\u56fe\u7684\u64cd\u4f5c\u5305\u62ec\u521b\u5efa\u89c6\u56fe\uff0c\u67e5\u770b\u89c6\u56fe\uff0c\u5220\u9664\u89c6\u56fe\u548c\u4fee\u6539\u89c6\u56fe\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_35","title":"\u89c6\u56fe\u7684\u4f7f\u7528\u573a\u666f\u6709\u54ea\u4e9b\uff1f","text":"<p>\u89c6\u56fe\u6839\u672c\u7528\u9014\uff1a\u7b80\u5316sql\u67e5\u8be2\uff0c\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\u3002\u5982\u679c\u8bf4\u8fd8\u6709\u53e6\u5916\u4e00\u4e2a\u7528\u9014\u90a3\u5c31\u662f\u517c\u5bb9\u8001\u7684\u8868\u7ed3\u6784\u3002</p> <p>\u4e0b\u9762\u662f\u89c6\u56fe\u7684\u5e38\u89c1\u4f7f\u7528\u573a\u666f\uff1a</p> <ul> <li>\u91cd\u7528SQL\u8bed\u53e5\uff1b</li> <li>\u7b80\u5316\u590d\u6742\u7684SQL\u64cd\u4f5c\u3002\u5728\u7f16\u5199\u67e5\u8be2\u540e\uff0c\u53ef\u4ee5\u65b9\u4fbf\u7684\u91cd\u7528\u5b83\u800c\u4e0d\u5fc5\u77e5\u9053\u5b83\u7684\u57fa\u672c\u67e5\u8be2\u7ec6\u8282\uff1b</li> <li>\u4f7f\u7528\u8868\u7684\u7ec4\u6210\u90e8\u5206\u800c\u4e0d\u662f\u6574\u4e2a\u8868\uff1b</li> <li>\u4fdd\u62a4\u6570\u636e\u3002\u53ef\u4ee5\u7ed9\u7528\u6237\u6388\u4e88\u8868\u7684\u7279\u5b9a\u90e8\u5206\u7684\u8bbf\u95ee\u6743\u9650\u800c\u4e0d\u662f\u6574\u4e2a\u8868\u7684\u8bbf\u95ee\u6743\u9650\uff1b</li> <li>\u66f4\u6539\u6570\u636e\u683c\u5f0f\u548c\u8868\u793a\u3002\u89c6\u56fe\u53ef\u8fd4\u56de\u4e0e\u5e95\u5c42\u8868\u7684\u8868\u793a\u548c\u683c\u5f0f\u4e0d\u540c\u7684\u6570\u636e\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_36","title":"\u89c6\u56fe\u7684\u4f18\u70b9","text":"<ol> <li>\u67e5\u8be2\u7b80\u5355\u5316\u3002\u89c6\u56fe\u80fd\u7b80\u5316\u7528\u6237\u7684\u64cd\u4f5c</li> <li>\u6570\u636e\u5b89\u5168\u6027\u3002\u89c6\u56fe\u4f7f\u7528\u6237\u80fd\u4ee5\u591a\u79cd\u89d2\u5ea6\u770b\u5f85\u540c\u4e00\u6570\u636e\uff0c\u80fd\u591f\u5bf9\u673a\u5bc6\u6570\u636e\u63d0\u4f9b\u5b89\u5168\u4fdd\u62a4</li> <li>\u903b\u8f91\u6570\u636e\u72ec\u7acb\u6027\u3002\u89c6\u56fe\u5bf9\u91cd\u6784\u6570\u636e\u5e93\u63d0\u4f9b\u4e86\u4e00\u5b9a\u7a0b\u5ea6\u7684\u903b\u8f91\u72ec\u7acb\u6027</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_37","title":"\u89c6\u56fe\u7684\u7f3a\u70b9","text":"<ol> <li> <p>\u6027\u80fd\u3002\u6570\u636e\u5e93\u5fc5\u987b\u628a\u89c6\u56fe\u7684\u67e5\u8be2\u8f6c\u5316\u6210\u5bf9\u57fa\u672c\u8868\u7684\u67e5\u8be2\uff0c\u5982\u679c\u8fd9\u4e2a\u89c6\u56fe\u662f\u7531\u4e00\u4e2a\u590d\u6742\u7684\u591a\u8868\u67e5\u8be2\u6240\u5b9a\u4e49\uff0c\u90a3\u4e48\uff0c\u5373\u4f7f\u662f\u89c6\u56fe\u7684\u4e00\u4e2a\u7b80\u5355\u67e5\u8be2\uff0c\u6570\u636e\u5e93\u4e5f\u628a\u5b83\u53d8\u6210\u4e00\u4e2a\u590d\u6742\u7684\u7ed3\u5408\u4f53\uff0c\u9700\u8981\u82b1\u8d39\u4e00\u5b9a\u7684\u65f6\u95f4\u3002</p> </li> <li> <p>\u4fee\u6539\u9650\u5236\u3002\u5f53\u7528\u6237\u8bd5\u56fe\u4fee\u6539\u89c6\u56fe\u7684\u67d0\u4e9b\u884c\u65f6\uff0c\u6570\u636e\u5e93\u5fc5\u987b\u628a\u5b83\u8f6c\u5316\u4e3a\u5bf9\u57fa\u672c\u8868\u7684\u67d0\u4e9b\u884c\u7684\u4fee\u6539\u3002\u4e8b\u5b9e\u4e0a\uff0c\u5f53\u4ece\u89c6\u56fe\u4e2d\u63d2\u5165\u6216\u8005\u5220\u9664\u65f6\uff0c\u60c5\u51b5\u4e5f\u662f\u8fd9\u6837\u3002\u5bf9\u4e8e\u7b80\u5355\u89c6\u56fe\u6765\u8bf4\uff0c\u8fd9\u662f\u5f88\u65b9\u4fbf\u7684\uff0c\u4f46\u662f\uff0c\u5bf9\u4e8e\u6bd4\u8f83\u590d\u6742\u7684\u89c6\u56fe\uff0c\u53ef\u80fd\u662f\u4e0d\u53ef\u4fee\u6539\u7684</p> </li> </ol> <p>\u8fd9\u4e9b\u89c6\u56fe\u6709\u5982\u4e0b\u7279\u5f81\uff1a1.\u6709UNIQUE\u7b49\u96c6\u5408\u64cd\u4f5c\u7b26\u7684\u89c6\u56fe\u30022.\u6709GROUP BY\u5b50\u53e5\u7684\u89c6\u56fe\u30023.\u6709\u8bf8\u5982AVG\\SUM\\MAX\u7b49\u805a\u5408\u51fd\u6570\u7684\u89c6\u56fe\u3002 4.\u4f7f\u7528DISTINCT\u5173\u952e\u5b57\u7684\u89c6\u56fe\u30025.\u8fde\u63a5\u8868\u7684\u89c6\u56fe\uff08\u5176\u4e2d\u6709\u4e9b\u4f8b\u5916\uff09</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_38","title":"\u4ec0\u4e48\u662f\u6e38\u6807\uff1f","text":"<p>\u6e38\u6807\u662f\u7cfb\u7edf\u4e3a\u7528\u6237\u5f00\u8bbe\u7684\u4e00\u4e2a\u6570\u636e\u7f13\u51b2\u533a\uff0c\u5b58\u653eSQL\u8bed\u53e5\u7684\u6267\u884c\u7ed3\u679c\uff0c\u6bcf\u4e2a\u6e38\u6807\u533a\u90fd\u6709\u4e00\u4e2a\u540d\u5b57\u3002\u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u6e38\u6807\u9010\u4e00\u83b7\u53d6\u8bb0\u5f55\u5e76\u8d4b\u7ed9\u4e3b\u53d8\u91cf\uff0c\u4ea4\u7531\u4e3b\u8bed\u8a00\u8fdb\u4e00\u6b65\u5904\u7406\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_39","title":"\u5b58\u50a8\u8fc7\u7a0b\u4e0e\u51fd\u6570","text":""},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_40","title":"\u4ec0\u4e48\u662f\u5b58\u50a8\u8fc7\u7a0b\uff1f\u6709\u54ea\u4e9b\u4f18\u7f3a\u70b9\uff1f","text":"<p>\u5b58\u50a8\u8fc7\u7a0b\u662f\u4e00\u4e2a\u9884\u7f16\u8bd1\u7684SQL\u8bed\u53e5\uff0c\u4f18\u70b9\u662f\u5141\u8bb8\u6a21\u5757\u5316\u7684\u8bbe\u8ba1\uff0c\u5c31\u662f\u8bf4\u53ea\u9700\u8981\u521b\u5efa\u4e00\u6b21\uff0c\u4ee5\u540e\u5728\u8be5\u7a0b\u5e8f\u4e2d\u5c31\u53ef\u4ee5\u8c03\u7528\u591a\u6b21\u3002\u5982\u679c\u67d0\u6b21\u64cd\u4f5c\u9700\u8981\u6267\u884c\u591a\u6b21SQL\uff0c\u4f7f\u7528\u5b58\u50a8\u8fc7\u7a0b\u6bd4\u5355\u7eafSQL\u8bed\u53e5\u6267\u884c\u8981\u5feb\u3002</p> <p>\u4f18\u70b9</p> <p>1\uff09\u5b58\u50a8\u8fc7\u7a0b\u662f\u9884\u7f16\u8bd1\u8fc7\u7684\uff0c\u6267\u884c\u6548\u7387\u9ad8\u3002</p> <p>2\uff09\u5b58\u50a8\u8fc7\u7a0b\u7684\u4ee3\u7801\u76f4\u63a5\u5b58\u653e\u4e8e\u6570\u636e\u5e93\u4e2d\uff0c\u901a\u8fc7\u5b58\u50a8\u8fc7\u7a0b\u540d\u76f4\u63a5\u8c03\u7528\uff0c\u51cf\u5c11\u7f51\u7edc\u901a\u8baf\u3002</p> <p>3\uff09\u5b89\u5168\u6027\u9ad8\uff0c\u6267\u884c\u5b58\u50a8\u8fc7\u7a0b\u9700\u8981\u6709\u4e00\u5b9a\u6743\u9650\u7684\u7528\u6237\u3002</p> <p>4\uff09\u5b58\u50a8\u8fc7\u7a0b\u53ef\u4ee5\u91cd\u590d\u4f7f\u7528\uff0c\u51cf\u5c11\u6570\u636e\u5e93\u5f00\u53d1\u4eba\u5458\u7684\u5de5\u4f5c\u91cf\u3002</p> <p>\u7f3a\u70b9</p> <p>1\uff09\u8c03\u8bd5\u9ebb\u70e6\uff0c\u4f46\u662f\u7528 PL/SQL Developer \u8c03\u8bd5\u5f88\u65b9\u4fbf\uff01\u5f25\u8865\u8fd9\u4e2a\u7f3a\u70b9\u3002</p> <p>2\uff09\u79fb\u690d\u95ee\u9898\uff0c\u6570\u636e\u5e93\u7aef\u4ee3\u7801\u5f53\u7136\u662f\u4e0e\u6570\u636e\u5e93\u76f8\u5173\u7684\u3002\u4f46\u662f\u5982\u679c\u662f\u505a\u5de5\u7a0b\u578b\u9879\u76ee\uff0c\u57fa\u672c\u4e0d\u5b58\u5728\u79fb\u690d\u95ee\u9898\u3002</p> <p>3\uff09\u91cd\u65b0\u7f16\u8bd1\u95ee\u9898\uff0c\u56e0\u4e3a\u540e\u7aef\u4ee3\u7801\u662f\u8fd0\u884c\u524d\u7f16\u8bd1\u7684\uff0c\u5982\u679c\u5e26\u6709\u5f15\u7528\u5173\u7cfb\u7684\u5bf9\u8c61\u53d1\u751f\u6539\u53d8\u65f6\uff0c\u53d7\u5f71\u54cd\u7684\u5b58\u50a8\u8fc7\u7a0b\u3001\u5305\u5c06\u9700\u8981\u91cd\u65b0\u7f16\u8bd1\uff08\u4e0d\u8fc7\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u6210\u8fd0\u884c\u65f6\u523b\u81ea\u52a8\u7f16\u8bd1\uff09\u3002</p> <p>4\uff09\u5982\u679c\u5728\u4e00\u4e2a\u7a0b\u5e8f\u7cfb\u7edf\u4e2d\u5927\u91cf\u7684\u4f7f\u7528\u5b58\u50a8\u8fc7\u7a0b\uff0c\u5230\u7a0b\u5e8f\u4ea4\u4ed8\u4f7f\u7528\u7684\u65f6\u5019\u968f\u7740\u7528\u6237\u9700\u6c42\u7684\u589e\u52a0\u4f1a\u5bfc\u81f4\u6570\u636e\u7ed3\u6784\u7684\u53d8\u5316\uff0c\u63a5\u7740\u5c31\u662f\u7cfb\u7edf\u7684\u76f8\u5173\u95ee\u9898\u4e86\uff0c\u6700\u540e\u5982\u679c\u7528\u6237\u60f3\u7ef4\u62a4\u8be5\u7cfb\u7edf\u53ef\u4ee5\u8bf4\u662f\u5f88\u96be\u5f88\u96be\u3001\u800c\u4e14\u4ee3\u4ef7\u662f\u7a7a\u524d\u7684\uff0c\u7ef4\u62a4\u8d77\u6765\u66f4\u9ebb\u70e6\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_41","title":"\u89e6\u53d1\u5668","text":""},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_42","title":"\u4ec0\u4e48\u662f\u89e6\u53d1\u5668\uff1f\u89e6\u53d1\u5668\u7684\u4f7f\u7528\u573a\u666f\u6709\u54ea\u4e9b\uff1f","text":"<p>\u89e6\u53d1\u5668\u662f\u7528\u6237\u5b9a\u4e49\u5728\u5173\u7cfb\u8868\u4e0a\u7684\u4e00\u7c7b\u7531\u4e8b\u4ef6\u9a71\u52a8\u7684\u7279\u6b8a\u7684\u5b58\u50a8\u8fc7\u7a0b\u3002\u89e6\u53d1\u5668\u662f\u6307\u4e00\u6bb5\u4ee3\u7801\uff0c\u5f53\u89e6\u53d1\u67d0\u4e2a\u4e8b\u4ef6\u65f6\uff0c\u81ea\u52a8\u6267\u884c\u8fd9\u4e9b\u4ee3\u7801\u3002</p> <p>\u4f7f\u7528\u573a\u666f</p> <ul> <li>\u53ef\u4ee5\u901a\u8fc7\u6570\u636e\u5e93\u4e2d\u7684\u76f8\u5173\u8868\u5b9e\u73b0\u7ea7\u8054\u66f4\u6539\u3002</li> <li>\u5b9e\u65f6\u76d1\u63a7\u67d0\u5f20\u8868\u4e2d\u7684\u67d0\u4e2a\u5b57\u6bb5\u7684\u66f4\u6539\u800c\u9700\u8981\u505a\u51fa\u76f8\u5e94\u7684\u5904\u7406\u3002</li> <li>\u4f8b\u5982\u53ef\u4ee5\u751f\u6210\u67d0\u4e9b\u4e1a\u52a1\u7684\u7f16\u53f7\u3002</li> <li>\u6ce8\u610f\u4e0d\u8981\u6ee5\u7528\uff0c\u5426\u5219\u4f1a\u9020\u6210\u6570\u636e\u5e93\u53ca\u5e94\u7528\u7a0b\u5e8f\u7684\u7ef4\u62a4\u56f0\u96be\u3002</li> <li>\u5927\u5bb6\u9700\u8981\u7262\u8bb0\u4ee5\u4e0a\u57fa\u7840\u77e5\u8bc6\u70b9\uff0c\u91cd\u70b9\u662f\u7406\u89e3\u6570\u636e\u7c7b\u578bCHAR\u548cVARCHAR\u7684\u5dee\u5f02\uff0c\u8868\u5b58\u50a8\u5f15\u64ceInnoDB\u548cMyISAM\u7684\u533a\u522b\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#mysql_6","title":"MySQL\u4e2d\u90fd\u6709\u54ea\u4e9b\u89e6\u53d1\u5668\uff1f","text":"<p>\u5728MySQL\u6570\u636e\u5e93\u4e2d\u6709\u5982\u4e0b\u516d\u79cd\u89e6\u53d1\u5668\uff1a</p> <ul> <li>Before Insert</li> <li>After Insert</li> <li>Before Update</li> <li>After Update</li> <li>Before Delete</li> <li>After Delete</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#sql_1","title":"\u5e38\u7528SQL\u8bed\u53e5","text":""},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#sql_2","title":"SQL\u8bed\u53e5\u4e3b\u8981\u5206\u4e3a\u54ea\u51e0\u7c7b","text":"<p>\u6570\u636e\u5b9a\u4e49\u8bed\u8a00DDL\uff08Data Ddefinition Language\uff09CREATE\uff0cDROP\uff0cALTER</p> <p>\u4e3b\u8981\u4e3a\u4ee5\u4e0a\u64cd\u4f5c \u5373\u5bf9\u903b\u8f91\u7ed3\u6784\u7b49\u6709\u64cd\u4f5c\u7684\uff0c\u5176\u4e2d\u5305\u62ec\u8868\u7ed3\u6784\uff0c\u89c6\u56fe\u548c\u7d22\u5f15\u3002</p> <p>\u6570\u636e\u67e5\u8be2\u8bed\u8a00DQL\uff08Data Query Language\uff09SELECT</p> <p>\u8fd9\u4e2a\u8f83\u4e3a\u597d\u7406\u89e3 \u5373\u67e5\u8be2\u64cd\u4f5c\uff0c\u4ee5select\u5173\u952e\u5b57\u3002\u5404\u79cd\u7b80\u5355\u67e5\u8be2\uff0c\u8fde\u63a5\u67e5\u8be2\u7b49 \u90fd\u5c5e\u4e8eDQL\u3002</p> <p>\u6570\u636e\u64cd\u7eb5\u8bed\u8a00DML\uff08Data Manipulation Language\uff09INSERT\uff0cUPDATE\uff0cDELETE</p> <p>\u4e3b\u8981\u4e3a\u4ee5\u4e0a\u64cd\u4f5c \u5373\u5bf9\u6570\u636e\u8fdb\u884c\u64cd\u4f5c\u7684\uff0c\u5bf9\u5e94\u4e0a\u9762\u6240\u8bf4\u7684\u67e5\u8be2\u64cd\u4f5c DQL\u4e0eDML\u5171\u540c\u6784\u5efa\u4e86\u591a\u6570\u521d\u7ea7\u7a0b\u5e8f\u5458\u5e38\u7528\u7684\u589e\u5220\u6539\u67e5\u64cd\u4f5c\u3002\u800c\u67e5\u8be2\u662f\u8f83\u4e3a\u7279\u6b8a\u7684\u4e00\u79cd \u88ab\u5212\u5206\u5230DQL\u4e2d\u3002</p> <p>\u6570\u636e\u63a7\u5236\u529f\u80fdDCL\uff08Data Control Language\uff09GRANT\uff0cREVOKE\uff0cCOMMIT\uff0cROLLBACK</p> <p>\u4e3b\u8981\u4e3a\u4ee5\u4e0a\u64cd\u4f5c \u5373\u5bf9\u6570\u636e\u5e93\u5b89\u5168\u6027\u5b8c\u6574\u6027\u7b49\u6709\u64cd\u4f5c\u7684\uff0c\u53ef\u4ee5\u7b80\u5355\u7684\u7406\u89e3\u4e3a\u6743\u9650\u63a7\u5236\u7b49\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_43","title":"\u8d85\u952e\u3001\u5019\u9009\u952e\u3001\u4e3b\u952e\u3001\u5916\u952e\u5206\u522b\u662f\u4ec0\u4e48\uff1f","text":"<ul> <li>\u8d85\u952e\uff1a\u5728\u5173\u7cfb\u4e2d\u80fd\u552f\u4e00\u6807\u8bc6\u5143\u7ec4\u7684\u5c5e\u6027\u96c6\u79f0\u4e3a\u5173\u7cfb\u6a21\u5f0f\u7684\u8d85\u952e\u3002\u4e00\u4e2a\u5c5e\u6027\u53ef\u4ee5\u4e3a\u4f5c\u4e3a\u4e00\u4e2a\u8d85\u952e\uff0c\u591a\u4e2a\u5c5e\u6027\u7ec4\u5408\u5728\u4e00\u8d77\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u4e00\u4e2a\u8d85\u952e\u3002\u8d85\u952e\u5305\u542b\u5019\u9009\u952e\u548c\u4e3b\u952e\u3002</li> <li>\u5019\u9009\u952e\uff1a\u662f\u6700\u5c0f\u8d85\u952e\uff0c\u5373\u6ca1\u6709\u5197\u4f59\u5143\u7d20\u7684\u8d85\u952e\u3002</li> <li>\u4e3b\u952e\uff1a\u6570\u636e\u5e93\u8868\u4e2d\u5bf9\u50a8\u5b58\u6570\u636e\u5bf9\u8c61\u4e88\u4ee5\u552f\u4e00\u548c\u5b8c\u6574\u6807\u8bc6\u7684\u6570\u636e\u5217\u6216\u5c5e\u6027\u7684\u7ec4\u5408\u3002\u4e00\u4e2a\u6570\u636e\u5217\u53ea\u80fd\u6709\u4e00\u4e2a\u4e3b\u952e\uff0c\u4e14\u4e3b\u952e\u7684\u53d6\u503c\u4e0d\u80fd\u7f3a\u5931\uff0c\u5373\u4e0d\u80fd\u4e3a\u7a7a\u503c\uff08Null\uff09\u3002</li> <li>\u5916\u952e\uff1a\u5728\u4e00\u4e2a\u8868\u4e2d\u5b58\u5728\u7684\u53e6\u4e00\u4e2a\u8868\u7684\u4e3b\u952e\u79f0\u6b64\u8868\u7684\u5916\u952e\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#sql_3","title":"SQL \u7ea6\u675f\u6709\u54ea\u51e0\u79cd\uff1f","text":"<p>SQL \u7ea6\u675f\u6709\u54ea\u51e0\u79cd\uff1f</p> <ul> <li>NOT NULL: \u7528\u4e8e\u63a7\u5236\u5b57\u6bb5\u7684\u5185\u5bb9\u4e00\u5b9a\u4e0d\u80fd\u4e3a\u7a7a\uff08NULL\uff09\u3002</li> <li>UNIQUE: \u63a7\u4ef6\u5b57\u6bb5\u5185\u5bb9\u4e0d\u80fd\u91cd\u590d\uff0c\u4e00\u4e2a\u8868\u5141\u8bb8\u6709\u591a\u4e2a Unique \u7ea6\u675f\u3002</li> <li>PRIMARY KEY: \u4e5f\u662f\u7528\u4e8e\u63a7\u4ef6\u5b57\u6bb5\u5185\u5bb9\u4e0d\u80fd\u91cd\u590d\uff0c\u4f46\u5b83\u5728\u4e00\u4e2a\u8868\u53ea\u5141\u8bb8\u51fa\u73b0\u4e00\u4e2a\u3002</li> <li>FOREIGN KEY: \u7528\u4e8e\u9884\u9632\u7834\u574f\u8868\u4e4b\u95f4\u8fde\u63a5\u7684\u52a8\u4f5c\uff0c\u4e5f\u80fd\u9632\u6b62\u975e\u6cd5\u6570\u636e\u63d2\u5165\u5916\u952e\u5217\uff0c\u56e0\u4e3a\u5b83\u5fc5\u987b\u662f\u5b83\u6307\u5411\u7684\u90a3\u4e2a\u8868\u4e2d\u7684\u503c\u4e4b\u4e00\u3002</li> <li>CHECK: \u7528\u4e8e\u63a7\u5236\u5b57\u6bb5\u7684\u503c\u8303\u56f4\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_44","title":"\u516d\u79cd\u5173\u8054\u67e5\u8be2","text":"<ul> <li>\u4ea4\u53c9\u8fde\u63a5\uff08CROSS JOIN\uff09</li> <li>\u5185\u8fde\u63a5\uff08INNER JOIN\uff09</li> <li>\u5916\u8fde\u63a5\uff08LEFT JOIN/RIGHT JOIN\uff09</li> <li>\u8054\u5408\u67e5\u8be2\uff08UNION\u4e0eUNION ALL\uff09</li> <li>\u5168\u8fde\u63a5\uff08FULL JOIN\uff09</li> <li>\u4ea4\u53c9\u8fde\u63a5\uff08CROSS JOIN\uff09</li> </ul> <p>SELECT * FROM A,B(,C)\u6216\u8005SELECT * FROM A CROSS JOIN B (CROSS JOIN C)#\u6ca1\u6709\u4efb\u4f55\u5173\u8054\u6761\u4ef6\uff0c\u7ed3\u679c\u662f\u7b1b\u5361\u5c14\u79ef\uff0c\u7ed3\u679c\u96c6\u4f1a\u5f88\u5927\uff0c\u6ca1\u6709\u610f\u4e49\uff0c\u5f88\u5c11\u4f7f\u7528\u5185\u8fde\u63a5\uff08INNER JOIN\uff09SELECT * FROM A,B WHERE A.id=B.id\u6216\u8005SELECT * FROM A INNER JOIN B ON A.id=B.id\u591a\u8868\u4e2d\u540c\u65f6\u7b26\u5408\u67d0\u79cd\u6761\u4ef6\u7684\u6570\u636e\u8bb0\u5f55\u7684\u96c6\u5408\uff0cINNER JOIN\u53ef\u4ee5\u7f29\u5199\u4e3aJOIN</p> <ul> <li>1</li> </ul> <p>\u5185\u8fde\u63a5\u5206\u4e3a\u4e09\u7c7b</p> <ul> <li>\u7b49\u503c\u8fde\u63a5\uff1aON A.id=B.id</li> <li>\u4e0d\u7b49\u503c\u8fde\u63a5\uff1aON A.id &gt; B.id</li> <li>\u81ea\u8fde\u63a5\uff1aSELECT * FROM A T1 INNER JOIN A T2 ON T1.id=T2.pid</li> </ul> <p>\u5916\u8fde\u63a5\uff08LEFT JOIN/RIGHT JOIN\uff09</p> <ul> <li>\u5de6\u5916\u8fde\u63a5\uff1aLEFT OUTER JOIN, \u4ee5\u5de6\u8868\u4e3a\u4e3b\uff0c\u5148\u67e5\u8be2\u51fa\u5de6\u8868\uff0c\u6309\u7167ON\u540e\u7684\u5173\u8054\u6761\u4ef6\u5339\u914d\u53f3\u8868\uff0c\u6ca1\u6709\u5339\u914d\u5230\u7684\u7528NULL\u586b\u5145\uff0c\u53ef\u4ee5\u7b80\u5199\u6210LEFT JOIN</li> <li>\u53f3\u5916\u8fde\u63a5\uff1aRIGHT OUTER JOIN, \u4ee5\u53f3\u8868\u4e3a\u4e3b\uff0c\u5148\u67e5\u8be2\u51fa\u53f3\u8868\uff0c\u6309\u7167ON\u540e\u7684\u5173\u8054\u6761\u4ef6\u5339\u914d\u5de6\u8868\uff0c\u6ca1\u6709\u5339\u914d\u5230\u7684\u7528NULL\u586b\u5145\uff0c\u53ef\u4ee5\u7b80\u5199\u6210RIGHT JOIN</li> </ul> <p>\u8054\u5408\u67e5\u8be2\uff08UNION\u4e0eUNION ALL\uff09</p> <p>SELECT * FROM A UNION SELECT * FROM B UNION ...</p> <ul> <li> <p>1</p> </li> <li> <p>\u5c31\u662f\u628a\u591a\u4e2a\u7ed3\u679c\u96c6\u96c6\u4e2d\u5728\u4e00\u8d77\uff0cUNION\u524d\u7684\u7ed3\u679c\u4e3a\u57fa\u51c6\uff0c\u9700\u8981\u6ce8\u610f\u7684\u662f\u8054\u5408\u67e5\u8be2\u7684\u5217\u6570\u8981\u76f8\u7b49\uff0c\u76f8\u540c\u7684\u8bb0\u5f55\u884c\u4f1a\u5408\u5e76</p> </li> <li>\u5982\u679c\u4f7f\u7528UNION ALL\uff0c\u4e0d\u4f1a\u5408\u5e76\u91cd\u590d\u7684\u8bb0\u5f55\u884c</li> <li>\u6548\u7387 UNION \u9ad8\u4e8e UNION ALL</li> </ul> <p>\u5168\u8fde\u63a5\uff08FULL JOIN\uff09</p> <ul> <li>MySQL\u4e0d\u652f\u6301\u5168\u8fde\u63a5</li> <li>\u53ef\u4ee5\u4f7f\u7528LEFT JOIN \u548cUNION\u548cRIGHT JOIN\u8054\u5408\u4f7f\u7528</li> </ul> <p>SELECT * FROM A LEFT JOIN B ON A.id=B.id UNIONSELECT * FROM A RIGHT JOIN B ON A.id=B.id</p> <ul> <li>1</li> </ul> <p>\u8868\u8fde\u63a5\u9762\u8bd5\u9898</p> <p>\u67092\u5f20\u8868\uff0c1\u5f20R\u30011\u5f20S\uff0cR\u8868\u6709ABC\u4e09\u5217\uff0cS\u8868\u6709CD\u4e24\u5217\uff0c\u8868\u4e2d\u5404\u6709\u4e09\u6761\u8bb0\u5f55\u3002</p> <p>R\u8868</p> A B C a1 b1 c1 a2 b2 c2 a3 b3 c3 <p>S\u8868</p> C D c1 d1 c2 d2 c4 d3 <ol> <li>\u4ea4\u53c9\u8fde\u63a5(\u7b1b\u5361\u5c14\u79ef):</li> </ol> <p>select r.,s. from r,s</p> A B C C D a1 b1 c1 c1 d1 a2 b2 c2 c1 d1 a3 b3 c3 c1 d1 a1 b1 c1 c2 d2 a2 b2 c2 c2 d2 a3 b3 c3 c2 d2 a1 b1 c1 c4 d3 a2 b2 c2 c4 d3 a3 b3 c3 c4 d3 <ol> <li>\u5185\u8fde\u63a5\u7ed3\u679c\uff1a</li> </ol> <p>select r.,s. from r inner join s on r.c=s.c</p> A B C C D a1 b1 c1 c1 d1 a2 b2 c2 c2 d2 <ol> <li>\u5de6\u8fde\u63a5\u7ed3\u679c\uff1a</li> </ol> <p>select r.,s. from r left join s on r.c=s.c</p> A B C C D a1 b1 c1 c1 d1 a2 b2 c2 c2 d2 a3 b3 c3 <ol> <li>\u53f3\u8fde\u63a5\u7ed3\u679c\uff1a</li> </ol> <p>select r.,s. from r right join s on r.c=s.c</p> A B C C D a1 b1 c1 c1 d1 a2 b2 c2 c2 d2 c4 d3 <ol> <li>\u5168\u8868\u8fde\u63a5\u7684\u7ed3\u679c\uff08MySql\u4e0d\u652f\u6301\uff0cOracle\u652f\u6301\uff09\uff1a</li> </ol> <p>select r.,s. from r full join s on r.c=s.c</p> A B C C D a1 b1 c1 c1 d1 a2 b2 c2 c2 d2 a3 b3 c3 c4 d3"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_45","title":"\u4ec0\u4e48\u662f\u5b50\u67e5\u8be2","text":"<ol> <li>\u6761\u4ef6\uff1a\u4e00\u6761SQL\u8bed\u53e5\u7684\u67e5\u8be2\u7ed3\u679c\u505a\u4e3a\u53e6\u4e00\u6761\u67e5\u8be2\u8bed\u53e5\u7684\u6761\u4ef6\u6216\u67e5\u8be2\u7ed3\u679c</li> <li>\u5d4c\u5957\uff1a\u591a\u6761SQL\u8bed\u53e5\u5d4c\u5957\u4f7f\u7528\uff0c\u5185\u90e8\u7684SQL\u67e5\u8be2\u8bed\u53e5\u79f0\u4e3a\u5b50\u67e5\u8be2\u3002</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_46","title":"\u5b50\u67e5\u8be2\u7684\u4e09\u79cd\u60c5\u51b5","text":"<ol> <li>\u5b50\u67e5\u8be2\u662f\u5355\u884c\u5355\u5217\u7684\u60c5\u51b5\uff1a\u7ed3\u679c\u96c6\u662f\u4e00\u4e2a\u503c\uff0c\u7236\u67e5\u8be2\u4f7f\u7528\uff1a=\u3001 &lt;\u3001 &gt; \u7b49\u8fd0\u7b97\u7b26</li> </ol> <p>-- \u67e5\u8be2\u5de5\u8d44\u6700\u9ad8\u7684\u5458\u5de5\u662f\u8c01\uff1f select * from employee where salary=(select max(salary) from employee);</p> <ul> <li>1</li> <li> <p>2</p> </li> <li> <p>\u5b50\u67e5\u8be2\u662f\u591a\u884c\u5355\u5217\u7684\u60c5\u51b5\uff1a\u7ed3\u679c\u96c6\u7c7b\u4f3c\u4e8e\u4e00\u4e2a\u6570\u7ec4\uff0c\u7236\u67e5\u8be2\u4f7f\u7528\uff1ain \u8fd0\u7b97\u7b26</p> </li> </ul> <p>-- \u67e5\u8be2\u5de5\u8d44\u6700\u9ad8\u7684\u5458\u5de5\u662f\u8c01\uff1f select * from employee where salary=(select max(salary) from employee);</p> <ul> <li>1</li> <li> <p>2</p> </li> <li> <p>\u5b50\u67e5\u8be2\u662f\u591a\u884c\u591a\u5217\u7684\u60c5\u51b5\uff1a\u7ed3\u679c\u96c6\u7c7b\u4f3c\u4e8e\u4e00\u5f20\u865a\u62df\u8868\uff0c\u4e0d\u80fd\u7528\u4e8ewhere\u6761\u4ef6\uff0c\u7528\u4e8eselect\u5b50\u53e5\u4e2d\u505a\u4e3a\u5b50\u8868</p> </li> </ul> <p>-- 1) \u67e5\u8be2\u51fa2011\u5e74\u4ee5\u540e\u5165\u804c\u7684\u5458\u5de5\u4fe1\u606f -- 2) \u67e5\u8be2\u6240\u6709\u7684\u90e8\u95e8\u4fe1\u606f\uff0c\u4e0e\u4e0a\u9762\u7684\u865a\u62df\u8868\u4e2d\u7684\u4fe1\u606f\u6bd4\u5bf9\uff0c\u627e\u51fa\u6240\u6709\u90e8\u95e8ID\u76f8\u7b49\u7684\u5458\u5de5\u3002 select * from dept d, (select * from employee where join_date &gt; '2011-1-1') e where e.dept_id = d.id; -- \u4f7f\u7528\u8868\u8fde\u63a5\uff1a select d., e. from dept d inner join employee e on d.id = e.dept_id where e.join_date &gt; '2011-1-1'</p> <ul> <li>1</li> <li>2</li> <li>3</li> <li>4</li> <li>5</li> <li>6</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#mysql-in-exists","title":"mysql\u4e2d in \u548c exists \u533a\u522b","text":"<p>mysql\u4e2d\u7684in\u8bed\u53e5\u662f\u628a\u5916\u8868\u548c\u5185\u8868\u4f5chash \u8fde\u63a5\uff0c\u800cexists\u8bed\u53e5\u662f\u5bf9\u5916\u8868\u4f5cloop\u5faa\u73af\uff0c\u6bcf\u6b21loop\u5faa\u73af\u518d\u5bf9\u5185\u8868\u8fdb\u884c\u67e5\u8be2\u3002\u4e00\u76f4\u5927\u5bb6\u90fd\u8ba4\u4e3aexists\u6bd4in\u8bed\u53e5\u7684\u6548\u7387\u8981\u9ad8\uff0c\u8fd9\u79cd\u8bf4\u6cd5\u5176\u5b9e\u662f\u4e0d\u51c6\u786e\u7684\u3002\u8fd9\u4e2a\u662f\u8981\u533a\u5206\u73af\u5883\u7684\u3002</p> <ol> <li>\u5982\u679c\u67e5\u8be2\u7684\u4e24\u4e2a\u8868\u5927\u5c0f\u76f8\u5f53\uff0c\u90a3\u4e48\u7528in\u548cexists\u5dee\u522b\u4e0d\u5927\u3002</li> <li>\u5982\u679c\u4e24\u4e2a\u8868\u4e2d\u4e00\u4e2a\u8f83\u5c0f\uff0c\u4e00\u4e2a\u662f\u5927\u8868\uff0c\u5219\u5b50\u67e5\u8be2\u8868\u5927\u7684\u7528exists\uff0c\u5b50\u67e5\u8be2\u8868\u5c0f\u7684\u7528in\u3002</li> <li>not in \u548cnot exists\uff1a\u5982\u679c\u67e5\u8be2\u8bed\u53e5\u4f7f\u7528\u4e86not in\uff0c\u90a3\u4e48\u5185\u5916\u8868\u90fd\u8fdb\u884c\u5168\u8868\u626b\u63cf\uff0c\u6ca1\u6709\u7528\u5230\u7d22\u5f15\uff1b\u800cnot extsts\u7684\u5b50\u67e5\u8be2\u4f9d\u7136\u80fd\u7528\u5230\u8868\u4e0a\u7684\u7d22\u5f15\u3002\u6240\u4ee5\u65e0\u8bba\u90a3\u4e2a\u8868\u5927\uff0c\u7528not exists\u90fd\u6bd4not in\u8981\u5feb\u3002</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#varcharchar","title":"varchar\u4e0echar\u7684\u533a\u522b","text":"<p>char\u7684\u7279\u70b9</p> <ul> <li>char\u8868\u793a\u5b9a\u957f\u5b57\u7b26\u4e32\uff0c\u957f\u5ea6\u662f\u56fa\u5b9a\u7684\uff1b</li> <li>\u5982\u679c\u63d2\u5165\u6570\u636e\u7684\u957f\u5ea6\u5c0f\u4e8echar\u7684\u56fa\u5b9a\u957f\u5ea6\u65f6\uff0c\u5219\u7528\u7a7a\u683c\u586b\u5145\uff1b</li> <li>\u56e0\u4e3a\u957f\u5ea6\u56fa\u5b9a\uff0c\u6240\u4ee5\u5b58\u53d6\u901f\u5ea6\u8981\u6bd4varchar\u5feb\u5f88\u591a\uff0c\u751a\u81f3\u80fd\u5feb50%\uff0c\u4f46\u6b63\u56e0\u4e3a\u5176\u957f\u5ea6\u56fa\u5b9a\uff0c\u6240\u4ee5\u4f1a\u5360\u636e\u591a\u4f59\u7684\u7a7a\u95f4\uff0c\u662f\u7a7a\u95f4\u6362\u65f6\u95f4\u7684\u505a\u6cd5\uff1b</li> <li>\u5bf9\u4e8echar\u6765\u8bf4\uff0c\u6700\u591a\u80fd\u5b58\u653e\u7684\u5b57\u7b26\u4e2a\u6570\u4e3a255\uff0c\u548c\u7f16\u7801\u65e0\u5173</li> </ul> <p>varchar\u7684\u7279\u70b9</p> <ul> <li>varchar\u8868\u793a\u53ef\u53d8\u957f\u5b57\u7b26\u4e32\uff0c\u957f\u5ea6\u662f\u53ef\u53d8\u7684\uff1b</li> <li>\u63d2\u5165\u7684\u6570\u636e\u662f\u591a\u957f\uff0c\u5c31\u6309\u7167\u591a\u957f\u6765\u5b58\u50a8\uff1b</li> <li>varchar\u5728\u5b58\u53d6\u65b9\u9762\u4e0echar\u76f8\u53cd\uff0c\u5b83\u5b58\u53d6\u6162\uff0c\u56e0\u4e3a\u957f\u5ea6\u4e0d\u56fa\u5b9a\uff0c\u4f46\u6b63\u56e0\u5982\u6b64\uff0c\u4e0d\u5360\u636e\u591a\u4f59\u7684\u7a7a\u95f4\uff0c\u662f\u65f6\u95f4\u6362\u7a7a\u95f4\u7684\u505a\u6cd5\uff1b</li> <li>\u5bf9\u4e8evarchar\u6765\u8bf4\uff0c\u6700\u591a\u80fd\u5b58\u653e\u7684\u5b57\u7b26\u4e2a\u6570\u4e3a65532</li> </ul> <p>\u603b\u4e4b\uff0c\u7ed3\u5408\u6027\u80fd\u89d2\u5ea6\uff08char\u66f4\u5feb\uff09\u548c\u8282\u7701\u78c1\u76d8\u7a7a\u95f4\u89d2\u5ea6\uff08varchar\u66f4\u5c0f\uff09\uff0c\u5177\u4f53\u60c5\u51b5\u8fd8\u9700\u5177\u4f53\u6765\u8bbe\u8ba1\u6570\u636e\u5e93\u624d\u662f\u59a5\u5f53\u7684\u505a\u6cd5\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#varchar5050","title":"varchar(50)\u4e2d50\u7684\u6db5\u4e49","text":"<p>\u6700\u591a\u5b58\u653e50\u4e2a\u5b57\u7b26\uff0cvarchar(50)\u548c(200)\u5b58\u50a8hello\u6240\u5360\u7a7a\u95f4\u4e00\u6837\uff0c\u4f46\u540e\u8005\u5728\u6392\u5e8f\u65f6\u4f1a\u6d88\u8017\u66f4\u591a\u5185\u5b58\uff0c\u56e0\u4e3aorder by col\u91c7\u7528fixed_length\u8ba1\u7b97col\u957f\u5ea6(memory\u5f15\u64ce\u4e5f\u4e00\u6837)\u3002\u5728\u65e9\u671f MySQL \u7248\u672c\u4e2d\uff0c 50 \u4ee3\u8868\u5b57\u8282\u6570\uff0c\u73b0\u5728\u4ee3\u8868\u5b57\u7b26\u6570\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#int2020","title":"int(20)\u4e2d20\u7684\u6db5\u4e49","text":"<p>\u662f\u6307\u663e\u793a\u5b57\u7b26\u7684\u957f\u5ea6\u300220\u8868\u793a\u6700\u5927\u663e\u793a\u5bbd\u5ea6\u4e3a20\uff0c\u4f46\u4ecd\u53604\u5b57\u8282\u5b58\u50a8\uff0c\u5b58\u50a8\u8303\u56f4\u4e0d\u53d8\uff1b</p> <p>\u4e0d\u5f71\u54cd\u5185\u90e8\u5b58\u50a8\uff0c\u53ea\u662f\u5f71\u54cd\u5e26 zerofill \u5b9a\u4e49\u7684 int \u65f6\uff0c\u524d\u9762\u8865\u591a\u5c11\u4e2a 0\uff0c\u6613\u4e8e\u62a5\u8868\u5c55\u793a</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#mysql_7","title":"mysql\u4e3a\u4ec0\u4e48\u8fd9\u4e48\u8bbe\u8ba1","text":"<p>\u5bf9\u5927\u591a\u6570\u5e94\u7528\u6ca1\u6709\u610f\u4e49\uff0c\u53ea\u662f\u89c4\u5b9a\u4e00\u4e9b\u5de5\u5177\u7528\u6765\u663e\u793a\u5b57\u7b26\u7684\u4e2a\u6570\uff1bint(1)\u548cint(20)\u5b58\u50a8\u548c\u8ba1\u7b97\u5747\u4e00\u6837\uff1b</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#mysqlint10char10varchar10","title":"mysql\u4e2dint(10)\u548cchar(10)\u4ee5\u53cavarchar(10)\u7684\u533a\u522b","text":"<ul> <li>int(10)\u768410\u8868\u793a\u663e\u793a\u7684\u6570\u636e\u7684\u957f\u5ea6\uff0c\u4e0d\u662f\u5b58\u50a8\u6570\u636e\u7684\u5927\u5c0f\uff1bchart(10)\u548cvarchar(10)\u768410\u8868\u793a\u5b58\u50a8\u6570\u636e\u7684\u5927\u5c0f\uff0c\u5373\u8868\u793a\u5b58\u50a8\u591a\u5c11\u4e2a\u5b57\u7b26\u3002</li> </ul> <p>int(10) 10\u4f4d\u7684\u6570\u636e\u957f\u5ea6 9999999999\uff0c\u536032\u4e2a\u5b57\u8282\uff0cint\u578b4\u4f4d   char(10) 10\u4f4d\u56fa\u5b9a\u5b57\u7b26\u4e32\uff0c\u4e0d\u8db3\u8865\u7a7a\u683c \u6700\u591a10\u4e2a\u5b57\u7b26   varchar(10) 10\u4f4d\u53ef\u53d8\u5b57\u7b26\u4e32\uff0c\u4e0d\u8db3\u8865\u7a7a\u683c \u6700\u591a10\u4e2a\u5b57\u7b26</p> <ul> <li> <p>char(10)\u8868\u793a\u5b58\u50a8\u5b9a\u957f\u768410\u4e2a\u5b57\u7b26\uff0c\u4e0d\u8db310\u4e2a\u5c31\u7528\u7a7a\u683c\u8865\u9f50\uff0c\u5360\u7528\u66f4\u591a\u7684\u5b58\u50a8\u7a7a\u95f4</p> </li> <li> <p>varchar(10)\u8868\u793a\u5b58\u50a810\u4e2a\u53d8\u957f\u7684\u5b57\u7b26\uff0c\u5b58\u50a8\u591a\u5c11\u4e2a\u5c31\u662f\u591a\u5c11\u4e2a\uff0c\u7a7a\u683c\u4e5f\u6309\u4e00\u4e2a\u5b57\u7b26\u5b58\u50a8\uff0c\u8fd9\u4e00\u70b9\u662f\u548cchar(10)\u7684\u7a7a\u683c\u4e0d\u540c\u7684\uff0cchar(10)\u7684\u7a7a\u683c\u8868\u793a\u5360\u4f4d\u4e0d\u7b97\u4e00\u4e2a\u5b57\u7b26</p> </li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#floatdouble","title":"FLOAT\u548cDOUBLE\u7684\u533a\u522b\u662f\u4ec0\u4e48\uff1f","text":"<ul> <li>FLOAT\u7c7b\u578b\u6570\u636e\u53ef\u4ee5\u5b58\u50a8\u81f3\u591a8\u4f4d\u5341\u8fdb\u5236\u6570\uff0c\u5e76\u5728\u5185\u5b58\u4e2d\u53604\u5b57\u8282\u3002</li> <li>DOUBLE\u7c7b\u578b\u6570\u636e\u53ef\u4ee5\u5b58\u50a8\u81f3\u591a18\u4f4d\u5341\u8fdb\u5236\u6570\uff0c\u5e76\u5728\u5185\u5b58\u4e2d\u53608\u5b57\u8282\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#dropdeletetruncate","title":"drop\u3001delete\u4e0etruncate\u7684\u533a\u522b","text":"<p>\u4e09\u8005\u90fd\u8868\u793a\u5220\u9664\uff0c\u4f46\u662f\u4e09\u8005\u6709\u4e00\u4e9b\u5dee\u522b\uff1a</p> Delete Truncate Drop \u7c7b\u578b \u5c5e\u4e8eDML \u5c5e\u4e8eDDL \u5c5e\u4e8eDDL \u56de\u6eda \u53ef\u56de\u6eda \u4e0d\u53ef\u56de\u6eda \u4e0d\u53ef\u56de\u6eda \u5220\u9664\u5185\u5bb9 \u8868\u7ed3\u6784\u8fd8\u5728\uff0c\u5220\u9664\u8868\u7684\u5168\u90e8\u6216\u8005\u4e00\u90e8\u5206\u6570\u636e\u884c \u8868\u7ed3\u6784\u8fd8\u5728\uff0c\u5220\u9664\u8868\u4e2d\u7684\u6240\u6709\u6570\u636e \u4ece\u6570\u636e\u5e93\u4e2d\u5220\u9664\u8868\uff0c\u6240\u6709\u7684\u6570\u636e\u884c\uff0c\u7d22\u5f15\u548c\u6743\u9650\u4e5f\u4f1a\u88ab\u5220\u9664 \u5220\u9664\u901f\u5ea6 \u5220\u9664\u901f\u5ea6\u6162\uff0c\u9700\u8981\u9010\u884c\u5220\u9664 \u5220\u9664\u901f\u5ea6\u5feb \u5220\u9664\u901f\u5ea6\u6700\u5feb <p>\u56e0\u6b64\uff0c\u5728\u4e0d\u518d\u9700\u8981\u4e00\u5f20\u8868\u7684\u65f6\u5019\uff0c\u7528drop\uff1b\u5728\u60f3\u5220\u9664\u90e8\u5206\u6570\u636e\u884c\u65f6\u5019\uff0c\u7528delete\uff1b\u5728\u4fdd\u7559\u8868\u800c\u5220\u9664\u6240\u6709\u6570\u636e\u7684\u65f6\u5019\u7528truncate\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#unionunion-all","title":"UNION\u4e0eUNION ALL\u7684\u533a\u522b\uff1f","text":"<ul> <li>\u5982\u679c\u4f7f\u7528UNION ALL\uff0c\u4e0d\u4f1a\u5408\u5e76\u91cd\u590d\u7684\u8bb0\u5f55\u884c</li> <li>\u6548\u7387 UNION \u9ad8\u4e8e UNION ALL</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#sql_4","title":"SQL\u4f18\u5316","text":""},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#sql_5","title":"\u5982\u4f55\u5b9a\u4f4d\u53ca\u4f18\u5316SQL\u8bed\u53e5\u7684\u6027\u80fd\u95ee\u9898\uff1f\u521b\u5efa\u7684\u7d22\u5f15\u6709\u6ca1\u6709\u88ab\u4f7f\u7528\u5230?\u6216\u8005\u8bf4\u600e\u4e48\u624d\u53ef\u4ee5\u77e5\u9053\u8fd9\u6761\u8bed\u53e5\u8fd0\u884c\u5f88\u6162\u7684\u539f\u56e0\uff1f","text":"<p>\u5bf9\u4e8e\u4f4e\u6027\u80fd\u7684SQL\u8bed\u53e5\u7684\u5b9a\u4f4d\uff0c\u6700\u91cd\u8981\u4e5f\u662f\u6700\u6709\u6548\u7684\u65b9\u6cd5\u5c31\u662f\u4f7f\u7528\u6267\u884c\u8ba1\u5212\uff0cMySQL\u63d0\u4f9b\u4e86explain\u547d\u4ee4\u6765\u67e5\u770b\u8bed\u53e5\u7684\u6267\u884c\u8ba1\u5212\u3002 \u6211\u4eec\u77e5\u9053\uff0c\u4e0d\u7ba1\u662f\u54ea\u79cd\u6570\u636e\u5e93\uff0c\u6216\u8005\u662f\u54ea\u79cd\u6570\u636e\u5e93\u5f15\u64ce\uff0c\u5728\u5bf9\u4e00\u6761SQL\u8bed\u53e5\u8fdb\u884c\u6267\u884c\u7684\u8fc7\u7a0b\u4e2d\u90fd\u4f1a\u505a\u5f88\u591a\u76f8\u5173\u7684\u4f18\u5316\uff0c\u5bf9\u4e8e\u67e5\u8be2\u8bed\u53e5\uff0c\u6700\u91cd\u8981\u7684\u4f18\u5316\u65b9\u5f0f\u5c31\u662f\u4f7f\u7528\u7d22\u5f15\u3002 \u800c\u6267\u884c\u8ba1\u5212\uff0c\u5c31\u662f\u663e\u793a\u6570\u636e\u5e93\u5f15\u64ce\u5bf9\u4e8eSQL\u8bed\u53e5\u7684\u6267\u884c\u7684\u8be6\u7ec6\u60c5\u51b5\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u662f\u5426\u4f7f\u7528\u7d22\u5f15\uff0c\u4f7f\u7528\u4ec0\u4e48\u7d22\u5f15\uff0c\u4f7f\u7528\u7684\u7d22\u5f15\u7684\u76f8\u5173\u4fe1\u606f\u7b49\u3002</p> <p></p> <p>\u6267\u884c\u8ba1\u5212\u5305\u542b\u7684\u4fe1\u606f id \u6709\u4e00\u7ec4\u6570\u5b57\u7ec4\u6210\u3002\u8868\u793a\u4e00\u4e2a\u67e5\u8be2\u4e2d\u5404\u4e2a\u5b50\u67e5\u8be2\u7684\u6267\u884c\u987a\u5e8f;</p> <ul> <li>id\u76f8\u540c\u6267\u884c\u987a\u5e8f\u7531\u4e0a\u81f3\u4e0b\u3002</li> <li>id\u4e0d\u540c\uff0cid\u503c\u8d8a\u5927\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u8d8a\u5148\u88ab\u6267\u884c\u3002</li> <li>id\u4e3anull\u65f6\u8868\u793a\u4e00\u4e2a\u7ed3\u679c\u96c6\uff0c\u4e0d\u9700\u8981\u4f7f\u7528\u5b83\u67e5\u8be2\uff0c\u5e38\u51fa\u73b0\u5728\u5305\u542bunion\u7b49\u67e5\u8be2\u8bed\u53e5\u4e2d\u3002</li> </ul> <p>select_type \u6bcf\u4e2a\u5b50\u67e5\u8be2\u7684\u67e5\u8be2\u7c7b\u578b\uff0c\u4e00\u4e9b\u5e38\u89c1\u7684\u67e5\u8be2\u7c7b\u578b\u3002</p> id select_type description 1 SIMPLE \u4e0d\u5305\u542b\u4efb\u4f55\u5b50\u67e5\u8be2\u6216union\u7b49\u67e5\u8be2 2 PRIMARY \u5305\u542b\u5b50\u67e5\u8be2\u6700\u5916\u5c42\u67e5\u8be2\u5c31\u663e\u793a\u4e3a PRIMARY 3 SUBQUERY \u5728select\u6216 where\u5b57\u53e5\u4e2d\u5305\u542b\u7684\u67e5\u8be2 4 DERIVED from\u5b57\u53e5\u4e2d\u5305\u542b\u7684\u67e5\u8be2 5 UNION \u51fa\u73b0\u5728union\u540e\u7684\u67e5\u8be2\u8bed\u53e5\u4e2d 6 UNION RESULT \u4eceUNION\u4e2d\u83b7\u53d6\u7ed3\u679c\u96c6\uff0c\u4f8b\u5982\u4e0a\u6587\u7684\u7b2c\u4e09\u4e2a\u4f8b\u5b50 <p>table \u67e5\u8be2\u7684\u6570\u636e\u8868\uff0c\u5f53\u4ece\u884d\u751f\u8868\u4e2d\u67e5\u6570\u636e\u65f6\u4f1a\u663e\u793a x \u8868\u793a\u5bf9\u5e94\u7684\u6267\u884c\u8ba1\u5212id partitions \u8868\u5206\u533a\u3001\u8868\u521b\u5efa\u7684\u65f6\u5019\u53ef\u4ee5\u6307\u5b9a\u901a\u8fc7\u90a3\u4e2a\u5217\u8fdb\u884c\u8868\u5206\u533a\u3002 \u4e3e\u4e2a\u4f8b\u5b50\uff1a</p> <p>create table tmp ( id int unsigned not null AUTO_INCREMENT, name varchar(255), PRIMARY KEY (id) ) engine = innodb partition by key (id) partitions 5;</p> <ul> <li>1</li> <li>2</li> <li>3</li> <li>4</li> <li>5</li> <li>6</li> </ul> <p>type(\u975e\u5e38\u91cd\u8981\uff0c\u53ef\u4ee5\u770b\u5230\u6709\u6ca1\u6709\u8d70\u7d22\u5f15) \u8bbf\u95ee\u7c7b\u578b</p> <ul> <li>ALL \u626b\u63cf\u5168\u8868\u6570\u636e</li> <li>index \u904d\u5386\u7d22\u5f15</li> <li>range \u7d22\u5f15\u8303\u56f4\u67e5\u627e</li> <li>index_subquery \u5728\u5b50\u67e5\u8be2\u4e2d\u4f7f\u7528 ref</li> <li>unique_subquery \u5728\u5b50\u67e5\u8be2\u4e2d\u4f7f\u7528 eq_ref</li> <li>ref_or_null \u5bf9Null\u8fdb\u884c\u7d22\u5f15\u7684\u4f18\u5316\u7684 ref</li> <li>fulltext \u4f7f\u7528\u5168\u6587\u7d22\u5f15</li> <li>ref \u4f7f\u7528\u975e\u552f\u4e00\u7d22\u5f15\u67e5\u627e\u6570\u636e</li> <li>eq_ref \u5728join\u67e5\u8be2\u4e2d\u4f7f\u7528PRIMARY KEYorUNIQUE NOT NULL\u7d22\u5f15\u5173\u8054\u3002</li> </ul> <p>possible_keys \u53ef\u80fd\u4f7f\u7528\u7684\u7d22\u5f15\uff0c\u6ce8\u610f\u4e0d\u4e00\u5b9a\u4f1a\u4f7f\u7528\u3002\u67e5\u8be2\u6d89\u53ca\u5230\u7684\u5b57\u6bb5\u4e0a\u82e5\u5b58\u5728\u7d22\u5f15\uff0c\u5219\u8be5\u7d22\u5f15\u5c06\u88ab\u5217\u51fa\u6765\u3002\u5f53\u8be5\u5217\u4e3a NULL\u65f6\u5c31\u8981\u8003\u8651\u5f53\u524d\u7684SQL\u662f\u5426\u9700\u8981\u4f18\u5316\u4e86\u3002</p> <p>key \u663e\u793aMySQL\u5728\u67e5\u8be2\u4e2d\u5b9e\u9645\u4f7f\u7528\u7684\u7d22\u5f15\uff0c\u82e5\u6ca1\u6709\u4f7f\u7528\u7d22\u5f15\uff0c\u663e\u793a\u4e3aNULL\u3002</p> <p>TIPS:\u67e5\u8be2\u4e2d\u82e5\u4f7f\u7528\u4e86\u8986\u76d6\u7d22\u5f15(\u8986\u76d6\u7d22\u5f15\uff1a\u7d22\u5f15\u7684\u6570\u636e\u8986\u76d6\u4e86\u9700\u8981\u67e5\u8be2\u7684\u6240\u6709\u6570\u636e)\uff0c\u5219\u8be5\u7d22\u5f15\u4ec5\u51fa\u73b0\u5728key\u5217\u8868\u4e2d</p> <p>key_length \u7d22\u5f15\u957f\u5ea6</p> <p>ref \u8868\u793a\u4e0a\u8ff0\u8868\u7684\u8fde\u63a5\u5339\u914d\u6761\u4ef6\uff0c\u5373\u54ea\u4e9b\u5217\u6216\u5e38\u91cf\u88ab\u7528\u4e8e\u67e5\u627e\u7d22\u5f15\u5217\u4e0a\u7684\u503c</p> <p>rows \u8fd4\u56de\u4f30\u7b97\u7684\u7ed3\u679c\u96c6\u6570\u76ee\uff0c\u5e76\u4e0d\u662f\u4e00\u4e2a\u51c6\u786e\u7684\u503c\u3002</p> <p>extra \u7684\u4fe1\u606f\u975e\u5e38\u4e30\u5bcc\uff0c\u5e38\u89c1\u7684\u6709\uff1a</p> <ol> <li>Using index \u4f7f\u7528\u8986\u76d6\u7d22\u5f15</li> <li>Using where \u4f7f\u7528\u4e86\u7528where\u5b50\u53e5\u6765\u8fc7\u6ee4\u7ed3\u679c\u96c6</li> <li>Using filesort \u4f7f\u7528\u6587\u4ef6\u6392\u5e8f\uff0c\u4f7f\u7528\u975e\u7d22\u5f15\u5217\u8fdb\u884c\u6392\u5e8f\u65f6\u51fa\u73b0\uff0c\u975e\u5e38\u6d88\u8017\u6027\u80fd\uff0c\u5c3d\u91cf\u4f18\u5316\u3002</li> <li>Using temporary \u4f7f\u7528\u4e86\u4e34\u65f6\u8868 sql\u4f18\u5316\u7684\u76ee\u6807\u53ef\u4ee5\u53c2\u8003\u963f\u91cc\u5f00\u53d1\u624b\u518c</li> </ol> <p>\u3010\u63a8\u8350\u3011SQL\u6027\u80fd\u4f18\u5316\u7684\u76ee\u6807\uff1a\u81f3\u5c11\u8981\u8fbe\u5230 range \u7ea7\u522b\uff0c\u8981\u6c42\u662fref\u7ea7\u522b\uff0c\u5982\u679c\u53ef\u4ee5\u662fconsts\u6700\u597d\u3002 \u8bf4\u660e\uff1a 1\uff09 consts \u5355\u8868\u4e2d\u6700\u591a\u53ea\u6709\u4e00\u4e2a\u5339\u914d\u884c\uff08\u4e3b\u952e\u6216\u8005\u552f\u4e00\u7d22\u5f15\uff09\uff0c\u5728\u4f18\u5316\u9636\u6bb5\u5373\u53ef\u8bfb\u53d6\u5230\u6570\u636e\u3002 2\uff09 ref \u6307\u7684\u662f\u4f7f\u7528\u666e\u901a\u7684\u7d22\u5f15\uff08normal index\uff09\u3002 3\uff09 range \u5bf9\u7d22\u5f15\u8fdb\u884c\u8303\u56f4\u68c0\u7d22\u3002 \u53cd\u4f8b\uff1aexplain\u8868\u7684\u7ed3\u679c\uff0ctype=index\uff0c\u7d22\u5f15\u7269\u7406\u6587\u4ef6\u5168\u626b\u63cf\uff0c\u901f\u5ea6\u975e\u5e38\u6162\uff0c\u8fd9\u4e2aindex\u7ea7\u522b\u6bd4\u8f83range\u8fd8\u4f4e\uff0c\u4e0e\u5168\u8868\u626b\u63cf\u662f\u5c0f\u5deb\u89c1\u5927\u5deb\u3002</p> <ul> <li>1</li> <li>2</li> <li>3</li> <li>4</li> <li>5</li> <li>6</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#sql_6","title":"SQL\u7684\u751f\u547d\u5468\u671f\uff1f","text":"<ol> <li> <p>\u5e94\u7528\u670d\u52a1\u5668\u4e0e\u6570\u636e\u5e93\u670d\u52a1\u5668\u5efa\u7acb\u4e00\u4e2a\u8fde\u63a5</p> </li> <li> <p>\u6570\u636e\u5e93\u8fdb\u7a0b\u62ff\u5230\u8bf7\u6c42sql</p> </li> <li> <p>\u89e3\u6790\u5e76\u751f\u6210\u6267\u884c\u8ba1\u5212\uff0c\u6267\u884c</p> </li> <li> <p>\u8bfb\u53d6\u6570\u636e\u5230\u5185\u5b58\u5e76\u8fdb\u884c\u903b\u8f91\u5904\u7406</p> </li> <li> <p>\u901a\u8fc7\u6b65\u9aa4\u4e00\u7684\u8fde\u63a5\uff0c\u53d1\u9001\u7ed3\u679c\u5230\u5ba2\u6237\u7aef</p> </li> <li> <p>\u5173\u6389\u8fde\u63a5\uff0c\u91ca\u653e\u8d44\u6e90</p> </li> </ol> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_47","title":"\u5927\u8868\u6570\u636e\u67e5\u8be2\uff0c\u600e\u4e48\u4f18\u5316","text":"<ol> <li>\u4f18\u5316shema\u3001sql\u8bed\u53e5+\u7d22\u5f15\uff1b</li> <li>\u7b2c\u4e8c\u52a0\u7f13\u5b58\uff0cmemcached, redis\uff1b</li> <li>\u4e3b\u4ece\u590d\u5236\uff0c\u8bfb\u5199\u5206\u79bb\uff1b</li> <li>\u5782\u76f4\u62c6\u5206\uff0c\u6839\u636e\u4f60\u6a21\u5757\u7684\u8026\u5408\u5ea6\uff0c\u5c06\u4e00\u4e2a\u5927\u7684\u7cfb\u7edf\u5206\u4e3a\u591a\u4e2a\u5c0f\u7684\u7cfb\u7edf\uff0c\u4e5f\u5c31\u662f\u5206\u5e03\u5f0f\u7cfb\u7edf\uff1b</li> <li>\u6c34\u5e73\u5207\u5206\uff0c\u9488\u5bf9\u6570\u636e\u91cf\u5927\u7684\u8868\uff0c\u8fd9\u4e00\u6b65\u6700\u9ebb\u70e6\uff0c\u6700\u80fd\u8003\u9a8c\u6280\u672f\u6c34\u5e73\uff0c\u8981\u9009\u62e9\u4e00\u4e2a\u5408\u7406\u7684sharding key, \u4e3a\u4e86\u6709\u597d\u7684\u67e5\u8be2\u6548\u7387\uff0c\u8868\u7ed3\u6784\u4e5f\u8981\u6539\u52a8\uff0c\u505a\u4e00\u5b9a\u7684\u5197\u4f59\uff0c\u5e94\u7528\u4e5f\u8981\u6539\uff0csql\u4e2d\u5c3d\u91cf\u5e26sharding key\uff0c\u5c06\u6570\u636e\u5b9a\u4f4d\u5230\u9650\u5b9a\u7684\u8868\u4e0a\u53bb\u67e5\uff0c\u800c\u4e0d\u662f\u626b\u63cf\u5168\u90e8\u7684\u8868\uff1b</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_48","title":"\u8d85\u5927\u5206\u9875\u600e\u4e48\u5904\u7406\uff1f","text":"<p>\u8d85\u5927\u7684\u5206\u9875\u4e00\u822c\u4ece\u4e24\u4e2a\u65b9\u5411\u4e0a\u6765\u89e3\u51b3.</p> <ul> <li>\u6570\u636e\u5e93\u5c42\u9762,\u8fd9\u4e5f\u662f\u6211\u4eec\u4e3b\u8981\u96c6\u4e2d\u5173\u6ce8\u7684(\u867d\u7136\u6536\u6548\u6ca1\u90a3\u4e48\u5927),\u7c7b\u4f3c\u4e8eselect * from table where age &gt; 20 limit 1000000,10\u8fd9\u79cd\u67e5\u8be2\u5176\u5b9e\u4e5f\u662f\u6709\u53ef\u4ee5\u4f18\u5316\u7684\u4f59\u5730\u7684. \u8fd9\u6761\u8bed\u53e5\u9700\u8981load1000000\u6570\u636e\u7136\u540e\u57fa\u672c\u4e0a\u5168\u90e8\u4e22\u5f03,\u53ea\u53d610\u6761\u5f53\u7136\u6bd4\u8f83\u6162. \u5f53\u65f6\u6211\u4eec\u53ef\u4ee5\u4fee\u6539\u4e3aselect * from table where id in (select id from table where age &gt; 20 limit 1000000,10).\u8fd9\u6837\u867d\u7136\u4e5fload\u4e86\u4e00\u767e\u4e07\u7684\u6570\u636e,\u4f46\u662f\u7531\u4e8e\u7d22\u5f15\u8986\u76d6,\u8981\u67e5\u8be2\u7684\u6240\u6709\u5b57\u6bb5\u90fd\u5728\u7d22\u5f15\u4e2d,\u6240\u4ee5\u901f\u5ea6\u4f1a\u5f88\u5feb. \u540c\u65f6\u5982\u679cID\u8fde\u7eed\u7684\u597d,\u6211\u4eec\u8fd8\u53ef\u4ee5select * from table where id &gt; 1000000 limit 10,\u6548\u7387\u4e5f\u662f\u4e0d\u9519\u7684,\u4f18\u5316\u7684\u53ef\u80fd\u6027\u6709\u8bb8\u591a\u79cd,\u4f46\u662f\u6838\u5fc3\u601d\u60f3\u90fd\u4e00\u6837,\u5c31\u662f\u51cf\u5c11load\u7684\u6570\u636e.</li> <li>\u4ece\u9700\u6c42\u7684\u89d2\u5ea6\u51cf\u5c11\u8fd9\u79cd\u8bf7\u6c42\u2026\u4e3b\u8981\u662f\u4e0d\u505a\u7c7b\u4f3c\u7684\u9700\u6c42(\u76f4\u63a5\u8df3\u8f6c\u5230\u51e0\u767e\u4e07\u9875\u4e4b\u540e\u7684\u5177\u4f53\u67d0\u4e00\u9875.\u53ea\u5141\u8bb8\u9010\u9875\u67e5\u770b\u6216\u8005\u6309\u7167\u7ed9\u5b9a\u7684\u8def\u7ebf\u8d70,\u8fd9\u6837\u53ef\u9884\u6d4b,\u53ef\u7f13\u5b58)\u4ee5\u53ca\u9632\u6b62ID\u6cc4\u6f0f\u4e14\u8fde\u7eed\u88ab\u4eba\u6076\u610f\u653b\u51fb.</li> </ul> <p>\u89e3\u51b3\u8d85\u5927\u5206\u9875,\u5176\u5b9e\u4e3b\u8981\u662f\u9760\u7f13\u5b58,\u53ef\u9884\u6d4b\u6027\u7684\u63d0\u524d\u67e5\u5230\u5185\u5bb9,\u7f13\u5b58\u81f3redis\u7b49k-V\u6570\u636e\u5e93\u4e2d,\u76f4\u63a5\u8fd4\u56de\u5373\u53ef.</p> <p>\u5728\u963f\u91cc\u5df4\u5df4\u300aJava\u5f00\u53d1\u624b\u518c\u300b\u4e2d,\u5bf9\u8d85\u5927\u5206\u9875\u7684\u89e3\u51b3\u529e\u6cd5\u662f\u7c7b\u4f3c\u4e8e\u4e0a\u9762\u63d0\u5230\u7684\u7b2c\u4e00\u79cd.</p> <p>\u3010\u63a8\u8350\u3011\u5229\u7528\u5ef6\u8fdf\u5173\u8054\u6216\u8005\u5b50\u67e5\u8be2\u4f18\u5316\u8d85\u591a\u5206\u9875\u573a\u666f\u3002 \u8bf4\u660e\uff1aMySQL\u5e76\u4e0d\u662f\u8df3\u8fc7offset\u884c\uff0c\u800c\u662f\u53d6offset+N\u884c\uff0c\u7136\u540e\u8fd4\u56de\u653e\u5f03\u524doffset\u884c\uff0c\u8fd4\u56deN\u884c\uff0c\u90a3\u5f53offset\u7279\u522b\u5927\u7684\u65f6\u5019\uff0c\u6548\u7387\u5c31\u975e\u5e38\u7684\u4f4e\u4e0b\uff0c\u8981\u4e48\u63a7\u5236\u8fd4\u56de\u7684\u603b\u9875\u6570\uff0c\u8981\u4e48\u5bf9\u8d85\u8fc7\u7279\u5b9a\u9608\u503c\u7684\u9875\u6570\u8fdb\u884cSQL\u6539\u5199\u3002 \u6b63\u4f8b\uff1a\u5148\u5feb\u901f\u5b9a\u4f4d\u9700\u8981\u83b7\u53d6\u7684id\u6bb5\uff0c\u7136\u540e\u518d\u5173\u8054\uff1a SELECT a.* FROM \u88681 a, (select id from \u88681 where \u6761\u4ef6 LIMIT 100000,20 ) b where a.id=b.id</p> <ul> <li>1</li> <li>2</li> <li>3</li> <li>4</li> <li>5</li> <li>6</li> <li>7</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#mysql_8","title":"mysql \u5206\u9875","text":"<p>LIMIT \u5b50\u53e5\u53ef\u4ee5\u88ab\u7528\u4e8e\u5f3a\u5236 SELECT \u8bed\u53e5\u8fd4\u56de\u6307\u5b9a\u7684\u8bb0\u5f55\u6570\u3002LIMIT \u63a5\u53d7\u4e00\u4e2a\u6216\u4e24\u4e2a\u6570\u5b57\u53c2\u6570\u3002\u53c2\u6570\u5fc5\u987b\u662f\u4e00\u4e2a\u6574\u6570\u5e38\u91cf\u3002\u5982\u679c\u7ed9\u5b9a\u4e24\u4e2a\u53c2\u6570\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u6307\u5b9a\u7b2c\u4e00\u4e2a\u8fd4\u56de\u8bb0\u5f55\u884c\u7684\u504f\u79fb\u91cf\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6307\u5b9a\u8fd4\u56de\u8bb0\u5f55\u884c\u7684\u6700\u5927\u6570\u76ee\u3002\u521d\u59cb\u8bb0\u5f55\u884c\u7684\u504f\u79fb\u91cf\u662f 0(\u800c\u4e0d\u662f 1)</p> <p>mysql&gt; SELECT * FROM table LIMIT 5,10; // \u68c0\u7d22\u8bb0\u5f55\u884c 6-15</p> <ul> <li>1</li> </ul> <p>\u4e3a\u4e86\u68c0\u7d22\u4ece\u67d0\u4e00\u4e2a\u504f\u79fb\u91cf\u5230\u8bb0\u5f55\u96c6\u7684\u7ed3\u675f\u6240\u6709\u7684\u8bb0\u5f55\u884c\uff0c\u53ef\u4ee5\u6307\u5b9a\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a -1\uff1a</p> <p>mysql&gt; SELECT * FROM table LIMIT 95,-1; // \u68c0\u7d22\u8bb0\u5f55\u884c 96-last.</p> <ul> <li>1</li> </ul> <p>\u5982\u679c\u53ea\u7ed9\u5b9a\u4e00\u4e2a\u53c2\u6570\uff0c\u5b83\u8868\u793a\u8fd4\u56de\u6700\u5927\u7684\u8bb0\u5f55\u884c\u6570\u76ee\uff1a</p> <p>mysql&gt; SELECT * FROM table LIMIT 5; //\u68c0\u7d22\u524d 5 \u4e2a\u8bb0\u5f55\u884c</p> <ul> <li>1</li> </ul> <p>\u6362\u53e5\u8bdd\u8bf4\uff0cLIMIT n \u7b49\u4ef7\u4e8e LIMIT 0,n\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_49","title":"\u6162\u67e5\u8be2\u65e5\u5fd7","text":"<p>\u7528\u4e8e\u8bb0\u5f55\u6267\u884c\u65f6\u95f4\u8d85\u8fc7\u67d0\u4e2a\u4e34\u754c\u503c\u7684SQL\u65e5\u5fd7\uff0c\u7528\u4e8e\u5feb\u901f\u5b9a\u4f4d\u6162\u67e5\u8be2\uff0c\u4e3a\u6211\u4eec\u7684\u4f18\u5316\u505a\u53c2\u8003\u3002</p> <p>\u5f00\u542f\u6162\u67e5\u8be2\u65e5\u5fd7</p> <p>\u914d\u7f6e\u9879\uff1aslow_query_log</p> <p>\u53ef\u4ee5\u4f7f\u7528show variables like \u2018slov_query_log\u2019\u67e5\u770b\u662f\u5426\u5f00\u542f\uff0c\u5982\u679c\u72b6\u6001\u503c\u4e3aOFF\uff0c\u53ef\u4ee5\u4f7f\u7528set GLOBAL slow_query_log = on\u6765\u5f00\u542f\uff0c\u5b83\u4f1a\u5728datadir\u4e0b\u4ea7\u751f\u4e00\u4e2axxx-slow.log\u7684\u6587\u4ef6\u3002</p> <p>\u8bbe\u7f6e\u4e34\u754c\u65f6\u95f4</p> <p>\u914d\u7f6e\u9879\uff1along_query_time</p> <p>\u67e5\u770b\uff1ashow VARIABLES like 'long_query_time'\uff0c\u5355\u4f4d\u79d2</p> <p>\u8bbe\u7f6e\uff1aset long_query_time=0.5</p> <p>\u5b9e\u64cd\u65f6\u5e94\u8be5\u4ece\u957f\u65f6\u95f4\u8bbe\u7f6e\u5230\u77ed\u7684\u65f6\u95f4\uff0c\u5373\u5c06\u6700\u6162\u7684SQL\u4f18\u5316\u6389</p> <p>\u67e5\u770b\u65e5\u5fd7\uff0c\u4e00\u65e6SQL\u8d85\u8fc7\u4e86\u6211\u4eec\u8bbe\u7f6e\u7684\u4e34\u754c\u65f6\u95f4\u5c31\u4f1a\u88ab\u8bb0\u5f55\u5230xxx-slow.log\u4e2d</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#sql_7","title":"\u5173\u5fc3\u8fc7\u4e1a\u52a1\u7cfb\u7edf\u91cc\u9762\u7684sql\u8017\u65f6\u5417\uff1f\u7edf\u8ba1\u8fc7\u6162\u67e5\u8be2\u5417\uff1f\u5bf9\u6162\u67e5\u8be2\u90fd\u600e\u4e48\u4f18\u5316\u8fc7\uff1f","text":"<p>\u5728\u4e1a\u52a1\u7cfb\u7edf\u4e2d\uff0c\u9664\u4e86\u4f7f\u7528\u4e3b\u952e\u8fdb\u884c\u7684\u67e5\u8be2\uff0c\u5176\u4ed6\u7684\u6211\u90fd\u4f1a\u5728\u6d4b\u8bd5\u5e93\u4e0a\u6d4b\u8bd5\u5176\u8017\u65f6\uff0c\u6162\u67e5\u8be2\u7684\u7edf\u8ba1\u4e3b\u8981\u7531\u8fd0\u7ef4\u5728\u505a\uff0c\u4f1a\u5b9a\u671f\u5c06\u4e1a\u52a1\u4e2d\u7684\u6162\u67e5\u8be2\u53cd\u9988\u7ed9\u6211\u4eec\u3002</p> <p>\u6162\u67e5\u8be2\u7684\u4f18\u5316\u9996\u5148\u8981\u641e\u660e\u767d\u6162\u7684\u539f\u56e0\u662f\u4ec0\u4e48\uff1f \u662f\u67e5\u8be2\u6761\u4ef6\u6ca1\u6709\u547d\u4e2d\u7d22\u5f15\uff1f\u662fload\u4e86\u4e0d\u9700\u8981\u7684\u6570\u636e\u5217\uff1f\u8fd8\u662f\u6570\u636e\u91cf\u592a\u5927\uff1f</p> <p>\u6240\u4ee5\u4f18\u5316\u4e5f\u662f\u9488\u5bf9\u8fd9\u4e09\u4e2a\u65b9\u5411\u6765\u7684\uff0c</p> <ul> <li>\u9996\u5148\u5206\u6790\u8bed\u53e5\uff0c\u770b\u770b\u662f\u5426load\u4e86\u989d\u5916\u7684\u6570\u636e\uff0c\u53ef\u80fd\u662f\u67e5\u8be2\u4e86\u591a\u4f59\u7684\u884c\u5e76\u4e14\u629b\u5f03\u6389\u4e86\uff0c\u53ef\u80fd\u662f\u52a0\u8f7d\u4e86\u8bb8\u591a\u7ed3\u679c\u4e2d\u5e76\u4e0d\u9700\u8981\u7684\u5217\uff0c\u5bf9\u8bed\u53e5\u8fdb\u884c\u5206\u6790\u4ee5\u53ca\u91cd\u5199\u3002</li> <li>\u5206\u6790\u8bed\u53e5\u7684\u6267\u884c\u8ba1\u5212\uff0c\u7136\u540e\u83b7\u5f97\u5176\u4f7f\u7528\u7d22\u5f15\u7684\u60c5\u51b5\uff0c\u4e4b\u540e\u4fee\u6539\u8bed\u53e5\u6216\u8005\u4fee\u6539\u7d22\u5f15\uff0c\u4f7f\u5f97\u8bed\u53e5\u53ef\u4ee5\u5c3d\u53ef\u80fd\u7684\u547d\u4e2d\u7d22\u5f15\u3002</li> <li>\u5982\u679c\u5bf9\u8bed\u53e5\u7684\u4f18\u5316\u5df2\u7ecf\u65e0\u6cd5\u8fdb\u884c\uff0c\u53ef\u4ee5\u8003\u8651\u8868\u4e2d\u7684\u6570\u636e\u91cf\u662f\u5426\u592a\u5927\uff0c\u5982\u679c\u662f\u7684\u8bdd\u53ef\u4ee5\u8fdb\u884c\u6a2a\u5411\u6216\u8005\u7eb5\u5411\u7684\u5206\u8868\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_50","title":"\u4e3a\u4ec0\u4e48\u8981\u5c3d\u91cf\u8bbe\u5b9a\u4e00\u4e2a\u4e3b\u952e\uff1f","text":"<p>\u4e3b\u952e\u662f\u6570\u636e\u5e93\u786e\u4fdd\u6570\u636e\u884c\u5728\u6574\u5f20\u8868\u552f\u4e00\u6027\u7684\u4fdd\u969c\uff0c\u5373\u4f7f\u4e1a\u52a1\u4e0a\u672c\u5f20\u8868\u6ca1\u6709\u4e3b\u952e\uff0c\u4e5f\u5efa\u8bae\u6dfb\u52a0\u4e00\u4e2a\u81ea\u589e\u957f\u7684ID\u5217\u4f5c\u4e3a\u4e3b\u952e\u3002\u8bbe\u5b9a\u4e86\u4e3b\u952e\u4e4b\u540e\uff0c\u5728\u540e\u7eed\u7684\u5220\u6539\u67e5\u7684\u65f6\u5019\u53ef\u80fd\u66f4\u52a0\u5feb\u901f\u4ee5\u53ca\u786e\u4fdd\u64cd\u4f5c\u6570\u636e\u8303\u56f4\u5b89\u5168\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#iduuid","title":"\u4e3b\u952e\u4f7f\u7528\u81ea\u589eID\u8fd8\u662fUUID\uff1f","text":"<p>\u63a8\u8350\u4f7f\u7528\u81ea\u589eID\uff0c\u4e0d\u8981\u4f7f\u7528UUID\u3002</p> <p>\u56e0\u4e3a\u5728InnoDB\u5b58\u50a8\u5f15\u64ce\u4e2d\uff0c\u4e3b\u952e\u7d22\u5f15\u662f\u4f5c\u4e3a\u805a\u7c07\u7d22\u5f15\u5b58\u5728\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e3b\u952e\u7d22\u5f15\u7684B+\u6811\u53f6\u5b50\u8282\u70b9\u4e0a\u5b58\u50a8\u4e86\u4e3b\u952e\u7d22\u5f15\u4ee5\u53ca\u5168\u90e8\u7684\u6570\u636e(\u6309\u7167\u987a\u5e8f)\uff0c\u5982\u679c\u4e3b\u952e\u7d22\u5f15\u662f\u81ea\u589eID\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u4e0d\u65ad\u5411\u540e\u6392\u5217\u5373\u53ef\uff0c\u5982\u679c\u662fUUID\uff0c\u7531\u4e8e\u5230\u6765\u7684ID\u4e0e\u539f\u6765\u7684\u5927\u5c0f\u4e0d\u786e\u5b9a\uff0c\u4f1a\u9020\u6210\u975e\u5e38\u591a\u7684\u6570\u636e\u63d2\u5165\uff0c\u6570\u636e\u79fb\u52a8\uff0c\u7136\u540e\u5bfc\u81f4\u4ea7\u751f\u5f88\u591a\u7684\u5185\u5b58\u788e\u7247\uff0c\u8fdb\u800c\u9020\u6210\u63d2\u5165\u6027\u80fd\u7684\u4e0b\u964d\u3002</p> <p>\u603b\u4e4b\uff0c\u5728\u6570\u636e\u91cf\u5927\u4e00\u4e9b\u7684\u60c5\u51b5\u4e0b\uff0c\u7528\u81ea\u589e\u4e3b\u952e\u6027\u80fd\u4f1a\u597d\u4e00\u4e9b\u3002</p> <p>\u5173\u4e8e\u4e3b\u952e\u662f\u805a\u7c07\u7d22\u5f15\uff0c\u5982\u679c\u6ca1\u6709\u4e3b\u952e\uff0cInnoDB\u4f1a\u9009\u62e9\u4e00\u4e2a\u552f\u4e00\u952e\u6765\u4f5c\u4e3a\u805a\u7c07\u7d22\u5f15\uff0c\u5982\u679c\u6ca1\u6709\u552f\u4e00\u952e\uff0c\u4f1a\u751f\u6210\u4e00\u4e2a\u9690\u5f0f\u7684\u4e3b\u952e\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#not-null","title":"\u5b57\u6bb5\u4e3a\u4ec0\u4e48\u8981\u6c42\u5b9a\u4e49\u4e3anot null\uff1f","text":"<p>null\u503c\u4f1a\u5360\u7528\u66f4\u591a\u7684\u5b57\u8282\uff0c\u4e14\u4f1a\u5728\u7a0b\u5e8f\u4e2d\u9020\u6210\u5f88\u591a\u4e0e\u9884\u671f\u4e0d\u7b26\u7684\u60c5\u51b5\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_51","title":"\u5982\u679c\u8981\u5b58\u50a8\u7528\u6237\u7684\u5bc6\u7801\u6563\u5217\uff0c\u5e94\u8be5\u4f7f\u7528\u4ec0\u4e48\u5b57\u6bb5\u8fdb\u884c\u5b58\u50a8\uff1f","text":"<p>\u5bc6\u7801\u6563\u5217\uff0c\u76d0\uff0c\u7528\u6237\u8eab\u4efd\u8bc1\u53f7\u7b49\u56fa\u5b9a\u957f\u5ea6\u7684\u5b57\u7b26\u4e32\u5e94\u8be5\u4f7f\u7528char\u800c\u4e0d\u662fvarchar\u6765\u5b58\u50a8\uff0c\u8fd9\u6837\u53ef\u4ee5\u8282\u7701\u7a7a\u95f4\u4e14\u63d0\u9ad8\u68c0\u7d22\u6548\u7387\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_52","title":"\u4f18\u5316\u67e5\u8be2\u8fc7\u7a0b\u4e2d\u7684\u6570\u636e\u8bbf\u95ee","text":"<ul> <li>\u8bbf\u95ee\u6570\u636e\u592a\u591a\u5bfc\u81f4\u67e5\u8be2\u6027\u80fd\u4e0b\u964d</li> <li>\u786e\u5b9a\u5e94\u7528\u7a0b\u5e8f\u662f\u5426\u5728\u68c0\u7d22\u5927\u91cf\u8d85\u8fc7\u9700\u8981\u7684\u6570\u636e\uff0c\u53ef\u80fd\u662f\u592a\u591a\u884c\u6216\u5217</li> <li>\u786e\u8ba4MySQL\u670d\u52a1\u5668\u662f\u5426\u5728\u5206\u6790\u5927\u91cf\u4e0d\u5fc5\u8981\u7684\u6570\u636e\u884c</li> <li>\u907f\u514d\u72af\u5982\u4e0bSQL\u8bed\u53e5\u9519\u8bef</li> <li>\u67e5\u8be2\u4e0d\u9700\u8981\u7684\u6570\u636e\u3002\u89e3\u51b3\u529e\u6cd5\uff1a\u4f7f\u7528limit\u89e3\u51b3</li> <li>\u591a\u8868\u5173\u8054\u8fd4\u56de\u5168\u90e8\u5217\u3002\u89e3\u51b3\u529e\u6cd5\uff1a\u6307\u5b9a\u5217\u540d</li> <li>\u603b\u662f\u8fd4\u56de\u5168\u90e8\u5217\u3002\u89e3\u51b3\u529e\u6cd5\uff1a\u907f\u514d\u4f7f\u7528SELECT *</li> <li>\u91cd\u590d\u67e5\u8be2\u76f8\u540c\u7684\u6570\u636e\u3002\u89e3\u51b3\u529e\u6cd5\uff1a\u53ef\u4ee5\u7f13\u5b58\u6570\u636e\uff0c\u4e0b\u6b21\u76f4\u63a5\u8bfb\u53d6\u7f13\u5b58</li> <li>\u662f\u5426\u5728\u626b\u63cf\u989d\u5916\u7684\u8bb0\u5f55\u3002\u89e3\u51b3\u529e\u6cd5\uff1a</li> <li>\u4f7f\u7528explain\u8fdb\u884c\u5206\u6790\uff0c\u5982\u679c\u53d1\u73b0\u67e5\u8be2\u9700\u8981\u626b\u63cf\u5927\u91cf\u7684\u6570\u636e\uff0c\u4f46\u53ea\u8fd4\u56de\u5c11\u6570\u7684\u884c\uff0c\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u6280\u5de7\u53bb\u4f18\u5316\uff1a</li> <li>\u4f7f\u7528\u7d22\u5f15\u8986\u76d6\u626b\u63cf\uff0c\u628a\u6240\u6709\u7684\u5217\u90fd\u653e\u5230\u7d22\u5f15\u4e2d\uff0c\u8fd9\u6837\u5b58\u50a8\u5f15\u64ce\u4e0d\u9700\u8981\u56de\u8868\u83b7\u53d6\u5bf9\u5e94\u884c\u5c31\u53ef\u4ee5\u8fd4\u56de\u7ed3\u679c\u3002</li> <li>\u6539\u53d8\u6570\u636e\u5e93\u548c\u8868\u7684\u7ed3\u6784\uff0c\u4fee\u6539\u6570\u636e\u8868\u8303\u5f0f</li> <li>\u91cd\u5199SQL\u8bed\u53e5\uff0c\u8ba9\u4f18\u5316\u5668\u53ef\u4ee5\u4ee5\u66f4\u4f18\u7684\u65b9\u5f0f\u6267\u884c\u67e5\u8be2\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_53","title":"\u4f18\u5316\u957f\u96be\u7684\u67e5\u8be2\u8bed\u53e5","text":"<ul> <li>\u4e00\u4e2a\u590d\u6742\u67e5\u8be2\u8fd8\u662f\u591a\u4e2a\u7b80\u5355\u67e5\u8be2</li> <li>MySQL\u5185\u90e8\u6bcf\u79d2\u80fd\u626b\u63cf\u5185\u5b58\u4e2d\u4e0a\u767e\u4e07\u884c\u6570\u636e\uff0c\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u54cd\u5e94\u6570\u636e\u7ed9\u5ba2\u6237\u7aef\u5c31\u8981\u6162\u5f97\u591a</li> <li>\u4f7f\u7528\u5c3d\u53ef\u80fd\u5c0f\u7684\u67e5\u8be2\u662f\u597d\u7684\uff0c\u4f46\u662f\u6709\u65f6\u5c06\u4e00\u4e2a\u5927\u7684\u67e5\u8be2\u5206\u89e3\u4e3a\u591a\u4e2a\u5c0f\u7684\u67e5\u8be2\u662f\u5f88\u6709\u5fc5\u8981\u7684\u3002</li> <li>\u5207\u5206\u67e5\u8be2</li> <li>\u5c06\u4e00\u4e2a\u5927\u7684\u67e5\u8be2\u5206\u4e3a\u591a\u4e2a\u5c0f\u7684\u76f8\u540c\u7684\u67e5\u8be2</li> <li>\u4e00\u6b21\u6027\u5220\u96641000\u4e07\u7684\u6570\u636e\u8981\u6bd4\u4e00\u6b21\u5220\u96641\u4e07\uff0c\u6682\u505c\u4e00\u4f1a\u7684\u65b9\u6848\u66f4\u52a0\u635f\u8017\u670d\u52a1\u5668\u5f00\u9500\u3002</li> <li>\u5206\u89e3\u5173\u8054\u67e5\u8be2\uff0c\u8ba9\u7f13\u5b58\u7684\u6548\u7387\u66f4\u9ad8\u3002</li> <li>\u6267\u884c\u5355\u4e2a\u67e5\u8be2\u53ef\u4ee5\u51cf\u5c11\u9501\u7684\u7ade\u4e89\u3002</li> <li>\u5728\u5e94\u7528\u5c42\u505a\u5173\u8054\u66f4\u5bb9\u6613\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u62c6\u5206\u3002</li> <li>\u67e5\u8be2\u6548\u7387\u4f1a\u6709\u5927\u5e45\u63d0\u5347\u3002</li> <li>\u8f83\u5c11\u5197\u4f59\u8bb0\u5f55\u7684\u67e5\u8be2\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_54","title":"\u4f18\u5316\u7279\u5b9a\u7c7b\u578b\u7684\u67e5\u8be2\u8bed\u53e5","text":"<ul> <li>count(*)\u4f1a\u5ffd\u7565\u6240\u6709\u7684\u5217\uff0c\u76f4\u63a5\u7edf\u8ba1\u6240\u6709\u5217\u6570\uff0c\u4e0d\u8981\u4f7f\u7528count(\u5217\u540d)</li> <li>MyISAM\u4e2d\uff0c\u6ca1\u6709\u4efb\u4f55where\u6761\u4ef6\u7684count(*)\u975e\u5e38\u5feb\u3002</li> <li>\u5f53\u6709where\u6761\u4ef6\u65f6\uff0cMyISAM\u7684count\u7edf\u8ba1\u4e0d\u4e00\u5b9a\u6bd4\u5176\u5b83\u5f15\u64ce\u5feb\u3002</li> <li>\u53ef\u4ee5\u4f7f\u7528explain\u67e5\u8be2\u8fd1\u4f3c\u503c\uff0c\u7528\u8fd1\u4f3c\u503c\u66ff\u4ee3count(*)</li> <li>\u589e\u52a0\u6c47\u603b\u8868</li> <li>\u4f7f\u7528\u7f13\u5b58</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_55","title":"\u4f18\u5316\u5173\u8054\u67e5\u8be2","text":"<ul> <li>\u786e\u5b9aON\u6216\u8005USING\u5b50\u53e5\u4e2d\u662f\u5426\u6709\u7d22\u5f15\u3002</li> <li>\u786e\u4fddGROUP BY\u548cORDER BY\u53ea\u6709\u4e00\u4e2a\u8868\u4e2d\u7684\u5217\uff0c\u8fd9\u6837MySQL\u624d\u6709\u53ef\u80fd\u4f7f\u7528\u7d22\u5f15\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_56","title":"\u4f18\u5316\u5b50\u67e5\u8be2","text":"<ul> <li>\u7528\u5173\u8054\u67e5\u8be2\u66ff\u4ee3</li> <li>\u4f18\u5316GROUP BY\u548cDISTINCT</li> <li>\u8fd9\u4e24\u79cd\u67e5\u8be2\u636e\u53ef\u4ee5\u4f7f\u7528\u7d22\u5f15\u6765\u4f18\u5316\uff0c\u662f\u6700\u6709\u6548\u7684\u4f18\u5316\u65b9\u6cd5</li> <li>\u5173\u8054\u67e5\u8be2\u4e2d\uff0c\u4f7f\u7528\u6807\u8bc6\u5217\u5206\u7ec4\u7684\u6548\u7387\u66f4\u9ad8</li> <li>\u5982\u679c\u4e0d\u9700\u8981ORDER BY\uff0c\u8fdb\u884cGROUP BY\u65f6\u52a0ORDER BY NULL\uff0cMySQL\u4e0d\u4f1a\u518d\u8fdb\u884c\u6587\u4ef6\u6392\u5e8f\u3002</li> <li>WITH ROLLUP\u8d85\u7ea7\u805a\u5408\uff0c\u53ef\u4ee5\u632a\u5230\u5e94\u7528\u7a0b\u5e8f\u5904\u7406</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#limit","title":"\u4f18\u5316LIMIT\u5206\u9875","text":"<ul> <li>LIMIT\u504f\u79fb\u91cf\u5927\u7684\u65f6\u5019\uff0c\u67e5\u8be2\u6548\u7387\u8f83\u4f4e</li> <li>\u53ef\u4ee5\u8bb0\u5f55\u4e0a\u6b21\u67e5\u8be2\u7684\u6700\u5927ID\uff0c\u4e0b\u6b21\u67e5\u8be2\u65f6\u76f4\u63a5\u6839\u636e\u8be5ID\u6765\u67e5\u8be2</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#union","title":"\u4f18\u5316UNION\u67e5\u8be2","text":"<ul> <li>UNION ALL\u7684\u6548\u7387\u9ad8\u4e8eUNION</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#where","title":"\u4f18\u5316WHERE\u5b50\u53e5","text":"<p>\u89e3\u9898\u65b9\u6cd5</p> <p>\u5bf9\u4e8e\u6b64\u7c7b\u8003\u9898\uff0c\u5148\u8bf4\u660e\u5982\u4f55\u5b9a\u4f4d\u4f4e\u6548SQL\u8bed\u53e5\uff0c\u7136\u540e\u6839\u636eSQL\u8bed\u53e5\u53ef\u80fd\u4f4e\u6548\u7684\u539f\u56e0\u505a\u6392\u67e5\uff0c\u5148\u4ece\u7d22\u5f15\u7740\u624b\uff0c\u5982\u679c\u7d22\u5f15\u6ca1\u6709\u95ee\u9898\uff0c\u8003\u8651\u4ee5\u4e0a\u51e0\u4e2a\u65b9\u9762\uff0c\u6570\u636e\u8bbf\u95ee\u7684\u95ee\u9898\uff0c\u957f\u96be\u67e5\u8be2\u53e5\u7684\u95ee\u9898\u8fd8\u662f\u4e00\u4e9b\u7279\u5b9a\u7c7b\u578b\u4f18\u5316\u7684\u95ee\u9898\uff0c\u9010\u4e00\u56de\u7b54\u3002</p> <p>SQL\u8bed\u53e5\u4f18\u5316\u7684\u4e00\u4e9b\u65b9\u6cd5\uff1f</p> <ul> <li>1.\u5bf9\u67e5\u8be2\u8fdb\u884c\u4f18\u5316\uff0c\u5e94\u5c3d\u91cf\u907f\u514d\u5168\u8868\u626b\u63cf\uff0c\u9996\u5148\u5e94\u8003\u8651\u5728 where \u53ca order by \u6d89\u53ca\u7684\u5217\u4e0a\u5efa\u7acb\u7d22\u5f15\u3002</li> <li>2.\u5e94\u5c3d\u91cf\u907f\u514d\u5728 where \u5b50\u53e5\u4e2d\u5bf9\u5b57\u6bb5\u8fdb\u884c null \u503c\u5224\u65ad\uff0c\u5426\u5219\u5c06\u5bfc\u81f4\u5f15\u64ce\u653e\u5f03\u4f7f\u7528\u7d22\u5f15\u800c\u8fdb\u884c\u5168\u8868\u626b\u63cf\uff0c\u5982\uff1a</li> </ul> <p>select id from t where num is null -- \u53ef\u4ee5\u5728num\u4e0a\u8bbe\u7f6e\u9ed8\u8ba4\u503c0\uff0c\u786e\u4fdd\u8868\u4e2dnum\u5217\u6ca1\u6709null\u503c\uff0c\u7136\u540e\u8fd9\u6837\u67e5\u8be2\uff1a select id from t where num=</p> <ul> <li>1</li> <li>2</li> <li> <p>3</p> </li> <li> <p>3.\u5e94\u5c3d\u91cf\u907f\u514d\u5728 where \u5b50\u53e5\u4e2d\u4f7f\u7528!=\u6216&lt;&gt;\u64cd\u4f5c\u7b26\uff0c\u5426\u5219\u5f15\u64ce\u5c06\u653e\u5f03\u4f7f\u7528\u7d22\u5f15\u800c\u8fdb\u884c\u5168\u8868\u626b\u63cf\u3002</p> </li> <li>4.\u5e94\u5c3d\u91cf\u907f\u514d\u5728 where \u5b50\u53e5\u4e2d\u4f7f\u7528or \u6765\u8fde\u63a5\u6761\u4ef6\uff0c\u5426\u5219\u5c06\u5bfc\u81f4\u5f15\u64ce\u653e\u5f03\u4f7f\u7528\u7d22\u5f15\u800c\u8fdb\u884c\u5168\u8868\u626b\u63cf\uff0c\u5982\uff1a</li> </ul> <p>select id from t where num=10 or num=20 -- \u53ef\u4ee5\u8fd9\u6837\u67e5\u8be2\uff1a select id from t where num=10 union all select id from t where num=20</p> <ul> <li>1</li> <li>2</li> <li> <p>3</p> </li> <li> <p>5.in \u548c not in \u4e5f\u8981\u614e\u7528\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u5168\u8868\u626b\u63cf\uff0c\u5982\uff1a</p> </li> </ul> <p>select id from t where num in(1,2,3) -- \u5bf9\u4e8e\u8fde\u7eed\u7684\u6570\u503c\uff0c\u80fd\u7528 between \u5c31\u4e0d\u8981\u7528 in \u4e86\uff1a select id from t where num between 1 and 3</p> <ul> <li>1</li> <li>2</li> <li> <p>3</p> </li> <li> <p>6.\u4e0b\u9762\u7684\u67e5\u8be2\u4e5f\u5c06\u5bfc\u81f4\u5168\u8868\u626b\u63cf\uff1aselect id from t where name like \u2018%\u674e%\u2019\u82e5\u8981\u63d0\u9ad8\u6548\u7387\uff0c\u53ef\u4ee5\u8003\u8651\u5168\u6587\u68c0\u7d22\u3002</p> </li> <li>7.\u5982\u679c\u5728 where \u5b50\u53e5\u4e2d\u4f7f\u7528\u53c2\u6570\uff0c\u4e5f\u4f1a\u5bfc\u81f4\u5168\u8868\u626b\u63cf\u3002\u56e0\u4e3aSQL\u53ea\u6709\u5728\u8fd0\u884c\u65f6\u624d\u4f1a\u89e3\u6790\u5c40\u90e8\u53d8\u91cf\uff0c\u4f46\u4f18\u5316\u7a0b\u5e8f\u4e0d\u80fd\u5c06\u8bbf\u95ee\u8ba1\u5212\u7684\u9009\u62e9\u63a8\u8fdf\u5230\u8fd0\u884c\u65f6\uff1b\u5b83\u5fc5\u987b\u5728\u7f16\u8bd1\u65f6\u8fdb\u884c\u9009\u62e9\u3002\u7136 \u800c\uff0c\u5982\u679c\u5728\u7f16\u8bd1\u65f6\u5efa\u7acb\u8bbf\u95ee\u8ba1\u5212\uff0c\u53d8\u91cf\u7684\u503c\u8fd8\u662f\u672a\u77e5\u7684\uff0c\u56e0\u800c\u65e0\u6cd5\u4f5c\u4e3a\u7d22\u5f15\u9009\u62e9\u7684\u8f93\u5165\u9879\u3002\u5982\u4e0b\u9762\u8bed\u53e5\u5c06\u8fdb\u884c\u5168\u8868\u626b\u63cf\uff1a</li> </ul> <p>select id from t where num=@num -- \u53ef\u4ee5\u6539\u4e3a\u5f3a\u5236\u67e5\u8be2\u4f7f\u7528\u7d22\u5f15\uff1a select id from t with(index(\u7d22\u5f15\u540d)) where num=@num</p> <ul> <li>1</li> <li>2</li> <li> <p>3</p> </li> <li> <p>8.\u5e94\u5c3d\u91cf\u907f\u514d\u5728 where \u5b50\u53e5\u4e2d\u5bf9\u5b57\u6bb5\u8fdb\u884c\u8868\u8fbe\u5f0f\u64cd\u4f5c\uff0c\u8fd9\u5c06\u5bfc\u81f4\u5f15\u64ce\u653e\u5f03\u4f7f\u7528\u7d22\u5f15\u800c\u8fdb\u884c\u5168\u8868\u626b\u63cf\u3002\u5982\uff1a</p> </li> </ul> <p>select id from t where num/2=100 -- \u5e94\u6539\u4e3a: select id from t where num=100*2</p> <ul> <li>1</li> <li>2</li> <li> <p>3</p> </li> <li> <p>9.\u5e94\u5c3d\u91cf\u907f\u514d\u5728where\u5b50\u53e5\u4e2d\u5bf9\u5b57\u6bb5\u8fdb\u884c\u51fd\u6570\u64cd\u4f5c\uff0c\u8fd9\u5c06\u5bfc\u81f4\u5f15\u64ce\u653e\u5f03\u4f7f\u7528\u7d22\u5f15\u800c\u8fdb\u884c\u5168\u8868\u626b\u63cf\u3002\u5982\uff1a</p> </li> </ul> <p>select id from t where substring(name,1,3)=\u2019abc\u2019 -- name\u4ee5abc\u5f00\u5934\u7684id\u5e94\u6539\u4e3a: select id from t where name like \u2018abc%\u2019</p> <ul> <li>1</li> <li>2</li> <li> <p>3</p> </li> <li> <p>10.\u4e0d\u8981\u5728 where \u5b50\u53e5\u4e2d\u7684\u201c=\u201d\u5de6\u8fb9\u8fdb\u884c\u51fd\u6570\u3001\u7b97\u672f\u8fd0\u7b97\u6216\u5176\u4ed6\u8868\u8fbe\u5f0f\u8fd0\u7b97\uff0c\u5426\u5219\u7cfb\u7edf\u5c06\u53ef\u80fd\u65e0\u6cd5\u6b63\u786e\u4f7f\u7528\u7d22\u5f15\u3002</p> </li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_57","title":"\u6570\u636e\u5e93\u4f18\u5316","text":""},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_58","title":"\u4e3a\u4ec0\u4e48\u8981\u4f18\u5316","text":"<ul> <li>\u7cfb\u7edf\u7684\u541e\u5410\u91cf\u74f6\u9888\u5f80\u5f80\u51fa\u73b0\u5728\u6570\u636e\u5e93\u7684\u8bbf\u95ee\u901f\u5ea6\u4e0a</li> <li>\u968f\u7740\u5e94\u7528\u7a0b\u5e8f\u7684\u8fd0\u884c\uff0c\u6570\u636e\u5e93\u7684\u4e2d\u7684\u6570\u636e\u4f1a\u8d8a\u6765\u8d8a\u591a\uff0c\u5904\u7406\u65f6\u95f4\u4f1a\u76f8\u5e94\u53d8\u6162</li> <li>\u6570\u636e\u662f\u5b58\u653e\u5728\u78c1\u76d8\u4e0a\u7684\uff0c\u8bfb\u5199\u901f\u5ea6\u65e0\u6cd5\u548c\u5185\u5b58\u76f8\u6bd4</li> </ul> <p>\u4f18\u5316\u539f\u5219\uff1a\u51cf\u5c11\u7cfb\u7edf\u74f6\u9888\uff0c\u51cf\u5c11\u8d44\u6e90\u5360\u7528\uff0c\u589e\u52a0\u7cfb\u7edf\u7684\u53cd\u5e94\u901f\u5ea6\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_59","title":"\u6570\u636e\u5e93\u7ed3\u6784\u4f18\u5316","text":"<p>\u4e00\u4e2a\u597d\u7684\u6570\u636e\u5e93\u8bbe\u8ba1\u65b9\u6848\u5bf9\u4e8e\u6570\u636e\u5e93\u7684\u6027\u80fd\u5f80\u5f80\u4f1a\u8d77\u5230\u4e8b\u534a\u529f\u500d\u7684\u6548\u679c\u3002</p> <p>\u9700\u8981\u8003\u8651\u6570\u636e\u5197\u4f59\u3001\u67e5\u8be2\u548c\u66f4\u65b0\u7684\u901f\u5ea6\u3001\u5b57\u6bb5\u7684\u6570\u636e\u7c7b\u578b\u662f\u5426\u5408\u7406\u7b49\u591a\u65b9\u9762\u7684\u5185\u5bb9\u3002</p> <p>\u5c06\u5b57\u6bb5\u5f88\u591a\u7684\u8868\u5206\u89e3\u6210\u591a\u4e2a\u8868</p> <p>\u5bf9\u4e8e\u5b57\u6bb5\u8f83\u591a\u7684\u8868\uff0c\u5982\u679c\u6709\u4e9b\u5b57\u6bb5\u7684\u4f7f\u7528\u9891\u7387\u5f88\u4f4e\uff0c\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u5b57\u6bb5\u5206\u79bb\u51fa\u6765\u5f62\u6210\u65b0\u8868\u3002</p> <p>\u56e0\u4e3a\u5f53\u4e00\u4e2a\u8868\u7684\u6570\u636e\u91cf\u5f88\u5927\u65f6\uff0c\u4f1a\u7531\u4e8e\u4f7f\u7528\u9891\u7387\u4f4e\u7684\u5b57\u6bb5\u7684\u5b58\u5728\u800c\u53d8\u6162\u3002</p> <p>\u589e\u52a0\u4e2d\u95f4\u8868</p> <p>\u5bf9\u4e8e\u9700\u8981\u7ecf\u5e38\u8054\u5408\u67e5\u8be2\u7684\u8868\uff0c\u53ef\u4ee5\u5efa\u7acb\u4e2d\u95f4\u8868\u4ee5\u63d0\u9ad8\u67e5\u8be2\u6548\u7387\u3002</p> <p>\u901a\u8fc7\u5efa\u7acb\u4e2d\u95f4\u8868\uff0c\u5c06\u9700\u8981\u901a\u8fc7\u8054\u5408\u67e5\u8be2\u7684\u6570\u636e\u63d2\u5165\u5230\u4e2d\u95f4\u8868\u4e2d\uff0c\u7136\u540e\u5c06\u539f\u6765\u7684\u8054\u5408\u67e5\u8be2\u6539\u4e3a\u5bf9\u4e2d\u95f4\u8868\u7684\u67e5\u8be2\u3002</p> <p>\u589e\u52a0\u5197\u4f59\u5b57\u6bb5</p> <p>\u8bbe\u8ba1\u6570\u636e\u8868\u65f6\u5e94\u5c3d\u91cf\u9075\u5faa\u8303\u5f0f\u7406\u8bba\u7684\u89c4\u7ea6\uff0c\u5c3d\u53ef\u80fd\u7684\u51cf\u5c11\u5197\u4f59\u5b57\u6bb5\uff0c\u8ba9\u6570\u636e\u5e93\u8bbe\u8ba1\u770b\u8d77\u6765\u7cbe\u81f4\u3001\u4f18\u96c5\u3002\u4f46\u662f\uff0c\u5408\u7406\u7684\u52a0\u5165\u5197\u4f59\u5b57\u6bb5\u53ef\u4ee5\u63d0\u9ad8\u67e5\u8be2\u901f\u5ea6\u3002</p> <p>\u8868\u7684\u89c4\u8303\u5316\u7a0b\u5ea6\u8d8a\u9ad8\uff0c\u8868\u548c\u8868\u4e4b\u95f4\u7684\u5173\u7cfb\u8d8a\u591a\uff0c\u9700\u8981\u8fde\u63a5\u67e5\u8be2\u7684\u60c5\u51b5\u4e5f\u5c31\u8d8a\u591a\uff0c\u6027\u80fd\u4e5f\u5c31\u8d8a\u5dee\u3002</p> <p>\u6ce8\u610f\uff1a</p> <p>\u5197\u4f59\u5b57\u6bb5\u7684\u503c\u5728\u4e00\u4e2a\u8868\u4e2d\u4fee\u6539\u4e86\uff0c\u5c31\u8981\u60f3\u529e\u6cd5\u5728\u5176\u4ed6\u8868\u4e2d\u66f4\u65b0\uff0c\u5426\u5219\u5c31\u4f1a\u5bfc\u81f4\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#mysqlcpu500","title":"MySQL\u6570\u636e\u5e93cpu\u98d9\u5347\u5230500%\u7684\u8bdd\u4ed6\u600e\u4e48\u5904\u7406\uff1f","text":"<p>\u5f53 cpu \u98d9\u5347\u5230 500%\u65f6\uff0c\u5148\u7528\u64cd\u4f5c\u7cfb\u7edf\u547d\u4ee4 top \u547d\u4ee4\u89c2\u5bdf\u662f\u4e0d\u662f mysqld \u5360\u7528\u5bfc\u81f4\u7684\uff0c\u5982\u679c\u4e0d\u662f\uff0c\u627e\u51fa\u5360\u7528\u9ad8\u7684\u8fdb\u7a0b\uff0c\u5e76\u8fdb\u884c\u76f8\u5173\u5904\u7406\u3002</p> <p>\u5982\u679c\u662f mysqld \u9020\u6210\u7684\uff0c show processlist\uff0c\u770b\u770b\u91cc\u9762\u8dd1\u7684 session \u60c5\u51b5\uff0c\u662f\u4e0d\u662f\u6709\u6d88\u8017\u8d44\u6e90\u7684 sql \u5728\u8fd0\u884c\u3002\u627e\u51fa\u6d88\u8017\u9ad8\u7684 sql\uff0c\u770b\u770b\u6267\u884c\u8ba1\u5212\u662f\u5426\u51c6\u786e\uff0c index \u662f\u5426\u7f3a\u5931\uff0c\u6216\u8005\u5b9e\u5728\u662f\u6570\u636e\u91cf\u592a\u5927\u9020\u6210\u3002</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u80af\u5b9a\u8981 kill \u6389\u8fd9\u4e9b\u7ebf\u7a0b(\u540c\u65f6\u89c2\u5bdf cpu \u4f7f\u7528\u7387\u662f\u5426\u4e0b\u964d)\uff0c\u7b49\u8fdb\u884c\u76f8\u5e94\u7684\u8c03\u6574(\u6bd4\u5982\u8bf4\u52a0\u7d22\u5f15\u3001\u6539 sql\u3001\u6539\u5185\u5b58\u53c2\u6570)\u4e4b\u540e\uff0c\u518d\u91cd\u65b0\u8dd1\u8fd9\u4e9b SQL\u3002</p> <p>\u4e5f\u6709\u53ef\u80fd\u662f\u6bcf\u4e2a sql \u6d88\u8017\u8d44\u6e90\u5e76\u4e0d\u591a\uff0c\u4f46\u662f\u7a81\u7136\u4e4b\u95f4\uff0c\u6709\u5927\u91cf\u7684 session \u8fde\u8fdb\u6765\u5bfc\u81f4 cpu \u98d9\u5347\uff0c\u8fd9\u79cd\u60c5\u51b5\u5c31\u9700\u8981\u8ddf\u5e94\u7528\u4e00\u8d77\u6765\u5206\u6790\u4e3a\u4f55\u8fde\u63a5\u6570\u4f1a\u6fc0\u589e\uff0c\u518d\u505a\u51fa\u76f8\u5e94\u7684\u8c03\u6574\uff0c\u6bd4\u5982\u8bf4\u9650\u5236\u8fde\u63a5\u6570\u7b49</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#crud","title":"\u5927\u8868\u600e\u4e48\u4f18\u5316\uff1f\u67d0\u4e2a\u8868\u6709\u8fd1\u5343\u4e07\u6570\u636e\uff0cCRUD\u6bd4\u8f83\u6162\uff0c\u5982\u4f55\u4f18\u5316\uff1f\u5206\u5e93\u5206\u8868\u4e86\u662f\u600e\u4e48\u505a\u7684\uff1f\u5206\u8868\u5206\u5e93\u4e86\u6709\u4ec0\u4e48\u95ee\u9898\uff1f\u6709\u7528\u5230\u4e2d\u95f4\u4ef6\u4e48\uff1f\u4ed6\u4eec\u7684\u539f\u7406\u77e5\u9053\u4e48\uff1f","text":"<p>\u5f53MySQL\u5355\u8868\u8bb0\u5f55\u6570\u8fc7\u5927\u65f6\uff0c\u6570\u636e\u5e93\u7684CRUD\u6027\u80fd\u4f1a\u660e\u663e\u4e0b\u964d\uff0c\u4e00\u4e9b\u5e38\u89c1\u7684\u4f18\u5316\u63aa\u65bd\u5982\u4e0b\uff1a</p> <ol> <li>\u9650\u5b9a\u6570\u636e\u7684\u8303\u56f4\uff1a \u52a1\u5fc5\u7981\u6b62\u4e0d\u5e26\u4efb\u4f55\u9650\u5236\u6570\u636e\u8303\u56f4\u6761\u4ef6\u7684\u67e5\u8be2\u8bed\u53e5\u3002\u6bd4\u5982\uff1a\u6211\u4eec\u5f53\u7528\u6237\u5728\u67e5\u8be2\u8ba2\u5355\u5386\u53f2\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ef\u4ee5\u63a7\u5236\u5728\u4e00\u4e2a\u6708\u7684\u8303\u56f4\u5185\u3002\uff1b</li> <li>\u8bfb/\u5199\u5206\u79bb\uff1a \u7ecf\u5178\u7684\u6570\u636e\u5e93\u62c6\u5206\u65b9\u6848\uff0c\u4e3b\u5e93\u8d1f\u8d23\u5199\uff0c\u4ece\u5e93\u8d1f\u8d23\u8bfb\uff1b</li> <li>\u7f13\u5b58\uff1a \u4f7f\u7528MySQL\u7684\u7f13\u5b58\uff0c\u53e6\u5916\u5bf9\u91cd\u91cf\u7ea7\u3001\u66f4\u65b0\u5c11\u7684\u6570\u636e\u53ef\u4ee5\u8003\u8651\u4f7f\u7528\u5e94\u7528\u7ea7\u522b\u7684\u7f13\u5b58\uff1b</li> </ol> <p>\u8fd8\u6709\u5c31\u662f\u901a\u8fc7\u5206\u5e93\u5206\u8868\u7684\u65b9\u5f0f\u8fdb\u884c\u4f18\u5316\uff0c\u4e3b\u8981\u6709\u5782\u76f4\u5206\u8868\u548c\u6c34\u5e73\u5206\u8868</p> <ol> <li>\u5782\u76f4\u5206\u533a\uff1a</li> </ol> <p>\u6839\u636e\u6570\u636e\u5e93\u91cc\u9762\u6570\u636e\u8868\u7684\u76f8\u5173\u6027\u8fdb\u884c\u62c6\u5206\u3002 \u4f8b\u5982\uff0c\u7528\u6237\u8868\u4e2d\u65e2\u6709\u7528\u6237\u7684\u767b\u5f55\u4fe1\u606f\u53c8\u6709\u7528\u6237\u7684\u57fa\u672c\u4fe1\u606f\uff0c\u53ef\u4ee5\u5c06\u7528\u6237\u8868\u62c6\u5206\u6210\u4e24\u4e2a\u5355\u72ec\u7684\u8868\uff0c\u751a\u81f3\u653e\u5230\u5355\u72ec\u7684\u5e93\u505a\u5206\u5e93\u3002</p> <p>\u7b80\u5355\u6765\u8bf4\u5782\u76f4\u62c6\u5206\u662f\u6307\u6570\u636e\u8868\u5217\u7684\u62c6\u5206\uff0c\u628a\u4e00\u5f20\u5217\u6bd4\u8f83\u591a\u7684\u8868\u62c6\u5206\u4e3a\u591a\u5f20\u8868\u3002 \u5982\u4e0b\u56fe\u6240\u793a\uff0c\u8fd9\u6837\u6765\u8bf4\u5927\u5bb6\u5e94\u8be5\u5c31\u66f4\u5bb9\u6613\u7406\u89e3\u4e86\u3002</p> <p></p> <p>\u5782\u76f4\u62c6\u5206\u7684\u4f18\u70b9\uff1a \u53ef\u4ee5\u4f7f\u5f97\u884c\u6570\u636e\u53d8\u5c0f\uff0c\u5728\u67e5\u8be2\u65f6\u51cf\u5c11\u8bfb\u53d6\u7684Block\u6570\uff0c\u51cf\u5c11I/O\u6b21\u6570\u3002\u6b64\u5916\uff0c\u5782\u76f4\u5206\u533a\u53ef\u4ee5\u7b80\u5316\u8868\u7684\u7ed3\u6784\uff0c\u6613\u4e8e\u7ef4\u62a4\u3002</p> <p>\u5782\u76f4\u62c6\u5206\u7684\u7f3a\u70b9\uff1a \u4e3b\u952e\u4f1a\u51fa\u73b0\u5197\u4f59\uff0c\u9700\u8981\u7ba1\u7406\u5197\u4f59\u5217\uff0c\u5e76\u4f1a\u5f15\u8d77Join\u64cd\u4f5c\uff0c\u53ef\u4ee5\u901a\u8fc7\u5728\u5e94\u7528\u5c42\u8fdb\u884cJoin\u6765\u89e3\u51b3\u3002\u6b64\u5916\uff0c\u5782\u76f4\u5206\u533a\u4f1a\u8ba9\u4e8b\u52a1\u53d8\u5f97\u66f4\u52a0\u590d\u6742\uff1b</p> <p>#### \u5782\u76f4\u5206\u8868</p> <p>\u628a\u4e3b\u952e\u548c\u4e00\u4e9b\u5217\u653e\u5728\u4e00\u4e2a\u8868\uff0c\u7136\u540e\u628a\u4e3b\u952e\u548c\u53e6\u5916\u7684\u5217\u653e\u5728\u53e6\u4e00\u4e2a\u8868\u4e2d</p> <p></p> <p>##### \u9002\u7528\u573a\u666f</p> <ul> <li>1\u3001\u5982\u679c\u4e00\u4e2a\u8868\u4e2d\u67d0\u4e9b\u5217\u5e38\u7528\uff0c\u53e6\u5916\u4e00\u4e9b\u5217\u4e0d\u5e38\u7528</li> <li>2\u3001\u53ef\u4ee5\u4f7f\u6570\u636e\u884c\u53d8\u5c0f\uff0c\u4e00\u4e2a\u6570\u636e\u9875\u80fd\u5b58\u50a8\u66f4\u591a\u6570\u636e\uff0c\u67e5\u8be2\u65f6\u51cf\u5c11I/O\u6b21\u6570</li> </ul> <p>##### \u7f3a\u70b9</p> <ul> <li>\u6709\u4e9b\u5206\u8868\u7684\u7b56\u7565\u57fa\u4e8e\u5e94\u7528\u5c42\u7684\u903b\u8f91\u7b97\u6cd5\uff0c\u4e00\u65e6\u903b\u8f91\u7b97\u6cd5\u6539\u53d8\uff0c\u6574\u4e2a\u5206\u8868\u903b\u8f91\u90fd\u4f1a\u6539\u53d8\uff0c\u6269\u5c55\u6027\u8f83\u5dee</li> <li>\u5bf9\u4e8e\u5e94\u7528\u5c42\u6765\u8bf4\uff0c\u903b\u8f91\u7b97\u6cd5\u589e\u52a0\u5f00\u53d1\u6210\u672c</li> <li> <p>\u7ba1\u7406\u5197\u4f59\u5217\uff0c\u67e5\u8be2\u6240\u6709\u6570\u636e\u9700\u8981join\u64cd\u4f5c</p> </li> <li> <p>\u6c34\u5e73\u5206\u533a\uff1a</p> </li> </ul> <p>\u4fdd\u6301\u6570\u636e\u8868\u7ed3\u6784\u4e0d\u53d8\uff0c\u901a\u8fc7\u67d0\u79cd\u7b56\u7565\u5b58\u50a8\u6570\u636e\u5206\u7247\u3002\u8fd9\u6837\u6bcf\u4e00\u7247\u6570\u636e\u5206\u6563\u5230\u4e0d\u540c\u7684\u8868\u6216\u8005\u5e93\u4e2d\uff0c\u8fbe\u5230\u4e86\u5206\u5e03\u5f0f\u7684\u76ee\u7684\u3002 \u6c34\u5e73\u62c6\u5206\u53ef\u4ee5\u652f\u6491\u975e\u5e38\u5927\u7684\u6570\u636e\u91cf\u3002</p> <p>\u6c34\u5e73\u62c6\u5206\u662f\u6307\u6570\u636e\u8868\u884c\u7684\u62c6\u5206\uff0c\u8868\u7684\u884c\u6570\u8d85\u8fc7200\u4e07\u884c\u65f6\uff0c\u5c31\u4f1a\u53d8\u6162\uff0c\u8fd9\u65f6\u53ef\u4ee5\u628a\u4e00\u5f20\u7684\u8868\u7684\u6570\u636e\u62c6\u6210\u591a\u5f20\u8868\u6765\u5b58\u653e\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u6211\u4eec\u53ef\u4ee5\u5c06\u7528\u6237\u4fe1\u606f\u8868\u62c6\u5206\u6210\u591a\u4e2a\u7528\u6237\u4fe1\u606f\u8868\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u907f\u514d\u5355\u4e00\u8868\u6570\u636e\u91cf\u8fc7\u5927\u5bf9\u6027\u80fd\u9020\u6210\u5f71\u54cd\u3002</p> <p></p> <p>\u6c34\u54c1\u62c6\u5206\u53ef\u4ee5\u652f\u6301\u975e\u5e38\u5927\u7684\u6570\u636e\u91cf\u3002\u9700\u8981\u6ce8\u610f\u7684\u4e00\u70b9\u662f:\u5206\u8868\u4ec5\u4ec5\u662f\u89e3\u51b3\u4e86\u5355\u4e00\u8868\u6570\u636e\u8fc7\u5927\u7684\u95ee\u9898\uff0c\u4f46\u7531\u4e8e\u8868\u7684\u6570\u636e\u8fd8\u662f\u5728\u540c\u4e00\u53f0\u673a\u5668\u4e0a\uff0c\u5176\u5b9e\u5bf9\u4e8e\u63d0\u5347MySQL\u5e76\u53d1\u80fd\u529b\u6ca1\u6709\u4ec0\u4e48\u610f\u4e49\uff0c\u6240\u4ee5 \u6c34\u5e73\u62c6\u5206\u6700\u597d\u5206\u5e93 \u3002</p> <p>\u6c34\u5e73\u62c6\u5206\u80fd\u591f \u652f\u6301\u975e\u5e38\u5927\u7684\u6570\u636e\u91cf\u5b58\u50a8\uff0c\u5e94\u7528\u7aef\u6539\u9020\u4e5f\u5c11\uff0c\u4f46 \u5206\u7247\u4e8b\u52a1\u96be\u4ee5\u89e3\u51b3 \uff0c\u8de8\u754c\u70b9Join\u6027\u80fd\u8f83\u5dee\uff0c\u903b\u8f91\u590d\u6742\u3002</p> <p>\u300aJava\u5de5\u7a0b\u5e08\u4fee\u70bc\u4e4b\u9053\u300b\u7684\u4f5c\u8005\u63a8\u8350 \u5c3d\u91cf\u4e0d\u8981\u5bf9\u6570\u636e\u8fdb\u884c\u5206\u7247\uff0c\u56e0\u4e3a\u62c6\u5206\u4f1a\u5e26\u6765\u903b\u8f91\u3001\u90e8\u7f72\u3001\u8fd0\u7ef4\u7684\u5404\u79cd\u590d\u6742\u5ea6 \uff0c\u4e00\u822c\u7684\u6570\u636e\u8868\u5728\u4f18\u5316\u5f97\u5f53\u7684\u60c5\u51b5\u4e0b\u652f\u6491\u5343\u4e07\u4ee5\u4e0b\u7684\u6570\u636e\u91cf\u662f\u6ca1\u6709\u592a\u5927\u95ee\u9898\u7684\u3002\u5982\u679c\u5b9e\u5728\u8981\u5206\u7247\uff0c\u5c3d\u91cf\u9009\u62e9\u5ba2\u6237\u7aef\u5206\u7247\u67b6\u6784\uff0c\u8fd9\u6837\u53ef\u4ee5\u51cf\u5c11\u4e00\u6b21\u548c\u4e2d\u95f4\u4ef6\u7684\u7f51\u7edcI/O\u3002</p> <p>#### \u6c34\u5e73\u5206\u8868\uff1a</p> <p>\u8868\u5f88\u5927\uff0c\u5206\u5272\u540e\u53ef\u4ee5\u964d\u4f4e\u5728\u67e5\u8be2\u65f6\u9700\u8981\u8bfb\u7684\u6570\u636e\u548c\u7d22\u5f15\u7684\u9875\u6570\uff0c\u540c\u65f6\u4e5f\u964d\u4f4e\u4e86\u7d22\u5f15\u7684\u5c42\u6570\uff0c\u63d0\u9ad8\u67e5\u8be2\u6b21\u6570</p> <p></p> <p>##### \u9002\u7528\u573a\u666f</p> <ul> <li>1\u3001\u8868\u4e2d\u7684\u6570\u636e\u672c\u8eab\u5c31\u6709\u72ec\u7acb\u6027\uff0c\u4f8b\u5982\u8868\u4e2d\u5206\u8868\u8bb0\u5f55\u5404\u4e2a\u5730\u533a\u7684\u6570\u636e\u6216\u8005\u4e0d\u540c\u65f6\u671f\u7684\u6570\u636e\uff0c\u7279\u522b\u662f\u6709\u4e9b\u6570\u636e\u5e38\u7528\uff0c\u6709\u4e9b\u4e0d\u5e38\u7528\u3002</li> <li>2\u3001\u9700\u8981\u628a\u6570\u636e\u5b58\u653e\u5728\u591a\u4e2a\u4ecb\u8d28\u4e0a\u3002</li> </ul> <p>##### \u6c34\u5e73\u5207\u5206\u7684\u7f3a\u70b9</p> <ul> <li>1\u3001\u7ed9\u5e94\u7528\u589e\u52a0\u590d\u6742\u5ea6\uff0c\u901a\u5e38\u67e5\u8be2\u65f6\u9700\u8981\u591a\u4e2a\u8868\u540d\uff0c\u67e5\u8be2\u6240\u6709\u6570\u636e\u90fd\u9700UNION\u64cd\u4f5c</li> <li>2\u3001\u5728\u8bb8\u591a\u6570\u636e\u5e93\u5e94\u7528\u4e2d\uff0c\u8fd9\u79cd\u590d\u6742\u5ea6\u4f1a\u8d85\u8fc7\u5b83\u5e26\u6765\u7684\u4f18\u70b9\uff0c\u67e5\u8be2\u65f6\u4f1a\u589e\u52a0\u8bfb\u4e00\u4e2a\u7d22\u5f15\u5c42\u7684\u78c1\u76d8\u6b21\u6570</li> </ul> <p>\u4e0b\u9762\u8865\u5145\u4e00\u4e0b\u6570\u636e\u5e93\u5206\u7247\u7684\u4e24\u79cd\u5e38\u89c1\u65b9\u6848\uff1a</p> <ul> <li>\u5ba2\u6237\u7aef\u4ee3\u7406\uff1a \u5206\u7247\u903b\u8f91\u5728\u5e94\u7528\u7aef\uff0c\u5c01\u88c5\u5728jar\u5305\u4e2d\uff0c\u901a\u8fc7\u4fee\u6539\u6216\u8005\u5c01\u88c5JDBC\u5c42\u6765\u5b9e\u73b0\u3002 \u5f53\u5f53\u7f51\u7684 Sharding-JDBC \u3001\u963f\u91cc\u7684TDDL\u662f\u4e24\u79cd\u6bd4\u8f83\u5e38\u7528\u7684\u5b9e\u73b0\u3002</li> <li>\u4e2d\u95f4\u4ef6\u4ee3\u7406\uff1a \u5728\u5e94\u7528\u548c\u6570\u636e\u4e2d\u95f4\u52a0\u4e86\u4e00\u4e2a\u4ee3\u7406\u5c42\u3002\u5206\u7247\u903b\u8f91\u7edf\u4e00\u7ef4\u62a4\u5728\u4e2d\u95f4\u4ef6\u670d\u52a1\u4e2d\u3002 \u6211\u4eec\u73b0\u5728\u8c08\u7684 Mycat \u3001360\u7684Atlas\u3001\u7f51\u6613\u7684DDB\u7b49\u7b49\u90fd\u662f\u8fd9\u79cd\u67b6\u6784\u7684\u5b9e\u73b0\u3002</li> </ul> <p>\u5206\u5e93\u5206\u8868\u540e\u9762\u4e34\u7684\u95ee\u9898</p> <ul> <li> <p>\u4e8b\u52a1\u652f\u6301 \u5206\u5e93\u5206\u8868\u540e\uff0c\u5c31\u6210\u4e86\u5206\u5e03\u5f0f\u4e8b\u52a1\u4e86\u3002\u5982\u679c\u4f9d\u8d56\u6570\u636e\u5e93\u672c\u8eab\u7684\u5206\u5e03\u5f0f\u4e8b\u52a1\u7ba1\u7406\u529f\u80fd\u53bb\u6267\u884c\u4e8b\u52a1\uff0c\u5c06\u4ed8\u51fa\u9ad8\u6602\u7684\u6027\u80fd\u4ee3\u4ef7\uff1b \u5982\u679c\u7531\u5e94\u7528\u7a0b\u5e8f\u53bb\u534f\u52a9\u63a7\u5236\uff0c\u5f62\u6210\u7a0b\u5e8f\u903b\u8f91\u4e0a\u7684\u4e8b\u52a1\uff0c\u53c8\u4f1a\u9020\u6210\u7f16\u7a0b\u65b9\u9762\u7684\u8d1f\u62c5\u3002</p> </li> <li> <p>\u8de8\u5e93join</p> </li> </ul> <p>\u53ea\u8981\u662f\u8fdb\u884c\u5207\u5206\uff0c\u8de8\u8282\u70b9Join\u7684\u95ee\u9898\u662f\u4e0d\u53ef\u907f\u514d\u7684\u3002\u4f46\u662f\u826f\u597d\u7684\u8bbe\u8ba1\u548c\u5207\u5206\u5374\u53ef\u4ee5\u51cf\u5c11\u6b64\u7c7b\u60c5\u51b5\u7684\u53d1\u751f\u3002\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\u7684\u666e\u904d\u505a\u6cd5\u662f\u5206\u4e24\u6b21\u67e5\u8be2\u5b9e\u73b0\u3002\u5728\u7b2c\u4e00\u6b21\u67e5\u8be2\u7684\u7ed3\u679c\u96c6\u4e2d\u627e\u51fa\u5173\u8054\u6570\u636e\u7684id,\u6839\u636e\u8fd9\u4e9bid\u53d1\u8d77\u7b2c\u4e8c\u6b21\u8bf7\u6c42\u5f97\u5230\u5173\u8054\u6570\u636e\u3002 \u5206\u5e93\u5206\u8868\u65b9\u6848\u4ea7\u54c1</p> <ul> <li> <p>\u8de8\u8282\u70b9\u7684count,order by,group by\u4ee5\u53ca\u805a\u5408\u51fd\u6570\u95ee\u9898 \u8fd9\u4e9b\u662f\u4e00\u7c7b\u95ee\u9898\uff0c\u56e0\u4e3a\u5b83\u4eec\u90fd\u9700\u8981\u57fa\u4e8e\u5168\u90e8\u6570\u636e\u96c6\u5408\u8fdb\u884c\u8ba1\u7b97\u3002\u591a\u6570\u7684\u4ee3\u7406\u90fd\u4e0d\u4f1a\u81ea\u52a8\u5904\u7406\u5408\u5e76\u5de5\u4f5c\u3002\u89e3\u51b3\u65b9\u6848\uff1a\u4e0e\u89e3\u51b3\u8de8\u8282\u70b9join\u95ee\u9898\u7684\u7c7b\u4f3c\uff0c\u5206\u522b\u5728\u5404\u4e2a\u8282\u70b9\u4e0a\u5f97\u5230\u7ed3\u679c\u540e\u5728\u5e94\u7528\u7a0b\u5e8f\u7aef\u8fdb\u884c\u5408\u5e76\u3002\u548cjoin\u4e0d\u540c\u7684\u662f\u6bcf\u4e2a\u7ed3\u70b9\u7684\u67e5\u8be2\u53ef\u4ee5\u5e76\u884c\u6267\u884c\uff0c\u56e0\u6b64\u5f88\u591a\u65f6\u5019\u5b83\u7684\u901f\u5ea6\u8981\u6bd4\u5355\u4e00\u5927\u8868\u5feb\u5f88\u591a\u3002\u4f46\u5982\u679c\u7ed3\u679c\u96c6\u5f88\u5927\uff0c\u5bf9\u5e94\u7528\u7a0b\u5e8f\u5185\u5b58\u7684\u6d88\u8017\u662f\u4e00\u4e2a\u95ee\u9898\u3002</p> </li> <li> <p>\u6570\u636e\u8fc1\u79fb\uff0c\u5bb9\u91cf\u89c4\u5212\uff0c\u6269\u5bb9\u7b49\u95ee\u9898 \u6765\u81ea\u6dd8\u5b9d\u7efc\u5408\u4e1a\u52a1\u5e73\u53f0\u56e2\u961f\uff0c\u5b83\u5229\u7528\u5bf92\u7684\u500d\u6570\u53d6\u4f59\u5177\u6709\u5411\u524d\u517c\u5bb9\u7684\u7279\u6027\uff08\u5982\u5bf94\u53d6\u4f59\u5f971\u7684\u6570\u5bf92\u53d6\u4f59\u4e5f\u662f1\uff09\u6765\u5206\u914d\u6570\u636e\uff0c\u907f\u514d\u4e86\u884c\u7ea7\u522b\u7684\u6570\u636e\u8fc1\u79fb\uff0c\u4f46\u662f\u4f9d\u7136\u9700\u8981\u8fdb\u884c\u8868\u7ea7\u522b\u7684\u8fc1\u79fb\uff0c\u540c\u65f6\u5bf9\u6269\u5bb9\u89c4\u6a21\u548c\u5206\u8868\u6570\u91cf\u90fd\u6709\u9650\u5236\u3002\u603b\u5f97\u6765\u8bf4\uff0c\u8fd9\u4e9b\u65b9\u6848\u90fd\u4e0d\u662f\u5341\u5206\u7684\u7406\u60f3\uff0c\u591a\u591a\u5c11\u5c11\u90fd\u5b58\u5728\u4e00\u4e9b\u7f3a\u70b9\uff0c\u8fd9\u4e5f\u4ece\u4e00\u4e2a\u4fa7\u9762\u53cd\u6620\u51fa\u4e86Sharding\u6269\u5bb9\u7684\u96be\u5ea6\u3002</p> </li> <li> <p>ID\u95ee\u9898</p> </li> <li> <p>\u4e00\u65e6\u6570\u636e\u5e93\u88ab\u5207\u5206\u5230\u591a\u4e2a\u7269\u7406\u7ed3\u70b9\u4e0a\uff0c\u6211\u4eec\u5c06\u4e0d\u80fd\u518d\u4f9d\u8d56\u6570\u636e\u5e93\u81ea\u8eab\u7684\u4e3b\u952e\u751f\u6210\u673a\u5236\u3002\u4e00\u65b9\u9762\uff0c\u67d0\u4e2a\u5206\u533a\u6570\u636e\u5e93\u81ea\u751f\u6210\u7684ID\u65e0\u6cd5\u4fdd\u8bc1\u5728\u5168\u5c40\u4e0a\u662f\u552f\u4e00\u7684\uff1b\u53e6\u4e00\u65b9\u9762\uff0c\u5e94\u7528\u7a0b\u5e8f\u5728\u63d2\u5165\u6570\u636e\u4e4b\u524d\u9700\u8981\u5148\u83b7\u5f97ID,\u4ee5\u4fbf\u8fdb\u884cSQL\u8def\u7531. \u4e00\u4e9b\u5e38\u89c1\u7684\u4e3b\u952e\u751f\u6210\u7b56\u7565</p> </li> </ul> <p>UUID \u4f7f\u7528UUID\u4f5c\u4e3b\u952e\u662f\u6700\u7b80\u5355\u7684\u65b9\u6848\uff0c\u4f46\u662f\u7f3a\u70b9\u4e5f\u662f\u975e\u5e38\u660e\u663e\u7684\u3002\u7531\u4e8eUUID\u975e\u5e38\u7684\u957f\uff0c\u9664\u5360\u7528\u5927\u91cf\u5b58\u50a8\u7a7a\u95f4\u5916\uff0c\u6700\u4e3b\u8981\u7684\u95ee\u9898\u662f\u5728\u7d22\u5f15\u4e0a\uff0c\u5728\u5efa\u7acb\u7d22\u5f15\u548c\u57fa\u4e8e\u7d22\u5f15\u8fdb\u884c\u67e5\u8be2\u65f6\u90fd\u5b58\u5728\u6027\u80fd\u95ee\u9898\u3002 Twitter\u7684\u5206\u5e03\u5f0f\u81ea\u589eID\u7b97\u6cd5Snowflake \u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\uff0c\u9700\u8981\u751f\u6210\u5168\u5c40UID\u7684\u573a\u5408\u8fd8\u662f\u6bd4\u8f83\u591a\u7684\uff0ctwitter\u7684snowflake\u89e3\u51b3\u4e86\u8fd9\u79cd\u9700\u6c42\uff0c\u5b9e\u73b0\u4e5f\u8fd8\u662f\u5f88\u7b80\u5355\u7684\uff0c\u9664\u53bb\u914d\u7f6e\u4fe1\u606f\uff0c\u6838\u5fc3\u4ee3\u7801\u5c31\u662f\u6beb\u79d2\u7ea7\u65f6\u95f441\u4f4d \u673a\u5668ID 10\u4f4d \u6beb\u79d2\u5185\u5e8f\u521712\u4f4d\u3002</p> <ul> <li>\u8de8\u5206\u7247\u7684\u6392\u5e8f\u5206\u9875</li> </ul> <p>\u822c\u6765\u8bb2\uff0c\u5206\u9875\u65f6\u9700\u8981\u6309\u7167\u6307\u5b9a\u5b57\u6bb5\u8fdb\u884c\u6392\u5e8f\u3002\u5f53\u6392\u5e8f\u5b57\u6bb5\u5c31\u662f\u5206\u7247\u5b57\u6bb5\u7684\u65f6\u5019\uff0c\u6211\u4eec\u901a\u8fc7\u5206\u7247\u89c4\u5219\u53ef\u4ee5\u6bd4\u8f83\u5bb9\u6613\u5b9a\u4f4d\u5230\u6307\u5b9a\u7684\u5206\u7247\uff0c\u800c\u5f53\u6392\u5e8f\u5b57\u6bb5\u975e\u5206\u7247\u5b57\u6bb5\u7684\u65f6\u5019\uff0c\u60c5\u51b5\u5c31\u4f1a\u53d8\u5f97\u6bd4\u8f83\u590d\u6742\u4e86\u3002\u4e3a\u4e86\u6700\u7ec8\u7ed3\u679c\u7684\u51c6\u786e\u6027\uff0c\u6211\u4eec\u9700\u8981\u5728\u4e0d\u540c\u7684\u5206\u7247\u8282\u70b9\u4e2d\u5c06\u6570\u636e\u8fdb\u884c\u6392\u5e8f\u5e76\u8fd4\u56de\uff0c\u5e76\u5c06\u4e0d\u540c\u5206\u7247\u8fd4\u56de\u7684\u7ed3\u679c\u96c6\u8fdb\u884c\u6c47\u603b\u548c\u518d\u6b21\u6392\u5e8f\uff0c\u6700\u540e\u518d\u8fd4\u56de\u7ed9\u7528\u6237\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#mysql_9","title":"MySQL\u7684\u590d\u5236\u539f\u7406\u4ee5\u53ca\u6d41\u7a0b","text":"<p>\u4e3b\u4ece\u590d\u5236\uff1a\u5c06\u4e3b\u6570\u636e\u5e93\u4e2d\u7684DDL\u548cDML\u64cd\u4f5c\u901a\u8fc7\u4e8c\u8fdb\u5236\u65e5\u5fd7\uff08BINLOG\uff09\u4f20\u8f93\u5230\u4ece\u6570\u636e\u5e93\u4e0a\uff0c\u7136\u540e\u5c06\u8fd9\u4e9b\u65e5\u5fd7\u91cd\u65b0\u6267\u884c\uff08\u91cd\u505a\uff09\uff1b\u4ece\u800c\u4f7f\u5f97\u4ece\u6570\u636e\u5e93\u7684\u6570\u636e\u4e0e\u4e3b\u6570\u636e\u5e93\u4fdd\u6301\u4e00\u81f4\u3002</p> <p>\u4e3b\u4ece\u590d\u5236\u7684\u4f5c\u7528</p> <ol> <li>\u4e3b\u6570\u636e\u5e93\u51fa\u73b0\u95ee\u9898\uff0c\u53ef\u4ee5\u5207\u6362\u5230\u4ece\u6570\u636e\u5e93\u3002</li> <li>\u53ef\u4ee5\u8fdb\u884c\u6570\u636e\u5e93\u5c42\u9762\u7684\u8bfb\u5199\u5206\u79bb\u3002</li> <li>\u53ef\u4ee5\u5728\u4ece\u6570\u636e\u5e93\u4e0a\u8fdb\u884c\u65e5\u5e38\u5907\u4efd\u3002</li> </ol> <p>MySQL\u4e3b\u4ece\u590d\u5236\u89e3\u51b3\u7684\u95ee\u9898</p> <ul> <li>\u6570\u636e\u5206\u5e03\uff1a\u968f\u610f\u5f00\u59cb\u6216\u505c\u6b62\u590d\u5236\uff0c\u5e76\u5728\u4e0d\u540c\u5730\u7406\u4f4d\u7f6e\u5206\u5e03\u6570\u636e\u5907\u4efd</li> <li>\u8d1f\u8f7d\u5747\u8861\uff1a\u964d\u4f4e\u5355\u4e2a\u670d\u52a1\u5668\u7684\u538b\u529b</li> <li>\u9ad8\u53ef\u7528\u548c\u6545\u969c\u5207\u6362\uff1a\u5e2e\u52a9\u5e94\u7528\u7a0b\u5e8f\u907f\u514d\u5355\u70b9\u5931\u8d25</li> <li>\u5347\u7ea7\u6d4b\u8bd5\uff1a\u53ef\u4ee5\u7528\u66f4\u9ad8\u7248\u672c\u7684MySQL\u4f5c\u4e3a\u4ece\u5e93</li> </ul> <p>MySQL\u4e3b\u4ece\u590d\u5236\u5de5\u4f5c\u539f\u7406</p> <ul> <li>\u5728\u4e3b\u5e93\u4e0a\u628a\u6570\u636e\u66f4\u9ad8\u8bb0\u5f55\u5230\u4e8c\u8fdb\u5236\u65e5\u5fd7</li> <li>\u4ece\u5e93\u5c06\u4e3b\u5e93\u7684\u65e5\u5fd7\u590d\u5236\u5230\u81ea\u5df1\u7684\u4e2d\u7ee7\u65e5\u5fd7</li> <li>\u4ece\u5e93\u8bfb\u53d6\u4e2d\u7ee7\u65e5\u5fd7\u7684\u4e8b\u4ef6\uff0c\u5c06\u5176\u91cd\u653e\u5230\u4ece\u5e93\u6570\u636e\u4e2d</li> </ul> <p>\u57fa\u672c\u539f\u7406\u6d41\u7a0b\uff0c3\u4e2a\u7ebf\u7a0b\u4ee5\u53ca\u4e4b\u95f4\u7684\u5173\u8054</p> <p>\u4e3b\uff1abinlog\u7ebf\u7a0b\u2014\u2014\u8bb0\u5f55\u4e0b\u6240\u6709\u6539\u53d8\u4e86\u6570\u636e\u5e93\u6570\u636e\u7684\u8bed\u53e5\uff0c\u653e\u8fdbmaster\u4e0a\u7684binlog\u4e2d\uff1b</p> <p>\u4ece\uff1aio\u7ebf\u7a0b\u2014\u2014\u5728\u4f7f\u7528start slave \u4e4b\u540e\uff0c\u8d1f\u8d23\u4ecemaster\u4e0a\u62c9\u53d6 binlog \u5185\u5bb9\uff0c\u653e\u8fdb\u81ea\u5df1\u7684relay log\u4e2d\uff1b</p> <p>\u4ece\uff1asql\u6267\u884c\u7ebf\u7a0b\u2014\u2014\u6267\u884crelay log\u4e2d\u7684\u8bed\u53e5\uff1b</p> <p>\u590d\u5236\u8fc7\u7a0b</p> <p></p> <p>Binary log\uff1a\u4e3b\u6570\u636e\u5e93\u7684\u4e8c\u8fdb\u5236\u65e5\u5fd7</p> <p>Relay log\uff1a\u4ece\u670d\u52a1\u5668\u7684\u4e2d\u7ee7\u65e5\u5fd7</p> <p>\u7b2c\u4e00\u6b65\uff1amaster\u5728\u6bcf\u4e2a\u4e8b\u52a1\u66f4\u65b0\u6570\u636e\u5b8c\u6210\u4e4b\u524d\uff0c\u5c06\u8be5\u64cd\u4f5c\u8bb0\u5f55\u4e32\u884c\u5730\u5199\u5165\u5230binlog\u6587\u4ef6\u4e2d\u3002</p> <p>\u7b2c\u4e8c\u6b65\uff1asalve\u5f00\u542f\u4e00\u4e2aI/O Thread\uff0c\u8be5\u7ebf\u7a0b\u5728master\u6253\u5f00\u4e00\u4e2a\u666e\u901a\u8fde\u63a5\uff0c\u4e3b\u8981\u5de5\u4f5c\u662fbinlog dump process\u3002\u5982\u679c\u8bfb\u53d6\u7684\u8fdb\u5ea6\u5df2\u7ecf\u8ddf\u4e0a\u4e86master\uff0c\u5c31\u8fdb\u5165\u7761\u7720\u72b6\u6001\u5e76\u7b49\u5f85master\u4ea7\u751f\u65b0\u7684\u4e8b\u4ef6\u3002I/O\u7ebf\u7a0b\u6700\u7ec8\u7684\u76ee\u7684\u662f\u5c06\u8fd9\u4e9b\u4e8b\u4ef6\u5199\u5165\u5230\u4e2d\u7ee7\u65e5\u5fd7\u4e2d\u3002</p> <p>\u7b2c\u4e09\u6b65\uff1aSQL Thread\u4f1a\u8bfb\u53d6\u4e2d\u7ee7\u65e5\u5fd7\uff0c\u5e76\u987a\u5e8f\u6267\u884c\u8be5\u65e5\u5fd7\u4e2d\u7684SQL\u4e8b\u4ef6\uff0c\u4ece\u800c\u4e0e\u4e3b\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u4fdd\u6301\u4e00\u81f4\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_60","title":"\u8bfb\u5199\u5206\u79bb\u6709\u54ea\u4e9b\u89e3\u51b3\u65b9\u6848\uff1f","text":"<p>\u8bfb\u5199\u5206\u79bb\u662f\u4f9d\u8d56\u4e8e\u4e3b\u4ece\u590d\u5236\uff0c\u800c\u4e3b\u4ece\u590d\u5236\u53c8\u662f\u4e3a\u8bfb\u5199\u5206\u79bb\u670d\u52a1\u7684\u3002\u56e0\u4e3a\u4e3b\u4ece\u590d\u5236\u8981\u6c42slave\u4e0d\u80fd\u5199\u53ea\u80fd\u8bfb\uff08\u5982\u679c\u5bf9slave\u6267\u884c\u5199\u64cd\u4f5c\uff0c\u90a3\u4e48show slave status\u5c06\u4f1a\u5448\u73b0Slave_SQL_Running=NO\uff0c\u6b64\u65f6\u4f60\u9700\u8981\u6309\u7167\u524d\u9762\u63d0\u5230\u7684\u624b\u52a8\u540c\u6b65\u4e00\u4e0bslave\uff09\u3002</p> <p>\u65b9\u6848\u4e00</p> <p>\u4f7f\u7528mysql-proxy\u4ee3\u7406</p> <p>\u4f18\u70b9\uff1a\u76f4\u63a5\u5b9e\u73b0\u8bfb\u5199\u5206\u79bb\u548c\u8d1f\u8f7d\u5747\u8861\uff0c\u4e0d\u7528\u4fee\u6539\u4ee3\u7801\uff0cmaster\u548cslave\u7528\u4e00\u6837\u7684\u5e10\u53f7\uff0cmysql\u5b98\u65b9\u4e0d\u5efa\u8bae\u5b9e\u9645\u751f\u4ea7\u4e2d\u4f7f\u7528</p> <p>\u7f3a\u70b9\uff1a\u964d\u4f4e\u6027\u80fd\uff0c \u4e0d\u652f\u6301\u4e8b\u52a1</p> <p>\u65b9\u6848\u4e8c</p> <p>\u4f7f\u7528AbstractRoutingDataSource+aop+annotation\u5728dao\u5c42\u51b3\u5b9a\u6570\u636e\u6e90\u3002 \u5982\u679c\u91c7\u7528\u4e86mybatis\uff0c \u53ef\u4ee5\u5c06\u8bfb\u5199\u5206\u79bb\u653e\u5728ORM\u5c42\uff0c\u6bd4\u5982mybatis\u53ef\u4ee5\u901a\u8fc7mybatis plugin\u62e6\u622asql\u8bed\u53e5\uff0c\u6240\u6709\u7684insert/update/delete\u90fd\u8bbf\u95eemaster\u5e93\uff0c\u6240\u6709\u7684select \u90fd\u8bbf\u95eesalve\u5e93\uff0c\u8fd9\u6837\u5bf9\u4e8edao\u5c42\u90fd\u662f\u900f\u660e\u3002 plugin\u5b9e\u73b0\u65f6\u53ef\u4ee5\u901a\u8fc7\u6ce8\u89e3\u6216\u8005\u5206\u6790\u8bed\u53e5\u662f\u8bfb\u5199\u65b9\u6cd5\u6765\u9009\u5b9a\u4e3b\u4ece\u5e93\u3002\u4e0d\u8fc7\u8fd9\u6837\u4f9d\u7136\u6709\u4e00\u4e2a\u95ee\u9898\uff0c \u4e5f\u5c31\u662f\u4e0d\u652f\u6301\u4e8b\u52a1\uff0c \u6240\u4ee5\u6211\u4eec\u8fd8\u9700\u8981\u91cd\u5199\u4e00\u4e0bDataSourceTransactionManager\uff0c \u5c06read-only\u7684\u4e8b\u52a1\u6254\u8fdb\u8bfb\u5e93\uff0c \u5176\u4f59\u7684\u6709\u8bfb\u6709\u5199\u7684\u6254\u8fdb\u5199\u5e93\u3002</p> <p>\u65b9\u6848\u4e09</p> <p>\u4f7f\u7528AbstractRoutingDataSource+aop+annotation\u5728service\u5c42\u51b3\u5b9a\u6570\u636e\u6e90\uff0c\u53ef\u4ee5\u652f\u6301\u4e8b\u52a1.</p> <p>\u7f3a\u70b9\uff1a\u7c7b\u5185\u90e8\u65b9\u6cd5\u901a\u8fc7this.xx()\u65b9\u5f0f\u76f8\u4e92\u8c03\u7528\u65f6\uff0caop\u4e0d\u4f1a\u8fdb\u884c\u62e6\u622a\uff0c\u9700\u8fdb\u884c\u7279\u6b8a\u5904\u7406\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#mysqldumpxtranbackup","title":"\u5907\u4efd\u8ba1\u5212\uff0cmysqldump\u4ee5\u53caxtranbackup\u7684\u5b9e\u73b0\u539f\u7406","text":"<p>(1)\u5907\u4efd\u8ba1\u5212</p> <p>\u89c6\u5e93\u7684\u5927\u5c0f\u6765\u5b9a\uff0c\u4e00\u822c\u6765\u8bf4 100G \u5185\u7684\u5e93\uff0c\u53ef\u4ee5\u8003\u8651\u4f7f\u7528 mysqldump \u6765\u505a\uff0c\u56e0\u4e3a mysqldump\u66f4\u52a0\u8f7b\u5de7\u7075\u6d3b\uff0c\u5907\u4efd\u65f6\u95f4\u9009\u5728\u4e1a\u52a1\u4f4e\u5cf0\u671f\uff0c\u53ef\u4ee5\u6bcf\u5929\u8fdb\u884c\u90fd\u8fdb\u884c\u5168\u91cf\u5907\u4efd(mysqldump \u5907\u4efd\u51fa\u6765\u7684\u6587\u4ef6\u6bd4\u8f83\u5c0f\uff0c\u538b\u7f29\u4e4b\u540e\u66f4\u5c0f)\u3002</p> <p>100G \u4ee5\u4e0a\u7684\u5e93\uff0c\u53ef\u4ee5\u8003\u8651\u7528 xtranbackup \u6765\u505a\uff0c\u5907\u4efd\u901f\u5ea6\u660e\u663e\u8981\u6bd4 mysqldump \u8981\u5feb\u3002\u4e00\u822c\u662f\u9009\u62e9\u4e00\u5468\u4e00\u4e2a\u5168\u5907\uff0c\u5176\u4f59\u6bcf\u5929\u8fdb\u884c\u589e\u91cf\u5907\u4efd\uff0c\u5907\u4efd\u65f6\u95f4\u4e3a\u4e1a\u52a1\u4f4e\u5cf0\u671f\u3002</p> <p>(2)\u5907\u4efd\u6062\u590d\u65f6\u95f4</p> <p>\u7269\u7406\u5907\u4efd\u6062\u590d\u5feb\uff0c\u903b\u8f91\u5907\u4efd\u6062\u590d\u6162</p> <p>\u8fd9\u91cc\u8ddf\u673a\u5668\uff0c\u5c24\u5176\u662f\u786c\u76d8\u7684\u901f\u7387\u6709\u5173\u7cfb\uff0c\u4ee5\u4e0b\u5217\u4e3e\u51e0\u4e2a\u4ec5\u4f9b\u53c2\u8003</p> <p>20G\u76842\u5206\u949f\uff08mysqldump\uff09</p> <p>80G\u768430\u5206\u949f(mysqldump)</p> <p>111G\u768430\u5206\u949f\uff08mysqldump)</p> <p>288G\u76843\u5c0f\u65f6\uff08xtra)</p> <p>3T\u76844\u5c0f\u65f6\uff08xtra)</p> <p>\u903b\u8f91\u5bfc\u5165\u65f6\u95f4\u4e00\u822c\u662f\u5907\u4efd\u65f6\u95f4\u76845\u500d\u4ee5\u4e0a</p> <p>(3)\u5907\u4efd\u6062\u590d\u5931\u8d25\u5982\u4f55\u5904\u7406</p> <p>\u9996\u5148\u5728\u6062\u590d\u4e4b\u524d\u5c31\u5e94\u8be5\u505a\u8db3\u51c6\u5907\u5de5\u4f5c\uff0c\u907f\u514d\u6062\u590d\u7684\u65f6\u5019\u51fa\u9519\u3002\u6bd4\u5982\u8bf4\u5907\u4efd\u4e4b\u540e\u7684\u6709\u6548\u6027\u68c0\u67e5\u3001\u6743\u9650\u68c0\u67e5\u3001\u7a7a\u95f4\u68c0\u67e5\u7b49\u3002\u5982\u679c\u4e07\u4e00\u62a5\u9519\uff0c\u518d\u6839\u636e\u62a5\u9519\u7684\u63d0\u793a\u6765\u8fdb\u884c\u76f8\u5e94\u7684\u8c03\u6574\u3002</p> <p>(4)mysqldump\u548cxtrabackup\u5b9e\u73b0\u539f\u7406</p> <p>mysqldump</p> <p>mysqldump \u5c5e\u4e8e\u903b\u8f91\u5907\u4efd\u3002\u52a0\u5165\u2013single-transaction \u9009\u9879\u53ef\u4ee5\u8fdb\u884c\u4e00\u81f4\u6027\u5907\u4efd\u3002\u540e\u53f0\u8fdb\u7a0b\u4f1a\u5148\u8bbe\u7f6e session \u7684\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b\u4e3a RR(SET SESSION TRANSACTION ISOLATION LEVELREPEATABLE READ)\uff0c\u4e4b\u540e\u663e\u5f0f\u5f00\u542f\u4e00\u4e2a\u4e8b\u52a1(START TRANSACTION /!40100 WITH CONSISTENTSNAPSHOT /)\uff0c\u8fd9\u6837\u5c31\u4fdd\u8bc1\u4e86\u8be5\u4e8b\u52a1\u91cc\u8bfb\u5230\u7684\u6570\u636e\u90fd\u662f\u4e8b\u52a1\u4e8b\u52a1\u65f6\u5019\u7684\u5feb\u7167\u3002\u4e4b\u540e\u518d\u628a\u8868\u7684\u6570\u636e\u8bfb\u53d6\u51fa\u6765\u3002\u5982\u679c\u52a0\u4e0a\u2013master-data=1 \u7684\u8bdd\uff0c\u5728\u521a\u5f00\u59cb\u7684\u65f6\u5019\u8fd8\u4f1a\u52a0\u4e00\u4e2a\u6570\u636e\u5e93\u7684\u8bfb\u9501(FLUSH TABLES WITH READ LOCK),\u7b49\u5f00\u542f\u4e8b\u52a1\u540e\uff0c\u518d\u8bb0\u5f55\u4e0b\u6570\u636e\u5e93\u6b64\u65f6 binlog \u7684\u4f4d\u7f6e(showmaster status)\uff0c\u9a6c\u4e0a\u89e3\u9501\uff0c\u518d\u8bfb\u53d6\u8868\u7684\u6570\u636e\u3002\u7b49\u6240\u6709\u7684\u6570\u636e\u90fd\u5df2\u7ecf\u5bfc\u5b8c\uff0c\u5c31\u53ef\u4ee5\u7ed3\u675f\u4e8b\u52a1</p> <p>Xtrabackup:</p> <p>xtrabackup \u5c5e\u4e8e\u7269\u7406\u5907\u4efd\uff0c\u76f4\u63a5\u62f7\u8d1d\u8868\u7a7a\u95f4\u6587\u4ef6\uff0c\u540c\u65f6\u4e0d\u65ad\u626b\u63cf\u4ea7\u751f\u7684 redo \u65e5\u5fd7\u5e76\u4fdd\u5b58\u4e0b\u6765\u3002\u6700\u540e\u5b8c\u6210 innodb \u7684\u5907\u4efd\u540e\uff0c\u4f1a\u505a\u4e00\u4e2a flush engine logs \u7684\u64cd\u4f5c(\u8001\u7248\u672c\u5728\u6709 bug\uff0c\u57285.6 \u4e0a\u4e0d\u505a\u6b64\u64cd\u4f5c\u4f1a\u4e22\u6570\u636e)\uff0c\u786e\u4fdd\u6240\u6709\u7684 redo log \u90fd\u5df2\u7ecf\u843d\u76d8(\u6d89\u53ca\u5230\u4e8b\u52a1\u7684\u4e24\u9636\u6bb5\u63d0\u4ea4</p> <p>\u6982\u5ff5\uff0c\u56e0\u4e3a xtrabackup \u5e76\u4e0d\u62f7\u8d1d binlog\uff0c\u6240\u4ee5\u5fc5\u987b\u4fdd\u8bc1\u6240\u6709\u7684 redo log \u90fd\u843d\u76d8\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u4e22\u6700\u540e\u4e00\u7ec4\u63d0\u4ea4\u4e8b\u52a1\u7684\u6570\u636e)\u3002\u8fd9\u4e2a\u65f6\u95f4\u70b9\u5c31\u662f innodb \u5b8c\u6210\u5907\u4efd\u7684\u65f6\u95f4\u70b9\uff0c\u6570\u636e\u6587\u4ef6\u867d\u7136\u4e0d\u662f\u4e00\u81f4\u6027\u7684\uff0c\u4f46\u662f\u6709\u8fd9\u6bb5\u65f6\u95f4\u7684 redo \u5c31\u53ef\u4ee5\u8ba9\u6570\u636e\u6587\u4ef6\u8fbe\u5230\u4e00\u81f4\u6027(\u6062\u590d\u7684\u65f6\u5019\u505a\u7684\u4e8b</p> <p>\u60c5)\u3002\u7136\u540e\u8fd8\u9700\u8981 flush tables with read lock\uff0c\u628a myisam \u7b49\u5176\u4ed6\u5f15\u64ce\u7684\u8868\u7ed9\u5907\u4efd\u51fa\u6765\uff0c\u5907\u4efd\u5b8c\u540e\u89e3\u9501\u3002\u8fd9\u6837\u5c31\u505a\u5230\u4e86\u5b8c\u7f8e\u7684\u70ed\u5907\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/MySQL%E9%9D%A2%E8%AF%95/#_61","title":"\u6570\u636e\u8868\u635f\u574f\u7684\u4fee\u590d\u65b9\u5f0f\u6709\u54ea\u4e9b\uff1f","text":"<p>\u4f7f\u7528 myisamchk \u6765\u4fee\u590d\uff0c\u5177\u4f53\u6b65\u9aa4\uff1a</p> <ul> <li>1\uff09\u4fee\u590d\u524d\u5c06mysql\u670d\u52a1\u505c\u6b62\u3002</li> <li>2\uff09\u6253\u5f00\u547d\u4ee4\u884c\u65b9\u5f0f\uff0c\u7136\u540e\u8fdb\u5165\u5230mysql\u7684/bin\u76ee\u5f55\u3002</li> <li>3\uff09\u6267\u884cmyisamchk \u2013recover \u6570\u636e\u5e93\u6240\u5728\u8def\u5f84/*.MYI</li> </ul> <p>\u4f7f\u7528repair table \u6216\u8005 OPTIMIZE table\u547d\u4ee4\u6765\u4fee\u590d\uff0cREPAIR TABLE table_name \u4fee\u590d\u8868 OPTIMIZE TABLE table_name \u4f18\u5316\u8868 REPAIR TABLE \u7528\u4e8e\u4fee\u590d\u88ab\u7834\u574f\u7684\u8868\u3002 OPTIMIZE TABLE \u7528\u4e8e\u56de\u6536\u95f2\u7f6e\u7684\u6570\u636e\u5e93\u7a7a\u95f4\uff0c\u5f53\u8868\u4e0a\u7684\u6570\u636e\u884c\u88ab\u5220\u9664\u65f6\uff0c\u6240\u5360\u636e\u7684\u78c1\u76d8\u7a7a\u95f4\u5e76\u6ca1\u6709\u7acb\u5373\u88ab\u56de\u6536\uff0c\u4f7f\u7528\u4e86OPTIMIZE TABLE\u547d\u4ee4\u540e\u8fd9\u4e9b\u7a7a\u95f4\u5c06\u88ab\u56de\u6536\uff0c\u5e76\u4e14\u5bf9\u78c1\u76d8\u4e0a\u7684\u6570\u636e\u884c\u8fdb\u884c\u91cd\u6392\uff08\u6ce8\u610f\uff1a\u662f\u78c1\u76d8\u4e0a\uff0c\u800c\u975e\u6570\u636e\u5e93\uff09</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/","title":"Redis\u9762\u8bd5\u9898","text":"<p>\u76ee\u5f55</p> <p>\u6982\u8ff0</p> <p>\u4ec0\u4e48\u662fRedis</p> <p>Redis\u6709\u54ea\u4e9b\u4f18\u7f3a\u70b9</p> <p>\u4e3a\u4ec0\u4e48\u8981\u7528 Redis /\u4e3a\u4ec0\u4e48\u8981\u7528\u7f13\u5b58</p> <p>\u4e3a\u4ec0\u4e48\u8981\u7528 Redis \u800c\u4e0d\u7528 map/guava \u505a\u7f13\u5b58?</p> <p>Redis\u4e3a\u4ec0\u4e48\u8fd9\u4e48\u5feb</p> <p>\u6570\u636e\u7c7b\u578b</p> <p>Redis\u6709\u54ea\u4e9b\u6570\u636e\u7c7b\u578b</p> <p>Redis\u7684\u5e94\u7528\u573a\u666f</p> <p>\u6301\u4e45\u5316</p> <p>\u4ec0\u4e48\u662fRedis\u6301\u4e45\u5316\uff1f</p> <p>Redis \u7684\u6301\u4e45\u5316\u673a\u5236\u662f\u4ec0\u4e48\uff1f\u5404\u81ea\u7684\u4f18\u7f3a\u70b9\uff1f</p> <p>\u5982\u4f55\u9009\u62e9\u5408\u9002\u7684\u6301\u4e45\u5316\u65b9\u5f0f</p> <p>Redis\u6301\u4e45\u5316\u6570\u636e\u548c\u7f13\u5b58\u600e\u4e48\u505a\u6269\u5bb9\uff1f</p> <p>\u8fc7\u671f\u952e\u7684\u5220\u9664\u7b56\u7565</p> <p>Redis\u7684\u8fc7\u671f\u952e\u7684\u5220\u9664\u7b56\u7565</p> <p>Redis key\u7684\u8fc7\u671f\u65f6\u95f4\u548c\u6c38\u4e45\u6709\u6548\u5206\u522b\u600e\u4e48\u8bbe\u7f6e\uff1f</p> <p>\u6211\u4eec\u77e5\u9053\u901a\u8fc7expire\u6765\u8bbe\u7f6ekey \u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u90a3\u4e48\u5bf9\u8fc7\u671f\u7684\u6570\u636e\u600e\u4e48\u5904\u7406\u5462?</p> <p>\u5185\u5b58\u76f8\u5173</p> <p>MySQL\u91cc\u67092000w\u6570\u636e\uff0credis\u4e2d\u53ea\u5b5820w\u7684\u6570\u636e\uff0c\u5982\u4f55\u4fdd\u8bc1redis\u4e2d\u7684\u6570\u636e\u90fd\u662f\u70ed\u70b9\u6570\u636e</p> <p>Redis\u7684\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\u6709\u54ea\u4e9b</p> <p>Redis\u4e3b\u8981\u6d88\u8017\u4ec0\u4e48\u7269\u7406\u8d44\u6e90\uff1f</p> <p>Redis\u7684\u5185\u5b58\u7528\u5b8c\u4e86\u4f1a\u53d1\u751f\u4ec0\u4e48\uff1f</p> <p>Redis\u5982\u4f55\u505a\u5185\u5b58\u4f18\u5316\uff1f</p> <p>\u7ebf\u7a0b\u6a21\u578b</p> <p>Redis\u7ebf\u7a0b\u6a21\u578b</p> <p>\u4e8b\u52a1</p> <p>\u4ec0\u4e48\u662f\u4e8b\u52a1\uff1f</p> <p>Redis\u4e8b\u52a1\u7684\u6982\u5ff5</p> <p>Redis\u4e8b\u52a1\u7684\u4e09\u4e2a\u9636\u6bb5</p> <p>Redis\u4e8b\u52a1\u76f8\u5173\u547d\u4ee4</p> <p>\u4e8b\u52a1\u7ba1\u7406\uff08ACID\uff09\u6982\u8ff0</p> <p>Redis\u4e8b\u52a1\u652f\u6301\u9694\u79bb\u6027\u5417</p> <p>Redis\u4e8b\u52a1\u4fdd\u8bc1\u539f\u5b50\u6027\u5417\uff0c\u652f\u6301\u56de\u6eda\u5417</p> <p>Redis\u4e8b\u52a1\u5176\u4ed6\u5b9e\u73b0</p> <p>\u96c6\u7fa4\u65b9\u6848</p> <p>\u54e8\u5175\u6a21\u5f0f</p> <p>\u5b98\u65b9Redis Cluster \u65b9\u6848(\u670d\u52a1\u7aef\u8def\u7531\u67e5\u8be2)</p> <p>\u57fa\u4e8e\u5ba2\u6237\u7aef\u5206\u914d</p> <p>\u57fa\u4e8e\u4ee3\u7406\u670d\u52a1\u5668\u5206\u7247</p> <p>Redis \u4e3b\u4ece\u67b6\u6784</p> <p>Redis\u96c6\u7fa4\u7684\u4e3b\u4ece\u590d\u5236\u6a21\u578b\u662f\u600e\u6837\u7684\uff1f</p> <p>\u751f\u4ea7\u73af\u5883\u4e2d\u7684 redis \u662f\u600e\u4e48\u90e8\u7f72\u7684\uff1f</p> <p>\u8bf4\u8bf4Redis\u54c8\u5e0c\u69fd\u7684\u6982\u5ff5\uff1f</p> <p>Redis\u96c6\u7fa4\u4f1a\u6709\u5199\u64cd\u4f5c\u4e22\u5931\u5417\uff1f\u4e3a\u4ec0\u4e48\uff1f</p> <p>Redis\u96c6\u7fa4\u4e4b\u95f4\u662f\u5982\u4f55\u590d\u5236\u7684\uff1f</p> <p>Redis\u96c6\u7fa4\u6700\u5927\u8282\u70b9\u4e2a\u6570\u662f\u591a\u5c11\uff1f</p> <p>Redis\u96c6\u7fa4\u5982\u4f55\u9009\u62e9\u6570\u636e\u5e93\uff1f</p> <p>\u5206\u533a</p> <p>Redis\u662f\u5355\u7ebf\u7a0b\u7684\uff0c\u5982\u4f55\u63d0\u9ad8\u591a\u6838CPU\u7684\u5229\u7528\u7387\uff1f</p> <p>\u4e3a\u4ec0\u4e48\u8981\u505aRedis\u5206\u533a\uff1f</p> <p>\u4f60\u77e5\u9053\u6709\u54ea\u4e9bRedis\u5206\u533a\u5b9e\u73b0\u65b9\u6848\uff1f</p> <p>Redis\u5206\u533a\u6709\u4ec0\u4e48\u7f3a\u70b9\uff1f</p> <p>\u5206\u5e03\u5f0f\u95ee\u9898</p> <p>Redis\u5b9e\u73b0\u5206\u5e03\u5f0f\u9501</p> <p>\u5982\u4f55\u89e3\u51b3 Redis \u7684\u5e76\u53d1\u7ade\u4e89 Key \u95ee\u9898</p> <p>\u5206\u5e03\u5f0fRedis\u662f\u524d\u671f\u505a\u8fd8\u662f\u540e\u671f\u89c4\u6a21\u4e0a\u6765\u4e86\u518d\u505a\u597d\uff1f\u4e3a\u4ec0\u4e48\uff1f</p> <p>\u4ec0\u4e48\u662f RedLock</p> <p>\u7f13\u5b58\u5f02\u5e38</p> <p>\u7f13\u5b58\u96ea\u5d29</p> <p>\u7f13\u5b58\u7a7f\u900f</p> <p>\u7f13\u5b58\u51fb\u7a7f</p> <p>\u7f13\u5b58\u9884\u70ed</p> <p>\u7f13\u5b58\u964d\u7ea7</p> <p>\u70ed\u70b9\u6570\u636e\u548c\u51b7\u6570\u636e</p> <p>\u7f13\u5b58\u70ed\u70b9key</p> <p>\u5e38\u7528\u5de5\u5177</p> <p>Redis\u652f\u6301\u7684Java\u5ba2\u6237\u7aef\u90fd\u6709\u54ea\u4e9b\uff1f\u5b98\u65b9\u63a8\u8350\u7528\u54ea\u4e2a\uff1f</p> <p>Redis\u548cRedisson\u6709\u4ec0\u4e48\u5173\u7cfb\uff1f</p> <p>Jedis\u4e0eRedisson\u5bf9\u6bd4\u6709\u4ec0\u4e48\u4f18\u7f3a\u70b9\uff1f</p> <p>\u5176\u4ed6\u95ee\u9898</p> <p>Redis\u4e0eMemcached\u7684\u533a\u522b</p> <p>\u5982\u4f55\u4fdd\u8bc1\u7f13\u5b58\u4e0e\u6570\u636e\u5e93\u53cc\u5199\u65f6\u7684\u6570\u636e\u4e00\u81f4\u6027\uff1f</p> <p>Redis\u5e38\u89c1\u6027\u80fd\u95ee\u9898\u548c\u89e3\u51b3\u65b9\u6848\uff1f</p> <p>Redis\u5b98\u65b9\u4e3a\u4ec0\u4e48\u4e0d\u63d0\u4f9bWindows\u7248\u672c\uff1f</p> <p>\u4e00\u4e2a\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u503c\u80fd\u5b58\u50a8\u6700\u5927\u5bb9\u91cf\u662f\u591a\u5c11\uff1f</p> <p>Redis\u5982\u4f55\u505a\u5927\u91cf\u6570\u636e\u63d2\u5165\uff1f</p> <p>\u5047\u5982Redis\u91cc\u9762\u67091\u4ebf\u4e2akey\uff0c\u5176\u4e2d\u670910w\u4e2akey\u662f\u4ee5\u67d0\u4e2a\u56fa\u5b9a\u7684\u5df2\u77e5\u7684\u524d\u7f00\u5f00\u5934\u7684\uff0c\u5982\u679c\u5c06\u5b83\u4eec\u5168\u90e8\u627e\u51fa\u6765\uff1f</p> <p>\u4f7f\u7528Redis\u505a\u8fc7\u5f02\u6b65\u961f\u5217\u5417\uff0c\u662f\u5982\u4f55\u5b9e\u73b0\u7684</p> <p>Redis\u5982\u4f55\u5b9e\u73b0\u5ef6\u65f6\u961f\u5217</p> <p>Redis\u56de\u6536\u8fdb\u7a0b\u5982\u4f55\u5de5\u4f5c\u7684\uff1f</p> <p>Redis\u56de\u6536\u4f7f\u7528\u7684\u662f\u4ec0\u4e48\u7b97\u6cd5\uff1f</p> <p>\u7d6e\u53e8</p> <p>\u56de\u671b\u8fc7\u53bb</p> <p>\u7f13\u5b58\u77e5\u8bc6\u70b9</p> <p>\u7f13\u5b58\u6709\u54ea\u4e9b\u7c7b\u578b\uff1f</p> <p>\u672c\u5730\u7f13\u5b58\uff1a</p> <p>\u5206\u5e03\u5f0f\u7f13\u5b58\uff1a</p> <p>\u591a\u7ea7\u7f13\u5b58\uff1a</p> <p>\u6dd8\u6c70\u7b56\u7565</p> <p>Memcache</p> <p>Redis</p> <p>\u8be6\u89e3 Redis</p> <p>\u529f\u80fd</p> <p>\u6211\u4eec\u5148\u770b\u57fa\u7840\u7c7b\u578b\uff1a</p> <p>String\uff1a</p> <p>Hash\uff1a</p> <p>List\uff1a</p> <p>Set\uff1a</p> <p>Sorted Set\uff1a</p> <p>\u9ad8\u7ea7\u7528\u6cd5\uff1a</p> <p>Bitmap :</p> <p>HyperLogLog:</p> <p>Geospatial:</p> <p>pub/sub\uff1a</p> <p>Pipeline\uff1a</p> <p>Lua\uff1a</p> <p>\u4e8b\u52a1\uff1a</p> <p>\u6301\u4e45\u5316</p> <p>\u9ad8\u53ef\u7528</p> <p>\u54e8\u5175</p> <p>\u4e3b\u4ece</p> <p>key \u5931\u6548\u673a\u5236</p> <p>\u7f13\u5b58\u5e38\u89c1\u95ee\u9898</p> <p>\u7f13\u5b58\u66f4\u65b0\u65b9\u5f0f</p> <p>\u6570\u636e\u4e0d\u4e00\u81f4</p> <p>\u7f13\u5b58\u7a7f\u900f</p> <p>\u7f13\u5b58\u51fb\u7a7f</p> <p>\u7f13\u5b58\u96ea\u5d29</p> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_1","title":"\u6982\u8ff0","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis","title":"\u4ec0\u4e48\u662fRedis","text":"<p>Redis(Remote Dictionary Server) \u662f\u4e00\u4e2a\u4f7f\u7528 C \u8bed\u8a00\u7f16\u5199\u7684\uff0c\u5f00\u6e90\u7684\uff08BSD\u8bb8\u53ef\uff09\u9ad8\u6027\u80fd\u975e\u5173\u7cfb\u578b\uff08NoSQL\uff09\u7684\u952e\u503c\u5bf9\u6570\u636e\u5e93\u3002</p> <p>Redis \u53ef\u4ee5\u5b58\u50a8\u952e\u548c\u4e94\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u503c\u4e4b\u95f4\u7684\u6620\u5c04\u3002\u952e\u7684\u7c7b\u578b\u53ea\u80fd\u4e3a\u5b57\u7b26\u4e32\uff0c\u503c\u652f\u6301\u4e94\u79cd\u6570\u636e\u7c7b\u578b\uff1a\u5b57\u7b26\u4e32\u3001\u5217\u8868\u3001\u96c6\u5408\u3001\u6563\u5217\u8868\u3001\u6709\u5e8f\u96c6\u5408\u3002</p> <p>\u4e0e\u4f20\u7edf\u6570\u636e\u5e93\u4e0d\u540c\u7684\u662f Redis \u7684\u6570\u636e\u662f\u5b58\u5728\u5185\u5b58\u4e2d\u7684\uff0c\u6240\u4ee5\u8bfb\u5199\u901f\u5ea6\u975e\u5e38\u5feb\uff0c\u56e0\u6b64 redis \u88ab\u5e7f\u6cdb\u5e94\u7528\u4e8e\u7f13\u5b58\u65b9\u5411\uff0c\u6bcf\u79d2\u53ef\u4ee5\u5904\u7406\u8d85\u8fc7 10\u4e07\u6b21\u8bfb\u5199\u64cd\u4f5c\uff0c\u662f\u5df2\u77e5\u6027\u80fd\u6700\u5feb\u7684Key-Value DB\u3002\u53e6\u5916\uff0cRedis \u4e5f\u7ecf\u5e38\u7528\u6765\u505a\u5206\u5e03\u5f0f\u9501\u3002\u9664\u6b64\u4e4b\u5916\uff0cRedis \u652f\u6301\u4e8b\u52a1 \u3001\u6301\u4e45\u5316\u3001LUA\u811a\u672c\u3001LRU\u9a71\u52a8\u4e8b\u4ef6\u3001\u591a\u79cd\u96c6\u7fa4\u65b9\u6848\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_1","title":"Redis\u6709\u54ea\u4e9b\u4f18\u7f3a\u70b9","text":"<p>\u4f18\u70b9</p> <ul> <li>\u8bfb\u5199\u6027\u80fd\u4f18\u5f02\uff0c Redis\u80fd\u8bfb\u7684\u901f\u5ea6\u662f110000\u6b21/s\uff0c\u5199\u7684\u901f\u5ea6\u662f81000\u6b21/s\u3002</li> <li>\u652f\u6301\u6570\u636e\u6301\u4e45\u5316\uff0c\u652f\u6301AOF\u548cRDB\u4e24\u79cd\u6301\u4e45\u5316\u65b9\u5f0f\u3002</li> <li>\u652f\u6301\u4e8b\u52a1\uff0cRedis\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u662f\u539f\u5b50\u6027\u7684\uff0c\u540c\u65f6Redis\u8fd8\u652f\u6301\u5bf9\u51e0\u4e2a\u64cd\u4f5c\u5408\u5e76\u540e\u7684\u539f\u5b50\u6027\u6267\u884c\u3002</li> <li>\u6570\u636e\u7ed3\u6784\u4e30\u5bcc\uff0c\u9664\u4e86\u652f\u6301string\u7c7b\u578b\u7684value\u5916\u8fd8\u652f\u6301hash\u3001set\u3001zset\u3001list\u7b49\u6570\u636e\u7ed3\u6784\u3002</li> <li>\u652f\u6301\u4e3b\u4ece\u590d\u5236\uff0c\u4e3b\u673a\u4f1a\u81ea\u52a8\u5c06\u6570\u636e\u540c\u6b65\u5230\u4ece\u673a\uff0c\u53ef\u4ee5\u8fdb\u884c\u8bfb\u5199\u5206\u79bb\u3002</li> </ul> <p>\u7f3a\u70b9</p> <ul> <li>\u6570\u636e\u5e93\u5bb9\u91cf\u53d7\u5230\u7269\u7406\u5185\u5b58\u7684\u9650\u5236\uff0c\u4e0d\u80fd\u7528\u4f5c\u6d77\u91cf\u6570\u636e\u7684\u9ad8\u6027\u80fd\u8bfb\u5199\uff0c\u56e0\u6b64Redis\u9002\u5408\u7684\u573a\u666f\u4e3b\u8981\u5c40\u9650\u5728\u8f83\u5c0f\u6570\u636e\u91cf\u7684\u9ad8\u6027\u80fd\u64cd\u4f5c\u548c\u8fd0\u7b97\u4e0a\u3002</li> <li>Redis \u4e0d\u5177\u5907\u81ea\u52a8\u5bb9\u9519\u548c\u6062\u590d\u529f\u80fd\uff0c\u4e3b\u673a\u4ece\u673a\u7684\u5b95\u673a\u90fd\u4f1a\u5bfc\u81f4\u524d\u7aef\u90e8\u5206\u8bfb\u5199\u8bf7\u6c42\u5931\u8d25\uff0c\u9700\u8981\u7b49\u5f85\u673a\u5668\u91cd\u542f\u6216\u8005\u624b\u52a8\u5207\u6362\u524d\u7aef\u7684IP\u624d\u80fd\u6062\u590d\u3002</li> <li>\u4e3b\u673a\u5b95\u673a\uff0c\u5b95\u673a\u524d\u6709\u90e8\u5206\u6570\u636e\u672a\u80fd\u53ca\u65f6\u540c\u6b65\u5230\u4ece\u673a\uff0c\u5207\u6362IP\u540e\u8fd8\u4f1a\u5f15\u5165\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\uff0c\u964d\u4f4e\u4e86\u7cfb\u7edf\u7684\u53ef\u7528\u6027\u3002</li> <li>Redis \u8f83\u96be\u652f\u6301\u5728\u7ebf\u6269\u5bb9\uff0c\u5728\u96c6\u7fa4\u5bb9\u91cf\u8fbe\u5230\u4e0a\u9650\u65f6\u5728\u7ebf\u6269\u5bb9\u4f1a\u53d8\u5f97\u5f88\u590d\u6742\u3002\u4e3a\u907f\u514d\u8fd9\u4e00\u95ee\u9898\uff0c\u8fd0\u7ef4\u4eba\u5458\u5728\u7cfb\u7edf\u4e0a\u7ebf\u65f6\u5fc5\u987b\u786e\u4fdd\u6709\u8db3\u591f\u7684\u7a7a\u95f4\uff0c\u8fd9\u5bf9\u8d44\u6e90\u9020\u6210\u4e86\u5f88\u5927\u7684\u6d6a\u8d39\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_2","title":"\u4e3a\u4ec0\u4e48\u8981\u7528 Redis /\u4e3a\u4ec0\u4e48\u8981\u7528\u7f13\u5b58","text":"<p>\u4e3b\u8981\u4ece\u201c\u9ad8\u6027\u80fd\u201d\u548c\u201c\u9ad8\u5e76\u53d1\u201d\u8fd9\u4e24\u70b9\u6765\u770b\u5f85\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p>\u9ad8\u6027\u80fd\uff1a</p> <p>\u5047\u5982\u7528\u6237\u7b2c\u4e00\u6b21\u8bbf\u95ee\u6570\u636e\u5e93\u4e2d\u7684\u67d0\u4e9b\u6570\u636e\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u4f1a\u6bd4\u8f83\u6162\uff0c\u56e0\u4e3a\u662f\u4ece\u786c\u76d8\u4e0a\u8bfb\u53d6\u7684\u3002\u5c06\u8be5\u7528\u6237\u8bbf\u95ee\u7684\u6570\u636e\u5b58\u5728\u6570\u7f13\u5b58\u4e2d\uff0c\u8fd9\u6837\u4e0b\u4e00\u6b21\u518d\u8bbf\u95ee\u8fd9\u4e9b\u6570\u636e\u7684\u65f6\u5019\u5c31\u53ef\u4ee5\u76f4\u63a5\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\u4e86\u3002\u64cd\u4f5c\u7f13\u5b58\u5c31\u662f\u76f4\u63a5\u64cd\u4f5c\u5185\u5b58\uff0c\u6240\u4ee5\u901f\u5ea6\u76f8\u5f53\u5feb\u3002\u5982\u679c\u6570\u636e\u5e93\u4e2d\u7684\u5bf9\u5e94\u6570\u636e\u6539\u53d8\u7684\u4e4b\u540e\uff0c\u540c\u6b65\u6539\u53d8\u7f13\u5b58\u4e2d\u76f8\u5e94\u7684\u6570\u636e\u5373\u53ef\uff01</p> <p></p> <p>\u9ad8\u5e76\u53d1\uff1a</p> <p>\u76f4\u63a5\u64cd\u4f5c\u7f13\u5b58\u80fd\u591f\u627f\u53d7\u7684\u8bf7\u6c42\u662f\u8fdc\u8fdc\u5927\u4e8e\u76f4\u63a5\u8bbf\u95ee\u6570\u636e\u5e93\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u8003\u8651\u628a\u6570\u636e\u5e93\u4e2d\u7684\u90e8\u5206\u6570\u636e\u8f6c\u79fb\u5230\u7f13\u5b58\u4e2d\u53bb\uff0c\u8fd9\u6837\u7528\u6237\u7684\u4e00\u90e8\u5206\u8bf7\u6c42\u4f1a\u76f4\u63a5\u5230\u7f13\u5b58\u8fd9\u91cc\u800c\u4e0d\u7528\u7ecf\u8fc7\u6570\u636e\u5e93\u3002</p> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis-mapguava","title":"\u4e3a\u4ec0\u4e48\u8981\u7528 Redis \u800c\u4e0d\u7528 map/guava \u505a\u7f13\u5b58?","text":"<p>\u7f13\u5b58\u5206\u4e3a\u672c\u5730\u7f13\u5b58\u548c\u5206\u5e03\u5f0f\u7f13\u5b58\u3002\u4ee5 Java \u4e3a\u4f8b\uff0c\u4f7f\u7528\u81ea\u5e26\u7684 map \u6216\u8005 guava \u5b9e\u73b0\u7684\u662f\u672c\u5730\u7f13\u5b58\uff0c\u6700\u4e3b\u8981\u7684\u7279\u70b9\u662f\u8f7b\u91cf\u4ee5\u53ca\u5feb\u901f\uff0c\u751f\u547d\u5468\u671f\u968f\u7740 jvm \u7684\u9500\u6bc1\u800c\u7ed3\u675f\uff0c\u5e76\u4e14\u5728\u591a\u5b9e\u4f8b\u7684\u60c5\u51b5\u4e0b\uff0c\u6bcf\u4e2a\u5b9e\u4f8b\u90fd\u9700\u8981\u5404\u81ea\u4fdd\u5b58\u4e00\u4efd\u7f13\u5b58\uff0c\u7f13\u5b58\u4e0d\u5177\u6709\u4e00\u81f4\u6027\u3002</p> <p>\u4f7f\u7528 redis \u6216 memcached \u4e4b\u7c7b\u7684\u79f0\u4e3a\u5206\u5e03\u5f0f\u7f13\u5b58\uff0c\u5728\u591a\u5b9e\u4f8b\u7684\u60c5\u51b5\u4e0b\uff0c\u5404\u5b9e\u4f8b\u5171\u7528\u4e00\u4efd\u7f13\u5b58\u6570\u636e\uff0c\u7f13\u5b58\u5177\u6709\u4e00\u81f4\u6027\u3002\u7f3a\u70b9\u662f\u9700\u8981\u4fdd\u6301 redis \u6216 memcached\u670d\u52a1\u7684\u9ad8\u53ef\u7528\uff0c\u6574\u4e2a\u7a0b\u5e8f\u67b6\u6784\u4e0a\u8f83\u4e3a\u590d\u6742\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_3","title":"Redis\u4e3a\u4ec0\u4e48\u8fd9\u4e48\u5feb","text":"<p>1\u3001\u5b8c\u5168\u57fa\u4e8e\u5185\u5b58\uff0c\u7edd\u5927\u90e8\u5206\u8bf7\u6c42\u662f\u7eaf\u7cb9\u7684\u5185\u5b58\u64cd\u4f5c\uff0c\u975e\u5e38\u5feb\u901f\u3002\u6570\u636e\u5b58\u5728\u5185\u5b58\u4e2d\uff0c\u7c7b\u4f3c\u4e8e HashMap\uff0cHashMap \u7684\u4f18\u52bf\u5c31\u662f\u67e5\u627e\u548c\u64cd\u4f5c\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u662fO(1)\uff1b</p> <p>2\u3001\u6570\u636e\u7ed3\u6784\u7b80\u5355\uff0c\u5bf9\u6570\u636e\u64cd\u4f5c\u4e5f\u7b80\u5355\uff0cRedis \u4e2d\u7684\u6570\u636e\u7ed3\u6784\u662f\u4e13\u95e8\u8fdb\u884c\u8bbe\u8ba1\u7684\uff1b</p> <p>3\u3001\u91c7\u7528\u5355\u7ebf\u7a0b\uff0c\u907f\u514d\u4e86\u4e0d\u5fc5\u8981\u7684\u4e0a\u4e0b\u6587\u5207\u6362\u548c\u7ade\u4e89\u6761\u4ef6\uff0c\u4e5f\u4e0d\u5b58\u5728\u591a\u8fdb\u7a0b\u6216\u8005\u591a\u7ebf\u7a0b\u5bfc\u81f4\u7684\u5207\u6362\u800c\u6d88\u8017 CPU\uff0c\u4e0d\u7528\u53bb\u8003\u8651\u5404\u79cd\u9501\u7684\u95ee\u9898\uff0c\u4e0d\u5b58\u5728\u52a0\u9501\u91ca\u653e\u9501\u64cd\u4f5c\uff0c\u6ca1\u6709\u56e0\u4e3a\u53ef\u80fd\u51fa\u73b0\u6b7b\u9501\u800c\u5bfc\u81f4\u7684\u6027\u80fd\u6d88\u8017\uff1b</p> <p>4\u3001\u4f7f\u7528\u591a\u8def I/O \u590d\u7528\u6a21\u578b\uff0c\u975e\u963b\u585e IO\uff1b</p> <p>5\u3001\u4f7f\u7528\u5e95\u5c42\u6a21\u578b\u4e0d\u540c\uff0c\u5b83\u4eec\u4e4b\u95f4\u5e95\u5c42\u5b9e\u73b0\u65b9\u5f0f\u4ee5\u53ca\u4e0e\u5ba2\u6237\u7aef\u4e4b\u95f4\u901a\u4fe1\u7684\u5e94\u7528\u534f\u8bae\u4e0d\u4e00\u6837\uff0cRedis \u76f4\u63a5\u81ea\u5df1\u6784\u5efa\u4e86 VM \u673a\u5236 \uff0c\u56e0\u4e3a\u4e00\u822c\u7684\u7cfb\u7edf\u8c03\u7528\u7cfb\u7edf\u51fd\u6570\u7684\u8bdd\uff0c\u4f1a\u6d6a\u8d39\u4e00\u5b9a\u7684\u65f6\u95f4\u53bb\u79fb\u52a8\u548c\u8bf7\u6c42\uff1b</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_2","title":"\u6570\u636e\u7c7b\u578b","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_4","title":"Redis\u6709\u54ea\u4e9b\u6570\u636e\u7c7b\u578b","text":"<p>Redis\u4e3b\u8981\u67095\u79cd\u6570\u636e\u7c7b\u578b\uff0c\u5305\u62ecString\uff0cList\uff0cSet\uff0cZset\uff0cHash\uff0c\u6ee1\u8db3\u5927\u90e8\u5206\u7684\u4f7f\u7528\u8981\u6c42</p> \u6570\u636e\u7c7b\u578b \u53ef\u4ee5\u5b58\u50a8\u7684\u503c \u64cd\u4f5c \u5e94\u7528\u573a\u666f STRING \u5b57\u7b26\u4e32\u3001\u6574\u6570\u6216\u8005\u6d6e\u70b9\u6570 \u5bf9\u6574\u4e2a\u5b57\u7b26\u4e32\u6216\u8005\u5b57\u7b26\u4e32\u7684\u5176\u4e2d\u4e00\u90e8\u5206\u6267\u884c\u64cd\u4f5c \u5bf9\u6574\u6570\u548c\u6d6e\u70b9\u6570\u6267\u884c\u81ea\u589e\u6216\u8005\u81ea\u51cf\u64cd\u4f5c \u505a\u7b80\u5355\u7684\u952e\u503c\u5bf9\u7f13\u5b58 LIST \u5217\u8868 \u4ece\u4e24\u7aef\u538b\u5165\u6216\u8005\u5f39\u51fa\u5143\u7d20 \u5bf9\u5355\u4e2a\u6216\u8005\u591a\u4e2a\u5143\u7d20\u8fdb\u884c\u4fee\u526a\uff0c \u53ea\u4fdd\u7559\u4e00\u4e2a\u8303\u56f4\u5185\u7684\u5143\u7d20 \u5b58\u50a8\u4e00\u4e9b\u5217\u8868\u578b\u7684\u6570\u636e\u7ed3\u6784\uff0c\u7c7b\u4f3c\u7c89\u4e1d\u5217\u8868\u3001\u6587\u7ae0\u7684\u8bc4\u8bba\u5217\u8868\u4e4b\u7c7b\u7684\u6570\u636e SET \u65e0\u5e8f\u96c6\u5408 \u6dfb\u52a0\u3001\u83b7\u53d6\u3001\u79fb\u9664\u5355\u4e2a\u5143\u7d20 \u68c0\u67e5\u4e00\u4e2a\u5143\u7d20\u662f\u5426\u5b58\u5728\u4e8e\u96c6\u5408\u4e2d \u8ba1\u7b97\u4ea4\u96c6\u3001\u5e76\u96c6\u3001\u5dee\u96c6 \u4ece\u96c6\u5408\u91cc\u9762\u968f\u673a\u83b7\u53d6\u5143\u7d20 \u4ea4\u96c6\u3001\u5e76\u96c6\u3001\u5dee\u96c6\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982\u4ea4\u96c6\uff0c\u53ef\u4ee5\u628a\u4e24\u4e2a\u4eba\u7684\u7c89\u4e1d\u5217\u8868\u6574\u4e00\u4e2a\u4ea4\u96c6 HASH \u5305\u542b\u952e\u503c\u5bf9\u7684\u65e0\u5e8f\u6563\u5217\u8868 \u6dfb\u52a0\u3001\u83b7\u53d6\u3001\u79fb\u9664\u5355\u4e2a\u952e\u503c\u5bf9 \u83b7\u53d6\u6240\u6709\u952e\u503c\u5bf9 \u68c0\u67e5\u67d0\u4e2a\u952e\u662f\u5426\u5b58\u5728 \u7ed3\u6784\u5316\u7684\u6570\u636e\uff0c\u6bd4\u5982\u4e00\u4e2a\u5bf9\u8c61 ZSET \u6709\u5e8f\u96c6\u5408 \u6dfb\u52a0\u3001\u83b7\u53d6\u3001\u5220\u9664\u5143\u7d20 \u6839\u636e\u5206\u503c\u8303\u56f4\u6216\u8005\u6210\u5458\u6765\u83b7\u53d6\u5143\u7d20 \u8ba1\u7b97\u4e00\u4e2a\u952e\u7684\u6392\u540d \u53bb\u91cd\u4f46\u53ef\u4ee5\u6392\u5e8f\uff0c\u5982\u83b7\u53d6\u6392\u540d\u524d\u51e0\u540d\u7684\u7528\u6237"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_5","title":"Redis\u7684\u5e94\u7528\u573a\u666f","text":"<p>\u603b\u7ed3\u4e00</p> <p>\u8ba1\u6570\u5668</p> <p>\u53ef\u4ee5\u5bf9 String \u8fdb\u884c\u81ea\u589e\u81ea\u51cf\u8fd0\u7b97\uff0c\u4ece\u800c\u5b9e\u73b0\u8ba1\u6570\u5668\u529f\u80fd\u3002Redis \u8fd9\u79cd\u5185\u5b58\u578b\u6570\u636e\u5e93\u7684\u8bfb\u5199\u6027\u80fd\u975e\u5e38\u9ad8\uff0c\u5f88\u9002\u5408\u5b58\u50a8\u9891\u7e41\u8bfb\u5199\u7684\u8ba1\u6570\u91cf\u3002</p> <p>\u7f13\u5b58</p> <p>\u5c06\u70ed\u70b9\u6570\u636e\u653e\u5230\u5185\u5b58\u4e2d\uff0c\u8bbe\u7f6e\u5185\u5b58\u7684\u6700\u5927\u4f7f\u7528\u91cf\u4ee5\u53ca\u6dd8\u6c70\u7b56\u7565\u6765\u4fdd\u8bc1\u7f13\u5b58\u7684\u547d\u4e2d\u7387\u3002</p> <p>\u4f1a\u8bdd\u7f13\u5b58</p> <p>\u53ef\u4ee5\u4f7f\u7528 Redis \u6765\u7edf\u4e00\u5b58\u50a8\u591a\u53f0\u5e94\u7528\u670d\u52a1\u5668\u7684\u4f1a\u8bdd\u4fe1\u606f\u3002\u5f53\u5e94\u7528\u670d\u52a1\u5668\u4e0d\u518d\u5b58\u50a8\u7528\u6237\u7684\u4f1a\u8bdd\u4fe1\u606f\uff0c\u4e5f\u5c31\u4e0d\u518d\u5177\u6709\u72b6\u6001\uff0c\u4e00\u4e2a\u7528\u6237\u53ef\u4ee5\u8bf7\u6c42\u4efb\u610f\u4e00\u4e2a\u5e94\u7528\u670d\u52a1\u5668\uff0c\u4ece\u800c\u66f4\u5bb9\u6613\u5b9e\u73b0\u9ad8\u53ef\u7528\u6027\u4ee5\u53ca\u53ef\u4f38\u7f29\u6027\u3002</p> <p>\u5168\u9875\u7f13\u5b58\uff08FPC\uff09</p> <p>\u9664\u57fa\u672c\u7684\u4f1a\u8bddtoken\u4e4b\u5916\uff0cRedis\u8fd8\u63d0\u4f9b\u5f88\u7b80\u4fbf\u7684FPC\u5e73\u53f0\u3002\u4ee5Magento\u4e3a\u4f8b\uff0cMagento\u63d0\u4f9b\u4e00\u4e2a\u63d2\u4ef6\u6765\u4f7f\u7528Redis\u4f5c\u4e3a\u5168\u9875\u7f13\u5b58\u540e\u7aef\u3002\u6b64\u5916\uff0c\u5bf9WordPress\u7684\u7528\u6237\u6765\u8bf4\uff0cPantheon\u6709\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u63d2\u4ef6 wp-redis\uff0c\u8fd9\u4e2a\u63d2\u4ef6\u80fd\u5e2e\u52a9\u4f60\u4ee5\u6700\u5feb\u901f\u5ea6\u52a0\u8f7d\u4f60\u66fe\u6d4f\u89c8\u8fc7\u7684\u9875\u9762\u3002</p> <p>\u67e5\u627e\u8868</p> <p>\u4f8b\u5982 DNS \u8bb0\u5f55\u5c31\u5f88\u9002\u5408\u4f7f\u7528 Redis \u8fdb\u884c\u5b58\u50a8\u3002\u67e5\u627e\u8868\u548c\u7f13\u5b58\u7c7b\u4f3c\uff0c\u4e5f\u662f\u5229\u7528\u4e86 Redis \u5feb\u901f\u7684\u67e5\u627e\u7279\u6027\u3002\u4f46\u662f\u67e5\u627e\u8868\u7684\u5185\u5bb9\u4e0d\u80fd\u5931\u6548\uff0c\u800c\u7f13\u5b58\u7684\u5185\u5bb9\u53ef\u4ee5\u5931\u6548\uff0c\u56e0\u4e3a\u7f13\u5b58\u4e0d\u4f5c\u4e3a\u53ef\u9760\u7684\u6570\u636e\u6765\u6e90\u3002</p> <p>\u6d88\u606f\u961f\u5217(\u53d1\u5e03/\u8ba2\u9605\u529f\u80fd)</p> <p>List \u662f\u4e00\u4e2a\u53cc\u5411\u94fe\u8868\uff0c\u53ef\u4ee5\u901a\u8fc7 lpush \u548c rpop \u5199\u5165\u548c\u8bfb\u53d6\u6d88\u606f\u3002\u4e0d\u8fc7\u6700\u597d\u4f7f\u7528 Kafka\u3001RabbitMQ \u7b49\u6d88\u606f\u4e2d\u95f4\u4ef6\u3002</p> <p>\u5206\u5e03\u5f0f\u9501\u5b9e\u73b0</p> <p>\u5728\u5206\u5e03\u5f0f\u573a\u666f\u4e0b\uff0c\u65e0\u6cd5\u4f7f\u7528\u5355\u673a\u73af\u5883\u4e0b\u7684\u9501\u6765\u5bf9\u591a\u4e2a\u8282\u70b9\u4e0a\u7684\u8fdb\u7a0b\u8fdb\u884c\u540c\u6b65\u3002\u53ef\u4ee5\u4f7f\u7528 Redis \u81ea\u5e26\u7684 SETNX \u547d\u4ee4\u5b9e\u73b0\u5206\u5e03\u5f0f\u9501\uff0c\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u53ef\u4ee5\u4f7f\u7528\u5b98\u65b9\u63d0\u4f9b\u7684 RedLock \u5206\u5e03\u5f0f\u9501\u5b9e\u73b0\u3002</p> <p>\u5176\u5b83</p> <p>Set \u53ef\u4ee5\u5b9e\u73b0\u4ea4\u96c6\u3001\u5e76\u96c6\u7b49\u64cd\u4f5c\uff0c\u4ece\u800c\u5b9e\u73b0\u5171\u540c\u597d\u53cb\u7b49\u529f\u80fd\u3002ZSet \u53ef\u4ee5\u5b9e\u73b0\u6709\u5e8f\u6027\u64cd\u4f5c\uff0c\u4ece\u800c\u5b9e\u73b0\u6392\u884c\u699c\u7b49\u529f\u80fd\u3002</p> <p>\u603b\u7ed3\u4e8c</p> <p>Redis\u76f8\u6bd4\u5176\u4ed6\u7f13\u5b58\uff0c\u6709\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u4f18\u52bf\uff0c\u5c31\u662f\u652f\u6301\u591a\u79cd\u6570\u636e\u7c7b\u578b\u3002</p> <p>\u6570\u636e\u7c7b\u578b\u8bf4\u660estring\u5b57\u7b26\u4e32\uff0c\u6700\u7b80\u5355\u7684k-v\u5b58\u50a8hashhash\u683c\u5f0f\uff0cvalue\u4e3afield\u548cvalue\uff0c\u9002\u5408ID-Detail\u8fd9\u6837\u7684\u573a\u666f\u3002list\u7b80\u5355\u7684list\uff0c\u987a\u5e8f\u5217\u8868\uff0c\u652f\u6301\u9996\u4f4d\u6216\u8005\u672b\u5c3e\u63d2\u5165\u6570\u636eset\u65e0\u5e8flist\uff0c\u67e5\u627e\u901f\u5ea6\u5feb\uff0c\u9002\u5408\u4ea4\u96c6\u3001\u5e76\u96c6\u3001\u5dee\u96c6\u5904\u7406sorted set\u6709\u5e8f\u7684set</p> <p>\u5176\u5b9e\uff0c\u901a\u8fc7\u4e0a\u9762\u7684\u6570\u636e\u7c7b\u578b\u7684\u7279\u6027\uff0c\u57fa\u672c\u5c31\u80fd\u60f3\u5230\u5408\u9002\u7684\u5e94\u7528\u573a\u666f\u4e86\u3002</p> <p>string\u2014\u2014\u9002\u5408\u6700\u7b80\u5355\u7684k-v\u5b58\u50a8\uff0c\u7c7b\u4f3c\u4e8ememcached\u7684\u5b58\u50a8\u7ed3\u6784\uff0c\u77ed\u4fe1\u9a8c\u8bc1\u7801\uff0c\u914d\u7f6e\u4fe1\u606f\u7b49\uff0c\u5c31\u7528\u8fd9\u79cd\u7c7b\u578b\u6765\u5b58\u50a8\u3002</p> <p>hash\u2014\u2014\u4e00\u822ckey\u4e3aID\u6216\u8005\u552f\u4e00\u6807\u793a\uff0cvalue\u5bf9\u5e94\u7684\u5c31\u662f\u8be6\u60c5\u4e86\u3002\u5982\u5546\u54c1\u8be6\u60c5\uff0c\u4e2a\u4eba\u4fe1\u606f\u8be6\u60c5\uff0c\u65b0\u95fb\u8be6\u60c5\u7b49\u3002</p> <p>list\u2014\u2014\u56e0\u4e3alist\u662f\u6709\u5e8f\u7684\uff0c\u6bd4\u8f83\u9002\u5408\u5b58\u50a8\u4e00\u4e9b\u6709\u5e8f\u4e14\u6570\u636e\u76f8\u5bf9\u56fa\u5b9a\u7684\u6570\u636e\u3002\u5982\u7701\u5e02\u533a\u8868\u3001\u5b57\u5178\u8868\u7b49\u3002\u56e0\u4e3alist\u662f\u6709\u5e8f\u7684\uff0c\u9002\u5408\u6839\u636e\u5199\u5165\u7684\u65f6\u95f4\u6765\u6392\u5e8f\uff0c\u5982\uff1a\u6700\u65b0\u7684***\uff0c\u6d88\u606f\u961f\u5217\u7b49\u3002</p> <p>set\u2014\u2014\u53ef\u4ee5\u7b80\u5355\u7684\u7406\u89e3\u4e3aID-List\u7684\u6a21\u5f0f\uff0c\u5982\u5fae\u535a\u4e2d\u4e00\u4e2a\u4eba\u6709\u54ea\u4e9b\u597d\u53cb\uff0cset\u6700\u725b\u7684\u5730\u65b9\u5728\u4e8e\uff0c\u53ef\u4ee5\u5bf9\u4e24\u4e2aset\u63d0\u4f9b\u4ea4\u96c6\u3001\u5e76\u96c6\u3001\u5dee\u96c6\u64cd\u4f5c\u3002\u4f8b\u5982\uff1a\u67e5\u627e\u4e24\u4e2a\u4eba\u5171\u540c\u7684\u597d\u53cb\u7b49\u3002</p> <p>Sorted Set\u2014\u2014\u662fset\u7684\u589e\u5f3a\u7248\u672c\uff0c\u589e\u52a0\u4e86\u4e00\u4e2ascore\u53c2\u6570\uff0c\u81ea\u52a8\u4f1a\u6839\u636escore\u7684\u503c\u8fdb\u884c\u6392\u5e8f\u3002\u6bd4\u8f83\u9002\u5408\u7c7b\u4f3c\u4e8etop 10\u7b49\u4e0d\u6839\u636e\u63d2\u5165\u7684\u65f6\u95f4\u6765\u6392\u5e8f\u7684\u6570\u636e\u3002</p> <p>\u5982\u4e0a\u6240\u8ff0\uff0c\u867d\u7136Redis\u4e0d\u50cf\u5173\u7cfb\u6570\u636e\u5e93\u90a3\u4e48\u590d\u6742\u7684\u6570\u636e\u7ed3\u6784\uff0c\u4f46\u662f\uff0c\u4e5f\u80fd\u9002\u5408\u5f88\u591a\u573a\u666f\uff0c\u6bd4\u4e00\u822c\u7684\u7f13\u5b58\u6570\u636e\u7ed3\u6784\u8981\u591a\u3002\u4e86\u89e3\u6bcf\u79cd\u6570\u636e\u7ed3\u6784\u9002\u5408\u7684\u4e1a\u52a1\u573a\u666f\uff0c\u4e0d\u4ec5\u6709\u5229\u4e8e\u63d0\u5347\u5f00\u53d1\u6548\u7387\uff0c\u4e5f\u80fd\u6709\u6548\u5229\u7528Redis\u7684\u6027\u80fd\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_3","title":"\u6301\u4e45\u5316","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_6","title":"\u4ec0\u4e48\u662fRedis\u6301\u4e45\u5316\uff1f","text":"<p>\u6301\u4e45\u5316\u5c31\u662f\u628a\u5185\u5b58\u7684\u6570\u636e\u5199\u5230\u78c1\u76d8\u4e2d\u53bb\uff0c\u9632\u6b62\u670d\u52a1\u5b95\u673a\u4e86\u5185\u5b58\u6570\u636e\u4e22\u5931\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_7","title":"Redis \u7684\u6301\u4e45\u5316\u673a\u5236\u662f\u4ec0\u4e48\uff1f\u5404\u81ea\u7684\u4f18\u7f3a\u70b9\uff1f","text":"<p>Redis \u63d0\u4f9b\u4e24\u79cd\u6301\u4e45\u5316\u673a\u5236 RDB\uff08\u9ed8\u8ba4\uff09 \u548c AOF \u673a\u5236:</p> <p>RDB\uff1a\u662fRedis DataBase\u7f29\u5199\u5feb\u7167</p> <p>RDB\u662fRedis\u9ed8\u8ba4\u7684\u6301\u4e45\u5316\u65b9\u5f0f\u3002\u6309\u7167\u4e00\u5b9a\u7684\u65f6\u95f4\u5c06\u5185\u5b58\u7684\u6570\u636e\u4ee5\u5feb\u7167\u7684\u5f62\u5f0f\u4fdd\u5b58\u5230\u786c\u76d8\u4e2d\uff0c\u5bf9\u5e94\u4ea7\u751f\u7684\u6570\u636e\u6587\u4ef6\u4e3adump.rdb\u3002\u901a\u8fc7\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684save\u53c2\u6570\u6765\u5b9a\u4e49\u5feb\u7167\u7684\u5468\u671f\u3002</p> <p></p> <p>\u4f18\u70b9\uff1a</p> <ul> <li>1\u3001\u53ea\u6709\u4e00\u4e2a\u6587\u4ef6 dump.rdb\uff0c\u65b9\u4fbf\u6301\u4e45\u5316\u3002</li> <li>2\u3001\u5bb9\u707e\u6027\u597d\uff0c\u4e00\u4e2a\u6587\u4ef6\u53ef\u4ee5\u4fdd\u5b58\u5230\u5b89\u5168\u7684\u78c1\u76d8\u3002</li> <li>3\u3001\u6027\u80fd\u6700\u5927\u5316\uff0cfork \u5b50\u8fdb\u7a0b\u6765\u5b8c\u6210\u5199\u64cd\u4f5c\uff0c\u8ba9\u4e3b\u8fdb\u7a0b\u7ee7\u7eed\u5904\u7406\u547d\u4ee4\uff0c\u6240\u4ee5\u662f IO \u6700\u5927\u5316\u3002\u4f7f\u7528\u5355\u72ec\u5b50\u8fdb\u7a0b\u6765\u8fdb\u884c\u6301\u4e45\u5316\uff0c\u4e3b\u8fdb\u7a0b\u4e0d\u4f1a\u8fdb\u884c\u4efb\u4f55 IO \u64cd\u4f5c\uff0c\u4fdd\u8bc1\u4e86 redis \u7684\u9ad8\u6027\u80fd</li> <li>4.\u76f8\u5bf9\u4e8e\u6570\u636e\u96c6\u5927\u65f6\uff0c\u6bd4 AOF \u7684\u542f\u52a8\u6548\u7387\u66f4\u9ad8\u3002</li> </ul> <p>\u7f3a\u70b9\uff1a</p> <ul> <li>1\u3001\u6570\u636e\u5b89\u5168\u6027\u4f4e\u3002RDB \u662f\u95f4\u9694\u4e00\u6bb5\u65f6\u95f4\u8fdb\u884c\u6301\u4e45\u5316\uff0c\u5982\u679c\u6301\u4e45\u5316\u4e4b\u95f4 redis \u53d1\u751f\u6545\u969c\uff0c\u4f1a\u53d1\u751f\u6570\u636e\u4e22\u5931\u3002\u6240\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u66f4\u9002\u5408\u6570\u636e\u8981\u6c42\u4e0d\u4e25\u8c28\u7684\u65f6\u5019)</li> <li>2\u3001AOF\uff08Append-only file)\u6301\u4e45\u5316\u65b9\u5f0f\uff1a \u662f\u6307\u6240\u6709\u7684\u547d\u4ee4\u884c\u8bb0\u5f55\u4ee5 redis \u547d\u4ee4\u8bf7 \u6c42\u534f\u8bae\u7684\u683c\u5f0f\u5b8c\u5168\u6301\u4e45\u5316\u5b58\u50a8)\u4fdd\u5b58\u4e3a aof \u6587\u4ef6\u3002</li> </ul> <p>AOF\uff1a\u6301\u4e45\u5316</p> <p>AOF\u6301\u4e45\u5316(\u5373Append Only File\u6301\u4e45\u5316)\uff0c\u5219\u662f\u5c06Redis\u6267\u884c\u7684\u6bcf\u6b21\u5199\u547d\u4ee4\u8bb0\u5f55\u5230\u5355\u72ec\u7684\u65e5\u5fd7\u6587\u4ef6\u4e2d\uff0c\u5f53\u91cd\u542fRedis\u4f1a\u91cd\u65b0\u5c06\u6301\u4e45\u5316\u7684\u65e5\u5fd7\u4e2d\u6587\u4ef6\u6062\u590d\u6570\u636e\u3002</p> <p>\u5f53\u4e24\u79cd\u65b9\u5f0f\u540c\u65f6\u5f00\u542f\u65f6\uff0c\u6570\u636e\u6062\u590dRedis\u4f1a\u4f18\u5148\u9009\u62e9AOF\u6062\u590d\u3002</p> <p></p> <p>\u4f18\u70b9\uff1a</p> <ul> <li>1\u3001\u6570\u636e\u5b89\u5168\uff0caof \u6301\u4e45\u5316\u53ef\u4ee5\u914d\u7f6e appendfsync \u5c5e\u6027\uff0c\u6709 always\uff0c\u6bcf\u8fdb\u884c\u4e00\u6b21 \u547d\u4ee4\u64cd\u4f5c\u5c31\u8bb0\u5f55\u5230 aof \u6587\u4ef6\u4e2d\u4e00\u6b21\u3002</li> <li>2\u3001\u901a\u8fc7 append \u6a21\u5f0f\u5199\u6587\u4ef6\uff0c\u5373\u4f7f\u4e2d\u9014\u670d\u52a1\u5668\u5b95\u673a\uff0c\u53ef\u4ee5\u901a\u8fc7 redis-check-aof \u5de5\u5177\u89e3\u51b3\u6570\u636e\u4e00\u81f4\u6027\u95ee\u9898\u3002</li> <li>3\u3001AOF \u673a\u5236\u7684 rewrite \u6a21\u5f0f\u3002AOF \u6587\u4ef6\u6ca1\u88ab rewrite \u4e4b\u524d\uff08\u6587\u4ef6\u8fc7\u5927\u65f6\u4f1a\u5bf9\u547d\u4ee4 \u8fdb\u884c\u5408\u5e76\u91cd\u5199\uff09\uff0c\u53ef\u4ee5\u5220\u9664\u5176\u4e2d\u7684\u67d0\u4e9b\u547d\u4ee4\uff08\u6bd4\u5982\u8bef\u64cd\u4f5c\u7684 flushall\uff09)</li> </ul> <p>\u7f3a\u70b9\uff1a</p> <ul> <li>1\u3001AOF \u6587\u4ef6\u6bd4 RDB \u6587\u4ef6\u5927\uff0c\u4e14\u6062\u590d\u901f\u5ea6\u6162\u3002</li> <li>2\u3001\u6570\u636e\u96c6\u5927\u7684\u65f6\u5019\uff0c\u6bd4 rdb \u542f\u52a8\u6548\u7387\u4f4e\u3002</li> </ul> <p>\u4f18\u7f3a\u70b9\u662f\u4ec0\u4e48\uff1f</p> <ul> <li>AOF\u6587\u4ef6\u6bd4RDB\u66f4\u65b0\u9891\u7387\u9ad8\uff0c\u4f18\u5148\u4f7f\u7528AOF\u8fd8\u539f\u6570\u636e\u3002</li> <li>AOF\u6bd4RDB\u66f4\u5b89\u5168\u4e5f\u66f4\u5927</li> <li>RDB\u6027\u80fd\u6bd4AOF\u597d</li> <li>\u5982\u679c\u4e24\u4e2a\u90fd\u914d\u4e86\u4f18\u5148\u52a0\u8f7dAOF</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_4","title":"\u5982\u4f55\u9009\u62e9\u5408\u9002\u7684\u6301\u4e45\u5316\u65b9\u5f0f","text":"<ul> <li>\u4e00\u822c\u6765\u8bf4\uff0c \u5982\u679c\u60f3\u8fbe\u5230\u8db3\u4ee5\u5ab2\u7f8ePostgreSQL\u7684\u6570\u636e\u5b89\u5168\u6027\uff0c\u4f60\u5e94\u8be5\u540c\u65f6\u4f7f\u7528\u4e24\u79cd\u6301\u4e45\u5316\u529f\u80fd\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5f53 Redis \u91cd\u542f\u7684\u65f6\u5019\u4f1a\u4f18\u5148\u8f7d\u5165AOF\u6587\u4ef6\u6765\u6062\u590d\u539f\u59cb\u7684\u6570\u636e\uff0c\u56e0\u4e3a\u5728\u901a\u5e38\u60c5\u51b5\u4e0bAOF\u6587\u4ef6\u4fdd\u5b58\u7684\u6570\u636e\u96c6\u8981\u6bd4RDB\u6587\u4ef6\u4fdd\u5b58\u7684\u6570\u636e\u96c6\u8981\u5b8c\u6574\u3002</li> <li>\u5982\u679c\u4f60\u975e\u5e38\u5173\u5fc3\u4f60\u7684\u6570\u636e\uff0c \u4f46\u4ecd\u7136\u53ef\u4ee5\u627f\u53d7\u6570\u5206\u949f\u4ee5\u5185\u7684\u6570\u636e\u4e22\u5931\uff0c\u90a3\u4e48\u4f60\u53ef\u4ee5\u53ea\u4f7f\u7528RDB\u6301\u4e45\u5316\u3002</li> <li>\u6709\u5f88\u591a\u7528\u6237\u90fd\u53ea\u4f7f\u7528AOF\u6301\u4e45\u5316\uff0c\u4f46\u5e76\u4e0d\u63a8\u8350\u8fd9\u79cd\u65b9\u5f0f\uff0c\u56e0\u4e3a\u5b9a\u65f6\u751f\u6210RDB\u5feb\u7167\uff08snapshot\uff09\u975e\u5e38\u4fbf\u4e8e\u8fdb\u884c\u6570\u636e\u5e93\u5907\u4efd\uff0c \u5e76\u4e14 RDB \u6062\u590d\u6570\u636e\u96c6\u7684\u901f\u5ea6\u4e5f\u8981\u6bd4AOF\u6062\u590d\u7684\u901f\u5ea6\u8981\u5feb\uff0c\u9664\u6b64\u4e4b\u5916\uff0c\u4f7f\u7528RDB\u8fd8\u53ef\u4ee5\u907f\u514dAOF\u7a0b\u5e8f\u7684bug\u3002</li> <li>\u5982\u679c\u4f60\u53ea\u5e0c\u671b\u4f60\u7684\u6570\u636e\u5728\u670d\u52a1\u5668\u8fd0\u884c\u7684\u65f6\u5019\u5b58\u5728\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4e0d\u4f7f\u7528\u4efb\u4f55\u6301\u4e45\u5316\u65b9\u5f0f\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_8","title":"Redis\u6301\u4e45\u5316\u6570\u636e\u548c\u7f13\u5b58\u600e\u4e48\u505a\u6269\u5bb9\uff1f","text":"<ul> <li>\u5982\u679cRedis\u88ab\u5f53\u505a\u7f13\u5b58\u4f7f\u7528\uff0c\u4f7f\u7528\u4e00\u81f4\u6027\u54c8\u5e0c\u5b9e\u73b0\u52a8\u6001\u6269\u5bb9\u7f29\u5bb9\u3002</li> <li>\u5982\u679cRedis\u88ab\u5f53\u505a\u4e00\u4e2a\u6301\u4e45\u5316\u5b58\u50a8\u4f7f\u7528\uff0c\u5fc5\u987b\u4f7f\u7528\u56fa\u5b9a\u7684keys-to-nodes\u6620\u5c04\u5173\u7cfb\uff0c\u8282\u70b9\u7684\u6570\u91cf\u4e00\u65e6\u786e\u5b9a\u4e0d\u80fd\u53d8\u5316\u3002\u5426\u5219\u7684\u8bdd(\u5373Redis\u8282\u70b9\u9700\u8981\u52a8\u6001\u53d8\u5316\u7684\u60c5\u51b5\uff09\uff0c\u5fc5\u987b\u4f7f\u7528\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u8fdb\u884c\u6570\u636e\u518d\u5e73\u8861\u7684\u4e00\u5957\u7cfb\u7edf\uff0c\u800c\u5f53\u524d\u53ea\u6709Redis\u96c6\u7fa4\u53ef\u4ee5\u505a\u5230\u8fd9\u6837\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_5","title":"\u8fc7\u671f\u952e\u7684\u5220\u9664\u7b56\u7565","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_9","title":"Redis\u7684\u8fc7\u671f\u952e\u7684\u5220\u9664\u7b56\u7565","text":"<p>\u6211\u4eec\u90fd\u77e5\u9053\uff0cRedis\u662fkey-value\u6570\u636e\u5e93\uff0c\u6211\u4eec\u53ef\u4ee5\u8bbe\u7f6eRedis\u4e2d\u7f13\u5b58\u7684key\u7684\u8fc7\u671f\u65f6\u95f4\u3002Redis\u7684\u8fc7\u671f\u7b56\u7565\u5c31\u662f\u6307\u5f53Redis\u4e2d\u7f13\u5b58\u7684key\u8fc7\u671f\u4e86\uff0cRedis\u5982\u4f55\u5904\u7406\u3002</p> <p>\u8fc7\u671f\u7b56\u7565\u901a\u5e38\u6709\u4ee5\u4e0b\u4e09\u79cd\uff1a</p> <ul> <li>\u5b9a\u65f6\u8fc7\u671f\uff1a\u6bcf\u4e2a\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\u7684key\u90fd\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u5b9a\u65f6\u5668\uff0c\u5230\u8fc7\u671f\u65f6\u95f4\u5c31\u4f1a\u7acb\u5373\u6e05\u9664\u3002\u8be5\u7b56\u7565\u53ef\u4ee5\u7acb\u5373\u6e05\u9664\u8fc7\u671f\u7684\u6570\u636e\uff0c\u5bf9\u5185\u5b58\u5f88\u53cb\u597d\uff1b\u4f46\u662f\u4f1a\u5360\u7528\u5927\u91cf\u7684CPU\u8d44\u6e90\u53bb\u5904\u7406\u8fc7\u671f\u7684\u6570\u636e\uff0c\u4ece\u800c\u5f71\u54cd\u7f13\u5b58\u7684\u54cd\u5e94\u65f6\u95f4\u548c\u541e\u5410\u91cf\u3002</li> <li>\u60f0\u6027\u8fc7\u671f\uff1a\u53ea\u6709\u5f53\u8bbf\u95ee\u4e00\u4e2akey\u65f6\uff0c\u624d\u4f1a\u5224\u65ad\u8be5key\u662f\u5426\u5df2\u8fc7\u671f\uff0c\u8fc7\u671f\u5219\u6e05\u9664\u3002\u8be5\u7b56\u7565\u53ef\u4ee5\u6700\u5927\u5316\u5730\u8282\u7701CPU\u8d44\u6e90\uff0c\u5374\u5bf9\u5185\u5b58\u975e\u5e38\u4e0d\u53cb\u597d\u3002\u6781\u7aef\u60c5\u51b5\u53ef\u80fd\u51fa\u73b0\u5927\u91cf\u7684\u8fc7\u671fkey\u6ca1\u6709\u518d\u6b21\u88ab\u8bbf\u95ee\uff0c\u4ece\u800c\u4e0d\u4f1a\u88ab\u6e05\u9664\uff0c\u5360\u7528\u5927\u91cf\u5185\u5b58\u3002</li> <li>\u5b9a\u671f\u8fc7\u671f\uff1a\u6bcf\u9694\u4e00\u5b9a\u7684\u65f6\u95f4\uff0c\u4f1a\u626b\u63cf\u4e00\u5b9a\u6570\u91cf\u7684\u6570\u636e\u5e93\u7684expires\u5b57\u5178\u4e2d\u4e00\u5b9a\u6570\u91cf\u7684key\uff0c\u5e76\u6e05\u9664\u5176\u4e2d\u5df2\u8fc7\u671f\u7684key\u3002\u8be5\u7b56\u7565\u662f\u524d\u4e24\u8005\u7684\u4e00\u4e2a\u6298\u4e2d\u65b9\u6848\u3002\u901a\u8fc7\u8c03\u6574\u5b9a\u65f6\u626b\u63cf\u7684\u65f6\u95f4\u95f4\u9694\u548c\u6bcf\u6b21\u626b\u63cf\u7684\u9650\u5b9a\u8017\u65f6\uff0c\u53ef\u4ee5\u5728\u4e0d\u540c\u60c5\u51b5\u4e0b\u4f7f\u5f97CPU\u548c\u5185\u5b58\u8d44\u6e90\u8fbe\u5230\u6700\u4f18\u7684\u5e73\u8861\u6548\u679c\u3002   (expires\u5b57\u5178\u4f1a\u4fdd\u5b58\u6240\u6709\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684key\u7684\u8fc7\u671f\u65f6\u95f4\u6570\u636e\uff0c\u5176\u4e2d\uff0ckey\u662f\u6307\u5411\u952e\u7a7a\u95f4\u4e2d\u7684\u67d0\u4e2a\u952e\u7684\u6307\u9488\uff0cvalue\u662f\u8be5\u952e\u7684\u6beb\u79d2\u7cbe\u5ea6\u7684UNIX\u65f6\u95f4\u6233\u8868\u793a\u7684\u8fc7\u671f\u65f6\u95f4\u3002\u952e\u7a7a\u95f4\u662f\u6307\u8be5Redis\u96c6\u7fa4\u4e2d\u4fdd\u5b58\u7684\u6240\u6709\u952e\u3002)</li> </ul> <p>Redis\u4e2d\u540c\u65f6\u4f7f\u7528\u4e86\u60f0\u6027\u8fc7\u671f\u548c\u5b9a\u671f\u8fc7\u671f\u4e24\u79cd\u8fc7\u671f\u7b56\u7565\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis-key","title":"Redis key\u7684\u8fc7\u671f\u65f6\u95f4\u548c\u6c38\u4e45\u6709\u6548\u5206\u522b\u600e\u4e48\u8bbe\u7f6e\uff1f","text":"<p>EXPIRE\u548cPERSIST\u547d\u4ee4\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#expirekey","title":"\u6211\u4eec\u77e5\u9053\u901a\u8fc7expire\u6765\u8bbe\u7f6ekey \u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u90a3\u4e48\u5bf9\u8fc7\u671f\u7684\u6570\u636e\u600e\u4e48\u5904\u7406\u5462?","text":"<p>\u9664\u4e86\u7f13\u5b58\u670d\u52a1\u5668\u81ea\u5e26\u7684\u7f13\u5b58\u5931\u6548\u7b56\u7565\u4e4b\u5916\uff08Redis\u9ed8\u8ba4\u7684\u67096\u4e2d\u7b56\u7565\u53ef\u4f9b\u9009\u62e9\uff09\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u7684\u4e1a\u52a1\u9700\u6c42\u8fdb\u884c\u81ea\u5b9a\u4e49\u7684\u7f13\u5b58\u6dd8\u6c70\uff0c\u5e38\u89c1\u7684\u7b56\u7565\u6709\u4e24\u79cd\uff1a</p> <ol> <li>\u5b9a\u65f6\u53bb\u6e05\u7406\u8fc7\u671f\u7684\u7f13\u5b58\uff1b</li> <li>\u5f53\u6709\u7528\u6237\u8bf7\u6c42\u8fc7\u6765\u65f6\uff0c\u518d\u5224\u65ad\u8fd9\u4e2a\u8bf7\u6c42\u6240\u7528\u5230\u7684\u7f13\u5b58\u662f\u5426\u8fc7\u671f\uff0c\u8fc7\u671f\u7684\u8bdd\u5c31\u53bb\u5e95\u5c42\u7cfb\u7edf\u5f97\u5230\u65b0\u6570\u636e\u5e76\u66f4\u65b0\u7f13\u5b58\u3002</li> </ol> <p>\u4e24\u8005\u5404\u6709\u4f18\u52a3\uff0c\u7b2c\u4e00\u79cd\u7684\u7f3a\u70b9\u662f\u7ef4\u62a4\u5927\u91cf\u7f13\u5b58\u7684key\u662f\u6bd4\u8f83\u9ebb\u70e6\u7684\uff0c\u7b2c\u4e8c\u79cd\u7684\u7f3a\u70b9\u5c31\u662f\u6bcf\u6b21\u7528\u6237\u8bf7\u6c42\u8fc7\u6765\u90fd\u8981\u5224\u65ad\u7f13\u5b58\u5931\u6548\uff0c\u903b\u8f91\u76f8\u5bf9\u6bd4\u8f83\u590d\u6742\uff01\u5177\u4f53\u7528\u54ea\u79cd\u65b9\u6848\uff0c\u5927\u5bb6\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u5e94\u7528\u573a\u666f\u6765\u6743\u8861\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_6","title":"\u5185\u5b58\u76f8\u5173","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#mysql2000wredis20wredis","title":"MySQL\u91cc\u67092000w\u6570\u636e\uff0credis\u4e2d\u53ea\u5b5820w\u7684\u6570\u636e\uff0c\u5982\u4f55\u4fdd\u8bc1redis\u4e2d\u7684\u6570\u636e\u90fd\u662f\u70ed\u70b9\u6570\u636e","text":"<p>redis\u5185\u5b58\u6570\u636e\u96c6\u5927\u5c0f\u4e0a\u5347\u5230\u4e00\u5b9a\u5927\u5c0f\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u65bd\u884c\u6570\u636e\u6dd8\u6c70\u7b56\u7565\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_10","title":"Redis\u7684\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\u6709\u54ea\u4e9b","text":"<p>Redis\u7684\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\u662f\u6307\u5728Redis\u7684\u7528\u4e8e\u7f13\u5b58\u7684\u5185\u5b58\u4e0d\u8db3\u65f6\uff0c\u600e\u4e48\u5904\u7406\u9700\u8981\u65b0\u5199\u5165\u4e14\u9700\u8981\u7533\u8bf7\u989d\u5916\u7a7a\u95f4\u7684\u6570\u636e\u3002</p> <p>\u5168\u5c40\u7684\u952e\u7a7a\u95f4\u9009\u62e9\u6027\u79fb\u9664</p> <ul> <li>noeviction\uff1a\u5f53\u5185\u5b58\u4e0d\u8db3\u4ee5\u5bb9\u7eb3\u65b0\u5199\u5165\u6570\u636e\u65f6\uff0c\u65b0\u5199\u5165\u64cd\u4f5c\u4f1a\u62a5\u9519\u3002</li> <li>allkeys-lru\uff1a\u5f53\u5185\u5b58\u4e0d\u8db3\u4ee5\u5bb9\u7eb3\u65b0\u5199\u5165\u6570\u636e\u65f6\uff0c\u5728\u952e\u7a7a\u95f4\u4e2d\uff0c\u79fb\u9664\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u7684key\u3002\uff08\u8fd9\u4e2a\u662f\u6700\u5e38\u7528\u7684\uff09</li> <li>allkeys-random\uff1a\u5f53\u5185\u5b58\u4e0d\u8db3\u4ee5\u5bb9\u7eb3\u65b0\u5199\u5165\u6570\u636e\u65f6\uff0c\u5728\u952e\u7a7a\u95f4\u4e2d\uff0c\u968f\u673a\u79fb\u9664\u67d0\u4e2akey\u3002</li> </ul> <p>\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\u7684\u952e\u7a7a\u95f4\u9009\u62e9\u6027\u79fb\u9664</p> <ul> <li>volatile-lru\uff1a\u5f53\u5185\u5b58\u4e0d\u8db3\u4ee5\u5bb9\u7eb3\u65b0\u5199\u5165\u6570\u636e\u65f6\uff0c\u5728\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u952e\u7a7a\u95f4\u4e2d\uff0c\u79fb\u9664\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u7684key\u3002</li> <li>volatile-random\uff1a\u5f53\u5185\u5b58\u4e0d\u8db3\u4ee5\u5bb9\u7eb3\u65b0\u5199\u5165\u6570\u636e\u65f6\uff0c\u5728\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u952e\u7a7a\u95f4\u4e2d\uff0c\u968f\u673a\u79fb\u9664\u67d0\u4e2akey\u3002</li> <li>volatile-ttl\uff1a\u5f53\u5185\u5b58\u4e0d\u8db3\u4ee5\u5bb9\u7eb3\u65b0\u5199\u5165\u6570\u636e\u65f6\uff0c\u5728\u8bbe\u7f6e\u4e86\u8fc7\u671f\u65f6\u95f4\u7684\u952e\u7a7a\u95f4\u4e2d\uff0c\u6709\u66f4\u65e9\u8fc7\u671f\u65f6\u95f4\u7684key\u4f18\u5148\u79fb\u9664\u3002</li> </ul> <p>\u603b\u7ed3</p> <p>Redis\u7684\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\u7684\u9009\u53d6\u5e76\u4e0d\u4f1a\u5f71\u54cd\u8fc7\u671f\u7684key\u7684\u5904\u7406\u3002\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\u7528\u4e8e\u5904\u7406\u5185\u5b58\u4e0d\u8db3\u65f6\u7684\u9700\u8981\u7533\u8bf7\u989d\u5916\u7a7a\u95f4\u7684\u6570\u636e\uff1b\u8fc7\u671f\u7b56\u7565\u7528\u4e8e\u5904\u7406\u8fc7\u671f\u7684\u7f13\u5b58\u6570\u636e\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_11","title":"Redis\u4e3b\u8981\u6d88\u8017\u4ec0\u4e48\u7269\u7406\u8d44\u6e90\uff1f","text":"<p>\u5185\u5b58\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_12","title":"Redis\u7684\u5185\u5b58\u7528\u5b8c\u4e86\u4f1a\u53d1\u751f\u4ec0\u4e48\uff1f","text":"<p>\u5982\u679c\u8fbe\u5230\u8bbe\u7f6e\u7684\u4e0a\u9650\uff0cRedis\u7684\u5199\u547d\u4ee4\u4f1a\u8fd4\u56de\u9519\u8bef\u4fe1\u606f\uff08\u4f46\u662f\u8bfb\u547d\u4ee4\u8fd8\u53ef\u4ee5\u6b63\u5e38\u8fd4\u56de\u3002\uff09\u6216\u8005\u4f60\u53ef\u4ee5\u914d\u7f6e\u5185\u5b58\u6dd8\u6c70\u673a\u5236\uff0c\u5f53Redis\u8fbe\u5230\u5185\u5b58\u4e0a\u9650\u65f6\u4f1a\u51b2\u5237\u6389\u65e7\u7684\u5185\u5bb9\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_13","title":"Redis\u5982\u4f55\u505a\u5185\u5b58\u4f18\u5316\uff1f","text":"<p>\u53ef\u4ee5\u597d\u597d\u5229\u7528Hash,list,sorted set,set\u7b49\u96c6\u5408\u7c7b\u578b\u6570\u636e\uff0c\u56e0\u4e3a\u901a\u5e38\u60c5\u51b5\u4e0b\u5f88\u591a\u5c0f\u7684Key-Value\u53ef\u4ee5\u7528\u66f4\u7d27\u51d1\u7684\u65b9\u5f0f\u5b58\u653e\u5230\u4e00\u8d77\u3002\u5c3d\u53ef\u80fd\u4f7f\u7528\u6563\u5217\u8868\uff08hashes\uff09\uff0c\u6563\u5217\u8868\uff08\u662f\u8bf4\u6563\u5217\u8868\u91cc\u9762\u5b58\u50a8\u7684\u6570\u5c11\uff09\u4f7f\u7528\u7684\u5185\u5b58\u975e\u5e38\u5c0f\uff0c\u6240\u4ee5\u4f60\u5e94\u8be5\u5c3d\u53ef\u80fd\u7684\u5c06\u4f60\u7684\u6570\u636e\u6a21\u578b\u62bd\u8c61\u5230\u4e00\u4e2a\u6563\u5217\u8868\u91cc\u9762\u3002\u6bd4\u5982\u4f60\u7684web\u7cfb\u7edf\u4e2d\u6709\u4e00\u4e2a\u7528\u6237\u5bf9\u8c61\uff0c\u4e0d\u8981\u4e3a\u8fd9\u4e2a\u7528\u6237\u7684\u540d\u79f0\uff0c\u59d3\u6c0f\uff0c\u90ae\u7bb1\uff0c\u5bc6\u7801\u8bbe\u7f6e\u5355\u72ec\u7684key\uff0c\u800c\u662f\u5e94\u8be5\u628a\u8fd9\u4e2a\u7528\u6237\u7684\u6240\u6709\u4fe1\u606f\u5b58\u50a8\u5230\u4e00\u5f20\u6563\u5217\u8868\u91cc\u9762</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_7","title":"\u7ebf\u7a0b\u6a21\u578b","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_14","title":"Redis\u7ebf\u7a0b\u6a21\u578b","text":"<p>Redis\u57fa\u4e8eReactor\u6a21\u5f0f\u5f00\u53d1\u4e86\u7f51\u7edc\u4e8b\u4ef6\u5904\u7406\u5668\uff0c\u8fd9\u4e2a\u5904\u7406\u5668\u88ab\u79f0\u4e3a\u6587\u4ef6\u4e8b\u4ef6\u5904\u7406\u5668\uff08file event handler\uff09\u3002\u5b83\u7684\u7ec4\u6210\u7ed3\u6784\u4e3a4\u90e8\u5206\uff1a\u591a\u4e2a\u5957\u63a5\u5b57\u3001IO\u591a\u8def\u590d\u7528\u7a0b\u5e8f\u3001\u6587\u4ef6\u4e8b\u4ef6\u5206\u6d3e\u5668\u3001\u4e8b\u4ef6\u5904\u7406\u5668\u3002\u56e0\u4e3a\u6587\u4ef6\u4e8b\u4ef6\u5206\u6d3e\u5668\u961f\u5217\u7684\u6d88\u8d39\u662f\u5355\u7ebf\u7a0b\u7684\uff0c\u6240\u4ee5Redis\u624d\u53eb\u5355\u7ebf\u7a0b\u6a21\u578b\u3002</p> <ul> <li>\u6587\u4ef6\u4e8b\u4ef6\u5904\u7406\u5668\u4f7f\u7528 I/O \u591a\u8def\u590d\u7528\uff08multiplexing\uff09\u7a0b\u5e8f\u6765\u540c\u65f6\u76d1\u542c\u591a\u4e2a\u5957\u63a5\u5b57\uff0c \u5e76\u6839\u636e\u5957\u63a5\u5b57\u76ee\u524d\u6267\u884c\u7684\u4efb\u52a1\u6765\u4e3a\u5957\u63a5\u5b57\u5173\u8054\u4e0d\u540c\u7684\u4e8b\u4ef6\u5904\u7406\u5668\u3002</li> <li>\u5f53\u88ab\u76d1\u542c\u7684\u5957\u63a5\u5b57\u51c6\u5907\u597d\u6267\u884c\u8fde\u63a5\u5e94\u7b54\uff08accept\uff09\u3001\u8bfb\u53d6\uff08read\uff09\u3001\u5199\u5165\uff08write\uff09\u3001\u5173\u95ed\uff08close\uff09\u7b49\u64cd\u4f5c\u65f6\uff0c \u4e0e\u64cd\u4f5c\u76f8\u5bf9\u5e94\u7684\u6587\u4ef6\u4e8b\u4ef6\u5c31\u4f1a\u4ea7\u751f\uff0c \u8fd9\u65f6\u6587\u4ef6\u4e8b\u4ef6\u5904\u7406\u5668\u5c31\u4f1a\u8c03\u7528\u5957\u63a5\u5b57\u4e4b\u524d\u5173\u8054\u597d\u7684\u4e8b\u4ef6\u5904\u7406\u5668\u6765\u5904\u7406\u8fd9\u4e9b\u4e8b\u4ef6\u3002</li> </ul> <p>\u867d\u7136\u6587\u4ef6\u4e8b\u4ef6\u5904\u7406\u5668\u4ee5\u5355\u7ebf\u7a0b\u65b9\u5f0f\u8fd0\u884c\uff0c \u4f46\u901a\u8fc7\u4f7f\u7528 I/O \u591a\u8def\u590d\u7528\u7a0b\u5e8f\u6765\u76d1\u542c\u591a\u4e2a\u5957\u63a5\u5b57\uff0c \u6587\u4ef6\u4e8b\u4ef6\u5904\u7406\u5668\u65e2\u5b9e\u73b0\u4e86\u9ad8\u6027\u80fd\u7684\u7f51\u7edc\u901a\u4fe1\u6a21\u578b\uff0c \u53c8\u53ef\u4ee5\u5f88\u597d\u5730\u4e0e redis \u670d\u52a1\u5668\u4e2d\u5176\u4ed6\u540c\u6837\u4ee5\u5355\u7ebf\u7a0b\u65b9\u5f0f\u8fd0\u884c\u7684\u6a21\u5757\u8fdb\u884c\u5bf9\u63a5\uff0c \u8fd9\u4fdd\u6301\u4e86 Redis \u5185\u90e8\u5355\u7ebf\u7a0b\u8bbe\u8ba1\u7684\u7b80\u5355\u6027\u3002</p> <p>\u53c2\u8003\uff1ahttps://www.cnblogs.com/barrywxx/p/8570821.html</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_8","title":"\u4e8b\u52a1","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_9","title":"\u4ec0\u4e48\u662f\u4e8b\u52a1\uff1f","text":"<p>\u4e8b\u52a1\u662f\u4e00\u4e2a\u5355\u72ec\u7684\u9694\u79bb\u64cd\u4f5c\uff1a\u4e8b\u52a1\u4e2d\u7684\u6240\u6709\u547d\u4ee4\u90fd\u4f1a\u5e8f\u5217\u5316\u3001\u6309\u987a\u5e8f\u5730\u6267\u884c\u3002\u4e8b\u52a1\u5728\u6267\u884c\u7684\u8fc7\u7a0b\u4e2d\uff0c\u4e0d\u4f1a\u88ab\u5176\u4ed6\u5ba2\u6237\u7aef\u53d1\u9001\u6765\u7684\u547d\u4ee4\u8bf7\u6c42\u6240\u6253\u65ad\u3002</p> <p>\u4e8b\u52a1\u662f\u4e00\u4e2a\u539f\u5b50\u64cd\u4f5c\uff1a\u4e8b\u52a1\u4e2d\u7684\u547d\u4ee4\u8981\u4e48\u5168\u90e8\u88ab\u6267\u884c\uff0c\u8981\u4e48\u5168\u90e8\u90fd\u4e0d\u6267\u884c\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_15","title":"Redis\u4e8b\u52a1\u7684\u6982\u5ff5","text":"<p>Redis \u4e8b\u52a1\u7684\u672c\u8d28\u662f\u901a\u8fc7MULTI\u3001EXEC\u3001WATCH\u7b49\u4e00\u7ec4\u547d\u4ee4\u7684\u96c6\u5408\u3002\u4e8b\u52a1\u652f\u6301\u4e00\u6b21\u6267\u884c\u591a\u4e2a\u547d\u4ee4\uff0c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u6240\u6709\u547d\u4ee4\u90fd\u4f1a\u88ab\u5e8f\u5217\u5316\u3002\u5728\u4e8b\u52a1\u6267\u884c\u8fc7\u7a0b\uff0c\u4f1a\u6309\u7167\u987a\u5e8f\u4e32\u884c\u5316\u6267\u884c\u961f\u5217\u4e2d\u7684\u547d\u4ee4\uff0c\u5176\u4ed6\u5ba2\u6237\u7aef\u63d0\u4ea4\u7684\u547d\u4ee4\u8bf7\u6c42\u4e0d\u4f1a\u63d2\u5165\u5230\u4e8b\u52a1\u6267\u884c\u547d\u4ee4\u5e8f\u5217\u4e2d\u3002</p> <p>\u603b\u7ed3\u8bf4\uff1aredis\u4e8b\u52a1\u5c31\u662f\u4e00\u6b21\u6027\u3001\u987a\u5e8f\u6027\u3001\u6392\u4ed6\u6027\u7684\u6267\u884c\u4e00\u4e2a\u961f\u5217\u4e2d\u7684\u4e00\u7cfb\u5217\u547d\u4ee4\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_16","title":"Redis\u4e8b\u52a1\u7684\u4e09\u4e2a\u9636\u6bb5","text":"<ol> <li>\u4e8b\u52a1\u5f00\u59cb MULTI</li> <li>\u547d\u4ee4\u5165\u961f</li> <li>\u4e8b\u52a1\u6267\u884c EXEC</li> </ol> <p>\u4e8b\u52a1\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u670d\u52a1\u7aef\u6536\u5230\u6709EXEC\u3001DISCARD\u3001WATCH\u3001MULTI\u4e4b\u5916\u7684\u8bf7\u6c42\uff0c\u5c06\u4f1a\u628a\u8bf7\u6c42\u653e\u5165\u961f\u5217\u4e2d\u6392\u961f</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_17","title":"Redis\u4e8b\u52a1\u76f8\u5173\u547d\u4ee4","text":"<p>Redis\u4e8b\u52a1\u529f\u80fd\u662f\u901a\u8fc7MULTI\u3001EXEC\u3001DISCARD\u548cWATCH \u56db\u4e2a\u539f\u8bed\u5b9e\u73b0\u7684</p> <p>Redis\u4f1a\u5c06\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u7684\u6240\u6709\u547d\u4ee4\u5e8f\u5217\u5316\uff0c\u7136\u540e\u6309\u987a\u5e8f\u6267\u884c\u3002</p> <ol> <li>redis \u4e0d\u652f\u6301\u56de\u6eda\uff0c\u201cRedis \u5728\u4e8b\u52a1\u5931\u8d25\u65f6\u4e0d\u8fdb\u884c\u56de\u6eda\uff0c\u800c\u662f\u7ee7\u7eed\u6267\u884c\u4f59\u4e0b\u7684\u547d\u4ee4\u201d\uff0c \u6240\u4ee5 Redis \u7684\u5185\u90e8\u53ef\u4ee5\u4fdd\u6301\u7b80\u5355\u4e14\u5feb\u901f\u3002</li> <li>\u5982\u679c\u5728\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u7684\u547d\u4ee4\u51fa\u73b0\u9519\u8bef\uff0c\u90a3\u4e48\u6240\u6709\u7684\u547d\u4ee4\u90fd\u4e0d\u4f1a\u6267\u884c\uff1b</li> <li> <p>\u5982\u679c\u5728\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u51fa\u73b0\u8fd0\u884c\u9519\u8bef\uff0c\u90a3\u4e48\u6b63\u786e\u7684\u547d\u4ee4\u4f1a\u88ab\u6267\u884c\u3002</p> </li> <li> <p>WATCH \u547d\u4ee4\u662f\u4e00\u4e2a\u4e50\u89c2\u9501\uff0c\u53ef\u4ee5\u4e3a Redis \u4e8b\u52a1\u63d0\u4f9b check-and-set \uff08CAS\uff09\u884c\u4e3a\u3002 \u53ef\u4ee5\u76d1\u63a7\u4e00\u4e2a\u6216\u591a\u4e2a\u952e\uff0c\u4e00\u65e6\u5176\u4e2d\u6709\u4e00\u4e2a\u952e\u88ab\u4fee\u6539\uff08\u6216\u5220\u9664\uff09\uff0c\u4e4b\u540e\u7684\u4e8b\u52a1\u5c31\u4e0d\u4f1a\u6267\u884c\uff0c\u76d1\u63a7\u4e00\u76f4\u6301\u7eed\u5230EXEC\u547d\u4ee4\u3002</p> </li> <li>MULTI\u547d\u4ee4\u7528\u4e8e\u5f00\u542f\u4e00\u4e2a\u4e8b\u52a1\uff0c\u5b83\u603b\u662f\u8fd4\u56deOK\u3002 MULTI\u6267\u884c\u4e4b\u540e\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u7ee7\u7eed\u5411\u670d\u52a1\u5668\u53d1\u9001\u4efb\u610f\u591a\u6761\u547d\u4ee4\uff0c\u8fd9\u4e9b\u547d\u4ee4\u4e0d\u4f1a\u7acb\u5373\u88ab\u6267\u884c\uff0c\u800c\u662f\u88ab\u653e\u5230\u4e00\u4e2a\u961f\u5217\u4e2d\uff0c\u5f53EXEC\u547d\u4ee4\u88ab\u8c03\u7528\u65f6\uff0c\u6240\u6709\u961f\u5217\u4e2d\u7684\u547d\u4ee4\u624d\u4f1a\u88ab\u6267\u884c\u3002</li> <li>EXEC\uff1a\u6267\u884c\u6240\u6709\u4e8b\u52a1\u5757\u5185\u7684\u547d\u4ee4\u3002\u8fd4\u56de\u4e8b\u52a1\u5757\u5185\u6240\u6709\u547d\u4ee4\u7684\u8fd4\u56de\u503c\uff0c\u6309\u547d\u4ee4\u6267\u884c\u7684\u5148\u540e\u987a\u5e8f\u6392\u5217\u3002 \u5f53\u64cd\u4f5c\u88ab\u6253\u65ad\u65f6\uff0c\u8fd4\u56de\u7a7a\u503c nil \u3002</li> <li>\u901a\u8fc7\u8c03\u7528DISCARD\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u6e05\u7a7a\u4e8b\u52a1\u961f\u5217\uff0c\u5e76\u653e\u5f03\u6267\u884c\u4e8b\u52a1\uff0c \u5e76\u4e14\u5ba2\u6237\u7aef\u4f1a\u4ece\u4e8b\u52a1\u72b6\u6001\u4e2d\u9000\u51fa\u3002</li> <li>UNWATCH\u547d\u4ee4\u53ef\u4ee5\u53d6\u6d88watch\u5bf9\u6240\u6709key\u7684\u76d1\u63a7\u3002</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#acid","title":"\u4e8b\u52a1\u7ba1\u7406\uff08ACID\uff09\u6982\u8ff0","text":"<p>\u539f\u5b50\u6027\uff08Atomicity\uff09 \u539f\u5b50\u6027\u662f\u6307\u4e8b\u52a1\u662f\u4e00\u4e2a\u4e0d\u53ef\u5206\u5272\u7684\u5de5\u4f5c\u5355\u4f4d\uff0c\u4e8b\u52a1\u4e2d\u7684\u64cd\u4f5c\u8981\u4e48\u90fd\u53d1\u751f\uff0c\u8981\u4e48\u90fd\u4e0d\u53d1\u751f\u3002</p> <p>\u4e00\u81f4\u6027\uff08Consistency\uff09 \u4e8b\u52a1\u524d\u540e\u6570\u636e\u7684\u5b8c\u6574\u6027\u5fc5\u987b\u4fdd\u6301\u4e00\u81f4\u3002</p> <p>\u9694\u79bb\u6027\uff08Isolation\uff09 \u591a\u4e2a\u4e8b\u52a1\u5e76\u53d1\u6267\u884c\u65f6\uff0c\u4e00\u4e2a\u4e8b\u52a1\u7684\u6267\u884c\u4e0d\u5e94\u5f71\u54cd\u5176\u4ed6\u4e8b\u52a1\u7684\u6267\u884c</p> <p>\u6301\u4e45\u6027\uff08Durability\uff09 \u6301\u4e45\u6027\u662f\u6307\u4e00\u4e2a\u4e8b\u52a1\u4e00\u65e6\u88ab\u63d0\u4ea4\uff0c\u5b83\u5bf9\u6570\u636e\u5e93\u4e2d\u6570\u636e\u7684\u6539\u53d8\u5c31\u662f\u6c38\u4e45\u6027\u7684\uff0c\u63a5\u4e0b\u6765\u5373\u4f7f\u6570\u636e\u5e93\u53d1\u751f\u6545\u969c\u4e5f\u4e0d\u5e94\u8be5\u5bf9\u5176\u6709\u4efb\u4f55\u5f71\u54cd</p> <p>Redis\u7684\u4e8b\u52a1\u603b\u662f\u5177\u6709ACID\u4e2d\u7684\u4e00\u81f4\u6027\u548c\u9694\u79bb\u6027\uff0c\u5176\u4ed6\u7279\u6027\u662f\u4e0d\u652f\u6301\u7684\u3002\u5f53\u670d\u52a1\u5668\u8fd0\u884c\u5728AOF\u6301\u4e45\u5316\u6a21\u5f0f\u4e0b\uff0c\u5e76\u4e14appendfsync\u9009\u9879\u7684\u503c\u4e3aalways\u65f6\uff0c\u4e8b\u52a1\u4e5f\u5177\u6709\u8010\u4e45\u6027\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_18","title":"Redis\u4e8b\u52a1\u652f\u6301\u9694\u79bb\u6027\u5417","text":"<p>Redis \u662f\u5355\u8fdb\u7a0b\u7a0b\u5e8f\uff0c\u5e76\u4e14\u5b83\u4fdd\u8bc1\u5728\u6267\u884c\u4e8b\u52a1\u65f6\uff0c\u4e0d\u4f1a\u5bf9\u4e8b\u52a1\u8fdb\u884c\u4e2d\u65ad\uff0c\u4e8b\u52a1\u53ef\u4ee5\u8fd0\u884c\u76f4\u5230\u6267\u884c\u5b8c\u6240\u6709\u4e8b\u52a1\u961f\u5217\u4e2d\u7684\u547d\u4ee4\u4e3a\u6b62\u3002\u56e0\u6b64\uff0cRedis \u7684\u4e8b\u52a1\u662f\u603b\u662f\u5e26\u6709\u9694\u79bb\u6027\u7684\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_19","title":"Redis\u4e8b\u52a1\u4fdd\u8bc1\u539f\u5b50\u6027\u5417\uff0c\u652f\u6301\u56de\u6eda\u5417","text":"<p>Redis\u4e2d\uff0c\u5355\u6761\u547d\u4ee4\u662f\u539f\u5b50\u6027\u6267\u884c\u7684\uff0c\u4f46\u4e8b\u52a1\u4e0d\u4fdd\u8bc1\u539f\u5b50\u6027\uff0c\u4e14\u6ca1\u6709\u56de\u6eda\u3002\u4e8b\u52a1\u4e2d\u4efb\u610f\u547d\u4ee4\u6267\u884c\u5931\u8d25\uff0c\u5176\u4f59\u7684\u547d\u4ee4\u4ecd\u4f1a\u88ab\u6267\u884c\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_20","title":"Redis\u4e8b\u52a1\u5176\u4ed6\u5b9e\u73b0","text":"<ul> <li>\u57fa\u4e8eLua\u811a\u672c\uff0cRedis\u53ef\u4ee5\u4fdd\u8bc1\u811a\u672c\u5185\u7684\u547d\u4ee4\u4e00\u6b21\u6027\u3001\u6309\u987a\u5e8f\u5730\u6267\u884c\uff0c   \u5176\u540c\u65f6\u4e5f\u4e0d\u63d0\u4f9b\u4e8b\u52a1\u8fd0\u884c\u9519\u8bef\u7684\u56de\u6eda\uff0c\u6267\u884c\u8fc7\u7a0b\u4e2d\u5982\u679c\u90e8\u5206\u547d\u4ee4\u8fd0\u884c\u9519\u8bef\uff0c\u5269\u4e0b\u7684\u547d\u4ee4\u8fd8\u662f\u4f1a\u7ee7\u7eed\u8fd0\u884c\u5b8c</li> <li>\u57fa\u4e8e\u4e2d\u95f4\u6807\u8bb0\u53d8\u91cf\uff0c\u901a\u8fc7\u53e6\u5916\u7684\u6807\u8bb0\u53d8\u91cf\u6765\u6807\u8bc6\u4e8b\u52a1\u662f\u5426\u6267\u884c\u5b8c\u6210\uff0c\u8bfb\u53d6\u6570\u636e\u65f6\u5148\u8bfb\u53d6\u8be5\u6807\u8bb0\u53d8\u91cf\u5224\u65ad\u662f\u5426\u4e8b\u52a1\u6267\u884c\u5b8c\u6210\u3002\u4f46\u8fd9\u6837\u4f1a\u9700\u8981\u989d\u5916\u5199\u4ee3\u7801\u5b9e\u73b0\uff0c\u6bd4\u8f83\u7e41\u7410</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_10","title":"\u96c6\u7fa4\u65b9\u6848","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_11","title":"\u54e8\u5175\u6a21\u5f0f","text":"<p>\u54e8\u5175\u7684\u4ecb\u7ecd</p> <p>sentinel\uff0c\u4e2d\u6587\u540d\u662f\u54e8\u5175\u3002\u54e8\u5175\u662f redis \u96c6\u7fa4\u673a\u6784\u4e2d\u975e\u5e38\u91cd\u8981\u7684\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u4e3b\u8981\u6709\u4ee5\u4e0b\u529f\u80fd\uff1a</p> <ul> <li>\u96c6\u7fa4\u76d1\u63a7\uff1a\u8d1f\u8d23\u76d1\u63a7 redis master \u548c slave \u8fdb\u7a0b\u662f\u5426\u6b63\u5e38\u5de5\u4f5c\u3002</li> <li>\u6d88\u606f\u901a\u77e5\uff1a\u5982\u679c\u67d0\u4e2a redis \u5b9e\u4f8b\u6709\u6545\u969c\uff0c\u90a3\u4e48\u54e8\u5175\u8d1f\u8d23\u53d1\u9001\u6d88\u606f\u4f5c\u4e3a\u62a5\u8b66\u901a\u77e5\u7ed9\u7ba1\u7406\u5458\u3002</li> <li>\u6545\u969c\u8f6c\u79fb\uff1a\u5982\u679c master node \u6302\u6389\u4e86\uff0c\u4f1a\u81ea\u52a8\u8f6c\u79fb\u5230 slave node \u4e0a\u3002</li> <li>\u914d\u7f6e\u4e2d\u5fc3\uff1a\u5982\u679c\u6545\u969c\u8f6c\u79fb\u53d1\u751f\u4e86\uff0c\u901a\u77e5 client \u5ba2\u6237\u7aef\u65b0\u7684 master \u5730\u5740\u3002</li> </ul> <p>\u54e8\u5175\u7528\u4e8e\u5b9e\u73b0 redis \u96c6\u7fa4\u7684\u9ad8\u53ef\u7528\uff0c\u672c\u8eab\u4e5f\u662f\u5206\u5e03\u5f0f\u7684\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u54e8\u5175\u96c6\u7fa4\u53bb\u8fd0\u884c\uff0c\u4e92\u76f8\u534f\u540c\u5de5\u4f5c\u3002</p> <ul> <li>\u6545\u969c\u8f6c\u79fb\u65f6\uff0c\u5224\u65ad\u4e00\u4e2a master node \u662f\u5426\u5b95\u673a\u4e86\uff0c\u9700\u8981\u5927\u90e8\u5206\u7684\u54e8\u5175\u90fd\u540c\u610f\u624d\u884c\uff0c\u6d89\u53ca\u5230\u4e86\u5206\u5e03\u5f0f\u9009\u4e3e\u7684\u95ee\u9898\u3002</li> <li>\u5373\u4f7f\u90e8\u5206\u54e8\u5175\u8282\u70b9\u6302\u6389\u4e86\uff0c\u54e8\u5175\u96c6\u7fa4\u8fd8\u662f\u80fd\u6b63\u5e38\u5de5\u4f5c\u7684\uff0c\u56e0\u4e3a\u5982\u679c\u4e00\u4e2a\u4f5c\u4e3a\u9ad8\u53ef\u7528\u673a\u5236\u91cd\u8981\u7ec4\u6210\u90e8\u5206\u7684\u6545\u969c\u8f6c\u79fb\u7cfb\u7edf\u672c\u8eab\u662f\u5355\u70b9\u7684\uff0c\u90a3\u5c31\u5f88\u5751\u7239\u4e86\u3002</li> </ul> <p>\u54e8\u5175\u7684\u6838\u5fc3\u77e5\u8bc6</p> <ul> <li>\u54e8\u5175\u81f3\u5c11\u9700\u8981 3 \u4e2a\u5b9e\u4f8b\uff0c\u6765\u4fdd\u8bc1\u81ea\u5df1\u7684\u5065\u58ee\u6027\u3002</li> <li>\u54e8\u5175 + redis \u4e3b\u4ece\u7684\u90e8\u7f72\u67b6\u6784\uff0c\u662f\u4e0d\u4fdd\u8bc1\u6570\u636e\u96f6\u4e22\u5931\u7684\uff0c\u53ea\u80fd\u4fdd\u8bc1 redis \u96c6\u7fa4\u7684\u9ad8\u53ef\u7528\u6027\u3002</li> <li>\u5bf9\u4e8e\u54e8\u5175 + redis \u4e3b\u4ece\u8fd9\u79cd\u590d\u6742\u7684\u90e8\u7f72\u67b6\u6784\uff0c\u5c3d\u91cf\u5728\u6d4b\u8bd5\u73af\u5883\u548c\u751f\u4ea7\u73af\u5883\uff0c\u90fd\u8fdb\u884c\u5145\u8db3\u7684\u6d4b\u8bd5\u548c\u6f14\u7ec3\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis-cluster","title":"\u5b98\u65b9Redis Cluster \u65b9\u6848(\u670d\u52a1\u7aef\u8def\u7531\u67e5\u8be2)","text":"<p>redis \u96c6\u7fa4\u6a21\u5f0f\u7684\u5de5\u4f5c\u539f\u7406\u80fd\u8bf4\u4e00\u4e0b\u4e48\uff1f\u5728\u96c6\u7fa4\u6a21\u5f0f\u4e0b\uff0credis \u7684 key \u662f\u5982\u4f55\u5bfb\u5740\u7684\uff1f\u5206\u5e03\u5f0f\u5bfb\u5740\u90fd\u6709\u54ea\u4e9b\u7b97\u6cd5\uff1f\u4e86\u89e3\u4e00\u81f4\u6027 hash \u7b97\u6cd5\u5417\uff1f</p> <p>\u7b80\u4ecb</p> <p>Redis Cluster\u662f\u4e00\u79cd\u670d\u52a1\u7aefSharding\u6280\u672f\uff0c3.0\u7248\u672c\u5f00\u59cb\u6b63\u5f0f\u63d0\u4f9b\u3002Redis Cluster\u5e76\u6ca1\u6709\u4f7f\u7528\u4e00\u81f4\u6027hash\uff0c\u800c\u662f\u91c7\u7528slot(\u69fd)\u7684\u6982\u5ff5\uff0c\u4e00\u5171\u5206\u621016384\u4e2a\u69fd\u3002\u5c06\u8bf7\u6c42\u53d1\u9001\u5230\u4efb\u610f\u8282\u70b9\uff0c\u63a5\u6536\u5230\u8bf7\u6c42\u7684\u8282\u70b9\u4f1a\u5c06\u67e5\u8be2\u8bf7\u6c42\u53d1\u9001\u5230\u6b63\u786e\u7684\u8282\u70b9\u4e0a\u6267\u884c</p> <p>\u65b9\u6848\u8bf4\u660e</p> <ol> <li>\u901a\u8fc7\u54c8\u5e0c\u7684\u65b9\u5f0f\uff0c\u5c06\u6570\u636e\u5206\u7247\uff0c\u6bcf\u4e2a\u8282\u70b9\u5747\u5206\u5b58\u50a8\u4e00\u5b9a\u54c8\u5e0c\u69fd(\u54c8\u5e0c\u503c)\u533a\u95f4\u7684\u6570\u636e\uff0c\u9ed8\u8ba4\u5206\u914d\u4e8616384 \u4e2a\u69fd\u4f4d</li> <li>\u6bcf\u4efd\u6570\u636e\u5206\u7247\u4f1a\u5b58\u50a8\u5728\u591a\u4e2a\u4e92\u4e3a\u4e3b\u4ece\u7684\u591a\u8282\u70b9\u4e0a</li> <li>\u6570\u636e\u5199\u5165\u5148\u5199\u4e3b\u8282\u70b9\uff0c\u518d\u540c\u6b65\u5230\u4ece\u8282\u70b9(\u652f\u6301\u914d\u7f6e\u4e3a\u963b\u585e\u540c\u6b65)</li> <li>\u540c\u4e00\u5206\u7247\u591a\u4e2a\u8282\u70b9\u95f4\u7684\u6570\u636e\u4e0d\u4fdd\u6301\u4e00\u81f4\u6027</li> <li>\u8bfb\u53d6\u6570\u636e\u65f6\uff0c\u5f53\u5ba2\u6237\u7aef\u64cd\u4f5c\u7684key\u6ca1\u6709\u5206\u914d\u5728\u8be5\u8282\u70b9\u4e0a\u65f6\uff0credis\u4f1a\u8fd4\u56de\u8f6c\u5411\u6307\u4ee4\uff0c\u6307\u5411\u6b63\u786e\u7684\u8282\u70b9</li> <li>\u6269\u5bb9\u65f6\u65f6\u9700\u8981\u9700\u8981\u628a\u65e7\u8282\u70b9\u7684\u6570\u636e\u8fc1\u79fb\u4e00\u90e8\u5206\u5230\u65b0\u8282\u70b9</li> </ol> <p>\u5728 redis cluster \u67b6\u6784\u4e0b\uff0c\u6bcf\u4e2a redis \u8981\u653e\u5f00\u4e24\u4e2a\u7aef\u53e3\u53f7\uff0c\u6bd4\u5982\u4e00\u4e2a\u662f 6379\uff0c\u53e6\u5916\u4e00\u4e2a\u5c31\u662f \u52a01w \u7684\u7aef\u53e3\u53f7\uff0c\u6bd4\u5982 16379\u3002</p> <p>16379 \u7aef\u53e3\u53f7\u662f\u7528\u6765\u8fdb\u884c\u8282\u70b9\u95f4\u901a\u4fe1\u7684\uff0c\u4e5f\u5c31\u662f cluster bus \u7684\u4e1c\u897f\uff0ccluster bus \u7684\u901a\u4fe1\uff0c\u7528\u6765\u8fdb\u884c\u6545\u969c\u68c0\u6d4b\u3001\u914d\u7f6e\u66f4\u65b0\u3001\u6545\u969c\u8f6c\u79fb\u6388\u6743\u3002cluster bus \u7528\u4e86\u53e6\u5916\u4e00\u79cd\u4e8c\u8fdb\u5236\u7684\u534f\u8bae\uff0cgossip \u534f\u8bae\uff0c\u7528\u4e8e\u8282\u70b9\u95f4\u8fdb\u884c\u9ad8\u6548\u7684\u6570\u636e\u4ea4\u6362\uff0c\u5360\u7528\u66f4\u5c11\u7684\u7f51\u7edc\u5e26\u5bbd\u548c\u5904\u7406\u65f6\u95f4\u3002</p> <p>\u8282\u70b9\u95f4\u7684\u5185\u90e8\u901a\u4fe1\u673a\u5236</p> <p>\u57fa\u672c\u901a\u4fe1\u539f\u7406</p> <p>\u96c6\u7fa4\u5143\u6570\u636e\u7684\u7ef4\u62a4\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u96c6\u4e2d\u5f0f\u3001Gossip \u534f\u8bae\u3002redis cluster \u8282\u70b9\u95f4\u91c7\u7528 gossip \u534f\u8bae\u8fdb\u884c\u901a\u4fe1\u3002</p> <p>\u5206\u5e03\u5f0f\u5bfb\u5740\u7b97\u6cd5</p> <ul> <li>hash \u7b97\u6cd5\uff08\u5927\u91cf\u7f13\u5b58\u91cd\u5efa\uff09</li> <li>\u4e00\u81f4\u6027 hash \u7b97\u6cd5\uff08\u81ea\u52a8\u7f13\u5b58\u8fc1\u79fb\uff09+ \u865a\u62df\u8282\u70b9\uff08\u81ea\u52a8\u8d1f\u8f7d\u5747\u8861\uff09</li> <li>redis cluster \u7684 hash slot \u7b97\u6cd5</li> </ul> <p>\u4f18\u70b9</p> <ul> <li>\u65e0\u4e2d\u5fc3\u67b6\u6784\uff0c\u652f\u6301\u52a8\u6001\u6269\u5bb9\uff0c\u5bf9\u4e1a\u52a1\u900f\u660e</li> <li>\u5177\u5907Sentinel\u7684\u76d1\u63a7\u548c\u81ea\u52a8Failover(\u6545\u969c\u8f6c\u79fb)\u80fd\u529b</li> <li>\u5ba2\u6237\u7aef\u4e0d\u9700\u8981\u8fde\u63a5\u96c6\u7fa4\u6240\u6709\u8282\u70b9\uff0c\u8fde\u63a5\u96c6\u7fa4\u4e2d\u4efb\u4f55\u4e00\u4e2a\u53ef\u7528\u8282\u70b9\u5373\u53ef</li> <li>\u9ad8\u6027\u80fd\uff0c\u5ba2\u6237\u7aef\u76f4\u8fderedis\u670d\u52a1\uff0c\u514d\u53bb\u4e86proxy\u4ee3\u7406\u7684\u635f\u8017</li> </ul> <p>\u7f3a\u70b9</p> <ul> <li>\u8fd0\u7ef4\u4e5f\u5f88\u590d\u6742\uff0c\u6570\u636e\u8fc1\u79fb\u9700\u8981\u4eba\u5de5\u5e72\u9884</li> <li>\u53ea\u80fd\u4f7f\u75280\u53f7\u6570\u636e\u5e93</li> <li>\u4e0d\u652f\u6301\u6279\u91cf\u64cd\u4f5c(pipeline\u7ba1\u9053\u64cd\u4f5c)</li> <li>\u5206\u5e03\u5f0f\u903b\u8f91\u548c\u5b58\u50a8\u6a21\u5757\u8026\u5408\u7b49</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_12","title":"\u57fa\u4e8e\u5ba2\u6237\u7aef\u5206\u914d","text":"<p>\u7b80\u4ecb</p> <p>Redis Sharding\u662fRedis Cluster\u51fa\u6765\u4e4b\u524d\uff0c\u4e1a\u754c\u666e\u904d\u4f7f\u7528\u7684\u591aRedis\u5b9e\u4f8b\u96c6\u7fa4\u65b9\u6cd5\u3002\u5176\u4e3b\u8981\u601d\u60f3\u662f\u91c7\u7528\u54c8\u5e0c\u7b97\u6cd5\u5c06Redis\u6570\u636e\u7684key\u8fdb\u884c\u6563\u5217\uff0c\u901a\u8fc7hash\u51fd\u6570\uff0c\u7279\u5b9a\u7684key\u4f1a\u6620\u5c04\u5230\u7279\u5b9a\u7684Redis\u8282\u70b9\u4e0a\u3002Java redis\u5ba2\u6237\u7aef\u9a71\u52a8jedis\uff0c\u652f\u6301Redis Sharding\u529f\u80fd\uff0c\u5373ShardedJedis\u4ee5\u53ca\u7ed3\u5408\u7f13\u5b58\u6c60\u7684ShardedJedisPool</p> <p>\u4f18\u70b9</p> <p>\u4f18\u52bf\u5728\u4e8e\u975e\u5e38\u7b80\u5355\uff0c\u670d\u52a1\u7aef\u7684Redis\u5b9e\u4f8b\u5f7c\u6b64\u72ec\u7acb\uff0c\u76f8\u4e92\u65e0\u5173\u8054\uff0c\u6bcf\u4e2aRedis\u5b9e\u4f8b\u50cf\u5355\u670d\u52a1\u5668\u4e00\u6837\u8fd0\u884c\uff0c\u975e\u5e38\u5bb9\u6613\u7ebf\u6027\u6269\u5c55\uff0c\u7cfb\u7edf\u7684\u7075\u6d3b\u6027\u5f88\u5f3a</p> <p>\u7f3a\u70b9</p> <ul> <li>\u7531\u4e8esharding\u5904\u7406\u653e\u5230\u5ba2\u6237\u7aef\uff0c\u89c4\u6a21\u8fdb\u4e00\u6b65\u6269\u5927\u65f6\u7ed9\u8fd0\u7ef4\u5e26\u6765\u6311\u6218\u3002</li> <li>\u5ba2\u6237\u7aefsharding\u4e0d\u652f\u6301\u52a8\u6001\u589e\u5220\u8282\u70b9\u3002\u670d\u52a1\u7aefRedis\u5b9e\u4f8b\u7fa4\u62d3\u6251\u7ed3\u6784\u6709\u53d8\u5316\u65f6\uff0c\u6bcf\u4e2a\u5ba2\u6237\u7aef\u90fd\u9700\u8981\u66f4\u65b0\u8c03\u6574\u3002\u8fde\u63a5\u4e0d\u80fd\u5171\u4eab\uff0c\u5f53\u5e94\u7528\u89c4\u6a21\u589e\u5927\u65f6\uff0c\u8d44\u6e90\u6d6a\u8d39\u5236\u7ea6\u4f18\u5316</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_13","title":"\u57fa\u4e8e\u4ee3\u7406\u670d\u52a1\u5668\u5206\u7247","text":"<p>\u7b80\u4ecb</p> <p>\u5ba2\u6237\u7aef\u53d1\u9001\u8bf7\u6c42\u5230\u4e00\u4e2a\u4ee3\u7406\u7ec4\u4ef6\uff0c\u4ee3\u7406\u89e3\u6790\u5ba2\u6237\u7aef\u7684\u6570\u636e\uff0c\u5e76\u5c06\u8bf7\u6c42\u8f6c\u53d1\u81f3\u6b63\u786e\u7684\u8282\u70b9\uff0c\u6700\u540e\u5c06\u7ed3\u679c\u56de\u590d\u7ed9\u5ba2\u6237\u7aef</p> <p>\u7279\u5f81</p> <ul> <li>\u900f\u660e\u63a5\u5165\uff0c\u4e1a\u52a1\u7a0b\u5e8f\u4e0d\u7528\u5173\u5fc3\u540e\u7aefRedis\u5b9e\u4f8b\uff0c\u5207\u6362\u6210\u672c\u4f4e</li> <li>Proxy \u7684\u903b\u8f91\u548c\u5b58\u50a8\u7684\u903b\u8f91\u662f\u9694\u79bb\u7684</li> <li>\u4ee3\u7406\u5c42\u591a\u4e86\u4e00\u6b21\u8f6c\u53d1\uff0c\u6027\u80fd\u6709\u6240\u635f\u8017</li> </ul> <p>\u4e1a\u754c\u5f00\u6e90\u65b9\u6848</p> <ul> <li>Twtter\u5f00\u6e90\u7684Twemproxy</li> <li>\u8c4c\u8c46\u835a\u5f00\u6e90\u7684Codis</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_21","title":"Redis \u4e3b\u4ece\u67b6\u6784","text":"<p>\u5355\u673a\u7684 redis\uff0c\u80fd\u591f\u627f\u8f7d\u7684 QPS \u5927\u6982\u5c31\u5728\u4e0a\u4e07\u5230\u51e0\u4e07\u4e0d\u7b49\u3002\u5bf9\u4e8e\u7f13\u5b58\u6765\u8bf4\uff0c\u4e00\u822c\u90fd\u662f\u7528\u6765\u652f\u6491\u8bfb\u9ad8\u5e76\u53d1\u7684\u3002\u56e0\u6b64\u67b6\u6784\u505a\u6210\u4e3b\u4ece(master-slave)\u67b6\u6784\uff0c\u4e00\u4e3b\u591a\u4ece\uff0c\u4e3b\u8d1f\u8d23\u5199\uff0c\u5e76\u4e14\u5c06\u6570\u636e\u590d\u5236\u5230\u5176\u5b83\u7684 slave \u8282\u70b9\uff0c\u4ece\u8282\u70b9\u8d1f\u8d23\u8bfb\u3002\u6240\u6709\u7684\u8bfb\u8bf7\u6c42\u5168\u90e8\u8d70\u4ece\u8282\u70b9\u3002\u8fd9\u6837\u4e5f\u53ef\u4ee5\u5f88\u8f7b\u677e\u5b9e\u73b0\u6c34\u5e73\u6269\u5bb9\uff0c\u652f\u6491\u8bfb\u9ad8\u5e76\u53d1\u3002</p> <p></p> <p>redis replication -&gt; \u4e3b\u4ece\u67b6\u6784 -&gt; \u8bfb\u5199\u5206\u79bb -&gt; \u6c34\u5e73\u6269\u5bb9\u652f\u6491\u8bfb\u9ad8\u5e76\u53d1</p> <p>redis replication \u7684\u6838\u5fc3\u673a\u5236</p> <ul> <li>redis \u91c7\u7528\u5f02\u6b65\u65b9\u5f0f\u590d\u5236\u6570\u636e\u5230 slave \u8282\u70b9\uff0c\u4e0d\u8fc7 redis2.8 \u5f00\u59cb\uff0cslave node \u4f1a\u5468\u671f\u6027\u5730\u786e\u8ba4\u81ea\u5df1\u6bcf\u6b21\u590d\u5236\u7684\u6570\u636e\u91cf\uff1b</li> <li>\u4e00\u4e2a master node \u662f\u53ef\u4ee5\u914d\u7f6e\u591a\u4e2a slave node \u7684\uff1b</li> <li>slave node \u4e5f\u53ef\u4ee5\u8fde\u63a5\u5176\u4ed6\u7684 slave node\uff1b</li> <li>slave node \u505a\u590d\u5236\u7684\u65f6\u5019\uff0c\u4e0d\u4f1a block master node \u7684\u6b63\u5e38\u5de5\u4f5c\uff1b</li> <li>slave node \u5728\u505a\u590d\u5236\u7684\u65f6\u5019\uff0c\u4e5f\u4e0d\u4f1a block \u5bf9\u81ea\u5df1\u7684\u67e5\u8be2\u64cd\u4f5c\uff0c\u5b83\u4f1a\u7528\u65e7\u7684\u6570\u636e\u96c6\u6765\u63d0\u4f9b\u670d\u52a1\uff1b\u4f46\u662f\u590d\u5236\u5b8c\u6210\u7684\u65f6\u5019\uff0c\u9700\u8981\u5220\u9664\u65e7\u6570\u636e\u96c6\uff0c\u52a0\u8f7d\u65b0\u6570\u636e\u96c6\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u4f1a\u6682\u505c\u5bf9\u5916\u670d\u52a1\u4e86\uff1b</li> <li>slave node \u4e3b\u8981\u7528\u6765\u8fdb\u884c\u6a2a\u5411\u6269\u5bb9\uff0c\u505a\u8bfb\u5199\u5206\u79bb\uff0c\u6269\u5bb9\u7684 slave node \u53ef\u4ee5\u63d0\u9ad8\u8bfb\u7684\u541e\u5410\u91cf\u3002</li> </ul> <p>\u6ce8\u610f\uff0c\u5982\u679c\u91c7\u7528\u4e86\u4e3b\u4ece\u67b6\u6784\uff0c\u90a3\u4e48\u5efa\u8bae\u5fc5\u987b\u5f00\u542f master node \u7684\u6301\u4e45\u5316\uff0c\u4e0d\u5efa\u8bae\u7528 slave node \u4f5c\u4e3a master node \u7684\u6570\u636e\u70ed\u5907\uff0c\u56e0\u4e3a\u90a3\u6837\u7684\u8bdd\uff0c\u5982\u679c\u4f60\u5173\u6389 master \u7684\u6301\u4e45\u5316\uff0c\u53ef\u80fd\u5728 master \u5b95\u673a\u91cd\u542f\u7684\u65f6\u5019\u6570\u636e\u662f\u7a7a\u7684\uff0c\u7136\u540e\u53ef\u80fd\u4e00\u7ecf\u8fc7\u590d\u5236\uff0c slave node \u7684\u6570\u636e\u4e5f\u4e22\u4e86\u3002</p> <p>\u53e6\u5916\uff0cmaster \u7684\u5404\u79cd\u5907\u4efd\u65b9\u6848\uff0c\u4e5f\u9700\u8981\u505a\u3002\u4e07\u4e00\u672c\u5730\u7684\u6240\u6709\u6587\u4ef6\u4e22\u5931\u4e86\uff0c\u4ece\u5907\u4efd\u4e2d\u6311\u9009\u4e00\u4efd rdb \u53bb\u6062\u590d master\uff0c\u8fd9\u6837\u624d\u80fd\u786e\u4fdd\u542f\u52a8\u7684\u65f6\u5019\uff0c\u662f\u6709\u6570\u636e\u7684\uff0c\u5373\u4f7f\u91c7\u7528\u4e86\u540e\u7eed\u8bb2\u89e3\u7684\u9ad8\u53ef\u7528\u673a\u5236\uff0cslave node \u53ef\u4ee5\u81ea\u52a8\u63a5\u7ba1 master node\uff0c\u4f46\u4e5f\u53ef\u80fd sentinel \u8fd8\u6ca1\u68c0\u6d4b\u5230 master failure\uff0cmaster node \u5c31\u81ea\u52a8\u91cd\u542f\u4e86\uff0c\u8fd8\u662f\u53ef\u80fd\u5bfc\u81f4\u4e0a\u9762\u6240\u6709\u7684 slave node \u6570\u636e\u88ab\u6e05\u7a7a\u3002</p> <p>redis \u4e3b\u4ece\u590d\u5236\u7684\u6838\u5fc3\u539f\u7406</p> <p>\u5f53\u542f\u52a8\u4e00\u4e2a slave node \u7684\u65f6\u5019\uff0c\u5b83\u4f1a\u53d1\u9001\u4e00\u4e2a PSYNC \u547d\u4ee4\u7ed9 master node\u3002</p> <p>\u5982\u679c\u8fd9\u662f slave node \u521d\u6b21\u8fde\u63a5\u5230 master node\uff0c\u90a3\u4e48\u4f1a\u89e6\u53d1\u4e00\u6b21 full resynchronization \u5168\u91cf\u590d\u5236\u3002\u6b64\u65f6 master \u4f1a\u542f\u52a8\u4e00\u4e2a\u540e\u53f0\u7ebf\u7a0b\uff0c\u5f00\u59cb\u751f\u6210\u4e00\u4efd RDB \u5feb\u7167\u6587\u4ef6\uff0c</p> <p>\u540c\u65f6\u8fd8\u4f1a\u5c06\u4ece\u5ba2\u6237\u7aef client \u65b0\u6536\u5230\u7684\u6240\u6709\u5199\u547d\u4ee4\u7f13\u5b58\u5728\u5185\u5b58\u4e2d\u3002RDB \u6587\u4ef6\u751f\u6210\u5b8c\u6bd5\u540e\uff0c master \u4f1a\u5c06\u8fd9\u4e2a RDB \u53d1\u9001\u7ed9 slave\uff0cslave \u4f1a\u5148\u5199\u5165\u672c\u5730\u78c1\u76d8\uff0c\u7136\u540e\u518d\u4ece\u672c\u5730\u78c1\u76d8\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c</p> <p>\u63a5\u7740 master \u4f1a\u5c06\u5185\u5b58\u4e2d\u7f13\u5b58\u7684\u5199\u547d\u4ee4\u53d1\u9001\u5230 slave\uff0cslave \u4e5f\u4f1a\u540c\u6b65\u8fd9\u4e9b\u6570\u636e\u3002</p> <p>slave node \u5982\u679c\u8ddf master node \u6709\u7f51\u7edc\u6545\u969c\uff0c\u65ad\u5f00\u4e86\u8fde\u63a5\uff0c\u4f1a\u81ea\u52a8\u91cd\u8fde\uff0c\u8fde\u63a5\u4e4b\u540e master node \u4ec5\u4f1a\u590d\u5236\u7ed9 slave \u90e8\u5206\u7f3a\u5c11\u7684\u6570\u636e\u3002</p> <p></p> <p>\u8fc7\u7a0b\u539f\u7406</p> <ol> <li>\u5f53\u4ece\u5e93\u548c\u4e3b\u5e93\u5efa\u7acbMS\u5173\u7cfb\u540e\uff0c\u4f1a\u5411\u4e3b\u6570\u636e\u5e93\u53d1\u9001SYNC\u547d\u4ee4</li> <li>\u4e3b\u5e93\u63a5\u6536\u5230SYNC\u547d\u4ee4\u540e\u4f1a\u5f00\u59cb\u5728\u540e\u53f0\u4fdd\u5b58\u5feb\u7167(RDB\u6301\u4e45\u5316\u8fc7\u7a0b)\uff0c\u5e76\u5c06\u671f\u95f4\u63a5\u6536\u5230\u7684\u5199\u547d\u4ee4\u7f13\u5b58\u8d77\u6765</li> <li>\u5f53\u5feb\u7167\u5b8c\u6210\u540e\uff0c\u4e3bRedis\u4f1a\u5c06\u5feb\u7167\u6587\u4ef6\u548c\u6240\u6709\u7f13\u5b58\u7684\u5199\u547d\u4ee4\u53d1\u9001\u7ed9\u4eceRedis</li> <li>\u4eceRedis\u63a5\u6536\u5230\u540e\uff0c\u4f1a\u8f7d\u5165\u5feb\u7167\u6587\u4ef6\u5e76\u4e14\u6267\u884c\u6536\u5230\u7684\u7f13\u5b58\u7684\u547d\u4ee4</li> <li>\u4e4b\u540e\uff0c\u4e3bRedis\u6bcf\u5f53\u63a5\u6536\u5230\u5199\u547d\u4ee4\u65f6\u5c31\u4f1a\u5c06\u547d\u4ee4\u53d1\u9001\u4eceRedis\uff0c\u4ece\u800c\u4fdd\u8bc1\u6570\u636e\u7684\u4e00\u81f4</li> </ol> <p>\u7f3a\u70b9</p> <p>\u6240\u6709\u7684slave\u8282\u70b9\u6570\u636e\u7684\u590d\u5236\u548c\u540c\u6b65\u90fd\u7531master\u8282\u70b9\u6765\u5904\u7406\uff0c\u4f1a\u7167\u6210master\u8282\u70b9\u538b\u529b\u592a\u5927\uff0c\u4f7f\u7528\u4e3b\u4ece\u4ece\u7ed3\u6784\u6765\u89e3\u51b3</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_22","title":"Redis\u96c6\u7fa4\u7684\u4e3b\u4ece\u590d\u5236\u6a21\u578b\u662f\u600e\u6837\u7684\uff1f","text":"<p>\u4e3a\u4e86\u4f7f\u5728\u90e8\u5206\u8282\u70b9\u5931\u8d25\u6216\u8005\u5927\u90e8\u5206\u8282\u70b9\u65e0\u6cd5\u901a\u4fe1\u7684\u60c5\u51b5\u4e0b\u96c6\u7fa4\u4ecd\u7136\u53ef\u7528\uff0c\u6240\u4ee5\u96c6\u7fa4\u4f7f\u7528\u4e86\u4e3b\u4ece\u590d\u5236\u6a21\u578b\uff0c\u6bcf\u4e2a\u8282\u70b9\u90fd\u4f1a\u6709N-1\u4e2a\u590d\u5236\u54c1</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_23","title":"\u751f\u4ea7\u73af\u5883\u4e2d\u7684 redis \u662f\u600e\u4e48\u90e8\u7f72\u7684\uff1f","text":"<p>redis cluster\uff0c10 \u53f0\u673a\u5668\uff0c5 \u53f0\u673a\u5668\u90e8\u7f72\u4e86 redis \u4e3b\u5b9e\u4f8b\uff0c\u53e6\u5916 5 \u53f0\u673a\u5668\u90e8\u7f72\u4e86 redis \u7684\u4ece\u5b9e\u4f8b\uff0c\u6bcf\u4e2a\u4e3b\u5b9e\u4f8b\u6302\u4e86\u4e00\u4e2a\u4ece\u5b9e\u4f8b\uff0c5 \u4e2a\u8282\u70b9\u5bf9\u5916\u63d0\u4f9b\u8bfb\u5199\u670d\u52a1\uff0c\u6bcf\u4e2a\u8282\u70b9\u7684\u8bfb\u5199\u9ad8\u5cf0qps\u53ef\u80fd\u53ef\u4ee5\u8fbe\u5230\u6bcf\u79d2 5 \u4e07\uff0c5 \u53f0\u673a\u5668\u6700\u591a\u662f 25 \u4e07\u8bfb\u5199\u8bf7\u6c42/s\u3002</p> <p>\u673a\u5668\u662f\u4ec0\u4e48\u914d\u7f6e\uff1f32G \u5185\u5b58+ 8 \u6838 CPU + 1T \u78c1\u76d8\uff0c\u4f46\u662f\u5206\u914d\u7ed9 redis \u8fdb\u7a0b\u7684\u662f10g\u5185\u5b58\uff0c\u4e00\u822c\u7ebf\u4e0a\u751f\u4ea7\u73af\u5883\uff0credis \u7684\u5185\u5b58\u5c3d\u91cf\u4e0d\u8981\u8d85\u8fc7 10g\uff0c\u8d85\u8fc7 10g \u53ef\u80fd\u4f1a\u6709\u95ee\u9898\u3002</p> <p>5 \u53f0\u673a\u5668\u5bf9\u5916\u63d0\u4f9b\u8bfb\u5199\uff0c\u4e00\u5171\u6709 50g \u5185\u5b58\u3002</p> <p>\u56e0\u4e3a\u6bcf\u4e2a\u4e3b\u5b9e\u4f8b\u90fd\u6302\u4e86\u4e00\u4e2a\u4ece\u5b9e\u4f8b\uff0c\u6240\u4ee5\u662f\u9ad8\u53ef\u7528\u7684\uff0c\u4efb\u4f55\u4e00\u4e2a\u4e3b\u5b9e\u4f8b\u5b95\u673a\uff0c\u90fd\u4f1a\u81ea\u52a8\u6545\u969c\u8fc1\u79fb\uff0credis \u4ece\u5b9e\u4f8b\u4f1a\u81ea\u52a8\u53d8\u6210\u4e3b\u5b9e\u4f8b\u7ee7\u7eed\u63d0\u4f9b\u8bfb\u5199\u670d\u52a1\u3002</p> <p>\u4f60\u5f80\u5185\u5b58\u91cc\u5199\u7684\u662f\u4ec0\u4e48\u6570\u636e\uff1f\u6bcf\u6761\u6570\u636e\u7684\u5927\u5c0f\u662f\u591a\u5c11\uff1f\u5546\u54c1\u6570\u636e\uff0c\u6bcf\u6761\u6570\u636e\u662f 10kb\u3002100 \u6761\u6570\u636e\u662f 1mb\uff0c10 \u4e07\u6761\u6570\u636e\u662f 1g\u3002\u5e38\u9a7b\u5185\u5b58\u7684\u662f 200 \u4e07\u6761\u5546\u54c1\u6570\u636e\uff0c\u5360\u7528\u5185\u5b58\u662f 20g\uff0c\u4ec5\u4ec5\u4e0d\u5230\u603b\u5185\u5b58\u7684 50%\u3002\u76ee\u524d\u9ad8\u5cf0\u671f\u6bcf\u79d2\u5c31\u662f 3500 \u5de6\u53f3\u7684\u8bf7\u6c42\u91cf\u3002</p> <p>\u5176\u5b9e\u5927\u578b\u7684\u516c\u53f8\uff0c\u4f1a\u6709\u57fa\u7840\u67b6\u6784\u7684 team \u8d1f\u8d23\u7f13\u5b58\u96c6\u7fa4\u7684\u8fd0\u7ef4\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_24","title":"\u8bf4\u8bf4Redis\u54c8\u5e0c\u69fd\u7684\u6982\u5ff5\uff1f","text":"<p>Redis\u96c6\u7fa4\u6ca1\u6709\u4f7f\u7528\u4e00\u81f4\u6027hash,\u800c\u662f\u5f15\u5165\u4e86\u54c8\u5e0c\u69fd\u7684\u6982\u5ff5\uff0cRedis\u96c6\u7fa4\u670916384\u4e2a\u54c8\u5e0c\u69fd\uff0c\u6bcf\u4e2akey\u901a\u8fc7CRC16\u6821\u9a8c\u540e\u5bf916384\u53d6\u6a21\u6765\u51b3\u5b9a\u653e\u7f6e\u54ea\u4e2a\u69fd\uff0c\u96c6\u7fa4\u7684\u6bcf\u4e2a\u8282\u70b9\u8d1f\u8d23\u4e00\u90e8\u5206hash\u69fd\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_25","title":"Redis\u96c6\u7fa4\u4f1a\u6709\u5199\u64cd\u4f5c\u4e22\u5931\u5417\uff1f\u4e3a\u4ec0\u4e48\uff1f","text":"<p>Redis\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u6570\u636e\u7684\u5f3a\u4e00\u81f4\u6027\uff0c\u8fd9\u610f\u5473\u8fd9\u5728\u5b9e\u9645\u4e2d\u96c6\u7fa4\u5728\u7279\u5b9a\u7684\u6761\u4ef6\u4e0b\u53ef\u80fd\u4f1a\u4e22\u5931\u5199\u64cd\u4f5c\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_26","title":"Redis\u96c6\u7fa4\u4e4b\u95f4\u662f\u5982\u4f55\u590d\u5236\u7684\uff1f","text":"<p>\u5f02\u6b65\u590d\u5236</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_27","title":"Redis\u96c6\u7fa4\u6700\u5927\u8282\u70b9\u4e2a\u6570\u662f\u591a\u5c11\uff1f","text":"<p>16384\u4e2a</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_28","title":"Redis\u96c6\u7fa4\u5982\u4f55\u9009\u62e9\u6570\u636e\u5e93\uff1f","text":"<p>Redis\u96c6\u7fa4\u76ee\u524d\u65e0\u6cd5\u505a\u6570\u636e\u5e93\u9009\u62e9\uff0c\u9ed8\u8ba4\u57280\u6570\u636e\u5e93\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_14","title":"\u5206\u533a","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#rediscpu","title":"Redis\u662f\u5355\u7ebf\u7a0b\u7684\uff0c\u5982\u4f55\u63d0\u9ad8\u591a\u6838CPU\u7684\u5229\u7528\u7387\uff1f","text":"<p>\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a\u670d\u52a1\u5668\u90e8\u7f72\u591a\u4e2aRedis\u7684\u5b9e\u4f8b\uff0c\u5e76\u628a\u4ed6\u4eec\u5f53\u4f5c\u4e0d\u540c\u7684\u670d\u52a1\u5668\u6765\u4f7f\u7528\uff0c\u5728\u67d0\u4e9b\u65f6\u5019\uff0c\u65e0\u8bba\u5982\u4f55\u4e00\u4e2a\u670d\u52a1\u5668\u662f\u4e0d\u591f\u7684\uff0c \u6240\u4ee5\uff0c\u5982\u679c\u4f60\u60f3\u4f7f\u7528\u591a\u4e2aCPU\uff0c\u4f60\u53ef\u4ee5\u8003\u8651\u4e00\u4e0b\u5206\u7247\uff08shard\uff09\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_29","title":"\u4e3a\u4ec0\u4e48\u8981\u505aRedis\u5206\u533a\uff1f","text":"<p>\u5206\u533a\u53ef\u4ee5\u8ba9Redis\u7ba1\u7406\u66f4\u5927\u7684\u5185\u5b58\uff0cRedis\u5c06\u53ef\u4ee5\u4f7f\u7528\u6240\u6709\u673a\u5668\u7684\u5185\u5b58\u3002\u5982\u679c\u6ca1\u6709\u5206\u533a\uff0c\u4f60\u6700\u591a\u53ea\u80fd\u4f7f\u7528\u4e00\u53f0\u673a\u5668\u7684\u5185\u5b58\u3002\u5206\u533a\u4f7fRedis\u7684\u8ba1\u7b97\u80fd\u529b\u901a\u8fc7\u7b80\u5355\u5730\u589e\u52a0\u8ba1\u7b97\u673a\u5f97\u5230\u6210\u500d\u63d0\u5347\uff0cRedis\u7684\u7f51\u7edc\u5e26\u5bbd\u4e5f\u4f1a\u968f\u7740\u8ba1\u7b97\u673a\u548c\u7f51\u5361\u7684\u589e\u52a0\u800c\u6210\u500d\u589e\u957f\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_30","title":"\u4f60\u77e5\u9053\u6709\u54ea\u4e9bRedis\u5206\u533a\u5b9e\u73b0\u65b9\u6848\uff1f","text":"<ul> <li>\u5ba2\u6237\u7aef\u5206\u533a\u5c31\u662f\u5728\u5ba2\u6237\u7aef\u5c31\u5df2\u7ecf\u51b3\u5b9a\u6570\u636e\u4f1a\u88ab\u5b58\u50a8\u5230\u54ea\u4e2aredis\u8282\u70b9\u6216\u8005\u4ece\u54ea\u4e2aredis\u8282\u70b9\u8bfb\u53d6\u3002\u5927\u591a\u6570\u5ba2\u6237\u7aef\u5df2\u7ecf\u5b9e\u73b0\u4e86\u5ba2\u6237\u7aef\u5206\u533a\u3002</li> <li>\u4ee3\u7406\u5206\u533a \u610f\u5473\u7740\u5ba2\u6237\u7aef\u5c06\u8bf7\u6c42\u53d1\u9001\u7ed9\u4ee3\u7406\uff0c\u7136\u540e\u4ee3\u7406\u51b3\u5b9a\u53bb\u54ea\u4e2a\u8282\u70b9\u5199\u6570\u636e\u6216\u8005\u8bfb\u6570\u636e\u3002\u4ee3\u7406\u6839\u636e\u5206\u533a\u89c4\u5219\u51b3\u5b9a\u8bf7\u6c42\u54ea\u4e9bRedis\u5b9e\u4f8b\uff0c\u7136\u540e\u6839\u636eRedis\u7684\u54cd\u5e94\u7ed3\u679c\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002redis\u548cmemcached\u7684\u4e00\u79cd\u4ee3\u7406\u5b9e\u73b0\u5c31\u662fTwemproxy</li> <li>\u67e5\u8be2\u8def\u7531(Query routing) \u7684\u610f\u601d\u662f\u5ba2\u6237\u7aef\u968f\u673a\u5730\u8bf7\u6c42\u4efb\u610f\u4e00\u4e2aredis\u5b9e\u4f8b\uff0c\u7136\u540e\u7531Redis\u5c06\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u6b63\u786e\u7684Redis\u8282\u70b9\u3002Redis Cluster\u5b9e\u73b0\u4e86\u4e00\u79cd\u6df7\u5408\u5f62\u5f0f\u7684\u67e5\u8be2\u8def\u7531\uff0c\u4f46\u5e76\u4e0d\u662f\u76f4\u63a5\u5c06\u8bf7\u6c42\u4ece\u4e00\u4e2aredis\u8282\u70b9\u8f6c\u53d1\u5230\u53e6\u4e00\u4e2aredis\u8282\u70b9\uff0c\u800c\u662f\u5728\u5ba2\u6237\u7aef\u7684\u5e2e\u52a9\u4e0b\u76f4\u63a5redirected\u5230\u6b63\u786e\u7684redis\u8282\u70b9\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_31","title":"Redis\u5206\u533a\u6709\u4ec0\u4e48\u7f3a\u70b9\uff1f","text":"<ul> <li>\u6d89\u53ca\u591a\u4e2akey\u7684\u64cd\u4f5c\u901a\u5e38\u4e0d\u4f1a\u88ab\u652f\u6301\u3002\u4f8b\u5982\u4f60\u4e0d\u80fd\u5bf9\u4e24\u4e2a\u96c6\u5408\u6c42\u4ea4\u96c6\uff0c\u56e0\u4e3a\u4ed6\u4eec\u53ef\u80fd\u88ab\u5b58\u50a8\u5230\u4e0d\u540c\u7684Redis\u5b9e\u4f8b\uff08\u5b9e\u9645\u4e0a\u8fd9\u79cd\u60c5\u51b5\u4e5f\u6709\u529e\u6cd5\uff0c\u4f46\u662f\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528\u4ea4\u96c6\u6307\u4ee4\uff09\u3002</li> <li>\u540c\u65f6\u64cd\u4f5c\u591a\u4e2akey,\u5219\u4e0d\u80fd\u4f7f\u7528Redis\u4e8b\u52a1.</li> <li>\u5206\u533a\u4f7f\u7528\u7684\u7c92\u5ea6\u662fkey\uff0c\u4e0d\u80fd\u4f7f\u7528\u4e00\u4e2a\u975e\u5e38\u957f\u7684\u6392\u5e8fkey\u5b58\u50a8\u4e00\u4e2a\u6570\u636e\u96c6\uff08The partitioning granularity is the key, so it is not possible to shard a dataset with a single huge key like a very big sorted set\uff09</li> <li>\u5f53\u4f7f\u7528\u5206\u533a\u7684\u65f6\u5019\uff0c\u6570\u636e\u5904\u7406\u4f1a\u975e\u5e38\u590d\u6742\uff0c\u4f8b\u5982\u4e3a\u4e86\u5907\u4efd\u4f60\u5fc5\u987b\u4ece\u4e0d\u540c\u7684Redis\u5b9e\u4f8b\u548c\u4e3b\u673a\u540c\u65f6\u6536\u96c6RDB / AOF\u6587\u4ef6\u3002</li> <li>\u5206\u533a\u65f6\u52a8\u6001\u6269\u5bb9\u6216\u7f29\u5bb9\u53ef\u80fd\u975e\u5e38\u590d\u6742\u3002Redis\u96c6\u7fa4\u5728\u8fd0\u884c\u65f6\u589e\u52a0\u6216\u8005\u5220\u9664Redis\u8282\u70b9\uff0c\u80fd\u505a\u5230\u6700\u5927\u7a0b\u5ea6\u5bf9\u7528\u6237\u900f\u660e\u5730\u6570\u636e\u518d\u5e73\u8861\uff0c\u4f46\u5176\u4ed6\u4e00\u4e9b\u5ba2\u6237\u7aef\u5206\u533a\u6216\u8005\u4ee3\u7406\u5206\u533a\u65b9\u6cd5\u5219\u4e0d\u652f\u6301\u8fd9\u79cd\u7279\u6027\u3002\u7136\u800c\uff0c\u6709\u4e00\u79cd\u9884\u5206\u7247\u7684\u6280\u672f\u4e5f\u53ef\u4ee5\u8f83\u597d\u7684\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_15","title":"\u5206\u5e03\u5f0f\u95ee\u9898","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_32","title":"Redis\u5b9e\u73b0\u5206\u5e03\u5f0f\u9501","text":"<p>Redis\u4e3a\u5355\u8fdb\u7a0b\u5355\u7ebf\u7a0b\u6a21\u5f0f\uff0c\u91c7\u7528\u961f\u5217\u6a21\u5f0f\u5c06\u5e76\u53d1\u8bbf\u95ee\u53d8\u6210\u4e32\u884c\u8bbf\u95ee\uff0c\u4e14\u591a\u5ba2\u6237\u7aef\u5bf9Redis\u7684\u8fde\u63a5\u5e76\u4e0d\u5b58\u5728\u7ade\u4e89\u5173\u7cfbRedis\u4e2d\u53ef\u4ee5\u4f7f\u7528SETNX\u547d\u4ee4\u5b9e\u73b0\u5206\u5e03\u5f0f\u9501\u3002</p> <p>\u5f53\u4e14\u4ec5\u5f53 key \u4e0d\u5b58\u5728\uff0c\u5c06 key \u7684\u503c\u8bbe\u4e3a value\u3002 \u82e5\u7ed9\u5b9a\u7684 key \u5df2\u7ecf\u5b58\u5728\uff0c\u5219 SETNX \u4e0d\u505a\u4efb\u4f55\u52a8\u4f5c</p> <p>SETNX \u662f\u300eSET if Not eXists\u300f(\u5982\u679c\u4e0d\u5b58\u5728\uff0c\u5219 SET)\u7684\u7b80\u5199\u3002</p> <p>\u8fd4\u56de\u503c\uff1a\u8bbe\u7f6e\u6210\u529f\uff0c\u8fd4\u56de 1 \u3002\u8bbe\u7f6e\u5931\u8d25\uff0c\u8fd4\u56de 0 \u3002</p> <p></p> <p>\u4f7f\u7528SETNX\u5b8c\u6210\u540c\u6b65\u9501\u7684\u6d41\u7a0b\u53ca\u4e8b\u9879\u5982\u4e0b\uff1a</p> <p>\u4f7f\u7528SETNX\u547d\u4ee4\u83b7\u53d6\u9501\uff0c\u82e5\u8fd4\u56de0\uff08key\u5df2\u5b58\u5728\uff0c\u9501\u5df2\u5b58\u5728\uff09\u5219\u83b7\u53d6\u5931\u8d25\uff0c\u53cd\u4e4b\u83b7\u53d6\u6210\u529f</p> <p>\u4e3a\u4e86\u9632\u6b62\u83b7\u53d6\u9501\u540e\u7a0b\u5e8f\u51fa\u73b0\u5f02\u5e38\uff0c\u5bfc\u81f4\u5176\u4ed6\u7ebf\u7a0b/\u8fdb\u7a0b\u8c03\u7528SETNX\u547d\u4ee4\u603b\u662f\u8fd4\u56de0\u800c\u8fdb\u5165\u6b7b\u9501\u72b6\u6001\uff0c\u9700\u8981\u4e3a\u8be5key\u8bbe\u7f6e\u4e00\u4e2a\u201c\u5408\u7406\u201d\u7684\u8fc7\u671f\u65f6\u95f4</p> <p>\u91ca\u653e\u9501\uff0c\u4f7f\u7528DEL\u547d\u4ee4\u5c06\u9501\u6570\u636e\u5220\u9664</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis-key_1","title":"\u5982\u4f55\u89e3\u51b3 Redis \u7684\u5e76\u53d1\u7ade\u4e89 Key \u95ee\u9898","text":"<p>\u6240\u8c13 Redis \u7684\u5e76\u53d1\u7ade\u4e89 Key \u7684\u95ee\u9898\u4e5f\u5c31\u662f\u591a\u4e2a\u7cfb\u7edf\u540c\u65f6\u5bf9\u4e00\u4e2a key \u8fdb\u884c\u64cd\u4f5c\uff0c\u4f46\u662f\u6700\u540e\u6267\u884c\u7684\u987a\u5e8f\u548c\u6211\u4eec\u671f\u671b\u7684\u987a\u5e8f\u4e0d\u540c\uff0c\u8fd9\u6837\u4e5f\u5c31\u5bfc\u81f4\u4e86\u7ed3\u679c\u7684\u4e0d\u540c\uff01</p> <p>\u63a8\u8350\u4e00\u79cd\u65b9\u6848\uff1a\u5206\u5e03\u5f0f\u9501\uff08zookeeper \u548c redis \u90fd\u53ef\u4ee5\u5b9e\u73b0\u5206\u5e03\u5f0f\u9501\uff09\u3002\uff08\u5982\u679c\u4e0d\u5b58\u5728 Redis \u7684\u5e76\u53d1\u7ade\u4e89 Key \u95ee\u9898\uff0c\u4e0d\u8981\u4f7f\u7528\u5206\u5e03\u5f0f\u9501\uff0c\u8fd9\u6837\u4f1a\u5f71\u54cd\u6027\u80fd\uff09</p> <p>\u57fa\u4e8ezookeeper\u4e34\u65f6\u6709\u5e8f\u8282\u70b9\u53ef\u4ee5\u5b9e\u73b0\u7684\u5206\u5e03\u5f0f\u9501\u3002\u5927\u81f4\u601d\u60f3\u4e3a\uff1a\u6bcf\u4e2a\u5ba2\u6237\u7aef\u5bf9\u67d0\u4e2a\u65b9\u6cd5\u52a0\u9501\u65f6\uff0c\u5728zookeeper\u4e0a\u7684\u4e0e\u8be5\u65b9\u6cd5\u5bf9\u5e94\u7684\u6307\u5b9a\u8282\u70b9\u7684\u76ee\u5f55\u4e0b\uff0c\u751f\u6210\u4e00\u4e2a\u552f\u4e00\u7684\u77ac\u65f6\u6709\u5e8f\u8282\u70b9\u3002 \u5224\u65ad\u662f\u5426\u83b7\u53d6\u9501\u7684\u65b9\u5f0f\u5f88\u7b80\u5355\uff0c\u53ea\u9700\u8981\u5224\u65ad\u6709\u5e8f\u8282\u70b9\u4e2d\u5e8f\u53f7\u6700\u5c0f\u7684\u4e00\u4e2a\u3002 \u5f53\u91ca\u653e\u9501\u7684\u65f6\u5019\uff0c\u53ea\u9700\u5c06\u8fd9\u4e2a\u77ac\u65f6\u8282\u70b9\u5220\u9664\u5373\u53ef\u3002\u540c\u65f6\uff0c\u5176\u53ef\u4ee5\u907f\u514d\u670d\u52a1\u5b95\u673a\u5bfc\u81f4\u7684\u9501\u65e0\u6cd5\u91ca\u653e\uff0c\u800c\u4ea7\u751f\u7684\u6b7b\u9501\u95ee\u9898\u3002\u5b8c\u6210\u4e1a\u52a1\u6d41\u7a0b\u540e\uff0c\u5220\u9664\u5bf9\u5e94\u7684\u5b50\u8282\u70b9\u91ca\u653e\u9501\u3002</p> <p>\u5728\u5b9e\u8df5\u4e2d\uff0c\u5f53\u7136\u662f\u4ece\u4ee5\u53ef\u9760\u6027\u4e3a\u4e3b\u3002\u6240\u4ee5\u9996\u63a8Zookeeper\u3002</p> <p>\u53c2\u8003\uff1ahttps://www.jianshu.com/p/8bddd381de06</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_33","title":"\u5206\u5e03\u5f0fRedis\u662f\u524d\u671f\u505a\u8fd8\u662f\u540e\u671f\u89c4\u6a21\u4e0a\u6765\u4e86\u518d\u505a\u597d\uff1f\u4e3a\u4ec0\u4e48\uff1f","text":"<p>\u65e2\u7136Redis\u662f\u5982\u6b64\u7684\u8f7b\u91cf\uff08\u5355\u5b9e\u4f8b\u53ea\u4f7f\u75281M\u5185\u5b58\uff09\uff0c\u4e3a\u9632\u6b62\u4ee5\u540e\u7684\u6269\u5bb9\uff0c\u6700\u597d\u7684\u529e\u6cd5\u5c31\u662f\u4e00\u5f00\u59cb\u5c31\u542f\u52a8\u8f83\u591a\u5b9e\u4f8b\u3002\u5373\u4fbf\u4f60\u53ea\u6709\u4e00\u53f0\u670d\u52a1\u5668\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4e00\u5f00\u59cb\u5c31\u8ba9Redis\u4ee5\u5206\u5e03\u5f0f\u7684\u65b9\u5f0f\u8fd0\u884c\uff0c\u4f7f\u7528\u5206\u533a\uff0c\u5728\u540c\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\u542f\u52a8\u591a\u4e2a\u5b9e\u4f8b\u3002</p> <p>\u4e00\u5f00\u59cb\u5c31\u591a\u8bbe\u7f6e\u51e0\u4e2aRedis\u5b9e\u4f8b\uff0c\u4f8b\u598232\u6216\u800564\u4e2a\u5b9e\u4f8b\uff0c\u5bf9\u5927\u591a\u6570\u7528\u6237\u6765\u8bf4\u8fd9\u64cd\u4f5c\u8d77\u6765\u53ef\u80fd\u6bd4\u8f83\u9ebb\u70e6\uff0c\u4f46\u662f\u4ece\u957f\u4e45\u6765\u770b\u505a\u8fd9\u70b9\u727a\u7272\u662f\u503c\u5f97\u7684\u3002</p> <p>\u8fd9\u6837\u7684\u8bdd\uff0c\u5f53\u4f60\u7684\u6570\u636e\u4e0d\u65ad\u589e\u957f\uff0c\u9700\u8981\u66f4\u591a\u7684Redis\u670d\u52a1\u5668\u65f6\uff0c\u4f60\u9700\u8981\u505a\u7684\u5c31\u662f\u4ec5\u4ec5\u5c06Redis\u5b9e\u4f8b\u4ece\u4e00\u53f0\u670d\u52a1\u8fc1\u79fb\u5230\u53e6\u5916\u4e00\u53f0\u670d\u52a1\u5668\u800c\u5df2\uff08\u800c\u4e0d\u7528\u8003\u8651\u91cd\u65b0\u5206\u533a\u7684\u95ee\u9898\uff09\u3002\u4e00\u65e6\u4f60\u6dfb\u52a0\u4e86\u53e6\u4e00\u53f0\u670d\u52a1\u5668\uff0c\u4f60\u9700\u8981\u5c06\u4f60\u4e00\u534a\u7684Redis\u5b9e\u4f8b\u4ece\u7b2c\u4e00\u53f0\u673a\u5668\u8fc1\u79fb\u5230\u7b2c\u4e8c\u53f0\u673a\u5668\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redlock","title":"\u4ec0\u4e48\u662f RedLock","text":"<p>Redis \u5b98\u65b9\u7ad9\u63d0\u51fa\u4e86\u4e00\u79cd\u6743\u5a01\u7684\u57fa\u4e8e Redis \u5b9e\u73b0\u5206\u5e03\u5f0f\u9501\u7684\u65b9\u5f0f\u540d\u53eb Redlock\uff0c\u6b64\u79cd\u65b9\u5f0f\u6bd4\u539f\u5148\u7684\u5355\u8282\u70b9\u7684\u65b9\u6cd5\u66f4\u5b89\u5168\u3002\u5b83\u53ef\u4ee5\u4fdd\u8bc1\u4ee5\u4e0b\u7279\u6027\uff1a</p> <ol> <li>\u5b89\u5168\u7279\u6027\uff1a\u4e92\u65a5\u8bbf\u95ee\uff0c\u5373\u6c38\u8fdc\u53ea\u6709\u4e00\u4e2a client \u80fd\u62ff\u5230\u9501</li> <li>\u907f\u514d\u6b7b\u9501\uff1a\u6700\u7ec8 client \u90fd\u53ef\u80fd\u62ff\u5230\u9501\uff0c\u4e0d\u4f1a\u51fa\u73b0\u6b7b\u9501\u7684\u60c5\u51b5\uff0c\u5373\u4f7f\u539f\u672c\u9501\u4f4f\u67d0\u8d44\u6e90\u7684 client crash \u4e86\u6216\u8005\u51fa\u73b0\u4e86\u7f51\u7edc\u5206\u533a</li> <li>\u5bb9\u9519\u6027\uff1a\u53ea\u8981\u5927\u90e8\u5206 Redis \u8282\u70b9\u5b58\u6d3b\u5c31\u53ef\u4ee5\u6b63\u5e38\u63d0\u4f9b\u670d\u52a1</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_16","title":"\u7f13\u5b58\u5f02\u5e38","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_17","title":"\u7f13\u5b58\u96ea\u5d29","text":"<p>\u7f13\u5b58\u96ea\u5d29\u662f\u6307\u7f13\u5b58\u540c\u4e00\u65f6\u95f4\u5927\u9762\u79ef\u7684\u5931\u6548\uff0c\u6240\u4ee5\uff0c\u540e\u9762\u7684\u8bf7\u6c42\u90fd\u4f1a\u843d\u5230\u6570\u636e\u5e93\u4e0a\uff0c\u9020\u6210\u6570\u636e\u5e93\u77ed\u65f6\u95f4\u5185\u627f\u53d7\u5927\u91cf\u8bf7\u6c42\u800c\u5d29\u6389\u3002</p> <p>\u89e3\u51b3\u65b9\u6848</p> <ol> <li>\u7f13\u5b58\u6570\u636e\u7684\u8fc7\u671f\u65f6\u95f4\u8bbe\u7f6e\u968f\u673a\uff0c\u9632\u6b62\u540c\u4e00\u65f6\u95f4\u5927\u91cf\u6570\u636e\u8fc7\u671f\u73b0\u8c61\u53d1\u751f\u3002</li> <li>\u4e00\u822c\u5e76\u53d1\u91cf\u4e0d\u662f\u7279\u522b\u591a\u7684\u65f6\u5019\uff0c\u4f7f\u7528\u6700\u591a\u7684\u89e3\u51b3\u65b9\u6848\u662f\u52a0\u9501\u6392\u961f\u3002</li> <li>\u7ed9\u6bcf\u4e00\u4e2a\u7f13\u5b58\u6570\u636e\u589e\u52a0\u76f8\u5e94\u7684\u7f13\u5b58\u6807\u8bb0\uff0c\u8bb0\u5f55\u7f13\u5b58\u7684\u662f\u5426\u5931\u6548\uff0c\u5982\u679c\u7f13\u5b58\u6807\u8bb0\u5931\u6548\uff0c\u5219\u66f4\u65b0\u6570\u636e\u7f13\u5b58\u3002</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_18","title":"\u7f13\u5b58\u7a7f\u900f","text":"<p>\u7f13\u5b58\u7a7f\u900f\u662f\u6307\u7f13\u5b58\u548c\u6570\u636e\u5e93\u4e2d\u90fd\u6ca1\u6709\u7684\u6570\u636e\uff0c\u5bfc\u81f4\u6240\u6709\u7684\u8bf7\u6c42\u90fd\u843d\u5230\u6570\u636e\u5e93\u4e0a\uff0c\u9020\u6210\u6570\u636e\u5e93\u77ed\u65f6\u95f4\u5185\u627f\u53d7\u5927\u91cf\u8bf7\u6c42\u800c\u5d29\u6389\u3002</p> <p>\u89e3\u51b3\u65b9\u6848</p> <ol> <li>\u63a5\u53e3\u5c42\u589e\u52a0\u6821\u9a8c\uff0c\u5982\u7528\u6237\u9274\u6743\u6821\u9a8c\uff0cid\u505a\u57fa\u7840\u6821\u9a8c\uff0cid&lt;=0\u7684\u76f4\u63a5\u62e6\u622a\uff1b</li> <li>\u4ece\u7f13\u5b58\u53d6\u4e0d\u5230\u7684\u6570\u636e\uff0c\u5728\u6570\u636e\u5e93\u4e2d\u4e5f\u6ca1\u6709\u53d6\u5230\uff0c\u8fd9\u65f6\u4e5f\u53ef\u4ee5\u5c06key-value\u5bf9\u5199\u4e3akey-null\uff0c\u7f13\u5b58\u6709\u6548\u65f6\u95f4\u53ef\u4ee5\u8bbe\u7f6e\u77ed\u70b9\uff0c\u598230\u79d2\uff08\u8bbe\u7f6e\u592a\u957f\u4f1a\u5bfc\u81f4\u6b63\u5e38\u60c5\u51b5\u4e5f\u6ca1\u6cd5\u4f7f\u7528\uff09\u3002\u8fd9\u6837\u53ef\u4ee5\u9632\u6b62\u653b\u51fb\u7528\u6237\u53cd\u590d\u7528\u540c\u4e00\u4e2aid\u66b4\u529b\u653b\u51fb</li> <li>\u91c7\u7528\u5e03\u9686\u8fc7\u6ee4\u5668\uff0c\u5c06\u6240\u6709\u53ef\u80fd\u5b58\u5728\u7684\u6570\u636e\u54c8\u5e0c\u5230\u4e00\u4e2a\u8db3\u591f\u5927\u7684 bitmap \u4e2d\uff0c\u4e00\u4e2a\u4e00\u5b9a\u4e0d\u5b58\u5728\u7684\u6570\u636e\u4f1a\u88ab\u8fd9\u4e2a bitmap \u62e6\u622a\u6389\uff0c\u4ece\u800c\u907f\u514d\u4e86\u5bf9\u5e95\u5c42\u5b58\u50a8\u7cfb\u7edf\u7684\u67e5\u8be2\u538b\u529b</li> </ol> <p>\u9644\u52a0</p> <p>\u5bf9\u4e8e\u7a7a\u95f4\u7684\u5229\u7528\u5230\u8fbe\u4e86\u4e00\u79cd\u6781\u81f4\uff0c\u90a3\u5c31\u662fBitmap\u548c\u5e03\u9686\u8fc7\u6ee4\u5668(Bloom Filter)\u3002 Bitmap\uff1a \u5178\u578b\u7684\u5c31\u662f\u54c8\u5e0c\u8868 \u7f3a\u70b9\u662f\uff0cBitmap\u5bf9\u4e8e\u6bcf\u4e2a\u5143\u7d20\u53ea\u80fd\u8bb0\u5f551bit\u4fe1\u606f\uff0c\u5982\u679c\u8fd8\u60f3\u5b8c\u6210\u989d\u5916\u7684\u529f\u80fd\uff0c\u6050\u6015\u53ea\u80fd\u9760\u727a\u7272\u66f4\u591a\u7684\u7a7a\u95f4\u3001\u65f6\u95f4\u6765\u5b8c\u6210\u4e86\u3002</p> <p>\u5e03\u9686\u8fc7\u6ee4\u5668\uff08\u63a8\u8350\uff09</p> <p>\u5c31\u662f\u5f15\u5165\u4e86k(k&gt;1)k(k&gt;1)\u4e2a\u76f8\u4e92\u72ec\u7acb\u7684\u54c8\u5e0c\u51fd\u6570\uff0c\u4fdd\u8bc1\u5728\u7ed9\u5b9a\u7684\u7a7a\u95f4\u3001\u8bef\u5224\u7387\u4e0b\uff0c\u5b8c\u6210\u5143\u7d20\u5224\u91cd\u7684\u8fc7\u7a0b\u3002 \u5b83\u7684\u4f18\u70b9\u662f\u7a7a\u95f4\u6548\u7387\u548c\u67e5\u8be2\u65f6\u95f4\u90fd\u8fdc\u8fdc\u8d85\u8fc7\u4e00\u822c\u7684\u7b97\u6cd5\uff0c\u7f3a\u70b9\u662f\u6709\u4e00\u5b9a\u7684\u8bef\u8bc6\u522b\u7387\u548c\u5220\u9664\u56f0\u96be\u3002 Bloom-Filter\u7b97\u6cd5\u7684\u6838\u5fc3\u601d\u60f3\u5c31\u662f\u5229\u7528\u591a\u4e2a\u4e0d\u540c\u7684Hash\u51fd\u6570\u6765\u89e3\u51b3\u201c\u51b2\u7a81\u201d\u3002 Hash\u5b58\u5728\u4e00\u4e2a\u51b2\u7a81\uff08\u78b0\u649e\uff09\u7684\u95ee\u9898\uff0c\u7528\u540c\u4e00\u4e2aHash\u5f97\u5230\u7684\u4e24\u4e2aURL\u7684\u503c\u6709\u53ef\u80fd\u76f8\u540c\u3002\u4e3a\u4e86\u51cf\u5c11\u51b2\u7a81\uff0c\u6211\u4eec\u53ef\u4ee5\u591a\u5f15\u5165\u51e0\u4e2aHash\uff0c\u5982\u679c\u901a\u8fc7\u5176\u4e2d\u7684\u4e00\u4e2aHash\u503c\u6211\u4eec\u5f97\u51fa\u67d0\u5143\u7d20\u4e0d\u5728\u96c6\u5408\u4e2d\uff0c\u90a3\u4e48\u8be5\u5143\u7d20\u80af\u5b9a\u4e0d\u5728\u96c6\u5408\u4e2d\u3002\u53ea\u6709\u5728\u6240\u6709\u7684Hash\u51fd\u6570\u544a\u8bc9\u6211\u4eec\u8be5\u5143\u7d20\u5728\u96c6\u5408\u4e2d\u65f6\uff0c\u624d\u80fd\u786e\u5b9a\u8be5\u5143\u7d20\u5b58\u5728\u4e8e\u96c6\u5408\u4e2d\u3002\u8fd9\u4fbf\u662fBloom-Filter\u7684\u57fa\u672c\u601d\u60f3\u3002 Bloom-Filter\u4e00\u822c\u7528\u4e8e\u5728\u5927\u6570\u636e\u91cf\u7684\u96c6\u5408\u4e2d\u5224\u5b9a\u67d0\u5143\u7d20\u662f\u5426\u5b58\u5728\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_19","title":"\u7f13\u5b58\u51fb\u7a7f","text":"<p>\u7f13\u5b58\u51fb\u7a7f\u662f\u6307\u7f13\u5b58\u4e2d\u6ca1\u6709\u4f46\u6570\u636e\u5e93\u4e2d\u6709\u7684\u6570\u636e\uff08\u4e00\u822c\u662f\u7f13\u5b58\u65f6\u95f4\u5230\u671f\uff09\uff0c\u8fd9\u65f6\u7531\u4e8e\u5e76\u53d1\u7528\u6237\u7279\u522b\u591a\uff0c\u540c\u65f6\u8bfb\u7f13\u5b58\u6ca1\u8bfb\u5230\u6570\u636e\uff0c\u53c8\u540c\u65f6\u53bb\u6570\u636e\u5e93\u53bb\u53d6\u6570\u636e\uff0c\u5f15\u8d77\u6570\u636e\u5e93\u538b\u529b\u77ac\u95f4\u589e\u5927\uff0c\u9020\u6210\u8fc7\u5927\u538b\u529b\u3002\u548c\u7f13\u5b58\u96ea\u5d29\u4e0d\u540c\u7684\u662f\uff0c\u7f13\u5b58\u51fb\u7a7f\u6307\u5e76\u53d1\u67e5\u540c\u4e00\u6761\u6570\u636e\uff0c\u7f13\u5b58\u96ea\u5d29\u662f\u4e0d\u540c\u6570\u636e\u90fd\u8fc7\u671f\u4e86\uff0c\u5f88\u591a\u6570\u636e\u90fd\u67e5\u4e0d\u5230\u4ece\u800c\u67e5\u6570\u636e\u5e93\u3002</p> <p>\u89e3\u51b3\u65b9\u6848</p> <ol> <li>\u8bbe\u7f6e\u70ed\u70b9\u6570\u636e\u6c38\u8fdc\u4e0d\u8fc7\u671f\u3002</li> <li>\u52a0\u4e92\u65a5\u9501\uff0c\u4e92\u65a5\u9501</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_20","title":"\u7f13\u5b58\u9884\u70ed","text":"<p>\u7f13\u5b58\u9884\u70ed\u5c31\u662f\u7cfb\u7edf\u4e0a\u7ebf\u540e\uff0c\u5c06\u76f8\u5173\u7684\u7f13\u5b58\u6570\u636e\u76f4\u63a5\u52a0\u8f7d\u5230\u7f13\u5b58\u7cfb\u7edf\u3002\u8fd9\u6837\u5c31\u53ef\u4ee5\u907f\u514d\u5728\u7528\u6237\u8bf7\u6c42\u7684\u65f6\u5019\uff0c\u5148\u67e5\u8be2\u6570\u636e\u5e93\uff0c\u7136\u540e\u518d\u5c06\u6570\u636e\u7f13\u5b58\u7684\u95ee\u9898\uff01\u7528\u6237\u76f4\u63a5\u67e5\u8be2\u4e8b\u5148\u88ab\u9884\u70ed\u7684\u7f13\u5b58\u6570\u636e\uff01</p> <p>\u89e3\u51b3\u65b9\u6848</p> <ol> <li>\u76f4\u63a5\u5199\u4e2a\u7f13\u5b58\u5237\u65b0\u9875\u9762\uff0c\u4e0a\u7ebf\u65f6\u624b\u5de5\u64cd\u4f5c\u4e00\u4e0b\uff1b</li> <li>\u6570\u636e\u91cf\u4e0d\u5927\uff0c\u53ef\u4ee5\u5728\u9879\u76ee\u542f\u52a8\u7684\u65f6\u5019\u81ea\u52a8\u8fdb\u884c\u52a0\u8f7d\uff1b</li> <li>\u5b9a\u65f6\u5237\u65b0\u7f13\u5b58\uff1b</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_21","title":"\u7f13\u5b58\u964d\u7ea7","text":"<p>\u5f53\u8bbf\u95ee\u91cf\u5267\u589e\u3001\u670d\u52a1\u51fa\u73b0\u95ee\u9898\uff08\u5982\u54cd\u5e94\u65f6\u95f4\u6162\u6216\u4e0d\u54cd\u5e94\uff09\u6216\u975e\u6838\u5fc3\u670d\u52a1\u5f71\u54cd\u5230\u6838\u5fc3\u6d41\u7a0b\u7684\u6027\u80fd\u65f6\uff0c\u4ecd\u7136\u9700\u8981\u4fdd\u8bc1\u670d\u52a1\u8fd8\u662f\u53ef\u7528\u7684\uff0c\u5373\u4f7f\u662f\u6709\u635f\u670d\u52a1\u3002\u7cfb\u7edf\u53ef\u4ee5\u6839\u636e\u4e00\u4e9b\u5173\u952e\u6570\u636e\u8fdb\u884c\u81ea\u52a8\u964d\u7ea7\uff0c\u4e5f\u53ef\u4ee5\u914d\u7f6e\u5f00\u5173\u5b9e\u73b0\u4eba\u5de5\u964d\u7ea7\u3002</p> <p>\u7f13\u5b58\u964d\u7ea7\u7684\u6700\u7ec8\u76ee\u7684\u662f\u4fdd\u8bc1\u6838\u5fc3\u670d\u52a1\u53ef\u7528\uff0c\u5373\u4f7f\u662f\u6709\u635f\u7684\u3002\u800c\u4e14\u6709\u4e9b\u670d\u52a1\u662f\u65e0\u6cd5\u964d\u7ea7\u7684\uff08\u5982\u52a0\u5165\u8d2d\u7269\u8f66\u3001\u7ed3\u7b97\uff09\u3002</p> <p>\u5728\u8fdb\u884c\u964d\u7ea7\u4e4b\u524d\u8981\u5bf9\u7cfb\u7edf\u8fdb\u884c\u68b3\u7406\uff0c\u770b\u770b\u7cfb\u7edf\u662f\u4e0d\u662f\u53ef\u4ee5\u4e22\u5352\u4fdd\u5e05\uff1b\u4ece\u800c\u68b3\u7406\u51fa\u54ea\u4e9b\u5fc5\u987b\u8a93\u6b7b\u4fdd\u62a4\uff0c\u54ea\u4e9b\u53ef\u964d\u7ea7\uff1b\u6bd4\u5982\u53ef\u4ee5\u53c2\u8003\u65e5\u5fd7\u7ea7\u522b\u8bbe\u7f6e\u9884\u6848\uff1a</p> <ol> <li>\u4e00\u822c\uff1a\u6bd4\u5982\u6709\u4e9b\u670d\u52a1\u5076\u5c14\u56e0\u4e3a\u7f51\u7edc\u6296\u52a8\u6216\u8005\u670d\u52a1\u6b63\u5728\u4e0a\u7ebf\u800c\u8d85\u65f6\uff0c\u53ef\u4ee5\u81ea\u52a8\u964d\u7ea7\uff1b</li> <li>\u8b66\u544a\uff1a\u6709\u4e9b\u670d\u52a1\u5728\u4e00\u6bb5\u65f6\u95f4\u5185\u6210\u529f\u7387\u6709\u6ce2\u52a8\uff08\u5982\u572895~100%\u4e4b\u95f4\uff09\uff0c\u53ef\u4ee5\u81ea\u52a8\u964d\u7ea7\u6216\u4eba\u5de5\u964d\u7ea7\uff0c\u5e76\u53d1\u9001\u544a\u8b66\uff1b</li> <li>\u9519\u8bef\uff1a\u6bd4\u5982\u53ef\u7528\u7387\u4f4e\u4e8e90%\uff0c\u6216\u8005\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u88ab\u6253\u7206\u4e86\uff0c\u6216\u8005\u8bbf\u95ee\u91cf\u7a81\u7136\u731b\u589e\u5230\u7cfb\u7edf\u80fd\u627f\u53d7\u7684\u6700\u5927\u9600\u503c\uff0c\u6b64\u65f6\u53ef\u4ee5\u6839\u636e\u60c5\u51b5\u81ea\u52a8\u964d\u7ea7\u6216\u8005\u4eba\u5de5\u964d\u7ea7\uff1b</li> <li>\u4e25\u91cd\u9519\u8bef\uff1a\u6bd4\u5982\u56e0\u4e3a\u7279\u6b8a\u539f\u56e0\u6570\u636e\u9519\u8bef\u4e86\uff0c\u6b64\u65f6\u9700\u8981\u7d27\u6025\u4eba\u5de5\u964d\u7ea7\u3002</li> </ol> <p>\u670d\u52a1\u964d\u7ea7\u7684\u76ee\u7684\uff0c\u662f\u4e3a\u4e86\u9632\u6b62Redis\u670d\u52a1\u6545\u969c\uff0c\u5bfc\u81f4\u6570\u636e\u5e93\u8ddf\u7740\u4e00\u8d77\u53d1\u751f\u96ea\u5d29\u95ee\u9898\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8e\u4e0d\u91cd\u8981\u7684\u7f13\u5b58\u6570\u636e\uff0c\u53ef\u4ee5\u91c7\u53d6\u670d\u52a1\u964d\u7ea7\u7b56\u7565\uff0c\u4f8b\u5982\u4e00\u4e2a\u6bd4\u8f83\u5e38\u89c1\u7684\u505a\u6cd5\u5c31\u662f\uff0cRedis\u51fa\u73b0\u95ee\u9898\uff0c\u4e0d\u53bb\u6570\u636e\u5e93\u67e5\u8be2\uff0c\u800c\u662f\u76f4\u63a5\u8fd4\u56de\u9ed8\u8ba4\u503c\u7ed9\u7528\u6237\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_22","title":"\u70ed\u70b9\u6570\u636e\u548c\u51b7\u6570\u636e","text":"<p>\u70ed\u70b9\u6570\u636e\uff0c\u7f13\u5b58\u624d\u6709\u4ef7\u503c</p> <p>\u5bf9\u4e8e\u51b7\u6570\u636e\u800c\u8a00\uff0c\u5927\u90e8\u5206\u6570\u636e\u53ef\u80fd\u8fd8\u6ca1\u6709\u518d\u6b21\u8bbf\u95ee\u5230\u5c31\u5df2\u7ecf\u88ab\u6324\u51fa\u5185\u5b58\uff0c\u4e0d\u4ec5\u5360\u7528\u5185\u5b58\uff0c\u800c\u4e14\u4ef7\u503c\u4e0d\u5927\u3002\u9891\u7e41\u4fee\u6539\u7684\u6570\u636e\uff0c\u770b\u60c5\u51b5\u8003\u8651\u4f7f\u7528\u7f13\u5b58</p> <p>\u5bf9\u4e8e\u70ed\u70b9\u6570\u636e\uff0c\u6bd4\u5982\u6211\u4eec\u7684\u67d0IM\u4ea7\u54c1\uff0c\u751f\u65e5\u795d\u798f\u6a21\u5757\uff0c\u5f53\u5929\u7684\u5bff\u661f\u5217\u8868\uff0c\u7f13\u5b58\u4ee5\u540e\u53ef\u80fd\u8bfb\u53d6\u6570\u5341\u4e07\u6b21\u3002\u518d\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u67d0\u5bfc\u822a\u4ea7\u54c1\uff0c\u6211\u4eec\u5c06\u5bfc\u822a\u4fe1\u606f\uff0c\u7f13\u5b58\u4ee5\u540e\u53ef\u80fd\u8bfb\u53d6\u6570\u767e\u4e07\u6b21\u3002</p> <p>\u6570\u636e\u66f4\u65b0\u524d\u81f3\u5c11\u8bfb\u53d6\u4e24\u6b21\uff0c\u7f13\u5b58\u624d\u6709\u610f\u4e49\u3002\u8fd9\u4e2a\u662f\u6700\u57fa\u672c\u7684\u7b56\u7565\uff0c\u5982\u679c\u7f13\u5b58\u8fd8\u6ca1\u6709\u8d77\u4f5c\u7528\u5c31\u5931\u6548\u4e86\uff0c\u90a3\u5c31\u6ca1\u6709\u592a\u5927\u4ef7\u503c\u4e86\u3002</p> <p>\u90a3\u5b58\u4e0d\u5b58\u5728\uff0c\u4fee\u6539\u9891\u7387\u5f88\u9ad8\uff0c\u4f46\u662f\u53c8\u4e0d\u5f97\u4e0d\u8003\u8651\u7f13\u5b58\u7684\u573a\u666f\u5462\uff1f\u6709\uff01\u6bd4\u5982\uff0c\u8fd9\u4e2a\u8bfb\u53d6\u63a5\u53e3\u5bf9\u6570\u636e\u5e93\u7684\u538b\u529b\u5f88\u5927\uff0c\u4f46\u662f\u53c8\u662f\u70ed\u70b9\u6570\u636e\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u9700\u8981\u8003\u8651\u901a\u8fc7\u7f13\u5b58\u624b\u6bb5\uff0c\u51cf\u5c11\u6570\u636e\u5e93\u7684\u538b\u529b\uff0c\u6bd4\u5982\u6211\u4eec\u7684\u67d0\u52a9\u624b\u4ea7\u54c1\u7684\uff0c\u70b9\u8d5e\u6570\uff0c\u6536\u85cf\u6570\uff0c\u5206\u4eab\u6570\u7b49\u662f\u975e\u5e38\u5178\u578b\u7684\u70ed\u70b9\u6570\u636e\uff0c\u4f46\u662f\u53c8\u4e0d\u65ad\u53d8\u5316\uff0c\u6b64\u65f6\u5c31\u9700\u8981\u5c06\u6570\u636e\u540c\u6b65\u4fdd\u5b58\u5230Redis\u7f13\u5b58\uff0c\u51cf\u5c11\u6570\u636e\u5e93\u538b\u529b\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#key","title":"\u7f13\u5b58\u70ed\u70b9key","text":"<p>\u7f13\u5b58\u4e2d\u7684\u4e00\u4e2aKey(\u6bd4\u5982\u4e00\u4e2a\u4fc3\u9500\u5546\u54c1)\uff0c\u5728\u67d0\u4e2a\u65f6\u95f4\u70b9\u8fc7\u671f\u7684\u65f6\u5019\uff0c\u6070\u597d\u5728\u8fd9\u4e2a\u65f6\u95f4\u70b9\u5bf9\u8fd9\u4e2aKey\u6709\u5927\u91cf\u7684\u5e76\u53d1\u8bf7\u6c42\u8fc7\u6765\uff0c\u8fd9\u4e9b\u8bf7\u6c42\u53d1\u73b0\u7f13\u5b58\u8fc7\u671f\u4e00\u822c\u90fd\u4f1a\u4ece\u540e\u7aefDB\u52a0\u8f7d\u6570\u636e\u5e76\u56de\u8bbe\u5230\u7f13\u5b58\uff0c\u8fd9\u4e2a\u65f6\u5019\u5927\u5e76\u53d1\u7684\u8bf7\u6c42\u53ef\u80fd\u4f1a\u77ac\u95f4\u628a\u540e\u7aefDB\u538b\u57ae\u3002</p> <p>\u89e3\u51b3\u65b9\u6848</p> <p>\u5bf9\u7f13\u5b58\u67e5\u8be2\u52a0\u9501\uff0c\u5982\u679cKEY\u4e0d\u5b58\u5728\uff0c\u5c31\u52a0\u9501\uff0c\u7136\u540e\u67e5DB\u5165\u7f13\u5b58\uff0c\u7136\u540e\u89e3\u9501\uff1b\u5176\u4ed6\u8fdb\u7a0b\u5982\u679c\u53d1\u73b0\u6709\u9501\u5c31\u7b49\u5f85\uff0c\u7136\u540e\u7b49\u89e3\u9501\u540e\u8fd4\u56de\u6570\u636e\u6216\u8005\u8fdb\u5165DB\u67e5\u8be2</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_23","title":"\u5e38\u7528\u5de5\u5177","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redisjava","title":"Redis\u652f\u6301\u7684Java\u5ba2\u6237\u7aef\u90fd\u6709\u54ea\u4e9b\uff1f\u5b98\u65b9\u63a8\u8350\u7528\u54ea\u4e2a\uff1f","text":"<p>Redisson\u3001Jedis\u3001lettuce\u7b49\u7b49\uff0c\u5b98\u65b9\u63a8\u8350\u4f7f\u7528Redisson\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redisredisson","title":"Redis\u548cRedisson\u6709\u4ec0\u4e48\u5173\u7cfb\uff1f","text":"<p>Redisson\u662f\u4e00\u4e2a\u9ad8\u7ea7\u7684\u5206\u5e03\u5f0f\u534f\u8c03Redis\u5ba2\u670d\u7aef\uff0c\u80fd\u5e2e\u52a9\u7528\u6237\u5728\u5206\u5e03\u5f0f\u73af\u5883\u4e2d\u8f7b\u677e\u5b9e\u73b0\u4e00\u4e9bJava\u7684\u5bf9\u8c61 (Bloom filter, BitSet, Set, SetMultimap, ScoredSortedSet, SortedSet, Map, ConcurrentMap, List, ListMultimap, Queue, BlockingQueue, Deque, BlockingDeque, Semaphore, Lock, ReadWriteLock, AtomicLong, CountDownLatch, Publish / Subscribe, HyperLogLog)\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#jedisredisson","title":"Jedis\u4e0eRedisson\u5bf9\u6bd4\u6709\u4ec0\u4e48\u4f18\u7f3a\u70b9\uff1f","text":"<p>Jedis\u662fRedis\u7684Java\u5b9e\u73b0\u7684\u5ba2\u6237\u7aef\uff0c\u5176API\u63d0\u4f9b\u4e86\u6bd4\u8f83\u5168\u9762\u7684Redis\u547d\u4ee4\u7684\u652f\u6301\uff1bRedisson\u5b9e\u73b0\u4e86\u5206\u5e03\u5f0f\u548c\u53ef\u6269\u5c55\u7684Java\u6570\u636e\u7ed3\u6784\uff0c\u548cJedis\u76f8\u6bd4\uff0c\u529f\u80fd\u8f83\u4e3a\u7b80\u5355\uff0c\u4e0d\u652f\u6301\u5b57\u7b26\u4e32\u64cd\u4f5c\uff0c\u4e0d\u652f\u6301\u6392\u5e8f\u3001\u4e8b\u52a1\u3001\u7ba1\u9053\u3001\u5206\u533a\u7b49Redis\u7279\u6027\u3002Redisson\u7684\u5b97\u65e8\u662f\u4fc3\u8fdb\u4f7f\u7528\u8005\u5bf9Redis\u7684\u5173\u6ce8\u5206\u79bb\uff0c\u4ece\u800c\u8ba9\u4f7f\u7528\u8005\u80fd\u591f\u5c06\u7cbe\u529b\u66f4\u96c6\u4e2d\u5730\u653e\u5728\u5904\u7406\u4e1a\u52a1\u903b\u8f91\u4e0a\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_24","title":"\u5176\u4ed6\u95ee\u9898","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redismemcached","title":"Redis\u4e0eMemcached\u7684\u533a\u522b","text":"<p>\u4e24\u8005\u90fd\u662f\u975e\u5173\u7cfb\u578b\u5185\u5b58\u952e\u503c\u6570\u636e\u5e93\uff0c\u73b0\u5728\u516c\u53f8\u4e00\u822c\u90fd\u662f\u7528 Redis \u6765\u5b9e\u73b0\u7f13\u5b58\uff0c\u800c\u4e14 Redis \u81ea\u8eab\u4e5f\u8d8a\u6765\u8d8a\u5f3a\u5927\u4e86\uff01Redis \u4e0e Memcached \u4e3b\u8981\u6709\u4ee5\u4e0b\u4e0d\u540c\uff1a</p> \u5bf9\u6bd4\u53c2\u6570 Redis Memcached \u7c7b\u578b 1. \u652f\u6301\u5185\u5b58 2. \u975e\u5173\u7cfb\u578b\u6570\u636e\u5e93 1. \u652f\u6301\u5185\u5b58 2. \u952e\u503c\u5bf9\u5f62\u5f0f 3. \u7f13\u5b58\u5f62\u5f0f \u6570\u636e\u5b58\u50a8\u7c7b\u578b 1. String 2. List 3. Set 4. Hash 5. Sort Set \u3010\u4fd7\u79f0ZSet\u3011 1. \u6587\u672c\u578b 2. \u4e8c\u8fdb\u5236\u7c7b\u578b \u67e5\u8be2\u3010\u64cd\u4f5c\u3011\u7c7b\u578b 1. \u6279\u91cf\u64cd\u4f5c 2. \u4e8b\u52a1\u652f\u6301 3. \u6bcf\u4e2a\u7c7b\u578b\u4e0d\u540c\u7684CRUD 1.\u5e38\u7528\u7684CRUD 2. \u5c11\u91cf\u7684\u5176\u4ed6\u547d\u4ee4 \u9644\u52a0\u529f\u80fd 1. \u53d1\u5e03/\u8ba2\u9605\u6a21\u5f0f 2. \u4e3b\u4ece\u5206\u533a 3. \u5e8f\u5217\u5316\u652f\u6301 4. \u811a\u672c\u652f\u6301\u3010Lua\u811a\u672c\u3011 1. \u591a\u7ebf\u7a0b\u670d\u52a1\u652f\u6301 \u7f51\u7edcIO\u6a21\u578b 1. \u5355\u7ebf\u7a0b\u7684\u591a\u8def IO \u590d\u7528\u6a21\u578b 1. \u591a\u7ebf\u7a0b\uff0c\u975e\u963b\u585eIO\u6a21\u5f0f \u4e8b\u4ef6\u5e93 \u81ea\u5c01\u8f6c\u7b80\u6613\u4e8b\u4ef6\u5e93AeEvent \u8d35\u65cf\u8840\u7edf\u7684LibEvent\u4e8b\u4ef6\u5e93 \u6301\u4e45\u5316\u652f\u6301 1. RDB 2. AOF \u4e0d\u652f\u6301 \u96c6\u7fa4\u6a21\u5f0f \u539f\u751f\u652f\u6301 cluster \u6a21\u5f0f\uff0c\u53ef\u4ee5\u5b9e\u73b0\u4e3b\u4ece\u590d\u5236\uff0c\u8bfb\u5199\u5206\u79bb \u6ca1\u6709\u539f\u751f\u7684\u96c6\u7fa4\u6a21\u5f0f\uff0c\u9700\u8981\u4f9d\u9760\u5ba2\u6237\u7aef\u6765\u5b9e\u73b0\u5f80\u96c6\u7fa4\u4e2d\u5206\u7247\u5199\u5165\u6570\u636e \u5185\u5b58\u7ba1\u7406\u673a\u5236 \u5728 Redis \u4e2d\uff0c\u5e76\u4e0d\u662f\u6240\u6709\u6570\u636e\u90fd\u4e00\u76f4\u5b58\u50a8\u5728\u5185\u5b58\u4e2d\uff0c\u53ef\u4ee5\u5c06\u4e00\u4e9b\u5f88\u4e45\u6ca1\u7528\u7684 value \u4ea4\u6362\u5230\u78c1\u76d8 Memcached \u7684\u6570\u636e\u5219\u4f1a\u4e00\u76f4\u5728\u5185\u5b58\u4e2d\uff0cMemcached \u5c06\u5185\u5b58\u5206\u5272\u6210\u7279\u5b9a\u957f\u5ea6\u7684\u5757\u6765\u5b58\u50a8\u6570\u636e\uff0c\u4ee5\u5b8c\u5168\u89e3\u51b3\u5185\u5b58\u788e\u7247\u7684\u95ee\u9898\u3002\u4f46\u662f\u8fd9\u79cd\u65b9\u5f0f\u4f1a\u4f7f\u5f97\u5185\u5b58\u7684\u5229\u7528\u7387\u4e0d\u9ad8\uff0c\u4f8b\u5982\u5757\u7684\u5927\u5c0f\u4e3a 128 bytes\uff0c\u53ea\u5b58\u50a8 100 bytes \u7684\u6570\u636e\uff0c\u90a3\u4e48\u5269\u4e0b\u7684 28 bytes \u5c31\u6d6a\u8d39\u6389\u4e86\u3002 \u9002\u7528\u573a\u666f \u590d\u6742\u6570\u636e\u7ed3\u6784\uff0c\u6709\u6301\u4e45\u5316\uff0c\u9ad8\u53ef\u7528\u9700\u6c42\uff0cvalue\u5b58\u50a8\u5185\u5bb9\u8f83\u5927 \u7eafkey-value\uff0c\u6570\u636e\u91cf\u975e\u5e38\u5927\uff0c\u5e76\u53d1\u91cf\u975e\u5e38\u5927\u7684\u4e1a\u52a1 <p>(1) memcached\u6240\u6709\u7684\u503c\u5747\u662f\u7b80\u5355\u7684\u5b57\u7b26\u4e32\uff0credis\u4f5c\u4e3a\u5176\u66ff\u4ee3\u8005\uff0c\u652f\u6301\u66f4\u4e3a\u4e30\u5bcc\u7684\u6570\u636e\u7c7b\u578b</p> <p>(2) redis\u7684\u901f\u5ea6\u6bd4memcached\u5feb\u5f88\u591a</p> <p>(3) redis\u53ef\u4ee5\u6301\u4e45\u5316\u5176\u6570\u636e</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_25","title":"\u5982\u4f55\u4fdd\u8bc1\u7f13\u5b58\u4e0e\u6570\u636e\u5e93\u53cc\u5199\u65f6\u7684\u6570\u636e\u4e00\u81f4\u6027\uff1f","text":"<p>\u4f60\u53ea\u8981\u7528\u7f13\u5b58\uff0c\u5c31\u53ef\u80fd\u4f1a\u6d89\u53ca\u5230\u7f13\u5b58\u4e0e\u6570\u636e\u5e93\u53cc\u5b58\u50a8\u53cc\u5199\uff0c\u4f60\u53ea\u8981\u662f\u53cc\u5199\uff0c\u5c31\u4e00\u5b9a\u4f1a\u6709\u6570\u636e\u4e00\u81f4\u6027\u7684\u95ee\u9898\uff0c\u90a3\u4e48\u4f60\u5982\u4f55\u89e3\u51b3\u4e00\u81f4\u6027\u95ee\u9898\uff1f</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u5c31\u662f\u5982\u679c\u4f60\u7684\u7cfb\u7edf\u4e0d\u662f\u4e25\u683c\u8981\u6c42\u7f13\u5b58+\u6570\u636e\u5e93\u5fc5\u987b\u4e00\u81f4\u6027\u7684\u8bdd\uff0c\u7f13\u5b58\u53ef\u4ee5\u7a0d\u5fae\u7684\u8ddf\u6570\u636e\u5e93\u5076\u5c14\u6709\u4e0d\u4e00\u81f4\u7684\u60c5\u51b5\uff0c\u6700\u597d\u4e0d\u8981\u505a\u8fd9\u4e2a\u65b9\u6848\uff0c\u8bfb\u8bf7\u6c42\u548c\u5199\u8bf7\u6c42\u4e32\u884c\u5316\uff0c\u4e32\u5230\u4e00\u4e2a\u5185\u5b58\u961f\u5217\u91cc\u53bb\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4fdd\u8bc1\u4e00\u5b9a\u4e0d\u4f1a\u51fa\u73b0\u4e0d\u4e00\u81f4\u7684\u60c5\u51b5</p> <p>\u4e32\u884c\u5316\u4e4b\u540e\uff0c\u5c31\u4f1a\u5bfc\u81f4\u7cfb\u7edf\u7684\u541e\u5410\u91cf\u4f1a\u5927\u5e45\u5ea6\u7684\u964d\u4f4e\uff0c\u7528\u6bd4\u6b63\u5e38\u60c5\u51b5\u4e0b\u591a\u51e0\u500d\u7684\u673a\u5668\u53bb\u652f\u6491\u7ebf\u4e0a\u7684\u4e00\u4e2a\u8bf7\u6c42\u3002</p> <p>\u8fd8\u6709\u4e00\u79cd\u65b9\u5f0f\u5c31\u662f\u53ef\u80fd\u4f1a\u6682\u65f6\u4ea7\u751f\u4e0d\u4e00\u81f4\u7684\u60c5\u51b5\uff0c\u4f46\u662f\u53d1\u751f\u7684\u51e0\u7387\u7279\u522b\u5c0f\uff0c\u5c31\u662f\u5148\u66f4\u65b0\u6570\u636e\u5e93\uff0c\u7136\u540e\u518d\u5220\u9664\u7f13\u5b58\u3002</p> \u95ee\u9898\u573a\u666f \u63cf\u8ff0 \u89e3\u51b3 \u5148\u5199\u7f13\u5b58\uff0c\u518d\u5199\u6570\u636e\u5e93\uff0c\u7f13\u5b58\u5199\u6210\u529f\uff0c\u6570\u636e\u5e93\u5199\u5931\u8d25 \u7f13\u5b58\u5199\u6210\u529f\uff0c\u4f46\u5199\u6570\u636e\u5e93\u5931\u8d25\u6216\u8005\u54cd\u5e94\u5ef6\u8fdf\uff0c\u5219\u4e0b\u6b21\u8bfb\u53d6\uff08\u5e76\u53d1\u8bfb\uff09\u7f13\u5b58\u65f6\uff0c\u5c31\u51fa\u73b0\u810f\u8bfb \u8fd9\u4e2a\u5199\u7f13\u5b58\u7684\u65b9\u5f0f\uff0c\u672c\u8eab\u5c31\u662f\u9519\u8bef\u7684\uff0c\u9700\u8981\u6539\u4e3a\u5148\u5199\u6570\u636e\u5e93\uff0c\u628a\u65e7\u7f13\u5b58\u7f6e\u4e3a\u5931\u6548\uff1b\u8bfb\u53d6\u6570\u636e\u7684\u65f6\u5019\uff0c\u5982\u679c\u7f13\u5b58\u4e0d\u5b58\u5728\uff0c\u5219\u8bfb\u53d6\u6570\u636e\u5e93\u518d\u5199\u7f13\u5b58 \u5148\u5199\u6570\u636e\u5e93\uff0c\u518d\u5199\u7f13\u5b58\uff0c\u6570\u636e\u5e93\u5199\u6210\u529f\uff0c\u7f13\u5b58\u5199\u5931\u8d25 \u5199\u6570\u636e\u5e93\u6210\u529f\uff0c\u4f46\u5199\u7f13\u5b58\u5931\u8d25\uff0c\u5219\u4e0b\u6b21\u8bfb\u53d6\uff08\u5e76\u53d1\u8bfb\uff09\u7f13\u5b58\u65f6\uff0c\u5219\u8bfb\u4e0d\u5230\u6570\u636e \u7f13\u5b58\u4f7f\u7528\u65f6\uff0c\u5047\u5982\u8bfb\u7f13\u5b58\u5931\u8d25\uff0c\u5148\u8bfb\u6570\u636e\u5e93\uff0c\u518d\u56de\u5199\u7f13\u5b58\u7684\u65b9\u5f0f\u5b9e\u73b0 \u9700\u8981\u7f13\u5b58\u5f02\u6b65\u5237\u65b0 \u6307\u6570\u636e\u5e93\u64cd\u4f5c\u548c\u5199\u7f13\u5b58\u4e0d\u5728\u4e00\u4e2a\u64cd\u4f5c\u6b65\u9aa4\u4e2d\uff0c\u6bd4\u5982\u5728\u5206\u5e03\u5f0f\u573a\u666f\u4e0b\uff0c\u65e0\u6cd5\u505a\u5230\u540c\u65f6\u5199\u7f13\u5b58\u6216\u9700\u8981\u5f02\u6b65\u5237\u65b0\uff08\u8865\u6551\u63aa\u65bd\uff09\u65f6\u5019 \u786e\u5b9a\u54ea\u4e9b\u6570\u636e\u9002\u5408\u6b64\u7c7b\u573a\u666f\uff0c\u6839\u636e\u7ecf\u9a8c\u503c\u786e\u5b9a\u5408\u7406\u7684\u6570\u636e\u4e0d\u4e00\u81f4\u65f6\u95f4\uff0c\u7528\u6237\u6570\u636e\u5237\u65b0\u7684\u65f6\u95f4\u95f4\u9694"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_34","title":"Redis\u5e38\u89c1\u6027\u80fd\u95ee\u9898\u548c\u89e3\u51b3\u65b9\u6848\uff1f","text":"<ol> <li>Master\u6700\u597d\u4e0d\u8981\u505a\u4efb\u4f55\u6301\u4e45\u5316\u5de5\u4f5c\uff0c\u5305\u62ec\u5185\u5b58\u5feb\u7167\u548cAOF\u65e5\u5fd7\u6587\u4ef6\uff0c\u7279\u522b\u662f\u4e0d\u8981\u542f\u7528\u5185\u5b58\u5feb\u7167\u505a\u6301\u4e45\u5316\u3002</li> <li>\u5982\u679c\u6570\u636e\u6bd4\u8f83\u5173\u952e\uff0c\u67d0\u4e2aSlave\u5f00\u542fAOF\u5907\u4efd\u6570\u636e\uff0c\u7b56\u7565\u4e3a\u6bcf\u79d2\u540c\u6b65\u4e00\u6b21\u3002</li> <li>\u4e3a\u4e86\u4e3b\u4ece\u590d\u5236\u7684\u901f\u5ea6\u548c\u8fde\u63a5\u7684\u7a33\u5b9a\u6027\uff0cSlave\u548cMaster\u6700\u597d\u5728\u540c\u4e00\u4e2a\u5c40\u57df\u7f51\u5185\u3002</li> <li>\u5c3d\u91cf\u907f\u514d\u5728\u538b\u529b\u8f83\u5927\u7684\u4e3b\u5e93\u4e0a\u589e\u52a0\u4ece\u5e93</li> <li>Master\u8c03\u7528BGREWRITEAOF\u91cd\u5199AOF\u6587\u4ef6\uff0cAOF\u5728\u91cd\u5199\u7684\u65f6\u5019\u4f1a\u5360\u5927\u91cf\u7684CPU\u548c\u5185\u5b58\u8d44\u6e90\uff0c\u5bfc\u81f4\u670d\u52a1load\u8fc7\u9ad8\uff0c\u51fa\u73b0\u77ed\u6682\u670d\u52a1\u6682\u505c\u73b0\u8c61\u3002</li> <li>\u4e3a\u4e86Master\u7684\u7a33\u5b9a\u6027\uff0c\u4e3b\u4ece\u590d\u5236\u4e0d\u8981\u7528\u56fe\u72b6\u7ed3\u6784\uff0c\u7528\u5355\u5411\u94fe\u8868\u7ed3\u6784\u66f4\u7a33\u5b9a\uff0c\u5373\u4e3b\u4ece\u5173\u7cfb\u4e3a\uff1aMaster&lt;\u2013Slave1&lt;\u2013Slave2&lt;\u2013Slave3\u2026\uff0c\u8fd9\u6837\u7684\u7ed3\u6784\u4e5f\u65b9\u4fbf\u89e3\u51b3\u5355\u70b9\u6545\u969c\u95ee\u9898\uff0c\u5b9e\u73b0Slave\u5bf9Master\u7684\u66ff\u6362\uff0c\u4e5f\u5373\uff0c\u5982\u679cMaster\u6302\u4e86\uff0c\u53ef\u4ee5\u7acb\u9a6c\u542f\u7528Slave1\u505aMaster\uff0c\u5176\u4ed6\u4e0d\u53d8\u3002</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#rediswindows","title":"Redis\u5b98\u65b9\u4e3a\u4ec0\u4e48\u4e0d\u63d0\u4f9bWindows\u7248\u672c\uff1f","text":"<p>\u56e0\u4e3a\u76ee\u524dLinux\u7248\u672c\u5df2\u7ecf\u76f8\u5f53\u7a33\u5b9a\uff0c\u800c\u4e14\u7528\u6237\u91cf\u5f88\u5927\uff0c\u65e0\u9700\u5f00\u53d1windows\u7248\u672c\uff0c\u53cd\u800c\u4f1a\u5e26\u6765\u517c\u5bb9\u6027\u7b49\u95ee\u9898\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_26","title":"\u4e00\u4e2a\u5b57\u7b26\u4e32\u7c7b\u578b\u7684\u503c\u80fd\u5b58\u50a8\u6700\u5927\u5bb9\u91cf\u662f\u591a\u5c11\uff1f","text":"<p>512M</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_35","title":"Redis\u5982\u4f55\u505a\u5927\u91cf\u6570\u636e\u63d2\u5165\uff1f","text":"<p>Redis2.6\u5f00\u59cbredis-cli\u652f\u6301\u4e00\u79cd\u65b0\u7684\u88ab\u79f0\u4e4b\u4e3apipe mode\u7684\u65b0\u6a21\u5f0f\u7528\u4e8e\u6267\u884c\u5927\u91cf\u6570\u636e\u63d2\u5165\u5de5\u4f5c\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis1key10wkey","title":"\u5047\u5982Redis\u91cc\u9762\u67091\u4ebf\u4e2akey\uff0c\u5176\u4e2d\u670910w\u4e2akey\u662f\u4ee5\u67d0\u4e2a\u56fa\u5b9a\u7684\u5df2\u77e5\u7684\u524d\u7f00\u5f00\u5934\u7684\uff0c\u5982\u679c\u5c06\u5b83\u4eec\u5168\u90e8\u627e\u51fa\u6765\uff1f","text":"<p>\u4f7f\u7528keys\u6307\u4ee4\u53ef\u4ee5\u626b\u51fa\u6307\u5b9a\u6a21\u5f0f\u7684key\u5217\u8868\u3002 \u5bf9\u65b9\u63a5\u7740\u8ffd\u95ee\uff1a\u5982\u679c\u8fd9\u4e2aredis\u6b63\u5728\u7ed9\u7ebf\u4e0a\u7684\u4e1a\u52a1\u63d0\u4f9b\u670d\u52a1\uff0c\u90a3\u4f7f\u7528keys\u6307\u4ee4\u4f1a\u6709\u4ec0\u4e48\u95ee\u9898\uff1f \u8fd9\u4e2a\u65f6\u5019\u4f60\u8981\u56de\u7b54redis\u5173\u952e\u7684\u4e00\u4e2a\u7279\u6027\uff1aredis\u7684\u5355\u7ebf\u7a0b\u7684\u3002keys\u6307\u4ee4\u4f1a\u5bfc\u81f4\u7ebf\u7a0b\u963b\u585e\u4e00\u6bb5\u65f6\u95f4\uff0c\u7ebf\u4e0a\u670d\u52a1\u4f1a\u505c\u987f\uff0c\u76f4\u5230\u6307\u4ee4\u6267\u884c\u5b8c\u6bd5\uff0c\u670d\u52a1\u624d\u80fd\u6062\u590d\u3002\u8fd9\u4e2a\u65f6\u5019\u53ef\u4ee5\u4f7f\u7528scan\u6307\u4ee4\uff0cscan\u6307\u4ee4\u53ef\u4ee5\u65e0\u963b\u585e\u7684\u63d0\u53d6\u51fa\u6307\u5b9a\u6a21\u5f0f\u7684key\u5217\u8868\uff0c\u4f46\u662f\u4f1a\u6709\u4e00\u5b9a\u7684\u91cd\u590d\u6982\u7387\uff0c\u5728\u5ba2\u6237\u7aef\u505a\u4e00\u6b21\u53bb\u91cd\u5c31\u53ef\u4ee5\u4e86\uff0c\u4f46\u662f\u6574\u4f53\u6240\u82b1\u8d39\u7684\u65f6\u95f4\u4f1a\u6bd4\u76f4\u63a5\u7528keys\u6307\u4ee4\u957f\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_36","title":"\u4f7f\u7528Redis\u505a\u8fc7\u5f02\u6b65\u961f\u5217\u5417\uff0c\u662f\u5982\u4f55\u5b9e\u73b0\u7684","text":"<p>\u4f7f\u7528list\u7c7b\u578b\u4fdd\u5b58\u6570\u636e\u4fe1\u606f\uff0crpush\u751f\u4ea7\u6d88\u606f\uff0clpop\u6d88\u8d39\u6d88\u606f\uff0c\u5f53lpop\u6ca1\u6709\u6d88\u606f\u65f6\uff0c\u53ef\u4ee5sleep\u4e00\u6bb5\u65f6\u95f4\uff0c\u7136\u540e\u518d\u68c0\u67e5\u6709\u6ca1\u6709\u4fe1\u606f\uff0c\u5982\u679c\u4e0d\u60f3sleep\u7684\u8bdd\uff0c\u53ef\u4ee5\u4f7f\u7528blpop, \u5728\u6ca1\u6709\u4fe1\u606f\u7684\u65f6\u5019\uff0c\u4f1a\u4e00\u76f4\u963b\u585e\uff0c\u76f4\u5230\u4fe1\u606f\u7684\u5230\u6765\u3002redis\u53ef\u4ee5\u901a\u8fc7pub/sub\u4e3b\u9898\u8ba2\u9605\u6a21\u5f0f\u5b9e\u73b0\u4e00\u4e2a\u751f\u4ea7\u8005\uff0c\u591a\u4e2a\u6d88\u8d39\u8005\uff0c\u5f53\u7136\u4e5f\u5b58\u5728\u4e00\u5b9a\u7684\u7f3a\u70b9\uff0c\u5f53\u6d88\u8d39\u8005\u4e0b\u7ebf\u65f6\uff0c\u751f\u4ea7\u7684\u6d88\u606f\u4f1a\u4e22\u5931\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_37","title":"Redis\u5982\u4f55\u5b9e\u73b0\u5ef6\u65f6\u961f\u5217","text":"<p>\u4f7f\u7528sortedset\uff0c\u4f7f\u7528\u65f6\u95f4\u6233\u505ascore, \u6d88\u606f\u5185\u5bb9\u4f5c\u4e3akey,\u8c03\u7528zadd\u6765\u751f\u4ea7\u6d88\u606f\uff0c\u6d88\u8d39\u8005\u4f7f\u7528zrangbyscore\u83b7\u53d6n\u79d2\u4e4b\u524d\u7684\u6570\u636e\u505a\u8f6e\u8be2\u5904\u7406\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_38","title":"Redis\u56de\u6536\u8fdb\u7a0b\u5982\u4f55\u5de5\u4f5c\u7684\uff1f","text":"<ol> <li>\u4e00\u4e2a\u5ba2\u6237\u7aef\u8fd0\u884c\u4e86\u65b0\u7684\u547d\u4ee4\uff0c\u6dfb\u52a0\u4e86\u65b0\u7684\u6570\u636e\u3002</li> <li>Redis\u68c0\u67e5\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\uff0c\u5982\u679c\u5927\u4e8emaxmemory\u7684\u9650\u5236\uff0c \u5219\u6839\u636e\u8bbe\u5b9a\u597d\u7684\u7b56\u7565\u8fdb\u884c\u56de\u6536\u3002</li> <li>\u4e00\u4e2a\u65b0\u7684\u547d\u4ee4\u88ab\u6267\u884c\uff0c\u7b49\u7b49\u3002</li> <li>\u6240\u4ee5\u6211\u4eec\u4e0d\u65ad\u5730\u7a7f\u8d8a\u5185\u5b58\u9650\u5236\u7684\u8fb9\u754c\uff0c\u901a\u8fc7\u4e0d\u65ad\u8fbe\u5230\u8fb9\u754c\u7136\u540e\u4e0d\u65ad\u5730\u56de\u6536\u56de\u5230\u8fb9\u754c\u4ee5\u4e0b\u3002</li> </ol> <p>\u5982\u679c\u4e00\u4e2a\u547d\u4ee4\u7684\u7ed3\u679c\u5bfc\u81f4\u5927\u91cf\u5185\u5b58\u88ab\u4f7f\u7528\uff08\u4f8b\u5982\u5f88\u5927\u7684\u96c6\u5408\u7684\u4ea4\u96c6\u4fdd\u5b58\u5230\u4e00\u4e2a\u65b0\u7684\u952e\uff09\uff0c\u4e0d\u7528\u591a\u4e45\u5185\u5b58\u9650\u5236\u5c31\u4f1a\u88ab\u8fd9\u4e2a\u5185\u5b58\u4f7f\u7528\u91cf\u8d85\u8d8a\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_39","title":"Redis\u56de\u6536\u4f7f\u7528\u7684\u662f\u4ec0\u4e48\u7b97\u6cd5\uff1f","text":"<p>LRU\u7b97\u6cd5</p> <p>Redis\u5728\u4e92\u8054\u7f51\u6280\u672f\u5b58\u50a8\u65b9\u9762\u4f7f\u7528\u5982\u6b64\u5e7f\u6cdb\uff0c\u51e0\u4e4e\u6240\u6709\u7684\u540e\u7aef\u6280\u672f\u9762\u8bd5\u5b98\u90fd\u8981\u5728Redis\u7684\u4f7f\u7528\u548c\u539f\u7406\u65b9\u9762\u5bf9\u5c0f\u4f19\u4f34\u4eec\u8fdb\u884c360\u00b0\u7684\u5201\u96be\u3002</p> <p>\u4f5c\u4e3a\u4e00\u4e2a\u5728\u4e92\u8054\u7f51\u516c\u53f8\u9762\u4e00\u6b21\u62ff\u4e00\u6b21Offer\u7684\u9762\u9738\uff0c\u6253\u8d25\u4e86\u65e0\u6570\u7ade\u4e89\u5bf9\u624b\uff0c\u6bcf\u6b21\u90fd\u53ea\u80fd\u770b\u5230\u65e0\u6570\u843d\u5bde\u7684\u8eab\u5f71\u5931\u671b\u7684\u79bb\u5f00\uff0c\u7565\u611f\u6127\u759a\uff08\u8bf7\u5141\u8bb8\u6211\u4f7f\u7528\u4e00\u4e0b\u5938\u5f20\u7684\u4fee\u8f9e\u624b\u6cd5\uff09\u3002</p> <p>\u4e8e\u662f\u5728\u4e00\u4e2a\u5bc2\u5bde\u96be\u8010\u7684\u591c\u665a\uff0c\u6211\u75db\u5b9a\u601d\u75db\uff0c\u51b3\u5b9a\u5f00\u59cb\u5199\u300a\u540a\u6253\u9762\u8bd5\u5b98\u300b\u7cfb\u5217\uff0c\u5e0c\u671b\u80fd\u5e2e\u52a9\u5404\u4f4d\u8bfb\u8005\u4ee5\u540e\u9762\u8bd5\u52bf\u5982\u7834\u7af9\uff0c\u5bf9\u9762\u8bd5\u5b98\u8fdb\u884c360\u00b0\u7684\u53cd\u51fb\uff0c\u540a\u6253\u95ee\u4f60\u7684\u9762\u8bd5\u5b98\uff0c\u8ba9\u4e00\u540c\u9762\u8bd5\u7684\u540c\u50da\u77a0\u76ee\u7ed3\u820c\uff0c\u75af\u72c2\u6536\u5272\u5927\u5382Offer\uff01</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_27","title":"\u7d6e\u53e8","text":"<p>\u4e0a\u4e00\u671f\u56e0\u4e3a\u662f\u5728\u53cc\u5341\u4e00\u4e00\u76f4\u5728\u71ac\u591c\u7684\u5927\u73af\u5883\u4e0b\u5b8c\u6210\u7684\uff0c\u6240\u4ee5\u6211\u81ea\u5df1\u89c9\u5f97\u8d28\u91cf\u660e\u663e\u6ca1\u4e4b\u524d\u7684\u597d\uff0c\u6211\u8fd9\u4e0d\u4e00\u7761\u597d\u5c31\u52a0\u73ed\u52a0\u70b9\u51c6\u5907\u8865\u507f\u5927\u5bb6\uff0c\u6765\u70b9\u5e72\u8d27\u3002\uff08\u71ac\u591c\u592a\u5bb9\u6613\u611f\u5192\u4e86\uff0c\u8fd9\u6b21\u70b9\u4e2a\u8d5e\u522b\u767d\u5ad6\u4e86\uff01\uff09</p> <p>\u987a\u5e26\u63d0\u4e00\u5634\uff0c\u6211\u628a\u6211\u51c6\u5907\u5199\u5565\u753b\u4e86\u4e00\u4e2a\u601d\u7ef4\u5bfc\u56fe\uff0c\u4ee5\u540e\u603b\u4e0d\u80fd\u6bcf\u7bc7\u90fd\u653e\u4e2a\u8d3c\u5927\u7684\u56fe\u5427\uff0c\u5c31\u5f00\u6e90\u5230\u4e86\u6211\u7684GitHub\uff0c\u5927\u5bb6\u6709\u5174\u8da3\u53ef\u4ee5\u53bb\u5b8c\u5584\u548cStar\u3002</p> <p>\u8fd9\u7bc7\u6211\u5c31\u5148\u653e\u51fa\u6765\u5927\u5bb6\u770b\u770b\uff0c\u611f\u89c9\u8fd8\u662f\u5dee\u70b9\u610f\u601d\uff0c\u7b49\u5927\u5bb6\u5b8c\u5584\u4e86\u3002</p> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_28","title":"\u56de\u671b\u8fc7\u53bb","text":"<p>\u4e0a\u4e00\u671f\u540a\u6253\u7cfb\u5217\u6211\u4eec\u63d0\u5230\u4e86Redis\u76f8\u5173\u7684\u4e00\u4e9b\u77e5\u8bc6\uff0c\u8fd8\u6ca1\u770b\u7684\u5c0f\u4f19\u4f34\u53ef\u4ee5\u56de\u987e\u4e00\u4e0b</p> <ul> <li>\u300a\u540a\u6253\u9762\u8bd5\u5b98\u300b\u7cfb\u5217-Redis\u57fa\u7840</li> <li>\u300a\u540a\u6253\u9762\u8bd5\u5b98\u300b\u7cfb\u5217-\u7f13\u5b58\u96ea\u5d29\u3001\u51fb\u7a7f\u3001\u7a7f\u900f</li> <li>\u300a\u540a\u6253\u9762\u8bd5\u5b98\u300b\u7cfb\u5217-Redis\u54e8\u5175\u3001\u6301\u4e45\u5316\u3001\u4e3b\u4ece\u3001\u624b\u6495LRU</li> <li>\u300a\u540a\u6253\u9762\u8bd5\u5b98\u300b\u7cfb\u5217-Redis\u7ec8\u7ae0-\u51db\u51ac\u5c06\u81f3\u3001FPX-\u65b0\u738b\u767b\u57fa</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_29","title":"\u7f13\u5b58\u77e5\u8bc6\u70b9","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_30","title":"Redis\u9762\u8bd5\u9898","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_31","title":"\u7f13\u5b58\u6709\u54ea\u4e9b\u7c7b\u578b\uff1f","text":"<p>\u7f13\u5b58\u662f\u9ad8\u5e76\u53d1\u573a\u666f\u4e0b\u63d0\u9ad8\u70ed\u70b9\u6570\u636e\u8bbf\u95ee\u6027\u80fd\u7684\u4e00\u4e2a\u6709\u6548\u624b\u6bb5\uff0c\u5728\u5f00\u53d1\u9879\u76ee\u65f6\u4f1a\u7ecf\u5e38\u4f7f\u7528\u5230\u3002</p> <p>\u7f13\u5b58\u7684\u7c7b\u578b\u5206\u4e3a\uff1a\u672c\u5730\u7f13\u5b58\u3001\u5206\u5e03\u5f0f\u7f13\u5b58\u548c\u591a\u7ea7\u7f13\u5b58\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_32","title":"\u672c\u5730\u7f13\u5b58\uff1a","text":"<p>\u672c\u5730\u7f13\u5b58\u5c31\u662f\u5728\u8fdb\u7a0b\u7684\u5185\u5b58\u4e2d\u8fdb\u884c\u7f13\u5b58\uff0c\u6bd4\u5982\u6211\u4eec\u7684 JVM \u5806\u4e2d\uff0c\u53ef\u4ee5\u7528 LRUMap \u6765\u5b9e\u73b0\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 Ehcache \u8fd9\u6837\u7684\u5de5\u5177\u6765\u5b9e\u73b0\u3002</p> <p>\u672c\u5730\u7f13\u5b58\u662f\u5185\u5b58\u8bbf\u95ee\uff0c\u6ca1\u6709\u8fdc\u7a0b\u4ea4\u4e92\u5f00\u9500\uff0c\u6027\u80fd\u6700\u597d\uff0c\u4f46\u662f\u53d7\u9650\u4e8e\u5355\u673a\u5bb9\u91cf\uff0c\u4e00\u822c\u7f13\u5b58\u8f83\u5c0f\u4e14\u65e0\u6cd5\u6269\u5c55\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_33","title":"\u5206\u5e03\u5f0f\u7f13\u5b58\uff1a","text":"<p>\u5206\u5e03\u5f0f\u7f13\u5b58\u53ef\u4ee5\u5f88\u597d\u5f97\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p>\u5206\u5e03\u5f0f\u7f13\u5b58\u4e00\u822c\u90fd\u5177\u6709\u826f\u597d\u7684\u6c34\u5e73\u6269\u5c55\u80fd\u529b\uff0c\u5bf9\u8f83\u5927\u6570\u636e\u91cf\u7684\u573a\u666f\u4e5f\u80fd\u5e94\u4ed8\u81ea\u5982\u3002\u7f3a\u70b9\u5c31\u662f\u9700\u8981\u8fdb\u884c\u8fdc\u7a0b\u8bf7\u6c42\uff0c\u6027\u80fd\u4e0d\u5982\u672c\u5730\u7f13\u5b58\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_34","title":"\u591a\u7ea7\u7f13\u5b58\uff1a","text":"<p>\u4e3a\u4e86\u5e73\u8861\u8fd9\u79cd\u60c5\u51b5\uff0c\u5b9e\u9645\u4e1a\u52a1\u4e2d\u4e00\u822c\u91c7\u7528\u591a\u7ea7\u7f13\u5b58\uff0c\u672c\u5730\u7f13\u5b58\u53ea\u4fdd\u5b58\u8bbf\u95ee\u9891\u7387\u6700\u9ad8\u7684\u90e8\u5206\u70ed\u70b9\u6570\u636e\uff0c\u5176\u4ed6\u7684\u70ed\u70b9\u6570\u636e\u653e\u5728\u5206\u5e03\u5f0f\u7f13\u5b58\u4e2d\u3002</p> <p>\u5728\u76ee\u524d\u7684\u4e00\u7ebf\u5927\u5382\u4e2d\uff0c\u8fd9\u4e5f\u662f\u6700\u5e38\u7528\u7684\u7f13\u5b58\u65b9\u6848\uff0c\u5355\u8003\u5355\u4e00\u7684\u7f13\u5b58\u65b9\u6848\u5f80\u5f80\u96be\u4ee5\u6491\u4f4f\u5f88\u591a\u9ad8\u5e76\u53d1\u7684\u573a\u666f\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_35","title":"\u6dd8\u6c70\u7b56\u7565","text":"<p>\u4e0d\u7ba1\u662f\u672c\u5730\u7f13\u5b58\u8fd8\u662f\u5206\u5e03\u5f0f\u7f13\u5b58\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u8f83\u9ad8\u6027\u80fd\uff0c\u90fd\u662f\u4f7f\u7528\u5185\u5b58\u6765\u4fdd\u5b58\u6570\u636e\uff0c\u7531\u4e8e\u6210\u672c\u548c\u5185\u5b58\u9650\u5236\uff0c\u5f53\u5b58\u50a8\u7684\u6570\u636e\u8d85\u8fc7\u7f13\u5b58\u5bb9\u91cf\u65f6\uff0c\u9700\u8981\u5bf9\u7f13\u5b58\u7684\u6570\u636e\u8fdb\u884c\u5254\u9664\u3002</p> <p>\u4e00\u822c\u7684\u5254\u9664\u7b56\u7565\u6709 FIFO \u6dd8\u6c70\u6700\u65e9\u6570\u636e\u3001LRU \u5254\u9664\u6700\u8fd1\u6700\u5c11\u4f7f\u7528\u3001\u548c LFU \u5254\u9664\u6700\u8fd1\u4f7f\u7528\u9891\u7387\u6700\u4f4e\u7684\u6570\u636e\u51e0\u79cd\u7b56\u7565\u3002</p> <ul> <li> <p>noeviction:\u8fd4\u56de\u9519\u8bef\u5f53\u5185\u5b58\u9650\u5236\u8fbe\u5230\u5e76\u4e14\u5ba2\u6237\u7aef\u5c1d\u8bd5\u6267\u884c\u4f1a\u8ba9\u66f4\u591a\u5185\u5b58\u88ab\u4f7f\u7528\u7684\u547d\u4ee4\uff08\u5927\u90e8\u5206\u7684\u5199\u5165\u6307\u4ee4\uff0c\u4f46DEL\u548c\u51e0\u4e2a\u4f8b\u5916\uff09</p> </li> <li> <p>allkeys-lru: \u5c1d\u8bd5\u56de\u6536\u6700\u5c11\u4f7f\u7528\u7684\u952e\uff08LRU\uff09\uff0c\u4f7f\u5f97\u65b0\u6dfb\u52a0\u7684\u6570\u636e\u6709\u7a7a\u95f4\u5b58\u653e\u3002</p> </li> <li> <p>volatile-lru: \u5c1d\u8bd5\u56de\u6536\u6700\u5c11\u4f7f\u7528\u7684\u952e\uff08LRU\uff09\uff0c\u4f46\u4ec5\u9650\u4e8e\u5728\u8fc7\u671f\u96c6\u5408\u7684\u952e,\u4f7f\u5f97\u65b0\u6dfb\u52a0\u7684\u6570\u636e\u6709\u7a7a\u95f4\u5b58\u653e\u3002</p> </li> <li> <p>allkeys-random: \u56de\u6536\u968f\u673a\u7684\u952e\u4f7f\u5f97\u65b0\u6dfb\u52a0\u7684\u6570\u636e\u6709\u7a7a\u95f4\u5b58\u653e\u3002</p> </li> <li> <p>volatile-random: \u56de\u6536\u968f\u673a\u7684\u952e\u4f7f\u5f97\u65b0\u6dfb\u52a0\u7684\u6570\u636e\u6709\u7a7a\u95f4\u5b58\u653e\uff0c\u4f46\u4ec5\u9650\u4e8e\u5728\u8fc7\u671f\u96c6\u5408\u7684\u952e\u3002</p> </li> <li> <p>volatile-ttl: \u56de\u6536\u5728\u8fc7\u671f\u96c6\u5408\u7684\u952e\uff0c\u5e76\u4e14\u4f18\u5148\u56de\u6536\u5b58\u6d3b\u65f6\u95f4\uff08TTL\uff09\u8f83\u77ed\u7684\u952e,\u4f7f\u5f97\u65b0\u6dfb\u52a0\u7684\u6570\u636e\u6709\u7a7a\u95f4\u5b58\u653e\u3002</p> </li> </ul> <p>\u5982\u679c\u6ca1\u6709\u952e\u6ee1\u8db3\u56de\u6536\u7684\u524d\u63d0\u6761\u4ef6\u7684\u8bdd\uff0c\u7b56\u7565volatile-lru, volatile-random\u4ee5\u53cavolatile-ttl\u5c31\u548cnoeviction \u5dee\u4e0d\u591a\u4e86\u3002</p> <p>\u5176\u5b9e\u5728\u5927\u5bb6\u719f\u6089\u7684LinkedHashMap\u4e2d\u4e5f\u5b9e\u73b0\u4e86Lru\u7b97\u6cd5\u7684\uff0c\u5b9e\u73b0\u5982\u4e0b\uff1a</p> <p></p> <p>\u5f53\u5bb9\u91cf\u8d85\u8fc7100\u65f6\uff0c\u5f00\u59cb\u6267\u884cLRU\u7b56\u7565\uff1a\u5c06\u6700\u8fd1\u6700\u5c11\u672a\u4f7f\u7528\u7684 TimeoutInfoHolder \u5bf9\u8c61 evict \u6389\u3002</p> <p>\u771f\u5b9e\u9762\u8bd5\u4e2d\u4f1a\u8ba9\u4f60\u5199LUR\u7b97\u6cd5\uff0c\u4f60\u53ef\u522b\u641e\u539f\u59cb\u7684\u90a3\u4e2a\uff0c\u90a3\u771fTM\u591a\uff0c\u5199\u4e0d\u5b8c\u7684\uff0c\u4f60\u8981\u4e48\u603c\u4e0a\u9762\u8fd9\u4e2a\uff0c\u8981\u4e48\u603c\u4e0b\u9762\u8fd9\u4e2a\uff0c\u627e\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u5b9e\u73b0\u4e0bJava\u7248\u672c\u7684LRU\u8fd8\u662f\u6bd4\u8f83\u5bb9\u6613\u7684\uff0c\u77e5\u9053\u5565\u539f\u7406\u5c31\u597d\u4e86\u3002</p> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#memcache","title":"Memcache","text":"<p>\u6ce8\u610f\u540e\u9762\u4f1a\u628a Memcache \u7b80\u79f0\u4e3a MC\u3002</p> <p>\u5148\u6765\u770b\u770b MC \u7684\u7279\u70b9\uff1a</p> <ul> <li>MC \u5904\u7406\u8bf7\u6c42\u65f6\u4f7f\u7528\u591a\u7ebf\u7a0b\u5f02\u6b65 IO \u7684\u65b9\u5f0f\uff0c\u53ef\u4ee5\u5408\u7406\u5229\u7528 CPU \u591a\u6838\u7684\u4f18\u52bf\uff0c\u6027\u80fd\u975e\u5e38\u4f18\u79c0\uff1b</li> <li>MC \u529f\u80fd\u7b80\u5355\uff0c\u4f7f\u7528\u5185\u5b58\u5b58\u50a8\u6570\u636e\uff1b</li> <li>MC \u7684\u5185\u5b58\u7ed3\u6784\u4ee5\u53ca\u9499\u5316\u95ee\u9898\u6211\u5c31\u4e0d\u7ec6\u8bf4\u4e86\uff0c\u5927\u5bb6\u53ef\u4ee5\u67e5\u770b\u5b98\u7f51\u4e86\u89e3\u4e0b\uff1b</li> <li>MC \u5bf9\u7f13\u5b58\u7684\u6570\u636e\u53ef\u4ee5\u8bbe\u7f6e\u5931\u6548\u671f\uff0c\u8fc7\u671f\u540e\u7684\u6570\u636e\u4f1a\u88ab\u6e05\u9664\uff1b</li> <li>\u5931\u6548\u7684\u7b56\u7565\u91c7\u7528\u5ef6\u8fdf\u5931\u6548\uff0c\u5c31\u662f\u5f53\u518d\u6b21\u4f7f\u7528\u6570\u636e\u65f6\u68c0\u67e5\u662f\u5426\u5931\u6548\uff1b</li> <li>\u5f53\u5bb9\u91cf\u5b58\u6ee1\u65f6\uff0c\u4f1a\u5bf9\u7f13\u5b58\u4e2d\u7684\u6570\u636e\u8fdb\u884c\u5254\u9664\uff0c\u5254\u9664\u65f6\u9664\u4e86\u4f1a\u5bf9\u8fc7\u671f key \u8fdb\u884c\u6e05\u7406\uff0c\u8fd8\u4f1a\u6309 LRU \u7b56\u7565\u5bf9\u6570\u636e\u8fdb\u884c\u5254\u9664\u3002</li> </ul> <p>\u53e6\u5916\uff0c\u4f7f\u7528 MC \u6709\u4e00\u4e9b\u9650\u5236\uff0c\u8fd9\u4e9b\u9650\u5236\u5728\u73b0\u5728\u7684\u4e92\u8054\u7f51\u573a\u666f\u4e0b\u5f88\u81f4\u547d\uff0c\u6210\u4e3a\u5927\u5bb6\u9009\u62e9Redis\u3001MongoDB\u7684\u91cd\u8981\u539f\u56e0\uff1a</p> <ul> <li>key \u4e0d\u80fd\u8d85\u8fc7 250 \u4e2a\u5b57\u8282\uff1b</li> <li>value \u4e0d\u80fd\u8d85\u8fc7 1M \u5b57\u8282\uff1b</li> <li>key \u7684\u6700\u5927\u5931\u6548\u65f6\u95f4\u662f 30 \u5929\uff1b</li> <li>\u53ea\u652f\u6301 K-V \u7ed3\u6784\uff0c\u4e0d\u63d0\u4f9b\u6301\u4e45\u5316\u548c\u4e3b\u4ece\u540c\u6b65\u529f\u80fd\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_40","title":"Redis","text":"<p>\u5148\u7b80\u5355\u8bf4\u4e00\u4e0b Redis \u7684\u7279\u70b9\uff0c\u65b9\u4fbf\u548c MC \u6bd4\u8f83\u3002</p> <ul> <li>\u4e0e MC \u4e0d\u540c\u7684\u662f\uff0cRedis \u91c7\u7528\u5355\u7ebf\u7a0b\u6a21\u5f0f\u5904\u7406\u8bf7\u6c42\u3002\u8fd9\u6837\u505a\u7684\u539f\u56e0\u6709 2 \u4e2a\uff1a\u4e00\u4e2a\u662f\u56e0\u4e3a\u91c7\u7528\u4e86\u975e\u963b\u585e\u7684\u5f02\u6b65\u4e8b\u4ef6\u5904\u7406\u673a\u5236\uff1b\u53e6\u4e00\u4e2a\u662f\u7f13\u5b58\u6570\u636e\u90fd\u662f\u5185\u5b58\u64cd\u4f5c IO \u65f6\u95f4\u4e0d\u4f1a\u592a\u957f\uff0c\u5355\u7ebf\u7a0b\u53ef\u4ee5\u907f\u514d\u7ebf\u7a0b\u4e0a\u4e0b\u6587\u5207\u6362\u4ea7\u751f\u7684\u4ee3\u4ef7\u3002</li> <li>Redis \u652f\u6301\u6301\u4e45\u5316\uff0c\u6240\u4ee5 Redis \u4e0d\u4ec5\u4ec5\u53ef\u4ee5\u7528\u4f5c\u7f13\u5b58\uff0c\u4e5f\u53ef\u4ee5\u7528\u4f5c NoSQL \u6570\u636e\u5e93\u3002</li> <li>\u76f8\u6bd4 MC\uff0cRedis \u8fd8\u6709\u4e00\u4e2a\u975e\u5e38\u5927\u7684\u4f18\u52bf\uff0c\u5c31\u662f\u9664\u4e86 K-V \u4e4b\u5916\uff0c\u8fd8\u652f\u6301\u591a\u79cd\u6570\u636e\u683c\u5f0f\uff0c\u4f8b\u5982 list\u3001set\u3001sorted set\u3001hash \u7b49\u3002</li> <li>Redis \u63d0\u4f9b\u4e3b\u4ece\u540c\u6b65\u673a\u5236\uff0c\u4ee5\u53ca Cluster \u96c6\u7fa4\u90e8\u7f72\u80fd\u529b\uff0c\u80fd\u591f\u63d0\u4f9b\u9ad8\u53ef\u7528\u670d\u52a1\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#redis_41","title":"\u8be6\u89e3 Redis","text":"<p>Redis \u7684\u77e5\u8bc6\u70b9\u7ed3\u6784\u5982\u4e0b\u56fe\u6240\u793a\u3002</p> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_36","title":"\u529f\u80fd","text":"<p>\u6765\u770b Redis \u63d0\u4f9b\u7684\u529f\u80fd\u6709\u54ea\u4e9b\u5427\uff01</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_37","title":"\u6211\u4eec\u5148\u770b\u57fa\u7840\u7c7b\u578b\uff1a","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#string","title":"String\uff1a","text":"<p>String \u7c7b\u578b\u662f Redis \u4e2d\u6700\u5e38\u4f7f\u7528\u7684\u7c7b\u578b\uff0c\u5185\u90e8\u7684\u5b9e\u73b0\u662f\u901a\u8fc7 SDS\uff08Simple Dynamic String \uff09\u6765\u5b58\u50a8\u7684\u3002SDS \u7c7b\u4f3c\u4e8e Java \u4e2d\u7684 ArrayList\uff0c\u53ef\u4ee5\u901a\u8fc7\u9884\u5206\u914d\u5197\u4f59\u7a7a\u95f4\u7684\u65b9\u5f0f\u6765\u51cf\u5c11\u5185\u5b58\u7684\u9891\u7e41\u5206\u914d\u3002</p> <p>\u8fd9\u662f\u6700\u7b80\u5355\u7684\u7c7b\u578b\uff0c\u5c31\u662f\u666e\u901a\u7684 set \u548c get\uff0c\u505a\u7b80\u5355\u7684 KV \u7f13\u5b58\u3002</p> <p>\u4f46\u662f\u771f\u5b9e\u7684\u5f00\u53d1\u73af\u5883\u4e2d\uff0c\u5f88\u591a\u4ed4\u53ef\u80fd\u4f1a\u628a\u5f88\u591a\u6bd4\u8f83\u590d\u6742\u7684\u7ed3\u6784\u4e5f\u7edf\u4e00\u8f6c\u6210String\u53bb\u5b58\u50a8\u4f7f\u7528\uff0c\u6bd4\u5982\u6709\u7684\u4ed4\u4ed6\u5c31\u559c\u6b22\u628a\u5bf9\u8c61\u6216\u8005List\u8f6c\u6362\u4e3aJSONString\u8fdb\u884c\u5b58\u50a8\uff0c\u62ff\u51fa\u6765\u518d\u53cd\u5e8f\u5217\u8bdd\u5565\u7684\u3002</p> <p>\u6211\u5728\u8fd9\u91cc\u5c31\u4e0d\u8ba8\u8bba\u8fd9\u6837\u505a\u7684\u5bf9\u9519\u4e86\uff0c\u4f46\u662f\u6211\u8fd8\u662f\u5e0c\u671b\u5927\u5bb6\u80fd\u5728\u6700\u5408\u9002\u7684\u573a\u666f\u4f7f\u7528\u6700\u5408\u9002\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5bf9\u8c61\u627e\u4e0d\u5230\u6700\u5408\u9002\u7684\u4f46\u662f\u7c7b\u578b\u53ef\u4ee5\u9009\u6700\u5408\u9002\u7684\u561b\uff0c\u4e4b\u540e\u522b\u4eba\u63a5\u624b\u4f60\u7684\u4ee3\u7801\u4e00\u770b\u8fd9\u4e48\u89c4\u8303\uff0c\u8bf6\u8fd9\u5c0f\u4f19\u5b50\u6709\u70b9\u4e1c\u897f\u5440\uff0c\u770b\u5230\u4f60\u5565\u90fd\u662f\u7528\u7684String\uff0c\u5783\u573e\uff01</p> <p></p> <p>\u597d\u4e86\u8fd9\u4e9b\u90fd\u662f\u9898\u5916\u8bdd\u4e86\uff0c\u9053\u7406\u8fd8\u662f\u5e0c\u671b\u5927\u5bb6\u8bb0\u5728\u5fc3\u91cc\uff0c\u4e60\u60ef\u6210\u81ea\u7136\u561b\uff0c\u5c0f\u4e60\u60ef\u6210\u5c31\u4f60\u3002</p> <p>String\u7684\u5b9e\u9645\u5e94\u7528\u573a\u666f\u6bd4\u8f83\u5e7f\u6cdb\u7684\u6709\uff1a</p> <ul> <li>\u7f13\u5b58\u529f\u80fd\uff1aString\u5b57\u7b26\u4e32\u662f\u6700\u5e38\u7528\u7684\u6570\u636e\u7c7b\u578b\uff0c\u4e0d\u4ec5\u4ec5\u662fRedis\uff0c\u5404\u4e2a\u8bed\u8a00\u90fd\u662f\u6700\u57fa\u672c\u7c7b\u578b\uff0c\u56e0\u6b64\uff0c\u5229\u7528Redis\u4f5c\u4e3a\u7f13\u5b58\uff0c\u914d\u5408\u5176\u5b83\u6570\u636e\u5e93\u4f5c\u4e3a\u5b58\u50a8\u5c42\uff0c\u5229\u7528Redis\u652f\u6301\u9ad8\u5e76\u53d1\u7684\u7279\u70b9\uff0c\u53ef\u4ee5\u5927\u5927\u52a0\u5feb\u7cfb\u7edf\u7684\u8bfb\u5199\u901f\u5ea6\u3001\u4ee5\u53ca\u964d\u4f4e\u540e\u7aef\u6570\u636e\u5e93\u7684\u538b\u529b\u3002</li> <li>\u8ba1\u6570\u5668\uff1a\u8bb8\u591a\u7cfb\u7edf\u90fd\u4f1a\u4f7f\u7528Redis\u4f5c\u4e3a\u7cfb\u7edf\u7684\u5b9e\u65f6\u8ba1\u6570\u5668\uff0c\u53ef\u4ee5\u5feb\u901f\u5b9e\u73b0\u8ba1\u6570\u548c\u67e5\u8be2\u7684\u529f\u80fd\u3002\u800c\u4e14\u6700\u7ec8\u7684\u6570\u636e\u7ed3\u679c\u53ef\u4ee5\u6309\u7167\u7279\u5b9a\u7684\u65f6\u95f4\u843d\u5730\u5230\u6570\u636e\u5e93\u6216\u8005\u5176\u5b83\u5b58\u50a8\u4ecb\u8d28\u5f53\u4e2d\u8fdb\u884c\u6c38\u4e45\u4fdd\u5b58\u3002</li> <li>\u5171\u4eab\u7528\u6237Session\uff1a\u7528\u6237\u91cd\u65b0\u5237\u65b0\u4e00\u6b21\u754c\u9762\uff0c\u53ef\u80fd\u9700\u8981\u8bbf\u95ee\u4e00\u4e0b\u6570\u636e\u8fdb\u884c\u91cd\u65b0\u767b\u5f55\uff0c\u6216\u8005\u8bbf\u95ee\u9875\u9762\u7f13\u5b58Cookie\uff0c\u4f46\u662f\u53ef\u4ee5\u5229\u7528Redis\u5c06\u7528\u6237\u7684Session\u96c6\u4e2d\u7ba1\u7406\uff0c\u5728\u8fd9\u79cd\u6a21\u5f0f\u53ea\u9700\u8981\u4fdd\u8bc1Redis\u7684\u9ad8\u53ef\u7528\uff0c\u6bcf\u6b21\u7528\u6237Session\u7684\u66f4\u65b0\u548c\u83b7\u53d6\u90fd\u53ef\u4ee5\u5feb\u901f\u5b8c\u6210\u3002\u5927\u5927\u63d0\u9ad8\u6548\u7387\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#hash","title":"Hash\uff1a","text":"<p>\u8fd9\u4e2a\u662f\u7c7b\u4f3c Map \u7684\u4e00\u79cd\u7ed3\u6784\uff0c\u8fd9\u4e2a\u4e00\u822c\u5c31\u662f\u53ef\u4ee5\u5c06\u7ed3\u6784\u5316\u7684\u6570\u636e\uff0c\u6bd4\u5982\u4e00\u4e2a\u5bf9\u8c61\uff08\u524d\u63d0\u662f\u8fd9\u4e2a\u5bf9\u8c61\u6ca1\u5d4c\u5957\u5176\u4ed6\u7684\u5bf9\u8c61\uff09\u7ed9\u7f13\u5b58\u5728 Redis \u91cc\uff0c\u7136\u540e\u6bcf\u6b21\u8bfb\u5199\u7f13\u5b58\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u5c31\u64cd\u4f5c Hash \u91cc\u7684\u67d0\u4e2a\u5b57\u6bb5\u3002</p> <p>\u4f46\u662f\u8fd9\u4e2a\u7684\u573a\u666f\u5176\u5b9e\u8fd8\u662f\u591a\u5c11\u5355\u4e00\u4e86\u4e00\u4e9b\uff0c\u56e0\u4e3a\u73b0\u5728\u5f88\u591a\u5bf9\u8c61\u90fd\u662f\u6bd4\u8f83\u590d\u6742\u7684\uff0c\u6bd4\u5982\u4f60\u7684\u5546\u54c1\u5bf9\u8c61\u53ef\u80fd\u91cc\u9762\u5c31\u5305\u542b\u4e86\u5f88\u591a\u5c5e\u6027\uff0c\u5176\u4e2d\u4e5f\u6709\u5bf9\u8c61\u3002\u6211\u81ea\u5df1\u4f7f\u7528\u7684\u573a\u666f\u7528\u5f97\u4e0d\u662f\u90a3\u4e48\u591a\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#list","title":"List\uff1a","text":"<p>List \u662f\u6709\u5e8f\u5217\u8868\uff0c\u8fd9\u4e2a\u8fd8\u662f\u53ef\u4ee5\u73a9\u513f\u51fa\u5f88\u591a\u82b1\u6837\u7684\u3002</p> <p>\u6bd4\u5982\u53ef\u4ee5\u901a\u8fc7 List \u5b58\u50a8\u4e00\u4e9b\u5217\u8868\u578b\u7684\u6570\u636e\u7ed3\u6784\uff0c\u7c7b\u4f3c\u7c89\u4e1d\u5217\u8868\u3001\u6587\u7ae0\u7684\u8bc4\u8bba\u5217\u8868\u4e4b\u7c7b\u7684\u4e1c\u897f\u3002</p> <p>\u6bd4\u5982\u53ef\u4ee5\u901a\u8fc7 lrange \u547d\u4ee4\uff0c\u8bfb\u53d6\u67d0\u4e2a\u95ed\u533a\u95f4\u5185\u7684\u5143\u7d20\uff0c\u53ef\u4ee5\u57fa\u4e8e List \u5b9e\u73b0\u5206\u9875\u67e5\u8be2\uff0c\u8fd9\u4e2a\u662f\u5f88\u68d2\u7684\u4e00\u4e2a\u529f\u80fd\uff0c\u57fa\u4e8e Redis \u5b9e\u73b0\u7b80\u5355\u7684\u9ad8\u6027\u80fd\u5206\u9875\uff0c\u53ef\u4ee5\u505a\u7c7b\u4f3c\u5fae\u535a\u90a3\u79cd\u4e0b\u62c9\u4e0d\u65ad\u5206\u9875\u7684\u4e1c\u897f\uff0c\u6027\u80fd\u9ad8\uff0c\u5c31\u4e00\u9875\u4e00\u9875\u8d70\u3002</p> <p>\u6bd4\u5982\u53ef\u4ee5\u641e\u4e2a\u7b80\u5355\u7684\u6d88\u606f\u961f\u5217\uff0c\u4ece List \u5934\u603c\u8fdb\u53bb\uff0c\u4ece List \u5c41\u80a1\u90a3\u91cc\u5f04\u51fa\u6765\u3002</p> <p>List\u672c\u8eab\u5c31\u662f\u6211\u4eec\u5728\u5f00\u53d1\u8fc7\u7a0b\u4e2d\u6bd4\u8f83\u5e38\u7528\u7684\u6570\u636e\u7ed3\u6784\u4e86\uff0c\u70ed\u70b9\u6570\u636e\u66f4\u4e0d\u7528\u8bf4\u4e86\u3002</p> <ul> <li> <p>\u6d88\u606f\u961f\u5217\uff1aRedis\u7684\u94fe\u8868\u7ed3\u6784\uff0c\u53ef\u4ee5\u8f7b\u677e\u5b9e\u73b0\u963b\u585e\u961f\u5217\uff0c\u53ef\u4ee5\u4f7f\u7528\u5de6\u8fdb\u53f3\u51fa\u7684\u547d\u4ee4\u7ec4\u6210\u6765\u5b8c\u6210\u961f\u5217\u7684\u8bbe\u8ba1\u3002\u6bd4\u5982\uff1a\u6570\u636e\u7684\u751f\u4ea7\u8005\u53ef\u4ee5\u901a\u8fc7Lpush\u547d\u4ee4\u4ece\u5de6\u8fb9\u63d2\u5165\u6570\u636e\uff0c\u591a\u4e2a\u6570\u636e\u6d88\u8d39\u8005\uff0c\u53ef\u4ee5\u4f7f\u7528BRpop\u547d\u4ee4\u963b\u585e\u7684\u201c\u62a2\u201d\u5217\u8868\u5c3e\u90e8\u7684\u6570\u636e\u3002</p> </li> <li> <p>\u6587\u7ae0\u5217\u8868\u6216\u8005\u6570\u636e\u5206\u9875\u5c55\u793a\u7684\u5e94\u7528\u3002</p> </li> </ul> <p>\u6bd4\u5982\uff0c\u6211\u4eec\u5e38\u7528\u7684\u535a\u5ba2\u7f51\u7ad9\u7684\u6587\u7ae0\u5217\u8868\uff0c\u5f53\u7528\u6237\u91cf\u8d8a\u6765\u8d8a\u591a\u65f6\uff0c\u800c\u4e14\u6bcf\u4e00\u4e2a\u7528\u6237\u90fd\u6709\u81ea\u5df1\u7684\u6587\u7ae0\u5217\u8868\uff0c\u800c\u4e14\u5f53\u6587\u7ae0\u591a\u65f6\uff0c\u90fd\u9700\u8981\u5206\u9875\u5c55\u793a\uff0c\u8fd9\u65f6\u53ef\u4ee5\u8003\u8651\u4f7f\u7528Redis\u7684\u5217\u8868\uff0c\u5217\u8868\u4e0d\u4f46\u6709\u5e8f\u540c\u65f6\u8fd8\u652f\u6301\u6309\u7167\u8303\u56f4\u5185\u83b7\u53d6\u5143\u7d20\uff0c\u53ef\u4ee5\u5b8c\u7f8e\u89e3\u51b3\u5206\u9875\u67e5\u8be2\u529f\u80fd\u3002\u5927\u5927\u63d0\u9ad8\u67e5\u8be2\u6548\u7387\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#set","title":"Set\uff1a","text":"<p>Set \u662f\u65e0\u5e8f\u96c6\u5408\uff0c\u4f1a\u81ea\u52a8\u53bb\u91cd\u7684\u90a3\u79cd\u3002</p> <p>\u76f4\u63a5\u57fa\u4e8e Set \u5c06\u7cfb\u7edf\u91cc\u9700\u8981\u53bb\u91cd\u7684\u6570\u636e\u6254\u8fdb\u53bb\uff0c\u81ea\u52a8\u5c31\u7ed9\u53bb\u91cd\u4e86\uff0c\u5982\u679c\u4f60\u9700\u8981\u5bf9\u4e00\u4e9b\u6570\u636e\u8fdb\u884c\u5feb\u901f\u7684\u5168\u5c40\u53bb\u91cd\uff0c\u4f60\u5f53\u7136\u4e5f\u53ef\u4ee5\u57fa\u4e8e JVM \u5185\u5b58\u91cc\u7684 HashSet \u8fdb\u884c\u53bb\u91cd\uff0c\u4f46\u662f\u5982\u679c\u4f60\u7684\u67d0\u4e2a\u7cfb\u7edf\u90e8\u7f72\u5728\u591a\u53f0\u673a\u5668\u4e0a\u5462\uff1f\u5f97\u57fa\u4e8eRedis\u8fdb\u884c\u5168\u5c40\u7684 Set \u53bb\u91cd\u3002</p> <p>\u53ef\u4ee5\u57fa\u4e8e Set \u73a9\u513f\u4ea4\u96c6\u3001\u5e76\u96c6\u3001\u5dee\u96c6\u7684\u64cd\u4f5c\uff0c\u6bd4\u5982\u4ea4\u96c6\u5427\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u4e24\u4e2a\u4eba\u7684\u597d\u53cb\u5217\u8868\u6574\u4e00\u4e2a\u4ea4\u96c6\uff0c\u770b\u770b\u4fe9\u4eba\u7684\u5171\u540c\u597d\u53cb\u662f\u8c01\uff1f\u5bf9\u5427\u3002</p> <p>\u53cd\u6b63\u8fd9\u4e9b\u573a\u666f\u6bd4\u8f83\u591a\uff0c\u56e0\u4e3a\u5bf9\u6bd4\u5f88\u5feb\uff0c\u64cd\u4f5c\u4e5f\u7b80\u5355\uff0c\u4e24\u4e2a\u67e5\u8be2\u4e00\u4e2aSet\u641e\u5b9a\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#sorted-set","title":"Sorted Set\uff1a","text":"<p>Sorted set \u662f\u6392\u5e8f\u7684 Set\uff0c\u53bb\u91cd\u4f46\u53ef\u4ee5\u6392\u5e8f\uff0c\u5199\u8fdb\u53bb\u7684\u65f6\u5019\u7ed9\u4e00\u4e2a\u5206\u6570\uff0c\u81ea\u52a8\u6839\u636e\u5206\u6570\u6392\u5e8f\u3002</p> <p>\u6709\u5e8f\u96c6\u5408\u7684\u4f7f\u7528\u573a\u666f\u4e0e\u96c6\u5408\u7c7b\u4f3c\uff0c\u4f46\u662fset\u96c6\u5408\u4e0d\u662f\u81ea\u52a8\u6709\u5e8f\u7684\uff0c\u800cSorted set\u53ef\u4ee5\u5229\u7528\u5206\u6570\u8fdb\u884c\u6210\u5458\u95f4\u7684\u6392\u5e8f\uff0c\u800c\u4e14\u662f\u63d2\u5165\u65f6\u5c31\u6392\u5e8f\u597d\u3002\u6240\u4ee5\u5f53\u4f60\u9700\u8981\u4e00\u4e2a\u6709\u5e8f\u4e14\u4e0d\u91cd\u590d\u7684\u96c6\u5408\u5217\u8868\u65f6\uff0c\u5c31\u53ef\u4ee5\u9009\u62e9Sorted set\u6570\u636e\u7ed3\u6784\u4f5c\u4e3a\u9009\u62e9\u65b9\u6848\u3002</p> <ul> <li> <p>\u6392\u884c\u699c\uff1a\u6709\u5e8f\u96c6\u5408\u7ecf\u5178\u4f7f\u7528\u573a\u666f\u3002\u4f8b\u5982\u89c6\u9891\u7f51\u7ad9\u9700\u8981\u5bf9\u7528\u6237\u4e0a\u4f20\u7684\u89c6\u9891\u505a\u6392\u884c\u699c\uff0c\u699c\u5355\u7ef4\u62a4\u53ef\u80fd\u662f\u591a\u65b9\u9762\uff1a\u6309\u7167\u65f6\u95f4\u3001\u6309\u7167\u64ad\u653e\u91cf\u3001\u6309\u7167\u83b7\u5f97\u7684\u8d5e\u6570\u7b49\u3002</p> </li> <li> <p>\u7528Sorted Sets\u6765\u505a\u5e26\u6743\u91cd\u7684\u961f\u5217\uff0c\u6bd4\u5982\u666e\u901a\u6d88\u606f\u7684score\u4e3a1\uff0c\u91cd\u8981\u6d88\u606f\u7684score\u4e3a2\uff0c\u7136\u540e\u5de5\u4f5c\u7ebf\u7a0b\u53ef\u4ee5\u9009\u62e9\u6309score\u7684\u5012\u5e8f\u6765\u83b7\u53d6\u5de5\u4f5c\u4efb\u52a1\u3002\u8ba9\u91cd\u8981\u7684\u4efb\u52a1\u4f18\u5148\u6267\u884c\u3002</p> </li> </ul> <p>\u5fae\u535a\u70ed\u641c\u699c\uff0c\u5c31\u662f\u6709\u4e2a\u540e\u9762\u7684\u70ed\u5ea6\u503c\uff0c\u524d\u9762\u5c31\u662f\u540d\u79f0</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_38","title":"\u9ad8\u7ea7\u7528\u6cd5\uff1a","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#bitmap","title":"Bitmap :","text":"<p>\u4f4d\u56fe\u662f\u652f\u6301\u6309 bit \u4f4d\u6765\u5b58\u50a8\u4fe1\u606f\uff0c\u53ef\u4ee5\u7528\u6765\u5b9e\u73b0 \u5e03\u9686\u8fc7\u6ee4\u5668\uff08BloomFilter\uff09\uff1b</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#hyperloglog","title":"HyperLogLog:","text":"<p>\u4f9b\u4e0d\u7cbe\u786e\u7684\u53bb\u91cd\u8ba1\u6570\u529f\u80fd\uff0c\u6bd4\u8f83\u9002\u5408\u7528\u6765\u505a\u5927\u89c4\u6a21\u6570\u636e\u7684\u53bb\u91cd\u7edf\u8ba1\uff0c\u4f8b\u5982\u7edf\u8ba1 UV\uff1b</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#geospatial","title":"Geospatial:","text":"<p>\u53ef\u4ee5\u7528\u6765\u4fdd\u5b58\u5730\u7406\u4f4d\u7f6e\uff0c\u5e76\u4f5c\u4f4d\u7f6e\u8ddd\u79bb\u8ba1\u7b97\u6216\u8005\u6839\u636e\u534a\u5f84\u8ba1\u7b97\u4f4d\u7f6e\u7b49\u3002\u6709\u6ca1\u6709\u60f3\u8fc7\u7528Redis\u6765\u5b9e\u73b0\u9644\u8fd1\u7684\u4eba\uff1f\u6216\u8005\u8ba1\u7b97\u6700\u4f18\u5730\u56fe\u8def\u5f84\uff1f</p> <p>\u8fd9\u4e09\u4e2a\u5176\u5b9e\u4e5f\u53ef\u4ee5\u7b97\u4f5c\u4e00\u79cd\u6570\u636e\u7ed3\u6784\uff0c\u4e0d\u77e5\u9053\u8fd8\u6709\u591a\u5c11\u670b\u53cb\u8bb0\u5f97\uff0c\u6211\u5728\u68a6\u5f00\u59cb\u7684\u5730\u65b9\uff0cRedis\u57fa\u7840\u4e2d\u63d0\u5230\u8fc7\uff0c\u4f60\u5982\u679c\u53ea\u77e5\u9053\u4e94\u79cd\u57fa\u7840\u7c7b\u578b\u90a3\u53ea\u80fd\u62ff60\u5206\uff0c\u5982\u679c\u4f60\u80fd\u8bb2\u51fa\u9ad8\u7ea7\u7528\u6cd5\uff0c\u90a3\u5c31\u89c9\u5f97\u4f60\u6709\u70b9\u4e1c\u897f\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#pubsub","title":"pub/sub\uff1a","text":"<p>\u529f\u80fd\u662f\u8ba2\u9605\u53d1\u5e03\u529f\u80fd\uff0c\u53ef\u4ee5\u7528\u4f5c\u7b80\u5355\u7684\u6d88\u606f\u961f\u5217\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#pipeline","title":"Pipeline\uff1a","text":"<p>\u53ef\u4ee5\u6279\u91cf\u6267\u884c\u4e00\u7ec4\u6307\u4ee4\uff0c\u4e00\u6b21\u6027\u8fd4\u56de\u5168\u90e8\u7ed3\u679c\uff0c\u53ef\u4ee5\u51cf\u5c11\u9891\u7e41\u7684\u8bf7\u6c42\u5e94\u7b54\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#lua","title":"Lua\uff1a","text":"<p>Redis \u652f\u6301\u63d0\u4ea4 Lua \u811a\u672c\u6765\u6267\u884c\u4e00\u7cfb\u5217\u7684\u529f\u80fd\u3002</p> <p>\u6211\u5728\u524d\u7535\u5546\u8001\u4e1c\u5bb6\u7684\u65f6\u5019\uff0c\u79d2\u6740\u573a\u666f\u7ecf\u5e38\u4f7f\u7528\u8fd9\u4e2a\u4e1c\u897f\uff0c\u8bb2\u9053\u7406\u6709\u70b9\u9999\uff0c\u5229\u7528\u4ed6\u7684\u539f\u5b50\u6027\u3002</p> <p>\u8bdd\u8bf4\u4f60\u4eec\u60f3\u770b\u79d2\u6740\u7684\u8bbe\u8ba1\u4e48\uff1f\u6211\u8bb0\u5f97\u6211\u9762\u8bd5\u597d\u50cf\u6bcf\u6b21\u90fd\u95ee\u554a\uff0c\u60f3\u770b\u7684\u76f4\u63a5\u70b9\u8d5e\u540e\u8bc4\u8bba\u79d2\u6740\u5427\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_39","title":"\u4e8b\u52a1\uff1a","text":"<p>\u6700\u540e\u4e00\u4e2a\u529f\u80fd\u662f\u4e8b\u52a1\uff0c\u4f46 Redis \u63d0\u4f9b\u7684\u4e0d\u662f\u4e25\u683c\u7684\u4e8b\u52a1\uff0cRedis \u53ea\u4fdd\u8bc1\u4e32\u884c\u6267\u884c\u547d\u4ee4\uff0c\u5e76\u4e14\u80fd\u4fdd\u8bc1\u5168\u90e8\u6267\u884c\uff0c\u4f46\u662f\u6267\u884c\u547d\u4ee4\u5931\u8d25\u65f6\u5e76\u4e0d\u4f1a\u56de\u6eda\uff0c\u800c\u662f\u4f1a\u7ee7\u7eed\u6267\u884c\u4e0b\u53bb\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_40","title":"\u6301\u4e45\u5316","text":"<p>Redis \u63d0\u4f9b\u4e86 RDB \u548c AOF \u4e24\u79cd\u6301\u4e45\u5316\u65b9\u5f0f\uff0cRDB \u662f\u628a\u5185\u5b58\u4e2d\u7684\u6570\u636e\u96c6\u4ee5\u5feb\u7167\u5f62\u5f0f\u5199\u5165\u78c1\u76d8\uff0c\u5b9e\u9645\u64cd\u4f5c\u662f\u901a\u8fc7 fork \u5b50\u8fdb\u7a0b\u6267\u884c\uff0c\u91c7\u7528\u4e8c\u8fdb\u5236\u538b\u7f29\u5b58\u50a8\uff1bAOF \u662f\u4ee5\u6587\u672c\u65e5\u5fd7\u7684\u5f62\u5f0f\u8bb0\u5f55 Redis \u5904\u7406\u7684\u6bcf\u4e00\u4e2a\u5199\u5165\u6216\u5220\u9664\u64cd\u4f5c\u3002</p> <p>RDB \u628a\u6574\u4e2a Redis \u7684\u6570\u636e\u4fdd\u5b58\u5728\u5355\u4e00\u6587\u4ef6\u4e2d\uff0c\u6bd4\u8f83\u9002\u5408\u7528\u6765\u505a\u707e\u5907\uff0c\u4f46\u7f3a\u70b9\u662f\u5feb\u7167\u4fdd\u5b58\u5b8c\u6210\u4e4b\u524d\u5982\u679c\u5b95\u673a\uff0c\u8fd9\u6bb5\u65f6\u95f4\u7684\u6570\u636e\u5c06\u4f1a\u4e22\u5931\uff0c\u53e6\u5916\u4fdd\u5b58\u5feb\u7167\u65f6\u53ef\u80fd\u5bfc\u81f4\u670d\u52a1\u77ed\u65f6\u95f4\u4e0d\u53ef\u7528\u3002</p> <p>AOF \u5bf9\u65e5\u5fd7\u6587\u4ef6\u7684\u5199\u5165\u64cd\u4f5c\u4f7f\u7528\u7684\u8ffd\u52a0\u6a21\u5f0f\uff0c\u6709\u7075\u6d3b\u7684\u540c\u6b65\u7b56\u7565\uff0c\u652f\u6301\u6bcf\u79d2\u540c\u6b65\u3001\u6bcf\u6b21\u4fee\u6539\u540c\u6b65\u548c\u4e0d\u540c\u6b65\uff0c\u7f3a\u70b9\u5c31\u662f\u76f8\u540c\u89c4\u6a21\u7684\u6570\u636e\u96c6\uff0cAOF \u8981\u5927\u4e8e RDB\uff0cAOF \u5728\u8fd0\u884c\u6548\u7387\u4e0a\u5f80\u5f80\u4f1a\u6162\u4e8e RDB\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_41","title":"\u9ad8\u53ef\u7528","text":"<p>\u6765\u770b Redis \u7684\u9ad8\u53ef\u7528\u3002Redis \u652f\u6301\u4e3b\u4ece\u540c\u6b65\uff0c\u63d0\u4f9b Cluster \u96c6\u7fa4\u90e8\u7f72\u6a21\u5f0f\uff0c\u901a\u8fc7 Sentine l\u54e8\u5175\u6765\u76d1\u63a7 Redis \u4e3b\u670d\u52a1\u5668\u7684\u72b6\u6001\u3002\u5f53\u4e3b\u6302\u6389\u65f6\uff0c\u5728\u4ece\u8282\u70b9\u4e2d\u6839\u636e\u4e00\u5b9a\u7b56\u7565\u9009\u51fa\u65b0\u4e3b\uff0c\u5e76\u8c03\u6574\u5176\u4ed6\u4ece slaveof \u5230\u65b0\u4e3b\u3002</p> <p>\u9009\u4e3b\u7684\u7b56\u7565\u7b80\u5355\u6765\u8bf4\u6709\u4e09\u4e2a\uff1a</p> <ul> <li>slave \u7684 priority \u8bbe\u7f6e\u7684\u8d8a\u4f4e\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff1b</li> <li>\u540c\u7b49\u60c5\u51b5\u4e0b\uff0cslave \u590d\u5236\u7684\u6570\u636e\u8d8a\u591a\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff1b</li> <li>\u76f8\u540c\u7684\u6761\u4ef6\u4e0b runid \u8d8a\u5c0f\u8d8a\u5bb9\u6613\u88ab\u9009\u4e2d\u3002</li> </ul> <p>\u5728 Redis \u96c6\u7fa4\u4e2d\uff0csentinel \u4e5f\u4f1a\u8fdb\u884c\u591a\u5b9e\u4f8b\u90e8\u7f72\uff0csentinel \u4e4b\u95f4\u901a\u8fc7 Raft \u534f\u8bae\u6765\u4fdd\u8bc1\u81ea\u8eab\u7684\u9ad8\u53ef\u7528\u3002</p> <p>Redis Cluster \u4f7f\u7528\u5206\u7247\u673a\u5236\uff0c\u5728\u5185\u90e8\u5206\u4e3a 16384 \u4e2a slot \u63d2\u69fd\uff0c\u5206\u5e03\u5728\u6240\u6709 master \u8282\u70b9\u4e0a\uff0c\u6bcf\u4e2a master \u8282\u70b9\u8d1f\u8d23\u4e00\u90e8\u5206 slot\u3002\u6570\u636e\u64cd\u4f5c\u65f6\u6309 key \u505a CRC16 \u6765\u8ba1\u7b97\u5728\u54ea\u4e2a slot\uff0c\u7531\u54ea\u4e2a master \u8fdb\u884c\u5904\u7406\u3002\u6570\u636e\u7684\u5197\u4f59\u662f\u901a\u8fc7 slave \u8282\u70b9\u6765\u4fdd\u969c\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_42","title":"\u54e8\u5175","text":"<p>\u54e8\u5175\u5fc5\u987b\u7528\u4e09\u4e2a\u5b9e\u4f8b\u53bb\u4fdd\u8bc1\u81ea\u5df1\u7684\u5065\u58ee\u6027\u7684\uff0c\u54e8\u5175+\u4e3b\u4ece\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u6570\u636e\u4e0d\u4e22\u5931\uff0c\u4f46\u662f\u53ef\u4ee5\u4fdd\u8bc1\u96c6\u7fa4\u7684\u9ad8\u53ef\u7528\u3002</p> <p>\u4e3a\u5565\u5fc5\u987b\u8981\u4e09\u4e2a\u5b9e\u4f8b\u5462\uff1f\u6211\u4eec\u5148\u770b\u770b\u4e24\u4e2a\u54e8\u5175\u4f1a\u548b\u6837\u3002</p> <p></p> <p>master\u5b95\u673a\u4e86 s1\u548cs2\u4e24\u4e2a\u54e8\u5175\u53ea\u8981\u6709\u4e00\u4e2a\u8ba4\u4e3a\u4f60\u5b95\u673a\u4e86\u5c31\u5207\u6362\u4e86\uff0c\u5e76\u4e14\u4f1a\u9009\u4e3e\u51fa\u4e00\u4e2a\u54e8\u5175\u53bb\u6267\u884c\u6545\u969c\uff0c\u4f46\u662f\u8fd9\u4e2a\u65f6\u5019\u4e5f\u9700\u8981\u5927\u591a\u6570\u54e8\u5175\u90fd\u662f\u8fd0\u884c\u7684\u3002</p> <p>\u90a3\u8fd9\u6837\u6709\u5565\u95ee\u9898\u5462\uff1fM1\u5b95\u673a\u4e86\uff0cS1\u6ca1\u6302\u90a3\u5176\u5b9e\u662fOK\u7684\uff0c\u4f46\u662f\u6574\u4e2a\u673a\u5668\u90fd\u6302\u4e86\u5462\uff1f\u54e8\u5175\u5c31\u53ea\u5269\u4e0bS2\u4e2a\u88f8\u5c4c\u4e86\uff0c\u6ca1\u6709\u54e8\u5175\u53bb\u5141\u8bb8\u6545\u969c\u8f6c\u79fb\u4e86\uff0c\u867d\u7136\u53e6\u5916\u4e00\u4e2a\u673a\u5668\u4e0a\u8fd8\u6709R1\uff0c\u4f46\u662f\u6545\u969c\u8f6c\u79fb\u5c31\u662f\u4e0d\u6267\u884c\u3002</p> <p>\u7ecf\u5178\u7684\u54e8\u5175\u96c6\u7fa4\u662f\u8fd9\u6837\u7684\uff1a</p> <p></p> <p>M1\u6240\u5728\u7684\u673a\u5668\u6302\u4e86\uff0c\u54e8\u5175\u8fd8\u6709\u4e24\u4e2a\uff0c\u4e24\u4e2a\u4eba\u4e00\u770b\u4ed6\u4e0d\u662f\u6302\u4e86\u561b\uff0c\u90a3\u6211\u4eec\u5c31\u9009\u4e3e\u4e00\u4e2a\u51fa\u6765\u6267\u884c\u6545\u969c\u8f6c\u79fb\u4e0d\u5c31\u597d\u4e86\u3002</p> <p>\u6696\u7537\u6211\uff0c\u5c0f\u7684\u603b\u7ed3\u4e0b\u54e8\u5175\u7ec4\u4ef6\u7684\u4e3b\u8981\u529f\u80fd\uff1a</p> <ul> <li>\u96c6\u7fa4\u76d1\u63a7\uff1a\u8d1f\u8d23\u76d1\u63a7 Redis master \u548c slave \u8fdb\u7a0b\u662f\u5426\u6b63\u5e38\u5de5\u4f5c\u3002</li> <li>\u6d88\u606f\u901a\u77e5\uff1a\u5982\u679c\u67d0\u4e2a Redis \u5b9e\u4f8b\u6709\u6545\u969c\uff0c\u90a3\u4e48\u54e8\u5175\u8d1f\u8d23\u53d1\u9001\u6d88\u606f\u4f5c\u4e3a\u62a5\u8b66\u901a\u77e5\u7ed9\u7ba1\u7406\u5458\u3002</li> <li>\u6545\u969c\u8f6c\u79fb\uff1a\u5982\u679c master node \u6302\u6389\u4e86\uff0c\u4f1a\u81ea\u52a8\u8f6c\u79fb\u5230 slave node \u4e0a\u3002</li> <li>\u914d\u7f6e\u4e2d\u5fc3\uff1a\u5982\u679c\u6545\u969c\u8f6c\u79fb\u53d1\u751f\u4e86\uff0c\u901a\u77e5 client \u5ba2\u6237\u7aef\u65b0\u7684 master \u5730\u5740\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_43","title":"\u4e3b\u4ece","text":"<p>\u63d0\u5230\u8fd9\u4e2a\uff0c\u5c31\u8ddf\u6211\u524d\u9762\u63d0\u5230\u7684\u6570\u636e\u6301\u4e45\u5316\u7684RDB\u548cAOF\u6709\u7740\u6bd4\u5bc6\u5207\u7684\u5173\u7cfb\u4e86\u3002</p> <p>\u6211\u5148\u8bf4\u4e0b\u4e3a\u5565\u8981\u7528\u4e3b\u4ece\u8fd9\u6837\u7684\u67b6\u6784\u6a21\u5f0f\uff0c\u524d\u9762\u63d0\u5230\u4e86\u5355\u673aQPS\u662f\u6709\u4e0a\u9650\u7684\uff0c\u800c\u4e14Redis\u7684\u7279\u6027\u5c31\u662f\u5fc5\u987b\u652f\u6491\u8bfb\u9ad8\u5e76\u53d1\u7684\uff0c\u90a3\u4f60\u4e00\u53f0\u673a\u5668\u53c8\u8bfb\u53c8\u5199\uff0c\u8fd9\u8c01\u9876\u5f97\u4f4f\u554a\uff0c\u4e0d\u5f53\u4eba\u554a\uff01\u4f46\u662f\u4f60\u8ba9\u8fd9\u4e2amaster\u673a\u5668\u53bb\u5199\uff0c\u6570\u636e\u540c\u6b65\u7ed9\u522b\u7684slave\u673a\u5668\uff0c\u4ed6\u4eec\u90fd\u62ff\u53bb\u8bfb\uff0c\u5206\u53d1\u6389\u5927\u91cf\u7684\u8bf7\u6c42\u90a3\u662f\u4e0d\u662f\u597d\u5f88\u591a\uff0c\u800c\u4e14\u6269\u5bb9\u7684\u65f6\u5019\u8fd8\u53ef\u4ee5\u8f7b\u677e\u5b9e\u73b0\u6c34\u5e73\u6269\u5bb9\u3002</p> <p></p> <p>\u4f60\u542f\u52a8\u4e00\u53f0slave \u7684\u65f6\u5019\uff0c\u4ed6\u4f1a\u53d1\u9001\u4e00\u4e2apsync\u547d\u4ee4\u7ed9master \uff0c\u5982\u679c\u662f\u8fd9\u4e2aslave\u7b2c\u4e00\u6b21\u8fde\u63a5\u5230master\uff0c\u4ed6\u4f1a\u89e6\u53d1\u4e00\u4e2a\u5168\u91cf\u590d\u5236\u3002master\u5c31\u4f1a\u542f\u52a8\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u751f\u6210RDB\u5feb\u7167\uff0c\u8fd8\u4f1a\u628a\u65b0\u7684\u5199\u8bf7\u6c42\u90fd\u7f13\u5b58\u5728\u5185\u5b58\u4e2d\uff0cRDB\u6587\u4ef6\u751f\u6210\u540e\uff0cmaster\u4f1a\u5c06\u8fd9\u4e2aRDB\u53d1\u9001\u7ed9slave\u7684\uff0cslave\u62ff\u5230\u4e4b\u540e\u505a\u7684\u7b2c\u4e00\u4ef6\u4e8b\u60c5\u5c31\u662f\u5199\u8fdb\u672c\u5730\u7684\u78c1\u76d8\uff0c\u7136\u540e\u52a0\u8f7d\u8fdb\u5185\u5b58\uff0c\u7136\u540emaster\u4f1a\u628a\u5185\u5b58\u91cc\u9762\u7f13\u5b58\u7684\u90a3\u4e9b\u65b0\u547d\u540d\u90fd\u53d1\u7ed9slave\u3002</p> <p>\u6211\u53d1\u51fa\u6765\u4e4b\u540e\u6765\u81eaCSDN\u7684\u7f51\u53cb\uff1aJian_Shen_Zer \u95ee\u4e86\u4e2a\u95ee\u9898\uff1a</p> <p>\u4e3b\u4ece\u540c\u6b65\u7684\u65f6\u5019\uff0c\u65b0\u7684slaver\u8fdb\u6765\u7684\u65f6\u5019\u7528RDB\uff0c\u90a3\u4e4b\u540e\u7684\u6570\u636e\u5462\uff1f\u6709\u65b0\u7684\u6570\u636e\u8fdb\u5165master\u600e\u4e48\u540c\u6b65\u5230slaver\u554a</p> <p>\u6556\u4e19\u7b54\uff1a\u7b28\uff0cAOF\u561b\uff0c\u589e\u91cf\u7684\u5c31\u50cfMySQL\u7684Binlog\u4e00\u6837\uff0c\u628a\u65e5\u5fd7\u589e\u91cf\u540c\u6b65\u7ed9\u4ece\u670d\u52a1\u5c31\u597d\u4e86</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#key_1","title":"key \u5931\u6548\u673a\u5236","text":"<p>Redis \u7684 key \u53ef\u4ee5\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\uff0c\u8fc7\u671f\u540e Redis \u91c7\u7528\u4e3b\u52a8\u548c\u88ab\u52a8\u7ed3\u5408\u7684\u5931\u6548\u673a\u5236\uff0c\u4e00\u4e2a\u662f\u548c MC \u4e00\u6837\u5728\u8bbf\u95ee\u65f6\u89e6\u53d1\u88ab\u52a8\u5220\u9664\uff0c\u53e6\u4e00\u79cd\u662f\u5b9a\u671f\u7684\u4e3b\u52a8\u5220\u9664\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_44","title":"\u7f13\u5b58\u5e38\u89c1\u95ee\u9898","text":""},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_45","title":"\u7f13\u5b58\u66f4\u65b0\u65b9\u5f0f","text":"<p>\u8fd9\u662f\u51b3\u5b9a\u5728\u4f7f\u7528\u7f13\u5b58\u65f6\u5c31\u8be5\u8003\u8651\u7684\u95ee\u9898\u3002</p> <p>\u7f13\u5b58\u7684\u6570\u636e\u5728\u6570\u636e\u6e90\u53d1\u751f\u53d8\u66f4\u65f6\u9700\u8981\u5bf9\u7f13\u5b58\u8fdb\u884c\u66f4\u65b0\uff0c\u6570\u636e\u6e90\u53ef\u80fd\u662f DB\uff0c\u4e5f\u53ef\u80fd\u662f\u8fdc\u7a0b\u670d\u52a1\u3002\u66f4\u65b0\u7684\u65b9\u5f0f\u53ef\u4ee5\u662f\u4e3b\u52a8\u66f4\u65b0\u3002\u6570\u636e\u6e90\u662f DB \u65f6\uff0c\u53ef\u4ee5\u5728\u66f4\u65b0\u5b8c DB \u540e\u5c31\u76f4\u63a5\u66f4\u65b0\u7f13\u5b58\u3002</p> <p>\u5f53\u6570\u636e\u6e90\u4e0d\u662f DB \u800c\u662f\u5176\u4ed6\u8fdc\u7a0b\u670d\u52a1\uff0c\u53ef\u80fd\u65e0\u6cd5\u53ca\u65f6\u4e3b\u52a8\u611f\u77e5\u6570\u636e\u53d8\u66f4\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u4e00\u822c\u4f1a\u9009\u62e9\u5bf9\u7f13\u5b58\u6570\u636e\u8bbe\u7f6e\u5931\u6548\u671f\uff0c\u4e5f\u5c31\u662f\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u6700\u5927\u5bb9\u5fcd\u65f6\u95f4\u3002</p> <p>\u8fd9\u79cd\u573a\u666f\u4e0b\uff0c\u53ef\u4ee5\u9009\u62e9\u5931\u6548\u66f4\u65b0\uff0ckey \u4e0d\u5b58\u5728\u6216\u5931\u6548\u65f6\u5148\u8bf7\u6c42\u6570\u636e\u6e90\u83b7\u53d6\u6700\u65b0\u6570\u636e\uff0c\u7136\u540e\u518d\u6b21\u7f13\u5b58\uff0c\u5e76\u66f4\u65b0\u5931\u6548\u671f\u3002</p> <p>\u4f46\u8fd9\u6837\u505a\u6709\u4e2a\u95ee\u9898\uff0c\u5982\u679c\u4f9d\u8d56\u7684\u8fdc\u7a0b\u670d\u52a1\u5728\u66f4\u65b0\u65f6\u51fa\u73b0\u5f02\u5e38\uff0c\u5219\u4f1a\u5bfc\u81f4\u6570\u636e\u4e0d\u53ef\u7528\u3002\u6539\u8fdb\u7684\u529e\u6cd5\u662f\u5f02\u6b65\u66f4\u65b0\uff0c\u5c31\u662f\u5f53\u5931\u6548\u65f6\u5148\u4e0d\u6e05\u9664\u6570\u636e\uff0c\u7ee7\u7eed\u4f7f\u7528\u65e7\u7684\u6570\u636e\uff0c\u7136\u540e\u7531\u5f02\u6b65\u7ebf\u7a0b\u53bb\u6267\u884c\u66f4\u65b0\u4efb\u52a1\u3002\u8fd9\u6837\u5c31\u907f\u514d\u4e86\u5931\u6548\u77ac\u95f4\u7684\u7a7a\u7a97\u671f\u3002\u53e6\u5916\u8fd8\u6709\u4e00\u79cd\u7eaf\u5f02\u6b65\u66f4\u65b0\u65b9\u5f0f\uff0c\u5b9a\u65f6\u5bf9\u6570\u636e\u8fdb\u884c\u5206\u6279\u66f4\u65b0\u3002\u5b9e\u9645\u4f7f\u7528\u65f6\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u573a\u666f\u9009\u62e9\u66f4\u65b0\u65b9\u5f0f\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_46","title":"\u6570\u636e\u4e0d\u4e00\u81f4","text":"<p>\u7b2c\u4e8c\u4e2a\u95ee\u9898\u662f\u6570\u636e\u4e0d\u4e00\u81f4\u7684\u95ee\u9898\uff0c\u53ef\u4ee5\u8bf4\u53ea\u8981\u4f7f\u7528\u7f13\u5b58\uff0c\u5c31\u8981\u8003\u8651\u5982\u4f55\u9762\u5bf9\u8fd9\u4e2a\u95ee\u9898\u3002\u7f13\u5b58\u4e0d\u4e00\u81f4\u4ea7\u751f\u7684\u539f\u56e0\u4e00\u822c\u662f\u4e3b\u52a8\u66f4\u65b0\u5931\u8d25\uff0c\u4f8b\u5982\u66f4\u65b0 DB \u540e\uff0c\u66f4\u65b0 Redis \u56e0\u4e3a\u7f51\u7edc\u539f\u56e0\u8bf7\u6c42\u8d85\u65f6\uff1b\u6216\u8005\u662f\u5f02\u6b65\u66f4\u65b0\u5931\u8d25\u5bfc\u81f4\u3002</p> <p>\u89e3\u51b3\u7684\u529e\u6cd5\u662f\uff0c\u5982\u679c\u670d\u52a1\u5bf9\u8017\u65f6\u4e0d\u662f\u7279\u522b\u654f\u611f\u53ef\u4ee5\u589e\u52a0\u91cd\u8bd5\uff1b\u5982\u679c\u670d\u52a1\u5bf9\u8017\u65f6\u654f\u611f\u53ef\u4ee5\u901a\u8fc7\u5f02\u6b65\u8865\u507f\u4efb\u52a1\u6765\u5904\u7406\u5931\u8d25\u7684\u66f4\u65b0\uff0c\u6216\u8005\u77ed\u671f\u7684\u6570\u636e\u4e0d\u4e00\u81f4\u4e0d\u4f1a\u5f71\u54cd\u4e1a\u52a1\uff0c\u90a3\u4e48\u53ea\u8981\u4e0b\u6b21\u66f4\u65b0\u65f6\u53ef\u4ee5\u6210\u529f\uff0c\u80fd\u4fdd\u8bc1\u6700\u7ec8\u4e00\u81f4\u6027\u5c31\u53ef\u4ee5\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_47","title":"\u7f13\u5b58\u7a7f\u900f","text":"<p>\u7f13\u5b58\u7a7f\u900f\u3002\u4ea7\u751f\u8fd9\u4e2a\u95ee\u9898\u7684\u539f\u56e0\u53ef\u80fd\u662f\u5916\u90e8\u7684\u6076\u610f\u653b\u51fb\uff0c\u4f8b\u5982\uff0c\u5bf9\u7528\u6237\u4fe1\u606f\u8fdb\u884c\u4e86\u7f13\u5b58\uff0c\u4f46\u6076\u610f\u653b\u51fb\u8005\u4f7f\u7528\u4e0d\u5b58\u5728\u7684\u7528\u6237id\u9891\u7e41\u8bf7\u6c42\u63a5\u53e3\uff0c\u5bfc\u81f4\u67e5\u8be2\u7f13\u5b58\u4e0d\u547d\u4e2d\uff0c\u7136\u540e\u7a7f\u900f DB \u67e5\u8be2\u4f9d\u7136\u4e0d\u547d\u4e2d\u3002\u8fd9\u65f6\u4f1a\u6709\u5927\u91cf\u8bf7\u6c42\u7a7f\u900f\u7f13\u5b58\u8bbf\u95ee\u5230 DB\u3002</p> <p>\u89e3\u51b3\u7684\u529e\u6cd5\u5982\u4e0b\u3002</p> <ol> <li>\u5bf9\u4e0d\u5b58\u5728\u7684\u7528\u6237\uff0c\u5728\u7f13\u5b58\u4e2d\u4fdd\u5b58\u4e00\u4e2a\u7a7a\u5bf9\u8c61\u8fdb\u884c\u6807\u8bb0\uff0c\u9632\u6b62\u76f8\u540c ID \u518d\u6b21\u8bbf\u95ee DB\u3002\u4e0d\u8fc7\u6709\u65f6\u8fd9\u4e2a\u65b9\u6cd5\u5e76\u4e0d\u80fd\u5f88\u597d\u89e3\u51b3\u95ee\u9898\uff0c\u53ef\u80fd\u5bfc\u81f4\u7f13\u5b58\u4e2d\u5b58\u50a8\u5927\u91cf\u65e0\u7528\u6570\u636e\u3002</li> <li>\u4f7f\u7528 BloomFilter \u8fc7\u6ee4\u5668\uff0cBloomFilter \u7684\u7279\u70b9\u662f\u5b58\u5728\u6027\u68c0\u6d4b\uff0c\u5982\u679c BloomFilter \u4e2d\u4e0d\u5b58\u5728\uff0c\u90a3\u4e48\u6570\u636e\u4e00\u5b9a\u4e0d\u5b58\u5728\uff1b\u5982\u679c BloomFilter \u4e2d\u5b58\u5728\uff0c\u5b9e\u9645\u6570\u636e\u4e5f\u6709\u53ef\u80fd\u4f1a\u4e0d\u5b58\u5728\u3002\u975e\u5e38\u9002\u5408\u89e3\u51b3\u8fd9\u7c7b\u7684\u95ee\u9898\u3002</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_48","title":"\u7f13\u5b58\u51fb\u7a7f","text":"<p>\u7f13\u5b58\u51fb\u7a7f\uff0c\u5c31\u662f\u67d0\u4e2a\u70ed\u70b9\u6570\u636e\u5931\u6548\u65f6\uff0c\u5927\u91cf\u9488\u5bf9\u8fd9\u4e2a\u6570\u636e\u7684\u8bf7\u6c42\u4f1a\u7a7f\u900f\u5230\u6570\u636e\u6e90\u3002</p> <p>\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u6709\u5982\u4e0b\u529e\u6cd5\u3002</p> <ol> <li>\u53ef\u4ee5\u4f7f\u7528\u4e92\u65a5\u9501\u66f4\u65b0\uff0c\u4fdd\u8bc1\u540c\u4e00\u4e2a\u8fdb\u7a0b\u4e2d\u9488\u5bf9\u540c\u4e00\u4e2a\u6570\u636e\u4e0d\u4f1a\u5e76\u53d1\u8bf7\u6c42\u5230 DB\uff0c\u51cf\u5c0f DB \u538b\u529b\u3002</li> <li>\u4f7f\u7528\u968f\u673a\u9000\u907f\u65b9\u5f0f\uff0c\u5931\u6548\u65f6\u968f\u673a sleep \u4e00\u4e2a\u5f88\u77ed\u7684\u65f6\u95f4\uff0c\u518d\u6b21\u67e5\u8be2\uff0c\u5982\u679c\u5931\u8d25\u518d\u6267\u884c\u66f4\u65b0\u3002</li> <li>\u9488\u5bf9\u591a\u4e2a\u70ed\u70b9 key \u540c\u65f6\u5931\u6548\u7684\u95ee\u9898\uff0c\u53ef\u4ee5\u5728\u7f13\u5b58\u65f6\u4f7f\u7528\u56fa\u5b9a\u65f6\u95f4\u52a0\u4e0a\u4e00\u4e2a\u5c0f\u7684\u968f\u673a\u6570\uff0c\u907f\u514d\u5927\u91cf\u70ed\u70b9 key \u540c\u4e00\u65f6\u523b\u5931\u6548\u3002</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/Redis%E9%9D%A2%E8%AF%95%E9%A2%98/#_49","title":"\u7f13\u5b58\u96ea\u5d29","text":"<p>\u7f13\u5b58\u96ea\u5d29\uff0c\u4ea7\u751f\u7684\u539f\u56e0\u662f\u7f13\u5b58\u6302\u6389\uff0c\u8fd9\u65f6\u6240\u6709\u7684\u8bf7\u6c42\u90fd\u4f1a\u7a7f\u900f\u5230 DB\u3002</p> <p>\u89e3\u51b3\u65b9\u6cd5\uff1a</p> <ol> <li>\u4f7f\u7528\u5feb\u901f\u5931\u8d25\u7684\u7194\u65ad\u7b56\u7565\uff0c\u51cf\u5c11 DB \u77ac\u95f4\u538b\u529b\uff1b</li> <li>\u4f7f\u7528\u4e3b\u4ece\u6a21\u5f0f\u548c\u96c6\u7fa4\u6a21\u5f0f\u6765\u5c3d\u91cf\u4fdd\u8bc1\u7f13\u5b58\u670d\u52a1\u7684\u9ad8\u53ef\u7528\u3002</li> </ol> <p>\u5b9e\u9645\u573a\u666f\u4e2d\uff0c\u8fd9\u4e24\u79cd\u65b9\u6cd5\u4f1a\u7ed3\u5408\u4f7f\u7528\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/","title":"SpringBoot\u9762\u8bd5\u9898","text":"<p>\u76ee\u5f55</p> <p>\u6982\u8ff0</p> <p>\u4ec0\u4e48\u662f Spring Boot\uff1f</p> <p>Spring Boot \u6709\u54ea\u4e9b\u4f18\u70b9\uff1f</p> <p>Spring Boot \u7684\u6838\u5fc3\u6ce8\u89e3\u662f\u54ea\u4e2a\uff1f\u5b83\u4e3b\u8981\u7531\u54ea\u51e0\u4e2a\u6ce8\u89e3\u7ec4\u6210\u7684\uff1f</p> <p>\u914d\u7f6e</p> <p>\u4ec0\u4e48\u662f JavaConfig\uff1f</p> <p>Spring Boot \u81ea\u52a8\u914d\u7f6e\u539f\u7406\u662f\u4ec0\u4e48\uff1f</p> <p>\u4f60\u5982\u4f55\u7406\u89e3 Spring Boot \u914d\u7f6e\u52a0\u8f7d\u987a\u5e8f\uff1f</p> <p>\u4ec0\u4e48\u662f YAML\uff1f</p> <p>YAML \u914d\u7f6e\u7684\u4f18\u52bf\u5728\u54ea\u91cc ?</p> <p>Spring Boot \u662f\u5426\u53ef\u4ee5\u4f7f\u7528 XML \u914d\u7f6e ?</p> <p>spring boot \u6838\u5fc3\u914d\u7f6e\u6587\u4ef6\u662f\u4ec0\u4e48\uff1fbootstrap.properties \u548c application.properties \u6709\u4f55\u533a\u522b ?</p> <p>\u4ec0\u4e48\u662f Spring Profiles\uff1f</p> <p>\u5982\u4f55\u5728\u81ea\u5b9a\u4e49\u7aef\u53e3\u4e0a\u8fd0\u884c Spring Boot \u5e94\u7528\u7a0b\u5e8f\uff1f</p> <p>\u5b89\u5168</p> <p>\u5982\u4f55\u5b9e\u73b0 Spring Boot \u5e94\u7528\u7a0b\u5e8f\u7684\u5b89\u5168\u6027\uff1f</p> <p>\u6bd4\u8f83\u4e00\u4e0b Spring Security \u548c Shiro \u5404\u81ea\u7684\u4f18\u7f3a\u70b9 ?</p> <p>Spring Boot \u4e2d\u5982\u4f55\u89e3\u51b3\u8de8\u57df\u95ee\u9898 ?</p> <p>\u4ec0\u4e48\u662f CSRF \u653b\u51fb\uff1f</p> <p>\u76d1\u89c6\u5668</p> <p>Spring Boot \u4e2d\u7684\u76d1\u89c6\u5668\u662f\u4ec0\u4e48\uff1f</p> <p>\u5982\u4f55\u5728 Spring Boot \u4e2d\u7981\u7528 Actuator \u7aef\u70b9\u5b89\u5168\u6027\uff1f</p> <p>\u6211\u4eec\u5982\u4f55\u76d1\u89c6\u6240\u6709 Spring Boot \u5fae\u670d\u52a1\uff1f</p> <p>\u6574\u5408\u7b2c\u4e09\u65b9\u9879\u76ee</p> <p>\u4ec0\u4e48\u662f WebSockets\uff1f</p> <p>\u4ec0\u4e48\u662f Spring Data ?</p> <p>\u4ec0\u4e48\u662f Spring Batch\uff1f</p> <p>\u4ec0\u4e48\u662f FreeMarker \u6a21\u677f\uff1f</p> <p>\u5982\u4f55\u96c6\u6210 Spring Boot \u548c ActiveMQ\uff1f</p> <p>\u4ec0\u4e48\u662f Apache Kafka\uff1f</p> <p>\u4ec0\u4e48\u662f Swagger\uff1f\u4f60\u7528 Spring Boot \u5b9e\u73b0\u4e86\u5b83\u5417\uff1f</p> <p>\u524d\u540e\u7aef\u5206\u79bb\uff0c\u5982\u4f55\u7ef4\u62a4\u63a5\u53e3\u6587\u6863 ?</p> <p>\u5176\u4ed6</p> <p>\u5982\u4f55\u91cd\u65b0\u52a0\u8f7d Spring Boot \u4e0a\u7684\u66f4\u6539\uff0c\u800c\u65e0\u9700\u91cd\u65b0\u542f\u52a8\u670d\u52a1\u5668\uff1fSpring Boot\u9879\u76ee\u5982\u4f55\u70ed\u90e8\u7f72\uff1f</p> <p>\u60a8\u4f7f\u7528\u4e86\u54ea\u4e9b starter maven \u4f9d\u8d56\u9879\uff1f</p> <p>Spring Boot \u4e2d\u7684 starter \u5230\u5e95\u662f\u4ec0\u4e48 ?</p> <p>spring-boot-starter-parent \u6709\u4ec0\u4e48\u7528 ?</p> <p>Spring Boot \u6253\u6210\u7684 jar \u548c\u666e\u901a\u7684 jar \u6709\u4ec0\u4e48\u533a\u522b ?</p> <p>\u8fd0\u884c Spring Boot \u6709\u54ea\u51e0\u79cd\u65b9\u5f0f\uff1f</p> <p>Spring Boot \u9700\u8981\u72ec\u7acb\u7684\u5bb9\u5668\u8fd0\u884c\u5417\uff1f</p> <p>\u5f00\u542f Spring Boot \u7279\u6027\u6709\u54ea\u51e0\u79cd\u65b9\u5f0f\uff1f</p> <p>\u5982\u4f55\u4f7f\u7528 Spring Boot \u5b9e\u73b0\u5f02\u5e38\u5904\u7406\uff1f</p> <p>\u5982\u4f55\u4f7f\u7528 Spring Boot \u5b9e\u73b0\u5206\u9875\u548c\u6392\u5e8f\uff1f</p> <p>\u5fae\u670d\u52a1\u4e2d\u5982\u4f55\u5b9e\u73b0 session \u5171\u4eab ?</p> <p>Spring Boot \u4e2d\u5982\u4f55\u5b9e\u73b0\u5b9a\u65f6\u4efb\u52a1 ?</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#_1","title":"\u6982\u8ff0","text":""},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot","title":"\u4ec0\u4e48\u662f Spring Boot\uff1f","text":"<p>Spring Boot \u662f Spring \u5f00\u6e90\u7ec4\u7ec7\u4e0b\u7684\u5b50\u9879\u76ee\uff0c\u662f Spring \u7ec4\u4ef6\u4e00\u7ad9\u5f0f\u89e3\u51b3\u65b9\u6848\uff0c\u4e3b\u8981\u662f\u7b80\u5316\u4e86\u4f7f\u7528 Spring \u7684\u96be\u5ea6\uff0c\u7b80\u7701\u4e86\u7e41\u91cd\u7684\u914d\u7f6e\uff0c\u63d0\u4f9b\u4e86\u5404\u79cd\u542f\u52a8\u5668\uff0c\u5f00\u53d1\u8005\u80fd\u5feb\u901f\u4e0a\u624b\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot_1","title":"Spring Boot \u6709\u54ea\u4e9b\u4f18\u70b9\uff1f","text":"<p>Spring Boot \u4e3b\u8981\u6709\u5982\u4e0b\u4f18\u70b9\uff1a</p> <ol> <li>\u5bb9\u6613\u4e0a\u624b\uff0c\u63d0\u5347\u5f00\u53d1\u6548\u7387\uff0c\u4e3a Spring \u5f00\u53d1\u63d0\u4f9b\u4e00\u4e2a\u66f4\u5feb\u3001\u66f4\u5e7f\u6cdb\u7684\u5165\u95e8\u4f53\u9a8c\u3002</li> <li>\u5f00\u7bb1\u5373\u7528\uff0c\u8fdc\u79bb\u7e41\u7410\u7684\u914d\u7f6e\u3002</li> <li>\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u5927\u578b\u9879\u76ee\u901a\u7528\u7684\u975e\u4e1a\u52a1\u6027\u529f\u80fd\uff0c\u4f8b\u5982\uff1a\u5185\u5d4c\u670d\u52a1\u5668\u3001\u5b89\u5168\u7ba1\u7406\u3001\u8fd0\u884c\u6570\u636e\u76d1\u63a7\u3001\u8fd0\u884c\u72b6\u51b5\u68c0\u67e5\u548c\u5916\u90e8\u5316\u914d\u7f6e\u7b49\u3002</li> <li>\u6ca1\u6709\u4ee3\u7801\u751f\u6210\uff0c\u4e5f\u4e0d\u9700\u8981XML\u914d\u7f6e\u3002</li> <li>\u907f\u514d\u5927\u91cf\u7684 Maven \u5bfc\u5165\u548c\u5404\u79cd\u7248\u672c\u51b2\u7a81\u3002</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot_2","title":"Spring Boot \u7684\u6838\u5fc3\u6ce8\u89e3\u662f\u54ea\u4e2a\uff1f\u5b83\u4e3b\u8981\u7531\u54ea\u51e0\u4e2a\u6ce8\u89e3\u7ec4\u6210\u7684\uff1f","text":"<p>\u542f\u52a8\u7c7b\u4e0a\u9762\u7684\u6ce8\u89e3\u662f@SpringBootApplication\uff0c\u5b83\u4e5f\u662f Spring Boot \u7684\u6838\u5fc3\u6ce8\u89e3\uff0c\u4e3b\u8981\u7ec4\u5408\u5305\u542b\u4e86\u4ee5\u4e0b 3 \u4e2a\u6ce8\u89e3\uff1a</p> <p>@SpringBootConfiguration\uff1a\u7ec4\u5408\u4e86 @Configuration \u6ce8\u89e3\uff0c\u5b9e\u73b0\u914d\u7f6e\u6587\u4ef6\u7684\u529f\u80fd\u3002</p> <p>@EnableAutoConfiguration\uff1a\u6253\u5f00\u81ea\u52a8\u914d\u7f6e\u7684\u529f\u80fd\uff0c\u4e5f\u53ef\u4ee5\u5173\u95ed\u67d0\u4e2a\u81ea\u52a8\u914d\u7f6e\u7684\u9009\u9879\uff0c\u5982\u5173\u95ed\u6570\u636e\u6e90\u81ea\u52a8\u914d\u7f6e\u529f\u80fd\uff1a @SpringBootApplication(exclude = { DataSourceAutoConfiguration.class })\u3002</p> <p>@ComponentScan\uff1aSpring\u7ec4\u4ef6\u626b\u63cf\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#_2","title":"\u914d\u7f6e","text":""},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#javaconfig","title":"\u4ec0\u4e48\u662f JavaConfig\uff1f","text":"<p>Spring JavaConfig \u662f Spring \u793e\u533a\u7684\u4ea7\u54c1\uff0c\u5b83\u63d0\u4f9b\u4e86\u914d\u7f6e Spring IoC \u5bb9\u5668\u7684\u7eafJava \u65b9\u6cd5\u3002\u56e0\u6b64\u5b83\u6709\u52a9\u4e8e\u907f\u514d\u4f7f\u7528 XML \u914d\u7f6e\u3002\u4f7f\u7528 JavaConfig \u7684\u4f18\u70b9\u5728\u4e8e\uff1a</p> <p>\uff081\uff09\u9762\u5411\u5bf9\u8c61\u7684\u914d\u7f6e\u3002\u7531\u4e8e\u914d\u7f6e\u88ab\u5b9a\u4e49\u4e3a JavaConfig \u4e2d\u7684\u7c7b\uff0c\u56e0\u6b64\u7528\u6237\u53ef\u4ee5\u5145\u5206\u5229\u7528 Java \u4e2d\u7684\u9762\u5411\u5bf9\u8c61\u529f\u80fd\u3002\u4e00\u4e2a\u914d\u7f6e\u7c7b\u53ef\u4ee5\u7ee7\u627f\u53e6\u4e00\u4e2a\uff0c\u91cd\u5199\u5b83\u7684@Bean \u65b9\u6cd5\u7b49\u3002</p> <p>\uff082\uff09\u51cf\u5c11\u6216\u6d88\u9664 XML \u914d\u7f6e\u3002\u57fa\u4e8e\u4f9d\u8d56\u6ce8\u5165\u539f\u5219\u7684\u5916\u5316\u914d\u7f6e\u7684\u597d\u5904\u5df2\u88ab\u8bc1\u660e\u3002\u4f46\u662f\uff0c\u8bb8\u591a\u5f00\u53d1\u4eba\u5458\u4e0d\u5e0c\u671b\u5728 XML \u548c Java \u4e4b\u95f4\u6765\u56de\u5207\u6362\u3002JavaConfig \u4e3a\u5f00\u53d1\u4eba\u5458\u63d0\u4f9b\u4e86\u4e00\u79cd\u7eaf Java \u65b9\u6cd5\u6765\u914d\u7f6e\u4e0e XML \u914d\u7f6e\u6982\u5ff5\u76f8\u4f3c\u7684 Spring \u5bb9\u5668\u3002\u4ece\u6280\u672f\u89d2\u5ea6\u6765\u8bb2\uff0c\u53ea\u4f7f\u7528 JavaConfig \u914d\u7f6e\u7c7b\u6765\u914d\u7f6e\u5bb9\u5668\u662f\u53ef\u884c\u7684\uff0c\u4f46\u5b9e\u9645\u4e0a\u5f88\u591a\u4eba\u8ba4\u4e3a\u5c06JavaConfig \u4e0e XML \u6df7\u5408\u5339\u914d\u662f\u7406\u60f3\u7684\u3002</p> <p>\uff083\uff09\u7c7b\u578b\u5b89\u5168\u548c\u91cd\u6784\u53cb\u597d\u3002JavaConfig \u63d0\u4f9b\u4e86\u4e00\u79cd\u7c7b\u578b\u5b89\u5168\u7684\u65b9\u6cd5\u6765\u914d\u7f6e Spring\u5bb9\u5668\u3002\u7531\u4e8e Java 5.0 \u5bf9\u6cdb\u578b\u7684\u652f\u6301\uff0c\u73b0\u5728\u53ef\u4ee5\u6309\u7c7b\u578b\u800c\u4e0d\u662f\u6309\u540d\u79f0\u68c0\u7d22 bean\uff0c\u4e0d\u9700\u8981\u4efb\u4f55\u5f3a\u5236\u8f6c\u6362\u6216\u57fa\u4e8e\u5b57\u7b26\u4e32\u7684\u67e5\u627e\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot_3","title":"Spring Boot \u81ea\u52a8\u914d\u7f6e\u539f\u7406\u662f\u4ec0\u4e48\uff1f","text":"<p>\u6ce8\u89e3 @EnableAutoConfiguration, @Configuration, @ConditionalOnClass \u5c31\u662f\u81ea\u52a8\u914d\u7f6e\u7684\u6838\u5fc3\uff0c</p> <p>@EnableAutoConfiguration \u7ed9\u5bb9\u5668\u5bfc\u5165META-INF/spring.factories \u91cc\u5b9a\u4e49\u7684\u81ea\u52a8\u914d\u7f6e\u7c7b\u3002</p> <p>\u7b5b\u9009\u6709\u6548\u7684\u81ea\u52a8\u914d\u7f6e\u7c7b\u3002</p> <p>\u6bcf\u4e00\u4e2a\u81ea\u52a8\u914d\u7f6e\u7c7b\u7ed3\u5408\u5bf9\u5e94\u7684 xxxProperties.java \u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6\u8fdb\u884c\u81ea\u52a8\u914d\u7f6e\u529f\u80fd</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot_4","title":"\u4f60\u5982\u4f55\u7406\u89e3 Spring Boot \u914d\u7f6e\u52a0\u8f7d\u987a\u5e8f\uff1f","text":"<p>\u5728 Spring Boot \u91cc\u9762\uff0c\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u51e0\u79cd\u65b9\u5f0f\u6765\u52a0\u8f7d\u914d\u7f6e\u3002</p> <p>1\uff09properties\u6587\u4ef6\uff1b</p> <p>2\uff09YAML\u6587\u4ef6\uff1b</p> <p>3\uff09\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\uff1b</p> <p>4\uff09\u547d\u4ee4\u884c\u53c2\u6570\uff1b</p> <p>\u7b49\u7b49\u2026\u2026</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#yaml","title":"\u4ec0\u4e48\u662f YAML\uff1f","text":"<p>YAML \u662f\u4e00\u79cd\u4eba\u7c7b\u53ef\u8bfb\u7684\u6570\u636e\u5e8f\u5217\u5316\u8bed\u8a00\u3002\u5b83\u901a\u5e38\u7528\u4e8e\u914d\u7f6e\u6587\u4ef6\u3002\u4e0e\u5c5e\u6027\u6587\u4ef6\u76f8\u6bd4\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8981\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6dfb\u52a0\u590d\u6742\u7684\u5c5e\u6027\uff0cYAML \u6587\u4ef6\u5c31\u66f4\u52a0\u7ed3\u6784\u5316\uff0c\u800c\u4e14\u66f4\u5c11\u6df7\u6dc6\u3002\u53ef\u4ee5\u770b\u51fa YAML \u5177\u6709\u5206\u5c42\u914d\u7f6e\u6570\u636e\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#yaml_1","title":"YAML \u914d\u7f6e\u7684\u4f18\u52bf\u5728\u54ea\u91cc ?","text":"<p>YAML \u73b0\u5728\u53ef\u4ee5\u7b97\u662f\u975e\u5e38\u6d41\u884c\u7684\u4e00\u79cd\u914d\u7f6e\u6587\u4ef6\u683c\u5f0f\u4e86\uff0c\u65e0\u8bba\u662f\u524d\u7aef\u8fd8\u662f\u540e\u7aef\uff0c\u90fd\u53ef\u4ee5\u89c1\u5230 YAML \u914d\u7f6e\u3002\u90a3\u4e48 YAML \u914d\u7f6e\u548c\u4f20\u7edf\u7684 properties \u914d\u7f6e\u76f8\u6bd4\u5230\u5e95\u6709\u54ea\u4e9b\u4f18\u52bf\u5462\uff1f</p> <ol> <li>\u914d\u7f6e\u6709\u5e8f\uff0c\u5728\u4e00\u4e9b\u7279\u6b8a\u7684\u573a\u666f\u4e0b\uff0c\u914d\u7f6e\u6709\u5e8f\u5f88\u5173\u952e</li> <li>\u652f\u6301\u6570\u7ec4\uff0c\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u53ef\u4ee5\u662f\u57fa\u672c\u6570\u636e\u7c7b\u578b\u4e5f\u53ef\u4ee5\u662f\u5bf9\u8c61</li> <li>\u7b80\u6d01</li> </ol> <p>\u76f8\u6bd4 properties \u914d\u7f6e\u6587\u4ef6\uff0cYAML \u8fd8\u6709\u4e00\u4e2a\u7f3a\u70b9\uff0c\u5c31\u662f\u4e0d\u652f\u6301 @PropertySource \u6ce8\u89e3\u5bfc\u5165\u81ea\u5b9a\u4e49\u7684 YAML \u914d\u7f6e\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot-xml","title":"Spring Boot \u662f\u5426\u53ef\u4ee5\u4f7f\u7528 XML \u914d\u7f6e ?","text":"<p>Spring Boot \u63a8\u8350\u4f7f\u7528 Java \u914d\u7f6e\u800c\u975e XML \u914d\u7f6e\uff0c\u4f46\u662f Spring Boot \u4e2d\u4e5f\u53ef\u4ee5\u4f7f\u7528 XML \u914d\u7f6e\uff0c\u901a\u8fc7 @ImportResource \u6ce8\u89e3\u53ef\u4ee5\u5f15\u5165\u4e00\u4e2a XML \u914d\u7f6e\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot-bootstrapproperties-applicationproperties","title":"spring boot \u6838\u5fc3\u914d\u7f6e\u6587\u4ef6\u662f\u4ec0\u4e48\uff1fbootstrap.properties \u548c application.properties \u6709\u4f55\u533a\u522b ?","text":"<p>\u5355\u7eaf\u505a Spring Boot \u5f00\u53d1\uff0c\u53ef\u80fd\u4e0d\u592a\u5bb9\u6613\u9047\u5230 bootstrap.properties \u914d\u7f6e\u6587\u4ef6\uff0c\u4f46\u662f\u5728\u7ed3\u5408 Spring Cloud \u65f6\uff0c\u8fd9\u4e2a\u914d\u7f6e\u5c31\u4f1a\u7ecf\u5e38\u9047\u5230\u4e86\uff0c\u7279\u522b\u662f\u5728\u9700\u8981\u52a0\u8f7d\u4e00\u4e9b\u8fdc\u7a0b\u914d\u7f6e\u6587\u4ef6\u7684\u65f6\u4faf\u3002</p> <p>spring boot \u6838\u5fc3\u7684\u4e24\u4e2a\u914d\u7f6e\u6587\u4ef6\uff1a</p> <ul> <li>bootstrap (. yml \u6216\u8005 . properties)\uff1aboostrap \u7531\u7236 ApplicationContext \u52a0\u8f7d\u7684\uff0c\u6bd4 applicaton \u4f18\u5148\u52a0\u8f7d\uff0c\u914d\u7f6e\u5728\u5e94\u7528\u7a0b\u5e8f\u4e0a\u4e0b\u6587\u7684\u5f15\u5bfc\u9636\u6bb5\u751f\u6548\u3002\u4e00\u822c\u6765\u8bf4\u6211\u4eec\u5728 Spring Cloud Config \u6216\u8005 Nacos \u4e2d\u4f1a\u7528\u5230\u5b83\u3002\u4e14 boostrap \u91cc\u9762\u7684\u5c5e\u6027\u4e0d\u80fd\u88ab\u8986\u76d6\uff1b</li> <li>application (. yml \u6216\u8005 . properties)\uff1a \u7531ApplicatonContext \u52a0\u8f7d\uff0c\u7528\u4e8e spring boot \u9879\u76ee\u7684\u81ea\u52a8\u5316\u914d\u7f6e\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-profiles","title":"\u4ec0\u4e48\u662f Spring Profiles\uff1f","text":"<p>Spring Profiles \u5141\u8bb8\u7528\u6237\u6839\u636e\u914d\u7f6e\u6587\u4ef6\uff08dev\uff0ctest\uff0cprod \u7b49\uff09\u6765\u6ce8\u518c bean\u3002\u56e0\u6b64\uff0c\u5f53\u5e94\u7528\u7a0b\u5e8f\u5728\u5f00\u53d1\u4e2d\u8fd0\u884c\u65f6\uff0c\u53ea\u6709\u67d0\u4e9b bean \u53ef\u4ee5\u52a0\u8f7d\uff0c\u800c\u5728 PRODUCTION\u4e2d\uff0c\u67d0\u4e9b\u5176\u4ed6 bean \u53ef\u4ee5\u52a0\u8f7d\u3002\u5047\u8bbe\u6211\u4eec\u7684\u8981\u6c42\u662f Swagger \u6587\u6863\u4ec5\u9002\u7528\u4e8e QA \u73af\u5883\uff0c\u5e76\u4e14\u7981\u7528\u6240\u6709\u5176\u4ed6\u6587\u6863\u3002\u8fd9\u53ef\u4ee5\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u6765\u5b8c\u6210\u3002Spring Boot \u4f7f\u5f97\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u975e\u5e38\u7b80\u5355\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot_5","title":"\u5982\u4f55\u5728\u81ea\u5b9a\u4e49\u7aef\u53e3\u4e0a\u8fd0\u884c Spring Boot \u5e94\u7528\u7a0b\u5e8f\uff1f","text":"<p>\u4e3a\u4e86\u5728\u81ea\u5b9a\u4e49\u7aef\u53e3\u4e0a\u8fd0\u884c Spring Boot \u5e94\u7528\u7a0b\u5e8f\uff0c\u60a8\u53ef\u4ee5\u5728application.properties \u4e2d\u6307\u5b9a\u7aef\u53e3\u3002server.port = 8090</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#_3","title":"\u5b89\u5168","text":""},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot_6","title":"\u5982\u4f55\u5b9e\u73b0 Spring Boot \u5e94\u7528\u7a0b\u5e8f\u7684\u5b89\u5168\u6027\uff1f","text":"<p>\u4e3a\u4e86\u5b9e\u73b0 Spring Boot \u7684\u5b89\u5168\u6027\uff0c\u6211\u4eec\u4f7f\u7528 spring-boot-starter-security \u4f9d\u8d56\u9879\uff0c\u5e76\u4e14\u5fc5\u987b\u6dfb\u52a0\u5b89\u5168\u914d\u7f6e\u3002\u5b83\u53ea\u9700\u8981\u5f88\u5c11\u7684\u4ee3\u7801\u3002\u914d\u7f6e\u7c7b\u5c06\u5fc5\u987b\u6269\u5c55WebSecurityConfigurerAdapter \u5e76\u8986\u76d6\u5176\u65b9\u6cd5\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-security-shiro","title":"\u6bd4\u8f83\u4e00\u4e0b Spring Security \u548c Shiro \u5404\u81ea\u7684\u4f18\u7f3a\u70b9 ?","text":"<p>\u7531\u4e8e Spring Boot \u5b98\u65b9\u63d0\u4f9b\u4e86\u5927\u91cf\u7684\u975e\u5e38\u65b9\u4fbf\u7684\u5f00\u7bb1\u5373\u7528\u7684 Starter \uff0c\u5305\u62ec Spring Security \u7684 Starter \uff0c\u4f7f\u5f97\u5728 Spring Boot \u4e2d\u4f7f\u7528 Spring Security \u53d8\u5f97\u66f4\u52a0\u5bb9\u6613\uff0c\u751a\u81f3\u53ea\u9700\u8981\u6dfb\u52a0\u4e00\u4e2a\u4f9d\u8d56\u5c31\u53ef\u4ee5\u4fdd\u62a4\u6240\u6709\u7684\u63a5\u53e3\uff0c\u6240\u4ee5\uff0c\u5982\u679c\u662f Spring Boot \u9879\u76ee\uff0c\u4e00\u822c\u9009\u62e9 Spring Security \u3002\u5f53\u7136\u8fd9\u53ea\u662f\u4e00\u4e2a\u5efa\u8bae\u7684\u7ec4\u5408\uff0c\u5355\u7eaf\u4ece\u6280\u672f\u4e0a\u6765\u8bf4\uff0c\u65e0\u8bba\u600e\u4e48\u7ec4\u5408\uff0c\u90fd\u662f\u6ca1\u6709\u95ee\u9898\u7684\u3002Shiro \u548c Spring Security \u76f8\u6bd4\uff0c\u4e3b\u8981\u6709\u5982\u4e0b\u4e00\u4e9b\u7279\u70b9\uff1a</p> <ol> <li>Spring Security \u662f\u4e00\u4e2a\u91cd\u91cf\u7ea7\u7684\u5b89\u5168\u7ba1\u7406\u6846\u67b6\uff1bShiro \u5219\u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u7684\u5b89\u5168\u7ba1\u7406\u6846\u67b6</li> <li>Spring Security \u6982\u5ff5\u590d\u6742\uff0c\u914d\u7f6e\u7e41\u7410\uff1bShiro \u6982\u5ff5\u7b80\u5355\u3001\u914d\u7f6e\u7b80\u5355</li> <li>Spring Security \u529f\u80fd\u5f3a\u5927\uff1bShiro \u529f\u80fd\u7b80\u5355</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot_7","title":"Spring Boot \u4e2d\u5982\u4f55\u89e3\u51b3\u8de8\u57df\u95ee\u9898 ?","text":"<p>\u8de8\u57df\u53ef\u4ee5\u5728\u524d\u7aef\u901a\u8fc7 JSONP \u6765\u89e3\u51b3\uff0c\u4f46\u662f JSONP \u53ea\u53ef\u4ee5\u53d1\u9001 GET \u8bf7\u6c42\uff0c\u65e0\u6cd5\u53d1\u9001\u5176\u4ed6\u7c7b\u578b\u7684\u8bf7\u6c42\uff0c\u5728 RESTful \u98ce\u683c\u7684\u5e94\u7528\u4e2d\uff0c\u5c31\u663e\u5f97\u975e\u5e38\u9e21\u808b\uff0c\u56e0\u6b64\u6211\u4eec\u63a8\u8350\u5728\u540e\u7aef\u901a\u8fc7 \uff08CORS\uff0cCross-origin resource sharing\uff09 \u6765\u89e3\u51b3\u8de8\u57df\u95ee\u9898\u3002\u8fd9\u79cd\u89e3\u51b3\u65b9\u6848\u5e76\u975e Spring Boot \u7279\u6709\u7684\uff0c\u5728\u4f20\u7edf\u7684 SSM \u6846\u67b6\u4e2d\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7 CORS \u6765\u89e3\u51b3\u8de8\u57df\u95ee\u9898\uff0c\u53ea\u4e0d\u8fc7\u4e4b\u524d\u6211\u4eec\u662f\u5728 XML \u6587\u4ef6\u4e2d\u914d\u7f6e CORS \uff0c\u73b0\u5728\u53ef\u4ee5\u901a\u8fc7\u5b9e\u73b0WebMvcConfigurer\u63a5\u53e3\u7136\u540e\u91cd\u5199addCorsMappings\u65b9\u6cd5\u89e3\u51b3\u8de8\u57df\u95ee\u9898\u3002</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>@Configuration \npublic class CorsConfig implements WebMvcConfigurer { \n  @Override \n  public void addCorsMappings(CorsRegistry registry) { \n    registry\n      .addMapping(\"/**\") \n      .allowedOrigins(\"*\") \n      .allowCredentials(true) \n      .allowedMethods(\"GET\", \"POST\", \"PUT\", \"DELETE\", \"OPTIONS\")\n      .maxAge(3600); \n  } \n}\n</code></pre> <p>\u9879\u76ee\u4e2d\u524d\u540e\u7aef\u5206\u79bb\u90e8\u7f72\uff0c\u6240\u4ee5\u9700\u8981\u89e3\u51b3\u8de8\u57df\u7684\u95ee\u9898\u3002 \u6211\u4eec\u4f7f\u7528cookie\u5b58\u653e\u7528\u6237\u767b\u5f55\u7684\u4fe1\u606f\uff0c\u5728spring\u62e6\u622a\u5668\u8fdb\u884c\u6743\u9650\u63a7\u5236\uff0c\u5f53\u6743\u9650\u4e0d\u7b26\u5408\u65f6\uff0c\u76f4\u63a5\u8fd4\u56de\u7ed9\u7528\u6237\u56fa\u5b9a\u7684json\u7ed3\u679c\u3002 \u5f53\u7528\u6237\u767b\u5f55\u4ee5\u540e\uff0c\u6b63\u5e38\u4f7f\u7528\uff1b\u5f53\u7528\u6237\u9000\u51fa\u767b\u5f55\u72b6\u6001\u65f6\u6216\u8005token\u8fc7\u671f\u65f6\uff0c\u7531\u4e8e\u62e6\u622a\u5668\u548c\u8de8\u57df\u7684\u987a\u5e8f\u6709\u95ee\u9898\uff0c\u51fa\u73b0\u4e86\u8de8\u57df\u7684\u73b0\u8c61\u3002 \u6211\u4eec\u77e5\u9053\u4e00\u4e2ahttp\u8bf7\u6c42\uff0c\u5148\u8d70filter\uff0c\u5230\u8fbeservlet\u540e\u624d\u8fdb\u884c\u62e6\u622a\u5668\u7684\u5904\u7406\uff0c\u5982\u679c\u6211\u4eec\u628acors\u653e\u5728filter\u91cc\uff0c\u5c31\u53ef\u4ee5\u4f18\u5148\u4e8e\u6743\u9650\u62e6\u622a\u5668\u6267\u884c\u3002</p> <p>\u4ee3\u7801\u5757</p> <p>Java</p> <pre><code>@Configuration \npublic class CorsConfig {\n  @Bean \n  public CorsFilter corsFilter() { \n    CorsConfiguration corsConfiguration = new CorsConfiguration(); \n    corsConfiguration.addAllowedOrigin(\"*\"); \n    corsConfiguration.addAllowedHeader(\"*\"); \n    corsConfiguration.addAllowedMethod(\"*\"); \n    corsConfiguration.setAllowCredentials(true); \n    UrlBasedCorsConfigurationSource urlBasedCorsConfigurationSource = new UrlBasedCorsConfigurationSource(); \n    urlBasedCorsConfigurationSource.registerCorsConfiguration(\"/**\", corsConfiguration); \n    return new CorsFilter(urlBasedCorsConfigurationSource); \n  } \n}\n</code></pre>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#csrf","title":"\u4ec0\u4e48\u662f CSRF \u653b\u51fb\uff1f","text":"<p>CSRF \u4ee3\u8868\u8de8\u7ad9\u8bf7\u6c42\u4f2a\u9020\u3002\u8fd9\u662f\u4e00\u79cd\u653b\u51fb\uff0c\u8feb\u4f7f\u6700\u7ec8\u7528\u6237\u5728\u5f53\u524d\u901a\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684Web \u5e94\u7528\u7a0b\u5e8f\u4e0a\u6267\u884c\u4e0d\u9700\u8981\u7684\u64cd\u4f5c\u3002CSRF \u653b\u51fb\u4e13\u95e8\u9488\u5bf9\u72b6\u6001\u6539\u53d8\u8bf7\u6c42\uff0c\u800c\u4e0d\u662f\u6570\u636e\u7a83\u53d6\uff0c\u56e0\u4e3a\u653b\u51fb\u8005\u65e0\u6cd5\u67e5\u770b\u5bf9\u4f2a\u9020\u8bf7\u6c42\u7684\u54cd\u5e94\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#_4","title":"\u76d1\u89c6\u5668","text":""},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot_8","title":"Spring Boot \u4e2d\u7684\u76d1\u89c6\u5668\u662f\u4ec0\u4e48\uff1f","text":"<p>Spring boot actuator \u662f spring \u542f\u52a8\u6846\u67b6\u4e2d\u7684\u91cd\u8981\u529f\u80fd\u4e4b\u4e00\u3002Spring boot \u76d1\u89c6\u5668\u53ef\u5e2e\u52a9\u60a8\u8bbf\u95ee\u751f\u4ea7\u73af\u5883\u4e2d\u6b63\u5728\u8fd0\u884c\u7684\u5e94\u7528\u7a0b\u5e8f\u7684\u5f53\u524d\u72b6\u6001\u3002\u6709\u51e0\u4e2a\u6307\u6807\u5fc5\u987b\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u8fdb\u884c\u68c0\u67e5\u548c\u76d1\u63a7\u3002\u5373\u4f7f\u4e00\u4e9b\u5916\u90e8\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u6b63\u5728\u4f7f\u7528\u8fd9\u4e9b\u670d\u52a1\u6765\u5411\u76f8\u5173\u4eba\u5458\u89e6\u53d1\u8b66\u62a5\u6d88\u606f\u3002\u76d1\u89c6\u5668\u6a21\u5757\u516c\u5f00\u4e86\u4e00\u7ec4\u53ef\u76f4\u63a5\u4f5c\u4e3a HTTP URL \u8bbf\u95ee\u7684REST \u7aef\u70b9\u6765\u68c0\u67e5\u72b6\u6001\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot-actuator","title":"\u5982\u4f55\u5728 Spring Boot \u4e2d\u7981\u7528 Actuator \u7aef\u70b9\u5b89\u5168\u6027\uff1f","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u654f\u611f\u7684 HTTP \u7aef\u70b9\u90fd\u662f\u5b89\u5168\u7684\uff0c\u53ea\u6709\u5177\u6709 ACTUATOR \u89d2\u8272\u7684\u7528\u6237\u624d\u80fd\u8bbf\u95ee\u5b83\u4eec\u3002\u5b89\u5168\u6027\u662f\u4f7f\u7528\u6807\u51c6\u7684 HttpServletRequest.isUserInRole \u65b9\u6cd5\u5b9e\u65bd\u7684\u3002 \u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6765\u7981\u7528\u5b89\u5168\u6027\u3002\u53ea\u6709\u5728\u6267\u884c\u673a\u6784\u7aef\u70b9\u5728\u9632\u706b\u5899\u540e\u8bbf\u95ee\u65f6\uff0c\u624d\u5efa\u8bae\u7981\u7528\u5b89\u5168\u6027\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot_9","title":"\u6211\u4eec\u5982\u4f55\u76d1\u89c6\u6240\u6709 Spring Boot \u5fae\u670d\u52a1\uff1f","text":"<p>Spring Boot \u63d0\u4f9b\u76d1\u89c6\u5668\u7aef\u70b9\u4ee5\u76d1\u63a7\u5404\u4e2a\u5fae\u670d\u52a1\u7684\u5ea6\u91cf\u3002\u8fd9\u4e9b\u7aef\u70b9\u5bf9\u4e8e\u83b7\u53d6\u6709\u5173\u5e94\u7528\u7a0b\u5e8f\u7684\u4fe1\u606f\uff08\u5982\u5b83\u4eec\u662f\u5426\u5df2\u542f\u52a8\uff09\u4ee5\u53ca\u5b83\u4eec\u7684\u7ec4\u4ef6\uff08\u5982\u6570\u636e\u5e93\u7b49\uff09\u662f\u5426\u6b63\u5e38\u8fd0\u884c\u5f88\u6709\u5e2e\u52a9\u3002\u4f46\u662f\uff0c\u4f7f\u7528\u76d1\u89c6\u5668\u7684\u4e00\u4e2a\u4e3b\u8981\u7f3a\u70b9\u6216\u56f0\u96be\u662f\uff0c\u6211\u4eec\u5fc5\u987b\u5355\u72ec\u6253\u5f00\u5e94\u7528\u7a0b\u5e8f\u7684\u77e5\u8bc6\u70b9\u4ee5\u4e86\u89e3\u5176\u72b6\u6001\u6216\u5065\u5eb7\u72b6\u51b5\u3002\u60f3\u8c61\u4e00\u4e0b\u6d89\u53ca 50 \u4e2a\u5e94\u7528\u7a0b\u5e8f\u7684\u5fae\u670d\u52a1\uff0c\u7ba1\u7406\u5458\u5c06\u4e0d\u5f97\u4e0d\u51fb\u4e2d\u6240\u6709 50 \u4e2a\u5e94\u7528\u7a0b\u5e8f\u7684\u6267\u884c\u7ec8\u7aef\u3002\u4e3a\u4e86\u5e2e\u52a9\u6211\u4eec\u5904\u7406\u8fd9\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u4f4d\u4e8e\u7684\u5f00\u6e90\u9879\u76ee\u3002 \u5b83\u5efa\u7acb\u5728 Spring Boot Actuator \u4e4b\u4e0a\uff0c\u5b83\u63d0\u4f9b\u4e86\u4e00\u4e2a Web UI\uff0c\u4f7f\u6211\u4eec\u80fd\u591f\u53ef\u89c6\u5316\u591a\u4e2a\u5e94\u7528\u7a0b\u5e8f\u7684\u5ea6\u91cf\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#_5","title":"\u6574\u5408\u7b2c\u4e09\u65b9\u9879\u76ee","text":""},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#websockets","title":"\u4ec0\u4e48\u662f WebSockets\uff1f","text":"<p>WebSocket \u662f\u4e00\u79cd\u8ba1\u7b97\u673a\u901a\u4fe1\u534f\u8bae\uff0c\u901a\u8fc7\u5355\u4e2a TCP \u8fde\u63a5\u63d0\u4f9b\u5168\u53cc\u5de5\u901a\u4fe1\u4fe1\u9053\u3002</p> <p>1\u3001WebSocket \u662f\u53cc\u5411\u7684 -\u4f7f\u7528 WebSocket \u5ba2\u6237\u7aef\u6216\u670d\u52a1\u5668\u53ef\u4ee5\u53d1\u8d77\u6d88\u606f\u53d1\u9001\u3002</p> <p>2\u3001WebSocket \u662f\u5168\u53cc\u5de5\u7684 -\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u901a\u4fe1\u662f\u76f8\u4e92\u72ec\u7acb\u7684\u3002</p> <p>3\u3001\u5355\u4e2a TCP \u8fde\u63a5 -\u521d\u59cb\u8fde\u63a5\u4f7f\u7528 HTTP\uff0c\u7136\u540e\u5c06\u6b64\u8fde\u63a5\u5347\u7ea7\u5230\u57fa\u4e8e\u5957\u63a5\u5b57\u7684\u8fde\u63a5\u3002\u7136\u540e\u8fd9\u4e2a\u5355\u4e00\u8fde\u63a5\u7528\u4e8e\u6240\u6709\u672a\u6765\u7684\u901a\u4fe1</p> <p>4\u3001Light -\u4e0e http \u76f8\u6bd4\uff0cWebSocket \u6d88\u606f\u6570\u636e\u4ea4\u6362\u8981\u8f7b\u5f97\u591a\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-data","title":"\u4ec0\u4e48\u662f Spring Data ?","text":"<p>Spring Data \u662f Spring \u7684\u4e00\u4e2a\u5b50\u9879\u76ee\u3002\u7528\u4e8e\u7b80\u5316\u6570\u636e\u5e93\u8bbf\u95ee\uff0c\u652f\u6301NoSQL \u548c \u5173\u7cfb\u6570\u636e\u5b58\u50a8\u3002\u5176\u4e3b\u8981\u76ee\u6807\u662f\u4f7f\u6570\u636e\u5e93\u7684\u8bbf\u95ee\u53d8\u5f97\u65b9\u4fbf\u5feb\u6377\u3002Spring Data \u5177\u6709\u5982\u4e0b\u7279\u70b9\uff1a</p> <p>SpringData \u9879\u76ee\u652f\u6301 NoSQL \u5b58\u50a8\uff1a</p> <ol> <li>MongoDB \uff08\u6587\u6863\u6570\u636e\u5e93\uff09</li> <li>Neo4j\uff08\u56fe\u5f62\u6570\u636e\u5e93\uff09</li> <li>Redis\uff08\u952e/\u503c\u5b58\u50a8\uff09</li> <li>Hbase\uff08\u5217\u65cf\u6570\u636e\u5e93\uff09</li> </ol> <p>SpringData \u9879\u76ee\u6240\u652f\u6301\u7684\u5173\u7cfb\u6570\u636e\u5b58\u50a8\u6280\u672f\uff1a</p> <ol> <li>JDBC</li> <li>JPA</li> </ol> <p>Spring Data Jpa \u81f4\u529b\u4e8e\u51cf\u5c11\u6570\u636e\u8bbf\u95ee\u5c42 (DAO) \u7684\u5f00\u53d1\u91cf. \u5f00\u53d1\u8005\u552f\u4e00\u8981\u505a\u7684\uff0c\u5c31\u662f\u58f0\u660e\u6301\u4e45\u5c42\u7684\u63a5\u53e3\uff0c\u5176\u4ed6\u90fd\u4ea4\u7ed9 Spring Data JPA \u6765\u5e2e\u4f60\u5b8c\u6210\uff01Spring Data JPA \u901a\u8fc7\u89c4\u8303\u65b9\u6cd5\u7684\u540d\u5b57\uff0c\u6839\u636e\u7b26\u5408\u89c4\u8303\u7684\u540d\u5b57\u6765\u786e\u5b9a\u65b9\u6cd5\u9700\u8981\u5b9e\u73b0\u4ec0\u4e48\u6837\u7684\u903b\u8f91\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-batch","title":"\u4ec0\u4e48\u662f Spring Batch\uff1f","text":"<p>Spring Boot Batch \u63d0\u4f9b\u53ef\u91cd\u7528\u7684\u51fd\u6570\uff0c\u8fd9\u4e9b\u51fd\u6570\u5728\u5904\u7406\u5927\u91cf\u8bb0\u5f55\u65f6\u975e\u5e38\u91cd\u8981\uff0c\u5305\u62ec\u65e5\u5fd7/\u8ddf\u8e2a\uff0c\u4e8b\u52a1\u7ba1\u7406\uff0c\u4f5c\u4e1a\u5904\u7406\u7edf\u8ba1\u4fe1\u606f\uff0c\u4f5c\u4e1a\u91cd\u65b0\u542f\u52a8\uff0c\u8df3\u8fc7\u548c\u8d44\u6e90\u7ba1\u7406\u3002\u5b83\u8fd8\u63d0\u4f9b\u4e86\u66f4\u5148\u8fdb\u7684\u6280\u672f\u670d\u52a1\u548c\u529f\u80fd\uff0c\u901a\u8fc7\u4f18\u5316\u548c\u5206\u533a\u6280\u672f\uff0c\u53ef\u4ee5\u5b9e\u73b0\u6781\u9ad8\u6279\u91cf\u548c\u9ad8\u6027\u80fd\u6279\u5904\u7406\u4f5c\u4e1a\u3002\u7b80\u5355\u4ee5\u53ca\u590d\u6742\u7684\u5927\u6279\u91cf\u6279\u5904\u7406\u4f5c\u4e1a\u53ef\u4ee5\u9ad8\u5ea6\u53ef\u6269\u5c55\u7684\u65b9\u5f0f\u5229\u7528\u6846\u67b6\u5904\u7406\u91cd\u8981\u5927\u91cf\u7684\u4fe1\u606f\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#freemarker","title":"\u4ec0\u4e48\u662f FreeMarker \u6a21\u677f\uff1f","text":"<p>FreeMarker \u662f\u4e00\u4e2a\u57fa\u4e8e Java \u7684\u6a21\u677f\u5f15\u64ce\uff0c\u6700\u521d\u4e13\u6ce8\u4e8e\u4f7f\u7528 MVC \u8f6f\u4ef6\u67b6\u6784\u8fdb\u884c\u52a8\u6001\u7f51\u9875\u751f\u6210\u3002\u4f7f\u7528 Freemarker \u7684\u4e3b\u8981\u4f18\u70b9\u662f\u8868\u793a\u5c42\u548c\u4e1a\u52a1\u5c42\u7684\u5b8c\u5168\u5206\u79bb\u3002\u7a0b\u5e8f\u5458\u53ef\u4ee5\u5904\u7406\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\uff0c\u800c\u8bbe\u8ba1\u4eba\u5458\u53ef\u4ee5\u5904\u7406 html \u9875\u9762\u8bbe\u8ba1\u3002\u6700\u540e\u4f7f\u7528freemarker \u53ef\u4ee5\u5c06\u8fd9\u4e9b\u7ed3\u5408\u8d77\u6765\uff0c\u7ed9\u51fa\u6700\u7ec8\u7684\u8f93\u51fa\u9875\u9762\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot-activemq","title":"\u5982\u4f55\u96c6\u6210 Spring Boot \u548c ActiveMQ\uff1f","text":"<p>\u5bf9\u4e8e\u96c6\u6210 Spring Boot \u548c ActiveMQ\uff0c\u6211\u4eec\u4f7f\u7528\u4f9d\u8d56\u5173\u7cfb\u3002 \u5b83\u53ea\u9700\u8981\u5f88\u5c11\u7684\u914d\u7f6e\uff0c\u5e76\u4e14\u4e0d\u9700\u8981\u6837\u677f\u4ee3\u7801\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#apache-kafka","title":"\u4ec0\u4e48\u662f Apache Kafka\uff1f","text":"<p>Apache Kafka \u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u53d1\u5e03 - \u8ba2\u9605\u6d88\u606f\u7cfb\u7edf\u3002\u5b83\u662f\u4e00\u4e2a\u53ef\u6269\u5c55\u7684\uff0c\u5bb9\u9519\u7684\u53d1\u5e03 - \u8ba2\u9605\u6d88\u606f\u7cfb\u7edf\uff0c\u5b83\u4f7f\u6211\u4eec\u80fd\u591f\u6784\u5efa\u5206\u5e03\u5f0f\u5e94\u7528\u7a0b\u5e8f\u3002\u8fd9\u662f\u4e00\u4e2a Apache \u9876\u7ea7\u9879\u76ee\u3002Kafka \u9002\u5408\u79bb\u7ebf\u548c\u5728\u7ebf\u6d88\u606f\u6d88\u8d39\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#swagger-spring-boot","title":"\u4ec0\u4e48\u662f Swagger\uff1f\u4f60\u7528 Spring Boot \u5b9e\u73b0\u4e86\u5b83\u5417\uff1f","text":"<p>Swagger \u5e7f\u6cdb\u7528\u4e8e\u53ef\u89c6\u5316 API\uff0c\u4f7f\u7528 Swagger UI \u4e3a\u524d\u7aef\u5f00\u53d1\u4eba\u5458\u63d0\u4f9b\u5728\u7ebf\u6c99\u7bb1\u3002Swagger \u662f\u7528\u4e8e\u751f\u6210 RESTful Web \u670d\u52a1\u7684\u53ef\u89c6\u5316\u8868\u793a\u7684\u5de5\u5177\uff0c\u89c4\u8303\u548c\u5b8c\u6574\u6846\u67b6\u5b9e\u73b0\u3002\u5b83\u4f7f\u6587\u6863\u80fd\u591f\u4ee5\u4e0e\u670d\u52a1\u5668\u76f8\u540c\u7684\u901f\u5ea6\u66f4\u65b0\u3002\u5f53\u901a\u8fc7 Swagger \u6b63\u786e\u5b9a\u4e49\u65f6\uff0c\u6d88\u8d39\u8005\u53ef\u4ee5\u4f7f\u7528\u6700\u5c11\u91cf\u7684\u5b9e\u73b0\u903b\u8f91\u6765\u7406\u89e3\u8fdc\u7a0b\u670d\u52a1\u5e76\u4e0e\u5176\u8fdb\u884c\u4ea4\u4e92\u3002\u56e0\u6b64\uff0cSwagger\u6d88\u9664\u4e86\u8c03\u7528\u670d\u52a1\u65f6\u7684\u731c\u6d4b\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#_6","title":"\u524d\u540e\u7aef\u5206\u79bb\uff0c\u5982\u4f55\u7ef4\u62a4\u63a5\u53e3\u6587\u6863 ?","text":"<p>\u524d\u540e\u7aef\u5206\u79bb\u5f00\u53d1\u65e5\u76ca\u6d41\u884c\uff0c\u5927\u90e8\u5206\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u90fd\u662f\u901a\u8fc7 Spring Boot \u505a\u524d\u540e\u7aef\u5206\u79bb\u5f00\u53d1\uff0c\u524d\u540e\u7aef\u5206\u79bb\u4e00\u5b9a\u4f1a\u6709\u63a5\u53e3\u6587\u6863\uff0c\u4e0d\u7136\u4f1a\u524d\u540e\u7aef\u4f1a\u6df1\u6df1\u9677\u5165\u5230\u626f\u76ae\u4e2d\u3002\u4e00\u4e2a\u6bd4\u8f83\u7b28\u7684\u65b9\u6cd5\u5c31\u662f\u4f7f\u7528 word \u6216\u8005 md \u6765\u7ef4\u62a4\u63a5\u53e3\u6587\u6863\uff0c\u4f46\u662f\u6548\u7387\u592a\u4f4e\uff0c\u63a5\u53e3\u4e00\u53d8\uff0c\u6240\u6709\u4eba\u624b\u4e0a\u7684\u6587\u6863\u90fd\u5f97\u53d8\u3002\u5728 Spring Boot \u4e2d\uff0c\u8fd9\u4e2a\u95ee\u9898\u5e38\u89c1\u7684\u89e3\u51b3\u65b9\u6848\u662f Swagger \uff0c\u4f7f\u7528 Swagger \u6211\u4eec\u53ef\u4ee5\u5feb\u901f\u751f\u6210\u4e00\u4e2a\u63a5\u53e3\u6587\u6863\u7f51\u7ad9\uff0c\u63a5\u53e3\u4e00\u65e6\u53d1\u751f\u53d8\u5316\uff0c\u6587\u6863\u5c31\u4f1a\u81ea\u52a8\u66f4\u65b0\uff0c\u6240\u6709\u5f00\u53d1\u5de5\u7a0b\u5e08\u8bbf\u95ee\u8fd9\u4e00\u4e2a\u5728\u7ebf\u7f51\u7ad9\u5c31\u53ef\u4ee5\u83b7\u53d6\u5230\u6700\u65b0\u7684\u63a5\u53e3\u6587\u6863\uff0c\u975e\u5e38\u65b9\u4fbf\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#_7","title":"\u5176\u4ed6","text":""},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot-spring-boot","title":"\u5982\u4f55\u91cd\u65b0\u52a0\u8f7d Spring Boot \u4e0a\u7684\u66f4\u6539\uff0c\u800c\u65e0\u9700\u91cd\u65b0\u542f\u52a8\u670d\u52a1\u5668\uff1fSpring Boot\u9879\u76ee\u5982\u4f55\u70ed\u90e8\u7f72\uff1f","text":"<p>\u8fd9\u53ef\u4ee5\u4f7f\u7528 DEV \u5de5\u5177\u6765\u5b9e\u73b0\u3002\u901a\u8fc7\u8fd9\u79cd\u4f9d\u8d56\u5173\u7cfb\uff0c\u60a8\u53ef\u4ee5\u8282\u7701\u4efb\u4f55\u66f4\u6539\uff0c\u5d4c\u5165\u5f0ftomcat \u5c06\u91cd\u65b0\u542f\u52a8\u3002Spring Boot \u6709\u4e00\u4e2a\u5f00\u53d1\u5de5\u5177\uff08DevTools\uff09\u6a21\u5757\uff0c\u5b83\u6709\u52a9\u4e8e\u63d0\u9ad8\u5f00\u53d1\u4eba\u5458\u7684\u751f\u4ea7\u529b\u3002Java \u5f00\u53d1\u4eba\u5458\u9762\u4e34\u7684\u4e00\u4e2a\u4e3b\u8981\u6311\u6218\u662f\u5c06\u6587\u4ef6\u66f4\u6539\u81ea\u52a8\u90e8\u7f72\u5230\u670d\u52a1\u5668\u5e76\u81ea\u52a8\u91cd\u542f\u670d\u52a1\u5668\u3002\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u91cd\u65b0\u52a0\u8f7d Spring Boot \u4e0a\u7684\u66f4\u6539\uff0c\u800c\u65e0\u9700\u91cd\u65b0\u542f\u52a8\u670d\u52a1\u5668\u3002\u8fd9\u5c06\u6d88\u9664\u6bcf\u6b21\u624b\u52a8\u90e8\u7f72\u66f4\u6539\u7684\u9700\u8981\u3002Spring Boot \u5728\u53d1\u5e03\u5b83\u7684\u7b2c\u4e00\u4e2a\u7248\u672c\u65f6\u6ca1\u6709\u8fd9\u4e2a\u529f\u80fd\u3002\u8fd9\u662f\u5f00\u53d1\u4eba\u5458\u6700\u9700\u8981\u7684\u529f\u80fd\u3002DevTools \u6a21\u5757\u5b8c\u5168\u6ee1\u8db3\u5f00\u53d1\u4eba\u5458\u7684\u9700\u6c42\u3002\u8be5\u6a21\u5757\u5c06\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u88ab\u7981\u7528\u3002\u5b83\u8fd8\u63d0\u4f9b H2 \u6570\u636e\u5e93\u63a7\u5236\u53f0\u4ee5\u66f4\u597d\u5730\u6d4b\u8bd5\u5e94\u7528\u7a0b\u5e8f\u3002</p> <p> org.springframework.boot spring-boot-devtools </p> <ul> <li>1</li> <li>2</li> <li>3</li> <li>4</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#starter-maven","title":"\u60a8\u4f7f\u7528\u4e86\u54ea\u4e9b starter maven \u4f9d\u8d56\u9879\uff1f","text":"<p>\u4f7f\u7528\u4e86\u4e0b\u9762\u7684\u4e00\u4e9b\u4f9d\u8d56\u9879</p> <p>spring-boot-starter-activemq</p> <p>spring-boot-starter-security</p> <p>\u8fd9\u6709\u52a9\u4e8e\u589e\u52a0\u66f4\u5c11\u7684\u4f9d\u8d56\u5173\u7cfb\uff0c\u5e76\u51cf\u5c11\u7248\u672c\u7684\u51b2\u7a81\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot-starter","title":"Spring Boot \u4e2d\u7684 starter \u5230\u5e95\u662f\u4ec0\u4e48 ?","text":"<p>\u9996\u5148\uff0c\u8fd9\u4e2a Starter \u5e76\u975e\u4ec0\u4e48\u65b0\u7684\u6280\u672f\u70b9\uff0c\u57fa\u672c\u4e0a\u8fd8\u662f\u57fa\u4e8e Spring \u5df2\u6709\u529f\u80fd\u6765\u5b9e\u73b0\u7684\u3002\u9996\u5148\u5b83\u63d0\u4f9b\u4e86\u4e00\u4e2a\u81ea\u52a8\u5316\u914d\u7f6e\u7c7b\uff0c\u4e00\u822c\u547d\u540d\u4e3a XXXAutoConfiguration \uff0c\u5728\u8fd9\u4e2a\u914d\u7f6e\u7c7b\u4e2d\u901a\u8fc7\u6761\u4ef6\u6ce8\u89e3\u6765\u51b3\u5b9a\u4e00\u4e2a\u914d\u7f6e\u662f\u5426\u751f\u6548\uff08\u6761\u4ef6\u6ce8\u89e3\u5c31\u662f Spring \u4e2d\u539f\u672c\u5c31\u6709\u7684\uff09\uff0c\u7136\u540e\u5b83\u8fd8\u4f1a\u63d0\u4f9b\u4e00\u7cfb\u5217\u7684\u9ed8\u8ba4\u914d\u7f6e\uff0c\u4e5f\u5141\u8bb8\u5f00\u53d1\u8005\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u81ea\u5b9a\u4e49\u76f8\u5173\u914d\u7f6e\uff0c\u7136\u540e\u901a\u8fc7\u7c7b\u578b\u5b89\u5168\u7684\u5c5e\u6027\u6ce8\u5165\u5c06\u8fd9\u4e9b\u914d\u7f6e\u5c5e\u6027\u6ce8\u5165\u8fdb\u6765\uff0c\u65b0\u6ce8\u5165\u7684\u5c5e\u6027\u4f1a\u4ee3\u66ff\u6389\u9ed8\u8ba4\u5c5e\u6027\u3002\u6b63\u56e0\u4e3a\u5982\u6b64\uff0c\u5f88\u591a\u7b2c\u4e09\u65b9\u6846\u67b6\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5f15\u5165\u4f9d\u8d56\u5c31\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u4e86\u3002\u5f53\u7136\uff0c\u5f00\u53d1\u8005\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49 Starter</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot-starter-parent","title":"spring-boot-starter-parent \u6709\u4ec0\u4e48\u7528 ?","text":"<p>\u6211\u4eec\u90fd\u77e5\u9053\uff0c\u65b0\u521b\u5efa\u4e00\u4e2a Spring Boot \u9879\u76ee\uff0c\u9ed8\u8ba4\u90fd\u662f\u6709 parent \u7684\uff0c\u8fd9\u4e2a parent \u5c31\u662f spring-boot-starter-parent \uff0cspring-boot-starter-parent \u4e3b\u8981\u6709\u5982\u4e0b\u4f5c\u7528\uff1a</p> <ol> <li>\u5b9a\u4e49\u4e86 Java \u7f16\u8bd1\u7248\u672c\u4e3a 1.8 \u3002</li> <li>\u4f7f\u7528 UTF-8 \u683c\u5f0f\u7f16\u7801\u3002</li> <li>\u7ee7\u627f\u81ea spring-boot-dependencies\uff0c\u8fd9\u4e2a\u91cc\u8fb9\u5b9a\u4e49\u4e86\u4f9d\u8d56\u7684\u7248\u672c\uff0c\u4e5f\u6b63\u662f\u56e0\u4e3a\u7ee7\u627f\u4e86\u8fd9\u4e2a\u4f9d\u8d56\uff0c\u6240\u4ee5\u6211\u4eec\u5728\u5199\u4f9d\u8d56\u65f6\u624d\u4e0d\u9700\u8981\u5199\u7248\u672c\u53f7\u3002</li> <li>\u6267\u884c\u6253\u5305\u64cd\u4f5c\u7684\u914d\u7f6e\u3002</li> <li>\u81ea\u52a8\u5316\u7684\u8d44\u6e90\u8fc7\u6ee4\u3002</li> <li>\u81ea\u52a8\u5316\u7684\u63d2\u4ef6\u914d\u7f6e\u3002</li> <li>\u9488\u5bf9 application.properties \u548c application.yml \u7684\u8d44\u6e90\u8fc7\u6ee4\uff0c\u5305\u62ec\u901a\u8fc7 profile \u5b9a\u4e49\u7684\u4e0d\u540c\u73af\u5883\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u4f8b\u5982 application-dev.properties \u548c application-dev.yml\u3002</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot-jar-jar","title":"Spring Boot \u6253\u6210\u7684 jar \u548c\u666e\u901a\u7684 jar \u6709\u4ec0\u4e48\u533a\u522b ?","text":"<p>Spring Boot \u9879\u76ee\u6700\u7ec8\u6253\u5305\u6210\u7684 jar \u662f\u53ef\u6267\u884c jar \uff0c\u8fd9\u79cd jar \u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7 java -jar xxx.jar \u547d\u4ee4\u6765\u8fd0\u884c\uff0c\u8fd9\u79cd jar \u4e0d\u53ef\u4ee5\u4f5c\u4e3a\u666e\u901a\u7684 jar \u88ab\u5176\u4ed6\u9879\u76ee\u4f9d\u8d56\uff0c\u5373\u4f7f\u4f9d\u8d56\u4e86\u4e5f\u65e0\u6cd5\u4f7f\u7528\u5176\u4e2d\u7684\u7c7b\u3002</p> <p>Spring Boot \u7684 jar \u65e0\u6cd5\u88ab\u5176\u4ed6\u9879\u76ee\u4f9d\u8d56\uff0c\u4e3b\u8981\u8fd8\u662f\u4ed6\u548c\u666e\u901a jar \u7684\u7ed3\u6784\u4e0d\u540c\u3002\u666e\u901a\u7684 jar \u5305\uff0c\u89e3\u538b\u540e\u76f4\u63a5\u5c31\u662f\u5305\u540d\uff0c\u5305\u91cc\u5c31\u662f\u6211\u4eec\u7684\u4ee3\u7801\uff0c\u800c Spring Boot \u6253\u5305\u6210\u7684\u53ef\u6267\u884c jar \u89e3\u538b\u540e\uff0c\u5728 \\BOOT-INF\\classes \u76ee\u5f55\u4e0b\u624d\u662f\u6211\u4eec\u7684\u4ee3\u7801\uff0c\u56e0\u6b64\u65e0\u6cd5\u88ab\u76f4\u63a5\u5f15\u7528\u3002\u5982\u679c\u975e\u8981\u5f15\u7528\uff0c\u53ef\u4ee5\u5728 pom.xml \u6587\u4ef6\u4e2d\u589e\u52a0\u914d\u7f6e\uff0c\u5c06 Spring Boot \u9879\u76ee\u6253\u5305\u6210\u4e24\u4e2a jar \uff0c\u4e00\u4e2a\u53ef\u6267\u884c\uff0c\u4e00\u4e2a\u53ef\u5f15\u7528\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot_10","title":"\u8fd0\u884c Spring Boot \u6709\u54ea\u51e0\u79cd\u65b9\u5f0f\uff1f","text":"<p>1\uff09\u6253\u5305\u7528\u547d\u4ee4\u6216\u8005\u653e\u5230\u5bb9\u5668\u4e2d\u8fd0\u884c</p> <p>2\uff09\u7528 Maven/ Gradle \u63d2\u4ef6\u8fd0\u884c</p> <p>3\uff09\u76f4\u63a5\u6267\u884c main \u65b9\u6cd5\u8fd0\u884c</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot_11","title":"Spring Boot \u9700\u8981\u72ec\u7acb\u7684\u5bb9\u5668\u8fd0\u884c\u5417\uff1f","text":"<p>\u53ef\u4ee5\u4e0d\u9700\u8981\uff0c\u5185\u7f6e\u4e86 Tomcat/ Jetty \u7b49\u5bb9\u5668\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot_12","title":"\u5f00\u542f Spring Boot \u7279\u6027\u6709\u54ea\u51e0\u79cd\u65b9\u5f0f\uff1f","text":"<p>1\uff09\u7ee7\u627fspring-boot-starter-parent\u9879\u76ee</p> <p>2\uff09\u5bfc\u5165spring-boot-dependencies\u9879\u76ee\u4f9d\u8d56</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot_13","title":"\u5982\u4f55\u4f7f\u7528 Spring Boot \u5b9e\u73b0\u5f02\u5e38\u5904\u7406\uff1f","text":"<p>Spring \u63d0\u4f9b\u4e86\u4e00\u79cd\u4f7f\u7528 ControllerAdvice \u5904\u7406\u5f02\u5e38\u7684\u975e\u5e38\u6709\u7528\u7684\u65b9\u6cd5\u3002 \u6211\u4eec\u901a\u8fc7\u5b9e\u73b0\u4e00\u4e2a ControlerAdvice \u7c7b\uff0c\u6765\u5904\u7406\u63a7\u5236\u5668\u7c7b\u629b\u51fa\u7684\u6240\u6709\u5f02\u5e38\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot_14","title":"\u5982\u4f55\u4f7f\u7528 Spring Boot \u5b9e\u73b0\u5206\u9875\u548c\u6392\u5e8f\uff1f","text":"<p>\u4f7f\u7528 Spring Boot \u5b9e\u73b0\u5206\u9875\u975e\u5e38\u7b80\u5355\u3002\u4f7f\u7528 Spring Data-JPA \u53ef\u4ee5\u5b9e\u73b0\u5c06\u53ef\u5206\u9875\u7684\u4f20\u9012\u7ed9\u5b58\u50a8\u5e93\u65b9\u6cd5\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#session","title":"\u5fae\u670d\u52a1\u4e2d\u5982\u4f55\u5b9e\u73b0 session \u5171\u4eab ?","text":"<p>\u5728\u5fae\u670d\u52a1\u4e2d\uff0c\u4e00\u4e2a\u5b8c\u6574\u7684\u9879\u76ee\u88ab\u62c6\u5206\u6210\u591a\u4e2a\u4e0d\u76f8\u540c\u7684\u72ec\u7acb\u7684\u670d\u52a1\uff0c\u5404\u4e2a\u670d\u52a1\u72ec\u7acb\u90e8\u7f72\u5728\u4e0d\u540c\u7684\u670d\u52a1\u5668\u4e0a\uff0c\u5404\u81ea\u7684 session \u88ab\u4ece\u7269\u7406\u7a7a\u95f4\u4e0a\u9694\u79bb\u5f00\u4e86\uff0c\u4f46\u662f\u7ecf\u5e38\uff0c\u6211\u4eec\u9700\u8981\u5728\u4e0d\u540c\u5fae\u670d\u52a1\u4e4b\u95f4\u5171\u4eab session \uff0c\u5e38\u89c1\u7684\u65b9\u6848\u5c31\u662f Spring Session + Redis \u6765\u5b9e\u73b0 session \u5171\u4eab\u3002\u5c06\u6240\u6709\u5fae\u670d\u52a1\u7684 session \u7edf\u4e00\u4fdd\u5b58\u5728 Redis \u4e0a\uff0c\u5f53\u5404\u4e2a\u5fae\u670d\u52a1\u5bf9 session \u6709\u76f8\u5173\u7684\u8bfb\u5199\u64cd\u4f5c\u65f6\uff0c\u90fd\u53bb\u64cd\u4f5c Redis \u4e0a\u7684 session \u3002\u8fd9\u6837\u5c31\u5b9e\u73b0\u4e86 session \u5171\u4eab\uff0cSpring Session \u57fa\u4e8e Spring \u4e2d\u7684\u4ee3\u7406\u8fc7\u6ee4\u5668\u5b9e\u73b0\uff0c\u4f7f\u5f97 session \u7684\u540c\u6b65\u64cd\u4f5c\u5bf9\u5f00\u53d1\u4eba\u5458\u800c\u8a00\u662f\u900f\u660e\u7684\uff0c\u975e\u5e38\u7b80\u4fbf\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/SpringBoot%E9%9D%A2%E8%AF%95%E9%A2%98/#spring-boot_15","title":"Spring Boot \u4e2d\u5982\u4f55\u5b9e\u73b0\u5b9a\u65f6\u4efb\u52a1 ?","text":"<p>\u5b9a\u65f6\u4efb\u52a1\u4e5f\u662f\u4e00\u4e2a\u5e38\u89c1\u7684\u9700\u6c42\uff0cSpring Boot \u4e2d\u5bf9\u4e8e\u5b9a\u65f6\u4efb\u52a1\u7684\u652f\u6301\u4e3b\u8981\u8fd8\u662f\u6765\u81ea Spring \u6846\u67b6\u3002</p> <p>\u5728 Spring Boot \u4e2d\u4f7f\u7528\u5b9a\u65f6\u4efb\u52a1\u4e3b\u8981\u6709\u4e24\u79cd\u4e0d\u540c\u7684\u65b9\u5f0f\uff0c\u4e00\u4e2a\u5c31\u662f\u4f7f\u7528 Spring \u4e2d\u7684 @Scheduled \u6ce8\u89e3\uff0c\u53e6\u4e00\u4e2a\u5219\u662f\u4f7f\u7528\u7b2c\u4e09\u65b9\u6846\u67b6 Quartz\u3002</p> <p>\u4f7f\u7528 Spring \u4e2d\u7684 @Scheduled \u7684\u65b9\u5f0f\u4e3b\u8981\u901a\u8fc7 @Scheduled \u6ce8\u89e3\u6765\u5b9e\u73b0\u3002</p> <p>\u4f7f\u7528 Quartz \uff0c\u5219\u6309\u7167 Quartz \u7684\u65b9\u5f0f\uff0c\u5b9a\u4e49 Job \u548c Trigger \u5373\u53ef\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/","title":"Jvm\u9762\u8bd5\u9898","text":"<p>\u76ee\u5f55</p> <p>Java\u5185\u5b58\u533a\u57df</p> <p>\u8bf4\u4e00\u4e0b JVM \u7684\u4e3b\u8981\u7ec4\u6210\u90e8\u5206\u53ca\u5176\u4f5c\u7528\uff1f</p> <p>\u8bf4\u4e00\u4e0b JVM \u8fd0\u884c\u65f6\u6570\u636e\u533a</p> <p>\u6df1\u62f7\u8d1d\u548c\u6d45\u62f7\u8d1d</p> <p>\u8bf4\u4e00\u4e0b\u5806\u6808\u7684\u533a\u522b\uff1f</p> <p>\u961f\u5217\u548c\u6808\u662f\u4ec0\u4e48\uff1f\u6709\u4ec0\u4e48\u533a\u522b\uff1f</p> <p>HotSpot\u865a\u62df\u673a\u5bf9\u8c61\u63a2\u79d8</p> <p>\u5bf9\u8c61\u7684\u521b\u5efa</p> <p>\u4e3a\u5bf9\u8c61\u5206\u914d\u5185\u5b58</p> <p>\u5904\u7406\u5e76\u53d1\u5b89\u5168\u95ee\u9898</p> <p>\u5bf9\u8c61\u7684\u8bbf\u95ee\u5b9a\u4f4d</p> <p>\u53e5\u67c4\u8bbf\u95ee</p> <p>\u76f4\u63a5\u6307\u9488</p> <p>\u5185\u5b58\u6ea2\u51fa\u5f02\u5e38</p> <p>Java\u4f1a\u5b58\u5728\u5185\u5b58\u6cc4\u6f0f\u5417\uff1f\u8bf7\u7b80\u5355\u63cf\u8ff0</p> <p>\u5783\u573e\u6536\u96c6\u5668</p> <p>\u7b80\u8ff0Java\u5783\u573e\u56de\u6536\u673a\u5236</p> <p>GC\u662f\u4ec0\u4e48\uff1f\u4e3a\u4ec0\u4e48\u8981GC</p> <p>\u5783\u573e\u56de\u6536\u7684\u4f18\u70b9\u548c\u539f\u7406\u3002\u5e76\u8003\u86512\u79cd\u56de\u6536\u673a\u5236</p> <p>\u5783\u573e\u56de\u6536\u5668\u7684\u57fa\u672c\u539f\u7406\u662f\u4ec0\u4e48\uff1f\u5783\u573e\u56de\u6536\u5668\u53ef\u4ee5\u9a6c\u4e0a\u56de\u6536\u5185\u5b58\u5417\uff1f\u6709\u4ec0\u4e48\u529e\u6cd5\u4e3b\u52a8\u901a\u77e5\u865a\u62df\u673a\u8fdb\u884c\u5783\u573e\u56de\u6536\uff1f</p> <p>Java \u4e2d\u90fd\u6709\u54ea\u4e9b\u5f15\u7528\u7c7b\u578b\uff1f</p> <p>\u600e\u4e48\u5224\u65ad\u5bf9\u8c61\u662f\u5426\u53ef\u4ee5\u88ab\u56de\u6536\uff1f</p> <p>\u5728Java\u4e2d\uff0c\u5bf9\u8c61\u4ec0\u4e48\u65f6\u5019\u53ef\u4ee5\u88ab\u5783\u573e\u56de\u6536</p> <p>JVM\u4e2d\u7684\u6c38\u4e45\u4ee3\u4e2d\u4f1a\u53d1\u751f\u5783\u573e\u56de\u6536\u5417</p> <p>\u8bf4\u4e00\u4e0b JVM \u6709\u54ea\u4e9b\u5783\u573e\u56de\u6536\u7b97\u6cd5\uff1f</p> <p>\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5</p> <p>\u590d\u5236\u7b97\u6cd5</p> <p>\u6807\u8bb0-\u6574\u7406\u7b97\u6cd5</p> <p>\u5206\u4ee3\u6536\u96c6\u7b97\u6cd5</p> <p>\u8bf4\u4e00\u4e0b JVM \u6709\u54ea\u4e9b\u5783\u573e\u56de\u6536\u5668\uff1f</p> <p>\u8be6\u7ec6\u4ecb\u7ecd\u4e00\u4e0b CMS \u5783\u573e\u56de\u6536\u5668\uff1f</p> <p>\u65b0\u751f\u4ee3\u5783\u573e\u56de\u6536\u5668\u548c\u8001\u5e74\u4ee3\u5783\u573e\u56de\u6536\u5668\u90fd\u6709\u54ea\u4e9b\uff1f\u6709\u4ec0\u4e48\u533a\u522b\uff1f</p> <p>\u7b80\u8ff0\u5206\u4ee3\u5783\u573e\u56de\u6536\u5668\u662f\u600e\u4e48\u5de5\u4f5c\u7684\uff1f</p> <p>\u5185\u5b58\u5206\u914d\u7b56\u7565</p> <p>\u7b80\u8ff0java\u5185\u5b58\u5206\u914d\u4e0e\u56de\u6536\u7b56\u7387\u4ee5\u53caMinor GC\u548cMajor GC</p> <p>\u5bf9\u8c61\u4f18\u5148\u5728 Eden \u533a\u5206\u914d</p> <p>\u5927\u5bf9\u8c61\u76f4\u63a5\u8fdb\u5165\u8001\u5e74\u4ee3</p> <p>\u957f\u671f\u5b58\u6d3b\u5bf9\u8c61\u5c06\u8fdb\u5165\u8001\u5e74\u4ee3</p> <p>\u865a\u62df\u673a\u7c7b\u52a0\u8f7d\u673a\u5236</p> <p>\u7b80\u8ff0java\u7c7b\u52a0\u8f7d\u673a\u5236?</p> <p>\u63cf\u8ff0\u4e00\u4e0bJVM\u52a0\u8f7dClass\u6587\u4ef6\u7684\u539f\u7406\u673a\u5236</p> <p>\u4ec0\u4e48\u662f\u7c7b\u52a0\u8f7d\u5668\uff0c\u7c7b\u52a0\u8f7d\u5668\u6709\u54ea\u4e9b?</p> <p>\u8bf4\u4e00\u4e0b\u7c7b\u88c5\u8f7d\u7684\u6267\u884c\u8fc7\u7a0b\uff1f</p> <p>\u4ec0\u4e48\u662f\u53cc\u4eb2\u59d4\u6d3e\u6a21\u578b\uff1f</p> <p>JVM\u8c03\u4f18</p> <p>\u8bf4\u4e00\u4e0b JVM \u8c03\u4f18\u7684\u5de5\u5177\uff1f</p> <p>\u5e38\u7528\u7684 JVM \u8c03\u4f18\u7684\u53c2\u6570\u90fd\u6709\u54ea\u4e9b\uff1f</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#java","title":"Java\u5185\u5b58\u533a\u57df","text":""},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#jvm","title":"\u8bf4\u4e00\u4e0b JVM \u7684\u4e3b\u8981\u7ec4\u6210\u90e8\u5206\u53ca\u5176\u4f5c\u7528\uff1f","text":"<p>JVM\u5305\u542b\u4e24\u4e2a\u5b50\u7cfb\u7edf\u548c\u4e24\u4e2a\u7ec4\u4ef6\uff0c\u4e24\u4e2a\u5b50\u7cfb\u7edf\u4e3aClass loader(\u7c7b\u88c5\u8f7d)\u3001Execution engine(\u6267\u884c\u5f15\u64ce)\uff1b\u4e24\u4e2a\u7ec4\u4ef6\u4e3aRuntime data area(\u8fd0\u884c\u65f6\u6570\u636e\u533a)\u3001Native Interface(\u672c\u5730\u63a5\u53e3)\u3002</p> <ul> <li>Class loader(\u7c7b\u88c5\u8f7d)\uff1a\u6839\u636e\u7ed9\u5b9a\u7684\u5168\u9650\u5b9a\u540d\u7c7b\u540d(\u5982\uff1ajava.lang.Object)\u6765\u88c5\u8f7dclass\u6587\u4ef6\u5230Runtime data area\u4e2d\u7684method area\u3002</li> <li>Execution engine\uff08\u6267\u884c\u5f15\u64ce\uff09\uff1a\u6267\u884cclasses\u4e2d\u7684\u6307\u4ee4\u3002</li> <li>Native Interface(\u672c\u5730\u63a5\u53e3)\uff1a\u4e0enative libraries\u4ea4\u4e92\uff0c\u662f\u5176\u5b83\u7f16\u7a0b\u8bed\u8a00\u4ea4\u4e92\u7684\u63a5\u53e3\u3002</li> <li>Runtime data area(\u8fd0\u884c\u65f6\u6570\u636e\u533a\u57df)\uff1a\u8fd9\u5c31\u662f\u6211\u4eec\u5e38\u8bf4\u7684JVM\u7684\u5185\u5b58\u3002</li> </ul> <p>\u4f5c\u7528 \uff1a\u9996\u5148\u901a\u8fc7\u7f16\u8bd1\u5668\u628a Java \u4ee3\u7801\u8f6c\u6362\u6210\u5b57\u8282\u7801\uff0c\u7c7b\u52a0\u8f7d\u5668\uff08ClassLoader\uff09\u518d\u628a\u5b57\u8282\u7801\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5c06\u5176\u653e\u5728\u8fd0\u884c\u65f6\u6570\u636e\u533a\uff08Runtime data area\uff09\u7684\u65b9\u6cd5\u533a\u5185\uff0c\u800c\u5b57\u8282\u7801\u6587\u4ef6\u53ea\u662f JVM \u7684\u4e00\u5957\u6307\u4ee4\u96c6\u89c4\u8303\uff0c\u5e76\u4e0d\u80fd\u76f4\u63a5\u4ea4\u7ed9\u5e95\u5c42\u64cd\u4f5c\u7cfb\u7edf\u53bb\u6267\u884c\uff0c\u56e0\u6b64\u9700\u8981\u7279\u5b9a\u7684\u547d\u4ee4\u89e3\u6790\u5668\u6267\u884c\u5f15\u64ce\uff08Execution Engine\uff09\uff0c\u5c06\u5b57\u8282\u7801\u7ffb\u8bd1\u6210\u5e95\u5c42\u7cfb\u7edf\u6307\u4ee4\uff0c\u518d\u4ea4\u7531 CPU \u53bb\u6267\u884c\uff0c\u800c\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u9700\u8981\u8c03\u7528\u5176\u4ed6\u8bed\u8a00\u7684\u672c\u5730\u5e93\u63a5\u53e3\uff08Native Interface\uff09\u6765\u5b9e\u73b0\u6574\u4e2a\u7a0b\u5e8f\u7684\u529f\u80fd\u3002</p> <p>\u4e0b\u9762\u662fJava\u7a0b\u5e8f\u8fd0\u884c\u673a\u5236\u8be6\u7ec6\u8bf4\u660e</p> <p>Java\u7a0b\u5e8f\u8fd0\u884c\u673a\u5236\u6b65\u9aa4</p> <ul> <li>\u9996\u5148\u5229\u7528IDE\u96c6\u6210\u5f00\u53d1\u5de5\u5177\u7f16\u5199Java\u6e90\u4ee3\u7801\uff0c\u6e90\u6587\u4ef6\u7684\u540e\u7f00\u4e3a.java\uff1b</li> <li>\u518d\u5229\u7528\u7f16\u8bd1\u5668(javac\u547d\u4ee4)\u5c06\u6e90\u4ee3\u7801\u7f16\u8bd1\u6210\u5b57\u8282\u7801\u6587\u4ef6\uff0c\u5b57\u8282\u7801\u6587\u4ef6\u7684\u540e\u7f00\u540d\u4e3a.class\uff1b</li> <li>\u8fd0\u884c\u5b57\u8282\u7801\u7684\u5de5\u4f5c\u662f\u7531\u89e3\u91ca\u5668(java\u547d\u4ee4)\u6765\u5b8c\u6210\u7684\u3002</li> </ul> <p></p> <p>\u4ece\u4e0a\u56fe\u53ef\u4ee5\u770b\uff0cjava\u6587\u4ef6\u901a\u8fc7\u7f16\u8bd1\u5668\u53d8\u6210\u4e86.class\u6587\u4ef6\uff0c\u63a5\u4e0b\u6765\u7c7b\u52a0\u8f7d\u5668\u53c8\u5c06\u8fd9\u4e9b.class\u6587\u4ef6\u52a0\u8f7d\u5230JVM\u4e2d\u3002 \u5176\u5b9e\u53ef\u4ee5\u4e00\u53e5\u8bdd\u6765\u89e3\u91ca\uff1a\u7c7b\u7684\u52a0\u8f7d\u6307\u7684\u662f\u5c06\u7c7b\u7684.class\u6587\u4ef6\u4e2d\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u8bfb\u5165\u5230\u5185\u5b58\u4e2d\uff0c\u5c06\u5176\u653e\u5728\u8fd0\u884c\u65f6\u6570\u636e\u533a\u7684\u65b9\u6cd5\u533a\u5185\uff0c\u7136\u540e\u5728\u5806\u533a\u521b\u5efa\u4e00\u4e2a java.lang.Class\u5bf9\u8c61\uff0c\u7528\u6765\u5c01\u88c5\u7c7b\u5728\u65b9\u6cd5\u533a\u5185\u7684\u6570\u636e\u7ed3\u6784\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#jvm_1","title":"\u8bf4\u4e00\u4e0b JVM \u8fd0\u884c\u65f6\u6570\u636e\u533a","text":"<p>Java \u865a\u62df\u673a\u5728\u6267\u884c Java \u7a0b\u5e8f\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u628a\u5b83\u6240\u7ba1\u7406\u7684\u5185\u5b58\u533a\u57df\u5212\u5206\u4e3a\u82e5\u5e72\u4e2a\u4e0d\u540c\u7684\u6570\u636e\u533a\u57df\u3002\u8fd9\u4e9b\u533a\u57df\u90fd\u6709\u5404\u81ea\u7684\u7528\u9014\uff0c\u4ee5\u53ca\u521b\u5efa\u548c\u9500\u6bc1\u7684\u65f6\u95f4\uff0c\u6709\u4e9b\u533a\u57df\u968f\u7740\u865a\u62df\u673a\u8fdb\u7a0b\u7684\u542f\u52a8\u800c\u5b58\u5728\uff0c\u6709\u4e9b\u533a\u57df\u5219\u662f\u4f9d\u8d56\u7ebf\u7a0b\u7684\u542f\u52a8\u548c\u7ed3\u675f\u800c\u5efa\u7acb\u548c\u9500\u6bc1\u3002Java \u865a\u62df\u673a\u6240\u7ba1\u7406\u7684\u5185\u5b58\u88ab\u5212\u5206\u4e3a\u5982\u4e0b\u51e0\u4e2a\u533a\u57df\uff1a</p> <p></p> <p>\u4e0d\u540c\u865a\u62df\u673a\u7684\u8fd0\u884c\u65f6\u6570\u636e\u533a\u53ef\u80fd\u7565\u5fae\u6709\u6240\u4e0d\u540c\uff0c\u4f46\u90fd\u4f1a\u9075\u4ece Java \u865a\u62df\u673a\u89c4\u8303\uff0c Java \u865a\u62df\u673a\u89c4\u8303\u89c4\u5b9a\u7684\u533a\u57df\u5206\u4e3a\u4ee5\u4e0b 5 \u4e2a\u90e8\u5206\uff1a</p> <ul> <li>\u7a0b\u5e8f\u8ba1\u6570\u5668\uff08Program Counter Register\uff09\uff1a\u5f53\u524d\u7ebf\u7a0b\u6240\u6267\u884c\u7684\u5b57\u8282\u7801\u7684\u884c\u53f7\u6307\u793a\u5668\uff0c\u5b57\u8282\u7801\u89e3\u6790\u5668\u7684\u5de5\u4f5c\u662f\u901a\u8fc7\u6539\u53d8\u8fd9\u4e2a\u8ba1\u6570\u5668\u7684\u503c\uff0c\u6765\u9009\u53d6\u4e0b\u4e00\u6761\u9700\u8981\u6267\u884c\u7684\u5b57\u8282\u7801\u6307\u4ee4\uff0c\u5206\u652f\u3001\u5faa\u73af\u3001\u8df3\u8f6c\u3001\u5f02\u5e38\u5904\u7406\u3001\u7ebf\u7a0b\u6062\u590d\u7b49\u57fa\u7840\u529f\u80fd\uff0c\u90fd\u9700\u8981\u4f9d\u8d56\u8fd9\u4e2a\u8ba1\u6570\u5668\u6765\u5b8c\u6210\uff1b</li> <li>Java \u865a\u62df\u673a\u6808\uff08Java Virtual Machine Stacks\uff09\uff1a\u7528\u4e8e\u5b58\u50a8\u5c40\u90e8\u53d8\u91cf\u8868\u3001\u64cd\u4f5c\u6570\u6808\u3001\u52a8\u6001\u94fe\u63a5\u3001\u65b9\u6cd5\u51fa\u53e3\u7b49\u4fe1\u606f\uff1b</li> <li>\u672c\u5730\u65b9\u6cd5\u6808\uff08Native Method Stack\uff09\uff1a\u4e0e\u865a\u62df\u673a\u6808\u7684\u4f5c\u7528\u662f\u4e00\u6837\u7684\uff0c\u53ea\u4e0d\u8fc7\u865a\u62df\u673a\u6808\u662f\u670d\u52a1 Java \u65b9\u6cd5\u7684\uff0c\u800c\u672c\u5730\u65b9\u6cd5\u6808\u662f\u4e3a\u865a\u62df\u673a\u8c03\u7528 Native \u65b9\u6cd5\u670d\u52a1\u7684\uff1b</li> <li>Java \u5806\uff08Java Heap\uff09\uff1aJava \u865a\u62df\u673a\u4e2d\u5185\u5b58\u6700\u5927\u7684\u4e00\u5757\uff0c\u662f\u88ab\u6240\u6709\u7ebf\u7a0b\u5171\u4eab\u7684\uff0c\u51e0\u4e4e\u6240\u6709\u7684\u5bf9\u8c61\u5b9e\u4f8b\u90fd\u5728\u8fd9\u91cc\u5206\u914d\u5185\u5b58\uff1b</li> <li>\u65b9\u6cd5\u533a\uff08Methed Area\uff09\uff1a\u7528\u4e8e\u5b58\u50a8\u5df2\u88ab\u865a\u62df\u673a\u52a0\u8f7d\u7684\u7c7b\u4fe1\u606f\u3001\u5e38\u91cf\u3001\u9759\u6001\u53d8\u91cf\u3001\u5373\u65f6\u7f16\u8bd1\u540e\u7684\u4ee3\u7801\u7b49\u6570\u636e\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_1","title":"\u6df1\u62f7\u8d1d\u548c\u6d45\u62f7\u8d1d","text":"<p>\u6d45\u62f7\u8d1d\uff08shallowCopy\uff09\u53ea\u662f\u589e\u52a0\u4e86\u4e00\u4e2a\u6307\u9488\u6307\u5411\u5df2\u5b58\u5728\u7684\u5185\u5b58\u5730\u5740\uff0c</p> <p>\u6df1\u62f7\u8d1d\uff08deepCopy\uff09\u662f\u589e\u52a0\u4e86\u4e00\u4e2a\u6307\u9488\u5e76\u4e14\u7533\u8bf7\u4e86\u4e00\u4e2a\u65b0\u7684\u5185\u5b58\uff0c\u4f7f\u8fd9\u4e2a\u589e\u52a0\u7684\u6307\u9488\u6307\u5411\u8fd9\u4e2a\u65b0\u7684\u5185\u5b58\uff0c</p> <p>\u4f7f\u7528\u6df1\u62f7\u8d1d\u7684\u60c5\u51b5\u4e0b\uff0c\u91ca\u653e\u5185\u5b58\u7684\u65f6\u5019\u4e0d\u4f1a\u56e0\u4e3a\u51fa\u73b0\u6d45\u62f7\u8d1d\u65f6\u91ca\u653e\u540c\u4e00\u4e2a\u5185\u5b58\u7684\u9519\u8bef\u3002</p> <p>\u6d45\u590d\u5236\uff1a\u4ec5\u4ec5\u662f\u6307\u5411\u88ab\u590d\u5236\u7684\u5185\u5b58\u5730\u5740\uff0c\u5982\u679c\u539f\u5730\u5740\u53d1\u751f\u6539\u53d8\uff0c\u90a3\u4e48\u6d45\u590d\u5236\u51fa\u6765\u7684\u5bf9\u8c61\u4e5f\u4f1a\u76f8\u5e94\u7684\u6539\u53d8\u3002</p> <p>\u6df1\u590d\u5236\uff1a\u5728\u8ba1\u7b97\u673a\u4e2d\u5f00\u8f9f\u4e00\u5757\u65b0\u7684\u5185\u5b58\u5730\u5740\u7528\u4e8e\u5b58\u653e\u590d\u5236\u7684\u5bf9\u8c61\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_2","title":"\u8bf4\u4e00\u4e0b\u5806\u6808\u7684\u533a\u522b\uff1f","text":"<p>\u7269\u7406\u5730\u5740</p> <p>\u5806\u7684\u7269\u7406\u5730\u5740\u5206\u914d\u5bf9\u5bf9\u8c61\u662f\u4e0d\u8fde\u7eed\u7684\u3002\u56e0\u6b64\u6027\u80fd\u6162\u4e9b\u3002\u5728GC\u7684\u65f6\u5019\u4e5f\u8981\u8003\u8651\u5230\u4e0d\u8fde\u7eed\u7684\u5206\u914d\uff0c\u6240\u4ee5\u6709\u5404\u79cd\u7b97\u6cd5\u3002\u6bd4\u5982\uff0c\u6807\u8bb0-\u6d88\u9664\uff0c\u590d\u5236\uff0c\u6807\u8bb0-\u538b\u7f29\uff0c\u5206\u4ee3\uff08\u5373\u65b0\u751f\u4ee3\u4f7f\u7528\u590d\u5236\u7b97\u6cd5\uff0c\u8001\u5e74\u4ee3\u4f7f\u7528\u6807\u8bb0\u2014\u2014\u538b\u7f29\uff09</p> <p>\u6808\u4f7f\u7528\u7684\u662f\u6570\u636e\u7ed3\u6784\u4e2d\u7684\u6808\uff0c\u5148\u8fdb\u540e\u51fa\u7684\u539f\u5219\uff0c\u7269\u7406\u5730\u5740\u5206\u914d\u662f\u8fde\u7eed\u7684\u3002\u6240\u4ee5\u6027\u80fd\u5feb\u3002</p> <p>\u5185\u5b58\u5206\u522b</p> <p>\u5806\u56e0\u4e3a\u662f\u4e0d\u8fde\u7eed\u7684\uff0c\u6240\u4ee5\u5206\u914d\u7684\u5185\u5b58\u662f\u5728\u8fd0\u884c\u671f\u786e\u8ba4\u7684\uff0c\u56e0\u6b64\u5927\u5c0f\u4e0d\u56fa\u5b9a\u3002\u4e00\u822c\u5806\u5927\u5c0f\u8fdc\u8fdc\u5927\u4e8e\u6808\u3002</p> <p>\u6808\u662f\u8fde\u7eed\u7684\uff0c\u6240\u4ee5\u5206\u914d\u7684\u5185\u5b58\u5927\u5c0f\u8981\u5728\u7f16\u8bd1\u671f\u5c31\u786e\u8ba4\uff0c\u5927\u5c0f\u662f\u56fa\u5b9a\u7684\u3002</p> <p>\u5b58\u653e\u7684\u5185\u5bb9</p> <p>\u5806\u5b58\u653e\u7684\u662f\u5bf9\u8c61\u7684\u5b9e\u4f8b\u548c\u6570\u7ec4\u3002\u56e0\u6b64\u8be5\u533a\u66f4\u5173\u6ce8\u7684\u662f\u6570\u636e\u7684\u5b58\u50a8</p> <p>\u6808\u5b58\u653e\uff1a\u5c40\u90e8\u53d8\u91cf\uff0c\u64cd\u4f5c\u6570\u6808\uff0c\u8fd4\u56de\u7ed3\u679c\u3002\u8be5\u533a\u66f4\u5173\u6ce8\u7684\u662f\u7a0b\u5e8f\u65b9\u6cd5\u7684\u6267\u884c\u3002</p> <p>PS\uff1a</p> <ol> <li>\u9759\u6001\u53d8\u91cf\u653e\u5728\u65b9\u6cd5\u533a</li> <li>\u9759\u6001\u7684\u5bf9\u8c61\u8fd8\u662f\u653e\u5728\u5806\u3002</li> </ol> <p>\u7a0b\u5e8f\u7684\u53ef\u89c1\u5ea6</p> <p>\u5806\u5bf9\u4e8e\u6574\u4e2a\u5e94\u7528\u7a0b\u5e8f\u90fd\u662f\u5171\u4eab\u3001\u53ef\u89c1\u7684\u3002</p> <p>\u6808\u53ea\u5bf9\u4e8e\u7ebf\u7a0b\u662f\u53ef\u89c1\u7684\u3002\u6240\u4ee5\u4e5f\u662f\u7ebf\u7a0b\u79c1\u6709\u3002\u4ed6\u7684\u751f\u547d\u5468\u671f\u548c\u7ebf\u7a0b\u76f8\u540c\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_3","title":"\u961f\u5217\u548c\u6808\u662f\u4ec0\u4e48\uff1f\u6709\u4ec0\u4e48\u533a\u522b\uff1f","text":"<p>\u961f\u5217\u548c\u6808\u90fd\u662f\u88ab\u7528\u6765\u9884\u5b58\u50a8\u6570\u636e\u7684\u3002</p> <ul> <li>\u64cd\u4f5c\u7684\u540d\u79f0\u4e0d\u540c\u3002\u961f\u5217\u7684\u63d2\u5165\u79f0\u4e3a\u5165\u961f\uff0c\u961f\u5217\u7684\u5220\u9664\u79f0\u4e3a\u51fa\u961f\u3002\u6808\u7684\u63d2\u5165\u79f0\u4e3a\u8fdb\u6808\uff0c\u6808\u7684\u5220\u9664\u79f0\u4e3a\u51fa\u6808\u3002</li> <li>\u53ef\u64cd\u4f5c\u7684\u65b9\u5f0f\u4e0d\u540c\u3002\u961f\u5217\u662f\u5728\u961f\u5c3e\u5165\u961f\uff0c\u961f\u5934\u51fa\u961f\uff0c\u5373\u4e24\u8fb9\u90fd\u53ef\u64cd\u4f5c\u3002\u800c\u6808\u7684\u8fdb\u6808\u548c\u51fa\u6808\u90fd\u662f\u5728\u6808\u9876\u8fdb\u884c\u7684\uff0c\u65e0\u6cd5\u5bf9\u6808\u5e95\u76f4\u63a5\u8fdb\u884c\u64cd\u4f5c\u3002</li> <li>\u64cd\u4f5c\u7684\u65b9\u6cd5\u4e0d\u540c\u3002\u961f\u5217\u662f\u5148\u8fdb\u5148\u51fa\uff08FIFO\uff09\uff0c\u5373\u961f\u5217\u7684\u4fee\u6539\u662f\u4f9d\u5148\u8fdb\u5148\u51fa\u7684\u539f\u5219\u8fdb\u884c\u7684\u3002\u65b0\u6765\u7684\u6210\u5458\u603b\u662f\u52a0\u5165\u961f\u5c3e\uff08\u4e0d\u80fd\u4ece\u4e2d\u95f4\u63d2\u5165\uff09\uff0c\u6bcf\u6b21\u79bb\u5f00\u7684\u6210\u5458\u603b\u662f\u961f\u5217\u5934\u4e0a\uff08\u4e0d\u5141\u8bb8\u4e2d\u9014\u79bb\u961f\uff09\u3002\u800c\u6808\u4e3a\u540e\u8fdb\u5148\u51fa\uff08LIFO\uff09,\u5373\u6bcf\u6b21\u5220\u9664\uff08\u51fa\u6808\uff09\u7684\u603b\u662f\u5f53\u524d\u6808\u4e2d\u6700\u65b0\u7684\u5143\u7d20\uff0c\u5373\u6700\u540e\u63d2\u5165\uff08\u8fdb\u6808\uff09\u7684\u5143\u7d20\uff0c\u800c\u6700\u5148\u63d2\u5165\u7684\u88ab\u653e\u5728\u6808\u7684\u5e95\u90e8\uff0c\u8981\u5230\u6700\u540e\u624d\u80fd\u5220\u9664\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#hotspot","title":"HotSpot\u865a\u62df\u673a\u5bf9\u8c61\u63a2\u79d8","text":""},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_4","title":"\u5bf9\u8c61\u7684\u521b\u5efa","text":"<p>\u8bf4\u5230\u5bf9\u8c61\u7684\u521b\u5efa\uff0c\u9996\u5148\u8ba9\u6211\u4eec\u770b\u770b Java \u4e2d\u63d0\u4f9b\u7684\u51e0\u79cd\u5bf9\u8c61\u521b\u5efa\u65b9\u5f0f\uff1a</p> Header \u89e3\u91ca \u4f7f\u7528new\u5173\u952e\u5b57 \u8c03\u7528\u4e86\u6784\u9020\u51fd\u6570 \u4f7f\u7528Class\u7684newInstance\u65b9\u6cd5 \u8c03\u7528\u4e86\u6784\u9020\u51fd\u6570 \u4f7f\u7528Constructor\u7c7b\u7684newInstance\u65b9\u6cd5 \u8c03\u7528\u4e86\u6784\u9020\u51fd\u6570 \u4f7f\u7528clone\u65b9\u6cd5 \u6ca1\u6709\u8c03\u7528\u6784\u9020\u51fd\u6570 \u4f7f\u7528\u53cd\u5e8f\u5217\u5316 \u6ca1\u6709\u8c03\u7528\u6784\u9020\u51fd\u6570 <p>\u4e0b\u9762\u662f\u5bf9\u8c61\u521b\u5efa\u7684\u4e3b\u8981\u6d41\u7a0b:</p> <p></p> <p>\u865a\u62df\u673a\u9047\u5230\u4e00\u6761new\u6307\u4ee4\u65f6\uff0c\u5148\u68c0\u67e5\u5e38\u91cf\u6c60\u662f\u5426\u5df2\u7ecf\u52a0\u8f7d\u76f8\u5e94\u7684\u7c7b\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u5fc5\u987b\u5148\u6267\u884c\u76f8\u5e94\u7684\u7c7b\u52a0\u8f7d\u3002\u7c7b\u52a0\u8f7d\u901a\u8fc7\u540e\uff0c\u63a5\u4e0b\u6765\u5206\u914d\u5185\u5b58\u3002\u82e5Java\u5806\u4e2d\u5185\u5b58\u662f\u7edd\u5bf9\u89c4\u6574\u7684\uff0c\u4f7f\u7528\u201c\u6307\u9488\u78b0\u649e\u201c\u65b9\u5f0f\u5206\u914d\u5185\u5b58\uff1b\u5982\u679c\u4e0d\u662f\u89c4\u6574\u7684\uff0c\u5c31\u4ece\u7a7a\u95f2\u5217\u8868\u4e2d\u5206\u914d\uff0c\u53eb\u505a\u201d\u7a7a\u95f2\u5217\u8868\u201c\u65b9\u5f0f\u3002\u5212\u5206\u5185\u5b58\u65f6\u8fd8\u9700\u8981\u8003\u8651\u4e00\u4e2a\u95ee\u9898-\u5e76\u53d1\uff0c\u4e5f\u6709\u4e24\u79cd\u65b9\u5f0f: CAS\u540c\u6b65\u5904\u7406\uff0c\u6216\u8005\u672c\u5730\u7ebf\u7a0b\u5206\u914d\u7f13\u51b2(Thread Local Allocation Buffer, TLAB)\u3002\u7136\u540e\u5185\u5b58\u7a7a\u95f4\u521d\u59cb\u5316\u64cd\u4f5c\uff0c\u63a5\u7740\u662f\u505a\u4e00\u4e9b\u5fc5\u8981\u7684\u5bf9\u8c61\u8bbe\u7f6e(\u5143\u4fe1\u606f\u3001\u54c8\u5e0c\u7801\u2026)\uff0c\u6700\u540e\u6267\u884c\u65b9\u6cd5\u3002"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_5","title":"\u4e3a\u5bf9\u8c61\u5206\u914d\u5185\u5b58","text":"<p>\u7c7b\u52a0\u8f7d\u5b8c\u6210\u540e\uff0c\u63a5\u7740\u4f1a\u5728Java\u5806\u4e2d\u5212\u5206\u4e00\u5757\u5185\u5b58\u5206\u914d\u7ed9\u5bf9\u8c61\u3002\u5185\u5b58\u5206\u914d\u6839\u636eJava\u5806\u662f\u5426\u89c4\u6574\uff0c\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a</p> <ul> <li>\u6307\u9488\u78b0\u649e\uff1a\u5982\u679cJava\u5806\u7684\u5185\u5b58\u662f\u89c4\u6574\uff0c\u5373\u6240\u6709\u7528\u8fc7\u7684\u5185\u5b58\u653e\u5728\u4e00\u8fb9\uff0c\u800c\u7a7a\u95f2\u7684\u7684\u653e\u5728\u53e6\u4e00\u8fb9\u3002\u5206\u914d\u5185\u5b58\u65f6\u5c06\u4f4d\u4e8e\u4e2d\u95f4\u7684\u6307\u9488\u6307\u793a\u5668\u5411\u7a7a\u95f2\u7684\u5185\u5b58\u79fb\u52a8\u4e00\u6bb5\u4e0e\u5bf9\u8c61\u5927\u5c0f\u76f8\u7b49\u7684\u8ddd\u79bb\uff0c\u8fd9\u6837\u4fbf\u5b8c\u6210\u5206\u914d\u5185\u5b58\u5de5\u4f5c\u3002</li> <li>\u7a7a\u95f2\u5217\u8868\uff1a\u5982\u679cJava\u5806\u7684\u5185\u5b58\u4e0d\u662f\u89c4\u6574\u7684\uff0c\u5219\u9700\u8981\u7531\u865a\u62df\u673a\u7ef4\u62a4\u4e00\u4e2a\u5217\u8868\u6765\u8bb0\u5f55\u90a3\u4e9b\u5185\u5b58\u662f\u53ef\u7528\u7684\uff0c\u8fd9\u6837\u5728\u5206\u914d\u7684\u65f6\u5019\u53ef\u4ee5\u4ece\u5217\u8868\u4e2d\u67e5\u8be2\u5230\u8db3\u591f\u5927\u7684\u5185\u5b58\u5206\u914d\u7ed9\u5bf9\u8c61\uff0c\u5e76\u5728\u5206\u914d\u540e\u66f4\u65b0\u5217\u8868\u8bb0\u5f55\u3002</li> </ul> <p>\u9009\u62e9\u54ea\u79cd\u5206\u914d\u65b9\u5f0f\u662f\u7531 Java \u5806\u662f\u5426\u89c4\u6574\u6765\u51b3\u5b9a\u7684\uff0c\u800c Java \u5806\u662f\u5426\u89c4\u6574\u53c8\u7531\u6240\u91c7\u7528\u7684\u5783\u573e\u6536\u96c6\u5668\u662f\u5426\u5e26\u6709\u538b\u7f29\u6574\u7406\u529f\u80fd\u51b3\u5b9a\u3002</p> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_6","title":"\u5904\u7406\u5e76\u53d1\u5b89\u5168\u95ee\u9898","text":"<p>\u5bf9\u8c61\u7684\u521b\u5efa\u5728\u865a\u62df\u673a\u4e2d\u662f\u4e00\u4e2a\u975e\u5e38\u9891\u7e41\u7684\u884c\u4e3a\uff0c\u54ea\u6015\u53ea\u662f\u4fee\u6539\u4e00\u4e2a\u6307\u9488\u6240\u6307\u5411\u7684\u4f4d\u7f6e\uff0c\u5728\u5e76\u53d1\u60c5\u51b5\u4e0b\u4e5f\u662f\u4e0d\u5b89\u5168\u7684\uff0c\u53ef\u80fd\u51fa\u73b0\u6b63\u5728\u7ed9\u5bf9\u8c61 A \u5206\u914d\u5185\u5b58\uff0c\u6307\u9488\u8fd8\u6ca1\u6765\u5f97\u53ca\u4fee\u6539\uff0c\u5bf9\u8c61 B \u53c8\u540c\u65f6\u4f7f\u7528\u4e86\u539f\u6765\u7684\u6307\u9488\u6765\u5206\u914d\u5185\u5b58\u7684\u60c5\u51b5\u3002\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u6709\u4e24\u79cd\u65b9\u6848\uff1a</p> <ul> <li>\u5bf9\u5206\u914d\u5185\u5b58\u7a7a\u95f4\u7684\u52a8\u4f5c\u8fdb\u884c\u540c\u6b65\u5904\u7406\uff08\u91c7\u7528 CAS + \u5931\u8d25\u91cd\u8bd5\u6765\u4fdd\u969c\u66f4\u65b0\u64cd\u4f5c\u7684\u539f\u5b50\u6027\uff09\uff1b</li> <li>\u628a\u5185\u5b58\u5206\u914d\u7684\u52a8\u4f5c\u6309\u7167\u7ebf\u7a0b\u5212\u5206\u5728\u4e0d\u540c\u7684\u7a7a\u95f4\u4e4b\u4e2d\u8fdb\u884c\uff0c\u5373\u6bcf\u4e2a\u7ebf\u7a0b\u5728 Java \u5806\u4e2d\u9884\u5148\u5206\u914d\u4e00\u5c0f\u5757\u5185\u5b58\uff0c\u79f0\u4e3a\u672c\u5730\u7ebf\u7a0b\u5206\u914d\u7f13\u51b2\uff08Thread Local Allocation Buffer, TLAB\uff09\u3002\u54ea\u4e2a\u7ebf\u7a0b\u8981\u5206\u914d\u5185\u5b58\uff0c\u5c31\u5728\u54ea\u4e2a\u7ebf\u7a0b\u7684 TLAB \u4e0a\u5206\u914d\u3002\u53ea\u6709 TLAB \u7528\u5b8c\u5e76\u5206\u914d\u65b0\u7684 TLAB \u65f6\uff0c\u624d\u9700\u8981\u540c\u6b65\u9501\u3002\u901a\u8fc7-XX:+/-UserTLAB\u53c2\u6570\u6765\u8bbe\u5b9a\u865a\u62df\u673a\u662f\u5426\u4f7f\u7528TLAB\u3002</li> </ul> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_7","title":"\u5bf9\u8c61\u7684\u8bbf\u95ee\u5b9a\u4f4d","text":"<p>Java\u7a0b\u5e8f\u9700\u8981\u901a\u8fc7 JVM \u6808\u4e0a\u7684\u5f15\u7528\u8bbf\u95ee\u5806\u4e2d\u7684\u5177\u4f53\u5bf9\u8c61\u3002\u5bf9\u8c61\u7684\u8bbf\u95ee\u65b9\u5f0f\u53d6\u51b3\u4e8e JVM \u865a\u62df\u673a\u7684\u5b9e\u73b0\u3002\u76ee\u524d\u4e3b\u6d41\u7684\u8bbf\u95ee\u65b9\u5f0f\u6709 \u53e5\u67c4 \u548c \u76f4\u63a5\u6307\u9488 \u4e24\u79cd\u65b9\u5f0f\u3002</p> <p>\u6307\u9488\uff1a \u6307\u5411\u5bf9\u8c61\uff0c\u4ee3\u8868\u4e00\u4e2a\u5bf9\u8c61\u5728\u5185\u5b58\u4e2d\u7684\u8d77\u59cb\u5730\u5740\u3002</p> <p>\u53e5\u67c4\uff1a \u53ef\u4ee5\u7406\u89e3\u4e3a\u6307\u5411\u6307\u9488\u7684\u6307\u9488\uff0c\u7ef4\u62a4\u7740\u5bf9\u8c61\u7684\u6307\u9488\u3002\u53e5\u67c4\u4e0d\u76f4\u63a5\u6307\u5411\u5bf9\u8c61\uff0c\u800c\u662f\u6307\u5411\u5bf9\u8c61\u7684\u6307\u9488\uff08\u53e5\u67c4\u4e0d\u53d1\u751f\u53d8\u5316\uff0c\u6307\u5411\u56fa\u5b9a\u5185\u5b58\u5730\u5740\uff09\uff0c\u518d\u7531\u5bf9\u8c61\u7684\u6307\u9488\u6307\u5411\u5bf9\u8c61\u7684\u771f\u5b9e\u5185\u5b58\u5730\u5740\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_8","title":"\u53e5\u67c4\u8bbf\u95ee","text":"<p>Java\u5806\u4e2d\u5212\u5206\u51fa\u4e00\u5757\u5185\u5b58\u6765\u4f5c\u4e3a\u53e5\u67c4\u6c60\uff0c\u5f15\u7528\u4e2d\u5b58\u50a8\u5bf9\u8c61\u7684\u53e5\u67c4\u5730\u5740\uff0c\u800c\u53e5\u67c4\u4e2d\u5305\u542b\u4e86\u5bf9\u8c61\u5b9e\u4f8b\u6570\u636e\u4e0e\u5bf9\u8c61\u7c7b\u578b\u6570\u636e\u5404\u81ea\u7684\u5177\u4f53\u5730\u5740\u4fe1\u606f\uff0c\u5177\u4f53\u6784\u9020\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u4f18\u52bf\uff1a\u5f15\u7528\u4e2d\u5b58\u50a8\u7684\u662f\u7a33\u5b9a\u7684\u53e5\u67c4\u5730\u5740\uff0c\u5728\u5bf9\u8c61\u88ab\u79fb\u52a8\uff08\u5783\u573e\u6536\u96c6\u65f6\u79fb\u52a8\u5bf9\u8c61\u662f\u975e\u5e38\u666e\u904d\u7684\u884c\u4e3a\uff09\u65f6\u53ea\u4f1a\u6539\u53d8\u53e5\u67c4\u4e2d\u7684\u5b9e\u4f8b\u6570\u636e\u6307\u9488\uff0c\u800c\u5f15\u7528\u672c\u8eab\u4e0d\u9700\u8981\u4fee\u6539\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_9","title":"\u76f4\u63a5\u6307\u9488","text":"<p>\u5982\u679c\u4f7f\u7528\u76f4\u63a5\u6307\u9488\u8bbf\u95ee\uff0c\u5f15\u7528 \u4e2d\u5b58\u50a8\u7684\u76f4\u63a5\u5c31\u662f\u5bf9\u8c61\u5730\u5740\uff0c\u90a3\u4e48Java\u5806\u5bf9\u8c61\u5185\u90e8\u7684\u5e03\u5c40\u4e2d\u5c31\u5fc5\u987b\u8003\u8651\u5982\u4f55\u653e\u7f6e\u8bbf\u95ee\u7c7b\u578b\u6570\u636e\u7684\u76f8\u5173\u4fe1\u606f\u3002</p> <p></p> <p>\u4f18\u52bf\uff1a\u901f\u5ea6\u66f4\u5feb\uff0c\u8282\u7701\u4e86\u4e00\u6b21\u6307\u9488\u5b9a\u4f4d\u7684\u65f6\u95f4\u5f00\u9500\u3002\u7531\u4e8e\u5bf9\u8c61\u7684\u8bbf\u95ee\u5728Java\u4e2d\u975e\u5e38\u9891\u7e41\uff0c\u56e0\u6b64\u8fd9\u7c7b\u5f00\u9500\u79ef\u5c11\u6210\u591a\u540e\u4e5f\u662f\u975e\u5e38\u53ef\u89c2\u7684\u6267\u884c\u6210\u672c\u3002HotSpot \u4e2d\u91c7\u7528\u7684\u5c31\u662f\u8fd9\u79cd\u65b9\u5f0f\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_10","title":"\u5185\u5b58\u6ea2\u51fa\u5f02\u5e38","text":""},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#java_1","title":"Java\u4f1a\u5b58\u5728\u5185\u5b58\u6cc4\u6f0f\u5417\uff1f\u8bf7\u7b80\u5355\u63cf\u8ff0","text":"<p>\u5185\u5b58\u6cc4\u6f0f\u662f\u6307\u4e0d\u518d\u88ab\u4f7f\u7528\u7684\u5bf9\u8c61\u6216\u8005\u53d8\u91cf\u4e00\u76f4\u88ab\u5360\u636e\u5728\u5185\u5b58\u4e2d\u3002\u7406\u8bba\u4e0a\u6765\u8bf4\uff0cJava\u662f\u6709GC\u5783\u573e\u56de\u6536\u673a\u5236\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0d\u518d\u88ab\u4f7f\u7528\u7684\u5bf9\u8c61\uff0c\u4f1a\u88abGC\u81ea\u52a8\u56de\u6536\u6389\uff0c\u81ea\u52a8\u4ece\u5185\u5b58\u4e2d\u6e05\u9664\u3002</p> <p>\u4f46\u662f\uff0c\u5373\u4f7f\u8fd9\u6837\uff0cJava\u4e5f\u8fd8\u662f\u5b58\u5728\u7740\u5185\u5b58\u6cc4\u6f0f\u7684\u60c5\u51b5\uff0cjava\u5bfc\u81f4\u5185\u5b58\u6cc4\u9732\u7684\u539f\u56e0\u5f88\u660e\u786e\uff1a\u957f\u751f\u547d\u5468\u671f\u7684\u5bf9\u8c61\u6301\u6709\u77ed\u751f\u547d\u5468\u671f\u5bf9\u8c61\u7684\u5f15\u7528\u5c31\u5f88\u53ef\u80fd\u53d1\u751f\u5185\u5b58\u6cc4\u9732\uff0c\u5c3d\u7ba1\u77ed\u751f\u547d\u5468\u671f\u5bf9\u8c61\u5df2\u7ecf\u4e0d\u518d\u9700\u8981\uff0c\u4f46\u662f\u56e0\u4e3a\u957f\u751f\u547d\u5468\u671f\u5bf9\u8c61\u6301\u6709\u5b83\u7684\u5f15\u7528\u800c\u5bfc\u81f4\u4e0d\u80fd\u88ab\u56de\u6536\uff0c\u8fd9\u5c31\u662fjava\u4e2d\u5185\u5b58\u6cc4\u9732\u7684\u53d1\u751f\u573a\u666f\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_11","title":"\u5783\u573e\u6536\u96c6\u5668","text":""},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#java_2","title":"\u7b80\u8ff0Java\u5783\u573e\u56de\u6536\u673a\u5236","text":"<p>\u5728java\u4e2d\uff0c\u7a0b\u5e8f\u5458\u662f\u4e0d\u9700\u8981\u663e\u793a\u7684\u53bb\u91ca\u653e\u4e00\u4e2a\u5bf9\u8c61\u7684\u5185\u5b58\u7684\uff0c\u800c\u662f\u7531\u865a\u62df\u673a\u81ea\u884c\u6267\u884c\u3002\u5728JVM\u4e2d\uff0c\u6709\u4e00\u4e2a\u5783\u573e\u56de\u6536\u7ebf\u7a0b\uff0c\u5b83\u662f\u4f4e\u4f18\u5148\u7ea7\u7684\uff0c\u5728\u6b63\u5e38\u60c5\u51b5\u4e0b\u662f\u4e0d\u4f1a\u6267\u884c\u7684\uff0c\u53ea\u6709\u5728\u865a\u62df\u673a\u7a7a\u95f2\u6216\u8005\u5f53\u524d\u5806\u5185\u5b58\u4e0d\u8db3\u65f6\uff0c\u624d\u4f1a\u89e6\u53d1\u6267\u884c\uff0c\u626b\u9762\u90a3\u4e9b\u6ca1\u6709\u88ab\u4efb\u4f55\u5f15\u7528\u7684\u5bf9\u8c61\uff0c\u5e76\u5c06\u5b83\u4eec\u6dfb\u52a0\u5230\u8981\u56de\u6536\u7684\u96c6\u5408\u4e2d\uff0c\u8fdb\u884c\u56de\u6536\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#gcgc","title":"GC\u662f\u4ec0\u4e48\uff1f\u4e3a\u4ec0\u4e48\u8981GC","text":"<p>GC \u662f\u5783\u573e\u6536\u96c6\u7684\u610f\u601d\uff08Gabage Collection\uff09,\u5185\u5b58\u5904\u7406\u662f\u7f16\u7a0b\u4eba\u5458\u5bb9\u6613\u51fa\u73b0\u95ee\u9898\u7684\u5730\u65b9\uff0c\u5fd8\u8bb0\u6216\u8005\u9519\u8bef\u7684\u5185\u5b58</p> <p>\u56de\u6536\u4f1a\u5bfc\u81f4\u7a0b\u5e8f\u6216\u7cfb\u7edf\u7684\u4e0d\u7a33\u5b9a\u751a\u81f3\u5d29\u6e83\uff0cJava \u63d0\u4f9b\u7684 GC \u529f\u80fd\u53ef\u4ee5\u81ea\u52a8\u76d1\u6d4b\u5bf9\u8c61\u662f\u5426\u8d85\u8fc7\u4f5c\u7528\u57df\u4ece\u800c\u8fbe\u5230\u81ea\u52a8</p> <p>\u56de\u6536\u5185\u5b58\u7684\u76ee\u7684\uff0cJava \u8bed\u8a00\u6ca1\u6709\u63d0\u4f9b\u91ca\u653e\u5df2\u5206\u914d\u5185\u5b58\u7684\u663e\u793a\u64cd\u4f5c\u65b9\u6cd5\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#2","title":"\u5783\u573e\u56de\u6536\u7684\u4f18\u70b9\u548c\u539f\u7406\u3002\u5e76\u8003\u86512\u79cd\u56de\u6536\u673a\u5236","text":"<p>java\u8bed\u8a00\u6700\u663e\u8457\u7684\u7279\u70b9\u5c31\u662f\u5f15\u5165\u4e86\u5783\u573e\u56de\u6536\u673a\u5236\uff0c\u5b83\u4f7fjava\u7a0b\u5e8f\u5458\u5728\u7f16\u5199\u7a0b\u5e8f\u65f6\u4e0d\u518d\u8003\u8651\u5185\u5b58\u7ba1\u7406\u7684\u95ee\u9898\u3002</p> <p>\u7531\u4e8e\u6709\u8fd9\u4e2a\u5783\u573e\u56de\u6536\u673a\u5236\uff0cjava\u4e2d\u7684\u5bf9\u8c61\u4e0d\u518d\u6709\u201c\u4f5c\u7528\u57df\u201d\u7684\u6982\u5ff5\uff0c\u53ea\u6709\u5f15\u7528\u7684\u5bf9\u8c61\u624d\u6709\u201c\u4f5c\u7528\u57df\u201d\u3002</p> <p>\u5783\u573e\u56de\u6536\u673a\u5236\u6709\u6548\u7684\u9632\u6b62\u4e86\u5185\u5b58\u6cc4\u9732\uff0c\u53ef\u4ee5\u6709\u6548\u7684\u4f7f\u7528\u53ef\u4f7f\u7528\u7684\u5185\u5b58\u3002</p> <p>\u5783\u573e\u56de\u6536\u5668\u901a\u5e38\u4f5c\u4e3a\u4e00\u4e2a\u5355\u72ec\u7684\u4f4e\u7ea7\u522b\u7684\u7ebf\u7a0b\u8fd0\u884c\uff0c\u5728\u4e0d\u53ef\u9884\u77e5\u7684\u60c5\u51b5\u4e0b\u5bf9\u5185\u5b58\u5806\u4e2d\u5df2\u7ecf\u6b7b\u4ea1\u7684\u6216\u5f88\u957f\u65f6\u95f4\u6ca1\u6709\u7528\u8fc7\u7684\u5bf9\u8c61\u8fdb\u884c\u6e05\u9664\u548c\u56de\u6536\u3002</p> <p>\u7a0b\u5e8f\u5458\u4e0d\u80fd\u5b9e\u65f6\u7684\u5bf9\u67d0\u4e2a\u5bf9\u8c61\u6216\u6240\u6709\u5bf9\u8c61\u8c03\u7528\u5783\u573e\u56de\u6536\u5668\u8fdb\u884c\u5783\u573e\u56de\u6536\u3002</p> <p>\u5783\u573e\u56de\u6536\u6709\u5206\u4ee3\u590d\u5236\u5783\u573e\u56de\u6536\u3001\u6807\u8bb0\u5783\u573e\u56de\u6536\u3001\u589e\u91cf\u5783\u573e\u56de\u6536\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_12","title":"\u5783\u573e\u56de\u6536\u5668\u7684\u57fa\u672c\u539f\u7406\u662f\u4ec0\u4e48\uff1f\u5783\u573e\u56de\u6536\u5668\u53ef\u4ee5\u9a6c\u4e0a\u56de\u6536\u5185\u5b58\u5417\uff1f\u6709\u4ec0\u4e48\u529e\u6cd5\u4e3b\u52a8\u901a\u77e5\u865a\u62df\u673a\u8fdb\u884c\u5783\u573e\u56de\u6536\uff1f","text":"<p>\u5bf9\u4e8eGC\u6765\u8bf4\uff0c\u5f53\u7a0b\u5e8f\u5458\u521b\u5efa\u5bf9\u8c61\u65f6\uff0cGC\u5c31\u5f00\u59cb\u76d1\u63a7\u8fd9\u4e2a\u5bf9\u8c61\u7684\u5730\u5740\u3001\u5927\u5c0f\u4ee5\u53ca\u4f7f\u7528\u60c5\u51b5\u3002</p> <p>\u901a\u5e38\uff0cGC\u91c7\u7528\u6709\u5411\u56fe\u7684\u65b9\u5f0f\u8bb0\u5f55\u548c\u7ba1\u7406\u5806(heap)\u4e2d\u7684\u6240\u6709\u5bf9\u8c61\u3002\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u786e\u5b9a\u54ea\u4e9b\u5bf9\u8c61\u662f\"\u53ef\u8fbe\u7684\"\uff0c\u54ea\u4e9b\u5bf9\u8c61\u662f\"\u4e0d\u53ef\u8fbe\u7684\"\u3002\u5f53GC\u786e\u5b9a\u4e00\u4e9b\u5bf9\u8c61\u4e3a\"\u4e0d\u53ef\u8fbe\"\u65f6\uff0cGC\u5c31\u6709\u8d23\u4efb\u56de\u6536\u8fd9\u4e9b\u5185\u5b58\u7a7a\u95f4\u3002</p> <p>\u53ef\u4ee5\u3002\u7a0b\u5e8f\u5458\u53ef\u4ee5\u624b\u52a8\u6267\u884cSystem.gc()\uff0c\u901a\u77e5GC\u8fd0\u884c\uff0c\u4f46\u662fJava\u8bed\u8a00\u89c4\u8303\u5e76\u4e0d\u4fdd\u8bc1GC\u4e00\u5b9a\u4f1a\u6267\u884c\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#java_3","title":"Java \u4e2d\u90fd\u6709\u54ea\u4e9b\u5f15\u7528\u7c7b\u578b\uff1f","text":"<ul> <li>\u5f3a\u5f15\u7528\uff1a\u53d1\u751f gc \u7684\u65f6\u5019\u4e0d\u4f1a\u88ab\u56de\u6536\u3002</li> <li>\u8f6f\u5f15\u7528\uff1a\u6709\u7528\u4f46\u4e0d\u662f\u5fc5\u987b\u7684\u5bf9\u8c61\uff0c\u5728\u53d1\u751f\u5185\u5b58\u6ea2\u51fa\u4e4b\u524d\u4f1a\u88ab\u56de\u6536\u3002</li> <li>\u5f31\u5f15\u7528\uff1a\u6709\u7528\u4f46\u4e0d\u662f\u5fc5\u987b\u7684\u5bf9\u8c61\uff0c\u5728\u4e0b\u4e00\u6b21GC\u65f6\u4f1a\u88ab\u56de\u6536\u3002</li> <li>\u865a\u5f15\u7528\uff08\u5e7d\u7075\u5f15\u7528/\u5e7b\u5f71\u5f15\u7528\uff09\uff1a\u65e0\u6cd5\u901a\u8fc7\u865a\u5f15\u7528\u83b7\u5f97\u5bf9\u8c61\uff0c\u7528 PhantomReference \u5b9e\u73b0\u865a\u5f15\u7528\uff0c\u865a\u5f15\u7528\u7684\u7528\u9014\u662f\u5728 gc \u65f6\u8fd4\u56de\u4e00\u4e2a\u901a\u77e5\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_13","title":"\u600e\u4e48\u5224\u65ad\u5bf9\u8c61\u662f\u5426\u53ef\u4ee5\u88ab\u56de\u6536\uff1f","text":"<p>\u5783\u573e\u6536\u96c6\u5668\u5728\u505a\u5783\u573e\u56de\u6536\u7684\u65f6\u5019\uff0c\u9996\u5148\u9700\u8981\u5224\u5b9a\u7684\u5c31\u662f\u54ea\u4e9b\u5185\u5b58\u662f\u9700\u8981\u88ab\u56de\u6536\u7684\uff0c\u54ea\u4e9b\u5bf9\u8c61\u662f\u300c\u5b58\u6d3b\u300d\u7684\uff0c\u662f\u4e0d\u53ef\u4ee5\u88ab\u56de\u6536\u7684\uff1b\u54ea\u4e9b\u5bf9\u8c61\u5df2\u7ecf\u300c\u6b7b\u6389\u300d\u4e86\uff0c\u9700\u8981\u88ab\u56de\u6536\u3002</p> <p>\u4e00\u822c\u6709\u4e24\u79cd\u65b9\u6cd5\u6765\u5224\u65ad\uff1a</p> <ul> <li>\u5f15\u7528\u8ba1\u6570\u5668\u6cd5\uff1a\u4e3a\u6bcf\u4e2a\u5bf9\u8c61\u521b\u5efa\u4e00\u4e2a\u5f15\u7528\u8ba1\u6570\uff0c\u6709\u5bf9\u8c61\u5f15\u7528\u65f6\u8ba1\u6570\u5668 +1\uff0c\u5f15\u7528\u88ab\u91ca\u653e\u65f6\u8ba1\u6570 -1\uff0c\u5f53\u8ba1\u6570\u5668\u4e3a 0 \u65f6\u5c31\u53ef\u4ee5\u88ab\u56de\u6536\u3002\u5b83\u6709\u4e00\u4e2a\u7f3a\u70b9\u4e0d\u80fd\u89e3\u51b3\u5faa\u73af\u5f15\u7528\u7684\u95ee\u9898\uff1b</li> <li>\u53ef\u8fbe\u6027\u5206\u6790\u7b97\u6cd5\uff1a\u4ece GC Roots \u5f00\u59cb\u5411\u4e0b\u641c\u7d22\uff0c\u641c\u7d22\u6240\u8d70\u8fc7\u7684\u8def\u5f84\u79f0\u4e3a\u5f15\u7528\u94fe\u3002\u5f53\u4e00\u4e2a\u5bf9\u8c61\u5230 GC Roots \u6ca1\u6709\u4efb\u4f55\u5f15\u7528\u94fe\u76f8\u8fde\u65f6\uff0c\u5219\u8bc1\u660e\u6b64\u5bf9\u8c61\u662f\u53ef\u4ee5\u88ab\u56de\u6536\u7684\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#java_4","title":"\u5728Java\u4e2d\uff0c\u5bf9\u8c61\u4ec0\u4e48\u65f6\u5019\u53ef\u4ee5\u88ab\u5783\u573e\u56de\u6536","text":"<p>\u5f53\u5bf9\u8c61\u5bf9\u5f53\u524d\u4f7f\u7528\u8fd9\u4e2a\u5bf9\u8c61\u7684\u5e94\u7528\u7a0b\u5e8f\u53d8\u5f97\u4e0d\u53ef\u89e6\u53ca\u7684\u65f6\u5019\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u5c31\u53ef\u4ee5\u88ab\u56de\u6536\u4e86\u3002 \u5783\u573e\u56de\u6536\u4e0d\u4f1a\u53d1\u751f\u5728\u6c38\u4e45\u4ee3\uff0c\u5982\u679c\u6c38\u4e45\u4ee3\u6ee1\u4e86\u6216\u8005\u662f\u8d85\u8fc7\u4e86\u4e34\u754c\u503c\uff0c\u4f1a\u89e6\u53d1\u5b8c\u5168\u5783\u573e\u56de\u6536(Full GC)\u3002\u5982\u679c\u4f60\u4ed4\u7ec6\u67e5\u770b\u5783\u573e\u6536\u96c6\u5668\u7684\u8f93\u51fa\u4fe1\u606f\uff0c\u5c31\u4f1a\u53d1\u73b0\u6c38\u4e45\u4ee3\u4e5f\u662f\u88ab\u56de\u6536\u7684\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u6b63\u786e\u7684\u6c38\u4e45\u4ee3\u5927\u5c0f\u5bf9\u907f\u514dFull GC\u662f\u975e\u5e38\u91cd\u8981\u7684\u539f\u56e0\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#jvm_2","title":"JVM\u4e2d\u7684\u6c38\u4e45\u4ee3\u4e2d\u4f1a\u53d1\u751f\u5783\u573e\u56de\u6536\u5417","text":"<p>\u5783\u573e\u56de\u6536\u4e0d\u4f1a\u53d1\u751f\u5728\u6c38\u4e45\u4ee3\uff0c\u5982\u679c\u6c38\u4e45\u4ee3\u6ee1\u4e86\u6216\u8005\u662f\u8d85\u8fc7\u4e86\u4e34\u754c\u503c\uff0c\u4f1a\u89e6\u53d1\u5b8c\u5168\u5783\u573e\u56de\u6536(Full GC)\u3002\u5982\u679c\u4f60\u4ed4\u7ec6\u67e5\u770b\u5783\u573e\u6536\u96c6\u5668\u7684\u8f93\u51fa\u4fe1\u606f\uff0c\u5c31\u4f1a\u53d1\u73b0\u6c38\u4e45\u4ee3\u4e5f\u662f\u88ab\u56de\u6536\u7684\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u6b63\u786e\u7684\u6c38\u4e45\u4ee3\u5927\u5c0f\u5bf9\u907f\u514dFull GC\u662f\u975e\u5e38\u91cd\u8981\u7684\u539f\u56e0\u3002\u8bf7\u53c2\u8003\u4e0bJava8\uff1a\u4ece\u6c38\u4e45\u4ee3\u5230\u5143\u6570\u636e\u533a (\u8bd1\u8005\u6ce8\uff1aJava8\u4e2d\u5df2\u7ecf\u79fb\u9664\u4e86\u6c38\u4e45\u4ee3\uff0c\u65b0\u52a0\u4e86\u4e00\u4e2a\u53eb\u505a\u5143\u6570\u636e\u533a\u7684native\u5185\u5b58\u533a)</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#jvm_3","title":"\u8bf4\u4e00\u4e0b JVM \u6709\u54ea\u4e9b\u5783\u573e\u56de\u6536\u7b97\u6cd5\uff1f","text":"<ul> <li>\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5\uff1a\u6807\u8bb0\u65e0\u7528\u5bf9\u8c61\uff0c\u7136\u540e\u8fdb\u884c\u6e05\u9664\u56de\u6536\u3002\u7f3a\u70b9\uff1a\u6548\u7387\u4e0d\u9ad8\uff0c\u65e0\u6cd5\u6e05\u9664\u5783\u573e\u788e\u7247\u3002</li> <li>\u590d\u5236\u7b97\u6cd5\uff1a\u6309\u7167\u5bb9\u91cf\u5212\u5206\u4e8c\u4e2a\u5927\u5c0f\u76f8\u7b49\u7684\u5185\u5b58\u533a\u57df\uff0c\u5f53\u4e00\u5757\u7528\u5b8c\u7684\u65f6\u5019\u5c06\u6d3b\u7740\u7684\u5bf9\u8c61\u590d\u5236\u5230\u53e6\u4e00\u5757\u4e0a\uff0c\u7136\u540e\u518d\u628a\u5df2\u4f7f\u7528\u7684\u5185\u5b58\u7a7a\u95f4\u4e00\u6b21\u6e05\u7406\u6389\u3002\u7f3a\u70b9\uff1a\u5185\u5b58\u4f7f\u7528\u7387\u4e0d\u9ad8\uff0c\u53ea\u6709\u539f\u6765\u7684\u4e00\u534a\u3002</li> <li>\u6807\u8bb0-\u6574\u7406\u7b97\u6cd5\uff1a\u6807\u8bb0\u65e0\u7528\u5bf9\u8c61\uff0c\u8ba9\u6240\u6709\u5b58\u6d3b\u7684\u5bf9\u8c61\u90fd\u5411\u4e00\u7aef\u79fb\u52a8\uff0c\u7136\u540e\u76f4\u63a5\u6e05\u9664\u6389\u7aef\u8fb9\u754c\u4ee5\u5916\u7684\u5185\u5b58\u3002</li> <li>\u5206\u4ee3\u7b97\u6cd5\uff1a\u6839\u636e\u5bf9\u8c61\u5b58\u6d3b\u5468\u671f\u7684\u4e0d\u540c\u5c06\u5185\u5b58\u5212\u5206\u4e3a\u51e0\u5757\uff0c\u4e00\u822c\u662f\u65b0\u751f\u4ee3\u548c\u8001\u5e74\u4ee3\uff0c\u65b0\u751f\u4ee3\u57fa\u672c\u91c7\u7528\u590d\u5236\u7b97\u6cd5\uff0c\u8001\u5e74\u4ee3\u91c7\u7528\u6807\u8bb0\u6574\u7406\u7b97\u6cd5\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#-","title":"\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5","text":"<p>\u6807\u8bb0\u65e0\u7528\u5bf9\u8c61\uff0c\u7136\u540e\u8fdb\u884c\u6e05\u9664\u56de\u6536\u3002</p> <p>\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5\uff08Mark-Sweep\uff09\u662f\u4e00\u79cd\u5e38\u89c1\u7684\u57fa\u7840\u5783\u573e\u6536\u96c6\u7b97\u6cd5\uff0c\u5b83\u5c06\u5783\u573e\u6536\u96c6\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff1a</p> <ul> <li>\u6807\u8bb0\u9636\u6bb5\uff1a\u6807\u8bb0\u51fa\u53ef\u4ee5\u56de\u6536\u7684\u5bf9\u8c61\u3002</li> <li>\u6e05\u9664\u9636\u6bb5\uff1a\u56de\u6536\u88ab\u6807\u8bb0\u7684\u5bf9\u8c61\u6240\u5360\u7528\u7684\u7a7a\u95f4\u3002</li> </ul> <p>\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5\u4e4b\u6240\u4ee5\u662f\u57fa\u7840\u7684\uff0c\u662f\u56e0\u4e3a\u540e\u9762\u8bb2\u5230\u7684\u5783\u573e\u6536\u96c6\u7b97\u6cd5\u90fd\u662f\u5728\u6b64\u7b97\u6cd5\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u6539\u8fdb\u7684\u3002</p> <p>\u4f18\u70b9\uff1a\u5b9e\u73b0\u7b80\u5355\uff0c\u4e0d\u9700\u8981\u5bf9\u8c61\u8fdb\u884c\u79fb\u52a8\u3002</p> <p>\u7f3a\u70b9\uff1a\u6807\u8bb0\u3001\u6e05\u9664\u8fc7\u7a0b\u6548\u7387\u4f4e\uff0c\u4ea7\u751f\u5927\u91cf\u4e0d\u8fde\u7eed\u7684\u5185\u5b58\u788e\u7247\uff0c\u63d0\u9ad8\u4e86\u5783\u573e\u56de\u6536\u7684\u9891\u7387\u3002</p> <p>\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5\u7684\u6267\u884c\u7684\u8fc7\u7a0b\u5982\u4e0b\u56fe\u6240\u793a</p> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_14","title":"\u590d\u5236\u7b97\u6cd5","text":"<p>\u4e3a\u4e86\u89e3\u51b3\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5\u7684\u6548\u7387\u4e0d\u9ad8\u7684\u95ee\u9898\uff0c\u4ea7\u751f\u4e86\u590d\u5236\u7b97\u6cd5\u3002\u5b83\u628a\u5185\u5b58\u7a7a\u95f4\u5212\u4e3a\u4e24\u4e2a\u76f8\u7b49\u7684\u533a\u57df\uff0c\u6bcf\u6b21\u53ea\u4f7f\u7528\u5176\u4e2d\u4e00\u4e2a\u533a\u57df\u3002\u5783\u573e\u6536\u96c6\u65f6\uff0c\u904d\u5386\u5f53\u524d\u4f7f\u7528\u7684\u533a\u57df\uff0c\u628a\u5b58\u6d3b\u5bf9\u8c61\u590d\u5236\u5230\u53e6\u5916\u4e00\u4e2a\u533a\u57df\u4e2d\uff0c\u6700\u540e\u5c06\u5f53\u524d\u4f7f\u7528\u7684\u533a\u57df\u7684\u53ef\u56de\u6536\u7684\u5bf9\u8c61\u8fdb\u884c\u56de\u6536\u3002</p> <p>\u4f18\u70b9\uff1a\u6309\u987a\u5e8f\u5206\u914d\u5185\u5b58\u5373\u53ef\uff0c\u5b9e\u73b0\u7b80\u5355\u3001\u8fd0\u884c\u9ad8\u6548\uff0c\u4e0d\u7528\u8003\u8651\u5185\u5b58\u788e\u7247\u3002</p> <p>\u7f3a\u70b9\uff1a\u53ef\u7528\u7684\u5185\u5b58\u5927\u5c0f\u7f29\u5c0f\u4e3a\u539f\u6765\u7684\u4e00\u534a\uff0c\u5bf9\u8c61\u5b58\u6d3b\u7387\u9ad8\u65f6\u4f1a\u9891\u7e41\u8fdb\u884c\u590d\u5236\u3002</p> <p>\u590d\u5236\u7b97\u6cd5\u7684\u6267\u884c\u8fc7\u7a0b\u5982\u4e0b\u56fe\u6240\u793a</p> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#-_1","title":"\u6807\u8bb0-\u6574\u7406\u7b97\u6cd5","text":"<p>\u5728\u65b0\u751f\u4ee3\u4e2d\u53ef\u4ee5\u4f7f\u7528\u590d\u5236\u7b97\u6cd5\uff0c\u4f46\u662f\u5728\u8001\u5e74\u4ee3\u5c31\u4e0d\u80fd\u9009\u62e9\u590d\u5236\u7b97\u6cd5\u4e86\uff0c\u56e0\u4e3a\u8001\u5e74\u4ee3\u7684\u5bf9\u8c61\u5b58\u6d3b\u7387\u4f1a\u8f83\u9ad8\uff0c\u8fd9\u6837\u4f1a\u6709\u8f83\u591a\u7684\u590d\u5236\u64cd\u4f5c\uff0c\u5bfc\u81f4\u6548\u7387\u53d8\u4f4e\u3002\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5\u53ef\u4ee5\u5e94\u7528\u5728\u8001\u5e74\u4ee3\u4e2d\uff0c\u4f46\u662f\u5b83\u6548\u7387\u4e0d\u9ad8\uff0c\u5728\u5185\u5b58\u56de\u6536\u540e\u5bb9\u6613\u4ea7\u751f\u5927\u91cf\u5185\u5b58\u788e\u7247\u3002\u56e0\u6b64\u5c31\u51fa\u73b0\u4e86\u4e00\u79cd\u6807\u8bb0-\u6574\u7406\u7b97\u6cd5\uff08Mark-Compact\uff09\u7b97\u6cd5\uff0c\u4e0e\u6807\u8bb0-\u6574\u7406\u7b97\u6cd5\u4e0d\u540c\u7684\u662f\uff0c\u5728\u6807\u8bb0\u53ef\u56de\u6536\u7684\u5bf9\u8c61\u540e\u5c06\u6240\u6709\u5b58\u6d3b\u7684\u5bf9\u8c61\u538b\u7f29\u5230\u5185\u5b58\u7684\u4e00\u7aef\uff0c\u4f7f\u4ed6\u4eec\u7d27\u51d1\u7684\u6392\u5217\u5728\u4e00\u8d77\uff0c\u7136\u540e\u5bf9\u7aef\u8fb9\u754c\u4ee5\u5916\u7684\u5185\u5b58\u8fdb\u884c\u56de\u6536\u3002\u56de\u6536\u540e\uff0c\u5df2\u7528\u548c\u672a\u7528\u7684\u5185\u5b58\u90fd\u5404\u81ea\u4e00\u8fb9\u3002</p> <p>\u4f18\u70b9\uff1a\u89e3\u51b3\u4e86\u6807\u8bb0-\u6e05\u7406\u7b97\u6cd5\u5b58\u5728\u7684\u5185\u5b58\u788e\u7247\u95ee\u9898\u3002</p> <p>\u7f3a\u70b9\uff1a\u4ecd\u9700\u8981\u8fdb\u884c\u5c40\u90e8\u5bf9\u8c61\u79fb\u52a8\uff0c\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u964d\u4f4e\u4e86\u6548\u7387\u3002</p> <p>\u6807\u8bb0-\u6574\u7406\u7b97\u6cd5\u7684\u6267\u884c\u8fc7\u7a0b\u5982\u4e0b\u56fe\u6240\u793a</p> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_15","title":"\u5206\u4ee3\u6536\u96c6\u7b97\u6cd5","text":"<p>\u5f53\u524d\u5546\u4e1a\u865a\u62df\u673a\u90fd\u91c7\u7528\u5206\u4ee3\u6536\u96c6\u7684\u5783\u573e\u6536\u96c6\u7b97\u6cd5\u3002\u5206\u4ee3\u6536\u96c6\u7b97\u6cd5\uff0c\u987e\u540d\u601d\u4e49\u662f\u6839\u636e\u5bf9\u8c61\u7684\u5b58\u6d3b\u5468\u671f\u5c06\u5185\u5b58\u5212\u5206\u4e3a\u51e0\u5757\u3002\u4e00\u822c\u5305\u62ec\u5e74\u8f7b\u4ee3\u3001\u8001\u5e74\u4ee3 \u548c \u6c38\u4e45\u4ee3\uff0c\u5982\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#jvm_4","title":"\u8bf4\u4e00\u4e0b JVM \u6709\u54ea\u4e9b\u5783\u573e\u56de\u6536\u5668\uff1f","text":"<p>\u5982\u679c\u8bf4\u5783\u573e\u6536\u96c6\u7b97\u6cd5\u662f\u5185\u5b58\u56de\u6536\u7684\u65b9\u6cd5\u8bba\uff0c\u90a3\u4e48\u5783\u573e\u6536\u96c6\u5668\u5c31\u662f\u5185\u5b58\u56de\u6536\u7684\u5177\u4f53\u5b9e\u73b0\u3002\u4e0b\u56fe\u5c55\u793a\u4e867\u79cd\u4f5c\u7528\u4e8e\u4e0d\u540c\u5206\u4ee3\u7684\u6536\u96c6\u5668\uff0c\u5176\u4e2d\u7528\u4e8e\u56de\u6536\u65b0\u751f\u4ee3\u7684\u6536\u96c6\u5668\u5305\u62ecSerial\u3001PraNew\u3001Parallel Scavenge\uff0c\u56de\u6536\u8001\u5e74\u4ee3\u7684\u6536\u96c6\u5668\u5305\u62ecSerial Old\u3001Parallel Old\u3001CMS\uff0c\u8fd8\u6709\u7528\u4e8e\u56de\u6536\u6574\u4e2aJava\u5806\u7684G1\u6536\u96c6\u5668\u3002\u4e0d\u540c\u6536\u96c6\u5668\u4e4b\u95f4\u7684\u8fde\u7ebf\u8868\u793a\u5b83\u4eec\u53ef\u4ee5\u642d\u914d\u4f7f\u7528\u3002</p> <p></p> <ul> <li>Serial\u6536\u96c6\u5668\uff08\u590d\u5236\u7b97\u6cd5): \u65b0\u751f\u4ee3\u5355\u7ebf\u7a0b\u6536\u96c6\u5668\uff0c\u6807\u8bb0\u548c\u6e05\u7406\u90fd\u662f\u5355\u7ebf\u7a0b\uff0c\u4f18\u70b9\u662f\u7b80\u5355\u9ad8\u6548\uff1b</li> <li>ParNew\u6536\u96c6\u5668 (\u590d\u5236\u7b97\u6cd5): \u65b0\u751f\u4ee3\u6536\u5e76\u884c\u96c6\u5668\uff0c\u5b9e\u9645\u4e0a\u662fSerial\u6536\u96c6\u5668\u7684\u591a\u7ebf\u7a0b\u7248\u672c\uff0c\u5728\u591a\u6838CPU\u73af\u5883\u4e0b\u6709\u7740\u6bd4Serial\u66f4\u597d\u7684\u8868\u73b0\uff1b</li> <li>Parallel Scavenge\u6536\u96c6\u5668 (\u590d\u5236\u7b97\u6cd5): \u65b0\u751f\u4ee3\u5e76\u884c\u6536\u96c6\u5668\uff0c\u8ffd\u6c42\u9ad8\u541e\u5410\u91cf\uff0c\u9ad8\u6548\u5229\u7528 CPU\u3002\u541e\u5410\u91cf = \u7528\u6237\u7ebf\u7a0b\u65f6\u95f4/(\u7528\u6237\u7ebf\u7a0b\u65f6\u95f4+GC\u7ebf\u7a0b\u65f6\u95f4)\uff0c\u9ad8\u541e\u5410\u91cf\u53ef\u4ee5\u9ad8\u6548\u7387\u7684\u5229\u7528CPU\u65f6\u95f4\uff0c\u5c3d\u5feb\u5b8c\u6210\u7a0b\u5e8f\u7684\u8fd0\u7b97\u4efb\u52a1\uff0c\u9002\u5408\u540e\u53f0\u5e94\u7528\u7b49\u5bf9\u4ea4\u4e92\u76f8\u5e94\u8981\u6c42\u4e0d\u9ad8\u7684\u573a\u666f\uff1b</li> <li>Serial Old\u6536\u96c6\u5668 (\u6807\u8bb0-\u6574\u7406\u7b97\u6cd5): \u8001\u5e74\u4ee3\u5355\u7ebf\u7a0b\u6536\u96c6\u5668\uff0cSerial\u6536\u96c6\u5668\u7684\u8001\u5e74\u4ee3\u7248\u672c\uff1b</li> <li>Parallel Old\u6536\u96c6\u5668 (\u6807\u8bb0-\u6574\u7406\u7b97\u6cd5)\uff1a \u8001\u5e74\u4ee3\u5e76\u884c\u6536\u96c6\u5668\uff0c\u541e\u5410\u91cf\u4f18\u5148\uff0cParallel Scavenge\u6536\u96c6\u5668\u7684\u8001\u5e74\u4ee3\u7248\u672c\uff1b</li> <li>CMS(Concurrent Mark Sweep)\u6536\u96c6\u5668\uff08\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5\uff09\uff1a \u8001\u5e74\u4ee3\u5e76\u884c\u6536\u96c6\u5668\uff0c\u4ee5\u83b7\u53d6\u6700\u77ed\u56de\u6536\u505c\u987f\u65f6\u95f4\u4e3a\u76ee\u6807\u7684\u6536\u96c6\u5668\uff0c\u5177\u6709\u9ad8\u5e76\u53d1\u3001\u4f4e\u505c\u987f\u7684\u7279\u70b9\uff0c\u8ffd\u6c42\u6700\u77edGC\u56de\u6536\u505c\u987f\u65f6\u95f4\u3002</li> <li>G1(Garbage First)\u6536\u96c6\u5668 (\u6807\u8bb0-\u6574\u7406\u7b97\u6cd5)\uff1a Java\u5806\u5e76\u884c\u6536\u96c6\u5668\uff0cG1\u6536\u96c6\u5668\u662fJDK1.7\u63d0\u4f9b\u7684\u4e00\u4e2a\u65b0\u6536\u96c6\u5668\uff0cG1\u6536\u96c6\u5668\u57fa\u4e8e\u201c\u6807\u8bb0-\u6574\u7406\u201d\u7b97\u6cd5\u5b9e\u73b0\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e0d\u4f1a\u4ea7\u751f\u5185\u5b58\u788e\u7247\u3002\u6b64\u5916\uff0cG1\u6536\u96c6\u5668\u4e0d\u540c\u4e8e\u4e4b\u524d\u7684\u6536\u96c6\u5668\u7684\u4e00\u4e2a\u91cd\u8981\u7279\u70b9\u662f\uff1aG1\u56de\u6536\u7684\u8303\u56f4\u662f\u6574\u4e2aJava\u5806(\u5305\u62ec\u65b0\u751f\u4ee3\uff0c\u8001\u5e74\u4ee3)\uff0c\u800c\u524d\u516d\u79cd\u6536\u96c6\u5668\u56de\u6536\u7684\u8303\u56f4\u4ec5\u9650\u4e8e\u65b0\u751f\u4ee3\u6216\u8001\u5e74\u4ee3\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#cms","title":"\u8be6\u7ec6\u4ecb\u7ecd\u4e00\u4e0b CMS \u5783\u573e\u56de\u6536\u5668\uff1f","text":"<p>CMS \u662f\u82f1\u6587 Concurrent Mark-Sweep \u7684\u7b80\u79f0\uff0c\u662f\u4ee5\u727a\u7272\u541e\u5410\u91cf\u4e3a\u4ee3\u4ef7\u6765\u83b7\u5f97\u6700\u77ed\u56de\u6536\u505c\u987f\u65f6\u95f4\u7684\u5783\u573e\u56de\u6536\u5668\u3002\u5bf9\u4e8e\u8981\u6c42\u670d\u52a1\u5668\u54cd\u5e94\u901f\u5ea6\u7684\u5e94\u7528\u4e0a\uff0c\u8fd9\u79cd\u5783\u573e\u56de\u6536\u5668\u975e\u5e38\u9002\u5408\u3002\u5728\u542f\u52a8 JVM \u7684\u53c2\u6570\u52a0\u4e0a\u201c-XX:+UseConcMarkSweepGC\u201d\u6765\u6307\u5b9a\u4f7f\u7528 CMS \u5783\u573e\u56de\u6536\u5668\u3002</p> <p>CMS \u4f7f\u7528\u7684\u662f\u6807\u8bb0-\u6e05\u9664\u7684\u7b97\u6cd5\u5b9e\u73b0\u7684\uff0c\u6240\u4ee5\u5728 gc \u7684\u65f6\u5019\u56de\u4ea7\u751f\u5927\u91cf\u7684\u5185\u5b58\u788e\u7247\uff0c\u5f53\u5269\u4f59\u5185\u5b58\u4e0d\u80fd\u6ee1\u8db3\u7a0b\u5e8f\u8fd0\u884c\u8981\u6c42\u65f6\uff0c\u7cfb\u7edf\u5c06\u4f1a\u51fa\u73b0 Concurrent Mode Failure\uff0c\u4e34\u65f6 CMS \u4f1a\u91c7\u7528 Serial Old \u56de\u6536\u5668\u8fdb\u884c\u5783\u573e\u6e05\u9664\uff0c\u6b64\u65f6\u7684\u6027\u80fd\u5c06\u4f1a\u88ab\u964d\u4f4e\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_16","title":"\u65b0\u751f\u4ee3\u5783\u573e\u56de\u6536\u5668\u548c\u8001\u5e74\u4ee3\u5783\u573e\u56de\u6536\u5668\u90fd\u6709\u54ea\u4e9b\uff1f\u6709\u4ec0\u4e48\u533a\u522b\uff1f","text":"<ul> <li>\u65b0\u751f\u4ee3\u56de\u6536\u5668\uff1aSerial\u3001ParNew\u3001Parallel Scavenge</li> <li>\u8001\u5e74\u4ee3\u56de\u6536\u5668\uff1aSerial Old\u3001Parallel Old\u3001CMS</li> <li>\u6574\u5806\u56de\u6536\u5668\uff1aG1</li> </ul> <p>\u65b0\u751f\u4ee3\u5783\u573e\u56de\u6536\u5668\u4e00\u822c\u91c7\u7528\u7684\u662f\u590d\u5236\u7b97\u6cd5\uff0c\u590d\u5236\u7b97\u6cd5\u7684\u4f18\u70b9\u662f\u6548\u7387\u9ad8\uff0c\u7f3a\u70b9\u662f\u5185\u5b58\u5229\u7528\u7387\u4f4e\uff1b\u8001\u5e74\u4ee3\u56de\u6536\u5668\u4e00\u822c\u91c7\u7528\u7684\u662f\u6807\u8bb0-\u6574\u7406\u7684\u7b97\u6cd5\u8fdb\u884c\u5783\u573e\u56de\u6536\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_17","title":"\u7b80\u8ff0\u5206\u4ee3\u5783\u573e\u56de\u6536\u5668\u662f\u600e\u4e48\u5de5\u4f5c\u7684\uff1f","text":"<p>\u5206\u4ee3\u56de\u6536\u5668\u6709\u4e24\u4e2a\u5206\u533a\uff1a\u8001\u751f\u4ee3\u548c\u65b0\u751f\u4ee3\uff0c\u65b0\u751f\u4ee3\u9ed8\u8ba4\u7684\u7a7a\u95f4\u5360\u6bd4\u603b\u7a7a\u95f4\u7684 1/3\uff0c\u8001\u751f\u4ee3\u7684\u9ed8\u8ba4\u5360\u6bd4\u662f 2/3\u3002</p> <p>\u65b0\u751f\u4ee3\u4f7f\u7528\u7684\u662f\u590d\u5236\u7b97\u6cd5\uff0c\u65b0\u751f\u4ee3\u91cc\u6709 3 \u4e2a\u5206\u533a\uff1aEden\u3001To Survivor\u3001From Survivor\uff0c\u5b83\u4eec\u7684\u9ed8\u8ba4\u5360\u6bd4\u662f 8:1:1\uff0c\u5b83\u7684\u6267\u884c\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <ul> <li>\u628a Eden + From Survivor \u5b58\u6d3b\u7684\u5bf9\u8c61\u653e\u5165 To Survivor \u533a\uff1b</li> <li>\u6e05\u7a7a Eden \u548c From Survivor \u5206\u533a\uff1b</li> <li>From Survivor \u548c To Survivor \u5206\u533a\u4ea4\u6362\uff0cFrom Survivor \u53d8 To Survivor\uff0cTo Survivor \u53d8 From Survivor\u3002</li> </ul> <p>\u6bcf\u6b21\u5728 From Survivor \u5230 To Survivor \u79fb\u52a8\u65f6\u90fd\u5b58\u6d3b\u7684\u5bf9\u8c61\uff0c\u5e74\u9f84\u5c31 +1\uff0c\u5f53\u5e74\u9f84\u5230\u8fbe 15\uff08\u9ed8\u8ba4\u914d\u7f6e\u662f 15\uff09\u65f6\uff0c\u5347\u7ea7\u4e3a\u8001\u751f\u4ee3\u3002\u5927\u5bf9\u8c61\u4e5f\u4f1a\u76f4\u63a5\u8fdb\u5165\u8001\u751f\u4ee3\u3002</p> <p>\u8001\u751f\u4ee3\u5f53\u7a7a\u95f4\u5360\u7528\u5230\u8fbe\u67d0\u4e2a\u503c\u4e4b\u540e\u5c31\u4f1a\u89e6\u53d1\u5168\u5c40\u5783\u573e\u6536\u56de\uff0c\u4e00\u822c\u4f7f\u7528\u6807\u8bb0\u6574\u7406\u7684\u6267\u884c\u7b97\u6cd5\u3002\u4ee5\u4e0a\u8fd9\u4e9b\u5faa\u73af\u5f80\u590d\u5c31\u6784\u6210\u4e86\u6574\u4e2a\u5206\u4ee3\u5783\u573e\u56de\u6536\u7684\u6574\u4f53\u6267\u884c\u6d41\u7a0b\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_18","title":"\u5185\u5b58\u5206\u914d\u7b56\u7565","text":""},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#javaminor-gcmajor-gc","title":"\u7b80\u8ff0java\u5185\u5b58\u5206\u914d\u4e0e\u56de\u6536\u7b56\u7387\u4ee5\u53caMinor GC\u548cMajor GC","text":"<p>\u6240\u8c13\u81ea\u52a8\u5185\u5b58\u7ba1\u7406\uff0c\u6700\u7ec8\u8981\u89e3\u51b3\u7684\u4e5f\u5c31\u662f\u5185\u5b58\u5206\u914d\u548c\u5185\u5b58\u56de\u6536\u4e24\u4e2a\u95ee\u9898\u3002\u524d\u9762\u6211\u4eec\u4ecb\u7ecd\u4e86\u5185\u5b58\u56de\u6536\uff0c\u8fd9\u91cc\u6211\u4eec\u518d\u6765\u804a\u804a\u5185\u5b58\u5206\u914d\u3002</p> <p>\u5bf9\u8c61\u7684\u5185\u5b58\u5206\u914d\u901a\u5e38\u662f\u5728 Java \u5806\u4e0a\u5206\u914d\uff08\u968f\u7740\u865a\u62df\u673a\u4f18\u5316\u6280\u672f\u7684\u8bde\u751f\uff0c\u67d0\u4e9b\u573a\u666f\u4e0b\u4e5f\u4f1a\u5728\u6808\u4e0a\u5206\u914d\uff0c\u540e\u9762\u4f1a\u8be6\u7ec6\u4ecb\u7ecd\uff09\uff0c\u5bf9\u8c61\u4e3b\u8981\u5206\u914d\u5728\u65b0\u751f\u4ee3\u7684 Eden \u533a\uff0c\u5982\u679c\u542f\u52a8\u4e86\u672c\u5730\u7ebf\u7a0b\u7f13\u51b2\uff0c\u5c06\u6309\u7167\u7ebf\u7a0b\u4f18\u5148\u5728 TLAB \u4e0a\u5206\u914d\u3002\u5c11\u6570\u60c5\u51b5\u4e0b\u4e5f\u4f1a\u76f4\u63a5\u5728\u8001\u5e74\u4ee3\u4e0a\u5206\u914d\u3002\u603b\u7684\u6765\u8bf4\u5206\u914d\u89c4\u5219\u4e0d\u662f\u767e\u5206\u767e\u56fa\u5b9a\u7684\uff0c\u5176\u7ec6\u8282\u53d6\u51b3\u4e8e\u54ea\u4e00\u79cd\u5783\u573e\u6536\u96c6\u5668\u7ec4\u5408\u4ee5\u53ca\u865a\u62df\u673a\u76f8\u5173\u53c2\u6570\u6709\u5173\uff0c\u4f46\u662f\u865a\u62df\u673a\u5bf9\u4e8e\u5185\u5b58\u7684\u5206\u914d\u8fd8\u662f\u4f1a\u9075\u5faa\u4ee5\u4e0b\u51e0\u79cd\u300c\u666e\u4e16\u300d\u89c4\u5219\uff1a</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#eden","title":"\u5bf9\u8c61\u4f18\u5148\u5728 Eden \u533a\u5206\u914d","text":"<p>\u591a\u6570\u60c5\u51b5\uff0c\u5bf9\u8c61\u90fd\u5728\u65b0\u751f\u4ee3 Eden \u533a\u5206\u914d\u3002\u5f53 Eden \u533a\u5206\u914d\u6ca1\u6709\u8db3\u591f\u7684\u7a7a\u95f4\u8fdb\u884c\u5206\u914d\u65f6\uff0c\u865a\u62df\u673a\u5c06\u4f1a\u53d1\u8d77\u4e00\u6b21 Minor GC\u3002\u5982\u679c\u672c\u6b21 GC \u540e\u8fd8\u662f\u6ca1\u6709\u8db3\u591f\u7684\u7a7a\u95f4\uff0c\u5219\u5c06\u542f\u7528\u5206\u914d\u62c5\u4fdd\u673a\u5236\u5728\u8001\u5e74\u4ee3\u4e2d\u5206\u914d\u5185\u5b58\u3002</p> <p>\u8fd9\u91cc\u6211\u4eec\u63d0\u5230 Minor GC\uff0c\u5982\u679c\u4f60\u4ed4\u7ec6\u89c2\u5bdf\u8fc7 GC \u65e5\u5e38\uff0c\u901a\u5e38\u6211\u4eec\u8fd8\u80fd\u4ece\u65e5\u5fd7\u4e2d\u53d1\u73b0 Major GC/Full GC\u3002</p> <ul> <li>Minor GC \u662f\u6307\u53d1\u751f\u5728\u65b0\u751f\u4ee3\u7684 GC\uff0c\u56e0\u4e3a Java \u5bf9\u8c61\u5927\u591a\u90fd\u662f\u671d\u751f\u5915\u6b7b\uff0c\u6240\u6709 Minor GC \u975e\u5e38\u9891\u7e41\uff0c\u4e00\u822c\u56de\u6536\u901f\u5ea6\u4e5f\u975e\u5e38\u5feb\uff1b</li> <li>Major GC/Full GC \u662f\u6307\u53d1\u751f\u5728\u8001\u5e74\u4ee3\u7684 GC\uff0c\u51fa\u73b0\u4e86 Major GC \u901a\u5e38\u4f1a\u4f34\u968f\u81f3\u5c11\u4e00\u6b21 Minor GC\u3002Major GC \u7684\u901f\u5ea6\u901a\u5e38\u4f1a\u6bd4 Minor GC \u6162 10 \u500d\u4ee5\u4e0a\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_19","title":"\u5927\u5bf9\u8c61\u76f4\u63a5\u8fdb\u5165\u8001\u5e74\u4ee3","text":"<p>\u6240\u8c13\u5927\u5bf9\u8c61\u662f\u6307\u9700\u8981\u5927\u91cf\u8fde\u7eed\u5185\u5b58\u7a7a\u95f4\u7684\u5bf9\u8c61\uff0c\u9891\u7e41\u51fa\u73b0\u5927\u5bf9\u8c61\u662f\u81f4\u547d\u7684\uff0c\u4f1a\u5bfc\u81f4\u5728\u5185\u5b58\u8fd8\u6709\u4e0d\u5c11\u7a7a\u95f4\u7684\u60c5\u51b5\u4e0b\u63d0\u524d\u89e6\u53d1 GC \u4ee5\u83b7\u53d6\u8db3\u591f\u7684\u8fde\u7eed\u7a7a\u95f4\u6765\u5b89\u7f6e\u65b0\u5bf9\u8c61\u3002</p> <p>\u524d\u9762\u6211\u4eec\u4ecb\u7ecd\u8fc7\u65b0\u751f\u4ee3\u4f7f\u7528\u7684\u662f\u6807\u8bb0-\u6e05\u9664\u7b97\u6cd5\u6765\u5904\u7406\u5783\u573e\u56de\u6536\u7684\uff0c\u5982\u679c\u5927\u5bf9\u8c61\u76f4\u63a5\u5728\u65b0\u751f\u4ee3\u5206\u914d\u5c31\u4f1a\u5bfc\u81f4 Eden \u533a\u548c\u4e24\u4e2a Survivor \u533a\u4e4b\u95f4\u53d1\u751f\u5927\u91cf\u7684\u5185\u5b58\u590d\u5236\u3002\u56e0\u6b64\u5bf9\u4e8e\u5927\u5bf9\u8c61\u90fd\u4f1a\u76f4\u63a5\u5728\u8001\u5e74\u4ee3\u8fdb\u884c\u5206\u914d\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_20","title":"\u957f\u671f\u5b58\u6d3b\u5bf9\u8c61\u5c06\u8fdb\u5165\u8001\u5e74\u4ee3","text":"<p>\u865a\u62df\u673a\u91c7\u7528\u5206\u4ee3\u6536\u96c6\u7684\u601d\u60f3\u6765\u7ba1\u7406\u5185\u5b58\uff0c\u90a3\u4e48\u5185\u5b58\u56de\u6536\u65f6\u5c31\u5fc5\u987b\u5224\u65ad\u54ea\u4e9b\u5bf9\u8c61\u5e94\u8be5\u653e\u5728\u65b0\u751f\u4ee3\uff0c\u54ea\u4e9b\u5bf9\u8c61\u5e94\u8be5\u653e\u5728\u8001\u5e74\u4ee3\u3002\u56e0\u6b64\u865a\u62df\u673a\u7ed9\u6bcf\u4e2a\u5bf9\u8c61\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5bf9\u8c61\u5e74\u9f84\u7684\u8ba1\u6570\u5668\uff0c\u5982\u679c\u5bf9\u8c61\u5728 Eden \u533a\u51fa\u751f\uff0c\u5e76\u4e14\u80fd\u591f\u88ab Survivor \u5bb9\u7eb3\uff0c\u5c06\u88ab\u79fb\u52a8\u5230 Survivor \u7a7a\u95f4\u4e2d\uff0c\u8fd9\u65f6\u8bbe\u7f6e\u5bf9\u8c61\u5e74\u9f84\u4e3a 1\u3002\u5bf9\u8c61\u5728 Survivor \u533a\u4e2d\u6bcf\u300c\u71ac\u8fc7\u300d\u4e00\u6b21 Minor GC \u5e74\u9f84\u5c31\u52a0 1\uff0c\u5f53\u5e74\u9f84\u8fbe\u5230\u4e00\u5b9a\u7a0b\u5ea6\uff08\u9ed8\u8ba4 15\uff09 \u5c31\u4f1a\u88ab\u664b\u5347\u5230\u8001\u5e74\u4ee3\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_21","title":"\u865a\u62df\u673a\u7c7b\u52a0\u8f7d\u673a\u5236","text":""},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#java_5","title":"\u7b80\u8ff0java\u7c7b\u52a0\u8f7d\u673a\u5236?","text":"<p>\u865a\u62df\u673a\u628a\u63cf\u8ff0\u7c7b\u7684\u6570\u636e\u4eceClass\u6587\u4ef6\u52a0\u8f7d\u5230\u5185\u5b58\uff0c\u5e76\u5bf9\u6570\u636e\u8fdb\u884c\u6821\u9a8c\uff0c\u89e3\u6790\u548c\u521d\u59cb\u5316\uff0c\u6700\u7ec8\u5f62\u6210\u53ef\u4ee5\u88ab\u865a\u62df\u673a\u76f4\u63a5\u4f7f\u7528\u7684java\u7c7b\u578b\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#jvmclass","title":"\u63cf\u8ff0\u4e00\u4e0bJVM\u52a0\u8f7dClass\u6587\u4ef6\u7684\u539f\u7406\u673a\u5236","text":"<p>Java\u4e2d\u7684\u6240\u6709\u7c7b\uff0c\u90fd\u9700\u8981\u7531\u7c7b\u52a0\u8f7d\u5668\u88c5\u8f7d\u5230JVM\u4e2d\u624d\u80fd\u8fd0\u884c\u3002\u7c7b\u52a0\u8f7d\u5668\u672c\u8eab\u4e5f\u662f\u4e00\u4e2a\u7c7b\uff0c\u800c\u5b83\u7684\u5de5\u4f5c\u5c31\u662f\u628aclass\u6587\u4ef6\u4ece\u786c\u76d8\u8bfb\u53d6\u5230\u5185\u5b58\u4e2d\u3002\u5728\u5199\u7a0b\u5e8f\u7684\u65f6\u5019\uff0c\u6211\u4eec\u51e0\u4e4e\u4e0d\u9700\u8981\u5173\u5fc3\u7c7b\u7684\u52a0\u8f7d\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u90fd\u662f\u9690\u5f0f\u88c5\u8f7d\u7684\uff0c\u9664\u975e\u6211\u4eec\u6709\u7279\u6b8a\u7684\u7528\u6cd5\uff0c\u50cf\u662f\u53cd\u5c04\uff0c\u5c31\u9700\u8981\u663e\u5f0f\u7684\u52a0\u8f7d\u6240\u9700\u8981\u7684\u7c7b\u3002</p> <p>\u7c7b\u88c5\u8f7d\u65b9\u5f0f\uff0c\u6709\u4e24\u79cd \uff1a</p> <p>1.\u9690\u5f0f\u88c5\u8f7d\uff0c \u7a0b\u5e8f\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2d\u5f53\u78b0\u5230\u901a\u8fc7new \u7b49\u65b9\u5f0f\u751f\u6210\u5bf9\u8c61\u65f6\uff0c\u9690\u5f0f\u8c03\u7528\u7c7b\u88c5\u8f7d\u5668\u52a0\u8f7d\u5bf9\u5e94\u7684\u7c7b\u5230jvm\u4e2d\uff0c</p> <p>2.\u663e\u5f0f\u88c5\u8f7d\uff0c \u901a\u8fc7class.forname()\u7b49\u65b9\u6cd5\uff0c\u663e\u5f0f\u52a0\u8f7d\u9700\u8981\u7684\u7c7b</p> <p>Java\u7c7b\u7684\u52a0\u8f7d\u662f\u52a8\u6001\u7684\uff0c\u5b83\u5e76\u4e0d\u4f1a\u4e00\u6b21\u6027\u5c06\u6240\u6709\u7c7b\u5168\u90e8\u52a0\u8f7d\u540e\u518d\u8fd0\u884c\uff0c\u800c\u662f\u4fdd\u8bc1\u7a0b\u5e8f\u8fd0\u884c\u7684\u57fa\u7840\u7c7b(\u50cf\u662f\u57fa\u7c7b)\u5b8c\u5168\u52a0\u8f7d\u5230jvm\u4e2d\uff0c\u81f3\u4e8e\u5176\u4ed6\u7c7b\uff0c\u5219\u5728\u9700\u8981\u7684\u65f6\u5019\u624d\u52a0\u8f7d\u3002\u8fd9\u5f53\u7136\u5c31\u662f\u4e3a\u4e86\u8282\u7701\u5185\u5b58\u5f00\u9500\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_22","title":"\u4ec0\u4e48\u662f\u7c7b\u52a0\u8f7d\u5668\uff0c\u7c7b\u52a0\u8f7d\u5668\u6709\u54ea\u4e9b?","text":"<p>\u5b9e\u73b0\u901a\u8fc7\u7c7b\u7684\u6743\u9650\u5b9a\u540d\u83b7\u53d6\u8be5\u7c7b\u7684\u4e8c\u8fdb\u5236\u5b57\u8282\u6d41\u7684\u4ee3\u7801\u5757\u53eb\u505a\u7c7b\u52a0\u8f7d\u5668\u3002</p> <p>\u4e3b\u8981\u6709\u4e00\u4e0b\u56db\u79cd\u7c7b\u52a0\u8f7d\u5668:</p> <ol> <li>\u542f\u52a8\u7c7b\u52a0\u8f7d\u5668(Bootstrap ClassLoader)\u7528\u6765\u52a0\u8f7djava\u6838\u5fc3\u7c7b\u5e93\uff0c\u65e0\u6cd5\u88abjava\u7a0b\u5e8f\u76f4\u63a5\u5f15\u7528\u3002</li> <li>\u6269\u5c55\u7c7b\u52a0\u8f7d\u5668(extensions class loader):\u5b83\u7528\u6765\u52a0\u8f7d Java \u7684\u6269\u5c55\u5e93\u3002Java \u865a\u62df\u673a\u7684\u5b9e\u73b0\u4f1a\u63d0\u4f9b\u4e00\u4e2a\u6269\u5c55\u5e93\u76ee\u5f55\u3002\u8be5\u7c7b\u52a0\u8f7d\u5668\u5728\u6b64\u76ee\u5f55\u91cc\u9762\u67e5\u627e\u5e76\u52a0\u8f7d Java \u7c7b\u3002</li> <li>\u7cfb\u7edf\u7c7b\u52a0\u8f7d\u5668\uff08system class loader\uff09\uff1a\u5b83\u6839\u636e Java \u5e94\u7528\u7684\u7c7b\u8def\u5f84\uff08CLASSPATH\uff09\u6765\u52a0\u8f7d Java \u7c7b\u3002\u4e00\u822c\u6765\u8bf4\uff0cJava \u5e94\u7528\u7684\u7c7b\u90fd\u662f\u7531\u5b83\u6765\u5b8c\u6210\u52a0\u8f7d\u7684\u3002\u53ef\u4ee5\u901a\u8fc7 ClassLoader.getSystemClassLoader()\u6765\u83b7\u53d6\u5b83\u3002</li> <li>\u7528\u6237\u81ea\u5b9a\u4e49\u7c7b\u52a0\u8f7d\u5668\uff0c\u901a\u8fc7\u7ee7\u627f java.lang.ClassLoader\u7c7b\u7684\u65b9\u5f0f\u5b9e\u73b0\u3002</li> </ol>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_23","title":"\u8bf4\u4e00\u4e0b\u7c7b\u88c5\u8f7d\u7684\u6267\u884c\u8fc7\u7a0b\uff1f","text":"<p>\u7c7b\u88c5\u8f7d\u5206\u4e3a\u4ee5\u4e0b 5 \u4e2a\u6b65\u9aa4\uff1a</p> <ul> <li>\u52a0\u8f7d\uff1a\u6839\u636e\u67e5\u627e\u8def\u5f84\u627e\u5230\u76f8\u5e94\u7684 class \u6587\u4ef6\u7136\u540e\u5bfc\u5165\uff1b</li> <li>\u9a8c\u8bc1\uff1a\u68c0\u67e5\u52a0\u8f7d\u7684 class \u6587\u4ef6\u7684\u6b63\u786e\u6027\uff1b</li> <li>\u51c6\u5907\uff1a\u7ed9\u7c7b\u4e2d\u7684\u9759\u6001\u53d8\u91cf\u5206\u914d\u5185\u5b58\u7a7a\u95f4\uff1b</li> <li>\u89e3\u6790\uff1a\u865a\u62df\u673a\u5c06\u5e38\u91cf\u6c60\u4e2d\u7684\u7b26\u53f7\u5f15\u7528\u66ff\u6362\u6210\u76f4\u63a5\u5f15\u7528\u7684\u8fc7\u7a0b\u3002\u7b26\u53f7\u5f15\u7528\u5c31\u7406\u89e3\u4e3a\u4e00\u4e2a\u6807\u793a\uff0c\u800c\u5728\u76f4\u63a5\u5f15\u7528\u76f4\u63a5\u6307\u5411\u5185\u5b58\u4e2d\u7684\u5730\u5740\uff1b</li> <li>\u521d\u59cb\u5316\uff1a\u5bf9\u9759\u6001\u53d8\u91cf\u548c\u9759\u6001\u4ee3\u7801\u5757\u6267\u884c\u521d\u59cb\u5316\u5de5\u4f5c\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#_24","title":"\u4ec0\u4e48\u662f\u53cc\u4eb2\u59d4\u6d3e\u6a21\u578b\uff1f","text":"<p>\u5728\u4ecb\u7ecd\u53cc\u4eb2\u59d4\u6d3e\u6a21\u578b\u4e4b\u524d\u5148\u8bf4\u4e0b\u7c7b\u52a0\u8f7d\u5668\u3002\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a\u7c7b\uff0c\u90fd\u9700\u8981\u7531\u52a0\u8f7d\u5b83\u7684\u7c7b\u52a0\u8f7d\u5668\u548c\u8fd9\u4e2a\u7c7b\u672c\u8eab\u4e00\u540c\u786e\u7acb\u5728 JVM \u4e2d\u7684\u552f\u4e00\u6027\uff0c\u6bcf\u4e00\u4e2a\u7c7b\u52a0\u8f7d\u5668\uff0c\u90fd\u6709\u4e00\u4e2a\u72ec\u7acb\u7684\u7c7b\u540d\u79f0\u7a7a\u95f4\u3002\u7c7b\u52a0\u8f7d\u5668\u5c31\u662f\u6839\u636e\u6307\u5b9a\u5168\u9650\u5b9a\u540d\u79f0\u5c06 class \u6587\u4ef6\u52a0\u8f7d\u5230 JVM \u5185\u5b58\uff0c\u7136\u540e\u518d\u8f6c\u5316\u4e3a class \u5bf9\u8c61\u3002</p> <p></p> <p>\u7c7b\u52a0\u8f7d\u5668\u5206\u7c7b\uff1a</p> <ul> <li>\u542f\u52a8\u7c7b\u52a0\u8f7d\u5668\uff08Bootstrap ClassLoader\uff09\uff0c\u662f\u865a\u62df\u673a\u81ea\u8eab\u7684\u4e00\u90e8\u5206\uff0c\u7528\u6765\u52a0\u8f7dJava_HOME/lib/\u76ee\u5f55\u4e2d\u7684\uff0c\u6216\u8005\u88ab -Xbootclasspath \u53c2\u6570\u6240\u6307\u5b9a\u7684\u8def\u5f84\u4e2d\u5e76\u4e14\u88ab\u865a\u62df\u673a\u8bc6\u522b\u7684\u7c7b\u5e93\uff1b</li> <li>\u5176\u4ed6\u7c7b\u52a0\u8f7d\u5668\uff1a</li> <li>\u6269\u5c55\u7c7b\u52a0\u8f7d\u5668\uff08Extension ClassLoader\uff09\uff1a\u8d1f\u8d23\u52a0\u8f7d\\lib\\ext\u76ee\u5f55\u6216Java. ext. dirs\u7cfb\u7edf\u53d8\u91cf\u6307\u5b9a\u7684\u8def\u5f84\u4e2d\u7684\u6240\u6709\u7c7b\u5e93\uff1b</li> <li>\u5e94\u7528\u7a0b\u5e8f\u7c7b\u52a0\u8f7d\u5668\uff08Application ClassLoader\uff09\u3002\u8d1f\u8d23\u52a0\u8f7d\u7528\u6237\u7c7b\u8def\u5f84\uff08classpath\uff09\u4e0a\u7684\u6307\u5b9a\u7c7b\u5e93\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e2a\u7c7b\u52a0\u8f7d\u5668\u3002\u4e00\u822c\u60c5\u51b5\uff0c\u5982\u679c\u6211\u4eec\u6ca1\u6709\u81ea\u5b9a\u4e49\u7c7b\u52a0\u8f7d\u5668\u9ed8\u8ba4\u5c31\u662f\u7528\u8fd9\u4e2a\u52a0\u8f7d\u5668\u3002</li> </ul> <p>\u53cc\u4eb2\u59d4\u6d3e\u6a21\u578b\uff1a\u5982\u679c\u4e00\u4e2a\u7c7b\u52a0\u8f7d\u5668\u6536\u5230\u4e86\u7c7b\u52a0\u8f7d\u7684\u8bf7\u6c42\uff0c\u5b83\u9996\u5148\u4e0d\u4f1a\u81ea\u5df1\u53bb\u52a0\u8f7d\u8fd9\u4e2a\u7c7b\uff0c\u800c\u662f\u628a\u8fd9\u4e2a\u8bf7\u6c42\u59d4\u6d3e\u7ed9\u7236\u7c7b\u52a0\u8f7d\u5668\u53bb\u5b8c\u6210\uff0c\u6bcf\u4e00\u5c42\u7684\u7c7b\u52a0\u8f7d\u5668\u90fd\u662f\u5982\u6b64\uff0c\u8fd9\u6837\u6240\u6709\u7684\u52a0\u8f7d\u8bf7\u6c42\u90fd\u4f1a\u88ab\u4f20\u9001\u5230\u9876\u5c42\u7684\u542f\u52a8\u7c7b\u52a0\u8f7d\u5668\u4e2d\uff0c\u53ea\u6709\u5f53\u7236\u52a0\u8f7d\u65e0\u6cd5\u5b8c\u6210\u52a0\u8f7d\u8bf7\u6c42\uff08\u5b83\u7684\u641c\u7d22\u8303\u56f4\u4e2d\u6ca1\u627e\u5230\u6240\u9700\u7684\u7c7b\uff09\u65f6\uff0c\u5b50\u52a0\u8f7d\u5668\u624d\u4f1a\u5c1d\u8bd5\u53bb\u52a0\u8f7d\u7c7b\u3002</p> <p>\u5f53\u4e00\u4e2a\u7c7b\u6536\u5230\u4e86\u7c7b\u52a0\u8f7d\u8bf7\u6c42\u65f6\uff0c\u4e0d\u4f1a\u81ea\u5df1\u5148\u53bb\u52a0\u8f7d\u8fd9\u4e2a\u7c7b\uff0c\u800c\u662f\u5c06\u5176\u59d4\u6d3e\u7ed9\u7236\u7c7b\uff0c\u7531\u7236\u7c7b\u53bb\u52a0\u8f7d\uff0c\u5982\u679c\u6b64\u65f6\u7236\u7c7b\u4e0d\u80fd\u52a0\u8f7d\uff0c\u53cd\u9988\u7ed9\u5b50\u7c7b\uff0c\u7531\u5b50\u7c7b\u53bb\u5b8c\u6210\u7c7b\u7684\u52a0\u8f7d\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#jvm_5","title":"JVM\u8c03\u4f18","text":""},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#jvm_6","title":"\u8bf4\u4e00\u4e0b JVM \u8c03\u4f18\u7684\u5de5\u5177\uff1f","text":"<p>JDK \u81ea\u5e26\u4e86\u5f88\u591a\u76d1\u63a7\u5de5\u5177\uff0c\u90fd\u4f4d\u4e8e JDK \u7684 bin \u76ee\u5f55\u4e0b\uff0c\u5176\u4e2d\u6700\u5e38\u7528\u7684\u662f jconsole \u548c jvisualvm \u8fd9\u4e24\u6b3e\u89c6\u56fe\u76d1\u63a7\u5de5\u5177\u3002</p> <ul> <li>jconsole\uff1a\u7528\u4e8e\u5bf9 JVM \u4e2d\u7684\u5185\u5b58\u3001\u7ebf\u7a0b\u548c\u7c7b\u7b49\u8fdb\u884c\u76d1\u63a7\uff1b</li> <li>jvisualvm\uff1aJDK \u81ea\u5e26\u7684\u5168\u80fd\u5206\u6790\u5de5\u5177\uff0c\u53ef\u4ee5\u5206\u6790\uff1a\u5185\u5b58\u5feb\u7167\u3001\u7ebf\u7a0b\u5feb\u7167\u3001\u7a0b\u5e8f\u6b7b\u9501\u3001\u76d1\u63a7\u5185\u5b58\u7684\u53d8\u5316\u3001gc \u53d8\u5316\u7b49\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/jvm%E9%9D%A2%E8%AF%95%E9%A2%98/#jvm_7","title":"\u5e38\u7528\u7684 JVM \u8c03\u4f18\u7684\u53c2\u6570\u90fd\u6709\u54ea\u4e9b\uff1f","text":"<ul> <li>-Xms2g\uff1a\u521d\u59cb\u5316\u63a8\u5927\u5c0f\u4e3a 2g\uff1b</li> <li>-Xmx2g\uff1a\u5806\u6700\u5927\u5185\u5b58\u4e3a 2g\uff1b</li> <li>-XX:NewRatio=4\uff1a\u8bbe\u7f6e\u5e74\u8f7b\u7684\u548c\u8001\u5e74\u4ee3\u7684\u5185\u5b58\u6bd4\u4f8b\u4e3a 1:4\uff1b</li> <li>-XX:SurvivorRatio=8\uff1a\u8bbe\u7f6e\u65b0\u751f\u4ee3 Eden \u548c Survivor \u6bd4\u4f8b\u4e3a 8:2\uff1b</li> <li>\u2013XX:+UseParNewGC\uff1a\u6307\u5b9a\u4f7f\u7528 ParNew + Serial Old \u5783\u573e\u56de\u6536\u5668\u7ec4\u5408\uff1b</li> <li>-XX:+UseParallelOldGC\uff1a\u6307\u5b9a\u4f7f\u7528 ParNew + ParNew Old \u5783\u573e\u56de\u6536\u5668\u7ec4\u5408\uff1b</li> <li>-XX:+UseConcMarkSweepGC\uff1a\u6307\u5b9a\u4f7f\u7528 CMS + Serial Old \u5783\u573e\u56de\u6536\u5668\u7ec4\u5408\uff1b</li> <li>-XX:+PrintGC\uff1a\u5f00\u542f\u6253\u5370 gc \u4fe1\u606f\uff1b</li> <li>-XX:+PrintGCDetails\uff1a\u6253\u5370 gc \u8be6\u7ec6\u4fe1\u606f\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/","title":"1.\u4e8b\u52a1 &amp; \u9694\u79bb\u7ea7\u522b","text":"<p>\u4e8b\u52a1\u5b9a\u4e49\uff1a\u903b\u8f91\u4e0a\u7684\u4e00\u7ec4\u64cd\u4f5c\uff0c\u8981\u4e48\u5168\u90e8\u6267\u884c\u6210\u529f\uff0c\u8981\u4e48\u90fd\u4e0d\u6267\u884c</p> <p>\u7279\u6027</p> <p>A atomicity \u539f\u5b50\u6027\uff1a\u4e8b\u52a1\u662f\u6700\u5c0f\u7684\u6267\u884c\u5355\u4f4d\uff0c\u8981\u4e48\u5168\u90e8\u6267\u884c\u6210\u529f\uff0c\u8981\u4e48\u90fd\u4e0d\u6267\u884c</p> <p>C consistency \u4e00\u81f4\u6027\uff1a\u4e8b\u52a1\u6267\u884c\u524d\u540e\uff0c\u72b6\u6001\u6b63\u786e\uff0c\u6570\u636e\u4fdd\u6301\u4e00\u81f4\uff08\u4f8b\u5982\u8f6c\u8d26\u524d\u540e\u7684\u603b\u91d1\u989d\u662f\u4e00\u81f4\u7684\uff09</p> <p>I Isolation \u9694\u79bb\u6027\uff1a\u4e8b\u52a1\u6267\u884c\u4e2d\u95f4\u72b6\u6001\u522b\u7684\u4e8b\u52a1\u662f\u4e0d\u53ef\u89c1\u7684</p> <p>D durability \u6301\u4e45\u6027\uff1a\u63d0\u4ea4\u540e\uff0c\u6570\u636e\u5e93\u7684\u6570\u636e\u662f\u6301\u4e45\u7684\uff0c\u5373\u4f7f\u6570\u636e\u5e93\u53d1\u751f\u6545\u969c\u4e5f\u4e0d\u5e94\u8be5\u5bf9\u5176\u6709\u4efb\u4f55\u5f71\u54cd</p> <p></p> <p>\u9694\u79bb\u7ea7\u522b\u548c\u51fa\u73b0\u7684\u95ee\u9898</p> <p>MySQL\u9ed8\u8ba4RR\u9694\u79bb\u7ea7\u522b\uff08\u4f46\u662f\u901a\u8fc7next-keyLock\u5176\u5b9e\u4e5f\u80fd\u907f\u514d\u5e7b\u8bfb\uff09</p> \u810f\u8bfb \u4e0d\u53ef\u91cd\u590d\u8bfb \u5e7b\u8bfb RU \u221a \u221a \u221a RC \u00d7 \u221a \u221a RR \u00d7 \u00d7 \u221a SERIALIZABLE \u00d7 \u00d7 \u00d7"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#2","title":"2.\u5e38\u89c1\u9501\u5206\u7c7b","text":""},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#1_1","title":"1\uff09\u9501\u7c7b\u578b\uff08\u7c92\u5ea6\uff09","text":"<p>\u884c\u9501\u548c\u8868\u9501</p> <p>\u8868\u9501\uff1a\u529b\u5ea6\u6700\u5927\uff0c\u6574\u5f20\u8868\u52a0\u9501\uff0c\u8d44\u6e90\u6d88\u8017\u5c11\uff0c\u5e76\u53d1\u5ea6\u4f4e\uff08\u4e00\u822c\u662fDDL\u5904\u7406\u65f6\u4f7f\u7528\uff09\uff0c\u670d\u52a1\u5668\u5b9e\u73b0</p> <p>\u884c\u9501\uff08\u57fa\u4e8e\u7d22\u5f15\u5b9e\u73b0\u7684\uff0c\u7d22\u5f15\u547d\u4e2d\u6570\u636e\uff09\uff0c\u5f00\u9500\u5927\uff0c\u9501\u529b\u5ea6\u5c0f\uff0c\u5e76\u53d1\u5ea6\u9ad8\uff0c\u5b58\u50a8\u5f15\u64ce\u5b9e\u73b0\uff1a</p> <p>record locks\uff1a\u5355\u884c\u8bb0\u5f55\u4e0a\u9501\uff08\u4e8c\u7ea7\u7d22\u5f15+\u805a\u7c07\u7d22\u5f15\uff09</p> <p>gap locks\uff1a\u95f4\u9699\u9501\uff0c\u9501\u5b9a\u4e00\u4e2a\u8303\u56f4 \u4e0d\u5305\u62ecrecord</p> <p>next-key locks\uff1arecord+gap\u9501\u5b9a\u4e00\u4e2a\u8303\u56f4\uff0c\u5305\u542b\u8bb0\u5f55\uff08]</p> <p>Insert Intention Locks\uff1a\u63d2\u5165\u610f\u5411\u9501\uff0c\u7531 INSERT \u64cd\u4f5c\u4ea7\u751f\u7684\u4e00\u79cd\u95f4\u9699\u9501\uff08\u63d2\u5165\u610f\u5411\u9501+\u884c\u9501\uff0c\u53ef\u5e76\u53d1\uff09</p> \u8981\u83b7\u53d6/\u5df2\u83b7\u53d6 record gap next-key Insert Intention record \u4e0d\u517c\u5bb9 \u517c\u5bb9 \u4e0d\u517c\u5bb9 \u517c\u5bb9 gap \u517c\u5bb9 \u517c\u5bb9 \u517c\u5bb9 \u517c\u5bb9 next-key \u4e0d\u517c\u5bb9 \u517c\u5bb9 \u4e0d\u517c\u5bb9 \u517c\u5bb9 Insert Intention \u517c\u5bb9 \u4e0d\u517c\u5bb9 \u4e0d\u517c\u5bb9 \u517c\u5bb9 <p>\u884c\u8868\u793a\u5df2\u6709\u7684\u9501\uff0c\u7b2c\u4e00\u5217\u8868\u793a\u8981\u52a0\u7684\u9501\u3002</p> <ul> <li>\u63d2\u5165\u610f\u5411\u9501\u4e0d\u5f71\u54cd\u5176\u4ed6\u4e8b\u52a1\u52a0\u5176\u4ed6\u4efb\u4f55\u9501\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e00\u4e2a\u4e8b\u52a1\u5df2\u7ecf\u83b7\u53d6\u4e86\u63d2\u5165\u610f\u5411\u9501\uff0c\u5bf9\u5176\u4ed6\u4e8b\u52a1\u662f\u6ca1\u6709\u4efb\u4f55\u5f71\u54cd\u7684\uff1b</li> <li> <p>\u63d2\u5165\u610f\u5411\u9501\u4e0e\u95f4\u9699\u9501\u548c Next-key \u9501\u51b2\u7a81\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e00\u4e2a\u4e8b\u52a1\u60f3\u8981\u83b7\u53d6\u63d2\u5165\u610f\u5411\u9501\uff0c\u5982\u679c\u6709\u5176\u4ed6\u4e8b\u52a1\u5df2\u7ecf\u52a0\u4e86\u95f4\u9699\u9501\u6216 Next-key \u9501\uff0c\u5219\u4f1a\u963b\u585e\u3002</p> </li> <li> <p>\u95f4\u9699\u9501\u4e0d\u548c\u5176\u4ed6\u9501\uff08\u4e0d\u5305\u62ec\u63d2\u5165\u610f\u5411\u9501\uff09\u51b2\u7a81\uff1b</p> </li> <li>\u8bb0\u5f55\u9501\u548c\u8bb0\u5f55\u9501\u51b2\u7a81\uff0cNext-key \u9501\u548c Next-key \u9501\u51b2\u7a81\uff0c\u8bb0\u5f55\u9501\u548c Next-key \u9501\u51b2\u7a81\uff1b</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#2_1","title":"2\uff09\u9501\u6a21\u5f0f\uff08\u8bfb/\u5199\uff09","text":"<p>\u8bfb\u9501\u4e5f\u5c31\u5171\u4eab\u9501\uff0cS\u9501</p> <p>\u5199\u9501\u4e5f\u53eb\u6392\u5b83\u9501\uff0cX\u9501</p> <p>\u8bfb\u610f\u5411\u9501\uff0cIS</p> <p>\u5199\u610f\u5411\u9501\uff0cIX</p> <p>AUTO_INC\uff0c\u81ea\u589e\u9501\uff1a\u5f53\u8868\u7684\u4e3b\u952e\u4e3a\u81ea\u589e\u5217\u65f6\uff0c\u591a\u4e2a\u5e76\u53d1\u4e8b\u52a1\u901a\u8fc7\u81ea\u589e\u9501\u6765\u4fdd\u8bc1\u81ea\u589e\u4e3b\u952e\u4e0d\u4f1a\u51fa\u73b0\u91cd\u590d\u7b49\u73b0\u8c61\u3002</p> <p>\u4e3a\u4ec0\u4e48\u8981\u6709\u610f\u5411\u9501\uff1f</p> <p>\u63d0\u5347\u6548\u7387\uff0cA\u884c\u9501\uff0cB\u8981\u8fdb\u884c\u8868\u9501\uff0c\u4e00\u884c\u4e00\u884c\u6548\u7387\u592a\u4f4e\u3002\u610f\u5411\u9501\u662f\u8868\u9501\uff0c\u5728\u9501\u8868\u4e4b\u524d\uff0c\u9700\u8981\u5148\u83b7\u53d6IX\u6216\u8005IS</p> IS S IX X IS \u517c\u5bb9 \u517c\u5bb9 \u517c\u5bb9 \u4e0d\u517c\u5bb9 S \u517c\u5bb9 \u517c\u5bb9 \u4e0d\u517c\u5bb9 \u4e0d\u517c\u5bb9 IX \u517c\u5bb9 \u4e0d\u517c\u5bb9 \u517c\u5bb9 \u4e0d\u517c\u5bb9 X \u4e0d\u517c\u5bb9 \u4e0d\u517c\u5bb9 \u4e0d\u517c\u5bb9 \u4e0d\u517c\u5bb9 <p>\u6ce8\uff1a\u610f\u5411\u9501\u548c\u610f\u5411\u9501\u4e4b\u95f4\u4e0d\u4f1a\u51b2\u7a81</p>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#3","title":"3.\u5f53\u524d\u8bfb &amp; \u5feb\u7167\u8bfb","text":"<p>\u5feb\u7167\u8bfb\uff0c\u8bfb\u53d6\u7684\u662f\u8bb0\u5f55\u7684\u53ef\u89c1\u7248\u672c (\u6709\u53ef\u80fd\u662f\u5386\u53f2\u7248\u672c)\uff0c\u4e0d\u7528\u52a0\u9501</p> <p>\u5f53\u524d\u8bfb\uff0c\u8bfb\u53d6\u7684\u662f\u8bb0\u5f55\u7684\u6700\u65b0\u7248\u672c\uff0c\u5e76\u4e14\uff0c\u5f53\u524d\u8bfb\u8fd4\u56de\u7684\u8bb0\u5f55\uff0c\u90fd\u4f1a\u52a0\u4e0a\u9501\uff0c\u4fdd\u8bc1\u5176\u4ed6\u4e8b\u52a1\u4e0d\u4f1a\u518d\u5e76\u53d1\u4fee\u6539\u8fd9\u6761\u8bb0\u5f55\u3002</p> <p>\u5feb\u7167\u8bfb\uff0c\u7b80\u5355\u7684select\u64cd\u4f5c\uff08MVCC+undo\uff09</p> <p>select * from table where ?</p> <p>\u5f53\u524d\u8bfb\uff0c\u7279\u6b8a\u7684\u8bfb\u64cd\u4f5c\uff0c\u63d2\u5165/\u66f4\u65b0/\u5220\u9664\u64cd\u4f5c\uff0c\u5c5e\u4e8e\u5f53\u524d\u8bfb\uff0c\u9700\u8981\u52a0\u9501\uff08next-key lock\uff09</p> <p>select * from table where? lock in share mode       S\u9501</p> <p>select * from table where? for update       X\u9501</p> <p>update    X\u9501</p> <p>delete    X\u9501</p> <p>insert    X\u9501</p>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#4mvcc","title":"4.MVCC","text":"<ul> <li>multi-version concurrency control\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236 </li> <li>Lock based concurrency control\u57fa\u4e8e\u9501\u7684\u5e76\u53d1\u63a7\u5236</li> </ul> <p>MySQL InnoDB\u5b9e\u73b0\u9694\u79bb\u7ea7\u522b\u7684\u4e00\u79cd\u5177\u4f53\u65b9\u5f0f\uff0c\u7528\u4e8e\u5b9e\u73b0RC\u548cRR\u3002RC\u603b\u662f\u8bfb\u53d6\u6700\u65b0\u7684\u6570\u636e\u884c\uff0c\u8981\u6c42\u5f88\u4f4e\uff0c\u65e0\u9700\u4f7f\u7528 MVCC\u3002\u53ef\u4e32\u884c\u5316\u9694\u79bb\u7ea7\u522b\u9700\u8981\u5bf9\u6240\u6709\u8bfb\u53d6\u7684\u884c\u90fd\u52a0\u9501\uff0c\u5355\u7eaf\u4f7f\u7528 MVCC \u65e0\u6cd5\u5b9e\u73b0\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#41-undo-redo","title":"4.1 undo &amp; redo","text":""},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#411redo-log","title":"4.1.1.redo log","text":"<p>\u5728InnoDB\u5b58\u50a8\u5f15\u64ce\u4e2d\uff0c\u4e8b\u52a1\u65e5\u5fd7\u901a\u8fc7\u91cd\u505a\u65e5\u5fd7\u6587\u4ef6\uff08redo log\uff09\u548c\u65e5\u5fd7\u7f13\u51b2\uff08InnoDB log buffer\uff09\u5b9e\u73b0\u3002</p> <p>\u9884\u5199\u65e5\u5fd7WAL\uff08write ahead logging\uff09\uff0c\u5148\u5199\u65e5\u5fd7\u518d\u5199\u6570\u636e\uff1a\u5f53\u4e8b\u52a1\u6267\u884c\u65f6\uff0c\u4f1a\u5f80InnoDB\u7684\u65e5\u5fd7\u7f13\u51b2\u4e2d\u63d2\u5165\u4e8b\u52a1\u65e5\u5fd7\uff1b\u5f53\u4e8b\u52a1\u63d0\u4ea4\u65f6\uff0c\u5fc5\u987b\u5148\u5c06\u65e5\u5fd7\u7f13\u51b2\u5199\u5165\u78c1\u76d8\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#412undo-log","title":"4.1.2.undo log","text":"<p>\u91cd\u505a\u65e5\u5fd7\u8bb0\u5f55\u4e86\u4e8b\u52a1\u7684\u884c\u4e3a\uff0c\u53ef\u4ee5\u65b9\u4fbf\u7684\u901a\u8fc7\u5176\u8fdb\u884c\u201c\u91cd\u505a\u201d\u3002\u4f46\u4e8b\u52a1\u6709\u65f6\u8fd8\u9700\u8981\u64a4\u9500\uff0c\u8fd9\u65f6\u5c31\u9700\u8981undo\u3002undo\u4e0eredo\u6b63\u597d\u76f8\u53cd\uff0cundo\u662f\u5148\u5199\u6570\u636e\u540e\u8bb0\u5f55undo log\uff1b\u4e8b\u52a1\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u4fee\u6539\u65f6\uff0c\u4f1a\u4ea7\u751fredo\u548cundo\uff0c\u5f53\u6709\u9519\u8bef\u6216rollback\u65f6\uff0c\u53ef\u4ee5\u6839\u636eundo log\u5c06\u6570\u636e\u6062\u590d\u5230\u4fee\u6539\u524d\u7684\u6837\u5b50</p> <p>undo\u5e76\u975e\u5bf9\u6570\u636e\u7684\u7269\u7406\u6062\u590d\uff0c\u800c\u662f\u903b\u8f91\u6062\u590d\uff0c\u4f8b\u5982\u63d2\u5165\u4e8610\u4e07\u6761\u6570\u636e\uff0c\u4f7f\u8868\u7a7a\u95f4\u589e\u52a0\uff0cundo\u540e\u8868\u7a7a\u95f4\u5e76\u4e0d\u4f1a\u6536\u7f29\uff1b\u5bf9\u4e8e\u6bcf\u6761insert\uff0cundo\u662f\u505a\u76f8\u5e94\u7684delete\uff0c\u5bf9\u4e8eupdate\u5219\u662f\u505a\u4e86\u76f8\u53cd\u7684update\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#413redoundo","title":"4.1.3.redo\u4e0eundo","text":"<p>\u5047\u8bbe\u6709A\u3001B\u4e24\u4e2a\u6570\u636e\uff0c\u503c\u5206\u522b\u4e3a1\u30012\uff0c\u5f00\u542f\u4e8b\u52a1\u5206\u522b\u5bf9\u5176\u8fdb\u884c\u4fee\u6539A \u2192 3\uff0cB \u2192 4\uff0c\u5728\u63d0\u4ea4\uff0c\u8fc7\u7a0b\u5982\u4e0b\uff1a</p> <ul> <li>\u4e8b\u52a1\u5f00\u59cb</li> <li>\u8bb0\u5f55A=3\u5230redo log</li> <li>\u4fee\u6539A=3</li> <li>\u8bb0\u5f55A=1\u5230undo log</li> <li>\u8bb0\u5f55B=4\u5230redo log</li> <li>\u4fee\u6539B=4</li> <li>\u8bb0\u5f55B=2\u5230undo log</li> <li>\u5c06redo log\u5199\u5165\u78c1\u76d8</li> <li>\u4e8b\u52a1\u63d0\u4ea4</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#42-mvcc","title":"4.2. MVCC\u8bfb\u573a\u666f","text":"session 1 session 2 select a from test; return a = 10 start transaction; update test set a = 20; start transaction; select a from test; return ? commit; select a from test; return ? <p>session 1\u4fee\u6539\u4e86\u4e00\u6761\u8bb0\u5f55\uff0c\u6ca1\u6709\u63d0\u4ea4\uff1b\u4e0e\u6b64\u540c\u65f6\uff0csession 2 \u6765\u67e5\u8be2\u8fd9\u6761\u8bb0\u5f55\uff0c\u8fd9\u65f6\u5019\u8fd4\u56de\u8bb0\u5f55\u5e94\u8be5\u662f\u591a\u5c11\u5462\uff1f</p> <p>session 1 \u63d0\u4ea4\u4e4b\u540e session 2 \u67e5\u8be2\u51fa\u6765\u7684\u53c8\u5e94\u8be5\u662f\u591a\u5c11\u5462\uff1f</p> <p>\u4e0d\u540c\u9694\u79bb\u7ea7\u522b\u60c5\u51b5\u4e0d\u540c\uff0c\u60c5\u51b5\u5982\u4e0b:</p> <ul> <li>RU\uff1a\u90fd\u662f\u4fee\u6539\u540e\u7684\u7ed3\u679c\uff0c\u5373 a = 20</li> <li>RC\uff1acommit \u524d\uff0ca =10 , commit\u540e a = 20</li> <li>RR/SERIALIZABLE\uff0c\u90fd\u662f\u4fee\u6539\u524d\u7684\u7ed3\u679c\uff0c\u5373 a = 10</li> </ul> <p>\u601d\u8003\u4e00\u4e2a\u95ee\u9898\uff1a\u600e\u4e48\u5b9e\u73b0session2\u662f\u600e\u4e48\u505a\u5230\u67e5\u8be2\u51fa\u6765\u7684\u7ed3\u679c\u8fd8\u662f10\uff0c\u800c\u4e0d\u662f20\u5462\uff1f</p>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#43","title":"4.3 \u4e8b\u52a1\u5bf9\u67d0\u884c\u8bb0\u5f55\u7684\u66f4\u65b0\u8fc7\u7a0b\uff1a","text":""},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#431","title":"4.3.1.\u521d\u59cb\u6570\u636e\u884c","text":"<p>F1\uff5eF6\u662f\u67d0\u884c\u5217\u7684\u540d\u5b57\uff0c1\uff5e6\u662f\u5176\u5bf9\u5e94\u7684\u6570\u636e\u3002\u6bcf\u4e00\u884c\u90fd\u67092\u4e2a\u9690\u85cf\u5217DATA_TRX_ID\u548cDATA_ROLL_PTR(\u5982\u679c\u6ca1\u6709\u5b9a\u4e49\u4e3b\u952e\uff0c\u5219\u8fd8\u6709\u4e2a\u9690\u85cf\u4e3b\u952e\u5217)\uff0c\u5047\u5982\u8fd9\u6761\u6570\u636e\u662f\u521aINSERT\u7684\uff0c\u53ef\u4ee5\u8ba4\u4e3aID\u4e3a1\uff0c\u5176\u4ed6\u4e24\u4e2a\u5b57\u6bb5\u4e3a\u7a7a\u3002</p> <ol> <li>DATA_TRX_ID\u53606 \u5b57\u8282\uff0c\u8868\u793a\u8fd9\u4e00\u884c\u6570\u636e\u6700\u540e\u63d2\u5165\u6216\u4fee\u6539\u7684\u4e8b\u52a1id\u3002</li> <li>DATA_ROLL_PTR\u5219\u8868\u793a\u6307\u5411\u8be5\u884c\u56de\u6eda\u6bb5\u7684\u6307\u9488\uff0c\u8be5\u884c\u4e0a\u6240\u6709\u65e7\u7684\u7248\u672c\uff0c\u5728undo\u4e2d\u90fd\u901a\u8fc7\u94fe\u8868\u7684\u5f62\u5f0f\u7ec4\u7ec7\uff0c\u800c\u8be5\u503c\uff0c\u6b63\u5f0f\u6307\u5411undo\u4e2d\u8be5\u884c\u7684\u5386\u53f2\u8bb0\u5f55\u94fe\u8868</li> <li>DB_ROW_ID \u884cID\u53607\u5b57\u8282\uff0c\u50cf\u81ea\u589e\u4e3b\u952e\u4e00\u6837\u968f\u7740\u63d2\u5165\u65b0\u6570\u636e\u81ea\u589e\u3002\u5982\u679c\u8868\u4e2d\u4e0d\u5b58\u4e3b\u952e \u6216\u8005 \u552f\u4e00\u7d22\u5f15\uff0c\u90a3\u4e48\u6570\u636e\u5e93 \u5c31\u4f1a\u91c7\u7528DB_ROW_ID\u751f\u6210\u805a\u7c07\u7d22\u5f15\u3002\u5426\u5219DB_ROW_ID\u4e0d\u4f1a\u51fa\u73b0\u5728\u7d22\u5f15\u4e2d\u3002</li> </ol> <p>4.3.2.\u4e8b\u52a11\u66f4\u6539\u8be5\u884c\u7684\u5404\u5b57\u6bb5\u7684\u503c</p> <p></p> <p>\u5f53\u4e8b\u52a11\u66f4\u6539\u8be5\u884c\u7684\u503c\u65f6\uff0c\u4f1a\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a</p> <ul> <li>\u7528\u6392\u4ed6\u9501\u9501\u5b9a\u8be5\u884c</li> <li>\u8bb0\u5f55redo log</li> <li> <p>\u4fee\u6539\u5f53\u524d\u884c\u7684\u503c\uff0c\u586b\u5199\u4e8b\u52a1\u7f16\u53f7\uff0c\u4f7f\u56de\u6eda\u6307\u9488\u6307\u5411undo log\u4e2d\u7684\u4fee\u6539\u524d\u7684\u884c</p> </li> <li> <p>\u628a\u8be5\u884c\u4fee\u6539\u524d\u7684\u503cCopy\u5230undo log\uff0c\u5373\u4e0a\u56fe\u4e2d\u4e0b\u9762\u7684\u884c</p> </li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#4332","title":"4.3.3.\u4e8b\u52a12\u4fee\u6539\u8be5\u884c\u7684\u503c","text":"<p>\u4e0e\u4e8b\u52a11\u76f8\u540c\uff0c\u6b64\u65f6undo log\uff0c\u4e2d\u6709\u6709\u4e24\u884c\u8bb0\u5f55\uff0c\u5e76\u4e14\u901a\u8fc7\u56de\u6eda\u6307\u9488\u8fde\u5728\u4e00\u8d77\u3002</p> <p>\u56e0\u6b64\uff0c\u5982\u679cundo log\u4e00\u76f4\u4e0d\u5220\u9664\uff0c\u5219\u4f1a\u901a\u8fc7\u5f53\u524d\u8bb0\u5f55\u7684\u56de\u6eda\u6307\u9488\u56de\u6eaf\u5230\u8be5\u884c\u521b\u5efa\u65f6\u7684\u521d\u59cb\u5185\u5bb9\uff1b\u5728Innodb\u4e2d\u5b58\u5728purge\u7ebf\u7a0b\uff0c\u5b83\u4f1a\u67e5\u8be2\u90a3\u4e9b\u6bd4\u73b0\u5728\u6700\u8001\u7684\u6d3b\u52a8\u4e8b\u52a1\u8fd8\u65e9\u7684undo log\uff0c\u5e76\u5220\u9664\u5b83\u4eec\uff0c\u4ece\u800c\u4fdd\u8bc1undo log\u6587\u4ef6\u4e0d\u81f3\u4e8e\u65e0\u9650\u589e\u957f\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#44innodb-mvcc","title":"4.4InnoDB MVCC\u5b9e\u73b0\u539f\u7406","text":"<p>\u6bcf\u884c\u6570\u636e\u9690\u85cf\u4e09\u4e2a\u5217\uff1aDB_TRX_ID\uff08\u6700\u8fd1\u4e8b\u52a1\u53f7\uff09DB_ROLL_PTR\uff08\u56de\u6eda\u6307\u9488\uff09DB_ROW_ID\uff08\u884cID\uff09\uff0c\u56de\u6eda\u6307\u9488\u6307\u5411undo</p> <p>\u901a\u8fc7read view\u5224\u65ad\u884c\u8bb0\u5f55\u662f\u5426\u53ef\u89c1\uff0c\u5177\u4f53\u7684\u5224\u65ad\u6d41\u7a0b\u5982\u4e0b:</p> <ul> <li>RR\u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u5728\u6bcf\u4e2a\u4e8b\u52a1\u5f00\u59cb\u7684\u65f6\u5019\uff0c\u4f1a\u5c06\u5f53\u524d\u7cfb\u7edf\u4e2d\u7684\u6240\u6709\u7684\u6d3b\u8dc3\u4e8b\u52a1\u62f7\u8d1d\u5230\u4e00\u4e2a\u5217\u8868\u4e2d(read view)</li> <li>RC\u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u5728\u4e8b\u52a1\u4e2d\u7684\u6bcf\u4e2a\u8bed\u53e5\u5f00\u59cb\u65f6\uff0c\u4f1a\u5c06\u5f53\u524d\u7cfb\u7edf\u4e2d\u7684\u6240\u6709\u7684\u6d3b\u8dc3\u4e8b\u52a1\u62f7\u8d1d\u5230\u4e00\u4e2a\u5217\u8868\u4e2d(read view) </li> <li>\u5728read view\u4e2d\u6700\u65e9\u7684\u4e8b\u52a1ID\u4e3atmin\uff0c\u6700\u665a\u7684\u4e8b\u52a1ID\u4e3atmax\uff0cselectNode\u5bf9\u5e94\u7684\u4e8b\u52a1ID\u4e3atcreate</li> <li>\u5f53\u8bfb\u5230\u4e00\u884c\u65f6\uff0c\u8be5\u884c\u4e0a\u7684DB_TRX_ID\u4e3atid0\u3010undo\u6307\u9488\u4e0a\u6307\u7684\u3011\uff0c\u662f\u5426\u53ef\u89c1\u7684\u903b\u8f91\u5224\u65ad\u5982\u4e0b\u56fe</li> </ul> <p></p> <p>\u4e3e\u4f8b\uff1a\u56de\u770b\u4e0b\u4e0a\u9762\u7684\u4f8b\u5b50</p> <p></p> session 1 session 2 read view RC RR select a from test; return a = 10 start transaction; update test set a = 20; start transaction; 1, 2 1, 2 select a from test; return ? 1, 2tid0(\u5f53\u524da=20 DB_TRX_ID=1)&gt; tmin(1) no-&gt;\u901a\u8fc7\u56de\u6eda\u6307\u9488\u5411\u4e0a\u627etid0 = NULL (tmin=1,tmax=2,tcreate=2 \u4e0d\u5728readview\uff09\u6545 return 10 1, 2tid0(\u5f53\u524da=20 DB_TRX_ID=1)&gt; tmin(1) no-&gt;\u901a\u8fc7\u56de\u6eda\u6307\u9488\u5411\u4e0a\u627etid0 = NULL (tmin=1,tmax=2,tcreate=2 \u4e0d\u5728readview\uff09\u6545 return 10 commit; 1, 2 1, 2 select a from test; return ? 2tid0 \uff08\u5f53\u524da = 20\u7684\u7248\u672c \u8bb0\u5f55\u7684DB_TRX_ID = 1\uff09&lt; tmin\uff082\uff09\u6545\u53ef\u89c1 return 20 1, 2tid0(\u5f53\u524da=20 DB_TRX_ID=1)&gt; tmin(1) no-&gt;\u901a\u8fc7\u56de\u6eda\u6307\u9488\u5411\u4e0a\u627etid0 = NULL (tmin=1,tmax=2,tcreate=2 \u4e0d\u5728readview\uff09\u6545 return 10"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#45mvcc","title":"4.5.MVCC\u89e3\u51b3\u4e86\u4ec0\u4e48\u95ee\u9898","text":"<ul> <li>MVCC\u4f7f\u5f97\u6570\u636e\u5e93\u8bfb\u4e0d\u4f1a\u5bf9\u6570\u636e\u52a0\u9501\uff0c\u666e\u901a\u7684SELECT\u8bf7\u6c42\u4e0d\u4f1a\u52a0\u9501\uff0c\u63d0\u9ad8\u4e86\u6570\u636e\u5e93\u7684\u5e76\u53d1\u5904\u7406\u80fd\u529b\uff1b</li> <li>\u501f\u52a9MVCC\uff0c\u6570\u636e\u5e93\u53ef\u4ee5\u5b9e\u73b0RC\uff0cRR\u7b49\u9694\u79bb\u7ea7\u522b\uff0c\u7528\u6237\u53ef\u4ee5\u67e5\u770b\u5f53\u524d\u6570\u636e\u7684\u524d\u4e00\u4e2a\u6216\u8005\u524d\u51e0\u4e2a\u5386\u53f2\u7248\u672c\u3002\u4fdd\u8bc1\u4e86ACID\u4e2d\u7684I\u7279\u6027\uff08\u9694\u79bb\u6027\uff09\u3002</li> </ul>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#5","title":"5.\u52a0\u9501\u5206\u6790","text":"<p>SQL1\uff1aselect * from t1 where id = 10;</p> <p>SQL2\uff1adelete from t1 where id = 10;</p> <p>\u5206\u522b\u52a0\u4ec0\u4e48\u9501\uff1f</p> <p>\u524d\u63d0\u4e00\uff1aid\u5217\u662f\u4e0d\u662f\u4e3b\u952e\uff1f</p> <p>\u524d\u63d0\u4e8c\uff1a\u5f53\u524d\u7cfb\u7edf\u7684\u9694\u79bb\u7ea7\u522b\u662f\u4ec0\u4e48\uff1f</p> <p>\u524d\u63d0\u4e09\uff1aid\u5217\u662f\u552f\u4e00\u7d22\u5f15\u5417\uff1f</p> <p>\u524d\u63d0\u56db\uff1aid\u5217\u4e0a\u6709\u7d22\u5f15\u5417\uff1f</p>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#51rc","title":"5.1RC\u9694\u79bb\u7ea7\u522b","text":""},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#511rc","title":"5.1.1\u4e3b\u952e+RC","text":"<p>X\u9501\uff0c\u805a\u7c07\u7d22\u5f15\u7684id=10</p> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#512-rc","title":"5.1.2 \u552f\u4e00\u7d22\u5f15+RC","text":"<p>id\u5217\u662f\u552f\u4e00\u7d22\u5f15\uff0c\u90a3\u4e48SQL\u9700\u8981\u52a0\u4e24\u4e2aX\u9501\uff0c\u4e00\u4e2a\u5bf9\u5e94\u4e8eid unique\u7d22\u5f15\u4e0a\u7684id = 10\u7684\u8bb0\u5f55\uff0c\u53e6\u4e00\u628a\u9501\u5bf9\u5e94\u4e8e\u805a\u7c07\u7d22\u5f15\u4e0a\u7684[name=\u2019d\u2019,id=10]\u7684\u8bb0\u5f55\u3002</p> <p></p> <p>\u4e3a\u4ec0\u4e48\u805a\u7c07\u7d22\u5f15\u8981\u4e0a\u9501\uff1f</p> <p>\u9632\u6b62\u4e3b\u952e\u5e76\u53d1\u66f4\u65b0\uff0c\u8fdd\u80cc\u4e86\u540c\u4e00\u8bb0\u5f55\u4e0a\u7684\u66f4\u65b0/\u5220\u9664\u9700\u8981\u4e32\u884c\u6267\u884c\u7684\u7ea6\u675f</p>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#513-rc","title":"5.1.3.\u975e\u552f\u4e00\u7d22\u5f15 +RC","text":"<p>\u90a3\u4e48\u5bf9\u5e94\u7684\u6240\u6709\u6ee1\u8db3SQL\u67e5\u8be2\u6761\u4ef6\u7684\u8bb0\u5f55\uff0c\u90fd\u4f1a\u88ab\u52a0\u9501\u3002\u540c\u65f6\uff0c\u8fd9\u4e9b\u8bb0\u5f55\u5728\u4e3b\u952e\u7d22\u5f15\u4e0a\u7684\u8bb0\u5f55\uff0c\u4e5f\u4f1a\u88ab\u52a0\u9501\u3002</p> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#514-rc","title":"5.1.4.\u65e0\u7d22\u5f15 +RC","text":"<p>\u82e5id\u5217\u4e0a\u6ca1\u6709\u7d22\u5f15\uff0cSQL\u4f1a\u8d70\u805a\u7c07\u7d22\u5f15\u7684\u5168\u626b\u63cf\u8fdb\u884c\u8fc7\u6ee4\uff0c\u7531\u4e8e\u8fc7\u6ee4\u662f\u7531MySQL Server\u5c42\u9762\u8fdb\u884c\u7684\u3002\u56e0\u6b64\u6bcf\u6761\u8bb0\u5f55\uff0c\u65e0\u8bba\u662f\u5426\u6ee1\u8db3\u6761\u4ef6\uff0c\u90fd\u4f1a\u88ab\u52a0\u4e0aX\u9501\u3002\u4f46\u662f\uff0c\u4e3a\u4e86\u6548\u7387\u8003\u91cf\uff0cMySQL\u505a\u4e86\u4f18\u5316\uff0c\u5bf9\u4e8e\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u8bb0\u5f55\uff0c\u4f1a\u5728\u5224\u65ad\u540e\u653e\u9501\uff0c\u6700\u7ec8\u6301\u6709\u7684\uff0c\u662f\u6ee1\u8db3\u6761\u4ef6\u7684\u8bb0\u5f55\u4e0a\u7684\u9501\uff0c\u4f46\u662f\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u8bb0\u5f55\u4e0a\u7684\u52a0\u9501/\u653e\u9501\u52a8\u4f5c\u4e0d\u4f1a\u7701\u7565\u3002\u540c\u65f6\uff0c\u4f18\u5316\u4e5f\u8fdd\u80cc\u4e862PL\u7684\u7ea6\u675f\u3002</p> <p>\u5176\u5b9e\u5c31\u662f\u5168\u8868\u626b\uff0c\u7136\u540e\u626b\u5230\u7684\u8bb0\u5f55\u52a0X\u9501\u3002</p> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#52-rr","title":"5.2 RR\u9694\u79bb\u7ea7\u522b","text":"<p>delete from t1 where id = 10;</p>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#521rr","title":"5.2.1\u4e3b\u952e+RR","text":"<p>\u540cRC\uff0c\u805a\u7c07\u7d22\u5f15\u7684id=10</p>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#522rr","title":"5.2.2\u552f\u4e00\u7d22\u5f15+RR","text":"<p>\u540cRC\uff0c\u4e24\u628a\u9501\uff0cunique\u7d22\u5f15\u4e0a\u7684id = 10\u7684\u8bb0\u5f55\uff0c\u53e6\u4e00\u628a\u9501\u5bf9\u5e94\u4e8e\u805a\u7c07\u7d22\u5f15\u4e0a\u7684[name=\u2019d\u2019,id=10]\u7684\u8bb0\u5f55\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#523-rr","title":"5.2.3.\u975e\u552f\u4e00\u7d22\u5f15 +RR","text":"<p>\u7d22\u5f15gap+\u884c\u9501(next-key)\uff0c\u805a\u7c07\u7d22\u5f15\u884c\u9501\uff0c\u9632\u6b62\u5e7b\u8bfb\uff0c\u8fde\u7eed\u4e24\u6b21\u5f53\u524d\u8bfb\uff0c\u7ed3\u679c\u4e00\u6837(\u4f8b\u5982\uff1aselect * from t1 where id = 10 for update;)</p> <p>RR\u9694\u79bb\u7ea7\u522b\u4e0b\uff0cid\u5217\u4e0a\u6709\u4e00\u4e2a\u975e\u552f\u4e00\u7d22\u5f15\uff0c\u5bf9\u5e94SQL\uff1adelete from t1 where id = 10; </p> <p>\u9996\u5148\uff0c\u901a\u8fc7id\u7d22\u5f15\u5b9a\u4f4d\u5230\u7b2c\u4e00\u6761\u6ee1\u8db3\u67e5\u8be2\u6761\u4ef6\u7684\u8bb0\u5f55\uff0c\u52a0\u8bb0\u5f55\u4e0a\u7684X\u9501\uff0c\u52a0GAP\u4e0a\u7684GAP\u9501\uff0c\u7136\u540e\u52a0\u4e3b\u952e\u805a\u7c07\u7d22\u5f15\u4e0a\u7684\u8bb0\u5f55X\u9501\uff0c\u7136\u540e\u8fd4\u56de\uff1b\u7136\u540e\u8bfb\u53d6\u4e0b\u4e00\u6761\uff0c\u91cd\u590d\u8fdb\u884c\u3002\u76f4\u81f3\u8fdb\u884c\u5230\u7b2c\u4e00\u6761\u4e0d\u6ee1\u8db3\u6761\u4ef6\u7684\u8bb0\u5f55[11,f]\uff0c\u6b64\u65f6\uff0c\u4e0d\u9700\u8981\u52a0\u8bb0\u5f55X\u9501\uff0c\u4f46\u662f\u4ecd\u65e7\u9700\u8981\u52a0GAP\u9501\uff0c\u6700\u540e\u8fd4\u56de\u7ed3\u675f\u3002</p> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#524-rr","title":"5.2.4.\u65e0\u7d22\u5f15 +RR","text":"<p>\u5168\u8868\u626b\uff0cGAP+\u884c\u9501</p> <p></p>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#53-serializable","title":"5.3. Serializable","text":"<p>SQL2\uff1adelete from t1 where id = 10; Serializable\u9694\u79bb\u7ea7\u522b\u4e0eRepeatable Read\u9694\u79bb\u7ea7\u522b\u5b8c\u5168\u4e00\u81f4\u3002</p> <p>SQL1\uff1aselect * from t1 where id = 10; \u5728RC\uff0cRR\u9694\u79bb\u7ea7\u522b\u4e0b\uff0c\u90fd\u662f\u5feb\u7167\u8bfb\uff0c\u4e0d\u52a0\u9501\u3002Serializable SQL1\u4f1a\u52a0\u8bfb\u9501\uff0c\u4e5f\u5c31\u662f\u8bf4\u5feb\u7167\u8bfb\u4e0d\u590d\u5b58\u5728\uff0cMVCC\u5e76\u53d1\u63a7\u5236\u964d\u7ea7\u4e3aLock-Based CC\u3002</p> <p>\u7ed3\u8bba\uff1a\u5728MySQL/InnoDB\u4e2d\uff0c\u6240\u8c13\u7684\u8bfb\u4e0d\u52a0\u9501\uff0c\u5e76\u4e0d\u9002\u7528\u4e8e\u6240\u6709\u7684\u60c5\u51b5\uff0c\u800c\u662f\u9694\u79bb\u7ea7\u522b\u76f8\u5173\u7684\u3002Serializable\u9694\u79bb\u7ea7\u522b\uff0c\u8bfb\u4e0d\u52a0\u9501\u5c31\u4e0d\u518d\u6210\u7acb\uff0c\u6240\u6709\u7684\u8bfb\u64cd\u4f5c\uff0c\u90fd\u662f\u5f53\u524d\u8bfb\u3002</p>"},{"location":"mt%E8%B5%84%E6%BA%90/mysql-MVCC/#6","title":"6.\u603b\u7ed3","text":"<p>InnoDB \u4e0d\u540c\u9694\u79bb\u7ea7\u522b\u5b9e\u73b0\u65b9\u5f0f</p> <p>\u5feb\u7167\u8bfb\u901a\u8fc7MVCC+undoLog \u5f53\u524d\u8bfb\u901a\u8fc7\u52a0next-key lock\u5b9e\u73b0</p> <p>\u9488\u5bf9\u5f53\u524d\u8bfb\uff0cRC\u9694\u79bb\u7ea7\u522b\u5bf9\u8bfb\u53d6\u5230\u7684\u8bb0\u5f55\u52a0\u9501\uff08\u8bb0\u5f55\u9501\uff09\uff0c\u5b58\u5728\u5e7b\u8bfb</p> <p>\u9488\u5bf9\u5f53\u524d\u8bfb\uff0cRR\u9694\u79bb\u7ea7\u522b\u5bf9\u8bfb\u53d6\u5230\u7684\u8bb0\u5f55\u52a0\u9501\uff08\u8bb0\u5f55\u9501\uff09\uff0c\u540c\u65f6\u8303\u56f4\u52a0\u9501\uff0c\u4e0d\u5b58\u5728\u5e7b\u8bfb</p> <p>\u5e8f\u5217\u5316\uff0cMVCC\u5e76\u53d1\u63a7\u5236\u9000\u5316\u6210\u57fa\u4e8e\u9501\u7684\u5e76\u53d1\u63a7\u5236\u3002\u4e0d\u533a\u5206\u5f53\u524d\u8bfb\u548c\u5feb\u7167\u8bfb\uff0c\u6240\u6709\u8bfb\u90fd\u662f\u5f53\u524d\u8bfb\uff0c\u8bfb\u52a0S\uff0c\u5199\u52a0X</p> <p>\u8d44\u6599</p> <p>https://www.aneasystone.com/archives/2017/11/solving-dead-locks-two.html</p> <p>1. RDS\u5173\u4e8eMySQL\u9501\u673a\u5236\u77e5\u8bc6\u666e\u53ca</p> <p>MySQL MVCC\u539f\u7406</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Grafana%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/","title":"Grafana\u4f7f\u7528\u624b\u518c","text":""},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Grafana%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#grafana_1","title":"Grafana\u662f\u4ec0\u4e48","text":"<p>Grafana\u662f\u4e00\u4e2a\u4eea\u8868\u76d8\uff0cprometheus\u662f\u6570\u636e\u6e90\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Grafana%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_1","title":"\u5b9e\u6218","text":"<p>Grafana\u5185\u7f6e\u4e86\u5f88\u591a\u6570\u636e\u6e90\uff0c\u4e5f\u53ef\u4ee5\u5b89\u88c5\u63d2\u4ef6\u7528\u4e8e\u652f\u6301\u66f4\u591a\u7684\u6570\u636e\u6e90\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/Docker%E5%8E%9F%E7%90%86/","title":"Docker \u539f\u7406","text":"<p>[toc]</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/Docker%E5%8E%9F%E7%90%86/#_1","title":"\u8c08\u8c08\u865a\u62df\u5316\u6280\u672f","text":"<p>\u865a\u62df\u5316\u6280\u672f\u9700\u8981\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff1a</p> <ul> <li>\u5236\u9020\u865a\u62df\u73af\u5883\uff0c\u9694\u79bb\u540c\u4e00\u7269\u7406\u5e73\u53f0\u4e2d\u7684\u4e0d\u540c\u5e94\u7528\u7a0b\u5e8f\u3002</li> <li>\u63a7\u5236\u786c\u4ef6\u8d44\u6e90\u7684\u5206\u914d\u3002</li> </ul>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/Docker%E5%8E%9F%E7%90%86/#dockers","title":"Dockers\u6280\u672f\u5b9e\u73b0","text":"<p>Docker \u7684\u5b9e\u73b0\uff0c\u4e3b\u8981\u5f52\u7ed3\u4e8e\u4e09\u5927\u6280\u672f\uff1a</p> <ul> <li>\u547d\u540d\u7a7a\u95f4 ( Namespaces ) </li> <li>\u63a7\u5236\u7ec4 ( Control Groups ) </li> <li>\u8054\u5408\u6587\u4ef6\u7cfb\u7edf ( Union File System ) </li> </ul>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/Docker%E5%8E%9F%E7%90%86/#namespace","title":"\u57fa\u4e8eNamespace\u5b9e\u73b0\u8fdb\u7a0b\u9694\u79bb","text":"<p>Docker\u4e3a\u6bcf\u4e2a\u5bb9\u5668\u5206\u914d\u4e86\u72ec\u7acb\u7684PID namespace\u3002\u8fd9\u610f\u5473\u7740\u6bcf\u4e2a\u5bb9\u5668\u90fd\u6709\u5176\u72ec\u7acb\u7684\u8fdb\u7a0b\u7a7a\u95f4\uff0c\u770b\u4e0d\u5230\u5176\u4ed6\u5bb9\u5668\u7684\u8fdb\u7a0b\u3002\u5bb9\u5668\u5185\u7684\u8fdb\u7a0b\u5728\u547d\u540d\u7a7a\u95f4\u5185\u8fd0\u884c\uff0c\u800c\u4e0d\u4f1a\u5f71\u54cd\u4e3b\u673a\u6216\u5176\u4ed6\u5bb9\u5668\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/Docker%E5%8E%9F%E7%90%86/#control-groups","title":"\u57fa\u4e8eControl Groups\u5b9e\u73b0\u786c\u4ef6\u8d44\u6e90\u9694\u79bb","text":"<p>\u8d44\u6e90\u63a7\u5236\u7ec4\uff08Control Croups\uff09\u7684\u4f5c\u7528\u662f\u5b9e\u73b0\u786c\u4ef6\u8d44\u6e90\u7684\u9694\u79bb\uff0c\u63a7\u5236\u786c\u4ef6\u8d44\u6e90\u7684\u5206\u914d\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/Docker%E5%8E%9F%E7%90%86/#_2","title":"\u57fa\u4e8e\u8054\u5408\u6587\u4ef6\u7cfb\u7edf\u7ba1\u7406\u6587\u4ef6\u8d44\u6e90","text":"<p>\u8054\u5408\u6587\u4ef6\u7cfb\u7edf ( Union File System ) \u662f\u4e00\u79cd\u80fd\u591f\u540c\u65f6\u6302\u8f7d\u4e0d\u540c\u5b9e\u9645\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u5230\u540c\u4e00\u76ee\u5f55\uff0c\u5f62\u6210\u4e00\u79cd\u8054\u5408\u6587\u4ef6\u7ed3\u6784\u7684\u6587\u4ef6\u7cfb\u7edf\u3002\u8054\u5408\u6587\u4ef6\u7cfb\u7edf\u672c\u8eab\u4e0e\u865a\u62df\u5316\u5e76\u65e0\u592a\u5927\u7684\u5173\u7cfb\u3002</p> <p>\u5728Linux\u4e2d\uff0c\u6302\u8f7d\uff08Mount\uff09\u662f\u6307\u5c06\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u8fde\u63a5\u5230\u6307\u5b9a\u7684\u76ee\u5f55\u4e0a\uff0c\u4f7f\u5f97\u8be5\u76ee\u5f55\u6210\u4e3a\u6587\u4ef6\u7cfb\u7edf\u7684\u8bbf\u95ee\u5165\u53e3\u3002\u901a\u8fc7\u6302\u8f7d\uff0c\u53ef\u4ee5\u4f7f\u5f97\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6\u548c\u76ee\u5f55\u53ef\u5728\u7279\u5b9a\u76ee\u5f55\u4e0b\u8fdb\u884c\u8bfb\u5199\u64cd\u4f5c\u3002\u5177\u4f53\u800c\u8a00\uff0c\u6302\u8f7d\u64cd\u4f5c\u662f\u5c06\u8bbe\u5907\u6587\u4ef6\u4e2d\u7684\u9876\u7ea7\u76ee\u5f55\u8fde\u63a5\u5230Linux\u6839\u76ee\u5f55\u4e0b\u7684\u67d0\u4e00\u76ee\u5f55\uff08\u6700\u597d\u662f\u7a7a\u76ee\u5f55\uff09\uff0c\u8bbf\u95ee\u6b64\u76ee\u5f55\u5c31\u7b49\u540c\u4e8e\u8bbf\u95ee\u8bbe\u5907\u6587\u4ef6\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5e76\u4e0d\u662f\u6839\u76ee\u5f55\u4e0b\u4efb\u4f55\u4e00\u4e2a\u76ee\u5f55\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u6302\u8f7d\u70b9\uff0c\u7531\u4e8e\u6302\u8f7d\u64cd\u4f5c\u4f1a\u4f7f\u5f97\u539f\u6709\u76ee\u5f55\u4e2d\u6587\u4ef6\u88ab\u9690\u85cf\uff0c\u56e0\u6b64\u6839\u76ee\u5f55\u4ee5\u53ca\u7cfb\u7edf\u539f\u6709\u76ee\u5f55\u90fd\u4e0d\u8981\u4f5c\u4e3a\u6302\u8f7d\u70b9\uff0c\u4f1a\u9020\u6210\u7cfb\u7edf\u5f02\u5e38\u751a\u81f3\u5d29\u6e83\uff0c\u6302\u8f7d\u70b9\u6700\u597d\u662f\u65b0\u5efa\u7684\u7a7a\u76ee\u5f55\u3002</p> <p>\u901f\u8bb0\uff1a\u5c06\u67d0\u6587\u4ef6\u7cfb\u7edf\u6302\u8f7d\u5230\u67d0\u4e2a\u7a7a\u76ee\u5f55\u4e0b\u3002</p> <p>\u6587\u4ef6\u7cfb\u7edf\u7684\u4fee\u6539\u4f5c\u4e3a\u4e00\u6b21\u63d0\u4ea4\u6765\u4e00\u5c42\u5c42\u7684\u53e0\u52a0\uff0c\u4e0a\u5c42\u6587\u4ef6\u53ef\u4ee5\u5171\u7528\u4e0b\u5c42\u6587\u4ef6\uff0c\u4ece\u800c\u8282\u7ea6\u4e86\u7a7a\u95f4\u3002</p> <p>\u5176\u4e2d\u6700\u4e0a\u9762\u7684\u4e00\u5c42\u53eb\u505a\u5bb9\u5668\u5c42\uff08\u53ef\u8bfb\u53ef\u5199\uff09\uff0c\u4e0b\u9762\u7684\u6240\u6709\u5c42\u53eb\u505a\u955c\u50cf\u5c42\uff08\u53ef\u8bfb\u3001\u4e0d\u53ef\u5199\uff09\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/Docker%E5%8E%9F%E7%90%86/#docker_1","title":"Docker\u6838\u5fc3\u7ec4\u6210","text":"<p>Docker\u4e2d\u6709\u56db\u5927\u7ec4\u6210\u5bf9\u8c61\uff1a</p> <ul> <li>\u955c\u50cf\uff08Image\uff09</li> <li>\u5bb9\u5668\uff08Container\uff09</li> <li>\u7f51\u7edc\uff08Network\uff09</li> <li>\u6570\u636e\u5377\uff08Volume\uff09</li> </ul>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/Docker%E5%8E%9F%E7%90%86/#_3","title":"\u955c\u50cf","text":"<p>\u7b80\u5355\u6765\u8bf4\uff0cdocker\u955c\u50cf\u5c31\u662f\u8f6f\u4ef6\u5305\u3002\u5b83\u4e3a\u8fd0\u884c\u7684\u5bb9\u5668\u63d0\u4f9b\u4e00\u4e2a\u72ec\u7acb\u7684\u6587\u4ef6\u7cfb\u7edf\uff08\u53eb\u505a\u8054\u5408\u6587\u4ef6\u7cfb\u7edf\uff09\u3001\u8fd0\u884c\u65f6\u9700\u8981\u7684\u6240\u6709\u8f6f\u4ef6\u3001\u73af\u5883\u3001\u4f9d\u8d56......</p> <p></p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/Docker%E5%8E%9F%E7%90%86/#_4","title":"\u5bb9\u5668","text":"<ul> <li>\u5bb9\u5668\u662f\u5bbf\u4e3b\u673a\u4e0a\u7684\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u5b83\u4e0e\u5176\u4ed6\u5bb9\u5668\u8fdb\u7a0b\u9694\u79bb\u3002</li> <li>\u5bb9\u5668\u662f\u5904\u4e8e\u8fd0\u884c\u72b6\u6001\u7684\u955c\u50cf\u3002</li> </ul>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/Docker%E5%8E%9F%E7%90%86/#_5","title":"\u7f51\u7edc","text":""},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/Docker%E5%8E%9F%E7%90%86/#_6","title":"\u6570\u636e\u5377","text":""},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/","title":"docker\u5b9e\u6218\u6559\u7a0b","text":"<p>[toc]</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#docker_1","title":"\u5982\u4f55\u9ad8\u6548\u4f7f\u7528docker","text":"<p>docker\u5b98\u65b9\u6587\u6863</p> <ol> <li>\u5173\u4e8e\u5b66\u4e60\u5177\u4f53\u7684\u6307\u4ee4</li> <li>\u901a\u5e38\u7528[ ]\u8868\u793a\u53ef\u5199\u6216\u53ef\u4e0d\u5199\u7684\u5185\u5bb9\uff0c\u4f8b\u5982\uff1a<code>docker start [OPTIONS] CONTAINER [CONTAINER...]</code>\u8868\u793aOPTIONS\u5bf9\u5e94\u7684\u503c\u53ef\u5199\u53ef\u4e0d\u5199\uff0c\u5e76\u4e14\u5bb9\u5668\u540e\u9762\u53ef\u4ee5\u63a5\u5f88\u591a\u5bb9\u5668\u3002</li> <li>\u5728shell\u4e2d\u4e5f\u53ef\u4ee5\u5feb\u901f\u67e5\u770bAPI\uff0c\u5047\u5b9a\u6211\u4eec\u8981\u64cd\u4f5c\u5bb9\u5668\uff0c\u8f93\u5165<code>docker container</code>\u5373\u53ef\uff0c\u64cd\u4f5c\u955c\u50cf\uff0c\u8f93\u5165<code>docker image</code>\u5373\u53ef\u3002\u8fd9\u4e24\u4e2aAPI\u6700\u5e38\u4f7f\u7528\u3002</li> <li>\u5982\u679c\u60f3\u67e5\u770b\u67d0\u4e2aAPI\u7684\u529f\u80fd\uff0c\u8f93\u5165<code>\u6307\u4ee4 + --help</code>\u5373\u53ef\uff0c\u4f8b\u5982<code>docker container export --help</code>\u3002</li> </ol>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#docker_2","title":"docker\u5b89\u88c5\u6559\u7a0b","text":"<p>\u5b98\u65b9\u6587\u6863centos\u7248</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#docker_3","title":"docker\u955c\u50cf\u52a0\u901f","text":""},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#docker_4","title":"docker\u6307\u4ee4","text":"<p>\u5bf9\u4e8e\u64cd\u4f5cdocker\uff0c\u6211\u4eec\u9700\u8981\u660e\u786e\u7684\u662f\uff0c\u8981\u64cd\u4f5cdocker\u7684\u54ea\u4e9b\u5bf9\u8c61\uff1f\u4e5f\u5373\u64cd\u4f5cdocker\u8f6f\u4ef6\u3001\u8fd8\u662f\u64cd\u4f5cdocker\u7684image\uff0c\u8fd8\u662f\u64cd\u4f5cdocker\u7684container\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#docker_5","title":"\u64cd\u4f5cdocker\u8f6f\u4ef6","text":"<ol> <li>\u67e5\u770bdocker\u8fd0\u884c\u60c5\u51b5\uff1a<code>docker info</code></li> <li>\u542f\u52a8docker\uff1a<code>systemctl start docker</code></li> <li>\u505c\u6b62docker\uff1a<code>systemctl stop docker</code></li> <li>\u91cd\u542fdocker\uff1a<code>systemctl restart docker</code></li> <li>\u67e5\u770bdocker\u72b6\u6001\uff1a<code>systemctl status docker</code></li> <li>\u5f00\u673a\u542f\u52a8\uff1a<code>systemctl enable docker</code></li> <li>\u67e5\u770bdocker\u6982\u8981\u4fe1\u606f\uff1a<code>docker info</code></li> <li>\u67e5\u770bdocker\u603b\u4f53\u5e2e\u52a9\u6587\u6863\uff1a<code>docker --help</code></li> <li>\u67e5\u770bdocker\u547d\u4ee4\u5e2e\u52a9\u6587\u6863\uff1a<code>docker \u5177\u4f53\u547d\u4ee4 --help</code></li> <li>\u67e5\u770bdocker\u5360\u7528\u7684\u7a7a\u95f4\uff1a<code>docker system df</code></li> </ol>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#docker_6","title":"\u64cd\u4f5cdocker\u955c\u50cf","text":"<ul> <li>\u5217\u51fa\u672c\u5730\u4e3b\u673a\u4e0a\u7684\u955c\u50cf\uff1a<code>docker images</code>\u3002</li> </ul> REPOSITORY TAG IMAGE ID CREATED SIZE \u955c\u50cf\u4ed3\u5e93\uff08\u901a\u5e38\u662f\u955c\u50cf\u540d\uff09 \u955c\u50cf\u7684\u6807\u7b7e\uff08\u7248\u672c\u53f7\uff09 \u955c\u50cf\u552f\u4e00ID \u955c\u50cf\u521b\u5efa\u65f6\u95f4 \u955c\u50cf\u5927\u5c0f <ul> <li>\u955c\u50cf\u540d\u79f0\u7ed3\u6784\uff1a<code>cogset/lets-encrypt:0.14.2</code>\u3002</li> </ul> <p>username: cogset</p> <p>repository: lets-encrypt</p> <p>tag: 0.14.2</p> <p>\u6709\u65f6\u5019\u6ca1\u6709username\uff0c\u8868\u793a\u955c\u50cf\u662f\u7531 Docker \u5b98\u65b9\u6240\u7ef4\u62a4\u548c\u63d0\u4f9b\u7684\uff0c\u6240\u4ee5\u5c31\u4e0d\u5355\u72ec\u6807\u8bb0\u7528\u6237\u4e86\u3002</p> <ul> <li>\u53bb\u955c\u50cf\u8fdc\u7a0b\u4ed3\u5e93\u67e5\u627e\u67d0\u4e2a\u955c\u50cf\uff1a<code>docker</code> search \u955c\u50cf\u540d\u79f0</li> </ul> <p>\u200b   docker search \u76f8\u5173\u6587\u6863</p> <ul> <li>\u62c9\u53d6\uff08\u4e0b\u8f7d\uff09\u67d0\u4e2a\u955c\u50cf\uff1a<code>docker pull \u955c\u50cf\u540d\u5b57[:latest]</code></li> </ul> <p>\u200b   \u4f8b\u5982\uff1a<code>docker pull mysql:5.7</code></p> <ul> <li>\u5220\u9664\u67d0\u4e2a\u955c\u50cf\uff1a<code>docker rmi \u955c\u50cf\u540d\u6216\u955c\u50cfID</code></li> </ul> <p>\u200b   i \u8868\u793a image</p> <ul> <li>tar\u5305\u5bfc\u5165\u4e3adocker image\uff1a<code>docker image import</code></li> </ul>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#docker_7","title":"\u64cd\u4f5cdocker\u5bb9\u5668","text":"<ul> <li>\u521b\u5efa docker\u5bb9\u5668\uff1a<code>`docker run -it \u955c\u50cf\u540d /bin/bash</code></li> </ul> <p><code>-i</code>\uff1a\u4fdd\u8bc1\u5bb9\u5668\u7684STDIN\u5f00\u542f\uff0c\u6301\u4e45\u7684\u6807\u51c6\u8f93\u5165\u662f\u4ea4\u4e92\u5f0fshell\u7684\u201c\u534a\u8fb9\u5929\u201d\u3002</p> <p><code>-t</code>\uff1a\u8ba9docker\u4e3a\u65b0\u521b\u5efa\u7684\u5bb9\u5668\u5206\u914d\u4e00\u4e2a\u4e3atty\u7ec8\u7aef\u3002</p> <p>\u901a\u5e38<code>-it</code>\u642d\u914d\u4f7f\u7528\u3002</p> <p><code>/bin/bash</code>\uff1a\u521b\u5efa\u597d\u5bb9\u5668\u540e\uff0c\u9996\u5148\u6267\u884c\u8be5\u547d\u4ee4\uff0c\u4e5f\u5373\u6253\u5f00\u4e00\u4e2aBash shell\u3002</p> <ul> <li> <p>\u81ea\u5b9a\u4e49\u7aef\u53e3\u548c\u5bb9\u5668\u540d\u79f0\uff1a<code>docker run -it -p 8888:8080 --name t1 tomcat /bin/bash</code></p> </li> <li> <p>\u521b\u5efa\u5b88\u62a4\u5f0f\u5bb9\u5668\uff1a<code>docker run -d redis:6.0.8</code></p> </li> <li> <p>\u8fdb\u5165\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\uff1a</p> </li> </ul> <p>\u65b9\u6cd5\u4e00\uff1a<code>docker exec -it \u5bb9\u5668\u540d /bin/bash</code></p> <p>\u65b9\u6cd5\u4e8c\uff1a<code>docker attach \u5bb9\u5668\u540d</code></p> <p>\u5efa\u8bae\u4f7f\u7528<code>docker exec</code></p> <ul> <li>\u9000\u51fa\u5bb9\u5668</li> </ul> <p>\u65b9\u6cd5\u4e00\uff1a<code>ctrl + d</code></p> <p>\u65b9\u6cd5\u4e8c\uff1a<code>ctrl + p + q</code></p> <p>\u5efa\u8bae\u4f7f\u7528<code>ctrl + d</code></p> <ul> <li> <p>\u67e5\u770b\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\uff1a<code>docker ps</code></p> </li> <li> <p>\u67e5\u770b\u6240\u6709\u5bb9\u5668\uff1a<code>docker ps -a</code></p> </li> <li> <p>\u67e5\u770b\u5bb9\u5668\u4e2d\u6b63\u5728\u505a\u4ec0\u4e48\uff1a<code>docker logs \u5bb9\u5668\u540d</code></p> </li> <li> <p>\u67e5\u770b\u67d0\u4e2a\u5bb9\u5668\u5185\u90e8\u4fe1\u606f\uff1a<code>docker inspect \u5bb9\u5668\u540d</code></p> </li> </ul> <p>\u8865\uff1a\u8fdb\u5165<code>/var/lib/docker</code>\u80fd\u67e5\u770b\u66f4\u591a\u5173\u4e8edocker\u7684\u914d\u7f6e\u4fe1\u606f\u3002</p> <ul> <li> <p>\u542f\u52a8\u5df2\u7ecf\u505c\u6b62\u7684\u5bb9\u5668\uff1a<code>docker start \u5bb9\u5668\u540d</code></p> </li> <li> <p>\u505c\u6b62\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\uff1a<code>docker stop \u5bb9\u5668ID\u6216\u5bb9\u5668\u540d</code></p> </li> <li> <p>\u67e5\u770b\u5bb9\u5668\u65e5\u5fd7\uff1a<code>docker logs \u5bb9\u5668\u540d</code></p> </li> <li> <p>\u67e5\u770b\u5bb9\u5668\u7684\u8fdb\u7a0b\uff1a<code>docker top \u5bb9\u5668\u540d</code></p> </li> <li> <p>\u91cd\u542f\u5bb9\u5668\uff1a<code>docker restart \u5bb9\u5668\u540d</code></p> </li> <li> <p>\u4ece\u5bb9\u5668\u4e2d\u62f7\u8d1d\u6587\u4ef6\u5230\u4e3b\u673a\uff1a<code>docker cp \u5bb9\u5668ID:\u5bb9\u5668\u5185\u8def\u5f84 \u76ee\u7684\u4e3b\u673a\u8def\u5f84</code></p> </li> <li> <p>\u4ece\u4e3b\u673a\u4e2d\u62f7\u8d1d\u6587\u4ef6\u5230\u5bb9\u5668\uff1a<code>docker cp \u4e3b\u673a\u6587\u4ef6\u5730\u5740 \u5bb9\u5668ID:\u5bb9\u5668\u5185\u8def\u5f84</code></p> </li> <li> <p>\u5bb9\u5668\u5bfc\u51fa\u4e3atar\u89e3\u538b\u5305\uff1a<code>docker export \u5bb9\u5668ID &gt; \u6587\u4ef6\u540d.tar</code></p> </li> <li> <p>tar\u89e3\u538b\u5305\u5bfc\u5165\u4e3a\u955c\u50cf\uff1a<code>cat \u6587\u4ef6\u540d.tar | docker import - \u955c\u50cf\u540d:\u955c\u50cf\u7248\u672c\u53f7</code>\uff0c\u5176\u4e2d\u955c\u50cf\u7528\u6237\u3001\u955c\u50cf\u540d\u548c\u7248\u672c\u53f7\u968f\u610f\u6307\u5b9a\u3002</p> </li> </ul> <p>\u6ce8\u610f\uff1a\u5bb9\u5668\u5bfc\u51fa\u4e3a\u89e3\u538b\u5305\uff0c\u89e3\u538b\u5305\u518d\u5bfc\u5165\u4e3a\u955c\u50cf\uff01</p> <ul> <li>\u5c06\u5bb9\u5668\u5bfc\u51fa\u4e3a\u955c\u50cf/\u5236\u4f5c\u955c\u50cf\uff1a<code>docker commit -m \"add vim\" -a \"lhl\" \u5bb9\u5668ID \u955c\u50cf\u540d\u79f0[:\u955c\u50cf\u7248\u672c\u53f7]</code></li> </ul> <p>\u5c06\u81ea\u5df1\u5236\u4f5c\u7684\u955c\u50cf\u4e0a\u4f20\u81f3\u963f\u91cc\u4e91\uff1a</p> <p>\u9996\u5148\u521b\u5efa\u4e00\u4e2a\u547d\u540d\u7a7a\u95f4\uff0c\u57fa\u4e8e\u6b64\u547d\u540d\u7a7a\u95f4\u521b\u5efa\u4e00\u4e2a\u955c\u50cf\u4ed3\u5e93\uff0c\u7136\u540e\u6309\u7167\u963f\u91cc\u7684\u5b98\u65b9\u6587\u6863\u4e0a\u4f20\u672c\u5730\u955c\u50cf\u81f3\u955c\u50cf\u4ed3\u5e93\u5373\u53ef\u3002</p> <p>\u963f\u91cc\u4e91\u4e0edocker\u955c\u50cf \u5b98\u65b9\u6587\u6863</p> <p>\u5efa\u8bae\uff1a</p> <ol> <li>\u547d\u540d\u7a7a\u95f4\u4f5c\u4e3a\u4e00\u4e9b\u4ed3\u5e93\u7684\u96c6\u5408\uff0c\u63a8\u8350\u5c06\u4e00\u4e2a\u516c\u53f8\u6216\u7ec4\u7ec7\u7684\u4ed3\u5e93\u96c6\u4e2d\u5728\u4e00\u4e2a\u547d\u540d\u7a7a\u95f4\u4e0b\u9762\u3002</li> </ol> <p>\u4ee5\u516c\u53f8\u540d\u79f0\u4f5c\u4e3a\u547d\u540d\u7a7a\u95f4\uff1aaliyun\u3001alibaba</p> <p>\u4ee5\u56e2\u961f\u3001\u7ec4\u7ec7\u4f5c\u4e3a\u547d\u540d\u7a7a\u95f4\uff1amisaka-team</p> <ol> <li>\u4ed3\u5e93\u662f\u955c\u50cf\u7684\u96c6\u5408\uff0c\u5efa\u8bae\u5c06\u4e00\u4e2a\u5e94\u7528\u4e0d\u540c\u7248\u672c\u7684\u955c\u50cf\u653e\u7f6e\u5728\u4e00\u4e2a\u4ed3\u5e93\u4e2d\u3002\u5efa\u8bae\u4ee5\u8f6f\u4ef6\u5305\u540d\u6216\u5e94\u7528\u540d\u4f5c\u4e3a\u4ed3\u5e93\u540d\u79f0\u3002</li> </ol> <p>\u4ee5\u8f6f\u4ef6\u5305\u547d\u540d\uff1a\u4f8b\u5982 centos\u3001jetty</p> <p>\u4ee5\u5e94\u7528\u547d\u540d\uff1a\u4f8b\u5982 console-web\u3001console-service</p> <p>\u6784\u5efa\u79c1\u6709\u955c\u50cf\u4ed3\u5e93\uff1a\u4f7f\u7528docker registry\u3002\uff08\u6211\u6682\u65f6\u8fd8\u7528\u4e0d\u4e0a\uff09</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#docker_8","title":"docker \u5bb9\u5668\u6570\u636e\u5377","text":"<p>\u95ee\u9898\uff1a\u4e3a\u4ec0\u4e48\u8981\u5b66\u8fd9\u4e2a\u4e1c\u897f\uff1f</p> <p>\u7b54\u6848\uff1a\u5047\u5b9a\u6211\u4eec\u60f3\u968f\u65f6\u5907\u4efd\u67d0\u4e2a\u5bb9\u5668\u5185\u90e8\u7684\u8d44\u6599\uff0c\u9632\u6b62\u8be5\u5bb9\u5668\u88ab\u8bef\u5220\u540e\u8d44\u6599\u4e22\u5931\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u8003\u8651\u5c06docker\u5bb9\u5668\u4e2d\u7684\u6570\u636e\u6301\u4e45\u5316\u5230\u5bbf\u4e3b\u673a\u4e2d\u3002\u6b64\u65f6\u5bbf\u4e3b\u673a\u4e2d\u7684\u5185\u5bb9\u548cdocker\u5bb9\u5668\u4e2d\u7684\u5185\u5bb9\u5171\u4eab\u540c\u4e00\u7247\u5b58\u50a8\u7a7a\u95f4\u3002</p> <p><code>docker run -it --privileged=true -v /\u5bbf\u4e3b\u673a\u7edd\u5bf9\u8def\u5f84:/\u5bb9\u5668\u5185\u76ee\u5f55 \u955c\u50cf\u540d</code></p> <p>\u6848\u4f8b\uff1a</p> <p><code>docker run -it --privileged=true -v /tmp:/tmp ubuntu:20.04 /bin/bash</code></p> <p>--privileged=true \u8ba9docker\u5bb9\u5668\u62e5\u6709root\u6743\u9650\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#dockerfile","title":"dockerfile","text":"<p>\u5b98\u65b9\u6587\u6863</p> <p>dockerfile\u662f\u7528\u6765\u6784\u5efadocker\u955c\u50cf\u7684\u6587\u672c\u6587\u4ef6\u3002\u5047\u5b9a\u6211\u4eec\u5e0c\u671b\u955c\u50cf\u4e2d\u5e26\u6709vim\u3001jdk\u3001tomcat\u548cnginx\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u7f16\u5199\u4e00\u4e2adockerfile\uff0c\u8fd0\u884c\u6b64dockerfile\u540e\u4f1a\u5728\u955c\u50cf\u4e2d\u5b89\u88c5\u76f8\u5173\u8f6f\u4ef6\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#run","title":"RUN","text":"<p>\u4f7f\u7528\u65b9\u6cd5\uff1a<code>RUN yum -y install vim</code>\u3002</p> <p>\u57fa\u672c\u539f\u5219\u7684\u53c2\u8003\u6587\u6863</p> <p>\u57fa\u672c\u539f\u52191\uff1a\u5c3d\u91cf\u51cf\u5c11\u4e00\u4e2aDockerfile\u4e2d\u7684RUN\u547d\u4ee4\u7684\u4e2a\u6570</p> <p>RUN\u547d\u4ee4\u5728\u6784\u5efa\u65f6\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u5c42\uff0c\u5982\u975e\u7279\u6b8a\u7684\u9700\u8981\uff0c\u5efa\u8bae\u4e00\u4e2aDockerfile\u5728\u9700\u8981\u4f7f\u7528RUN\u547d\u4ee4\u7684\u65f6\u5019\u5c3d\u53ef\u80fd\u7684\u53ea\u7528\u4e00\u4e2aRUN\u547d\u4ee4\uff0c\u5c06\u591a\u6761RUN\u547d\u4ee4\u8fdb\u884c\u5408\u5e76\u53ef\u4ee5\u6709\u6548\u964d\u4f4e\u6784\u5efa\u7684\u955c\u50cf\u7684\u5c42\u6570\u3002</p> <p>\u57fa\u672c\u539f\u52192\uff1a \u4f7f\u7528&amp;&amp;\u8fde\u63a5\u591a\u6761\u547d\u4ee4\u3002</p> <p>\u51fa\u9519\u4e4b\u540e\u7acb\u5373\u8fd4\u56deDockerfile\u4e2d\u8fdb\u884c\u9519\u8bef\u63a7\u5236\u7684\u8fd4\u56de\u4fe1\u606f\uff0c\u8fd9\u6837\u4e0d\u4f46\u80fd\u5feb\u901f\u5b9a\u4f4d\u5230\u9519\u8bef\u7684\u5730\u65b9\uff0c\u8fd8\u80fd\u51fa\u9519\u65f6\u51cf\u5c11\u955c\u50cf\u6784\u5efa\u7684\u65f6\u95f4\u3002\u5728RUN\u547d\u4ee4\u4e2d\u5982\u679c\u9700\u8981\u4f7f\u7528\u591a\u6761\u8bed\u53e5\uff0c\u5efa\u8bae\u4f7f\u7528&amp;&amp;\u8fdb\u884c\u8fde\u63a5\uff0c\u5355\u6761\u8bed\u53e5\u7ed3\u675f\u65f6\u4f7f\u7528 \\\u8fdb\u884c\u8fde\u63a5\u907f\u514d\u53ef\u8bfb\u6027\u592a\u5dee\u3002\u5168\u90e8\u4f7f\u7528&amp;&amp;\u7b26\u7684\u597d\u5904\u5728\u4e8e\uff1a\u51fa\u9519\u540e\uff0c\u540e\u7eed\u5185\u5bb9\u5c31\u4f1a\u4e0d\u518d\u6267\u884c\uff0c\u5728\u955c\u50cf\u6784\u5efa\u5931\u8d25\u7684\u65f6\u5019\u6839\u636e\u51fa\u9519\u7684\u7b2c\u4e00\u73b0\u573a\u80fd\u66f4\u52a0\u5bb9\u6613\u5730\u5feb\u901f\u786e\u8ba4\u95ee\u9898\u7684\u539f\u56e0\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#add","title":"ADD","text":"<p>\u4f7f\u7528\u65b9\u6cd5\uff1a<code>ADD &lt;src&gt; &lt;dest&gt;</code></p> <p>\u4ee5Dockerfile\u6240\u5728\u76ee\u5f55\u4e3a\u5f53\u524d\u76ee\u5f55\uff0c\u5c06\u5bb9\u5668\u5916\u7684\u6587\u4ef6\u53d1\u9001\u5230\u5bb9\u5668\u5185\u90e8\u3002</p> <p>\u5047\u5b9aDockerfile\u6240\u5728\u76ee\u5f55\u4e0b\u6709<code>a.cpp</code>\u6587\u4ef6\u3002</p> <pre><code>ADD a.cpp .  # \u5c06\u5916\u90e8\u7684a.cpp\u4f20\u9012\u7ed9\u5bb9\u5668\u5185\u90e8\u7684 / \u76ee\u5f55\u3002\u5173\u4e8e\u76ee\u5f55\u76f8\u5173\u7684\u5185\u5bb9\u53c2\u8003WORKDIR\n</code></pre>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#workdir","title":"WORKDIR","text":"<p>WORKDIR\u4e3aDockerfile\u4e2d\u7684\u4efb\u4f55RUN\u3001CMD\u3001ENTRYPOINT\u3001COPY\u548cADD\u6307\u4ee4\u8bbe\u7f6e\u5de5\u4f5c\u76ee\u5f55\u3002\u5982\u679cDockerfile\u4e2d\u6ca1\u6709\u6307\u5b9aWORKDIR\uff0c\u5219\u9ed8\u8ba4\u662f\u5bb9\u5668\u5185\u7684<code>/</code>\u3002\u6ce8\u610f\uff0c\u5982\u679c\u6211\u4eec\u57fa\u4e8e\u67d0\u4e2a\u955c\u50cf\u7f16\u5199Dockerfile\uff0c\u90a3\u4e48WORKDIR\u53ef\u80fd\u4e0d\u662f/\u3002\u5efa\u8bae\u7528\u6237\u6307\u5b9aWORKDIR\u3002</p> <p>WORKDIR\u6307\u4ee4\u53ef\u4ee5\u5728Dockerfile\u4e2d\u591a\u6b21\u4f7f\u7528\u3002\u5982\u679c\u63d0\u4f9b\u4e86\u76f8\u5bf9\u8def\u5f84\uff0c\u5219\u5b83\u5c06\u4e0e\u4e0a\u4e00\u4e2aWORKDIR\u6307\u4ee4\u7684\u8def\u5f84\u76f8\u5bf9\u3002</p> <p>\u5047\u5b9a\u5f53\u524ddockerfile\u76ee\u5f55\u4e0b\u6709a.cpp\u548cb.cpp\u6587\u4ef6\uff0c\u5e76\u4e14Dockerfile\u7684\u5185\u5bb9\u4e3a\uff1a</p> <pre><code>FROM centos:7\nWORKDIR /apps\nADD a.cpp .\nWORKDIR doc\nADD b.cpp .\n</code></pre> <p>\u6267\u884c\u540e\u4f1a\u5728\u5bb9\u5668\u7684<code>/apps</code>\u4e0b\u521b\u5efa<code>a.cpp</code>\uff0c\u5728<code>/apps/doc</code>\u4e0b\u521b\u5efa<code>b.cpp</code>\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#entrypoint","title":"ENTRYPOINT","text":"<p>\u4e0d\u662f\u5f88\u4e86\u89e3~</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#from","title":"FROM","text":"<p>\u5fc5\u987b\u5199\u5728Dockerfile\u7684\u5f00\u5934\u3002\u6bcf\u4e2aDockerfile\u90fd\u5fc5\u987b\u57fa\u4e8e\u67d0\u4e2a\u955c\u50cf\u6784\u5efa\u65b0\u7684\u955c\u50cf\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#expose","title":"EXPOSE","text":"<p>EXPOSE\u6307\u4ee4\u901a\u77e5Docker\u5bb9\u5668\u5728\u8fd0\u884c\u65f6\u5bf9\u5916\u66b4\u9732\u7684\u7aef\u53e3\u53f7\u3002\u9ed8\u8ba4\u66b4\u9732TCP\u7aef\u53e3\u3002\u5982\u679c\u6211\u4eec\u60f3\u5728\u5916\u90e8\u901a\u8fc7\u5bb9\u5668\u66b4\u9732\u7684\u7aef\u53e3\u5411\u5bb9\u5668\u53d1\u9001\u4fe1\u606f\uff0c\u9700\u8981\u5728<code>docker run</code>\u6307\u5b9a\u4e2d\u6dfb\u52a0<code>-p</code>\u6216<code>-P</code>\u76f8\u5173\u6307\u4ee4\u3002</p> <pre><code># \u66b4\u97321\u4e2a\u7aef\u53e3\nEXPOSE 8080\n# \u66b4\u9732\u591a\u4e2a\u7aef\u53e3\nEXPOSE 3000 80 443 22\n</code></pre>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#build","title":"build","text":"<p>\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\u6709\u6587\u4ef6<code>jdk-8u361-linux-i586.tar.gz</code>\u548cDockerfile\u6587\u4ef6\uff0cDockerfile\u7684\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>FROM centos:7\n\nWORKDIR /\n\nRUN yum install -y vim &amp;&amp; \\\nyum install -y net-tools &amp;&amp; \\\nyum install -y glibc.i686\nADD jdk-8u361-linux-i586.tar.gz /usr/local/java\n\n# \u914d\u7f6eJava\u7684\u73af\u5883\u53d8\u91cf\nENV JAVA_HOME /usr/local/java/jdk1.8.0_361\nENV JRE_HOME /$JAVA_HOME/jre\nENV CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib:$CLASSPATH\nENV PATH $JAVA_HOME/bin:$PATH\n\nEXPOSE 80\n\n# run \u5bb9\u5668\u540e\u81ea\u52a8\u6267\u884c\u8be5\u547d\u4ee4\nCMD /bin/bash\n\n</code></pre> <p>\u6267\u884c\u547d\u4ee4\uff1a<code>docker build -t myrepo/myos:1.0 .</code></p> <p>\u53c2\u8003\u6587\u7ae0</p> <p>\u95ee\u9898\uff1a\u6bcf\u521b\u5efa\u4e00\u4e2a\u65b0\u7684docker\uff0c\u4f7f\u7528<code>ifconfig</code>\u67e5\u770b\u4f1a\u591a\u4e00\u4e2a\u7f51\u5361\u8bbe\u5907\u5417\uff1f</p> <p>\u95ee\u9898\uff1adocker\u7684\u7f51\u6865\u7ed3\u6784\u56fe\uff1f</p> <p>\u95ee\u9898\uff1adocker\u9ed8\u8ba4\u7f51\u6865\u201c\u63a5\u7ba1\u201d\u6240\u6709\u955c\u50cf\u521b\u5efa\u7684\u5bb9\u5668\u5417\uff1f</p> <p>\u95ee\u9898\uff1a\u5c1d\u8bd5\u5728\u201c\u7f51\u6865\u201d\u7f51\u7edc\u4e2dping\u4e0d\u540c\u7684\u5bb9\u5668\uff08\u53ef\u80fd\u662f\u4e0d\u540c\u955c\u50cf\u751f\u6210\u7684\u5bb9\u5668\uff09\u3002</p> <p>\u95ee\u9898\uff1a\u4e0d\u540c\u7f51\u6865\u8fde\u63a5\u7684\u5bb9\u5668\u53ef\u4ee5\u76f8\u4e92\u901a\u4fe1\u5417\uff1f</p> <p>\u4f7f\u7528 dockerfile \u5236\u4f5c\u955c\u50cf\u65f6 docker client \u4f1a\u53d1\u9001 dockerfile \u540c\u7ea7\u76ee\u5f55\u4e0b\u7684\u6240\u6709\u6587\u4ef6\u5230docker daemon\u3002\u89e3\u51b3\u529e\u6cd5\u6709\u4e24\u79cd\uff1a</p> <ul> <li>\u4f7f\u7528 dockerfile \u521b\u5efa\u955c\u50cf\u65f6\u65b0\u5efa\u76ee\u5f55</li> <li>\u4f7f\u7528 <code>.dockerignore</code>\uff0c\u5373\u5728 dockerfile \u76ee\u5f55\u4e0b\u6dfb\u52a0 <code>.dockerignore</code> \u6587\u4ef6\uff0c\u5e76\u5c06\u9700\u8981 ignore \u7684\u6587\u4ef6\u540d\u6dfb\u52a0\u5230\u8fd9\u4e2a\u6587\u4ef6\u4e2d</li> <li>\u5220\u9664\u4e0d\u9700\u8981\u7684\u6587\u4ef6</li> </ul> <p>\u6211\u4e0d\u592a\u61c2\u4ec0\u4e48\u53eb\u505a\u628a\u6587\u4ef6\u53d1\u9001\u7ed9docker daemon\u3002</p> <p>\u4f46\u662f\u5efa\u8bae\u4f7f\u7528 dockerfile \u521b\u5efa\u955c\u50cf\u65f6\u65b0\u5efa\u76ee\u5f55\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#docker_9","title":"docker \u5b9e\u6218","text":""},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#centos","title":"\u6848\u4f8b\u4e00\uff1a\u4f7f\u7528centos\u955c\u50cf","text":"<ol> <li>\u9996\u5148\u6211\u4eec\u60f3\u5728\u8fdc\u7a0b\u4ed3\u5e93\uff08Docker Hub\uff09\u4e2d\u641c\u7d22centos\u955c\u50cf\u662f\u5426\u5b58\u5728\uff0c\u9700\u8981\u8f93\u5165<code>docker search centos</code>\uff0c\u4e4b\u540e\u7cfb\u7edf\u4f1a\u8fd4\u56de\u5f88\u591a\u76f8\u5173\u955c\u50cf\u3002\u53ef\u4ee5\u770b\u5230\u5217\u8868\u4e2d\u6709NAME\u4e3acentos\u7684\u955c\u50cf\u3002</li> <li>\u4e0b\u8f7d\uff08\u62c9\u53d6\uff09Centos\u955c\u50cf\uff1a<code>docker pull centos:7</code>\uff0c\u6307\u5b9a\u7248\u672c\u53f7\u4e3a7\u3002</li> <li>\u8fd0\u884c\u8fd9\u955c\u50cf\uff0c\u8f93\u5165<code>docker run -it --name myos centos:7 /bin/bash</code>\u3002\u6b64\u65f6\u6210\u529f\u8fd0\u884c\u5bb9\u5668\u5e76\u8fdb\u5165\u5bb9\u5668\u3002<code>-i</code> \u8868\u793a\u7528\u6237\u8981\u548c\u5bb9\u5668\u6301\u4e45\u6027\u7684interactive\uff0c<code>-t</code>\u8868\u793a\u8ba9\u5bb9\u5668\u521b\u5efa\u4e00\u4e2a\u7ec8\u7aef\uff0c<code>/bin/bash</code> \u8868\u793a\u521b\u5efa\u5bb9\u5668\u540e\u7acb\u523b\u8fd0\u884c /bin/bash \u6587\u4ef6\u3002\uff08\u4e00\u822c\u6765\u8bf4\uff0c\u7528\u5230-it\uff0c\u5c31\u4f1a\u7528\u5230/bin/bash\uff09\u3002<code>--name server</code>\u8868\u793a\u8fd9\u4e2a\u5bb9\u5668\u7684\u540d\u79f0\u4e3amyos\u3002</li> <li>\u5f53\u6211\u4eec\u60f3\u8981\u9000\u51fa\u5bb9\u5668\u65f6\uff0c\u6309\u4e0b<code>ctrl + p + q</code>\u6216<code>ctrl + d</code>\u5373\u53ef\u3002\uff08\u5efa\u8bae\u7b2c\u4e00\u6b21\u6309<code>ctrl + p + q</code>\uff0c\u4e4b\u540e\u6309<code>ctrl + d</code>\uff09</li> <li>\u5f53\u6211\u4eec\u60f3\u8981\u518d\u6b21\u8fdb\u5165\u8be5\u5bb9\u5668\u65f6\uff0c\u5148\u786e\u4fdd\u5b83\u5904\u4e8e\u8fd0\u884c\u72b6\u6001\uff0c\u7136\u540e\u8f93\u5165<code>docker exec -it myos /bin/bash</code>\uff08myos\u662f\u8be5\u5bb9\u5668\u7684\u540d\u79f0\uff09\u3002</li> </ol> <p>\u5907\u6ce8\uff1a\u4e0d\u5efa\u8bae\u4f7f\u7528<code>docker attach</code>\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#tomcat","title":"\u6848\u4f8b\u4e8c\uff1a\u4f7f\u7528Tomcat\u955c\u50cf","text":"<ol> <li> <p>\u9996\u5148\u6211\u4eec\u60f3\u5728\u8fdc\u7a0b\u4ed3\u5e93\uff08Docker Hub\uff09\u4e2d\u641c\u7d22Tomcat\u955c\u50cf\u662f\u5426\u5b58\u5728\uff0c\u9700\u8981\u8f93\u5165<code>docker search tomcat</code>\uff0c\u4e4b\u540e\u7cfb\u7edf\u4f1a\u8fd4\u56de\u5f88\u591a\u76f8\u5173\u955c\u50cf\u3002\u53ef\u4ee5\u770b\u5230\u5217\u8868\u4e2d\u6709NAME\u4e3atomcat\u7684\u955c\u50cf\u3002</p> </li> <li> <p>\u4e0b\u8f7d\uff08\u62c9\u53d6\uff09Tomcat\u955c\u50cf\uff1a<code>docker pull tomcat</code>\uff0c\u8fd9\u79cd\u65b9\u5f0f\u901a\u5e38\u62c9\u53d6\u7684\u662f\u6700\u65b0\u7248\u955c\u50cf\uff0c\u76f8\u5f53\u4e8e<code>docker pull tomcat:latest</code>\u3002</p> </li> <li>\u8fd0\u884c\u8fd9\u4e2a\u955c\u50cf\uff0c\u7531\u4e8e\u9700\u8981\u7ed9\u8be5\u5bb9\u5668\u5f00\u653e\u7f51\u7edc\u7aef\u53e3\uff0c\u56e0\u6b64\u8fd8\u9700\u8981\u5efa\u7acb\u7aef\u53e3\u6620\u5c04\uff0c\u8f93\u5165<code>docker run -d -p 50001:8080 --name server tomcat:latest</code>\uff0c\u6ce8\u610f\u8fd9\u91cc\u6ca1\u6709<code>/bin/bash</code>\u3002\u6b64\u65f6\u6210\u529f\u8fd0\u884c\u5bb9\u5668\u5e76\u83b7\u5f97\u5bb9\u5668ID\u3002<code>-d</code> \u8868\u793a\u540e\u53f0\u8fd0\u884c\u8fd9\u4e2a\u7a0b\u5e8f\uff08\u4e0d\u7528\u592a\u7ea0\u7ed3\uff0c\u4e00\u822c\u6765\u8bf4\u6ca1\u6709\u4f7f\u7528-it\uff0c\u5c31\u8981\u4f7f\u7528-d\uff09\uff0c<code>-p 50001:8080</code>\u8868\u793a\u5c06\u5bbf\u4e3b\u673a\u768450001\u7aef\u53e3\u6620\u5c04\u5230\u5bb9\u5668\u76848080\u7aef\u53e3\uff0c<code>--name server</code>\u8868\u793a\u8fd9\u4e2a\u5bb9\u5668\u7684\u540d\u79f0\u4e3aserver\u3002 </li> <li>\u6ce8\u610f\u5f00\u653e\u670d\u52a1\u5668\u7684\u7aef\u53e3\uff0c\u8bbf\u95eeweb\u670d\u52a1\u5373\u53ef\u3002</li> <li>\u6210\u529f\u521b\u5efa\u597dweb\u670d\u52a1\u4ee5\u540e\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u8981\u8fdb\u5165\u8fd9\u4e2a\u5bb9\u5668\uff0c\u4fee\u6539webapps\u76ee\u5f55\u4e2d\u7684\u5185\u5bb9\uff0c\u5e94\u8be5\u4f7f\u7528<code>docker exec -it server /bin/bash</code>\u6307\u4ee4\uff08server\u5bf9\u5e94\u5bb9\u5668\u540d\uff09\u3002</li> <li>\u4fee\u6539\u5b8c\u6bd5\u540e\uff0c\u6211\u4eec\u4f7f\u7528<code>ctrl + d</code>\u9000\u51fa\u5bb9\u5668\uff08\u63a8\u8350\u65b9\u6cd5\uff09\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528<code>ctrl + p + q</code>\u9000\u51fa\u5bb9\u5668\u3002</li> </ol>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#_1","title":"\u6848\u4f8b\u4e09\uff1a\u5bb9\u5668\u5bfc\u51fa\u4e3a\u955c\u50cf","text":"<ol> <li>\u5f53\u6211\u4eec\u5728centos\u5bb9\u5668\u4e2d\u5b89\u88c5\u4e86vim\u7b49\u5de5\u5177\u4ee5\u540e\uff0c\u6211\u4eec\u60f3\u5c06\u8be5\u5bb9\u5668\u5bfc\u51fa\u4e3a\u4e00\u4e2a\u955c\u50cf\uff0c\u65b9\u4fbf\u4ee5\u540e\u4f7f\u7528\u3002\u6211\u4eec\u9700\u8981\u8f93\u5165<code>docker commit myos mycentos:1.0</code>\uff0cmyos\u662f\u955c\u50cf\u540d\uff0cmycentos\u662f\u4ed3\u5e93\u540d\uff0c1.0\u662f\u7248\u672c\u53f7\u3002</li> <li>\u8f93\u5165<code>docker images</code>\u5373\u53ef\u67e5\u770b\u955c\u50cfmycentos\u3002</li> </ol>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#_2","title":"\u6848\u4f8b\u56db\uff1a\u8ba9\u5bb9\u5668\u4e00\u76f4\u8fd0\u884c","text":"<ol> <li>\u5f53\u91cd\u542fdocker\u540e\uff0c\u5bb9\u5668\u9ed8\u8ba4\u4e0d\u4f1a\u81ea\u52a8\u8fd0\u884c\uff0c\u6211\u4eec\u9700\u8981\u8f93\u5165<code>docker start CONTAINER</code>\u624d\u80fd\u542f\u52a8\u5bb9\u5668\u3002</li> <li>\u5982\u679c\u6211\u4eec\u60f3\u8ba9\u8be5\u5bb9\u5668\u5728docker\u91cd\u542f\u540e\u81ea\u52a8\u8fd0\u884c\uff0c\u90a3\u4e48\u4f7f\u7528<code>docker run</code>\u521b\u5efa\u5bb9\u5668\u65f6\u9700\u8981\u6dfb\u52a0<code>--restart always</code>\u3002</li> </ol>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#tar","title":"\u6848\u4f8b\u4e94\uff1a\u5c06\u5bb9\u5668\u5bfc\u51fa\u4e3atar\u5305","text":"<ol> <li>\u5f53\u6211\u4eec\u5728\u5bb9\u5668\u4e2d\u914d\u7f6e\u597d\u73af\u5883\u4ee5\u540e\uff0c\u60f3\u5c06\u5176\u5bfc\u51fa\u4e3atar\u5305\u5e76\u5206\u4eab\u7ed9\u4ed6\u4eba\uff0c\u6211\u4eec\u9700\u8981\u8f93\u5165<code>docker export -o file.tar server</code>\uff0c\u6b64\u65f6\u5bb9\u5668\u88ab\u5bfc\u51fa\u4e3afile.tar\u5e76\u5b58\u653e\u5728\u5f53\u524d\u76ee\u5f55\u4e0b\uff0c<code>server</code>\u662f\u6b63\u5728\u8fd0\u884c\u7684\u5bb9\u5668\u540d\u3002</li> <li>\u522b\u4eba\u62ff\u5230tar\u5305\u4ee5\u540e\uff0c\u60f3\u8981\u52a0\u8f7dtar\u5305\u4e3a\u955c\u50cf\uff0c\u4ec5\u8f93\u5165<code>docker import file.tar myserver:1.0</code>\u5373\u53ef\u3002\u5176\u4e2dmyserver\u662f\u955c\u50cf\u540d\uff0c1.0\u662f\u7248\u672c\u53f7\uff0c\u8fd9\u4e24\u4e2a\u53ef\u4ee5\u968f\u610f\u6307\u5b9a\u3002</li> </ol>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#_3","title":"\u6848\u4f8b\u516d\uff1a\u5c06\u5bb9\u5668\u5bfc\u4e3a\u955c\u50cf","text":"<ol> <li>\u5f53\u6211\u4eec\u5728\u5bb9\u5668\u4e2d\u914d\u7f6e\u597d\u73af\u5883\u540e\uff0c\u60f3\u5c06\u5176\u4e0a\u4f20\u5230docker hub\uff0c\u9700\u8981\u9996\u5148\u5236\u4f5c\u6210\u955c\u50cf\u3002\u6b64\u65f6\u9700\u8981\u8f93\u5165<code>docker commit -m=\"\u6dfb\u52a0\u4e86vim\u5de5\u5177\" -a=\"longcoding\" CONTAINER xlongcoding/myos:1.0</code>\u3002CONTAINER\u4ee3\u6307\u5bb9\u5668\u540d\uff0c<code>xlongcoding/myos</code>\u53eb\u505a\u4ed3\u5e93\u540d\uff08\u6211\u4e60\u60ef\u5c06\u5176\u8bbe\u7f6e\u4e3a\u3010\u4f5c\u8005/\u8f6f\u4ef6\u540d\u3011\uff09\uff0c<code>1.0</code>\u662f\u7248\u672c\u53f7\u3002</li> </ol>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#dockerhub","title":"\u6848\u4f8b\u4e03\uff1a\u5c06\u955c\u50cf\u4e0a\u4f20\u5230dockerhub\uff0c\u5e76\u4e0b\u8f7d","text":"<ol> <li>\u6211\u4eec\u9700\u8981\u53bbdocker hub\u5b98\u7f51\u7684\u4e0a\u6ce8\u518c\u8d26\u53f7\uff0c\u5e76\u4f7f\u7528<code>docker login</code>\u767b\u5f55\u3002</li> <li>\u6211\u4eec\u9700\u8981\u5728docker hub\u7684repositories\u4e2d\u521b\u5efa\u4e00\u4e2a\u4ed3\u5e93\u3002\u3010\u4ed3\u5e93\u540d\u3011\u5efa\u8bae\u547d\u540d\u4e3a\u3010\u4eba\u540d/\u8f6f\u4ef6\u540d\u3011</li> <li>\u6211\u4eec\u9700\u8981\u5c06\u672c\u5730\u7684\u955c\u50cf\u6253\u4e00\u4e2a\u6807\u7b7e\uff0c\u5e76\u4e14\u6807\u7b7e\u540d\u548c\u8fdc\u7a0b\u3010\u4ed3\u5e93\u540d\u3011\u9700\u8981\u4e00\u6837\u3002 \u4f7f\u7528<code>docker push \u4ed3\u5e93\u540d:\u7248\u672c\u53f7</code>\u4e0a\u4f20\u672c\u5730\u955c\u50cf\u3002\u7248\u672c\u53f7\u968f\u610f\u6307\u5b9a\u3002</li> </ol>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#redis","title":"\u6848\u4f8b\u4e5d\uff1a\u90e8\u7f72Redis\u5e94\u7528","text":"<p>\u53c2\u8003\u6587\u6863</p> <ol> <li> <p>\u641c\u7d22\u8fdc\u7a0b\u4ed3\u5e93\u4e2d\u5173\u4e8eRedis\u7684\u955c\u50cf\uff1a<code>docker search redis</code>\uff0c\u5e76\u62c9\u53d6Redis\u955c\u50cf\uff1a<code>docker pull redis:latest</code>\u3002</p> </li> <li> <p>\u8fd0\u884c\u5bb9\u5668\uff1a</p> </li> </ol> <p><code>shell    docker run -id --name my_redis -p 26379:6379 redis --requirepass \"\u4f60\u7684\u5bc6\u7801\"</code></p> <p>\u6ce8\u610f\u5bc6\u7801\u9700\u8981\u7528\u53cc\u5f15\u53f7\u62ec\u8d77\u6765\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#ssh","title":"\u6848\u4f8b\u5341\uff1a\u5b89\u88c5ssh","text":"<p>\u80cc\u666f\uff1a\u57fa\u4e8ecentos7\u7cfb\u7edf\uff0cdocker\u7684centos7\u955c\u50cf\u914d\u7f6essh\u5de5\u5177\u3002</p> <p>\u6b65\u9aa4\uff1a</p> <ol> <li>\u521b\u5efa\u5e76\u8fd0\u884c\u5bb9\u5668\uff1a<code>docker run -itd --name worker2 --hostname worker2 -p 40001:22 --privileged centos:7 /usr/sbin/init</code>\u3002</li> </ol> <p>\u6ce8\u610f\uff1a\u8fd9\u91cc\u5fc5\u987b\u8981\u4f7f\u7528<code>/usr/sbin/init</code>\u3002</p> <ol> <li> <p>\u8fdb\u5165\u5bb9\u5668\uff1a<code>docker exec -it worker2 /bin/bash</code></p> </li> <li> <p>\u5b89\u88c5\u4f9d\u8d56\uff1a<code>yum install passwd openssl openssh-server openssh-clients -y</code></p> </li> <li> <p>\u4fee\u6539\u5bc6\u7801\uff1a<code>passwd</code></p> </li> <li> <p>\u4fee\u6539\u914d\u7f6e\uff1a</p> </li> </ol> <p><code>vi /etc/ssh/sshd_config    PubkeyAuthentication yes #\u542f\u7528\u516c\u94a5\u79c1\u94a5\u914d\u5bf9\u8ba4\u8bc1\u65b9\u5f0f    AuthorizedKeysFile .ssh/authorized_keys #\u516c\u94a5\u6587\u4ef6\u8def\u5f84    PermitRootLogin yes #root\u80fd\u4f7f\u7528ssh\u767b\u5f55</code></p> <ol> <li>\u91cd\u542fssh\u670d\u52a1\uff0c\u5e76\u8bbe\u7f6e\u5f00\u673a\u542f\u52a8\uff1a</li> </ol> <p><code>systemctl restart sshd    systemctl enable sshd.service</code></p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#docker-compose","title":"docker compose \u5bb9\u5668\u7f16\u6392","text":"<p>Compose\u662fdocker\u516c\u53f8\u63a8\u51fa\u7684\u4e00\u6b3e\u8f6f\u4ef6\uff0c\u53ef\u4ee5\u7ba1\u7406\u4e00\u4e2a\u5e94\u7528\u7684\u591a\u4e2adocker\u5bb9\u5668\u3002\u6211\u4eec\u9700\u8981\u5b9a\u4e49\u4e00\u4e2aYAML\u683c\u5f0f\u7684\u914d\u7f6e\u6587\u4ef6<code>docker-compose.yml</code>\uff0c\u5199\u51fa\u591a\u4e2a\u5bb9\u5668\u4e4b\u95f4\u7684\u8c03\u7528\u5173\u7cfb\u3002\u7136\u540e\uff0c\u53ea\u9700\u8981\u4e00\u4e2a\u547d\u4ee4\uff0c\u5c31\u53ef\u4ee5\u5173\u95ed/\u542f\u52a8\u8fd9\u4e2a\u5e94\u7528\u4e0b\u7684\u591a\u4e2a\u5bb9\u5668\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#_4","title":"\u5982\u4f55\u5b89\u88c5","text":"<p>\u6309\u7167\u5b98\u65b9\u6587\u6863\u7684\u6b65\u9aa4\u5373\u53ef\u3002\u7531\u4e8egithub\u8bbf\u95ee\u8f83\u6162\uff0c\u53ef\u4ee5\u627e\u4e00\u4e2a\u56fd\u5185\u955c\u50cf\u6e90</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#_5","title":"\u5982\u4f55\u5378\u8f7d","text":"<p>\u5fc5\u987b\u4f7f\u7528\u4e0a\u8ff0\u5b89\u88c5\u65b9\u5f0f\uff0c\u5378\u8f7d\u65f6\u8f93\u5165<code>sudo rm /usr/local/bin/docker-compose</code>\u5373\u53ef\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#_6","title":"\u6838\u5fc3\u6982\u5ff5","text":"<p>\u4e00\u4e2a\u6587\u4ef6\uff1adocker-compose.yml</p> <p>\u6587\u4ef6\u4e2d\u5b9a\u4e49\u4e00\u4e2a\u5de5\u7a0b\u3002</p> <p>\u4e24\u4e2a\u8981\u7d20\uff1a\u670d\u52a1\u548c\u5de5\u7a0b</p> <p>\u670d\u52a1\uff1a\u4e00\u4e2a\u4e2a\u5e94\u7528\u5bb9\u5668\u5b9e\u4f8b\uff0c\u4f8b\u5982MySQL\u5bb9\u5668\uff0c\u8ba2\u5355\u5fae\u670d\u52a1......</p> <p>\u5de5\u7a0b\uff1a\u4e00\u7ec4\u5173\u8054\u7684\u5e94\u7528\u5bb9\u5668\u7ec4\u6210\u4e00\u4e2a\u5b8c\u6574\u4e1a\u52a1\u5355\u5143\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E5%AE%9E%E6%88%98%E6%95%99%E7%A8%8B/#_7","title":"\u5176\u4ed6","text":"<pre><code>docker load -i docker\u7684tar\u5305\n\ndocker run -p 20000:22 -p 8000:8000 --name django_server -itd django_lesson:1.0\n\nssh-keygen\uff1agit\u57fa\u4e8essh\n</code></pre> <pre><code>docker load -i docker\u7684tar\u5305\ndocker run -itd -p 80:9999 -p 3306:3306 --name csp_server \u955c\u50cf\u540d:\u7248\u672c\n\n\nphp start.php start -d\nphp start.php stop\n</code></pre> <p>docker load -i docker\u7684tar\u5305 docker run -itd -p 80:9999 -p 3306:3306 --name csp_server \u955c\u50cf\u540d:\u7248\u672c</p> <p>php start.php start -d\u00b7</p> <p>\u542f\u52a8Nginx\uff1adocker run -d -p 50001:80 --name n-server nginx:latest</p> <p>\u4e0b\u8f7d\u8f6f\u4ef6\uff1a</p> <p>docker pull xlongcoding/csp_system:1.0</p> <p>\u8fd0\u884c\u8f6f\u4ef6\uff08\u6ce8\u610f\u9700\u8981\u8bbe\u5b9a\u7aef\u53e3\u53f7\uff09\uff1a</p> <p>docker run -it -p \u81ea\u5b9a\u4e49web\u670d\u52a1\u7aef\u53e3:9999 -p \u81ea\u5b9a\u4e49\u6570\u636e\u5e93\u7aef\u53e3:3306 --name server xlongcoding/csp_system:1.0 /bin/bash</p> <p>cd /www/wwwroot/cspsystem/</p> <p>php start.php start -d</p> <p>/etc/init.d/mysqld start</p> <p>redis-server /etc/redis.conf</p> <p>\u6570\u636e\u5e93\u540d\uff1acspsystem </p> <p>\u6570\u636e\u5e93\u5bc6\u7801\uff1apbKRXJHGAiX7sr6b</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E9%83%A8%E7%BD%B2MySQL/","title":"docker\u90e8\u7f72MySQL","text":"<p>[toc]</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E9%83%A8%E7%BD%B2MySQL/#mysql","title":"\u90e8\u7f72MySQL\u5355\u4f53\u5e94\u7528","text":"<ol> <li> <p>\u641c\u7d22\u8fdc\u7a0b\u4ed3\u5e93\u4e2d\u5173\u4e8eMySQL\u7684\u955c\u50cf\uff1a<code>docker search mysql</code>\uff0c\u5e76\u62c9\u53d6\u955c\u50cf<code>docker pull mysql:latest</code>\u3002</p> </li> <li> <p>\u8fd0\u884cdocker\u5173\u4e8eMySQL\u7684\u5bb9\u5668\uff0c\u5e76\u5c06\u914d\u7f6e\u6587\u4ef6\u3002\u901a\u5e38\u8981\u5c06\u5bb9\u5668\u4e2d\u7684<code>\u914d\u7f6e\u6587\u4ef6</code>\u3001<code>\u65e5\u5fd7\u6587\u4ef6</code>\u548c<code>\u6570\u636e</code>\u6302\u8f7d\u5230\u672c\u673a\uff0c\u5e76\u4e14\u5c06MySQL\u7684\u5bc6\u7801\u8bbe\u7f6e\u5230\u73af\u5883\u53d8\u91cf\u4e2d\u3002</p> </li> </ol> <pre><code>docker run -id \\\n-p 3307:3306 \\\n--name mydb \\\n-v /mnt/docker/mysql/conf:/erc/mysql/conf.d \\\n-v /mnt/docker/mysql/logs:/logs \\\n-v /mnt/docker/mysql/data:/var/lib/mysql \\\n-e MYSQL_ROOT_PASSWORD=\u81ea\u5b9a\u4e49MySQL\u5bc6\u7801 \\\nmysql:latest\n\n\n</code></pre> <ol> <li>\u8fdb\u5165MySQL\u6570\u636e\u5e93\uff1a<code>docker exec -it \u5bb9\u5668\u540d mysql -u root -p</code>\uff0c\u7136\u540e\u8f93\u5165\u5bc6\u7801\u5373\u53ef\u3002\u4e4b\u540e\u5c31\u80fd\u8fdb\u5165MySQL\u7684\u547d\u4ee4\u884c\u4e2d\u3002</li> <li>\u8f93\u5165exit\u5c31\u80fd\u9000\u51faMySQL\u547d\u4ee4\u884c\u548cMySQL\u5bb9\u5668\u3002</li> <li>\u8be5MySQL\u5bb9\u5668\u4f1a\u5728\u540e\u53f0\u4e00\u76f4\u8fd0\u884c\uff0c\u9664\u975e<code>docker stop</code>\u6216\u8005\u5378\u8f7ddocker\u624d\u4f1a\u6d88\u5931\u3002</li> </ol> <p>\u3010\u6ce8\u3011\u5982\u679c\u5728\u865a\u62df\u673a\u4e2d\u4f7f\u7528docker\u5b89\u88c5MySQL\uff0c\u90a3\u4e48\u5728\u672c\u673a\u7684Navicat\u4e2d\u4e0d\u80fd\u4f7f\u7528<code>localhost</code>\u8bbf\u95eeMySQL\u670d\u52a1\uff0c\u800c\u662f\u8981\u901a\u8fc7\u865a\u62df\u673a\u7684ip\uff08\u6bd4\u5982<code>192.168.1.301</code>\uff09\u52a0\u4e0a\u7aef\u53e3\u53f7\u8bbf\u95eeMySQL\u670d\u52a1\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E9%83%A8%E7%BD%B2MySQL/#mysql_1","title":"\u90e8\u7f72MySQL\u96c6\u7fa4","text":"<p>\u672c\u6848\u4f8b\u90e8\u7f72\u4e09\u4e2aMySQL\uff0c\u5b9e\u73b0\u8bfb\u5199\u5206\u79bb\u3002</p> <ol> <li>\u51c6\u5907\u4e3b\u670d\u52a1\u5668\uff1a</li> </ol> <p><code>docker run -id \\    -p 3308:3306 \\    --name \u5bb9\u5668\u540d \\    -v /mnt/docker/mysql/master/conf:/erc/mysql/conf.d \\    -v /mnt/docker/mysql/master/logs:/logs \\    -v /mnt/docker/mysql/master/data:/var/lib/mysql \\    -e MYSQL_ROOT_PASSWORD=\u81ea\u5b9a\u4e49MySQL\u5bc6\u7801 \\    mysql:latest</code></p> <ol> <li>\u914d\u7f6e\u4e3b\u670d\u52a1\u5668\u7684\u5185\u5bb9\uff1a</li> </ol> <p>\u7f16\u8f91<code>/mnt/docker/mysql/master/conf/my.cnf</code>\u3002</p> <p><code>[mysqld]    # \u670d\u52a1\u5668\u552f\u4e00id\uff0c\u9ed8\u8ba4\u503c1    server-id=1    # \u8bbe\u7f6e\u65e5\u5fd7\u683c\u5f0f\uff0c\u9ed8\u8ba4\u503cROW    binlog_format=STATEMENT    # \u4e8c\u8fdb\u5236\u65e5\u5fd7\u540d\uff0c\u9ed8\u8ba4binlog    # log-bin-binlog    # \u8bbe\u7f6e\u9700\u8981\u590d\u5236\u7684\u6570\u636e\u5e93\uff0c\u9ed8\u8ba4\u590d\u5236\u5168\u90e8\u6570\u636e\u5e93    # binlog-do-db=mytestdb    # \u8bbe\u7f6e\u4e0d\u9700\u8981\u590d\u5236\u7684\u6570\u636e\u5e93    # binlog-ignore-db=mysql    # binlog-ignore-db=infomation-schema</code></p> <ol> <li> <p>\u91cd\u542fdocker\u5bb9\u5668\uff1a<code>docker restart \u5bb9\u5668\u540d</code>\u3002</p> </li> <li> <p>\u8fdb\u5165MySQL\u670d\u52a1\u5668\uff1a<code>docker exec -it \u5bb9\u5668\u540d mysql -u root -p</code>\uff0c\u5e76\u8f93\u5165\u5bc6\u7801\u3002</p> </li> <li> <p><code>grant replication slave on *.* to 'mysql-slave'@'%';</code></p> </li> </ol>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E9%83%A8%E7%BD%B2rabbitmq/","title":"docker\u90e8\u7f72rabbitmq","text":"<p>[toc]</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E9%85%8D%E7%BD%AE%E9%95%9C%E5%83%8F%E6%BA%90/","title":"docker\u914d\u7f6e\u955c\u50cf\u6e90","text":"<p>[toc]</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E9%85%8D%E7%BD%AE%E9%95%9C%E5%83%8F%E6%BA%90/#docker_1","title":"\u5b89\u88c5docker\u8f6f\u4ef6\u65f6\u914d\u7f6e\u955c\u50cf\u6e90","text":"<p>\u5b89\u88c5docker\u65f6\uff0c\u6309\u7167\u5b98\u65b9\u6587\u6863\u7684\u6b65\u9aa4\u5373\u53ef\u3002\u7531\u4e8edocker\u7684\u5b89\u88c5\u8d44\u6e90\u6587\u4ef6\u5728\u56fd\u5916\uff0c\u4e0b\u8f7d\u901f\u5ea6\u8f83\u6162\uff0c\u53ef\u4ee5\u627e\u4e00\u4e2a\u56fd\u5185\u955c\u50cf\u6e90\u3002\u4e0d\u8fc7\u6839\u636e\u4e2a\u4eba\u7ecf\u9a8c\uff0c\u6ca1\u6709\u592a\u5927\u5fc5\u8981\u4f7f\u7528\u56fd\u5185\u955c\u50cf\u6e90\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E9%85%8D%E7%BD%AE%E9%95%9C%E5%83%8F%E6%BA%90/#docker_2","title":"\u4f7f\u7528\u955c\u50cf\u6e90\u5b89\u88c5docker","text":"<ol> <li> <p>\u53c2\u8003\u6587\u6863\u3002\u5982\u679c\u4f7f\u7528\u56fd\u5185\u955c\u50cf\u6e90\uff0c\u4f1a\u8f93\u5165\u8fd9\u6837\u7684\u6307\u4ee4\uff1a<code>curl -sSL https://get.daocloud.io/docker | sh</code>\u3002\u5927\u81f4\u610f\u601d\u662f\u4ece DaoCloud \u670d\u52a1\u5668\u4e0a\u4e0b\u8f7d Docker \u5b89\u88c5\u811a\u672c\uff0c\u7136\u540e\u4f7f\u7528 sh \u547d\u4ee4\u89e3\u91ca\u5668\u8fd0\u884c\u8be5\u811a\u672c\uff0c\u4ee5\u5b8c\u6210 Docker \u7684\u5b89\u88c5\u3002</p> </li> <li> <p>\u8fd0\u884cdocker\uff1a<code>systemctl start docker</code>\u3002</p> </li> </ol>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Docker/docker%E9%85%8D%E7%BD%AE%E9%95%9C%E5%83%8F%E6%BA%90/#docker-hubpull","title":"\u4ecedocker hub\u4e0apull\u8f6f\u4ef6\u65f6\u914d\u7f6e\u955c\u50cf\u6e90","text":"<p>\u7531\u4e8edocker hub\u5728\u56fd\u5916\uff0c\u4e0b\u8f7d\u901f\u5ea6\u5f88\u6162\uff0c\u6240\u4ee5\u5f3a\u70c8\u5efa\u8bae\u914d\u7f6e\u955c\u50cf\u6e90\u3002\u5177\u4f53\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ol> <li>\u7f16\u8f91 <code>/etc/docker/daemon.json</code> \u914d\u7f6e\u6587\u4ef6\uff1a\uff08\u5173\u4e8edocker hub\u955c\u50cf\u6e90\u5730\u5740\uff0c\u53ef\u4ee5\u5728\u7f51\u4e0a\u641c\uff09</li> </ol> <p><code>{      \"registry-mirrors\": [        \"https://ustc-edu-cn.mirror.aliyuncs.com\",        \"https://hub-mirror.c.163.com\",        \"https://mirror.baidubce.com\"      ]    }</code></p> <ol> <li> <p>\u91cd\u65b0\u52a0\u8f7d\u5b88\u62a4\u7a0b\u5e8f\u7684\u914d\u7f6e\u6587\u4ef6\uff1a<code>systemctl daemon-reload</code>\u3002</p> </li> <li> <p>\u91cd\u542fdocker\uff1a<code>systemctl restart docker</code>\u3002</p> </li> <li> <p>\u68c0\u67e5\u914d\u7f6e\u662f\u5426\u751f\u6548\uff1a<code>sudo docker info</code>\u3002\u5982\u679c\u770b\u5230\u7c7b\u4f3c\u4e0b\u9762\u7684\u5185\u5bb9\uff0c\u5219\u914d\u7f6e\u6210\u529f\uff1a</p> </li> </ol> <p><code>Registry Mirrors:      https://ustc-edu-cn.mirror.aliyuncs.com/      https://hub-mirror.c.163.com/      https://mirror.baidubce.com/</code></p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Linux%E8%BF%90%E8%A1%8Credis/","title":"Linux \u8fd0\u884c Redis","text":"<p>[toc]</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Linux%E8%BF%90%E8%A1%8Credis/#linuxredis","title":"Linux\u4e2d\u5b89\u88c5Redis","text":"<p>\u65b9\u6cd5\u4e00\uff1a\u4e0b\u8f7d\u6e90\u7801\u5e76\u7f16\u8bd1\u3002</p> <ol> <li> <p>\u5728Linux\u4e2d\u4f7f\u7528<code>wget</code>\u7b49\u5de5\u5177\u53bb\u5b98\u7f51\u4e0b\u8f7dRedis\u7684Linux\u7248\u672c\u3002</p> </li> <li> <p>\u4e0b\u8f7d\u6210\u529f\u540e\uff0c\u5c06\u89e3\u538b\u5305\u653e\u5230<code>/opt</code>\u76ee\u5f55\u3002</p> </li> <li> <p>\u5b89\u88c5<code>gcc</code>\uff08\u767e\u5ea6\u641c\u7d22\u6307\u4ee4\uff09\uff0c\u5b89\u88c5\u6210\u529f\u540e\u67e5\u770b\u7248\u672c\u3002</p> </li> <li> <p>\u89e3\u538bRedis</p> </li> </ol> <p><code>tar -zxvf redis-7.0.4.tar.gz</code></p> <ol> <li>\u8fdb\u5165\u89e3\u538b\u597d\u7684redis\u6587\u4ef6\uff0c\u6267\u884cmake\u547d\u4ee4\u8fdb\u884c\u7f16\u8bd1\u3002</li> </ol> <p><code>cd redis-7.0.4    make</code></p> <p>\u5982\u679c\u51fa\u73b0\u9519\u8bef\uff0c\u6e05\u7a7a\u5e76\u91cd\u88c5redis\u3002</p> <p><code>make disclean</code></p> <ol> <li>\u5b89\u88c5\u3002</li> </ol> <p><code>make insall</code></p> <p>\u65b9\u6cd5\u4e8c\uff1aCentOS 7 \u4e2d\u5b89\u88c5Redis</p> <ol> <li><code>yum update</code>\u3002</li> <li><code>yum install redis</code>\u3002</li> <li>\u542f\u52a8Redis\u670d\u52a1\uff1a<code>systemctl start redis</code>\u3002</li> <li>\u68c0\u67e5Redis\u662f\u5426\u8fd0\u884c\uff1a<code>systemctl status redis</code>\u3002</li> <li>\u8f93\u5165\uff1a<code>redis-cli ping</code>\uff0c\u5982\u679c\u8fd4\u56de<code>PONG</code>\uff0c\u8bc1\u660eRedis\u6b63\u5e38\u5de5\u4f5c\u3002</li> </ol> <p>\u6b64\u65f6\u6211\u60f3\u8bbe\u7f6eRedis\u7684\u5bc6\u7801\uff0c\u5e94\u8be5\u8fd9\u6837\u505a\uff1a</p> <ol> <li> <p>\u6253\u5f00 Redis \u914d\u7f6e\u6587\u4ef6 <code>/etc/redis/redis.conf</code>\u3002</p> </li> <li> <p>\u67e5\u627e\u5e76\u53d6\u6d88\u6ce8\u91ca <code>requirepass</code> \u9009\u9879\uff0c\u5e76\u5c06\u5bc6\u7801\u8bbe\u7f6e\u4e3a<code>123456</code>\uff1a<code>requirepass 123456</code>\u3002</p> </li> <li> <p>\u91cd\u542f Redis \u670d\u52a1\uff1a<code>sudo systemctl restart redis</code>\u3002</p> </li> <li> <p>\u9a8c\u8bc1Redis\u670d\u52a1\u662f\u5426\u6b63\u5e38\u8fd0\u884c\uff1a\u4f7f\u7528<code>redis-cli</code>\u542f\u52a8Redis\u5ba2\u6237\u7aef\u7a0b\u5e8f\u5e76\u5c1d\u8bd5\u8fde\u63a5\u5230Redis\u670d\u52a1\u5668\uff0c\u5982\u679c\u8fde\u63a5\u6210\u529f\uff0c\u4f1a\u663e\u793a\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> </li> </ol> <p><code>bash    127.0.0.1:6379&gt;</code></p> <ol> <li> <p>\u867d\u7136\u6211\u4eec\u542f\u52a8Redis\u5ba2\u6237\u7aef\u5e76\u6210\u529f\u8fde\u63a5\u4e0aRedis\u670d\u52a1\u5668\uff0c\u4f46\u662f\u6211\u4eec\u8fd8\u6ca1\u6709\u9a8c\u8bc1\u8eab\u4efd\u3002\u8f93\u5165<code>ping</code>\uff0c\u53d1\u73b0\u5f53\u524d\u6ca1\u6709\u6743\u9650\u8bbf\u95ee\u3002</p> </li> <li> <p>Redis\u5ba2\u6237\u7aef\u547d\u4ee4\u884c\u4e2d\u8f93\u5165<code>AUTH 123456</code>\uff0c\u8fd4\u56de<code>OK</code>\uff0c\u6b64\u65f6\u83b7\u5f97\u6743\u9650\u3002\u518d\u8f93\u5165<code>ping</code>\uff0c\u5373\u53ef\u8fd4\u56de<code>PONG</code>\u3002</p> </li> </ol> <p>\u5230\u6b64\u4e3a\u6b62\uff0c\u53ef\u4ee5\u5728\u672c\u5730\u8bbf\u95eeRedis\u670d\u52a1\u3002\u7136\u800c\u5728\u5176\u4ed6\u4e3b\u673a\u4e0a\u8fd8\u662f\u4e0d\u80fd\u8bbf\u95eeRedis\u670d\u52a1\uff0c\u8fd9\u662f\u56e0\u4e3a Redis \u7684\u9ed8\u8ba4\u914d\u7f6e\u53ea\u5141\u8bb8\u672c\u5730\u8fde\u63a5\u3002\u8981\u5141\u8bb8\u5176\u4ed6\u4e3b\u673a\u8fde\u63a5 Redis\uff0c\u60a8\u9700\u8981\u66f4\u65b0 Redis \u7684\u914d\u7f6e\u6587\u4ef6\u3002</p> <ol> <li>\u6253\u5f00 Redis \u914d\u7f6e\u6587\u4ef6 <code>/etc/redis/redis.conf</code>\u3002</li> <li>\u5728\u6587\u4ef6\u4e2d\u67e5\u627e <code>bind 127.0.0.1</code>\uff0c\u5e76\u5c06\u5176\u6ce8\u91ca\u6389\u6216\u8005\u5c06\u5176\u6539\u4e3a <code>bind 0.0.0.0</code>\u3002\u8fd9\u5c06\u5141\u8bb8 Redis \u63a5\u53d7\u6765\u81ea\u4efb\u4f55 IP \u5730\u5740\u7684\u8fde\u63a5\u3002</li> <li>\u91cd\u542f Redis \u670d\u52a1\uff1a<code>systemctl restart redis</code>\u3002</li> <li>\u5728\u5176\u4ed6\u4e3b\u673a\u4e0a\u8f93\u5165\uff1a<code>redis-cli -h &lt;redis\u670d\u52a1\u5668\u7684ip\u5730\u5740&gt;</code> \u5373\u53ef\u8fdc\u7a0b\u8bbf\u95eeRedis\u670d\u52a1\u3002</li> <li>\u7ed3\u675fRedis\u670d\u52a1\u7aef\uff1a<code>systemctl stop redis</code>\u3002</li> </ol> <p>\u65b9\u6cd5\u4e09\uff1aUbuntu 22.04 \u4e2d\u5b89\u88c5Redis</p> <ol> <li>\u66f4\u65b0 apt \u7d22\u5f15\uff1a<code>sudo apt update</code>\u3002</li> <li>\u5b89\u88c5Redis\uff1a<code>sudo apt install redis-server</code>\u3002</li> <li>\u4e4b\u540e\u7684\u6b65\u9aa4\u548c\u4e0a\u8ff0 CentOS 7 \u4e00\u81f4\u3002</li> </ol>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Linux%E8%BF%90%E8%A1%8Credis/#redis","title":"\u542f\u52a8redis","text":"<p>\u65b9\u6cd5\u4e00\uff1a\u524d\u53f0\u542f\u52a8\u3002\uff08\u4e0d\u63a8\u8350\uff09</p> <pre><code>redis-server\n</code></pre> <p>\u65b9\u6cd5\u4e8c\uff1a\u540e\u53f0\u542f\u52a8\uff1a</p> <ol> <li> <p>\u5c06<code>redis.conf</code>\u62f7\u8d1d\u5230<code>/etc/</code>\u4e0b\uff0c\u5c06<code>daemonize no</code>\u6539\u6210<code>daemonize yes</code></p> </li> <li> <p>\u542f\u52a8redis\uff0c<code>redis-server /etc/redis.conf</code></p> </li> <li> <p>\u7528\u5ba2\u6237\u7aef\u8bbf\u95ee\uff1a<code>redis-cli</code></p> </li> <li> <p>\u6d4b\u8bd5\u9a8c\u8bc1\uff1a <code>ping</code></p> </li> <li> <p>Redis\u5173\u95ed    \u5355\u5b9e\u4f8b\u5173\u95ed\uff1a<code>redis-cli shutdown</code>    \u4e5f\u53ef\u4ee5\u8fdb\u5165\u7ec8\u7aef\u540e\u518d\u5173\u95ed\uff1a<code>shutdown</code></p> </li> <li> <p>\u5efa\u8bae\u7ed9redis\u8bbe\u7f6e\u5bc6\u7801\uff1a</p> </li> <li> <p>\u8bbe\u7f6e\u5bc6\u7801</p> <p><code>config set requirepass 123456</code></p> </li> <li> <p>\u67e5\u8be2\u5bc6\u7801</p> <p><code>config get requirepass</code></p> </li> <li> <p>\u767b\u5f55\u65f6\u8f93\u5165\u5bc6\u7801</p> <p><code>auth 123456</code></p> </li> </ol>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%BD%9C%E4%B8%BA%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E7%9A%84%E6%80%9D%E8%80%83/","title":"Redis\u4f5c\u4e3a\u6d88\u606f\u961f\u5217\u7684\u601d\u8003","text":"<p>[toc]</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%BD%9C%E4%B8%BA%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E7%9A%84%E6%80%9D%E8%80%83/#_1","title":"\u9879\u76ee\u80cc\u666f","text":"<p>\u6211\u72ec\u7acb\u5f00\u53d1\u7684\u3010\u5c0f\u5357\u6821\u56ed\u3011\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4e2d\u6709\u4e00\u4e2a\u4e0b\u8f7d\u8bd5\u5377\u7684\u529f\u80fd\uff0c\u7528\u6237\u70b9\u51fb\u4e0b\u8f7d\u540e\uff0c\u53ea\u9700\u8981\u586b\u5199\u81ea\u5df1\u7684\u90ae\u7bb1\uff0c\u8fc7\u4e00\u6bb5\u65f6\u95f4\u5c31\u53ef\u4ee5\u5728\u90ae\u7bb1\u4e2d\u6536\u5230\u7535\u5b50\u7248\u8bd5\u5377\u3002\u5728\u70b9\u51fb\u4e0b\u8f7d\u5230\u63a5\u6536\u90ae\u4ef6\u7684\u8fd9\u6bb5\u8fc7\u7a0b\u4e2d\uff0c\u7528\u6237\u53ef\u4ee5\u505a\u5176\u4ed6\u4e8b\u60c5\u3002</p> <p>\u76ee\u524d\u5c0f\u7a0b\u5e8f\u7684\u7528\u6237\u6570\u91cf\u4e3a300+\uff0c\u4e0b\u8f7d\u8bf7\u6c42\u91cf\u4e0d\u5927\u3002</p> <p>\u76ee\u524d\u6574\u4e2a\u540e\u7aef\u670d\u52a1\u90e8\u7f72\u5728\u4e00\u53f02\u68384G\u7684\u670d\u52a1\u5668\u4e0a\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%BD%9C%E4%B8%BA%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E7%9A%84%E6%80%9D%E8%80%83/#_2","title":"\u6280\u672f\u7ec6\u8282","text":"<p>\u8fd9\u4e2a\u529f\u80fd\u53ef\u4ee5\u91c7\u7528\u4e00\u4e2a\u751f\u4ea7\u8005-\u6d88\u8d39\u8005\u6a21\u578b\u89e3\u51b3\u3002\u8fd9\u4e2a\u6a21\u578b\u4e2d\u603b\u5171\u67093\u7c7b\u89d2\u8272\uff1a\u751f\u4ea7\u8005\u3001\u6d88\u606f\u4e2d\u95f4\u4ef6\u3001\u6d88\u8d39\u8005\u3002\u751f\u4ea7\u8005\u5373\u4e3a\u53d1\u51fa\u4e0b\u8f7d\u8bf7\u6c42\u7684\u7528\u6237\uff0c\u6d88\u8d39\u8005\u5373\u4e3a\u5904\u7406\u5e76\u54cd\u5e94\u4e0b\u8f7d\u8bf7\u6c42\u7684\u670d\u52a1\u5668\u3002\u751f\u4ea7\u8005\u4ea7\u751f\u4e00\u4e2a\u4e0b\u8f7d\u8bf7\u6c42\u540e\uff0c\u53ea\u9700\u8981\u4e00\u4e2a\u6d88\u8d39\u8005\u5904\u7406\u8be5\u4e0b\u8f7d\u8bf7\u6c42\u5373\u53ef\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u6280\u672f\u96be\u70b9\u6709\uff1a</p> <ol> <li>\u5982\u4f55\u4fdd\u8bc1\u751f\u4ea7\u8005\u6210\u529f\u5c06\u6d88\u606f\u52a0\u5165\u5230\u6d88\u606f\u961f\u5217\u3002</li> <li>\u5982\u4f55\u4fdd\u8bc1\u6280\u672f\u5728\u670d\u52a1\u5b95\u673a\u7684\u60c5\u51b5\u4e0b\uff0c\u6d88\u606f\u961f\u5217\u4e2d\u7684\u8bf7\u6c42\u4e0d\u4f1a\u4e22\u5931\u3002</li> <li>\u5982\u679c\u6d88\u8d39\u8005\u53d6\u51fa\u6d88\u606f\u961f\u5217\u4e2d\u7684\u6d88\u606f\u540e\uff0c\u5982\u679c\u6ca1\u6709\u6210\u529f\u6d88\u8d39\u6d88\u606f\uff08\u4f8b\u5982\u90ae\u4ef6\u7cfb\u7edf\u6545\u969c\uff09\uff0c\u8be5\u5982\u4f55\u4fdd\u8bc1\u8fd9\u6761\u6d88\u606f\u4e4b\u540e\u8fd8\u80fd\u88ab\u6d88\u8d39\u3002</li> <li>\u5982\u679c\u5927\u91cf\u6d88\u606f\u5806\u6ee1\u4e86\u6d88\u606f\u961f\u5217\uff0c\u8be5\u600e\u4e48\u5904\u7406\uff1f\uff08\u57fa\u4e8e\u76ee\u524d\u7684\u7528\u6237\u91cf\uff0c\u5e94\u8be5\u4e0d\u4f1a\u51fa\u73b0\u8fd9\u79cd\u95ee\u9898\uff0c\u56e0\u6b64\u6682\u672a\u8003\u8651\u8fd9\u79cd\u95ee\u9898\uff09</li> <li>\u670d\u52a1\u51fa\u73b0\u6545\u969c\u540e\uff08\u6bd4\u5982\u751f\u4ea7\u8005\u4e00\u76f4\u65e0\u6cd5\u5c06\u6d88\u606f\u653e\u5165\u6d88\u606f\u961f\u5217\uff0c\u6216\u8005\u6d88\u8d39\u8005\u4e00\u76f4\u65e0\u6cd5\u6d88\u8d39\u6d88\u606f\u961f\u5217\u4e2d\u7684\u6d88\u606f\uff0c\u6216\u8005\u670d\u52a1\u7a81\u7136\u5b95\u673a\uff09\uff0c\u5efa\u7acb\u5408\u7406\u7684\u9884\u8b66\u63aa\u65bd\uff08\u6bd4\u5982\u8bb0\u5f55\u65e5\u5fd7\uff0c\u6216\u8005\u7acb\u5373\u901a\u77e5\u7ba1\u7406\u5458\uff09\u3002\u4f46\u662f\u5728\u8be5\u9879\u76ee\u4e2d\u6211\u6ca1\u6709\u8bbe\u5b9a\u8fd9\u4e9b\u63aa\u65bd\uff0c\u56e0\u4e3a\u5bf9\u4e8e\u4e2a\u4eba\u9879\u76ee\u6765\u8bf4\uff0c\u6211\u6ca1\u6709\u592a\u591a\u7cbe\u529b\u91c7\u7528\u8fd9\u4e9b\u7b56\u7565\u3002\u5982\u679c\u5c06\u6765\u6709\u53ef\u80fd\u7528\u5230\u8fd9\u4e9b\u9884\u8b66\u63aa\u65bd\uff0c\u6211\u4f1a\u653e\u5f03Redis\u5b9e\u73b0\u6d88\u606f\u961f\u5217\uff0c\u8f6c\u800c\u91c7\u7528\u4e3b\u6d41\u7684\u6d88\u606f\u961f\u5217\uff0c\u56e0\u4e3a\u4e3b\u6d41\u7684\u6d88\u606f\u961f\u5217\u5f80\u5f80\u81ea\u5e26\u8fd9\u4e9b\u529f\u80fd\u3002</li> </ol>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%BD%9C%E4%B8%BA%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E7%9A%84%E6%80%9D%E8%80%83/#_3","title":"\u6d88\u606f\u961f\u5217\u9009\u578b","text":"<p>\u76ee\u524d\u5e02\u9762\u4e0a\u4e3b\u6d41\u7684\u6d88\u606f\u961f\u5217\u6709RocketMQ\uff0cRabbitMQ......\u4e5f\u53ef\u4ee5\u91c7\u7528\u4e00\u4e9b\u4e2d\u95f4\u4ef6\uff08\u6bd4\u5982Redis\uff09\u6a21\u62df\u6d88\u606f\u961f\u5217\u3002\u751a\u81f3\u53ef\u4ee5\u76f4\u63a5\u5728Java\u7a0b\u5e8f\u4e2d\u5f00\u8f9f\u4e00\u4e2a\u5185\u5b58\u7a7a\u95f4\uff0c\u4f5c\u4e3a\u6d88\u606f\u961f\u5217\u3002</p> <p>\u5728\u8fd9\u4e2a\u9879\u76ee\u4e2d\uff0c\u6211\u91c7\u7528\u4e86Redis\u6a21\u62df\u6d88\u8d39\u961f\u5217\u3002\u7406\u7531\u5982\u4e0b\uff1a</p> <ol> <li>\u5f15\u5165RocketMQ\u7b49\u4e3b\u6d41\u6d88\u606f\u961f\u5217\u4f1a\u5360\u7528\u989d\u5916\u7684\u8d44\u6e90\uff0c\u800c\u6211\u7684\u670d\u52a1\u5668\u914d\u7f6e\u4f4e\uff0c\u8d44\u6e90\u6709\u9650\u3002</li> <li>\u5f15\u5165\u65b0\u7684\u4e2d\u95f4\u4ef6\u5c31\u8ba9\u9879\u76ee\u591a\u4e86\u4e00\u4e9b\u4e0d\u53ef\u63a7\u56e0\u7d20\uff0c\u5c24\u5176\u662f\u5bf9\u4e8e\u6211\u8fd9\u6837\u7684\u5c0f\u767d\u3002</li> <li>\u8be5\u9879\u76ee\u7684\u60c5\u666f\u975e\u5e38\u7b80\u5355\uff0c\u4e5f\u5373\u591a\u4e2a\u751f\u4ea7\u8005\u3001\u4e00\u4e2a\u6d88\u8d39\u961f\u5217\u548c\u4e00\u4e2a\u6d88\u8d39\u8005\u3002</li> <li>\u670d\u52a1\u7684\u8bf7\u6c42\u91cf\u8f83\u5c0f\uff0c\u4e0d\u592a\u53ef\u80fd\u53d1\u751f\u6d88\u606f\u6324\u538b\u7684\u60c5\u51b5\u3002</li> <li>\u6570\u636e\u5e76\u4e0d\u91cd\u8981\uff0c\u5373\u4fbf\u4e22\u5931\u4e5f\u4e0d\u4f1a\u4ea7\u751f\u8f83\u4e3a\u4e25\u91cd\u7684\u540e\u679c\uff08\u51b5\u4e14\u6211\u91c7\u7528\u4e86\u6709\u6548\u7684\u63aa\u65bd\uff0c\u5728\u6700\u5927\u7a0b\u5ea6\u4e0a\u4fdd\u8bc1\u4e86\u6570\u636e\u4e0d\u4e22\u5931\uff09\u3002</li> </ol>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%BD%9C%E4%B8%BA%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E7%9A%84%E6%80%9D%E8%80%83/#_4","title":"\u9879\u76ee\u5b9e\u6218","text":""},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E4%BD%9C%E4%B8%BA%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97%E7%9A%84%E6%80%9D%E8%80%83/#_5","title":"\u9879\u76ee\u5c55\u671b","text":"<ol> <li>\u57fa\u4e8e\u7f16\u7801\u7684\u5c42\u9762\uff0c\u5728\u751f\u4ea7\u8005-\u6d88\u8d39\u8005\u6a21\u578b\u4e2d\uff0c\u4f7f\u7528Redis\u6a21\u62df\u6d88\u606f\u961f\u5217\u65f6\uff0c\u5982\u4f55\u5b9e\u73b0\u751f\u4ea7\u8005\u548c\u6d88\u8d39\u8005\u7684\u89e3\u8026\uff1f\u53ef\u4ee5\u91c7\u7528\u547d\u4ee4\u6a21\u5f0f\u3001\u89c2\u5bdf\u8005\u6a21\u5f0f\u7b49\u3002</li> </ol>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/","title":"Redis\u6570\u636e\u7ed3\u6784\u53ca\u5e94\u7528\u573a\u666f.md","text":"<p>[toc]</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/#redis","title":"Redis\u4e94\u5927\u6570\u636e\u7ed3\u6784","text":"<p>Redis\u4e2d\uff0cKey\u7684\u7c7b\u578b\u901a\u5e38\u90fd\u662fString\uff0cValue\u7684\u7c7b\u578b\u67095\u79cd\uff1aString\u3001List\u3001Set\u3001Zset\u3001Hash\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/#string","title":"String","text":"<ul> <li> <p>Redis\u4e0d\u76f4\u63a5\u4f7f\u7528C\u5b57\u7b26\u4e32\uff0c\u800c\u8981\u81ea\u5b9a\u4e49\u7b80\u5355\u52a8\u6001\u5b57\u7b26\u4e32\uff08SDS\uff09\u3002\u76ee\u7684\u662f\u4e3a\u4e86\u8ba9\u5b57\u7b26\u4e32\u201c\u52a8\u6001\u201d\u201c\u53ef\u53d8\u201d\u3002\u91c7\u7528\u9884\u5206\u914d\u5185\u5b58\u51cf\u5c11\u5185\u5b58\u7684\u9891\u7e41\u5206\u914d\u3002</p> </li> <li> <p>\u4f7f\u7528\u4e60\u60ef\uff1a\u901a\u5e38\u6211\u4e60\u60ef\u5c06\u5bf9\u8c61\u5e8f\u5217\u5316\u4e3aString\uff0c\u7136\u540e\u5b58\u5165Redis\u3002</p> </li> <li> <p>\u8be6\u7ec6\u4ecb\u7ecd\uff1a</p> </li> </ul> <p>C\u8bed\u8a00\u5b57\u7b26\u4e32\u7684\u5f0a\u7aef\u3002</p> <ol> <li>\u83b7\u53d6\u5b57\u7b26\u4e32\u957f\u5ea6\u9700\u8981\u901a\u8fc7\u8fd0\u7b97\u3002</li> <li>C\u5b57\u7b26\u4e32\u4e0d\u53ef\u4fee\u6539\u3002</li> </ol> <p>SDS\u7684\u7ed3\u6784\u5982\u4e0b\uff08\u5176\u4e2d\u4e00\u79cdSDS\u7684\u7ed3\u6784\uff09\uff1a</p> <p><code>c   struct __attribute__ ((__packed__)) sdshdr8 {       uint8_t len;  /* buf\u5df2\u4fdd\u5b58\u7684\u5b57\u7b26\u4e32\u5b57\u8282\u6570\uff0c\u4e0d\u5305\u542b\u7ed3\u675f\u6807\u8bc6 */       uint8_t alloc;  /* buf\u7533\u8bf7\u7684\u603b\u7684\u5b57\u8282\u6570\uff0c\u4e0d\u5305\u542b\u7ed3\u675f\u6807\u8bc6 */       unsigned char flags;  /* \u4e0d\u540c\u7684SDS\u7684\u5934\u7c7b\u578b\uff0c\u7528\u6765\u63a7\u5236SDS\u7684\u5934\u5927\u5c0f */       char buf[];   }</code></p> <p>\u4f8b\u5982\uff1a\u4e00\u4e2a\u5b57\u7b26\u4e32\u201cname\u201d\u7684sds\u7ed3\u6784\u5982\u4e0b\uff1a</p> len:4 alloc:4 flags:1 n a m e \\0 <p>Redis SDS  \u6269\u5bb9\u7ec6\u8282\uff1a</p> <p>\u5047\u5b9a\u5f53\u524d\u6709\u5b57\u7b26\u4e32\u201chi\u201d\u7684SDS\uff1a</p> len:2 alloc:2 flags:1 h i \\0 <p>\u6b64\u65f6\u6211\u4eec\u8981\u8ffd\u52a0\u5b57\u7b26\u4e32\u201clhl\u201d\uff0c\u5219\u4f1a\u7533\u8bf7\u4e00\u4e2a\u65b0\u7684\u5185\u5b58\u7a7a\u95f4\u3002</p> <ul> <li> <p>\u5982\u679c\u65b0\u5b57\u7b26\u4e32\u5c0f\u4e8e1M\uff0c\u5219\u65b0\u7a7a\u95f4\u4e3a\u6269\u5c55\u540e\u7684\u5b57\u7b26\u4e32\u957f\u5ea6\u76842\u500d+1\uff08\u52a0\u4e0a\\0\uff09\u3002</p> </li> <li> <p>\u5982\u679c\u65b0\u5b57\u7b26\u4e32\u5927\u4e8e1M\uff0c\u5219\u65b0\u7a7a\u95f4\u4e3a\u62d3\u5c55\u540e\u7684\u5b57\u7b26\u4e32\u957f\u5ea6+1M+1\u3002</p> </li> </ul> <p>\u8fd9\u53eb\u505a\u5185\u5b58\u9884\u5206\u914d\u3002</p> <p>\u6b64\u65f6\u5b57\u7b26\u4e32\u201chilhl\u201d\u7684SDS\u4e3a\uff1a</p> len:5 alloc:11 flags:1 h i l h l \\0"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF/#list","title":"List","text":""},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E6%98%AF%E5%8D%95%E7%BA%BF%E7%A8%8B%E8%BF%98%E6%98%AF%E5%A4%9A%E7%BA%BF%E7%A8%8B/","title":"Redis\u662f\u5355\u7ebf\u7a0b\u8fd8\u662f\u591a\u7ebf\u7a0b","text":"<p>[toc]</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E6%98%AF%E5%8D%95%E7%BA%BF%E7%A8%8B%E8%BF%98%E6%98%AF%E5%A4%9A%E7%BA%BF%E7%A8%8B/#_1","title":"\u524d\u8a00","text":"<p>Redis\u7684\u5927\u591a\u6570\u529f\u80fd\u662f\u5355\u7ebf\u7a0b\uff0c\u90e8\u5206I/O\u529f\u80fd\u662f\u591a\u7ebf\u7a0b\u7684\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E6%98%AF%E5%8D%95%E7%BA%BF%E7%A8%8B%E8%BF%98%E6%98%AF%E5%A4%9A%E7%BA%BF%E7%A8%8B/#redis_1","title":"Redis\u4e3a\u4ec0\u4e48\u91c7\u7528\u5355\u7ebf\u7a0b","text":"<ol> <li>Redis\u662f\u57fa\u4e8e\u5185\u5b58\u7684\u6570\u636e\u5e93\uff0c\u5b83\u7684\u8bfb\u5199\u6548\u7387\u975e\u5e38\u9ad8\uff0c\u5355\u7ebf\u7a0b\u80fd\u6ee1\u8db3\u7edd\u5927\u90e8\u5206\u9700\u6c42\u3002\u800c\u591a\u7ebf\u7a0b\u53cd\u800c\u4f1a\u5e26\u6765\u4e0a\u4e0b\u6587\u7684\u5207\u6362\u3001\u8bfb\u5199\u5e76\u53d1\u7b49\u95ee\u9898\u3002</li> <li>Redis\u7684\u6027\u80fd\u74f6\u9888\u4e0d\u5728\u4e8eCPU\uff0c\u800c\u5728\u4e8e\u7f51\u7edc\u5e26\u5bbd\u3002</li> </ol>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96%E7%AD%96%E7%95%A5/","title":"Redis\u7684\u6301\u4e45\u5316\u7b56\u7565","text":"<p>[toc]</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96%E7%AD%96%E7%95%A5/#rdb","title":"RDB","text":"<p>Redis\u5173\u4e8eRDB\u7b56\u7565\u7684\u4e00\u4e9b\u9ed8\u8ba4\u914d\u7f6e\uff1a</p> <pre><code>################################ SNAPSHOTTING  ################################\n#\n# Save the DB on disk:\n#\n#   save &lt;seconds&gt; &lt;changes&gt;\n#\n#   Will save the DB if both the given number of seconds and the given\n#   number of write operations against the DB occurred.\n#\n#   In the example below the behavior will be to save:\n#   after 900 sec (15 min) if at least 1 key changed\n#   after 300 sec (5 min) if at least 10 keys changed\n#   after 60 sec if at least 10000 keys changed\n#\n#   Note: you can disable saving completely by commenting out all \"save\" lines.\n#\n#   It is also possible to remove all the previously configured save\n#   points by adding a save directive with a single empty string argument\n#   like in the following example:\n#\n#   save \"\"\n\nsave 900 1\nsave 300 10\nsave 60 10000\n\n# \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u542f\u7528\u4e86RDB\u5feb\u7167\uff08\u81f3\u5c11\u6709\u4e00\u4e2a\u4fdd\u5b58\u70b9\uff09\uff0c\u5e76\u4e14\u6700\u8fd1\u4e00\u6b21\u540e\u53f0\u4fdd\u5b58\u5931\u8d25\uff0cRedis\u5c06\u505c\u6b62\u63a5\u53d7\u5199\u64cd\u4f5c\u3002Redis\u91c7\u7528\u8fd9\u79cd\u4e0d\u597d\u7684\u65b9\u5f0f\u4f7f\u7528\u6237\u610f\u8bc6\u5230\uff0c\u6570\u636e\u6ca1\u6709\u6b63\u786e\u5730\u6301\u4e45\u5316\u5728\u78c1\u76d8\u4e0a\uff0c\u5426\u5219\u6709\u53ef\u80fd\u6ca1\u6709\u4eba\u6ce8\u610f\u5230\u6570\u636e\u6301\u4e45\u5316\u5931\u8d25\u3002\n# \u5982\u679c\u540e\u53f0\u4fdd\u5b58\u8fc7\u7a0b\u518d\u6b21\u5f00\u59cb\u5de5\u4f5c\uff0cRedis\u5c06\u81ea\u52a8\u5141\u8bb8\u518d\u6b21\u5199\u5165\u3002\n# \u7136\u800c\uff0c\u5982\u679c\u4f60\u5df2\u7ecf\u8bbe\u7f6e\u4e86\u4f60\u5bf9Redis\u670d\u52a1\u5668\u548c\u6301\u4e45\u5316\u7684\u9002\u5f53\u76d1\u63a7\uff0c\u4f60\u53ef\u80fd\u60f3\u7981\u7528\u8fd9\u4e2a\u529f\u80fd\uff0c\u8fd9\u6837\u5373\u4f7f\u78c1\u76d8\u6709\u95ee\u9898\uff0cRedis\u4e5f\u4f1a\u7ee7\u7eed\u7167\u5e38\u5de5\u4f5c\u3001 \u6743\u9650\u7b49\u95ee\u9898\uff0cRedis\u4e5f\u80fd\u7167\u5e38\u5de5\u4f5c\u3002\nstop-writes-on-bgsave-error yes\n\n# \u8f6c\u50a8.rdb\u6570\u636e\u5e93\u65f6\u662f\u5426\u4f7f\u7528LZF\u538b\u7f29\u5b57\u7b26\u4e32\u5bf9\u8c61\uff1f\n# \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u538b\u7f29\u662f\u542f\u7528\u7684\uff0c\u56e0\u4e3a\u5b83\u5728\u7edd\u5927\u591a\u6570\u60c5\u51b5\u90fd\u6709\u4f18\u52bf\u3002\n# \u5982\u679c\u4f60\u60f3\u5728\u4fdd\u5b58\u8fc7\u7a0b\u4e2d\u8282\u7701\u4e00\u4e9bCPU\uff0c\u628a\u5b83\u8bbe\u7f6e\u4e3a'no'\u3002\nrdbcompression yes\n\n# \u662f\u5426\u5f00\u542fCRC64\u6821\u9a8c\u3002\u5982\u679c\u5f00\u542f\uff0c\u5219\u6587\u4ef6\u7684\u53ef\u9760\u6027\u66f4\u9ad8\uff1b\u5982\u679c\u5173\u95ed\uff0c\u5219\u53ef\u4ee5\u63d0\u9ad8\u7ea610%\u7684\u6027\u80fd\u3002\nrdbchecksum yes\n\n# rdb\u6587\u4ef6\u540d\ndbfilename dump.rdb\n\n# Remove RDB files used by replication in instances without persistence\n# enabled. By default this option is disabled, however there are environments\n# where for regulations or other security concerns, RDB files persisted on\n# disk by masters in order to feed replicas, or stored on disk by replicas\n# in order to load them for the initial synchronization, should be deleted\n# ASAP. Note that this option ONLY WORKS in instances that have both AOF\n# and RDB persistence disabled, otherwise is completely ignored.\n#\n# An alternative (and sometimes better) way to obtain the same effect is\n# to use diskless replication on both master and replicas instances. However\n# in the case of replicas, diskless is not always an option.\nrdb-del-sync-files no\n\n# The working directory.\n#\n# The DB will be written inside this directory, with the filename specified\n# above using the 'dbfilename' configuration directive.\n#\n# The Append Only File will also be created inside this directory.\n#\n# rbd\u6587\u4ef6\u7684\u76ee\u5f55\ndir /var/lib/redis\n</code></pre> <p>\u5728<code>redis.conf</code>\u4e2d\u8fd8\u6709\u4e00\u4e9b\u5173\u4e8eRDB\u7684\u914d\u7f6e\u3002</p> <p>save\u548cbgsave\uff1a</p> <p>bgsave\uff1a\u4e3b\u8fdb\u7a0b\u4f1afork\u4e00\u4e2a\u5b50\u8fdb\u7a0b\uff0c\u5b50\u8fdb\u7a0b\u5171\u4eab\u4e3b\u8fdb\u7a0b\u7684\u5185\u5b58\u6570\u636e\u3002\u5b8c\u6210fork\u540e\u8bfb\u53d6\u5185\u5b58\u6570\u636e\u5e76\u5199\u5165RDB\u6587\u4ef6\u3002\u867d\u8bf4\u4e3b\u8fdb\u7a0bfork\u5b50\u8fdb\u7a0b\u7684\u65f6\u5019\u4e5f\u6709\u963b\u585e\uff0c\u4f46\u662f\u548csave\u7684\u963b\u585e\u76f8\u6bd4\uff0c\u5b8c\u5168\u4e0d\u503c\u4e00\u63d0\uff01</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96%E7%AD%96%E7%95%A5/#aof","title":"AOF","text":""},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B/","title":"Redis\u7f51\u7edc\u6a21\u578b","text":"<p>[toc]</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B/#_1","title":"\u7528\u6237\u7a7a\u95f4\u548c\u5185\u6838\u7a7a\u95f4","text":"<ol> <li> <p>\u64cd\u4f5c\u7cfb\u7edf\u5c06\u5185\u5b58\u5206\u4e3a\u7528\u6237\u7a7a\u95f4\u548c\u5185\u6838\u7a7a\u95f4\uff0c\u76ee\u7684\u662f\u4e3a\u4e86\u5b89\u5168\u6027\u7b49\u3002</p> </li> <li> <p>\u7528\u6237\u7a7a\u95f4\u662f\u6307\u5e94\u7528\u7a0b\u5e8f\u8fd0\u884c\u7684\u5185\u5b58\u533a\u57df\uff1b\u5185\u6838\u7a7a\u95f4\u662f\u64cd\u4f5c\u7cfb\u7edf\u7684\u6838\u5fc3\u90e8\u5206\u3002</p> </li> <li> <p>Linux\u7cfb\u7edf\u4e3a\u4e86\u63d0\u9ad8IO\u6548\u7387\uff0c\u4f1a\u5728\u7528\u6237\u7a7a\u95f4\u548c\u5185\u6838\u7a7a\u95f4\u90fd\u6dfb\u52a0\u7f13\u51b2\u533a\u3002</p> </li> <li>\u5199\u6570\u636e\u65f6\uff0c\u8981\u628a\u7528\u6237\u7f13\u51b2\u6570\u636e\u62f7\u8d1d\u5230\u5185\u6838\u7f13\u51b2\u533a\u4e2d\uff0c\u7136\u540e\u5199\u5165\u8bbe\u5907\u3002</li> <li>\u8bfb\u6570\u636e\u65f6\uff0c\u8981\u4ece\u8bbe\u5907\u8bfb\u53d6\u6570\u636e\u5230\u5185\u6838\u7f13\u51b2\u533a\uff0c\u7136\u540e\u62f7\u8d1d\u5230\u7528\u6237\u7f13\u51b2\u533a\u3002</li> </ol>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B/#io","title":"\u4e94\u79cdIO\u6a21\u578b","text":"<p>Linux\u4e0bI/O\u7684\u8fc7\u7a0b\u662f\uff1a\u7528\u6237\u7a7a\u95f4\u7684\u7528\u6237\u7f13\u51b2\u533a\u7b49\u5f85\u5185\u6838\u7a7a\u95f4\u7684\u5185\u6838\u7f13\u51b2\u533a\u5c31\u7eea\uff1b\u5185\u6838\u7f13\u51b2\u533a\u5c06\u6570\u636e\u53d1\u9001\u7ed9\u7528\u6237\u7f13\u51b2\u533a\u3002\u9488\u5bf9\u8fd9\u4e24\u6b65\u8fc7\u7a0b\uff0c\u300aUnix\u7f51\u7edc\u7f16\u7a0b\u300b\u7ed9\u51fa\u4e86\u4e94\u79cd\u5b9e\u73b0\u7b56\u7565\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B/#io_1","title":"\u963b\u585eIO","text":"<p>BIO\u6a21\u578b\u4e2d\uff0c\u6bcf\u4e00\u4e2a\u8fde\u63a5\u90fd\u9700\u8981\u4e00\u4e2a\u7ebf\u7a0b\u5904\u7406\u3002</p> <p>\u7528\u6237\u7684\u8bf7\u6c42\u4f1a\u5bfc\u81f4\u7ebf\u7a0b\u4e0d\u65ad\u9500\u6bc1\u548c\u521b\u5efa\uff0c\u6d6a\u8d39\u5927\u91cf\u8d44\u6e90\uff0c\u4e0d\u8fc7\u53ef\u4ee5\u91c7\u7528\u7ebf\u7a0b\u6c60\u7684\u65b9\u5f0f\u51cf\u5c11\u7ebf\u7a0b\u7684\u521b\u5efa\u9500\u6bc1\u6b21\u6570\u3002</p> <p>\u4f46\u662f\u5f53\u67d0\u4e00\u65f6\u523b\u8fde\u63a5\u8fc7\u591a\u65f6\uff0c\u4f1a\u5360\u7528\u5927\u91cf\u7ebf\u7a0b\u3002</p> <p>\u4ece\u5185\u6838\u7684\u89d2\u5ea6\u5206\u6790\uff0c\u5f53\u5e94\u7528\u7a0b\u5e8f\u53d1\u8d77\u4e00\u6b21<code>recvfrom</code>\u7cfb\u7edf\u8c03\u7528\u65f6\uff0c\u5185\u6838\u4fbf\u5f00\u59cb\u51c6\u5907\u6570\u636e\uff0c\u540c\u65f6\u7528\u6237\u8fdb\u7a0b/\u7ebf\u7a0b\u88ab\u963b\u585e\u3002\u5f53\u6570\u636e\u51c6\u5907\u5c31\u7eea\u540e\uff0c\u5185\u6838\u5c06\u6570\u636e\u4ece\u5185\u6838\u7a7a\u95f4\u7684\u7f13\u51b2\u533a\u590d\u5236\u5230\u7528\u6237\u7a7a\u95f4\u7684\u7f13\u51b2\u533a\uff0c\u5e76\u5c06\u7ed3\u679c\u8fd4\u56de\u7ed9\u5e94\u7528\u7a0b\u5e8f\uff0c\u4e4b\u540e\u5e94\u7528\u8fdb\u7a0b\u7ee7\u7eed\u6267\u884c\u3002</p> <p></p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B/#io_2","title":"\u975e\u963b\u585eIO","text":"<p>\u5f53\u7528\u6237\u8fdb\u7a0b\u53d1\u51fa<code>recvfrom</code>\u64cd\u4f5c\u65f6\uff0c\u5982\u679c\u5185\u6838\u4e2d\u7684\u6570\u636e\u8fd8\u6ca1\u6709\u51c6\u5907\u597d\uff0c\u90a3\u4e48\u5185\u6838\u5e76\u4e0d\u4f1a\u963b\u585e\u7528\u6237\u8fdb\u7a0b\uff0c\u800c\u662f\u7acb\u523b\u8fd4\u56de\u7ed3\u679c\u3002\u4ece\u7528\u6237\u8fdb\u7a0b\u89d2\u5ea6\u8bb2 \uff0c\u5b83\u53d1\u8d77\u4e00\u4e2a<code>recvfrom</code>\u64cd\u4f5c\u540e\uff0c\u5e76\u4e0d\u9700\u8981\u7b49\u5f85\uff0c\u800c\u662f\u9a6c\u4e0a\u5c31\u5f97\u5230\u4e86\u4e00\u4e2a\u7ed3\u679c\uff0c\u7528\u6237\u8fdb\u7a0b\u901a\u8fc7\u7ed3\u679c\u5224\u65ad\u6570\u636e\u662f\u5426\u51c6\u5907\u597d\uff0c\u5982\u679c\u6ca1\u6709\u51c6\u5907\u597d\u8fc7\u6bb5\u65f6\u95f4\u518d\u6b21\u53d1\u9001<code>recvfrom</code>\u64cd\u4f5c\uff0c\u4e00\u65e6kernel\u4e2d\u7684\u6570\u636e\u51c6\u5907\u597d\u4e86\uff0c\u5e76\u4e14\u53c8\u518d\u6b21\u6536\u5230\u4e86\u7528\u6237\u8fdb\u7a0b\u7684<code>recvfrom</code>\u8c03\u7528\u64cd\u4f5c\uff0c\u9a6c\u4e0a\u5c06\u6570\u636e\u4ece\u5185\u6838\u7f13\u51b2\u533a\u62f7\u8d1d\u5230\u4e86\u7528\u6237\u8fdb\u7a0b\u7f13\u51b2\u533a\u3002</p> <p></p> <p>NIO\u7528\u6237\u8fdb\u7a0b\u603b\u662f\u53d1\u8d77<code>recvfrom</code>\u53cd\u800c\u4f1a\u6d6a\u8d39\u8d44\u6e90\u3002\u611f\u89c9\u6ca1\u6709BIO\u9ad8\u6548\u3002</p> <p>\u53ea\u6709\u5f53NIO\u548cIO\u591a\u8def\u590d\u7528\u7b49\u673a\u5236\u4e00\u8d77\u4f7f\u7528\u65f6\uff0c\u624d\u4f1a\u53d1\u51fa\u5b83\u7684\u5a01\u529b\u3002</p> <p>\u63d0\u4e2a\u7b80\u5355\u7684\u95ee\u9898\uff1a\u5982\u679c\u53ea\u6709\u4e00\u4e2a\u8fde\u63a5\uff0c\u90a3\u4e48NIO\u548cBIO\u8c01\u66f4\u9ad8\u6548\uff1f</p> <p>\u663e\u7136\u662fBIO\u66f4\u9ad8\u6548\uff0c\u5728\u53ea\u6709\u4e00\u4e2a\u8fde\u63a5\u7684\u60c5\u51b5\u4e0b\uff0cBIO\u6a21\u578b\u4e2d\u7528\u6237\u8fdb\u7a0b\u53ea\u9700\u8981\u5411\u5185\u6838\u53d1\u9001\u4e00\u6b21\u8bf7\u6c42\uff0c\u7136\u540e\u7b49\u5f85\u6570\u636e\u7684\u5230\u6765\u5373\u53ef\uff1b\u800cNIO\u9700\u8981\u4e0d\u65ad\u7684\u8f6e\u5bfb\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B/#io_3","title":"IO\u591a\u8def\u590d\u7528","text":"<p>I/O\u591a\u8def\u590d\u7528\u662f\u6307\u901a\u8fc7\u4e00\u79cd\u673a\u5236\uff0c\u4f7f\u5f97\u4e00\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u76d1\u89c6\u591a\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\uff08\u5305\u62ecsocket\u8fde\u63a5\u3001\u6807\u51c6\u8f93\u5165\u8f93\u51fa\u3001\u6587\u4ef6\u7b49\uff09\uff0c\u4e00\u65e6\u67d0\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u5c31\u7eea\uff08\u4e00\u822c\u662f\u8bfb\u5199\u5c31\u7eea\uff09\uff0c\u5219\u53ef\u4ee5\u901a\u77e5\u8fdb\u7a0b\u8fdb\u884c\u76f8\u5e94\u7684\u8bfb\u5199\u64cd\u4f5c\u3002</p> <p>\u800c\u76d1\u542cFD\u7684\u65b9\u5f0f\u53c8\u6709\u591a\u79cd\uff0c\u6b64\u65f6\u5c31\u884d\u751f\u51fa\u4e86\u4e09\u79cd\u6a21\u578b\uff1aselect\u3001poll\u3001epoll\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B/#select","title":"select","text":"<p>select\u662f\u6700\u53e4\u8001\u7684I/O\u591a\u8def\u590d\u7528\u673a\u5236\uff0c\u5b83\u4f7f\u7528\u4e00\u4e2a<code>fd_set</code>\u7c7b\u578b\u7684\u6570\u636e\u7ed3\u6784\uff08\u6570\u7ec4\uff09\u6765\u7ba1\u7406\u591a\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u53ef\u4ee5\u76d1\u89c6\u8bfb\u3001\u5199\u548c\u9519\u8bef\u4e09\u79cd\u4e8b\u4ef6\u3002</p> <pre><code>// fd_set \u7ed3\u6784\ntypedef struct fd_set {\n  uint32_t fds_bits[FD_SETSIZE / 32];\n} fd_set;\n</code></pre> <p>\u7b80\u5355\u7684\u8fc7\u7a0b\u662f\u8fd9\u6837\u7684\uff1a\u5e94\u7528\u7a0b\u5e8f\u7684\u4e00\u6761\u8fdb\u7a0b/\u7ebf\u7a0b\u76d1\u542c\u4e00\u4e2a\u5b58\u653e\u6587\u4ef6\u63cf\u8ff0\u7b26\u7684\u6570\u7ec4\uff0c\u5e76\u4e14\u4e0d\u65ad\u904d\u5386\u6570\u7ec4\u3002\u6211\u4eec\u9ed8\u8ba4\u901a\u8fc7\u6587\u4ef6\u63cf\u8ff0\u7b26\u53ef\u4ee5\u83b7\u53d6\u6587\u4ef6\u7684\u72b6\u6001\u3002\u5f53\u7528\u6237\u8fdb\u7a0b\u53d1\u73b0\u6709\u4e8b\u4ef6\uff08\u6bd4\u5982\u4e00\u4e2a\u8fde\u63a5\uff09\u9700\u8981\u5904\u7406\u65f6\uff0c\u5c31\u5904\u7406\u8be5\u4e8b\u4ef6\u3002</p> <p>\u5b8c\u6574\u7684\u8fc7\u7a0b\u662f\u8fd9\u6837\u7684\uff1a\u7528\u6237\u8c03\u7528select\u65f6\uff0c\u5185\u6838\u4f1a\u5c06<code>fd_set</code>\u5bf9\u8c61\u4ece\u7528\u6237\u7a7a\u95f4\u62f7\u8d1d\u5230\u5185\u6838\u7a7a\u95f4\uff0c\u5e76\u5728\u5185\u6838\u7a7a\u95f4\u904d\u5386\u6574\u4e2a\u6587\u4ef6\u63cf\u8ff0\u7b26\u96c6\u5408\uff08\u5185\u6838\u901a\u8fc7fd\u53ef\u4ee5\u627e\u5230\u6587\u4ef6\u7684\u72b6\u6001\uff09\u3002\u5f53\u5b58\u5728\u4e8b\u4ef6\u5c31\u7eea\u65f6\uff0cselect\u51fd\u6570\u5c31\u4f1a\u8fd4\u56de\u5c31\u7eea\u4e8b\u4ef6\u7684\u4e2a\u6570\uff0c\u5e76\u4e14\u628a<code>fs_set</code>\u6570\u7ec4\u4ece\u5185\u6838\u7a7a\u95f4\u62f7\u8d1d\u4f1a\u7528\u6237\u7a7a\u95f4\u3002\u7528\u6237\u8fdb\u7a0b\u518d\u904d\u5386\u4e00\u6b21<code>fd_set</code>\u6570\u7ec4\uff0c\u4ece\u800c\u83b7\u5f97\u5c31\u7eea\u7684\u6587\u4ef6\u63cf\u8ff0\u7b26\uff0c\u5e76\u8fdb\u884c\u64cd\u4f5c\u3002</p> <p>\u95ee\u9898\uff1aselect\u8c03\u7528\u4e2d\uff0c\u5982\u679c\u53ea\u6709\u4e00\u4e2a\u6587\u4ef6\uff0c\u5b83\u7684fd\u662f1000\uff0c\u90a3\u4e48\u6211\u7684fd_set\u7684\u5927\u5c0f\u662f\u591a\u5c11\u5462\uff1f</p> <p>\u7b54\u6848\uff1afd_set\u6570\u7ec4\u7684\u5927\u5c0f\u662f1000\u4f4d\uff0c\u5c3d\u7ba1\u8fd9\u4f1a\u6d6a\u8d39\u5f88\u591a\u8d44\u6e90\u3002</p> <p></p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B/#poll","title":"poll","text":"<p>\u548cselect\u6a21\u578b\u51e0\u4e4e\u4e00\u6837\u3002\u552f\u4e00\u4e0d\u540c\u7684\u662fpoll\u6a21\u578b\u4e2d\u5185\u6838\u7a7a\u95f4\u7684fd\u96c6\u5408\u662f\u94fe\u8868\uff08\u7528\u6237\u7a7a\u95f4\u7684fd\u96c6\u5408\u8fd8\u662f\u6570\u7ec4\uff09\uff0c\u7406\u8bba\u4e0a\u53ef\u4ee5\u5b58\u653e\u65e0\u9650\u4e2afd\u3002\u800cselect\u6a21\u578b\u4e2d\u4f7f\u7528<code>fd_set</code>\u7c7b\u578b\u7684\u6570\u7ec4\u5b58\u653efd\uff0c\u800c\u6570\u7ec4\u5927\u5c0f\u6700\u5927\u503c\u89c4\u5b9a\u4e3a1024\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B/#epoll","title":"epoll","text":"<ol> <li>\u7528\u6237\u8c03\u7528<code>epoll_create(int size)</code>\u51fd\u6570\uff0c\u4f1a\u5728\u5185\u6838\u521b\u5efa\u4e00\u4e2aeventpoll\u7ed3\u6784\u4f53\uff0c\u5e76\u8fd4\u56de\u7ed3\u6784\u4f53\u5bf9\u8c61\u7684\u53e5\u67c4epfd\u3002</li> <li>\u7528\u6237\u518d\u8c03\u7528<code>epoll_ctl</code>\uff0c\u5373\u53ef\u5c06fd\u52a0\u5165eventpoll\u5bf9\u8c61\u7684\u7ea2\u9ed1\u6811\u4e2d\uff0c\u5e76\u8bbe\u7f6eep_poll_callback\u51fd\u6570\u3002\u5f53callback\u89e6\u53d1\u65f6\uff0c\u5c06\u7ea2\u9ed1\u6811\u4e2d\u5bf9\u5e94\u7684fd\u52a0\u5165\u5c31\u7eea\u5217\u8868\uff08\u94fe\u8868\uff09\u4e2d\u3002</li> <li>\u7528\u6237\u8c03\u7528<code>epoll_wait</code>\uff0c\u5185\u6838\u4f1a\u68c0\u67e5\u5c31\u7eea\u5217\u8868\uff08\u800c\u4e0d\u662f\u7ea2\u9ed1\u6811\uff09\uff0c\u5e76\u53ea\u4f1a\u5c06\u5c31\u7eea\u7684fd\u62f7\u8d1d\u5230\u7528\u6237\u7a7a\u95f4\u7684\u4e00\u4e2a\u7a7a\u6570\u7ec4\u4e2d\u3002</li> </ol> <p>epoll\u51cf\u5c11\u4e86fd\u96c6\u5408\u7684\u62f7\u8d1d\u6b21\u6570\u548c\u62f7\u8d1d\u6570\u91cf\uff0c\u51cf\u5c11\u4e86\u904d\u5386fd\u5143\u7d20\u7684\u6b21\u6570\u3002</p> <p>epoll\u7684\u7ed3\u6784\u4f53\uff1a</p> <pre><code>struct eventpoll {\n    // ...\n    struct rb_root rbr;  // \u4e00\u9897\u7ea2\u9ed1\u6811\uff0c\u8bb0\u5f55\u8981\u76d1\u542c\u7684fd\n    struct list_head rdlist;  // \u4e00\u4e2a\u94fe\u8868\uff0c\u8bb0\u5f55\u5c31\u7eea\u7684fd\n    // ...\n}\n\n</code></pre>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B/#io_4","title":"\u4fe1\u53f7\u9a71\u52a8IO","text":""},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/Redis/Redis%E7%BD%91%E7%BB%9C%E6%A8%A1%E5%9E%8B/#io_5","title":"\u5f02\u6b65IO","text":""},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/kafka%E5%9F%BA%E7%A1%80/","title":"Kafka\u57fa\u7840\uff08TODO\uff09","text":"<p>[toc]</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/kafka%E5%9F%BA%E7%A1%80/#_1","title":"\u6d88\u606f\u961f\u5217\u7684\u4f5c\u7528","text":"<p>\u524a\u5cf0\uff1a</p> <p>\u89e3\u8026\uff1a\u4e0d\u540c\u6a21\u5757\u901a\u8fc7MQ\u4f20\u9012\u6d88\u606f\u3002</p> <p>\u5f02\u6b65\u901a\u4fe1\uff1a</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/kafka%E5%9F%BA%E7%A1%80/#_2","title":"\u6d88\u606f\u961f\u5217\u4e24\u79cd\u6a21\u5f0f","text":"<p>\u70b9\u5bf9\u70b9\u6a21\u5f0f\uff1a\u6d88\u606f\u6d88\u8d39\u540e\u88ab\u5220\u9664\u3002</p> <p>\u53d1\u5e03\u8ba2\u9605\u6a21\u5f0f\uff1a\u6d88\u606f\u6d88\u8d39\u540e\u4e0d\u88ab\u5220\u9664\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/kafka%E5%9F%BA%E7%A1%80/#amqp","title":"AMQP\u6a21\u578b","text":"<p>\u5305\u542b\u4e09\u5927\u5b9e\u4f53\uff1a\u961f\u5217\u3001\u4fe1\u7bb1\u548c\u7ed1\u5b9a\u3002</p> <p>\u6d88\u606f\u88ab\u653e\u5728\u4fe1\u7bb1\u4e2d\uff0c\u6839\u636e\u7ed1\u5b9a\u7684\u8def\u7531\u89c4\u5219\uff0c\u5c06\u6d88\u606f\u53d1\u9001\u5230\u961f\u5217\u4e2d\u3002</p> <p>AMQP\u7279\u70b9\uff1a\u652f\u6301\u4e8b\u52a1\u3001\u6570\u636e\u4e00\u81f4\u6027\u9ad8\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/kafka%E5%9F%BA%E7%A1%80/#topic","title":"TOPIC","text":"<p>Record\u5b58\u653e\u5728topic\u4e2d\uff0ctopic\u7c7b\u4f3cDB\u7684table\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/kafka%E5%9F%BA%E7%A1%80/#partition","title":"PARTITION","text":"<p>\u4e00\u4e2aTOPIC\u5305\u542b\u591a\u4e2aPARTITION\u3002\u901a\u5e38\u4e0d\u540c\u7684PARTITION\u5b58\u653e\u5728\u4e0d\u540c\u7684\u670d\u52a1\u5668\u4e0a\u3002\u8fd9\u6837\u5c31\u53ef\u4ee5\u7ebf\u6027\u62d3\u5c55Kafka\u3002</p> <p>Record\u5b58\u653e\u5230\u5206\u533a\u540e\uff0c\u5c31\u4e0d\u53ef\u53d8\u66f4\u3002Kafka\u53ef\u4ee5\u901a\u8fc7\u504f\u79fb\u91cf\u63d0\u53d6\u67d0\u4e2aPartition\u4e2d\u7684\u6d88\u606f\u3002</p> <p>Kafka\u901a\u8fc7\u526f\u672c\u673a\u5236\uff0c\u4fdd\u8bc1\u5206\u533a\u7684\u53ef\u9760\u6027\u3002\u4f8b\u5982\uff1a<code>replication-factor = 3</code>\u8868\u793a1\u4e2aPartition\u67092\u4e2a\u526f\u672c\u3002</p> <p>Kafka\u4f1a\u9009\u62e9\u4e00\u4e2aPartition\u4f5c\u4e3aLeader\uff0c\u5176\u4ed6\u526f\u672c\u4f5c\u4e3aFollower\u3002\u6570\u636e\u7684\u8bfb\u5199\u90fd\u53d1\u751f\u5728Leader\u4e0a\u3002Follower\u53ea\u8d1f\u8d23\u4eceLeader\u4e2d\u590d\u5236\u6570\u636e\uff0c\u4fdd\u8bc1\u6570\u636e\u4e00\u81f4\u6027\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/kafka%E5%9F%BA%E7%A1%80/#record","title":"RECORD","text":"<p>\u4e00\u4e2aRecord\u662f\u4e00\u4e2a\u952e\u503c\u5bf9\u3002\u82e5\u4e0d\u6307\u5b9akey\uff0c\u5219key\u4e3a\u7a7a\u3002</p> <p>\u76f8\u540ckey\u7684Record\u4f1a\u88ab\u653e\u5728\u540c\u4e00\u4e2aPartition\u3002key\u4e3anull\u7684Record\u4f1a\u88ab\u653e\u5728\u6bcf\u4e00\u4e2aPartition\u4e2d\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/kafka%E5%9F%BA%E7%A1%80/#broker","title":"BROKER","text":"<p>Kafka\u96c6\u7fa4\u7531\u591a\u4e2aBroker\u7ec4\u6210\uff0cBroker\u8d1f\u8d23\u8bfb\u5199Record\uff0c\u5e76\u5c06\u6570\u636e\u5199\u5165\u78c1\u76d8\u4e2d\u3002\u901a\u5e38\u4e00\u4e2a\u670d\u52a1\u5668\u4e0a\u6709\u4e00\u4e2aBroker\u5b9e\u4f8b\u3002</p>"},{"location":"%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka/kafka%E5%9F%BA%E7%A1%80/#_3","title":"\u5b9e\u6218","text":"<p>\u521b\u5efa./etc</p> <p>\u5c06config\u4e0b\u7684zookeeper.properties\u62f7\u8d1d\u5230etc\u3002</p> <p>\u642d\u5efa3\u4e2a\u8282\u70b9\u3002\u5c06config\u4e0b\u7684server.properties\u62f7\u8d1d\u5230etc\u4e0b\uff0c\u5206\u522b\u547d\u540d\u4e3aserver-0.properties\uff0cserver-1.properties\uff0cserver-2.properties\uff0c\u5e76\u5199\u4e0abroker-id=0\uff0clog.dirs=/tmp/kafka-logs-0\uff0clisteners=PLAINTEXT://:9092\uff08\u4f9d\u6b21\u5199\uff09\u3002</p> <p>\u542f\u52a8 zookeeper\uff1abin\u76ee\u5f55\u4e0b\u6267\u884c<code>./zookeeper-server-start.sh ../etc/zookeeper.properties</code></p> <p>\u542f\u52a83\u4e2akafka\uff1a<code>./kafka-server-start.sh ../etc/server0.properties</code>\u548c<code>./kafka-server-start.sh ../etc/server1.properties</code>\u548c<code>./kafka-server-start.sh ../etc/server2.properties</code></p> <p>bin\u76ee\u5f55\u4e0b\u6267\u884c<code>./kafka-topics.sh --zookeeper localhost:2181 --create --topic test --partitions 3 --replication-factor 2</code></p> <p>bin\u76ee\u5f55\u4e0b\u6267\u884c<code>./kafka-console-consumer.sh --bootstrap-server localhost:9092, localhost:9093, localhost:9094 --topic test</code></p> <p>bin\u76ee\u5f55\u4e0b\u6267\u884c<code>./kafka-console-producer.sh --broker-list localhost:9092, localhost:9093, localhost:9094 --topic test</code>\uff0c\u7136\u540e\u751f\u4ea7\u8005\u53ef\u4ee5\u53d1\u9001\u6d88\u606f\u4e86\u3002</p> <p>Server.properties\u914d\u7f6e\u6587\u4ef6\u91cd\u8981\u914d\u7f6e\uff1a</p> <p>broke.id</p> <p>log.dirs</p> <p>zookeeper.connect</p> <p>\u76d1\u542c\u5668Listener:\u6307\u5b9abroker\u542f\u52a8\u65f6\u672c\u673a\u7684\u76d1\u542c\u540d\u79f0\u548c\u7aef\u53e3\u3002</p> <p>advertised.listeners\uff1a\u5bf9\u5916\u53d1\u5e03\u7684\u8bbf\u95eeip\u548c\u7aef\u53e3\uff0c\u6ce8\u518c\u5230zookeeper\u4e2d\uff0c\u7ed9\u5ba2\u6237\u7aef\u4f7f\u7528\u3002</p> <p>broker\u96c6\u7fa4\u4e2d\uff0c\u5185\u7f51\u901a\u8fc7\u4e3b\u673a\u540d\u8bbf\u95ee\uff0c\u5916\u7f51\u901a\u8fc7ip\u8bbf\u95ee\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/CentOS7%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86/","title":"CentOS7\u8f6f\u4ef6\u5305\u7ba1\u7406","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/CentOS7%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86/#rpm","title":"RPM","text":""},{"location":"%E5%85%B6%E4%BB%96/CentOS7%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86/#rpm_1","title":"RPM\u662f\u4ec0\u4e48","text":"<p>RPM\u662f\u4e00\u6b3e\u7ba1\u7406\u8f6f\u4ef6\u5305\u7684\u7a0b\u5e8f\u3002\u7ba1\u7406RPM\u5305\u3002RPM\u5305\u662f\u683c\u5f0f\u4e3a.rpm\u7684\u8f6f\u4ef6\u5305\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/CentOS7%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86/#rpm_2","title":"RPM\u5305\u683c\u5f0f","text":"<p><code>nginx-1.23.0-1.1.x86_64.rpm</code></p> <p>nginx\uff1a\u8f6f\u4ef6\u540d\u79f0\u3002</p> <p>1.23\uff1a\u4e3b\u7248\u672c\u53f7.\u526f\u7248\u672c\u53f7</p> <p>x86_64\uff1a64\u4f4d\u64cd\u4f5c\u7cfb\u7edf\u3002</p> <p>\u5176\u4f59\u4e0d\u7ba1\u3002</p> <p>\u7279\u6b8a\u540d\u79f0\uff1a</p> <p>el7\uff1a\u8fd0\u884c\u5728centos7\u7cfb\u7edf\u4e0a\u3002</p> <p>noarch\uff1a\u4efb\u4f55\u5e73\u53f0\u5747\u53ef\u8fd0\u884c\u3002</p> <p>\u6ce8\uff1a\u4e00\u4e2a\u7cfb\u7edf\u53ef\u80fd\u6709\u591a\u4e2a\u5e73\u53f0\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/CentOS7%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86/#rpm_3","title":"RPM\u5305\u7684\u83b7\u53d6\u65b9\u5f0f","text":"<ol> <li>\u5149\u76d8\uff08\u6211\u4e0d\u5e38\u7528\uff09\u3002</li> <li>RPM\u5b98\u65b9\u7f51\u7ad9</li> <li>\u5404\u5927\u5382\u5546\u7684\u5b98\u7f51\u3002</li> </ol>"},{"location":"%E5%85%B6%E4%BB%96/CentOS7%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86/#rpm_4","title":"\u5b89\u88c5RPM\u683c\u5f0f\u7684\u5305","text":"<pre><code>rpm -ivh \u5168\u540d\n-i \u5b89\u88c5\n-v \u663e\u793a\u5b89\u88c5\u4fe1\u606f\n-h \u663e\u793a\u5b89\u88c5\u8fdb\u5ea6\n</code></pre> <p>rpm\u4f7f\u7528\u65f6\uff0c\u4ec0\u4e48\u60c5\u51b5\u4e0b\u4f7f\u7528\u8f6f\u4ef6\u5305\u5168\u540d\uff0c\u4ec0\u4e48\u65f6\u5019\u4f7f\u7528\u8f6f\u4ef6\u5305\u540d\uff1f</p> <p>\u5168\u540d\uff1a\u5728\u5b89\u88c5\u548c\u66f4\u65b0\u5347\u7ea7\u65f6\u5019\u4f7f\u7528</p> <p>\u5305\u540d\uff1a\u5bf9\u5df2\u7ecf\u5b89\u88c5\u8fc7\u7684\u8f6f\u4ef6\u5305\u8fdb\u884c\u64cd\u4f5c\u65f6\uff0c\u6bd4\u5982\u67e5\u627e\u5df2\u7ecf\u5b89\u88c5\u7684\u67d0\u4e2a\u5305\uff0c\u5378\u8f7d\u5305\u7b49 \uff0c\u4f7f\u7528\u5305\u540d\u3002\u5b83\u9ed8\u8ba4\u662f\u53bb\u76ee\u5f55<code>/var/lib/rpm</code>\u4e0b\u9762\u8fdb\u884c\u641c\u7d22\u3002 \u5f53\u4e00\u4e2a rpm \u5305\u5b89\u88c5\u5230\u7cfb\u7edf\u4e0a\u4e4b\u540e\uff0c\u5b89\u88c5\u4fe1\u606f\u901a\u5e38\u4f1a\u4fdd\u5b58\u5728\u672c\u5730\u7684 <code>/var/lib/rpm/</code>\u76ee\u5f55\u4e0b\u3002 \uff08<code>/var/lib/rpm/</code>\u8fd9\u4e2a\u76ee\u5f55\u5e76\u4e0d\u653e\u7f6erpm\u5305\uff0c\u800c\u662f\u653e\u7f6erpm\u5305\u7684\u8f6f\u4ef6\uff09</p>"},{"location":"%E5%85%B6%E4%BB%96/CentOS7%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86/#rpm_5","title":"RPM\u7684\u67e5\u8be2","text":"<pre><code>rpm -q \u5e38\u4e0e\u4ee5\u4e0b\u53c2\u6570\u7ec4\u5408\u4f7f\u7528\n-a (all)  --&gt;  \u67e5\u8be2\u8303\u56f4\u662f\u6240\u6709\u7684\u5b89\u88c5\u5305\n-f (file) --&gt;  \u67e5\u8be2\u6587\u4ef6\u6240\u5c5e\u8f6f\u4ef6\u5305\n-i (info)  --&gt;  \u67e5\u8be2rpm\u5305\u4fe1\u606f\uff0c\u540e\u9762\u8ddfrpm\u5305\u540d\n-l (list)  --&gt;  \u67e5\u8be2\u6587\u4ef6\u5b89\u88c5\u4f4d\u7f6e\n-p  --&gt;  \u67e5\u8be2\u672a\u5b89\u88c5\u8f6f\u4ef6\u5305\u7684\u76f8\u5173\u4fe1\u606f\n-R  --&gt;  \u67e5\u8be2\u8f6f\u4ef6\u5305\u7684\u4f9d\u8d56\n</code></pre> <p>\u6848\u4f8b\uff1a</p> <pre><code>rpm -q vim  --&gt;  \u67e5\u8be2\u662f\u5426\u5b89\u88c5vim\u8f6f\u4ef6\nrpm -qa  --&gt;  \u67e5\u8be2\u6240\u6709\u5df2\u5b89\u88c5\u7684\u8f6f\u4ef6\nrpm -qa | grep vim  --&gt;  \u67e5\u8be2\u5df2\u5b89\u88c5\u8f6f\u4ef6\u4e2d\u5e26\u6709\"vim\"\u7684\u8f6f\u4ef6\n# which find  --&gt;  \u67e5\u627efind\u6307\u4ee4\u6240\u5728\u7684\u4f4d\u7f6e\nrpm -qf /usr/bin/find  --&gt;\u67e5\u770bfind\u6587\u4ef6\u6240\u5c5e\u7684\u8f6f\u4ef6\u5305\nrpm -qi mysql80-community-release-el7-6.noarch.rpm  --&gt;  \u663e\u793a\u5df2\u5b89\u88c5\u7684rpm\u5305\u7684\u4fe1\u606f\nrpm -qpi mysql80-community-release-el7-6.noarch.rpm   --&gt;  \u663e\u793a\u672a\u5b89\u88c5\u7684rpm\u5305\u7684\u4fe1\u606f\nrpm -qpl mysql80-community-release-el7-6.noarch.rpm  --&gt;  \u67e5\u770b\u5b89\u88c5rpm\u5305\u540e\uff0c\u751f\u6210\u54ea\u4e9b\u6587\u4ef6\nrpm -V findutils  --&gt;  \u67e5\u770bfindutils\u5305\u5b89\u88c5\u7684\u8f6f\u4ef6\u662f\u5426\u88ab\u7be1\u6539\nrpm -Vf /usr/bin/find  --&gt;  \u67e5\u770bfind\u6587\u4ef6\u662f\u5426\u88ab\u7be1\u6539\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/CentOS7%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86/#rpm_6","title":"RPM\u5378\u8f7d\u548c\u66f4\u65b0","text":"<p>\u5efa\u8bae\u4f7f\u7528yum\u547d\u4ee4\u66f4\u65b0\u6216\u5378\u8f7d</p> <p>rpm -e \u5305\u540d</p> <pre><code>rpm -e wget  --&gt;  \u5378\u8f7dwget\u5305\nrpm -e --nodeps wget  --&gt;  \u5ffd\u7565wget\u7684\u4f9d\u8d56\uff0c\u5f3a\u5236\u5378\u8f7d\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/CentOS7%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86/#yum","title":"YUM","text":""},{"location":"%E5%85%B6%E4%BB%96/CentOS7%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86/#yum_1","title":"YUM\u662f\u4ec0\u4e48","text":"<p>YUM\u7c7b\u4f3cRPM\uff0c\u90fd\u662f\u5305\u7ba1\u7406\u5668\uff0c\u53ea\u662fYUM\u53ef\u4ee5\u81ea\u52a8\u5904\u7406\u4f9d\u8d56\u5173\u7cfb\uff0c\u5e76\u4e14\u53ef\u4ee5\u4e00\u6b21\u6027\u5b89\u88c5\u6240\u6709\u5177\u6709\u4f9d\u8d56\u5173\u7cfb\u7684\u8f6f\u4ef6\u5305\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/CentOS7%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86/#yum_2","title":"\u914d\u7f6eYUM\u6e90","text":"<p>\u5148\u8bf4\u6280\u5de7\uff1a\u8f93\u5165\u4ee5\u4e0b\u6307\u4ee4\u5373\u53ef\uff1a</p> <pre><code>wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo\n</code></pre> <p>\u518d\u8bf4\u8bf4\u5927\u81f4\u539f\u7406\u3002</p> <p>YUM\u6e90\u5c31\u662f\u901a\u8fc7yum\u5b89\u88c5\u8f6f\u4ef6\u7684\u8f6f\u4ef6\u5b89\u88c5\u5305\u7684\u6765\u6e90\u3002\u6211\u7ecf\u5e38\u4f7f\u7528\u7f51\u7edc\u642d\u5efayum\u6e90\u3002\u4ee5\u4e0b\u662f\u7f51\u7edc\u642d\u5efayum\u6e90\u7684\u65b9\u6cd5\u3002</p> <p>yum\u6e90\u7684\u914d\u7f6e\u6587\u4ef6\u90fd\u4f4d\u4e8e<code>/etc/yum.repos.d/</code>\u91cc\uff0c\u662f\u540e\u7f00\u4e3a<code>.repo</code>\u7684\u6587\u4ef6\u3002</p> <p>\u901a\u5e38\u540d\u4e3a<code>CentOS-Base.repo</code>\u7684\u6587\u4ef6\u751f\u6548\uff0c\u6253\u5f00\u8be5\u6587\u4ef6\uff1a</p> <pre><code># \u62ec\u53f7\u91cc\u7684\u662f\u5bb9\u5668\u540d\u79f0\n[base]  \n# \u5bb9\u5668\u7684\u8bf4\u660e\uff0c\u968f\u4fbf\u5199\nname=CentOS-$releasever  \n# \u8be5\u5bb9\u5668\u751f\u6548\u3002\u5982\u679c\u503c\u4e3a0\uff0c\u5219\u4e0d\u751f\u6548\u3002\nenabled=1  \nfailovermethod=priority\n# yum\u6e90\u670d\u52a1\u5668\u5730\u5740\n# $releasever\u8868\u793a\u5f53\u524d\u7cfb\u7edf\u7248\u672c\uff0c\u53ef\u901a\u8fc7\u547d\u4ee4'cat /etc/centos-release'\u67e5\u770b\n# \u5982\u679cyum\u6e90\u4e0d\u53ef\u7528\uff0c\u5c1d\u8bd5\u5c06$releasever\u66ff\u6362\u4e3acentos7\u7684\u6700\u65b0\u7248\u672c\n# $basearch \u901a\u5e38\u7b49\u4e8e\uff1ax86_64\nbaseurl=http://mirrors.cloud.aliyuncs.com/centos/$releasever/os/$basearch/  \n# RPM\u7684\u6570\u5b57\u8bc1\u4e66\u751f\u6548\ngpgcheck=1  \n# \u6570\u5b57\u8bc1\u4e66\u7684\u516c\u94a5\u6587\u4ef6\u4fdd\u5b58\u4f4d\u7f6e\ngpgkey=http://mirrors.cloud.aliyuncs.com/centos/RPM-GPG-KEY-CentOS-7  \n\n[updates]\nname=CentOS-$releasever\nenabled=1\nfailovermethod=priority\nbaseurl=http://mirrors.cloud.aliyuncs.com/centos/$releasever/updates/$basearch/\ngpgcheck=1\ngpgkey=http://mirrors.cloud.aliyuncs.com/centos/RPM-GPG-KEY-CentOS-7\n\n[extras]\nname=CentOS-$releasever\nenabled=1\nfailovermethod=priority\nbaseurl=http://mirrors.cloud.aliyuncs.com/centos/$releasever/extras/$basearch/\ngpgcheck=1\ngpgkey=http://mirrors.cloud.aliyuncs.com/centos/RPM-GPG-KEY-CentOS-7\n</code></pre> <p>\u5907\u6ce8\uff1a\u4e2a\u4eba\u8ba4\u4e3a\uff0c[]\u4e2d\u7684\u540d\u5b57\u4f3c\u4e4e\u53ef\u4ee5\u4efb\u610f\u547d\u540d\uff0c\u4f46\u662f\u6700\u597d\u4e0d\u8981\u4fee\u6539\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/CentOS7%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86/#yum_3","title":"YUM\u7684\u5e38\u89c1\u64cd\u4f5c","text":"<pre><code>\u76f4\u63a5\u5b89\u88c5nginx\u8f6f\u4ef6\nyum install -y nginx\n\n\u5378\u8f7d\u5df2\u5b89\u88c5\u7684\u8f6f\u4ef6\nyum -y remove  \u5305\u540d\n\n\u5347\u7ea7\u8f6f\u4ef6\uff0c\u6539\u53d8\u8f6f\u4ef6\u8bbe\u7f6e\u548c\u7cfb\u7edf\u8bbe\u7f6e,\u7cfb\u7edf\u7248\u672c\u5185\u6838\u90fd\u5347\u7ea7\nyum -y update  \n\n\u5347\u7ea7\u8f6f\u4ef6\u5305\uff0c\u4e0d\u6539\u53d8\u8f6f\u4ef6\u8bbe\u7f6e\u548c\u7cfb\u7edf\u8bbe\u7f6e\uff0c\u7cfb\u7edf\u7248\u672c\u5347\u7ea7\uff0c\u5185\u6838\u4e0d\u6539\u53d8\nyum -y upgrage\n\n\u67e5\u770b\u5f53\u524d\u7cfb\u7edf\u6709\u54ea\u4e9b\u3010\u8f6f\u4ef6\u7ec4\u3011\uff0c\u6bcf\u4e2a\u8f6f\u4ef6\u7ec4\u6709\u5f88\u591a\u8f6f\u4ef6\nyum grouplist\n\n\u5b89\u88c5\u540d\u4e3a'Development Tools'\u7684\u8f6f\u4ef6\u7ec4\nyum groupinstall 'Development Tools'  -y\n\n\u67e5\u8be2rpm\u5305\u6240\u5c5e\u7684\u8f6f\u4ef6\u7ec4\nrpm -qpi mysql80-community-release-el7-6.noarch.rpm\n\nnginx\u8f6f\u4ef6\u7684\u4f5c\u7528\nyum info nginx\n\n\u67e5\u8be2find\u547d\u4ee4\u662f\u54ea\u4e2a\u8f6f\u4ef6\u5305\u5b89\u88c5\u7684\nyum provides /usr/bin/find\n\n\u67e5\u8be2\u542b\"nginx\"\u5173\u952e\u5b57\u7684\u8f6f\u4ef6\u5305\nyum search nginx\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/CentOS7%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86/#_1","title":"\u6e90\u7801\u5b89\u88c5\uff08\u672a\u5b8c\u5f85\u7eed\uff09","text":""},{"location":"%E5%85%B6%E4%BB%96/Chrome%E4%B8%AD%E4%BD%BF%E7%94%A8curl/","title":"Chrome\u4e2d\u4f7f\u7528curl","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/Chrome%E4%B8%AD%E4%BD%BF%E7%94%A8curl/#_1","title":"\u5927\u81f4\u5185\u5bb9","text":"<p>Chrome\u6d4f\u89c8\u5668\u4e2d\u53ef\u4ee5\u83b7\u53d6\u67d0\u4e2a\u8d44\u6e90\u7684curl\uff0c\u5728\u7f51\u7ad9\u4e0a\u53ef\u4ee5\u5c06curl\u8f6c\u4e3aPython\u3001go\u7b49\u8bed\u8a00\u7684http\u8bf7\u6c42\u4ee3\u7801\uff0c\u5728\u722c\u866b\u4e2d\u975e\u5e38\u5b9e\u7528\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/IDEA%E6%8F%92%E4%BB%B6%E5%88%86%E4%BA%AB/","title":"IDEA\u63d2\u4ef6\u5206\u4eab","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/IDEA%E6%8F%92%E4%BB%B6%E5%88%86%E4%BA%AB/#mybatisx","title":"MybatisX","text":""},{"location":"%E5%85%B6%E4%BB%96/IDEA%E6%8F%92%E4%BB%B6%E5%88%86%E4%BA%AB/#vo2dto","title":"vo2dto","text":""},{"location":"%E5%85%B6%E4%BB%96/IDEA%E6%8F%92%E4%BB%B6%E5%88%86%E4%BA%AB/#generateallsetter","title":"GenerateAllSetter","text":""},{"location":"%E5%85%B6%E4%BB%96/IDEA%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/","title":"IDEA\u9879\u76ee\u90e8\u7f72","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/IDEA%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2/#artifact","title":"artifact","text":"<p>\u5b83\u662f\u4ec0\u4e48\u4e0d\u91cd\u8981\uff0c\u5b83\u53ef\u4ee5\u628ajava\u9879\u76ee\u6253\u5305\u4e3ajar\u5305\u3001war\u5305\u6216web\u6587\u6863\uff0c\u7528\u4e8e\u90e8\u7f72\u3002</p> <p>artifact\u53ef\u4ee5\u6709\u591a\u79cd\u914d\u7f6e\u65b9\u5f0f\uff0c<code>File-&gt;Project Structure-&gt;Artifacts-&gt;+</code>\u5373\u53ef\u521b\u5efa\u914d\u7f6e\u3002</p> <p>Archive\uff08\u5f52\u6863\uff09\u6307\u7684\u662f\u5c06\u9879\u76ee\u6216\u6a21\u5757\u6253\u5305\u6210\u4e00\u4e2a\u5355\u72ec\u7684\u6587\u4ef6\uff0c\u901a\u5e38\u662f\u4e00\u4e2a JAR \u6587\u4ef6\u6216 WAR \u6587\u4ef6\uff0c\u4ee5\u4fbf\u4e8e\u53d1\u5e03\u548c\u90e8\u7f72\u3002\u5f52\u6863\u64cd\u4f5c\u5c06\u6253\u5305\u9879\u76ee\u7684\u6240\u6709\u4f9d\u8d56\u9879\u548c\u8d44\u6e90\u6587\u4ef6\u653e\u5728\u4e00\u4e2a\u6587\u4ef6\u4e2d\uff0c\u4f7f\u5f97\u9879\u76ee\u66f4\u5bb9\u6613\u5206\u53d1\u548c\u90e8\u7f72\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/Java%E5%AE%9E%E7%8E%B0http%E6%9C%8D%E5%8A%A1%E5%99%A8/","title":"Java\u5b9e\u73b0http\u670d\u52a1\u5668","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/Java%E5%AE%9E%E7%8E%B0http%E6%9C%8D%E5%8A%A1%E5%99%A8/#data","title":"Data","text":"<pre><code>package com.lee.httpd.data;\n\nimport java.io.File;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\n/**\n * @author lhl\n */\npublic class Data {\n    // \u8868\u793a\u670d\u52a1\u5668\u662f\u5426\u53ef\u4ee5\u6b63\u5e38\u5de5\u4f5c\n    public static boolean isRun = true;\n\n    // \u670d\u52a1\u662f\u5426\u662f\u6682\u505c\u72b6\u6001\n    public static boolean isPush = false;\n\n    // \u5b58\u50a8\u670d\u52a1\u5668\u53ef\u4ee5\u83b7\u53d6\u7684\u9759\u6001\u8d44\u6e90\u7684\u4f4d\u7f6e\n    public static String resoursePath = new File(\"\").getAbsolutePath() + \"\\\\src\\\\main\\\\resources\";\n\n    public static final Map&lt;String, String&gt; DOC_HEADLINE = new HashMap&lt;&gt;();\n\n    public static final List&lt;String&gt; IMAGE = new ArrayList&lt;&gt;();\n    static {\n        DOC_HEADLINE.put(\"html\", \"Content-Type: text/html;charset=utf-8\");\n        DOC_HEADLINE.put(\"css\", \"Content-Type: text/css\");\n        DOC_HEADLINE.put(\"js\", \"Content-Type: application/x-javascript\");\n        DOC_HEADLINE.put(\"json\", \"Content-Type: application/json;charset=utf-8\");\n\n        IMAGE.add(\"jpg\");\n        IMAGE.add(\"png\");\n        IMAGE.add(\"gif\");\n    }\n}\n\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/Java%E5%AE%9E%E7%8E%B0http%E6%9C%8D%E5%8A%A1%E5%99%A8/#requestexecute","title":"RequestExecute","text":"<pre><code>package com.lee.httpd.service;\n\nimport com.lee.httpd.data.Data;\n\nimport java.io.*;\nimport java.net.Socket;\nimport java.nio.charset.StandardCharsets;\n\n/**\n * @description \u8bf7\u6c42\u5904\u7406\u7ebf\u7a0b\u7c7b\n * @author lhl\n */\npublic class RequestExecute extends Thread {\n    /**\n     * \u5c06socket\u5b9a\u4e49\u4e3a\u6210\u5458\u53d8\u91cf\uff0c\u5229\u7528\u6784\u9020\u65b9\u6cd5\u521d\u59cb\u5316\n     */\n    private Socket socket;\n\n    public RequestExecute(Socket socket) {\n        this.socket = socket;\n    }\n\n    @Override\n    public void run() {\n        try {\n            /**\n             * \u4ecesocket\u4e2d\u53d6\u51fa\u8f93\u5165\u6d41\uff0c\u7136\u540e\u4ece\u8f93\u5165\u6d41\u4e2d\u53d6\u51fa\u6570\u636e\n             * \u5c06\u5b57\u8282\u8f93\u5165\u6d41\u8f6c\u6362\u4e3a\u7f13\u51b2\u5b57\u7b26\u8f93\u5165\u6d41\n             */\n            InputStream inputStream = socket.getInputStream();\n            InputStreamReader inputStreamReader = new InputStreamReader(inputStream);\n            BufferedReader bufferedReader = new BufferedReader(inputStreamReader);\n\n            /**\n             * \u58f0\u660e\u8f93\u51fa\u6d41\uff0c\u6307\u5411\u5ba2\u6237\u7aef\uff0c\u5c06\u5b57\u8282\u8f93\u51fa\u6d41\u5305\u88c5\u6210\u5b57\u7b26\u6d41\n             */\n            OutputStream outputStream = socket.getOutputStream();\n            PrintWriter printWriter = new PrintWriter(outputStream);\n\n            // \u5224\u65ad\u670d\u52a1\u5668\u662f\u5426\u5904\u4e8e\u6682\u505c\u72b6\u6001\n            if (Data.isPush) {\n                printWriter.println(\"HTTP/1.1 200 OK\");\n                printWriter.println(\"Content-Type: text/html;charset=utf-8\");\n                // \u8f93\u51fa\u7a7a\u884c\n                printWriter.println();\n                printWriter.println(\"&lt;h1&gt;\u670d\u52a1\u5668\u6b63\u5904\u4e8e\u6682\u505c\u72b6\u6001~&lt;/h1&gt;\");\n                printWriter.flush();\n                return;\n            }\n\n            // \u5faa\u73af\u4ece\u5b57\u7b26\u6d41\u4e2d\u83b7\u53d6\u5b57\u7b26\n            String line = null;\n            // \u8bb0\u5f55\u8bf7\u6c42\u884c\u6570\n            int lineNum = 1;\n            // \u5b58\u50a8\u8bf7\u6c42\u8def\u5f84\n            String reqPath = \"\";\n            // \u8bb0\u5f55\u670d\u52a1\u5668ip\n            String host = \"\";\n            while ((line = bufferedReader.readLine()) != null) {\n//                System.out.println(line);\n                if (lineNum == 1) {\n                    String[] infos = line.split(\" \");\n                    if (infos.length &gt; 2) {\n                        reqPath = infos[1];\n                    }\n                    else {\n                        throw new RuntimeException(\"\u8bf7\u6c42\u884c\u89e3\u6790\u9519\u8bef\");\n                    }\n                }\n                else {\n                    // \u89e3\u6790\u5176\u4ed6\u884c\uff0c\u4e3b\u8981\u89e3\u6790\u7b2c2\u884c\n                    String[] infos = line.split(\": \");\n                    if (\"Host\".equals(infos[0])) {\n                        host = infos[1];\n                    }\n                }\n                // \u8bfb\u53d6\u5230\u7a7a\u884c\uff0c\u9700\u8981\u9000\u51fa\u3002\u56e0\u4e3ahttp\u8bf7\u6c42\u662f\u957f\u8fde\u63a5\uff0c\u65e0\u6cd5\u8bfb\u53d6\u5230\u6587\u4ef6\u672b\u5c3e\n                if (\"\".equals(line)) {\n                    break;\n                }\n                lineNum++;\n            }\n\n            // \u8f93\u51fa\u8bf7\u6c42\u5730\u5740\n//            System.out.println(\"\u5904\u7406\u8bf7\u6c42\uff1ahttp://\" + host + reqPath);\n\n            // \u6839\u636e\u8bf7\u6c42\u54cd\u5e94\u5ba2\u6237\u7aef\n            // \u5982\u679c\u8def\u5f84\u662f / \u76f4\u63a5\u8fd4\u56de hello,world!\n            // \u5982\u679c\u8def\u5f84\u5305\u542b\u6587\u4ef6\u540d\uff0c\u5219\u8fd4\u56de\u5bf9\u5e94\u6587\u4ef6\n            if (\"/\".equals(reqPath)) {\n                // \u8f93\u51fa\u54cd\u5e94\u884c\n                printWriter.println(\"HTTP/1.1 200 OK\");\n                printWriter.println(\"Content-Type: text/html;charset=utf-8\");\n                // \u8f93\u51fa\u7a7a\u884c\n                printWriter.println(\"\");\n                // \u54cd\u5e94\u5934\u7ed3\u675f\uff0c\u5f00\u59cb\u54cd\u5e94\u5185\u5bb9\n                printWriter.println(\"&lt;h1&gt;hello, world!&lt;/h1&gt;\");\n                printWriter.flush();\n            }\n            else {\n                // \u67e5\u627e\u5bf9\u5e94\u7684\u8d44\u6e90\uff08html,css,js,jpg...\uff09\n                StringBuilder filePath = new StringBuilder(Data.resoursePath);\n                String[] folders = reqPath.split(\"/\");\n                String ext = reqPath.substring(reqPath.lastIndexOf(\".\") + 1);\n                for (int i = 1; i &lt; folders.length; i++) {\n                    String name = folders[i];\n                    filePath.append(\"\\\\\").append(name);\n                }\n                File file = new File(filePath.toString());\n                if (file.isFile()) {\n                    response200(outputStream, filePath.toString(), ext);\n                }\n                else {\n                    response404(outputStream);\n                }\n            }\n            inputStream.close();\n            inputStreamReader.close();\n            bufferedReader.close();\n            printWriter.close();\n            outputStream.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    /**\n     * \u5c06\u6307\u5b9a\u7684\u6587\u4ef6\u653e\u5165\u8f93\u51fa\u6d41\u4e2d\n     * @param outputStream\n     * @param filePath \u6587\u4ef6\u8def\u5f84\n     * @param ext \u6587\u4ef6\u540e\u7f00\n     */\n    private void response200(OutputStream outputStream, String filePath, String ext) {\n        InputStream inputStream = null;\n        PrintWriter printWriter = null;\n        InputStreamReader inputStreamReader = null;\n        BufferedReader bufferedReader = null;\n        try {\n            inputStream = new FileInputStream(filePath);\n            outputStream.write(\"HTTP/1.1 200 OK\\r\\n\".getBytes(StandardCharsets.UTF_8));\n            // \u56fe\u7247\u91c7\u7528\u5b57\u8282\u8f93\u51fa\u6d41\n            if (Data.IMAGE.contains(ext)) {\n                outputStream.write((\"Content-Type: image/\" + ext + \"\\r\\n\").getBytes());\n                // \u8f93\u51fa\u7a7a\u884c\uff0c\u8868\u793a\u54cd\u5e94\u5934\u5df2\u7ed3\u675f\n                outputStream.write(\"\\r\\n\".getBytes());\n                int len = -1;\n                byte[] buff = new byte[1024];\n                while ((len = inputStream.read(buff)) != -1) {\n                    outputStream.write(buff, 0, len);\n                    outputStream.flush();\n                }\n            }\n            else if (Data.DOC_HEADLINE.containsKey(ext)) {\n                // \u6587\u6863\u91c7\u7528\u5b57\u7b26\u8f93\u51fa\u6d41\n                printWriter = new PrintWriter(outputStream);\n                printWriter.println(\"HTTP/1.1 200 OK\");\n                printWriter.println(Data.DOC_HEADLINE.get(ext));\n                // \u8f93\u51fa\u7a7a\u884c\uff0c\u8868\u793a\u54cd\u5e94\u5934\u5df2\u7ed3\u675f\n                printWriter.println(\"\");\n                // \u521d\u59cb\u5316\u8f93\u5165\u6d41\n                inputStreamReader = new InputStreamReader(inputStream);\n                bufferedReader = new BufferedReader(inputStreamReader);\n                // \u5199\u51fa\u6570\u636e\n                String line;\n                while ((line = bufferedReader.readLine()) != null) {\n                    printWriter.println(line);\n                    printWriter.flush();\n                }\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            try {\n                if (inputStream != null) {\n                    inputStream.close();\n                }\n                if (printWriter != null) {\n                    printWriter.close();\n                }\n                if (inputStreamReader != null) {\n                    inputStreamReader.close();\n                }\n                if (bufferedReader != null) {\n                    bufferedReader.close();\n                }\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n\n        }\n    }\n\n    /**\n     * \u54cd\u5e94404\u672a\u627e\u5230\u754c\u9762\n     * @param outputStream\n     */\n    private void response404(OutputStream outputStream) {\n        PrintWriter printWriter = new PrintWriter(outputStream);\n        // \u8f93\u51fa\u54cd\u5e94\u884c\n        printWriter.println(\"HTTP/1.1 404\");\n        printWriter.println(\"Content-Type: text/html;charset=utf-8\");\n        // \u8f93\u51fa\u7a7a\u884c\n        printWriter.println(\"\");  // \u54cd\u5e94\u5934\u7ed3\u675f\uff0c\u5f00\u59cb\u54cd\u5e94\u5185\u5bb9\n        printWriter.println(\"&lt;h1&gt;sorry~404!&lt;/h1&gt;\");\n        printWriter.flush();\n        printWriter.close();\n        try {\n            outputStream.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/Java%E5%AE%9E%E7%8E%B0http%E6%9C%8D%E5%8A%A1%E5%99%A8/#server","title":"Server","text":"<pre><code>package com.lee.httpd.service;\n\nimport com.lee.httpd.data.Data;\nimport com.lee.httpd.ul.MainFrame;\n\nimport java.io.IOException;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\n/**\n * @description \u670d\u52a1\u76d1\u542c\n * @author lhl\n */\npublic class Server implements Runnable {\n    /**\n     * \u76d1\u542c\u7aef\u53e3\uff0c\u9ed8\u8ba4\u7aef\u53e3\u4e3a8888\n     */\n    private int port = 8888;\n\n    private MainFrame mainFrame;\n\n    public Server(int port, MainFrame mainFrame) {\n        this.port = port;\n        this.mainFrame = mainFrame;\n    }\n\n    @Override\n    public void run() {\n        try {\n            ServerSocket serverSocket = new ServerSocket(port);\n            // \u5f00\u59cb\u76d1\u542c\uff0c\u8f93\u51fa\u65e5\u5fd7\n            mainFrame.printLog(\"========\u5f00\u59cb\u76d1\u542c\u670d\u52a1=======\");\n            mainFrame.printLog(\"\u76d1\u542c\u7aef\u53e3:\" + port);\n            mainFrame.printLog(\"\u9759\u6001\u8d44\u6e90\u8def\u5f84\u662f\uff1a\" + Data.resoursePath);\n            while (Data.isRun) {\n                Socket socket = serverSocket.accept();\n                // \u5c06socket\u4ea4\u7ed9RequestExecute\u5904\u7406\n                RequestExecute requestExecute = new RequestExecute(socket);\n                System.out.println(\"\u5f00\u542f\u7ebf\u7a0b\uff1a\" + requestExecute.getName());\n                System.out.println(\"\u5f53\u524d\u6d3b\u8dc3\u7ebf\u7a0b\u6570\u91cf\uff1a\" + Thread.activeCount());\n                requestExecute.start();\n            }\n            serverSocket.close();\n            mainFrame.printLog(\"======\u670d\u52a1\u505c\u6b62\u76d1\u542c======\");\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/Java%E5%AE%9E%E7%8E%B0http%E6%9C%8D%E5%8A%A1%E5%99%A8/#mainframe","title":"MainFrame","text":"<pre><code>package com.lee.httpd.ul;\n\nimport com.lee.httpd.data.Data;\nimport com.lee.httpd.service.Server;\n\nimport javax.swing.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.io.File;\nimport java.io.IOException;\nimport java.net.Socket;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\n\n/**\n * @author lhl\n */\npublic class MainFrame extends JFrame {\n    private JLabel labPort;\n    private JLabel labInfo;\n    private JLabel labPath;\n    private JTextField textPort;\n    private JTextField textPath;\n    private JButton btnStartServer;\n    private JButton btnPushServer;\n    private JButton btnStopServer;\n    private JButton btnSetPath;\n    private JPanel contentPanel;\n    private JScrollPane scrollPane;\n    private JTextArea textArea;\n\n    public MainFrame() {\n        init();\n    }\n\n    private void init() {\n        this.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n        this.setBounds(200, 200, 800, 500);\n        this.setTitle(\"\u6d77\u9f99Http\u670d\u52a1\u5668\");\n        this.setResizable(false);\n\n        // \u8bbe\u7f6e\u4e3b\u9762\u677f\n        contentPanel = new JPanel();\n        contentPanel.setLayout(null);\n        this.setContentPane(contentPanel);\n\n        // \u8bbe\u7f6e\u7aef\u53e3\n        labPort = new JLabel(\"\u76d1\u542c\u7aef\u53e3\u53f7\");\n        labPort.setBounds(15, 10, 100, 25);\n        contentPanel.add(labPort);\n\n        textPort = new JTextField(\"8888\");\n        textPort.setBounds(120, 10, 150, 25);\n        contentPanel.add(textPort);\n\n        // \u4e09\u4e2a\u6309\u94ae\n        btnStartServer = new JButton(\"\u542f\u52a8\u670d\u52a1\");\n        btnStartServer.setBounds(300, 10, 120, 25);\n        btnStartServer.setEnabled(true);\n        contentPanel.add(btnStartServer);\n\n        btnPushServer = new JButton(\"\u6682\u505c\u670d\u52a1\");\n        btnPushServer.setBounds(440, 10, 120, 25);\n        btnPushServer.setEnabled(false);\n        contentPanel.add(btnPushServer);\n\n        btnStopServer = new JButton(\"\u505c\u6b62\u670d\u52a1\");\n        btnStopServer.setBounds(580, 10, 120, 25);\n        btnStopServer.setEnabled(false);\n        contentPanel.add(btnStopServer);\n\n        // \u8d44\u6e90\u8def\u5f84\u8bbe\u7f6e\n        labPath = new JLabel(\"\u8d44\u6e90\u8def\u5f84\u8bbe\u7f6e\uff1a\");\n        // \u8bbe\u7f6e\u9ed8\u8ba4\u8def\u5f84\n        labPath.setText(Data.resoursePath);\n        labPath.setBounds(15, 45, 100, 25);\n        contentPanel.add(labPath);\n\n        textPath = new JTextField(\"\");\n        textPath.setBounds(130, 45, 500, 25);\n        contentPanel.add(textPath);\n\n        btnSetPath = new JButton(\"\u8bbe\u7f6e\u8d44\u6e90\u4f4d\u7f6e\");\n        btnSetPath.setBounds(640, 45, 120, 25);\n        contentPanel.add(btnSetPath);\n\n        // \u63a7\u5236\u53f0\n        textArea = new JTextArea(\"--\u63a7\u5236\u53f0--\\r\\n\");\n        textArea.setLineWrap(true);\n        scrollPane = new JScrollPane(textArea,\n                JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,\n                JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS);\n        scrollPane.setBounds(15, 80, 770, 350);\n        contentPanel.add(scrollPane);\n\n        // \u8bbe\u7f6e\u8d44\u6e90\u6587\u4ef6\u5939\u6309\u94ae\u4e8b\u4ef6\n        btnSetPath.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                JFileChooser jFileChooser = new JFileChooser();\n                jFileChooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);\n                int op = jFileChooser.showDialog(MainFrame.this, \"\u8bf7\u9009\u62e9\u9759\u6001\u8d44\u6e90\u6587\u4ef6\u5939\");\n                if (op == JFileChooser.APPROVE_OPTION) {\n                    File file = jFileChooser.getSelectedFile();\n                    // \u53d6\u51fa\u7edd\u5bf9\u8def\u5f84\n                    String filePath = file.getAbsolutePath();\n                    textPath.setText(filePath);\n                    // \u4fee\u6539Data\u4e2d\u7684\u9759\u6001\u53d8\u91cf\n                    Data.resoursePath = filePath;\n                }\n            }\n        });\n\n        // \u542f\u52a8\u6309\u94ae\u4e8b\u4ef6\n        btnStartServer.addActionListener(e -&gt; {\n            Data.isRun = true;\n            Data.isPush = false;\n            // \u83b7\u53d6\u7aef\u53e3\n            int port = 8888;\n            try {\n                port = new Integer(textPort.getText().trim());\n            } catch (Exception ex) {\n                ex.printStackTrace();\n            }\n            // \u521b\u5efaserver\n            Server server = new Server(port, MainFrame.this);\n            new Thread(server).start();\n            // \u4fee\u6539\u6309\u94ae\u7684\u72b6\u6001\n            btnStartServer.setEnabled(false);\n            btnStopServer.setEnabled(true);\n            btnPushServer.setEnabled(true);\n        });\n\n        // \u6682\u505c\u6309\u94ae\u4e8b\u4ef6\n        btnPushServer.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                if (Data.isPush) {\n                    Data.isPush = false;\n                    btnPushServer.setText(\"\u6682\u505c\u670d\u52a1\");\n                    printLog(\"\u670d\u52a1\u5668\u7ee7\u7eed\u8fd0\u884c\");\n                }\n                else {\n                    Data.isPush = true;\n                    btnPushServer.setText(\"\u7ee7\u7eed\u8fd0\u884c\");\n                    printLog(\"\u670d\u52a1\u5668\u6682\u505c\u8fd0\u884c\");\n                }\n            }\n        });\n\n        // \u505c\u6b62\u6309\u94ae\u4e8b\u4ef6\n        btnStopServer.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                Data.isRun = false;\n                Data.isPush = false;\n\n                // \u83b7\u53d6\u7aef\u53e3\n                int port = 8888;\n                try {\n                    port = new Integer(textPort.getText().trim());\n                } catch (Exception ex) {\n                    ex.printStackTrace();\n                }\n                // \u4fee\u6539\u540e\uff0c\u670d\u52a1\u4ecd\u4f1a\u76d1\u542c\u4e00\u6b21\u3002\u6b64\u65f6\u4e3b\u52a8\u5411\u670d\u52a1\u5668\u53d1\u9001\u4e00\u6b21\u8bf7\u6c42\uff0c\u7ed3\u675f\u7a0b\u5e8f\u3002\n                try {\n                    // \u6b64\u65f6\u4f1a\u81ea\u5b9a\u8bf7\u6c42\u4e00\u6b21\u670d\u52a1\u5668\n                    Socket socket = new Socket(\"127.0.0.1\", port);\n                    socket.close();\n                } catch (IOException ex) {\n                    ex.printStackTrace();\n                }\n\n                // \u4fee\u6539\u6309\u94ae\u72b6\u6001\n                btnStartServer.setEnabled(true);\n                btnPushServer.setEnabled(false);\n                btnStopServer.setEnabled(false);\n            }\n        });\n\n        this.setVisible(true);\n    }\n\n    public void printLog(final String msg) {\n        new Thread() {\n            @Override\n            public void run() {\n                String date = new SimpleDateFormat(\"[yyyy0MM0dd HH:mm:ss]\").format(new Date());\n                // \u53ef\u4f7f\u7528StringBuffer\u4f18\u5316\n                String info  = textArea.getText() + date + msg + \"\\r\\n\";\n                textArea.setText(info);\n            }\n        }.start();\n    }\n\n    public static void main(String[] args) {\n        MainFrame mainFrame = new MainFrame();\n    }\n}\n\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/K8S/","title":"K8S","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/Linux%E7%89%B9%E6%AE%8A%E6%96%87%E4%BB%B6%E5%A4%B9%E7%9A%84%E4%BD%9C%E7%94%A8/","title":"Linux\u7279\u6b8a\u6587\u4ef6\u5939\u7684\u4f5c\u7528","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/Linux%E7%89%B9%E6%AE%8A%E6%96%87%E4%BB%B6%E5%A4%B9%E7%9A%84%E4%BD%9C%E7%94%A8/#binusrbin","title":"/bin\uff0c/usr/bin\uff0c","text":"<ol> <li> <p>\u5b58\u653e\u6307\u4ee4\uff0c\u901a\u5e38\u6240\u6709\u7528\u6237\u90fd\u53ef\u4ee5\u7528\u3002</p> </li> <li> <p>\u540e\u671f\u5b89\u88c5\u7684\u6307\u4ee4\u5b58\u653e\u5728<code>usr/bin</code>\u4e2d\u3002</p> </li> </ol>"},{"location":"%E5%85%B6%E4%BB%96/Linux%E7%89%B9%E6%AE%8A%E6%96%87%E4%BB%B6%E5%A4%B9%E7%9A%84%E4%BD%9C%E7%94%A8/#sbinusrsbin","title":"/sbin\uff0c/usr/sbin","text":"<ol> <li>\u5b58\u653e\u6307\u4ee4\uff0c\u901a\u5e38\u53ea\u6709\u8d85\u7ea7\u7528\u6237\u90fd\u53ef\u4ee5\u7528\u3002</li> <li>\u540e\u671f\u5b89\u88c5\u7684\u6307\u4ee4\u5b58\u653e\u5728<code>usr/sbin</code>\u4e2d\u3002</li> </ol>"},{"location":"%E5%85%B6%E4%BB%96/Linux%E7%89%B9%E6%AE%8A%E6%96%87%E4%BB%B6%E5%A4%B9%E7%9A%84%E4%BD%9C%E7%94%A8/#usrshare-usrlocalshare","title":"/usr/share  /usr/local/share","text":"<p>Any program or package which contains or requires data that doesn't need to be modified should store that data in <code>/usr/share</code> (or <code>/usr/local/share</code>, if installed locally).</p>"},{"location":"%E5%85%B6%E4%BB%96/Maven/","title":"Maven\u7684\u57fa\u672c\u4f7f\u7528","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/Maven/#_1","title":"\u524d\u8a00","text":"<p>\u6211\u4e2a\u4eba\u901a\u5e38\u4f7f\u7528idea\u81ea\u5e26\u7684maven\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u53bb\u5b98\u7f51\u4e0a\u4e13\u95e8\u4e0b\u8f7dmaven\u3002</p> <p>\u636e\u6211\u76ee\u524d\u6240\u77e5\uff0cmaven\u7684\u4f5c\u7528\u5c31\u662f\u5e2e\u6211\u4eec\u6258\u7ba1jar\u5305\u3002maven\u901a\u5e38\u4f1a\u5728\u786c\u76d8\u4e0a\u4e13\u95e8\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u5939\uff0c\u7528\u4e8e\u7ba1\u7406\u9700\u8981\u4f7f\u7528\u7684jar\u5305\u3002\u8fd9\u6837\u4e00\u6765\uff0c\u7535\u8111\u4e0a\u7684\u6240\u6709\u9879\u76ee\u90fd\u53ef\u4ee5\u5171\u4eab\u8fd9\u4e9bjar\u5305\u3002\u975e\u5e38\u65b9\u4fbf\u3002</p> <p>\u5728\u4f7f\u7528\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u9700\u8981\u53bbmaven\u7684\u8fdc\u7a0b\u4ed3\u5e93\u4e0b\u8f7dmaven\u5305\uff0c\u800c\u66f4\u6362\u56fd\u5185maven\u955c\u50cf\u4f1a\u63d0\u9ad8maven\u4e0b\u8f7djar\u5305\u7684\u901f\u5ea6\u3002\u53ef\u53bb\u767e\u5ea6\u641c\u7d22\u5982\u4f55\u66f4\u6362maven\u955c\u50cf\u6e90\u3002</p> <p>\u5728idea\u4e2d\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5c06\u9700\u8981\u7684\u4f9d\u8d56\u5bfc\u5165pom\u6587\u4ef6\u4e2d\uff0cmaven\u5c31\u4f1a\u81ea\u52a8\u5e2e\u6211\u4eec\u4e0b\u8f7d\u76f8\u5173\u7684\u5305\uff0c\u5e76\u5b58\u653e\u5728\u672c\u5730maven\u4ed3\u5e93\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/Nginx%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/","title":"Nginx\u4f7f\u7528\u624b\u518c","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/Nginx%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_1","title":"\u5199\u5728\u524d\u9762","text":""},{"location":"%E5%85%B6%E4%BB%96/Nginx%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#nginx_1","title":"\u5b89\u88c5\u5e76\u64cd\u4f5cnginx","text":"<ol> <li>\u76f4\u63a5\u4f7f\u7528docker\u5bb9\u5668\u5173\u4e8enginx\u7684\u955c\u50cf\u3002</li> </ol> <p>\u200b   \u5efa\u8bae\u5728docker\u5bb9\u5668\u4e2d\u5b89\u88c5nginx\uff0c\u5e76\u8ba9docker\u5bb9\u5668\u5185\u90e8\u7684\u4e00\u4e2a\u7aef\u53e3\u548c\u5916\u90e8\u670d\u52a1\u5668\u7684\u4e00\u4e2a\u7aef\u53e3\u5bf9\u5e94\u3002</p> <p>\u53c2\u8003\u5982\u4e0b\u547d\u4ee4\uff1a</p> <p><code>docker run -it -p 8888:80 --name ng nginx /bin/bash</code></p> <ol> <li>\u57fa\u4e8eLinux Ubuntu\u7cfb\u7edf\u3002</li> <li>\u4f7f\u7528root\u6743\u9650\u7684\u7528\u6237\u3002</li> <li>\u66f4\u65b0\u8f6f\u4ef6\u5305\uff1a<code>apt-get update</code>\u3002</li> <li>\u5b89\u88c5Nginx\uff1a<code>apt-get install -y nginx</code>\u3002</li> <li>\u542f\u52a8nginx\u670d\u52a1\uff1a<code>service nginx start</code>\u6216<code>systemctl start nginx</code>\u3002\uff08\u521d\u59cb\u5316\u7684docker\u5bb9\u5668\u4e2d\u6ca1\u6709<code>systemctl</code>\u547d\u4ee4\uff09</li> <li>\u67e5\u770bnginx\u662f\u5426\u5de5\u4f5c\uff1a<code>service nginx status</code>\u6216<code>systemctl status nginx</code>\u3002</li> <li>\u505c\u6b62\u8fd0\u884cnginx\uff1a<code>service nginx stop</code>\u6216<code>systemctl stop nginx</code>\u3002</li> <li> <p>\u5220\u9664nginx\uff1a</p> <ol> <li>\u505c\u6b62nginx\u670d\u52a1\uff1a<code>service stop nginx</code>\u3002</li> <li>\u5220\u9664nginx\u5305\uff1a<code>apt-get remove -y nginx</code>\u3002</li> <li>\u5220\u9664nginx\u7684\u914d\u7f6e\u6587\u4ef6\uff1a<code>apt-get purge nginx</code>\u3002</li> <li>\u5220\u9664Nginx\u4f9d\u8d56\u9879\u548c\u65e0\u7528\u7684\u8f6f\u4ef6\u5305\uff1a<code>apt-get autoremove -y</code></li> <li>\u5982\u679c\u60f3\u5220\u6389nginx\u7684\u65e5\u5fd7\uff0c\u6267\u884c<code>rm -rf /var/log/nginx</code>\u3002</li> </ol> </li> <li> <p>\u57fa\u4e8eCentOS\u7cfb\u7edf\u3002</p> </li> <li>\u4f7f\u7528root\u6743\u9650\u7684\u7528\u6237\u767b\u5f55\u3002</li> <li>\u5b89\u88c5 EPEL \u8f6f\u4ef6\u6e90\uff0c\u8fd9\u662f\u4e00\u4e2a CentOS \u7b2c\u4e09\u65b9\u8f6f\u4ef6\u6e90\uff0c\u53ef\u4ee5\u63d0\u4f9b\u66f4\u591a\u7684\u8f6f\u4ef6\u5305\u3002\u5728\u7ec8\u7aef\u4e2d\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a<code>yum install epel-release</code>\u3002\uff08\u7531\u4e8eEPEL\u6bd4\u8f83\u6162\uff0c\u5efa\u8bae\u6539\u6210\u56fd\u5185\u7684\u955c\u50cf\u6e90\uff09</li> <li>\u5b89\u88c5nginx\uff1a<code>yum install nginx</code>\u3002</li> <li>\u5b89\u88c5\u5b8c\u6210\u540e\uff0c\u542f\u52a8 Nginx \u670d\u52a1\u5e76\u8bbe\u7f6e\u5f00\u673a\u81ea\u542f\u3002\u5728\u7ec8\u7aef\u4e2d\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a<code>systemctl start nginx</code>\u548c<code>systemctl enable nginx</code>\u3002</li> <li> <p>\u9a8c\u8bc1 Nginx \u662f\u5426\u5df2\u6210\u529f\u5b89\u88c5\u5e76\u6b63\u5728\u8fd0\u884c\u3002\u5728\u6d4f\u89c8\u5668\u4e2d\u8f93\u5165\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u6216\u57df\u540d\uff0c\u5982\u679c\u53ef\u4ee5\u770b\u5230 Nginx \u7684\u6b22\u8fce\u9875\u9762\uff0c\u8bf4\u660e Nginx \u5df2\u7ecf\u6210\u529f\u5b89\u88c5\u5e76\u8fd0\u884c\u3002</p> </li> <li> <p>Windows\u4e2d\u5b89\u88c5\u3002</p> </li> <li> <p>\u4e0b\u8f7dNGINX\uff1a</p> <ol> <li>\u5b98\u7f51\u4e0b\u8f7dNGINX\u7684Windows\u7248\u672c\u3002</li> <li>\u4e0b\u8f7d\u5e76\u89e3\u538b\u540e\uff0c\u4e0d\u5efa\u8bae\u914d\u7f6e\u73af\u5883\u53d8\u91cf\uff0c\u5efa\u8bae\u6bcf\u6b21\u5230NGINX\u7684\u89e3\u538b\u76ee\u5f55\u4f7f\u7528cmd\u3002</li> </ol> </li> <li> <p>\u4f7f\u7528NGINX\uff1a</p> <ol> <li>\u542f\u52a8\uff1a<code>start nginx</code></li> <li>\u5904\u7406\u5b8c\u5f53\u524d\u7684\u8bf7\u6c42\u540e\u5173\u95ed\uff1a<code>nginx -s quit</code>\u3002</li> <li>\u7acb\u5373\u5173\u95ed\uff1a<code>nginx -s stop</code>\u3002</li> <li>\u4fee\u6539\u5b8c\u914d\u7f6e\u6587\u4ef6\u540e\u91cd\u65b0\u52a0\u8f7d\uff1a<code>nginx -s reload</code></li> <li>\u67e5\u770bNGINX\u7248\u672c\uff1a<code>nginx -v</code></li> </ol> </li> </ol>"},{"location":"%E5%85%B6%E4%BB%96/Nginx%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#nginx_2","title":"nginx\u8bf7\u6c42\u6d41\u7a0b","text":""},{"location":"%E5%85%B6%E4%BB%96/Nginx%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#nginx_3","title":"nginx\u7684\u914d\u7f6e","text":"<ol> <li>\u4f7f\u7528docker\u62c9\u53d6nginx\u955c\u50cf\uff0c\u5e76\u8fd0\u884c\u5bb9\u5668\u540e\uff0c\u8f93\u5165<code>whereis nginx</code>\u67e5\u770b\u5173\u4e8enginx\u7684\u5730\u5740\u3002</li> <li>nginx\u7684\u914d\u7f6e\u6587\u4ef6\u901a\u5e38\u5728<code>/etc/nginx</code>\u4e0b\u3002</li> </ol>"},{"location":"%E5%85%B6%E4%BB%96/Nginx%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#etcnginxnginxconf","title":"/etc/nginx/nginx.conf","text":"<p>\u4e0b\u9762\u662fnginx\u7684\u9ed8\u8ba4\u914d\u7f6e\uff0c\u4e4b\u540e\u6211\u4f1a\u89e3\u91ca\u6bcf\u4e2a\u5b57\u6bb5\u7684\u4f5c\u7528\u3002</p> <pre><code>user www-data;\nworker_processes auto;\npid /run/nginx.pid;\ninclude /etc/nginx/modules-enabled/ *.conf; # \u6ce8\u610f/* \u4e4b\u95f4\u6ca1\u6709\u7a7a\u683c\n\nevents {\n        worker_connections 768;\n        # multi_accept on;\n}\n\nhttp {\n\n        ##\n        # Basic Settings\n        ##\n\n        sendfile on;\n        tcp_nopush on;\n        tcp_nodelay on;\n        keepalive_timeout 65;\n        types_hash_max_size 2048;\n        # server_tokens off;\n\n        # server_names_hash_bucket_size 64;\n        # server_name_in_redirect off;\n\n        include /etc/nginx/mime.types;\n        default_type application/octet-stream;\n\n        ##\n        # SSL Settings\n        ##\n\n        ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE\n        ssl_prefer_server_ciphers on;\n\n        ##\n        # Logging Settings\n        ##\n\n        access_log /var/log/nginx/access.log;\n        error_log /var/log/nginx/error.log;\n\n        ##\n        # Gzip Settings\n        ##\n\n        gzip on;\n\n        # gzip_vary on;\n        # gzip_proxied any;\n        # gzip_comp_level 6;\n        # gzip_buffers 16 8k;\n        # gzip_http_version 1.1;\n        # gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\n\n        ##\n        # Virtual Host Configs\n        ##\n\n        include /etc/nginx/conf.d/*.conf;\n        include /etc/nginx/sites-enabled/*;\n}\n</code></pre> <ol> <li> <p><code>worker_processes</code>\uff1a\u6700\u5f00\u59cb\u5f00\u542f\u7684\u5de5\u4f5c\u8fdb\u7a0b\u6570\u91cf\u3002\u5efa\u8bae\u4e00\u4e2acpu\u5185\u6838\u5bf9\u5e94\u4e00\u4e2a\u8fdb\u7a0b\u3002</p> </li> <li> <p><code>events { worker_connections 768 }</code>\uff1a\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u5bf9\u5e94\u591a\u5c11\u4e2a\u8fde\u63a5\u3002</p> </li> <li> <p>http\u6a21\u5757</p> </li> </ol> <p>```nginx    http {        # \u5f15\u5165\u5916\u90e8\u914d\u7f6e\u6587\u4ef6        # \u5f53\u4e00\u4e2a\u5ba2\u6237\u7aef\u5411 Nginx \u670d\u52a1\u5668\u8bf7\u6c42\u4e00\u4e2a\u8d44\u6e90\u65f6\uff0cNginx \u4f1a\u68c0\u67e5\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u5e76\u4f7f\u7528 mime.types \u6587\u4ef6\u4e2d\u7684\u6620\u5c04\u5173\u7cfb\u6765\u786e\u5b9a\u54cd\u5e94\u7c7b\u578b\u3002        # \u5982\u679c\u627e\u4e0d\u5230\u5339\u914d\u7684\u6620\u5c04\uff0c\u5219\u9ed8\u8ba4\u60c5\u51b5\u4e0b Nginx \u4f1a\u8fd4\u56de application/octet-stream\uff0c\u8fd9\u901a\u5e38\u610f\u5473\u7740\u5ba2\u6237\u7aef\u65e0\u6cd5\u5904\u7406\u54cd\u5e94\u7684\u6570\u636e\u3002        include /etc/nginx/mime.types;</p> <pre><code>   # \u5982\u679c\u6587\u4ef6\u7c7b\u578b\u4e0d\u5305\u542b\u5728 include \u4e2d\uff0c\u5219\u4ee5\u8be5\u65b9\u5f0f\u5c06\u6570\u636e\u8fd4\u56de\u7ed9\u6d4f\u89c8\u5668\n   default_type application/octet-stream;\n\n   # \u542f\u7528 sendfile \u53ef\u4ee5\u663e\u8457\u63d0\u9ad8 Nginx \u7684\u6027\u80fd\uff0c\u4f46\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u53ef\u80fd\u4f1a\u5bfc\u81f4\u95ee\u9898\u3002\n   sendfile on;\n\n   # \u5f53\u542f\u7528 keep-alive \u8fde\u63a5\u65f6\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u5728\u540c\u4e00\u8fde\u63a5\u4e0a\u53d1\u51fa\u591a\u4e2a\u8bf7\u6c42\uff0c\u800c\u65e0\u9700\u6bcf\u6b21\u90fd\u5efa\u7acb\u65b0\u7684 TCP \u8fde\u63a5\u3002\n   # \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c keepalive_timeout \u8bbe\u7f6e\u5f97\u592a\u5c0f\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u5ba2\u6237\u7aef\u5728\u53d1\u9001\u4e0b\u4e00\u4e2a\u8bf7\u6c42\u4e4b\u524d\u5fc5\u987b\u91cd\u65b0\u5efa\u7acb\u8fde\u63a5\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bf9\u6027\u80fd\u4ea7\u751f\u8d1f\u9762\u5f71\u54cd\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u5982\u679c keepalive_timeout \u8bbe\u7f6e\u5f97\u592a\u5927\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u670d\u52a1\u5668\u8d44\u6e90\u88ab\u957f\u65f6\u95f4\u5360\u7528\uff0c\u4ece\u800c\u9650\u5236\u5e76\u53d1\u8fde\u63a5\u6570\u3002\n   # \u5355\u4f4d\u662f \u79d2\n   keepalive_timeout 65;\n\n   # \u5f15\u5165\u5916\u90e8\u914d\u7f6e\u6587\u4ef6\n   # conf.d \u76ee\u5f55\u4e0b\u5b58\u653enginx\u7684\u5168\u5c40\u914d\u7f6e\u6587\u4ef6\uff0c\u4f8b\u5982\u670d\u52a1\u5668\u6027\u80fd\u3001\u5b89\u5168\u6027\u3001SSL \u8bc1\u4e66\u7b49\u76f8\u5173\u7684\u8bbe\u7f6e\u3002\n   include /etc/nginx/conf.d/*.conf;\n\n   # sites-enabled \u76ee\u5f55\u4e0b\u5b58\u653e Nginx \u865a\u62df\u4e3b\u673a\u7684\u914d\u7f6e\u6587\u4ef6\u3002\u8fd9\u4e9b\u865a\u62df\u4e3b\u673a\u914d\u7f6e\u6587\u4ef6\u901a\u5e38\u7528\u4e8e\u6307\u5b9a\u4e0d\u540c\u7684\u7f51\u7ad9\u6216\u5e94\u7528\u7a0b\u5e8f\uff0c\u5305\u62ec\u5176\u57df\u540d\u3001\u7aef\u53e3\u3001SSL \u8bc1\u4e66\u3001\u53cd\u5411\u4ee3\u7406\u7b49\u76f8\u5173\u7684\u8bbe\u7f6e\u3002\n   include /etc/nginx/sites-enabled/*;\n</code></pre> <p>}    ```</p> <ol> <li>\u865a\u62df\u4e3b\u673a\u7684\u914d\u7f6e</li> </ol> <p>\u5728 Nginx \u4e2d\uff0c\u865a\u62df\u4e3b\u673a\u662f\u4e00\u79cd\u7528\u4e8e\u7ba1\u7406\u591a\u4e2a\u7f51\u7ad9\u6216\u5e94\u7528\u7a0b\u5e8f\u7684\u65b9\u5f0f\u3002\u901a\u8fc7\u865a\u62df\u4e3b\u673a\uff0c\u7ba1\u7406\u5458\u53ef\u4ee5\u5728\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\u8fd0\u884c\u591a\u4e2a\u7f51\u7ad9\u6216\u5e94\u7528\u7a0b\u5e8f\uff0c\u6bcf\u4e2a\u7f51\u7ad9\u6216\u5e94\u7528\u7a0b\u5e8f\u90fd\u6709\u81ea\u5df1\u7684\u57df\u540d\u3001SSL \u8bc1\u4e66\u3001\u53cd\u5411\u4ee3\u7406\u7b49\u914d\u7f6e\u3002</p> <p>\u865a\u62df\u4e3b\u673a\u7684\u914d\u7f6e\u4ece <code>server</code> \u5757\u5f00\u59cb\u3002\u6bcf\u4e2a <code>server</code> \u5757\u8868\u793a\u4e00\u4e2a\u865a\u62df\u4e3b\u673a\u7684\u914d\u7f6e\u3002\u5728 <code>server</code> \u5757\u4e2d\uff0c\u7ba1\u7406\u5458\u53ef\u4ee5\u6307\u5b9a\u865a\u62df\u4e3b\u673a\u7684\u76d1\u542c\u7aef\u53e3\u3001\u57df\u540d\u3001SSL \u8bc1\u4e66\u7b49\u76f8\u5173\u7684\u8bbe\u7f6e\u3002\u4f8b\u5982\uff1a</p> <p>```nginx    # \u5bf9\u5e94\u4e00\u4e2a\u865a\u62df\u4e3b\u673a    server {        # \u4e0d\u540c\u865a\u62df\u4e3b\u673a\u7684\u76d1\u542c \u7aef\u53e3+\u4e3b\u673a\u540d \u4e0d\u80fd\u5b8c\u5168\u4e00\u6837        listen 80;     # \u914d\u7f6e \u57df\u540d\u6216\u4e3b\u673a\u540d (\u53ef\u8bbe\u7f6e\u591a\u4e2a)        server_name localhost myhost;</p> <pre><code>   # \u5bf9\u4e8ehttp://lihailong.vip/doc/index.html\u6765\u8bf4\n   # url\u662fhttp://lihailong.vip/doc/index.html\n   # uri\u662f/doc/index.html\n   # location \u7528\u4e8e\u5339\u914duri\n   # \u5f53\u6536\u5230uri\u4e3a /data/index.html \u7684\u8bf7\u6c42\u540e\uff0c\u4f1a\u5230/wwwroot/html\u76ee\u5f55\u4e0b\u67e5\u627e\n   location /data/ {\n       # root\u6307\u5b9a\u4e86\u5bf9\u5916\u66b4\u9732\u8d44\u6e90\u7684\u6839\u76ee\u5f55\n       root /wwwroot/html;\n       # index\u6307\u5b9a\u4e86`/data/`\u8def\u5f84\u6620\u5c04\u7684\u5185\u90e8\u6587\u4ef6\n       index index.html index.htm;\n   }\n</code></pre> <p>}    ```</p>"},{"location":"%E5%85%B6%E4%BB%96/Nginx%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_2","title":"\u865a\u62df\u4e3b\u673a\u7684\u539f\u7406\u548c\u6848\u4f8b","text":"<p>\u5728 Nginx \u4e2d\uff0c\u865a\u62df\u4e3b\u673a\u7684\u5b9e\u73b0\u662f\u57fa\u4e8e\u201cserver\u201d\u5757\u548c\u201cserver_name\u201d\u6307\u4ee4\u7684\u3002\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\uff0c\u6bcf\u4e2a\u865a\u62df\u4e3b\u673a\u90fd\u6709\u4e00\u4e2a\u72ec\u7acb\u7684\u201cserver\u201d\u5757\uff0c\u5176\u4e2d\u5b9a\u4e49\u4e86\u8be5\u865a\u62df\u4e3b\u673a\u7684\u76f8\u5173\u914d\u7f6e\u4fe1\u606f\u3002\u6bcf\u4e2a\u201cserver\u201d\u5757\u90fd\u6709\u4e00\u4e2a\u201cserver_name\u201d\u6307\u4ee4\uff0c\u7528\u4e8e\u6307\u5b9a\u8be5\u865a\u62df\u4e3b\u673a\u8981\u54cd\u5e94\u7684\u57df\u540d\u6216IP\u5730\u5740\u3002</p> <p>\u5f53 Nginx \u63a5\u6536\u5230\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u65f6\uff0c\u4f1a\u6839\u636e\u8bf7\u6c42\u7684\u4e3b\u673a\u5934\uff08host header\uff09\u5b57\u6bb5\u5339\u914d\u76f8\u5e94\u7684\u865a\u62df\u4e3b\u673a\u3002\u5339\u914d\u89c4\u5219\u662f\u6309\u7167\u914d\u7f6e\u6587\u4ef6\u4e2d\u201cserver\u201d\u5757\u51fa\u73b0\u7684\u987a\u5e8f\u8fdb\u884c\u7684\u3002\u5177\u4f53\u8fc7\u7a0b\u5982\u4e0b\uff1a</p> <ol> <li>\u5f53 Nginx \u63a5\u6536\u5230\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u65f6\uff0c\u4f1a\u6839\u636e\u8bf7\u6c42\u7684\u4e3b\u673a\u5934\u5b57\u6bb5\u786e\u5b9a\u8bf7\u6c42\u7684\u76ee\u6807\u865a\u62df\u4e3b\u673a\u3002</li> <li>Nginx \u4f1a\u6309\u7167\u914d\u7f6e\u6587\u4ef6\u4e2d\u201cserver\u201d\u5757\u51fa\u73b0\u7684\u987a\u5e8f\uff0c\u9010\u4e00\u68c0\u67e5\u6bcf\u4e2a\u201cserver\u201d\u5757\u7684\u201cserver_name\u201d\u6307\u4ee4\uff0c\u76f4\u5230\u627e\u5230\u4e0e\u8bf7\u6c42\u7684\u4e3b\u673a\u5934\u5339\u914d\u7684\u201cserver_name\u201d\u6307\u4ee4\u3002</li> <li>\u4e00\u65e6\u627e\u5230\u5339\u914d\u7684\u201cserver\u201d\u5757\uff0cNginx \u5c31\u4f1a\u4f7f\u7528\u8be5\u201cserver\u201d\u5757\u7684\u914d\u7f6e\u4fe1\u606f\u6765\u5904\u7406\u5ba2\u6237\u7aef\u8bf7\u6c42\u3002</li> </ol> <p>\u4f8b\u5982\uff0c\u5047\u8bbe\u6211\u4eec\u5728 Nginx \u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u5b9a\u4e49\u4e86\u4e24\u4e2a\u865a\u62df\u4e3b\u673a\uff0c\u5206\u522b\u5bf9\u5e94\u4e24\u4e2a\u57df\u540d\uff1awww.example.com \u548c blog.example.com\u3002\u914d\u7f6e\u6587\u4ef6\u5982\u4e0b\uff1a</p> <pre><code>http {\n  server {\n    listen 80;\n    server_name www.example.com;\n    root /var/www/html/www.example.com;\n  }\n\n  server {\n    listen 80;\n    server_name blog.example.com;\n    root /var/www/html/blog.example.com;\n  }\n}\n</code></pre> <p>\u5f53\u6709\u7528\u6237\u8bbf\u95ee www.example.com \u65f6\uff0cNginx \u4f1a\u6839\u636e\u8bf7\u6c42\u7684\u4e3b\u673a\u5934\u5b57\u6bb5\u5339\u914d\u5230\u7b2c\u4e00\u4e2a\u201cserver\u201d\u5757\uff0c\u5e76\u4f7f\u7528\u8be5\u5757\u7684\u914d\u7f6e\u4fe1\u606f\u6765\u5904\u7406\u8bf7\u6c42\u3002\u800c\u5f53\u6709\u7528\u6237\u8bbf\u95ee blog.example.com \u65f6\uff0cNginx \u4f1a\u5339\u914d\u5230\u7b2c\u4e8c\u4e2a\u201cserver\u201d\u5757\uff0c\u5e76\u4f7f\u7528\u8be5\u5757\u7684\u914d\u7f6e\u4fe1\u606f\u6765\u5904\u7406\u8bf7\u6c42\u3002</p> <p>\u8fd9\u6837\uff0cNginx \u5c31\u53ef\u4ee5\u901a\u8fc7\u865a\u62df\u4e3b\u673a\u6765\u5b9e\u73b0\u5728\u540c\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\u6258\u7ba1\u591a\u4e2a\u57df\u540d\u6216\u7ad9\u70b9\u7684\u529f\u80fd\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/Nginx%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_3","title":"\u914d\u7f6e \u6b63/\u53cd \u5411\u4ee3\u7406","text":""},{"location":"%E5%85%B6%E4%BB%96/Nginx%E5%8E%9F%E7%90%86/","title":"Nginx\u539f\u7406","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/Nginx%E5%8E%9F%E7%90%86/#_1","title":"\u53cd\u5411\u4ee3\u7406","text":"<ol> <li>\u6b63\u5411\u4ee3\u7406\uff1a\u4ee3\u7406\u670d\u52a1\u5668\u201c\u4ee3\u66ff\u201d\u5ba2\u6237\u7aef\uff0c\u8bbf\u95ee\u670d\u52a1\u5668\u3002\u6b64\u65f6\u6211\u4eec\u53ef\u5c06\u4ee3\u7406\u670d\u52a1\u5668\u5f53\u505a\u5ba2\u6237\u7aef\u3002</li> </ol> <ol> <li>\u53cd\u5411\u4ee3\u7406\uff1a\u4ee3\u7406\u670d\u52a1\u5668\u201c\u4ee3\u66ff\u201d\u670d\u52a1\u5668\uff0c\u54cd\u5e94\u5ba2\u6237\u7aef\u3002\u6b64\u65f6\u6211\u4eec\u53ef\u5c06\u4ee3\u7406\u670d\u52a1\u5668\u5f53\u505a\u670d\u52a1\u5668\u3002</li> </ol>"},{"location":"%E5%85%B6%E4%BB%96/Nginx%E5%8E%9F%E7%90%86/#_2","title":"\u8d1f\u8f7d\u5747\u8861","text":""},{"location":"%E5%85%B6%E4%BB%96/Nginx%E5%8E%9F%E7%90%86/#_3","title":"\u52a8\u9759\u5206\u79bb","text":""},{"location":"%E5%85%B6%E4%BB%96/Nodejs%E6%95%99%E7%A8%8B/","title":"Nodejs\u6559\u7a0b","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/Nodejs%E6%95%99%E7%A8%8B/#node","title":"\u4ec0\u4e48\u662fNode","text":"<p>Node.js \u4e0d\u662f\u7f16\u7a0b\u8bed\u8a00\uff0c\u4e5f\u4e0d\u662fJS\u5e93\uff0c\u800c\u662fJS\u7684\u8fd0\u884c\u73af\u5883\uff0c\u662fJS\u5728\u6d4f\u89c8\u5668\u4ee5\u5916\u7684\u7b2c\u4e8c\u4e2a\u8fd0\u884c\u73af\u5883\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/SSL%E8%AF%81%E4%B9%A6/","title":"SSL\u8bc1\u4e66","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/SSL%E8%AF%81%E4%B9%A6/#ssl_1","title":"SSL\u8bc1\u4e66\u7684\u4f5c\u7528","text":"<p>SSL\u8bc1\u4e66\u7528\u4e8e\u52a0\u5bc6HTTP\u534f\u8bae\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/SSL%E8%AF%81%E4%B9%A6/#ssl_2","title":"SSL\u8bc1\u4e66\u7684\u5206\u7c7b","text":"<ol> <li>\u57df\u540d\u578bSSL\u8bc1\u4e66\uff08DV SSL\uff09</li> </ol> <p>\u8bc1\u4e66\u9881\u5e03\u673a\u6784\u4ec5\u5bf9\u57df\u540d\u7684\u6240\u6709\u8005\u8fdb\u884c\u5728\u7ebf\u68c0\u67e5\u3002\u901a\u5e38\u662f\u9a8c\u8bc1\u57df\u540d\u4e0b\u67d0\u4e2a\u6307\u5b9a\u6587\u4ef6\u7684\u5185\u5bb9\uff0c\u6216\u8005\u9a8c\u8bc1\u4e0e\u57df\u540d\u76f8\u5173\u7684\u67d0\u6761 TXT \u8bb0\u5f55\u3002</p> <ol> <li>\u4f01\u4e1a\u578bSSL\u8bc1\u4e66\uff08OV SSL\uff09</li> </ol>"},{"location":"%E5%85%B6%E4%BB%96/Windows10%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/","title":"Windows10\u73af\u5883\u53d8\u91cf","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/Windows10%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/#_1","title":"\u73af\u5883\u53d8\u91cf\u662f\u4ec0\u4e48","text":"<p>\u73af\u5883\u53d8\u91cf\u662f\u5728\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u4e00\u4e2a\u5177\u6709\u7279\u5b9a\u540d\u5b57\u7684\u5bf9\u8c61\uff0c\u5b83\u5305\u542b\u4e86\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u5e94\u7528\u7a0b\u5e8f\u5c06\u4f7f\u7528\u5230\u7684\u4fe1\u606f\u3002\u7b80\u5355\u6765\u8bf4\uff0c\u53ef\u4ee5\u5c06\u73af\u5883\u53d8\u91cf\u770b\u505a\u662f\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u3002</p> <p>\u73af\u5883\u53d8\u91cf\u7c7b\u4f3c\u8fd9\u79cd\u7ed3\u6784\uff1a</p> <pre><code>\u53d8\u91cf\u540d\uff1aCLion\n\u503c\uff1aD:\\Program Files\\JetBrains\\CLion 2022.3\\bin\n\n\u53d8\u91cf\u540d\uff1aPath\n\u503c\uff1aD:\\Program Files\\Git\\cmd;D:\\Program Files\\nodejs\n</code></pre> <p>\u503c\u53ef\u4ee5\u5bf9\u5e94\u591a\u4e2a\u8def\u5f84\uff0c\u4e0d\u540c\u8def\u5f84\u7528<code>;</code>\u9694\u5f00\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/Windows10%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/#_2","title":"\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u548c\u7528\u6237\u73af\u5883\u53d8\u91cf\u7684\u5173\u7cfb","text":"<p>\u5728Windows\u7cfb\u7edf\u4e0b\uff0c\u901a\u5e38\u4e0d\u4f1a\u51fa\u73b0\u591a\u7528\u6237\u7684\u60c5\u51b5\uff0c\u6240\u4ee5\u7528\u6237\u73af\u5883\u53d8\u91cf\u548c\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u901a\u5e38\u6df7\u7528\u3002\u6211\u5efa\u8bae\u4e00\u76f4\u91c7\u7528\u7cfb\u7edf\u73af\u5883\u53d8\u91cf\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/Windows10%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/#path","title":"\u73af\u5883\u53d8\u91cf\u548cPath\u7684\u5173\u7cfb","text":"<p>Path\u662f\u73af\u5883\u53d8\u91cf\u4e2d\u7684\u4e00\u79cd\u3002\u73af\u5883\u53d8\u91cf\u9664\u4e86Path\uff0c\u8fd8\u6709TEMP\uff0cwindir\u7b49\uff0c\u7528\u6237\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u73af\u5883\u53d8\u91cf\u3002</p> <p>Path\u662f\u5f88\u91cd\u8981\u7684\u4e00\u4e2a\u73af\u5883\u53d8\u91cf\uff0ccmd\u8fd0\u884c\u7684\u6307\u4ee4\u4f1a\u5728\u5f53\u524d\u8def\u5f84\u548cPath\u4e0b\u7684\u8def\u5f84\u67e5\u627e\u53ef\u6267\u884c\u6587\u4ef6\u3002\u6211\u4eec\u5e38\u8bf4\u7684\u201c\u914d\u73af\u5883\u53d8\u91cf\u201d\u5b9e\u9645\u4e0a\u5c31\u662f\u7ed9Path\u53d8\u91cf\u6dfb\u52a0\u8def\u5f84 \uff0c\u4ee5\u4fbf\u5728cmd\u4e0b\u8fd0\u884c\u8fd9\u4e9b\u8def\u5f84\u4e0b\u7684\u6587\u4ef6\u3002</p> <p>Path\u4e2d\u6dfb\u52a0\u522b\u7684\u73af\u5883\u53d8\u91cf\u9700\u8981\u7528%%\u62ec\u8d77\u6765\u3002\u6bd4\u5982\u6211\u4eec\u6709\u4e00\u4e2a\u73af\u5883\u53d8\u91cf\uff0c\u540d\u79f0\u662fJAVA_HOME\uff0c\u6211\u4eec\u5728Path\u4e2d</p>"},{"location":"%E5%85%B6%E4%BB%96/fiddler%E2%80%94%E2%80%94%E2%80%9C%E7%A0%B4%E8%A7%A3%E2%80%9DHTTPS/","title":"fiddler\u2014\u2014\u201c\u7834\u89e3\u201dHTTPS.md","text":""},{"location":"%E5%85%B6%E4%BB%96/fiddler%E2%80%94%E2%80%94%E6%B5%81%E9%87%8F%E5%8A%AB%E6%8C%81/","title":"Fiddler\u2014\u2014\u6d41\u91cf\u52ab\u6301","text":""},{"location":"%E5%85%B6%E4%BB%96/fiddler%E2%80%94%E2%80%94%E6%B5%81%E9%87%8F%E5%8A%AB%E6%8C%81/#markdown","title":"\u6b22\u8fce\u4f7f\u7528Markdown","text":""},{"location":"%E5%85%B6%E4%BB%96/fiddler%E2%80%94%E2%80%94%E6%B5%81%E9%87%8F%E5%8A%AB%E6%8C%81/#_1","title":"\u65b0\u589e\u56fe\u7247\u4e0a\u4f20\u529f\u80fd","text":"<p>\u73b0\u5728\u53ef\u4ee5\u5728\u6587\u7ae0\u4e2d\u63d2\u5165\u56fe\u7247\uff01</p> <ul> <li>\u60a8\u53ef\u4ee5\u63d2\u5165\u5916\u94fe\u56fe\u7247\uff0c\u6216\u4e0a\u4f20\u672c\u5730\u56fe\u7247\u5230\u6587\u6863\u4e2d\u3002</li> <li>\u53ef\u4e0a\u4f20\u7684\u5355\u5f20\u56fe\u7247\u6700\u592720M\uff0c\u652f\u6301PNG\u3001JPG\u683c\u5f0f\u3002</li> <li>\u82e5\u6709\u5176\u4ed6\u7591\u95ee\uff0c\u6b22\u8fce\u54a8\u8be2\u5b98\u7f51\u5728\u7ebf\u5ba2\u670d\u3002</li> </ul>"},{"location":"%E5%85%B6%E4%BB%96/fiddler%E2%80%94%E2%80%94%E6%B5%81%E9%87%8F%E5%8A%AB%E6%8C%81/#welcome-to-the-markdown","title":"Welcome to the Markdown","text":""},{"location":"%E5%85%B6%E4%BB%96/fiddler%E2%80%94%E2%80%94%E6%B5%81%E9%87%8F%E5%8A%AB%E6%8C%81/#new-feature-insert-pictures-in-your-articles-now","title":"New feature! Insert pictures in your articles now!","text":"<p>You can insert pictures from external links, or upload ones.</p> <p>The maximum size of the picture to upload is 20M. PNG and JPG are better.</p> <p>Have any other questions, please contact our official customer service.</p>"},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/","title":"GIT\u4f7f\u7528\u624b\u518c","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_1","title":"\u8bbe\u7f6e\u7b7e\u540d","text":"<p>\u8bbe\u7f6e\u5168\u5c40\u7b7e\u540d\uff1a</p> <pre><code>git config --global user.name '\u674e\u6587'\ngit config --global user.email 208827435@qq.com\n</code></pre> <p>\u91cd\u7f6e\u7b7e\u540d\uff1a</p> <pre><code>git config --unset --global user.name\ngit config --global user.name '\u674e\u8010\u601d'\n</code></pre> <p>\u5c55\u793agitconfig\u5185\u5bb9</p> <p>\u65b9\u6cd5\u4e00\uff1a</p> <pre><code>cd ~/\ncat .gitconfig\n</code></pre> <p>\u65b9\u6cd5\u4e8c\uff1a</p> <pre><code>git config --list\n</code></pre> <p>\u5177\u4f53\u4fe1\u606f\u6211\u4e5f\u770b\u4e0d\u61c2\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_2","title":"\u672c\u5730\u63d0\u4ea4","text":""},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_3","title":"\u63d0\u4ea4\u5230\u6682\u5b58\u533a","text":"<p>\u63d0\u4ea4\u5355\u72ec\u7684\u6587\u4ef6</p> <pre><code>git add filename\n</code></pre> <p>\u63d0\u4ea4\u6240\u6709\u7684\u6587\u4ef6</p> <pre><code>git add .\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_4","title":"\u63d0\u4ea4\u5230\u672c\u5730\u5e93","text":"<pre><code>git commit\n</code></pre> <p>\u7136\u540e\u8fdb\u5165vim\u7f16\u8f91\u5668\uff0c\u6dfb\u52a0\u6ce8\u91ca\u5373\u53ef\u3002</p> <p>\u6216\u8005\uff1a</p> <pre><code>git commit -m '\u4fee\u6539\u4fe1\u606f'\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_5","title":"\u6bd4\u8f83","text":""},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_6","title":"\u5de5\u4f5c\u533a\u4e0e\u6682\u5b58\u533a","text":"<p>\u5047\u5b9a\u521b\u5efa\u4e86main.cpp</p> <p>\u6bd4\u8f83main.cpp\u5728\u5de5\u4f5c\u533a\u4e0e\u6682\u5b58\u533a\u7684\u5dee\u522b\uff1a</p> <pre><code>git diff main.cpp  //\u6bd4\u8f83main.cpp\u5728\u5de5\u4f5c\u533a\u4e0e\u6682\u5b58\u533a\u7684\u5dee\u522b\ngit diff  //\u6bd4\u8f83\u6240\u6709\u6587\u4ef6\u5728\u5de5\u4f5c\u533a\u4e0e\u6682\u5b58\u533a\u7684\u5dee\u522b\n</code></pre> <p>\u3010\u6ce8\u610f\u3011main.cpp\u5fc5\u987b\u662f\u5df2\u8ffd\u8e2a\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_7","title":"\u6682\u5b58\u533a\u4e0e\u672c\u5730\u5e93","text":"<pre><code>git diff --staged main.cpp  //staged\u8868\u793a\u5df2\u6682\u5b58\ngit diff --staged  //\u6bd4\u8f83\u6240\u6709\u6682\u5b58\u533a\u548c\u672c\u5730\u5e93\u7684\u6587\u4ef6\u7684\u533a\u522b\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_8","title":"\u6bd4\u8f83\u5206\u652f","text":"<pre><code>git diff &lt;b_01&gt; &lt;b_02&gt;  //\u6bd4\u8f83\u4e24\u4e2a\u5206\u652f\u7684\u5dee\u522b\ngit diff &lt;b_01&gt; &lt;b_02&gt; file  //\u6bd4\u8f83\u4e24\u4e2a\u5206\u652f\u7684\u67d0\u4e2a\u6587\u4ef6\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_9","title":"\u5feb\u901f\u64cd\u4f5c","text":""},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_10","title":"\u91cd\u547d\u540d\u6587\u4ef6","text":"<p>\u6bd4\u5982\u5b58\u5728\u6587\u4ef6file_1\uff0c\u5c06\u5176\u6539\u540d\u4e3afile_2\u540e\u3002\u5728git\u4e2d\u5e94\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c</p> <pre><code>git rm file_1\ngit add file_2\n</code></pre> <p>\u91cd\u547d\u540d\u6210\u529f\uff01</p> <p>\u8fd8\u6709\u53e6\u4e00\u79cd\u65b9\u6cd5</p> <pre><code>git mv doc_1 doc_2\n</code></pre> <p>\u5c06doc_1\u6539\u540d\u4e3adoc_2\u3002\u4f9d\u6b21\u7c7b\u63a8\uff0cgit\u4e2d\u5220\u9664\u3001\u6539\u540d\u6587\u4ef6\u53ea\u9700\u8981\u5728\u5e38\u89c4\u7684linux\u547d\u4ee4\u884c\u524d\u6dfb\u52a0git\u5373\u53ef\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_11","title":"\u5220\u9664\u6587\u4ef6","text":"<pre><code>git rm file -r\n</code></pre> <p>\u3010\u6ce8\u610f\u3011git rm, git mv\u64cd\u4f5c\u7684\u90fd\u662f\u5de5\u4f5c\u533a\u548c\u6682\u5b58\u533a\u7684\u6587\u4ef6\u3002</p> <p>\u5982\u679cgit rm\u540e\u60f3\u6062\u590d\u6539\u6587\u4ef6\uff0c\u5e94\u8be5\u8fd9\u6837\u505a\uff08\u6839\u636egit\u63d0\u793a\u7684\u6307\u4ee4\u4e5f\u80fd\u505a\u5230\uff09\uff1a</p> <pre><code>git restore --staged &lt;filename&gt;\ngit restore &lt;filename&gt;\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_12","title":"\u6062\u590d\u6587\u4ef6","text":"<p>\u5bf9\u4e8e\u5df2\u8ffd\u8e2a\u7684\u6587\u4ef6\uff0c\u5982\u679c\u53ea\u5220\u9664\u4e86\u5de5\u4f5c\u533a\uff0c\u6682\u5b58\u533a\u548c\u672c\u5730\u5e93\u90fd\u6ca1\u5220\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u505a\uff1a\uff08\u901a\u8fc7git status\u63d0\u9192\u4e5f\u53ef\u4ee5\uff09</p> <pre><code>git restore &lt;file&gt;  //\u76f8\u5f53\u4e8e\u5c06\u5de5\u4f5c\u533a\u56de\u6eaf\u5230\u4e0a\u4e00\u4e2a\u7248\u672c\n</code></pre> <p>\u5982\u679c\u5df2\u7ecf\u5220\u9664\u4e86\u5de5\u4f5c\u533a\u548c\u6682\u5b58\u533a\u7684\u6587\u4ef6\uff0c\u4f46\u662f\u672c\u5730\u5e93\u6ca1\u6709\u4fee\u6539\uff0c\u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u6307\u4ee4\uff08\u53ef\u901a\u8fc7git status\u7684\u63d0\u9192\u64cd\u4f5c\uff09\uff1a</p> <pre><code>git restore --staged &lt;file&gt;     //\u5c06\u6682\u5b58\u533a\u6587\u4ef6\u6062\u590d\ngit restore &lt;file&gt;      //\u5c06\u5de5\u4f5c\u533a\u7684\u6587\u4ef6\u6062\u590d\n</code></pre> <p>\u5982\u679c\u4e09\u4e2a\u533a\u57df\u90fd\u5220\u9664\u4e86\uff0c\u90a3\u4e48\u53ea\u80fd\u56de\u9000\u5230\u4ee5\u524d\u7684\u7248\u672c\uff0c\u5177\u4f53\u6307\u4ee4\u5982\u4e0b\uff1a</p> <pre><code>git checkout HEAD^      //\u56de\u9000\u5230\u4e0a\u4e00\u4e2a\u7248\u672c\ngit checkout HEAD^^     //\u56de\u9000\u5230\u4e0a\u4e24\u4e2a\u7248\u672c\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_13","title":"\u56de\u6eaf","text":""},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#git-revert","title":"git revert","text":"<p>\u6848\u4f8b\uff1a\u603b\u5171\u63d0\u4ea4\u4e865\u6b21\uff0c\u53d1\u73b0\u7b2c3\u6b21\u63d0\u4ea4\u6709\u95ee\u9898\u3002\u6211\u4eec\u9700\u8981\u64a4\u9500\u7b2c\u4e09\u6b21\u63d0\u4ea4\uff0c\u8be5\u600e\u4e48\u505a\uff1f</p> <pre><code>git revert 34affk   //\u7b2c3\u6b21\u63d0\u4ea4\u7684\u54c8\u5e0c\u503c\u662f34affk\n</code></pre> <p>\u3010\u6ce8\u610f\u3011\u5982\u679c\u7b2c3\u6b21\u63d0\u4ea4\u7684\u6587\u4ef6\u4f1a\u5370\u8c61\u5230\u540e\u9762\u7684\u6587\u4ef6\uff0c\u90a3\u4e48git\u4f1a\u63d0\u9192\u4f60\u3002</p> <p>\u5982\u679cgit revert\u67d0\u4e2a\u7248\u672c\u540e\uff0c\u60f3\u64a4\u9500\u8fd9\u6b21revert\uff0c\u4f7f\u7528git reset --hard &lt;\u5730\u5740&gt; \u5373\u53ef\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#git-reset","title":"git reset","text":"<p>\u6848\u4f8b\uff1a\u603b\u5171\u63d0\u4ea4\u4e865\u6b21\uff0c\u53d1\u73b0\u7b2c3\u6b21\u4ee5\u540e\u7684\u6240\u4ee5\u63d0\u4ea4\u90fd\u6709\u95ee\u9898\u3002\u6211\u4eec\u9700\u8981\u64a4\u9500\u5230\u7b2c\u4e09\u6b21\u63d0\u4ea4\uff0c\u8be5\u600e\u4e48\u505a\uff1f</p> <pre><code>git reset --(type) 34affk   //\u7b2c3\u6b21\u63d0\u4ea4\u7684\u54c8\u5e0c\u503c\u662f34affk\n</code></pre> <p>\u5176\u4e2dtype\u53ef\u4ee5\u662fhard\uff0cmixed\u548csoft\u3002</p> <p>hard\u8868\u793a\u5c06\u4e09\u4e2a\u533a\u57df\u7684\u6587\u4ef6\u90fd\u56de\u6eaf\u5230\u539f\u6765\u7684\u4f4d\u7f6e\u3002</p> <p>mixed\u8868\u793a\u5c06\u672c\u5730\u5e93\u548c\u4ee3\u7801\u533a\u7684\u6587\u4ef6\u56de\u6eaf\u5230\u539f\u6765\u7684\u4f4d\u7f6e\u3002</p> <p>soft\u8868\u793a\u5c06\u672c\u5730\u5e93\u7684\u6587\u4ef6\u56de\u6eaf\u5230\u539f\u6765\u7684\u4f4d\u7f6e\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_14","title":"\u5206\u652f","text":""},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_15","title":"\u521b\u5efa\u53ca\u5207\u6362","text":"<pre><code>git branch &lt;\u5206\u652f\u540d&gt;  //\u521b\u5efa\u5206\u652f\n</code></pre> <pre><code>git checkout &lt;\u5206\u652f\u540d&gt;  //\u5207\u6362\u5230\u8be5\u5206\u652f\n</code></pre> <p>\u67e5\u770b\u4e24\u4e2a\u5206\u652f\u4e4b\u95f4\u7684\u5dee\u522b\uff1a</p> <pre><code>git diff &lt;branch_1&gt; &lt;branch_2&gt;\n</code></pre> <pre><code>git diff &lt;branch_1&gt; &lt;branch_2&gt; filename\n</code></pre> <p>\u3010BUT\u3011\u6709\u70b9\u770b\u4e0d\u61c2\u4fe1\u606f</p> <p>\u5408\u5e76\u5206\u652f\uff1a</p> <pre><code>//\u5148\u8df3\u5230master\u5206\u652f\ngit merge &lt;branch_name&gt;\n</code></pre> <p>\u7ed3\u679c\uff1a\u5982\u679c\u663e\u793afastforward\uff0c\u5219\u8868\u660e\u88ab\u5408\u5e76\u7684\u5206\u652f\u3010\u5b8c\u5168\u9886\u5148\u3011\u4e3b\u5206\u652f\u3002</p> <p>\u5408\u5e76\u65f6\u4ea7\u751f\u51b2\u7a81\uff1a</p> <p>\u653e\u5f03\u5408\u5e76\uff1a</p> <pre><code>git merge --abort\n</code></pre> <p>\u7ee7\u7eed\u5408\u5e76\uff1a\u8fdb\u5165\u4ea7\u751f\u51b2\u7a81\u7684\u6587\u4ef6\uff0c\u6839\u636e\u63d0\u793a\u4fe1\u606f\u4fee\u6539\u597d\u4ee5\u540e\u9000\u51fa\u3002\u518dgit add git commit\u3002</p> <p>\u3010\u7591\u95ee\u3011\u4e3a\u4ec0\u4e48\u5408\u5e76\u5206\u652f\u540e\u4e24\u4e2a\u5206\u652f\u4efb\u7136\u6709\u533a\u522b\uff1f</p> <p>\u5206\u652f\u91cd\u547d\u540d</p> <pre><code>git branch -m &lt;old_branch_name&gt; &lt;new_branch_name&gt;\n</code></pre> <p>\u5220\u9664\u5206\u652f</p> <pre><code>git branch -d &lt;branch_name&gt;\n</code></pre> <p>\u67e5\u770b\u5206\u652f\uff1a</p> <p>\u67e5\u770b\u6240\u6709\u5206\u652f\uff1a</p> <pre><code>git branch -a\n</code></pre> <p>\u67e5\u770b\u672c\u5730\u6240\u6709\u5206\u652f\uff1a</p> <pre><code>git branch\n</code></pre> <p>\u67e5\u770b\u8fdc\u7a0b\u5206\u652f\uff1a</p> <pre><code>git branch -r\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_16","title":"\u6682\u5b58","text":"<p>git stash</p> <p>\u4f7f\u7528\u573a\u666f\uff1a\u5047\u5b9a\u6709a, b\u4e24\u4e2a\u6587\u4ef6\u3002\u5f53\u524d\u5df2\u7ecf\u4fee\u6539\u4e86a\u6587\u4ef6\uff0c\u4f46\u8fd8\u6ca1\u6709\u63d0\u4ea4\u5230\u6682\u5b58\u533a\u3002\u7a81\u7136\u63a5\u5230\u901a\u77e5\uff0c\u9700\u8981\u4fdd\u6301a\u6587\u4ef6\u539f\u5c01\u4e0d\u52a8\u5e76\u4e14\u5148\u5c06b\u6587\u4ef6add, commit\uff0c\u7136\u540e\u624d\u80fd\u63d0\u4ea4a\u6587\u4ef6\u3002</p> <p>\u8fd9\u65f6\u9700\u8981\u5c06a\u6587\u4ef6stash\uff1a</p> <pre><code>git stash save '\u63cf\u8ff0\u4fe1\u606f'  //\u63cf\u8ff0\u4fe1\u606f\u53ef\u4ee5\u4e0d\u6dfb\u52a0\n</code></pre> <p>\u3010\u6ce8\u610f\u3011\u672c\u6b21stash\u662f\u6682\u5b58\u6240\u6709\u6ca1\u6709add\u7684\u6587\u4ef6\u3002</p> <p>\u5982\u679c\u6587\u4ef6a\u8fd8\u6ca1\u6709\u88ab\u8ffd\u8e2a\uff0c\u4f46\u662f\u4ecd\u7136\u9700\u8981\u6682\u5b58\u5b83\uff0c\u8fd9\u65f6\u4f7f\u7528\uff1a</p> <pre><code>git stash save '\u63cf\u8ff0\u4fe1\u606f' -u  //u\u8868\u793auntracked\n</code></pre> <p>\u5982\u679c\u60f3stash\u90e8\u5206\u6587\u4ef6\uff0c\u9700\u8981\u6267\u884c\u5982\u4e0b\u6307\u4ee4\uff1a</p> <pre><code>git stash -p\n</code></pre> <p>\u7136\u540e\u4f9d\u6b21\u51b3\u5b9a\u662f\u5426stash\u8be5\u6587\u4ef6\u3002</p> <p>\u63d0\u4ea4\u5b8c\u6bd5\u540e\u9700\u8981\u5c06\u7f13\u5b58\u7684\u6587\u4ef6\uff08\u4e0d\u5728\u6682\u5b58\u533a\uff09\u6062\u590d\u5230\u5de5\u4f5c\u533a\uff1a</p> <pre><code>git stash pop stash@&lt;\u7248\u672c&gt;\n</code></pre> <p>\u5982\u679c\u60f3\u6062\u590d\u6700\u8fd1\u4e00\u4e2a\u7248\u672c\u7684stash\uff1a</p> <pre><code>git stash pop\n</code></pre> <p>\u3010\u6ce8\u610f\u3011pop\u540estash list\u4e2d\u5c31\u518d\u4e5f\u6ca1\u6709\u6539\u7248\u672c\u7684\u4fdd\u5b58\u4fe1\u606f\u3002\u7528\u53e6\u4e00\u79cd\u65b9\u6cd5\u4e5f\u53ef\u4ee5\u6062\u590d\u3002</p> <pre><code>git stash apply stash@&lt;\u7248\u672c\u53f7&gt;\n//\u6216\u8005\u6062\u590d\u4e0a\u4e00\u4e2a\u7248\u672c\ngit stash apply\n</code></pre> <p>\u4f7f\u7528apply\u540estash\u5217\u8868\u4e2d\u8fd8\u4fdd\u7559\u7740\u4fe1\u606f\u3002</p> <p>\u5c55\u793a\u5f53\u524dstash\u7684\u7248\u672c\uff1a</p> <pre><code>git stash list\n</code></pre> <p>\u5982\u4f55\u60f3\u67e5\u770b\u67d0\u4e2a\u7248\u672cstash\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u4f7f\u7528\uff1a</p> <pre><code>git stash show -p stash@{\u7248\u672c\u53f7}\n</code></pre> <p>\u5982\u679c\u4e0d\u5199\u672b\u5c3e\u7684stash@{\u7248\u672c\u53f7}\uff0c\u5219\u9ed8\u8ba4\u67e5\u770b\u4e0a\u4e00\u4e2a\u7248\u672cstash\u7684\u5185\u5bb9\u3002</p> <p>\u5982\u679c\u4e0d\u60f3\u4f7f\u7528stash\u4e2d\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u5c06\u5b83drop\u6389\uff1a</p> <pre><code>git stash drop stash@{\u7248\u672c\u53f7}\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_17","title":"\u67e5\u770b\u65e5\u5fd7","text":"<p>\u524d\u7f00\uff1agit log</p> <p>\u6bcf\u6761\u4fe1\u606f\u663e\u793a\u4e3a\u4e00\u884c\uff1a</p> <pre><code>git log --oneline\n</code></pre> <p>\u663e\u793a\u6700\u8fd1\u76846\u6761\u4fe1\u606f\uff1a</p> <pre><code>git log -6\n</code></pre> <p>\u663e\u793a\u793a\u610f\u56fe\uff1a</p> <pre><code>git log --graph\n</code></pre> <p>\u67e5\u770b\u67d0\u4e2a\u6587\u4ef6\u7684\u4fee\u6539\u4fe1\u606f\uff1a</p> <pre><code>git log --grep='\u6587\u4ef6\u540d'  //grep\u8868\u793a\u6b63\u5219\u8868\u8fbe\u5f0f\n</code></pre> <p>\u7edf\u8ba1\u4e00\u6bb5\u65f6\u95f4\u7684\u63d0\u4ea4</p> <pre><code>git log --after='2021.9.1 00:00:00' --before='2021.9.1 15:20:00'  \n//\u65e5\u671f\u548c\u65f6\u95f4\u4e4b\u95f4\u7528\u7a7a\u683c\u8fde\u63a5\n//\u65e5\u671f\u4e5f\u53ef\u4ee5\u7528 - \u8fde\u63a5\n//before\u3001after\u7684\u503c\u53ef\u4ee5\u662ftoday,1 week, 3days\u7b49\u6bd4\u8f83\u4eba\u6027\u5316\u7684\u8bcd\n</code></pre> <p>\u67e5\u770b\u6240\u4ee5\u63d0\u4ea4\u8bb0\u5f55\uff1a</p> <pre><code>git reflog\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_18","title":"\u8bbe\u7f6e\u522b\u540d","text":"<p>\u4fee\u6539~/\u4e0b\u7684.gitconfig\u6216\u8005~/\u4e0b\u7684bash_profile\u5373\u53ef\u3002\u5177\u4f53\u8fc7\u7a0b\u767e\u5ea6\u641c\u7d22\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_19","title":"\u4e0d\u8ddf\u8e2a\u6587\u4ef6\uff08\u6211\u4e5f\u4e0d\u592a\u61c2\uff09","text":"<p>\u5168\u5c40\u8303\u56f4\u7c7b\u5ffd\u7565\u7684\u6587\u4ef6\uff08\u6211\u4e0d\u592a\u4f1a\uff09</p> <p>\u5c40\u90e8\u533a\u57df\u5ffd\u7565\u6587\u4ef6\uff1a</p> <p>\u5148\u8fdb\u5165\u5c40\u90e8\u533a\u57df\u7684\u6839\u76ee\u5f55</p> <pre><code>//\u6dfb\u52a0.gitignore\u6587\u4ef6\uff1a\ngit vim .gitignore\n//\u5728.gitignore\u6587\u4ef6\u4e2d\u8f93\u5165\u4e0d\u8ddf\u8e2a\u7684\u6587\u4ef6\u540d\n*.py    //\u4e0d\u8ddf\u8e2a\u6240\u6709python\u6587\u4ef6\n</code></pre> <p>\u3010\u6ce8\u610f\u3011git\u4e0d\u4f1a\u5ffd\u7565\u5df2\u7ecf\u8ddf\u8e2a\u540e\u7684\u6587\u4ef6</p> <p>git ignore\u8be6\u89e3</p>"},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_20","title":"\u5efa\u7acb\u8fdc\u7a0b\u8fde\u63a5","text":"<p>\u5efa\u7acb\u8fde\u63a5\uff1a</p> <pre><code>git remote add origin \u7f51\u5740\n</code></pre> <p>\u67e5\u770b\u8fdc\u7a0b\u5730\u5740\uff1a</p> <pre><code>git remote -v\n</code></pre> <p>\u63a8\u9001\u5230\u8fdc\u7a0b\u5730\u5740\uff1a</p> <pre><code>git push -u origin &lt;\u5206\u652f\u540d&gt;  //\u5206\u652f\u540d\u4e00\u822c\u662fmaster\n</code></pre> <p>\u3010\u91cd\u8981\u3011-u\u7684\u76ee\u7684\u662f\u76d1\u6d4b\u8fdc\u7a0b\u5e93\u7684\u5206\u652f\u662f\u5426\u53d1\u751f\u53d8\u5316\u3002</p> <p>\u5220\u9664\u8fdc\u7a0b\u8fde\u63a5\uff1a</p> <pre><code>git remote rm '\u5206\u652f\u540d'  //\u4f8b\u5982\u5206\u652f\u540d\u662f\u2018origin\u2019\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/git%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_21","title":"\u514b\u9686","text":"<p>\u4ece\u8fdc\u7a0b\u5e93\u4e0b\u8f7d\u5230\u672c\u5730\uff1a</p> <pre><code>git clone '\u8fdc\u7a0b\u7f51\u5740' '\u6587\u4ef6\u540d'\n</code></pre> <p>\u5c06\u8fdc\u7a0b\u6587\u4ef6\u514b\u9686\u5230\u5f53\u524d\u76ee\u5f55\u7684\u67d0\u4e2a\u6587\u4ef6\u91cc\u9762\u3002\uff08\u53ef\u4ee5\u4e0d\u8f93\u5165\u6587\u4ef6\u540d\uff09</p>"},{"location":"%E5%85%B6%E4%BB%96/kitex/","title":"kitex\u6559\u7a0b","text":"<p>[toc]</p> <p>\u53bb\u5b98\u7f51\uff0c\u5b89\u88c5\u3002\uff08\u6ce8\u610f\u914d\u7f6ego proxy\uff09</p> <p>\u7f16\u5199IDL\u4ee3\u7801\uff1a</p> <p>\u6587\u4ef6\u540d\uff1aecho.thrift</p> <p>\u5185\u5bb9\uff1a</p> <pre><code>namespace go api\n\nstruct Request {\n    1: string message\n}\n\nstruct Response {\n    1: string message\n}\n\nservice MyService {\n    Response echo(1: Request req)\n}\n</code></pre> <p>\u7528kitex\u751f\u6210\u4ee3\u7801\uff1a</p> <pre><code>\u8bed\u6cd5\uff1a\nkitex -module \u968f\u4fbf\u5199\u4e00\u4e2amodule\u540d -service \u670d\u52a1\u540d thrift\u6587\u4ef6\n\u6848\u4f8b\uff1a\nkitex -module mykitex -service MyService hello.thrift\n</code></pre> <p>\u751f\u6210\u5982\u4e0b\u6587\u4ef6</p> <pre><code>.\n|-- build.sh\n|-- go.mod\n|-- handler.go\n|-- kitex.yaml\n|-- kitex_gen\n|   `-- api\n|       |-- hello.go\n|       |-- k-consts.go\n|       |-- k-hello.go\n|       `-- myservice\n|           |-- client.go\n|           |-- invoker.go\n|           |-- myservice.go\n|           `-- server.go\n|-- main.go\n`-- script\n    `-- bootstrap.sh\n</code></pre> <p>kitex\u57fa\u672c\u4f7f\u7528\uff1a</p> <p>\u5b9e\u73b0handler.go\u6587\u4ef6\u4e2d\u7684\u4ee3\u7801</p> <pre><code></code></pre>"},{"location":"%E5%85%B6%E4%BB%96/scp%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6/","title":"Scp\u4f20\u8f93\u6587\u4ef6","text":""},{"location":"%E5%85%B6%E4%BB%96/scp%E4%BC%A0%E8%BE%93%E6%96%87%E4%BB%B6/#_1","title":"\u6848\u4f8b","text":"<p>\u4ece\u4e00\u4e2a\u5b9e\u4f8b\u89e3\u6790scp\u7684\u4f7f\u7528\uff1a</p> <pre><code>scp -r ~/tmp root@xxx.xxx.xxx.xxx:/home\n</code></pre> <p><code>scp</code>\uff1a\u901a\u8fc7scp\u4f20\u8f93\u6587\u4ef6\u3002</p> <p><code>-r</code>\uff1a\u4f20\u8f93\u6587\u4ef6\u5939\u3002</p> <p><code>~/tmp</code>\uff1a\u4f20\u8f93\u7684\u6587\u4ef6\u5939\u8def\u5f84\u4e3a<code>~</code>\uff0c\u540d\u79f0\u662f<code>tmp</code>\u3002</p> <p><code>root@xxx.xxx.xxx.xxx</code>\uff1aroot\u662f\u6307\u670d\u52a1\u5668\u7684\u7528\u6237\uff0c@\u540e\u9762\u7684\u662f\u670d\u52a1\u5668\u7684\u516c\u7f51ip\u3002</p> <p><code>:/home</code>\uff1a\u76ee\u7684\u5730\u5740\u662f<code>/home</code>\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/ssh%E6%93%8D%E4%BD%9C%E6%89%8B%E5%86%8C/","title":"SSH\u64cd\u4f5c\u624b\u518c","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/thrift%E6%95%99%E7%A8%8B/","title":"thrift\u6559\u7a0b","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/thrift%E6%95%99%E7%A8%8B/#thrift_1","title":"\u4e0b\u8f7dthrift","text":"<p>\u53bb\u5b98\u7f51\u4e0b\u8f7dthrift\uff0cWindows\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d<code>.exe</code>\u6587\u4ef6\uff0c\u7136\u540e\u4fee\u6539\u6587\u4ef6\u540d\u4e3a<code>thrift.exe</code>\uff0c\u5e76\u914d\u7f6e\u73af\u5883\u53d8\u91cf\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/thrift%E6%95%99%E7%A8%8B/#idl","title":"\u7f16\u5199IDL\u6587\u4ef6","text":"<p>\u53c2\u8003\u5b98\u65b9\u6559\u7a0b\uff0c\u5373\u53ef\u7f16\u5199IDL\u4ee3\u7801\u3002\uff08\u771f\u7684\u5f88\u7b80\u5355\uff01\uff09</p>"},{"location":"%E5%85%B6%E4%BB%96/thrift%E6%95%99%E7%A8%8B/#_1","title":"\u751f\u6210\u6307\u5b9a\u8bed\u8a00\u7684\u6587\u4ef6","text":"<pre><code># \u683c\u5f0f\uff1athrift -gen \u8bed\u8a00 \u6587\u4ef6\u540d.thrift\n# \u6848\u4f8b\u5982\u4e0b\nthrift -gen java text.thrift\nthrift -gen go text.thrift\nthrift -gen py text.thrift\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/thrift%E6%95%99%E7%A8%8B/#_2","title":"\u91cd\u8981\u6587\u4ef6","text":"<p>Iface\uff1a\u670d\u52a1\u7aef\u901a\u8fc7\u5b9e\u73b0Iface\u63a5\u53e3\uff0c\u60f3\u5ba2\u6237\u7aef\u63d0\u4f9b\u5177\u4f53\u7684\u540c\u6b65\u4e1a\u52a1\u903b\u8f91\u3002</p> <p>AsyncIface\uff1a\u670d\u52a1\u7aef\u901a\u8fc7\u5b9e\u73b0Iface\u63a5\u53e3\uff0c\u60f3\u5ba2\u6237\u7aef\u63d0\u4f9b\u5177\u4f53\u7684\u5f02\u6b65\u4e1a\u52a1\u903b\u8f91\u3002</p> <p>Client\uff1a\u5ba2\u6237\u7aef\u901a\u8fc7Client\u7684\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u4ee5\u540c\u6b65\u7684\u65b9\u5f0f\u8bbf\u95ee\u670d\u52a1\u7aef\u63d0\u4f9b\u7684\u670d\u52a1\u65b9\u6cd5\u3002</p> <p>AsyncClient\uff1a\u5ba2\u6237\u7aef\u901a\u8fc7Client\u7684\u5b9e\u4f8b\u5bf9\u8c61\uff0c\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u8bbf\u95ee\u670d\u52a1\u7aef\u63d0\u4f9b\u7684\u670d\u52a1\u65b9\u6cd5\u3002</p> <p>IDL\u8bed\u6cd5</p> <p>\u57fa\u672c\u7c7b\u578b</p> Type Desc JAVA GO i8 \u6709\u7b26\u53f7\u76848\u4f4d\u6574\u6570 byte int8 i16 \u6709\u7b26\u53f7\u768416\u4f4d\u6574\u6570 short int16 i32 \u6709\u7b26\u53f7\u768432\u4f4d\u6574\u6570 int int32 i64 \u6709\u7b26\u53f7\u768464\u4f4d\u6574\u6570 long int64 double 64\u4f4d\u6d6e\u70b9\u6570 double float64 bool \u5e03\u5c14\u503c boolean bool string \u6587\u672c\u5b57\u7b26\u4e32(UTF-8\u7f16\u7801\u683c\u5f0f) java.lang.String string <p>\u96c6\u5408\u5bb9\u5668</p> Type Desc Java Go list \u5143\u7d20\u6709\u5e8f\u5217\u8868\uff0c\u5141\u8bb8\u91cd\u590d java.util.List []T set \u5143\u7d20\u65e0\u5e8f\u5217\u8868\uff0c\u4e0d\u5141\u8bb8\u91cd\u590d java.util.Set []T Go\u6ca1\u6709set\u96c6\u5408\uff0c\u6240\u4ee5\u7528\u6570\u7ec4\u4ee3\u66ff map key-value\u7ed3\u6784\u6570\u636e\uff0ckey\u4e0d\u5141\u8bb8\u91cd\u590d java.util.Map map[K]V <p>struct\u7c7b\u578b</p> <pre><code>struct &lt;\u7ed3\u6784\u4f53\u540d\u79f0&gt; {\n    &lt;\u5e8f\u53f7&gt;: [\u5b57\u6bb5\u6027\u8d28] &lt;\u5b57\u6bb5\u7c7b\u578b&gt; &lt;\u5b57\u6bb5\u540d\u79f0&gt; [= &lt;\u9ed8\u8ba4\u503c&gt;] [;|,]\n}\n</code></pre> <p>\u6848\u4f8b\uff1a</p> <pre><code>struct Uesr {\n    1: required string name,\n    2: optional i32 age,\n    3: bool gender,  // \u9ed8\u8ba4\u5b57\u6bb5\u7c7b\u578b\u662foptional\n    4: string note = \"thrift\"\n}\n</code></pre> <p>struct\u4e0d\u80fd\u7ee7\u627f\uff0c\u4f46\u662f\u53ef\u4ee5\u5d4c\u5957\uff0c\u4e0d\u80fd\u5d4c\u5957\u81ea\u5df1\u3002</p> <p>\u6210\u5458\u5206\u5272\u53ef\u4ee5\u7528\u9017\u53f7\u6216\u5206\u597d\uff0c\u53ef\u4ee5\u6df7\u7528</p> <p>\u7f16\u53f7\u4e0d\u80fd\u91cd\u590d\u3002</p> <p>\u540c\u4e00\u4e2a\u6587\u4ef6\u53ef\u4ee5\u6709\u591a\u4e2astruct\uff0c\u4e0d\u540c\u6587\u4ef6\u53ef\u4ee5\u901a\u8fc7include\u5f15\u5165struct\u3002</p> <p>\u679a\u4e3e</p> <p>thrift\u4e0d\u652f\u6301\u679a\u4e3e\u5d4c\u5957\uff0c\u679a\u4e3e\u5e38\u91cf\u5fc5\u987b\u662f32\u4f4d\u6b63\u6574\u6570</p> <pre><code>enum HTTPStatus {\n    OK = 200,\n    NOTFOUND = 404\n}\n</code></pre> <p>\u5f02\u5e38</p> <p>\u5f02\u5e38\u7ee7\u627f\u6bcf\u79cd\u8bed\u8a00\u7684\u57fa\u7840\u5f02\u5e38\u7c7b\u3002</p> <pre><code>exception MyException {\n    1: i32 errorCode,\n    2: string message\n}\n\nservice ExampleService {\n    string GetName() throws (1: MyException e)\n}\n</code></pre> <p>service</p> <p>\u670d\u52a1\u76f8\u5f53\u4e8e\u63a5\u53e3\uff0c\u91cc\u9762\u5b58\u653e\u51fd\u6570\u3002</p> <pre><code>service HelloService {\n    i32 sayInt(1: i32 param)\n    string sayString(1: string param)\n    bool sayBoolean(1: bool param)\n    void sayVoid()\n}\n</code></pre> <p>\u547d\u540d\u7a7a\u95f4</p> <pre><code>namespace java com.example.test  // namespace + \u8bed\u8a00 + \u5305\u540d\n</code></pre> <p>include</p> <pre><code>include \"test.thrift\"\n</code></pre> <pre><code>thrift -gen \u8bed\u8a00 \u6587\u4ef6\u540d.thrift\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/uniapp%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/","title":"UniApp\u4f7f\u7528\u624b\u518c","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/uniapp%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_1","title":"\u521b\u5efa\u9879\u76ee","text":"<p>\u5b98\u65b9\u6559\u7a0b</p> <p>\u5b8c\u5168\u6309\u7167\u5b98\u7f51\u6559\u7a0b\u8d70\u5373\u53ef\uff0c\u975e\u5e38\u7b80\u5355\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/uniapp%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_2","title":"\u9875\u9762\u7ed3\u6784","text":"<p>\u5b98\u65b9\u6559\u7a0b</p> <p>\u4e0d\u7528\u5168\u90e8\u638c\u63e1\uff0c\u53ea\u9700\u8981\u77e5\u9053<code>components</code>\u3001<code>pages</code>\u3001<code>static</code>\u3001<code>manifest.json</code>\u3001<code>pages.json</code>\u3001<code>uni.scss</code>\u5373\u53ef\u3002</p> <p>\u5907\u6ce8\uff1a<code>components</code>\u91cc\u7684\u6587\u4ef6\u7ed3\u6784\u6309\u7167easycom \u89c4\u8303\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/uniapp%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_3","title":"\u914d\u7f6e\u8def\u7531","text":"<ol> <li>\u7ed9<code>\"pages\"</code>\u6570\u7ec4\u6dfb\u52a0\u5bf9\u8c61<code>{ \"path\": \"xxxx\" }</code>\u3002</li> <li>\u521b\u5efa<code>\"tabBar\"</code>\u6570\u7ec4\uff0c\u5e76\u5728\u91cc\u9762\u586b\u5199\u9875\u9762\u5177\u4f53\u4fe1\u606f\u3002</li> </ol> <pre><code>{\n  \"pages\": [ //pages\u6570\u7ec4\u4e2d\u7b2c\u4e00\u9879\u8868\u793a\u5e94\u7528\u542f\u52a8\u9875\uff0c\u53c2\u8003\uff1ahttps://uniapp.dcloud.io/collocation/pages\n    // \u7b2c\u4e00\u9879\u8def\u7531\n    {\n      \"path\": \"pages/index/index\"\n    },\n    // \u7b2c\u4e8c\u9879\u8def\u7531\n    {\n      \"path\": \"pages/home/home\"\n    }\n  ],\n  \"tabBar\": {\n    \"list\": [{\n        // pagePath\u5fc5\u5199\uff0c\u5176\u4ed6\u9009\u5199\uff08\u5efa\u8bae\u5199\u4e0a\uff09\n        \"pagePath\": \"pages/index/index\",\n        \"text\": \"\u9996\u9875\",\n        \"iconPath\": \"static/logo.png\",\n        \"selectedIconPath\": \"static/logo.png\"\n      },\n      {\n        \"pagePath\": \"pages/home/home\",\n        \"text\": \"\u6211\u7684\",\n        \"iconPath\": \"static/logo.png\",\n        \"selectedIconPath\": \"static/logo.png\"\n      }\n    ]\n  },\n  // \u4e00\u5b9a\u8981\u6dfb\u52a0\uff0c\u8def\u7531\u624d\u80fd\u751f\u6548\n  \"uniIdRouter\": {}\n}\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/uniapp%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_4","title":"\u5168\u5c40\u6837\u5f0f","text":"<p>\u6839\u76ee\u5f55\u4e0b\u7684<code>uni.scss</code>\u6587\u4ef6\u4e2d\u914d\u7f6e\u5168\u5c40\u6837\u5f0f\u3002</p> <p>\u4f7f\u7528<code>uni.scss</code>\u6587\u4ef6\u7684\u4e00\u4e9b\u6ce8\u610f\u4e8b\u9879\uff0c\u5728\u521b\u5efa\u8be5\u6587\u4ef6\u7684\u65f6\u5019\u4f1a\u81ea\u52a8\u751f\u6210\uff0c\u4e0b\u9762\u6211\u5c55\u793a\u5b98\u65b9\u7f16\u5199\u7684\u6ce8\u610f\u4e8b\u9879\u3002</p> <pre><code>/**\n * \u8fd9\u91cc\u662funi-app\u5185\u7f6e\u7684\u5e38\u7528\u6837\u5f0f\u53d8\u91cf\n *\n * uni-app \u5b98\u65b9\u6269\u5c55\u63d2\u4ef6\u53ca\u63d2\u4ef6\u5e02\u573a\uff08https://ext.dcloud.net.cn\uff09\u4e0a\u5f88\u591a\u4e09\u65b9\u63d2\u4ef6\u5747\u4f7f\u7528\u4e86\u8fd9\u4e9b\u6837\u5f0f\u53d8\u91cf\n * \u5982\u679c\u4f60\u662f\u63d2\u4ef6\u5f00\u53d1\u8005\uff0c\u5efa\u8bae\u4f60\u4f7f\u7528scss\u9884\u5904\u7406\uff0c\u5e76\u5728\u63d2\u4ef6\u4ee3\u7801\u4e2d\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e9b\u53d8\u91cf\uff08\u65e0\u9700 import \u8fd9\u4e2a\u6587\u4ef6\uff09\uff0c\u65b9\u4fbf\u7528\u6237\u901a\u8fc7\u642d\u79ef\u6728\u7684\u65b9\u5f0f\u5f00\u53d1\u6574\u4f53\u98ce\u683c\u4e00\u81f4\u7684App\n *\n */\n\n/**\n * \u5982\u679c\u4f60\u662fApp\u5f00\u53d1\u8005\uff08\u63d2\u4ef6\u4f7f\u7528\u8005\uff09\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539\u8fd9\u4e9b\u53d8\u91cf\u6765\u5b9a\u5236\u81ea\u5df1\u7684\u63d2\u4ef6\u4e3b\u9898\uff0c\u5b9e\u73b0\u81ea\u5b9a\u4e49\u4e3b\u9898\u529f\u80fd\n *\n * \u5982\u679c\u4f60\u7684\u9879\u76ee\u540c\u6837\u4f7f\u7528\u4e86scss\u9884\u5904\u7406\uff0c\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728\u4f60\u7684 scss \u4ee3\u7801\u4e2d\u4f7f\u7528\u5982\u4e0b\u53d8\u91cf\uff0c\u540c\u65f6\u65e0\u9700 import \u8fd9\u4e2a\u6587\u4ef6\n */\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/uniapp%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#color-ui","title":"Color UI \u7ec4\u4ef6\u5e93\u7684\u4f7f\u7528","text":"<p>DCloud\u7f51\u7ad9\u4e0a\u4e0b\u8f7d\u8be5\u9879\u76ee\uff0c\u8fd0\u884c\u8be5\u9879\u76ee\u5373\u53ef\u770b\u5230Color UI\u7684\u6240\u6709\u7ec4\u4ef6\u3002</p> <p>\u5c06\u4e0b\u8f7d\u597d\u7684\u6587\u4ef6\u4e2d\u7684<code>colorui</code>\u6587\u4ef6\u590d\u5236\u5230\u81ea\u5df1\u9879\u76ee\u7684\u6839\u76ee\u5f55<code>/</code>\u4e0b\u3002\u5728</p>"},{"location":"%E5%85%B6%E4%BB%96/uniapp%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_5","title":"\u5b9e\u6218","text":""},{"location":"%E5%85%B6%E4%BB%96/uniapp%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#page","title":"\u8bbe\u8ba1\u4e00\u4e2a\u4e0d\u8de8page\u7684\u83dc\u5355\u5207\u6362\u529f\u80fd","text":"<pre><code>&lt;template&gt;\n  &lt;view&gt;\n    &lt;view class=\"flex-box\"&gt;\n      &lt;view :class=\"['box', {'dark': isActive === 1}]\" @tap=\"tapMenu(1)\"&gt;\n        \u83dc\u53551\n      &lt;/view&gt;\n      &lt;view :class=\"['box', {'dark': isActive === 2}]\" @tap=\"tapMenu(2)\"&gt;\n        \u83dc\u53552\n      &lt;/view&gt;\n      &lt;view :class=\"['box', {'dark': isActive === 3}]\" @tap=\"tapMenu(3)\"&gt;\n        \u83dc\u53552\n      &lt;/view&gt;\n    &lt;/view&gt;\n    &lt;view class=\"content\" v-show=\"isActive === 1\"&gt;\n      \u5185\u5bb91\n    &lt;/view&gt;\n    &lt;view class=\"content\" v-show=\"isActive === 2\"&gt;\n      \u5185\u5bb92\n    &lt;/view&gt;\n    &lt;view class=\"content\" v-show=\"isActive === 3\"&gt;\n      \u5185\u5bb93\n    &lt;/view&gt;\n  &lt;/view&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\n  import {\n    ref\n  } from 'vue'\n  export default {\n    setup() {\n      let isActive = ref(1);\n      const tapMenu = (signal) =&gt; {\n        isActive.value = signal;\n      };\n      return {\n        isActive,\n        tapMenu\n      }\n    }\n  }\n&lt;/script&gt;\n\n&lt;style scoped lang=\"scss\"&gt;\n  .flex-box {\n    display: flex;\n    justify-content: center;\n    width: 100%;\n    margin-bottom: 20upx;\n  }\n\n  .box {\n    width: 180upx;\n    height: 100upx;\n    background-color: #89BCCC;\n    margin-left: 20upx;\n    text-align: center;\n    line-height: 100upx;\n    color: white;\n  }\n\n  .dark {\n    background-color: #5b6478;\n  }\n\n  .content {\n    width: 600upx;\n    height: 300upx;\n    background-color: #b3b3b3;\n    margin: 0 auto;\n  }\n&lt;/style&gt;\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/wireshark%E5%9F%BA%E6%9C%AC/","title":"wireshark","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/wireshark%E5%9F%BA%E6%9C%AC/#wireshark_1","title":"\u4f7f\u7528wireshark","text":"<ol> <li>\u5c06wireshark\u653e\u5728\u6838\u5fc3\u7f51\u7edc\u4f4d\u7f6e\u3002</li> <li>\u9009\u62e9\u6355\u83b7\u63a5\u53e3\uff0c\u5e38\u9009\u62e9Internet\u7f51\u7edc\u63a5\u53e3\u3002</li> <li>\u4f7f\u7528\u6355\u83b7\u8fc7\u6ee4\u5668\u548c\u663e\u793a\u8fc7\u6ee4\u5668\u3002</li> </ol> <p>\u95ee\u9898\uff1a\u6df7\u6742\u6a21\u5f0f\u548c\u666e\u901a\u6a21\u5f0f\u7684\u533a\u522b\uff1f</p> <p>\u7b54\u6848\uff1a\u666e\u901a\u6a21\u5f0f\u53ea\u5305\u542b\u5173\u4e8e\u672c\u673a\u7684\u6570\u636e\u5305\u3002</p> <p>\u95ee\u9898\uff1a\u5982\u4f55\u7b5b\u5e8f\u6570\u636e\u5305\uff1f</p> <p>\u7b54\u6848\uff1a</p> <p>\u95ee\u9898\uff1a\u7b5b\u9009\u6761\u4ef6\u6709\u54ea\u4e9b\uff1f</p> <p>\u7b54\u6848\uff1a\u534f\u8bae\u540d\u79f0\uff0c\u8d77\u59cb/\u7ec8\u6b62 \u5730\u5740\u3002</p> <p>\u95ee\u9898\uff1a\u5982\u4f55\u7b5b\u9009\u5173\u4e8e\u8d77\u59cb\u5730\u5740\u4e3a<code>192.168.3.3</code>\u4e14\u7ec8\u6b62\u5730\u5740\u662f<code>192.168.3.1</code>\u7684\u6570\u636e\u5305\uff1f</p> <p>\u7b54\u6848\uff1a<code>ip.src_host == 192.168.3.6 and ip.dst_host == 192.168.3.1</code></p> <p>\u95ee\u9898\uff1a\u5982\u4f55\u7b5b\u9009ip\u5730\u5740\u5173\u4e8e<code>192.168.3.3</code>\u7684\u6570\u636e\u5305\uff1f</p> <p>\u7b54\u6848\uff1a<code>ip.addr == 192.168.3.3</code></p> <p>\u95ee\u9898\uff1a\u4e3a\u4ec0\u4e48\u7b5b\u9009udp\u5173\u952e\u5b57\uff0c\u4f1a\u51fa\u73b0DNS\uff0cQICQ\u7b49\u534f\u8bae\uff1f</p>"},{"location":"%E5%85%B6%E4%BB%96/%E3%80%90%E7%90%86%E8%AE%BA%E3%80%91%E9%99%90%E6%B5%81%E8%AF%A6%E8%A7%A3/","title":"\u9650\u6d41\u8be6\u89e3","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/%E3%80%90%E7%90%86%E8%AE%BA%E3%80%91%E9%99%90%E6%B5%81%E8%AF%A6%E8%A7%A3/#_2","title":"\u9650\u6d41\u7684\u5206\u7c7b","text":"<p>\u6309\u7167\u9650\u6d41\u7684\u4f5c\u7528\u8303\u56f4\uff0c\u53ef\u4ee5\u5206\u4e3a\u5355\u673a\u9650\u6d41\u548c\u5206\u5e03\u5f0f\u9650\u6d41\uff1b\u6839\u636e\u9650\u6d41\u65b9\u5f0f\uff0c\u53c8\u5206\u4e3a\u8ba1\u6570\u5668\u3001\u6ed1\u52a8\u7a97\u53e3\u3001\u6f0f\u6876\u9650\u6d41\u548c\u4ee4\u724c\u6876\u9650\u6d41\u3002</p> <p>\u6211\u4eec\u4e3b\u8981\u8ba8\u8bba\u9650\u6d41\u65b9\u5f0f\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/%E3%80%90%E7%90%86%E8%AE%BA%E3%80%91%E9%99%90%E6%B5%81%E8%AF%A6%E8%A7%A3/#_3","title":"\u5e38\u89c1\u9650\u6d41\u65b9\u5f0f","text":""},{"location":"%E5%85%B6%E4%BB%96/%E3%80%90%E7%90%86%E8%AE%BA%E3%80%91%E9%99%90%E6%B5%81%E8%AF%A6%E8%A7%A3/#_4","title":"\u8ba1\u6570\u5668\u9650\u6d41","text":"<p>\u8ba1\u6570\u5668\u662f\u4e00\u79cd\u6700\u7b80\u5355\u9650\u6d41\u7b97\u6cd5\uff0c\u5176\u539f\u7406\u5c31\u662f\uff1a\u5728\u4e00\u6bb5\u65f6\u95f4\u95f4\u9694\u5185\uff0c\u5bf9\u8bf7\u6c42\u8fdb\u884c\u8ba1\u6570\uff0c\u4e0e\u9608\u503c\u8fdb\u884c\u6bd4\u8f83\u5224\u65ad\u662f\u5426\u9700\u8981\u9650\u6d41\u3002\u4e00\u65e6\u5230\u4e86\u65f6\u95f4\u4e34\u754c\u70b9\uff0c\u5c06\u8ba1\u6570\u5668\u6e05\u96f6\u3002</p> <p>\u8fd9\u79cd\u65b9\u6cd5\u867d\u7136\u7b80\u5355\uff0c\u4f46\u4e5f\u6709\u4e2a\u5927\u95ee\u9898\u5c31\u662f\u6ca1\u6709\u5f88\u597d\u7684\u5904\u7406\u5355\u4f4d\u65f6\u95f4\u7684\u8fb9\u754c\uff0c\u53c2\u8003\u4e0b\u56fe\u5373\u53ef\u660e\u767d\u3002</p> <p></p> <p>\u8be5\u65b9\u6cd5\u4e5f\u5b58\u5728\u4e00\u4e2a\u6f5c\u5728\u7684\u95ee\u9898\uff1a\u8fd9\u4e2a\u8ba1\u6570\u5f15\u7528\u4e86\u9501\uff0c\u5728\u9ad8\u5e76\u53d1\u573a\u666f\uff0c\u8fd9\u4e2a\u65b9\u5f0f\u53ef\u80fd\u4e0d\u592a\u5b9e\u7528\uff0c\u5efa\u8bae\u5c06\u9501\u53bb\u6389\uff0c\u7136\u540e\u5c06<code>count++</code>\u7684\u903b\u8f91\u901a\u8fc7\u539f\u5b50\u8ba1\u6570\u5904\u7406\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4fdd\u8bc1<code>count</code>\u81ea\u589e\u65f6\u4e0d\u4f1a\u88ab\u591a\u4e2a\u7ebf\u7a0b\u540c\u65f6\u6267\u884c\uff0c\u5373\u901a\u8fc7\u539f\u5b50\u8ba1\u6570\u7684\u65b9\u5f0f\u5b9e\u73b0\u9650\u6d41\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/%E3%80%90%E7%90%86%E8%AE%BA%E3%80%91%E9%99%90%E6%B5%81%E8%AF%A6%E8%A7%A3/#_5","title":"\u6ed1\u52a8\u7a97\u53e3\u9650\u6d41","text":"<p>\u6ed1\u52a8\u7a97\u53e3\u9650\u6d41\u5b8c\u5584\u4e86\u8ba1\u6570\u5668\u9650\u6d41\u7684\u77ed\u677f\uff0c\u4e5f\u5373\u5728\u5355\u4f4d\u65f6\u95f4\u8fb9\u754c\u906d\u53d7\u5927\u91cf\u7684\u8bf7\u6c42\u653b\u51fb\u3002</p> <p>\u5177\u4f53\u65b9\u6848\u5982\u4e0b\uff1a\u5c06\u4e00\u6bb5\u65f6\u95f4\u5212\u6210N\u4efd\uff0c\u6bcf\u6b21\u5c06\u6ed1\u52a8\u7a97\u53e3\u5f80\u540e\u79fb\u52a81\u4efd\u3002\u6211\u4eec\u9700\u8981\u4fdd\u8bc1\u6ed1\u52a8\u7a97\u53e3\u5728\u4efb\u610f\u65f6\u523b\u6700\u591a\u63a5\u53d7M\u6b21\u8bf7\u6c42\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/%E3%80%90%E7%90%86%E8%AE%BA%E3%80%91%E9%99%90%E6%B5%81%E8%AF%A6%E8%A7%A3/#_6","title":"\u6f0f\u6876\u9650\u6d41","text":"<p>\u4e00\u4e2a\u56fa\u5b9a\u5bb9\u91cf\u7684\u6876\uff0c\u6709\u6c34\u6d41\u8fdb\u6765\uff0c\u4e5f\u6709\u6c34\u6d41\u51fa\u53bb\u3002\u5bf9\u4e8e\u6d41\u8fdb\u6765\u7684\u6c34\uff08\u8bf7\u6c42\u901f\u5ea6\uff09\u6765\u8bf4\uff0c\u6211\u4eec\u65e0\u6cd5\u9884\u8ba1\u4e00\u5171\u6709\u591a\u5c11\u6c34\u4f1a\u6d41\u8fdb\u6765\uff0c\u4e5f\u65e0\u6cd5\u9884\u8ba1\u6c34\u6d41\u7684\u901f\u5ea6\u3002\u4f46\u662f\u5bf9\u4e8e\u6d41\u51fa\u53bb\u7684\u6c34\u6765\u8bf4\uff0c\u8fd9\u4e2a\u6876\u53ef\u4ee5\u56fa\u5b9a\u6c34\u6d41\u51fa\u7684\u901f\u7387\uff08\u5904\u7406\u901f\u5ea6\uff09\uff0c\u4ece\u800c\u8fbe\u5230\u6d41\u91cf\u6574\u5f62\u548c\u6d41\u91cf\u63a7\u5236\u7684\u6548\u679c\u3002</p> <p>\u6f0f\u6876\u7b97\u6cd5\u6709\u4ee5\u4e0b\u7279\u70b9\uff1a</p> <ul> <li>\u6f0f\u6876\u5177\u6709\u56fa\u5b9a\u5bb9\u91cf\uff0c\u51fa\u6c34\u901f\u7387\u662f\u56fa\u5b9a\u5e38\u91cf\uff08\u6d41\u51fa\u8bf7\u6c42\uff09\u3002</li> <li>\u5982\u679c\u6876\u662f\u7a7a\u7684\uff0c\u5219\u4e0d\u9700\u6d41\u51fa\u6c34\u6ef4\u3002</li> <li>\u6c34\u6ef4\u53ef\u4ee5\u4ee5\u4efb\u610f\u901f\u7387\u6d41\u5165\u5230\u6f0f\u6876\uff08\u6d41\u5165\u8bf7\u6c42\uff09\u3002</li> <li>\u5982\u679c\u6d41\u5165\u6c34\u6ef4\u8d85\u51fa\u4e86\u6876\u7684\u5bb9\u91cf\uff0c\u5219\u6d41\u5165\u7684\u6c34\u6ef4\u6ea2\u51fa\uff08\u65b0\u8bf7\u6c42\u88ab\u62d2\u7edd\uff09\u3002</li> </ul>"},{"location":"%E5%85%B6%E4%BB%96/%E3%80%90%E7%90%86%E8%AE%BA%E3%80%91%E9%99%90%E6%B5%81%E8%AF%A6%E8%A7%A3/#_7","title":"\u4ee4\u724c\u6876\u9650\u6d41","text":"<p>\u4ee4\u724c\u6876\u7b97\u6cd5\uff08Token Bucket\uff09\u662f\u7f51\u7edc\u6d41\u91cf\u6574\u5f62\uff08Traffic Shaping\uff09\u548c\u901f\u7387\u9650\u5236\uff08Rate Limiting\uff09\u4e2d\u6700\u5e38\u4f7f\u7528\u7684\u4e00\u79cd\u7b97\u6cd5\u3002\u5178\u578b\u60c5\u51b5\u4e0b\uff0c\u4ee4\u724c\u6876\u7b97\u6cd5\u7528\u6765\u63a7\u5236\u53d1\u9001\u5230\u7f51\u7edc\u4e0a\u7684\u6570\u636e\u7684\u6570\u76ee\uff0c\u5e76\u5141\u8bb8\u7a81\u53d1\u6570\u636e\u7684\u53d1\u9001\u3002</p> <p>\u6211\u4eec\u6709\u4e00\u4e2a\u56fa\u5b9a\u7684\u6876\uff0c\u6876\u91cc\u5b58\u653e\u7740\u4ee4\u724c\uff08token\uff09\u3002\u4e00\u5f00\u59cb\u6876\u662f\u7a7a\u7684\uff0c\u7cfb\u7edf\u6309\u56fa\u5b9a\u7684\u65f6\u95f4\uff08rate\uff09\u5f80\u6876\u91cc\u6dfb\u52a0\u4ee4\u724c\uff0c\u76f4\u5230\u6876\u91cc\u7684\u4ee4\u724c\u6570\u6ee1\uff0c\u591a\u4f59\u7684\u4ee4\u724c\u4f1a\u88ab\u4e22\u5f03\u3002\u5f53\u8bf7\u6c42\u6765\u7684\u65f6\u5019\uff0c\u4ece\u6876\u91cc\u79fb\u9664\u4e00\u4e2a\u4ee4\u724c\uff0c\u5982\u679c\u6876\u662f\u7a7a\u7684\u5219\u62d2\u7edd\u8bf7\u6c42\u6216\u8005\u963b\u585e\u3002</p> <p>\u4ee4\u724c\u6876\u6709\u4ee5\u4e0b\u7279\u70b9\uff1a</p> <ul> <li>\u4ee4\u724c\u6309\u56fa\u5b9a\u7684\u901f\u7387\u88ab\u653e\u5165\u4ee4\u724c\u6876\u4e2d\u3002</li> <li>\u6876\u4e2d\u6700\u591a\u5b58\u653e B \u4e2a\u4ee4\u724c\uff0c\u5f53\u6876\u6ee1\u65f6\uff0c\u65b0\u6dfb\u52a0\u7684\u4ee4\u724c\u88ab\u4e22\u5f03\u6216\u62d2\u7edd\u3002</li> <li>\u5982\u679c\u6876\u4e2d\u7684\u4ee4\u724c\u4e0d\u8db3 N \u4e2a\uff0c\u5219\u4e0d\u4f1a\u5220\u9664\u4ee4\u724c\uff0c\u4e14\u8bf7\u6c42\u5c06\u88ab\u9650\u6d41\uff08\u4e22\u5f03\u6216\u963b\u585e\u7b49\u5f85\uff09\u3002</li> </ul> <p>\u4ee4\u724c\u6876\u9650\u5236\u7684\u662f\u5e73\u5747\u6d41\u5165\u901f\u7387\uff08\u5141\u8bb8\u7a81\u53d1\u8bf7\u6c42\uff0c\u53ea\u8981\u6709\u4ee4\u724c\u5c31\u53ef\u4ee5\u5904\u7406\uff0c\u652f\u6301\u4e00\u6b21\u62ff3\u4e2a\u4ee4\u724c\uff0c4\u4e2a\u4ee4\u724c...\uff09\uff0c\u5e76\u5141\u8bb8\u4e00\u5b9a\u7a0b\u5ea6\u7a81\u53d1\u6d41\u91cf\uff0c\u6240\u4ee5\u4e5f\u662f\u975e\u5e38\u5e38\u7528\u7684\u9650\u6d41\u7b97\u6cd5\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/%E3%80%90%E7%90%86%E8%AE%BA%E3%80%91%E9%99%90%E6%B5%81%E8%AF%A6%E8%A7%A3/#_8","title":"\u601d\u8003","text":"<p>Q\uff1a\u4ee4\u724c\u6876\u76f8\u6bd4\u4e8e\u6f0f\u6876\u7b97\u6cd5\uff0c\u6709\u54ea\u4e9b\u4f18\u52bf\uff1f</p> <p>A\uff1a\u6f0f\u6876\u7b97\u6cd5\u7684\u5904\u7406\u8bf7\u6c42\u901f\u7387\u662f\u56fa\u5b9a\u7684\uff0c\u800c\u4ee4\u724c\u6876\u7b97\u6cd5\u7684\u5904\u7406\u8bf7\u6c42\u901f\u7387\u662f\u52a8\u6001\u53d8\u5316\u7684\uff08\u4f46\u4e00\u6bb5\u65f6\u95f4\u5185\u5e73\u5747\u5904\u7406\u901f\u7387\u4e5f\u662f\u56fa\u5b9a\u7684\uff0c\u56e0\u4e3a\u4ee4\u724c\u653e\u5165\u4ee4\u724c\u6876\u7684\u901f\u7387\u662f\u56fa\u5b9a\u7684\uff09\uff0c\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u53ef\u4ee5\u66f4\u597d\u7684\u5e94\u5bf9\u7a81\u53d1\u6d41\u91cf\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/","title":"\u4e0a\u4f20\u56fe\u7247","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/#_2","title":"\u6d41\u7a0b","text":"<p>\u524d\u7aef\u83b7\u53d6\u5230\u56fe\u7247\u540e\uff0c\u5c06\u56fe\u7247\u5148\u4e0a\u4f20\u5230\u540e\u7aef\u670d\u52a1\u5668\u4e2d\uff0c\u518d\u4ece\u540e\u7aef\u670d\u52a1\u5668\u4e0a\u4f20\u7684\u4e13\u7528\u7684\u56fe\u7247\u670d\u52a1\u5668\u4e2d\uff08\u6211\u4f7f\u7528\u7684\u662f\u4e03\u725b\u4e91\uff09\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/#_3","title":"\u4f7f\u7528\u5de5\u5177","text":"<p>vant weapp ui\u7ec4\u4ef6\u5e93\u3002</p> <p>\u5907\u6ce8\uff1a\u4f7f\u7528uploader\u7ec4\u4ef6\u65f6\uff0c\u9700\u8981\u5c06\u6e90\u7801\u4e2d\u7684<code>after-read</code>\u6539\u6210<code>afterRead</code>\u3002\uff08\u4e0d\u80fd\u6709\u5c0f\u6a2a\u7ebf\uff09</p>"},{"location":"%E5%85%B6%E4%BB%96/%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/#_4","title":"\u524d\u7aef\u5de5\u4f5c","text":"<p>\u4f7f\u7528\u65f6\u5efa\u8bae\u76f4\u63a5copy\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/#_5","title":"\u7b80\u5316\u7248","text":"<p>index.html</p> <pre><code>&lt;van-uploader file-list=\"{{ fileList }}\" bind:afterRead=\"afterRead\" /&gt;\n</code></pre> <p>index.js</p> <pre><code>Page({\n  data: {\n    fileList: [],\n  },\n\n  afterRead(event) {\n    const {\n      file\n    } = event.detail;\n    let that = this\n    wx.uploadFile({\n      // url: \u540e\u7aef\u670d\u52a1\u5668\u7684\u5730\u5740\n      url: 'http://localhost:8080/upload', // \u4ec5\u4e3a\u793a\u4f8b\uff0c\u975e\u771f\u5b9e\u7684\u63a5\u53e3\u5730\u5740\n      filePath: file.url,\n      // name\u7684\u503c\u4e0espringboot\u4e2d\u7684requestparam\u7684\u503c\u8981\u4e25\u683c\u5bf9\u5e94\n      name: 'image',\n      formData: {\n        user: 'test'\n      },\n      success(res) {\n        // \u5047\u5b9a \u6210\u529f\u8fde\u63a5\u540e\u7aef\u670d\u52a1\u5668\u5373\u4ee3\u8868\u56fe\u7247\u6210\u529f\u4e0a\u4f20\u5230\u56fe\u7247\u670d\u52a1\u5668\n        // \u4e0a\u4f20\u5b8c\u6210\u9700\u8981\u66f4\u65b0 fileList\u3002fileList\u662f\u672c\u5730\u7684\u56fe\u7247\u6570\u7ec4\u3002\n        const {\n          fileList = []\n        } = that.data;\n        fileList.push({\n          ...file,\n          url: res.data\n        });\n        // \u6253\u5370\u56fe\u7247\u5728\u56fe\u7247\u670d\u52a1\u5668\u4e2d\u7684url\n        console.log(res)\n        that.setData({\n          fileList\n        });\n      },\n    });\n  },\n});\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87/#_6","title":"\u5f00\u53d1\u7248","text":"<pre><code>&lt;van-uploader file-list=\"{{ fileList }}\" bind:afterRead=\"afterRead\" deletable=\"{{true}}\" bind:delete=\"delImg\" max-count=\"9\" accept=\"image\" /&gt;\n</code></pre> <p>\u5141\u8bb8\u56fe\u7247\u53ef\u4ee5\u88ab\u64a4\u9500\uff1a<code>deletable=\"{{true}}\"</code></p> <p>\u68c0\u67e5\u4e0a\u4f20\u6587\u4ef6\u662f\u5426\u662f\u56fe\u7247\uff1a<code>accept=\"image\"</code></p> <p>\u6700\u5927\u4e0a\u4f20\u6587\u4ef6\u6570\u91cf\uff1a<code>max-count=\"9\"</code></p> <pre><code>Page({\n  data: {\n    fileList: [],\n  },\n\n  afterRead(event) {\n    const {\n      file\n    } = event.detail;\n    let that = this\n    // \u5148\u538b\u7f29\u56fe\u7247\uff0c\u6240\u6709\u56fe\u7247\u90fd\u91c7\u7528\u540c\u6837\u7684\u538b\u7f29\u6bd4\u7387\uff0c\u540e\u671f\u53ef\u4ee5\u4f18\u5316\n    wx.compressImage({\n      src: file.url,\n      quality: 10,\n      success(res) {\n        file.url = res.tempFilePath\n        // \u5c06\u6587\u4ef6\u4f20\u9001\u81f3\u670d\u52a1\u5668\n        wx.uploadFile({\n          // url: \u540e\u7aef\u670d\u52a1\u5668\u7684\u5730\u5740\n          url: 'http://localhost:8080/upload', // \u4ec5\u4e3a\u793a\u4f8b\uff0c\u975e\u771f\u5b9e\u7684\u63a5\u53e3\u5730\u5740\n          filePath: file.url,\n          // name\u7684\u503c\u4e0espringboot\u4e2d\u7684requestparam\u7684\u503c\u8981\u4e25\u683c\u5bf9\u5e94\n          name: 'image',\n          formData: {\n            user: 'test'\n          },\n          success(res) {\n            // \u5047\u5b9a \u6210\u529f\u8fde\u63a5\u540e\u7aef\u670d\u52a1\u5668\u5373\u4ee3\u8868\u56fe\u7247\u6210\u529f\u4e0a\u4f20\u5230\u56fe\u7247\u670d\u52a1\u5668\n            // \u4e0a\u4f20\u5b8c\u6210\u9700\u8981\u66f4\u65b0 fileList\u3002fileList\u662f\u672c\u5730\u7684\u56fe\u7247\u6570\u7ec4\u3002\n            const {\n              fileList = []\n            } = that.data;\n            fileList.push({\n              ...file,\n              url: res.data,\n              deletable: true\n            });\n            that.setData({\n              fileList\n            });\n            // \u6253\u5370\u56fe\u7247\u5728\u56fe\u7247\u670d\u52a1\u5668\u4e2d\u7684url\n            console.log(res)\n          },\n        });\n      }\n    })\n  },\n\n  delImg(e) {\n    let index = e.detail.index\n    let fileList = this.data.fileList\n    if (index &gt;= 0 &amp;&amp; index &lt; fileList.length) {\n      fileList.splice(index, 1)\n      this.setData({\n        fileList\n      })\n    }\n  }\n});\n</code></pre> <p>\u540e\u7aef\uff1a</p> <p>utils\u5de5\u5177\u7c7b\uff1a\u53c2\u8003\u4e03\u725b\u4e91\u5b98\u65b9\u6587\u6863</p> <p>\u4f7f\u7528\u65f6\u5efa\u8bae\u76f4\u63a5copy\uff0c\u53ea\u9700\u4fee\u6539\u914d\u7f6e\u76f8\u5173\u76844\u4e2a\u53d8\u91cf\u5373\u53ef\u3002</p> <pre><code>import com.google.gson.Gson;\nimport com.qiniu.common.QiniuException;\nimport com.qiniu.http.Response;\nimport com.qiniu.storage.Configuration;\nimport com.qiniu.storage.Region;\nimport com.qiniu.storage.UploadManager;\nimport com.qiniu.storage.model.DefaultPutRet;\nimport com.qiniu.util.Auth;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport java.io.IOException;\n\n/**\n * @author lhl\n */\n@Component\npublic class QiNiuUtils {\n    /**\n     * url\u662f\u6211\u56fe\u7247\u670d\u52a1\u5668\u7684\u57df\u540d\uff0c\u5efa\u8bae\u5199\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\n     */\n    public static final String url = \"http://rk1lmtlan.bkt.clouddn.com/\";\n\n    /**\n     * \u4e0a\u4f20\u767b\u5f55\u51ed\u8bc1\uff0c\u5efa\u8bae\u5199\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\n     */\n    private String accessKey = \"z76Agk0XbS38XpDqHPHR_SjeEY920war5qYbQxkv\";\n    private String secretKey = \"qH7d1b2xTtLGj63tWYh4xI_3aykoN2gnTMq3ZAC3\";\n    private String bucket = \"longcoding-blog\";\n\n    /**\n     * @param file \u6587\u4ef6 \u672c\u4f53\n     * @param fileName \u6587\u4ef6\u540d\n     * @return \u662f\u5426\u6210\u529f\u4e0a\u4f20\u5230\u56fe\u7247\u670d\u52a1\u5668\n     */\n    public boolean upload(MultipartFile file, String fileName) {\n        //\u6784\u9020\u4e00\u4e2a\u5e26\u6307\u5b9a Region \u5bf9\u8c61\u7684\u914d\u7f6e\u7c7b\n        Configuration cfg = new Configuration(Region.autoRegion());\n\n        // \u6307\u5b9a\u5206\u7247\u4e0a\u4f20\u7248\u672c\n        cfg.resumableUploadAPIVersion = Configuration.ResumableUploadAPIVersion.V2;\n\n        //...\u5176\u4ed6\u53c2\u6570\u53c2\u8003\u7c7b\u6ce8\u91ca\n        UploadManager uploadManager = new UploadManager(cfg);\n\n        Auth auth = Auth.create(accessKey, secretKey);\n        String upToken = auth.uploadToken(bucket);\n\n        try {\n            Response response = uploadManager.put(file.getBytes(), fileName, upToken);\n            //\u89e3\u6790\u4e0a\u4f20\u6210\u529f\u7684\u7ed3\u679c\n            DefaultPutRet putRet = new Gson().fromJson(response.bodyString(), DefaultPutRet.class);\n            System.out.println(putRet.key);\n            System.out.println(putRet.hash);\n            return true;\n        } catch (QiniuException ex) {\n            Response r = ex.response;\n            System.err.println(r.toString());\n            try {\n                System.err.println(r.bodyString());\n            } catch (QiniuException ex2) {\n                //ignore\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return false;\n    }\n}\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/%E4%BB%8E%E9%B1%BC%E7%9A%AE%E7%9A%84%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%BE%97%E5%88%B0%E7%9A%84%E6%94%B6%E8%8E%B7/","title":"\u4ece\u9c7c\u76ae\u7684\u9879\u76ee\u4e2d\u5f97\u5230\u7684\u6536\u83b7","text":""},{"location":"%E5%85%B6%E4%BB%96/%E4%BB%8E%E9%B1%BC%E7%9A%AE%E7%9A%84%E9%A1%B9%E7%9B%AE%E4%B8%AD%E5%BE%97%E5%88%B0%E7%9A%84%E6%94%B6%E8%8E%B7/#_1","title":"\u6570\u636e\u5e93","text":"<p>user_status\u5c5e\u6027\uff1a\u8868\u793a\u7528\u6237\u72b6\u6001\u3002\uff08\u7ba1\u7406\u5458\u3001\u666e\u901a\u4eba\u3001\u88ab\u5c01\u53f7\uff09</p> <p>are_deleted\uff1a\u903b\u8f91\u5220\u9664</p> <p>avatar\uff1a\u5934\u50cf</p> <p>create_time\uff1a</p> <p>modify_time\uff1a</p> <p>\u6dfb\u52a0\u7d22\u5f15\uff1a</p> <p>\u5927\u9879\u76ee\u8bbe\u8ba1\u591a\u5f20\u8868\uff0c\u8868\u4e0e\u8868\u4e4b\u95f4\u6709\u5173\u8054\u3002</p> <p>\u6570\u636e\u5e93\u5c5e\u6027\u5c3d\u91cf\u4e0d\u8981\u8d77\u540d\u4e3a<code>isXXX</code>\uff0c\u4e2a\u4eba\u4e60\u60ef\u8d77\u540d\u4e3a<code>areXXX</code>\u3002</p> <p>\u65f6\u95f4\u7c7b\u578b\u53ef\u4ee5\u7528datetime\u548ctimestamp\uff0c\u6211\u559c\u6b22datetime\u3002</p> <p>id\u5efa\u8bae\u4f7f\u7528bigint\u7c7b\u578b\u3002</p> <p>\u5982\u679c\u8981\u53cd\u6252\uff0c\u5efa\u8baeid\u4e0d\u8981\u8bbe\u7f6e\u4e3a\u81ea\u589e\u3002</p> <p>\u5c5e\u6027\u540d\u4e0d\u8981\u662fmysql\u4e2d\u7684\u5173\u952e\u5b57\uff01</p> <p>\u4e0e\u6570\u636e\u5e93\u4e2d\u5bf9\u5e94\u7684\u5c5e\u6027\u5efa\u8bae\u4f7f\u7528java\u5c01\u88c5\u7684\u7c7b\u578b\uff08Integer, Long\u7b49\uff09\u3002</p> <p>\u4f7f\u7528mybatisX\u63d2\u4ef6\u81ea\u52a8\u751f\u6210\u5b9e\u4f53\u7c7b\u548c\u76f8\u5173mapper\uff0cservice\u5c42\u548cmapper.xml\u6587\u4ef6\u3002</p> <p>\u5b58\u653e\u5728\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u5fc5\u987b\u52a0\u5bc6\u3002\u5efa\u8bae\u4f7f\u7528\u8fd9\u4e2a\u5e93<code>import org.apache.commons.codec.digest.DigestUtils;</code>\u3002</p> <p>\u540e\u7aef\uff1a</p> <p>\u7f16\u5199\u6d4b\u8bd5\u7c7b\u7684\u5305\u540d\u548cjava\u7c7b\u7684\u5305\u540d\u5c3d\u91cf\u4e00\u81f4\u3002</p> <p>\u653e\u5728service\u7c7b\u540d\u524d\u9762\uff0c<code>alt+Enter</code>\u81ea\u52a8\u521b\u5efa\u6d4b\u8bd5\u6587\u4ef6\u3002</p> <p>\u4f7f\u7528sonarlint\u89c4\u8303java\u4ee3\u7801\uff08\u7c7b\u4f3c\u524d\u7aef\u7684eslint\uff09\u3002</p> <p>\u4f7f\u7528generateAllSetter\u63d2\u4ef6\u5feb\u901f\u751f\u6210Setter\u3002</p> <p>ctrl+p\u67e5\u770b\u67d0\u4e2a\u65b9\u6cd5\u6709\u54ea\u4e9b\u53c2\u6570\u3002</p> <p>\u524d\u7aef\u548c\u540e\u7aef\u90fd\u9700\u8981\u6821\u9a8c\u6570\u636e\u3002</p> <p>\u5bc6\u7801\u4e0d\u80fd\u660e\u6587\u5b58\u50a8\u5230\u6570\u636e\u5e93\u4e2d\u3002</p> <p>\u4f7f\u7528\u8fd9\u4e2a\u5305Apache Commons Lang\u4e2d\u7684<code>StringUtils</code>\u53ef\u4ee5\u5316\u7b80\u6821\u9a8c\u8fc7\u7a0b\u3002</p> <p>\u67e5\u8be2\u6570\u636e\u5e93\u7684\u64cd\u4f5c\u5c3d\u91cf\u5199\u5728\u540e\u9762\u3002</p> <p>\u4e0a\u7ebf\u9879\u76ee\uff1a</p> <p>\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u591a\u73af\u5883\uff1f</p> <p>\u200b   \u5206\u5f00\u6d4b\u8bd5\u548c\u4e0a\u7ebf\u3002</p> <p>\u200b   \u533a\u5206\u4e0d\u540c\u7684\u9636\u6bb5\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91ECS%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%87%AA%E5%88%B6%E4%BA%91%E7%9B%98/","title":"\u57fa\u4e8e\u963f\u91cc\u4e91ECS\u670d\u52a1\u5668\u81ea\u5236\u4e91\u76d8","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91ECS%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%87%AA%E5%88%B6%E4%BA%91%E7%9B%98/#1owncloud","title":"1.\u5b89\u88c5OwnCloud","text":"<p>OwnCloud\u662f\u4e00\u6b3e\u5f00\u6e90\u7684\u4e91\u5b58\u50a8\u8f6f\u4ef6\uff0c\u57fa\u4e8ePHP\u7684\u81ea\u5efa\u7f51\u76d8\u3002\u57fa\u672c\u4e0a\u662f\u79c1\u4eba\u4f7f\u7528\uff0c\u6ca1\u6709\u7528\u6237\u6ce8\u518c\u529f\u80fd\uff0c\u4f46\u662f\u6709\u7528\u6237\u6dfb\u52a0\u529f\u80fd\uff0c\u4f60\u53ef\u4ee5\u65e0\u9650\u5236\u5730\u6dfb\u52a0\u7528\u6237\uff0cOwnCloud\u652f\u6301\u591a\u4e2a\u5e73\u53f0\uff08windows\uff0cMAC\uff0cAndroid\uff0cIOS\uff0cLinux\uff09\u3002</p> <ol> <li>\u901a\u8fc7terminal\u8fde\u63a5ECS\u670d\u52a1\u5668\u3002\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u8f6f\u4ef6\u6e90\u3002</li> </ol> <p><code>cd /etc/yum.repos.d/    wget --no-check-certificate https://download.opensuse.org/repositories/isv:ownCloud:server:10/CentOS_7/isv:ownCloud:server:10.repo</code></p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u8fdb</li> </ol> <p><code>cd /root/</code></p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5OwnCloud-files\u3002</li> </ol> <p><code>yum -y install https://labfileapp.oss-cn-hangzhou.aliyuncs.com/owncloud-complete-files-10.5.0-3.1.noarch.rpm</code></p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\u5b89\u88c5\u662f\u5426\u6210\u529f\u3002</li> </ol> <p><code>ll /var/www/html</code></p> <p></p>"},{"location":"%E5%85%B6%E4%BB%96/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91ECS%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%87%AA%E5%88%B6%E4%BA%91%E7%9B%98/#2-apache","title":"2. \u5b89\u88c5Apache\u670d\u52a1","text":"<ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5Apache\u670d\u52a1\u3002</li> </ol> <p><code>yum install httpd -y</code></p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u542f\u52a8Apache\u670d\u52a1\u3002</li> </ol> <p><code>systemctl start httpd.service</code></p> <ol> <li>\u6253\u5f00\u6d4f\u89c8\u5668\u8f93\u5165\u4f53\u9a8c\u5e73\u53f0\u521b\u5efa\u7684ECS\u7684\u5f39\u6027\u516c\u7f51IP\u3002\u5982\u679c\u51fa\u73b0\u5982\u4e0b\u56fe\u5185\u5bb9\u8868\u793aApache\u5b89\u88c5\u6210\u529f\u3002</li> </ol> <p></p> <ol> <li> <p>\u6dfb\u52a0OwnCloud\u914d\u7f6e\uff1a</p> </li> <li> <p>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u6253\u5f00Apache\u914d\u7f6e\u6587\u4ef6\u3002</p> <p><code>vim /etc/httpd/conf/httpd.conf</code></p> </li> <li> <p>\u6309i\u952e\u8fdb\u5165\u6587\u4ef6\u7f16\u8f91\u6a21\u5f0f\uff0c\u7136\u540e\u5728\u5185\u5bb9\u540e\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\u3002 <p><code># owncloud config   Alias /owncloud \"/var/www/html/owncloud/\"   &lt;Directory /var/www/html/owncloud/&gt;       Options +FollowSymlinks       AllowOverride All       &lt;IfModule mod_dav.c&gt;           Dav off       &lt;/IfModule&gt;       SetEnv HOME /var/www/html/owncloud       SetEnv HTTP_HOME /var/www/html/owncloud   &lt;/Directory&gt;</code></p> <li> <p>\u6309esc\u952e\u9000\u51fa\u7f16\u8f91\u6a21\u5f0f\uff0c\u7136\u540e\u8f93\u5165:wq\u4fdd\u5b58\u5e76\u9000\u51fa\u914d\u7f6e\u6587\u4ef6\u3002</p> </li>"},{"location":"%E5%85%B6%E4%BB%96/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91ECS%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%87%AA%E5%88%B6%E4%BA%91%E7%9B%98/#3-php","title":"3. \u5b89\u88c5\u5e76\u914d\u7f6ePHP","text":"<p>\u7531\u4e8eOwnCloud\u662f\u57fa\u4e8ePHP\u5f00\u53d1\u7684\u4e91\u5b58\u50a8\u8f6f\u4ef6\uff0c\u9700\u8981PHP\u8fd0\u884c\u73af\u5883\uff0c\u8bf7\u6839\u636e\u4ee5\u4e0b\u6b65\u9aa4\u5b8c\u6210OwnCloud\u5de5\u4f5c\u73af\u5883\u7684\u914d\u7f6e\u3002</p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u624b\u52a8\u66f4\u65b0rpm\u6e90\u3002</li> </ol> <p><code>rpm -Uvh https://labfileapp.oss-cn-hangzhou.aliyuncs.com/epel-release-latest-7.noarch.rpm     rpm -Uvh https://labfileapp.oss-cn-hangzhou.aliyuncs.com/webtatic-release.rpm</code></p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5PHP 7.2\u7248\u672c\u3002</li> </ol> <p>\u8bf4\u660e\uff1aOwnCloud\u53ea\u652f\u6301PHP 5.6+\u3002</p> <p><code>yum -y install php72w    yum -y install php72w-cli php72w-common php72w-devel php72w-mysql php72w-xml php72w-odbc php72w-gd php72w-intl php72w-mbstring</code></p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u68c0\u6d4bPHP\u662f\u5426\u5b89\u88c5\u6210\u529f\u3002</li> </ol> <p><code>php -v</code></p> <ol> <li> <p>\u5c06PHP\u914d\u7f6e\u5230Apache\u4e2d\uff1a</p> </li> <li> <p>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u627e\u5230php.ini\u6587\u4ef6\u76ee\u5f55\u3002</p> <p><code>find / -name php.ini</code></p> </li> <li> <p>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u6253\u5f00httpd.conf\u6587\u4ef6\u3002</p> <p><code>vi /etc/httpd/conf/httpd.conf</code></p> </li> <li> <p>\u6309i\u952e\u8fdb\u5165\u6587\u4ef6\u7f16\u8f91\u6a21\u5f0f\uff0c\u7136\u540e\u5728\u6587\u4ef6\u6700\u540e\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\u3002</p> <p><code>PHPIniDir /etc/php.ini</code></p> </li> <li> <p>\u6309esc\u952e\u9000\u51fa\u7f16\u8f91\u6a21\u5f0f\uff0c\u7136\u540e\u8f93\u5165:wq\u4fdd\u5b58\u5e76\u9000\u51fa\u914d\u7f6e\u6587\u4ef6\u3002</p> </li> <li> <p>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u91cd\u542fApache\u670d\u52a1\u3002</p> <p><code>systemctl restart httpd.service</code></p> </li> </ol>"},{"location":"%E5%85%B6%E4%BB%96/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91ECS%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%87%AA%E5%88%B6%E4%BA%91%E7%9B%98/#4-owncloud","title":"4. \u914d\u7f6eOwnCloud","text":"<p>\u5b8c\u6210\u4e0a\u8ff0\u914d\u7f6e\u540e\uff0c\u60a8\u5c31\u53ef\u4ee5\u767b\u5f55OwnCloud\u521b\u5efa\u4e2a\u4eba\u7f51\u76d8\u4e86\u3002</p> <ol> <li> <p>\u5728\u81ea\u5df1\u7684\u6d4f\u89c8\u5668\u4e2d\uff0c\u8f93\u5165ECS\u5f39\u6027IP/owncloud\uff0c\u4f8b\u59821.1.1.1/owncloud\u3002</p> </li> <li> <p>\u81ea\u5b9a\u4e49\u8f93\u5165\u7ba1\u7406\u5458\u8d26\u53f7\u548c\u5bc6\u7801\uff0c\u7136\u540e\u5355\u51fb\u5b58\u50a8&amp;\u6570\u636e\u5e93\uff0c\u9009\u62e9SQLite\uff0c\u6700\u540e\u5355\u51fb\u5b89\u88c5\u5b8c\u6210\u3002</p> </li> </ol> <p></p> <ol> <li>\u8f93\u5165\u5df2\u521b\u5efa\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\u767b\u5f55Owncloud\u3002</li> </ol> <p></p> <p>\u200b   \u767b\u5f55\u6210\u529f\u754c\u9762\u5982\u4e0b\uff1a</p> <p>\u200b   </p>"},{"location":"%E5%85%B6%E4%BB%96/%E5%9F%BA%E4%BA%8E%E9%98%BF%E9%87%8C%E4%BA%91ECS%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%87%AA%E5%88%B6%E4%BA%91%E7%9B%98/#5-nas","title":"5. \u6302\u8f7dNAS\u670d\u52a1","text":"<p>\u5b8c\u6210OwnCloud\u521d\u59cb\u5316\u4e4b\u540e\u5c31\u53ef\u4ee5\u5c06NAS\u5b58\u50a8\u5305\u6302\u8f7d\u5230\u60a8\u7684\u7f51\u76d8\u670d\u52a1\u5668\u4e0a\u3002</p> <ol> <li>\u6253\u5f00\u65e0\u75d5\u6d4f\u89c8\u5668\u9875\u9762\uff0c\u590d\u5236 \u4e91\u4ea7\u54c1\u8d44\u6e90 \u5217\u8868\u4e2d \u300c\u4e00\u952e\u590d\u5236\u5b50\u8d26\u53f7\u767b\u9646\u94fe\u63a5\u300d \u7c98\u8d34\u5230\u6d4f\u89c8\u5668\uff0c\u8f93\u5165 \u4e91\u4ea7\u54c1\u8d44\u6e90\u5217\u8868 \u4e2d\u7684\u5b50\u8d26\u53f7\u5bc6\u7801\uff0c\u5373\u53ef\u767b\u5f55\u5f53\u524d\u5b50\u8d26\u53f7\u3002</li> </ol> <p></p> <ol> <li>\u8f93\u5165\u4e91\u4ea7\u54c1\u8d44\u6e90\u63d0\u4f9b\u7684\u5b50\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u767b\u5f55\u963f\u91cc\u4e91\u63a7\u5236\u53f0\u3002\u5728\u4ea7\u54c1\u5217\u8868\u9875\uff0c\u641c\u7d22NAS\uff0c\u7136\u540e\u5355\u51fb\u6587\u4ef6\u5b58\u50a8NAS\u3002</li> </ol> <p></p> <p>\u8bf4\u660e\uff1a\u5982\u679c\u51fa\u73b0RAM\u5b50\u8d26\u53f7\u6ca1\u6709\u6743\u9650\u7684\u63d0\u793a\uff0c\u8bf7\u60a8\u5173\u95ed\u63d0\u793a\u5373\u53ef\uff0c\u4e0d\u4f1a\u5f71\u54cd\u4f53\u9a8c\u64cd\u4f5c\u3002</p> <ol> <li>\u5728\u5de6\u4fa7\u5bfc\u822a\u680f\u4e2d\uff0c\u5355\u51fb\u6587\u4ef6\u7cfb\u7edf\u5217\u8868\u3002\u5728\u9875\u9762\u4e0a\u65b9\uff0c\u9009\u62e9\u8d44\u6e90\u63d0\u4f9b\u7684\u5730\u57df \uff0c\u4f8b\u5982\uff1a\u534e\u4e1c2 \u4e0a\u6d77\u3002\u5728\u6587\u4ef6\u7cfb\u7edf\u5217\u8868\u9875\u9762\uff0c\u53ef\u4ee5\u6839\u636e\u4e91\u4ea7\u54c1\u8d44\u6e90\u5217\u8868\u4e2d\u63d0\u4f9b\u7684nasFileSystemId\u627e\u5230\u60a8\u7684NAS\u8d44\u6e90\uff0c\u7136\u540e\u5355\u51fb\u6587\u4ef6\u7cfb\u7edf ID\uff0c\u8fdb\u5165\u6587\u4ef6\u7cfb\u7edf\u8be6\u60c5\u9875\u3002</li> </ol> <p></p> <ol> <li>\u9009\u62e9\u6302\u8f7d\u4f7f\u7528\uff0c\u7136\u540e\u5355\u51fb\u6dfb\u52a0\u6302\u8f7d\u70b9\uff0c\u4e13\u6709\u7f51\u7edc\u9009\u62e9cn-shanghai-vpc-csn\u3001\u4ea4\u6362\u673a\u9009\u62e9cn-shanghai-b-csn\u548c\u6743\u9650\u7ec4\u9009\u62e9VPC\u9ed8\u8ba4\u6743\u9650\u7ec4\uff0c\u6700\u540e\u5355\u51fb\u786e\u5b9a\u3002</li> </ol> <p></p> <ol> <li>\u5207\u6362\u81f3\u547d\u4ee4\u884c\u7ec8\u7aef\u9875\u9762\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5cifs-utils\u5de5\u5177\u5305\u3002</li> </ol> <p><code>sudo yum -y install cifs-utils</code></p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u67e5\u770bapache\u7684uid\u548cgid\u3002</li> </ol> <p><code>cat /etc/passwd|grep apache</code></p> <p></p> <ol> <li>\u5207\u6362\u81f3\u65e0\u75d5\u6d4f\u89c8\u5668\uff0c\u5728\u6587\u4ef6\u5b58\u50a8NAS\u63a7\u5236\u53f0\u9875\u7b7e\uff0c\u5355\u51fb\u901a\u8fc7\u547d\u4ee4\u884c\u6302\u8f7d\u5230ECS\uff0c\u6302\u8f7d\u6587\u4ef6\u7cfb\u7edf\u9009\u62e9Linux\uff0c\u5728Linux ECS\u4e0a\u5b89\u88c5CIFS\u5ba2\u6237\u7aef\u9009\u62e9Centos\uff0c\u67e5\u770b\u6302\u8f7dSMB\u6587\u4ef6\u7cfb\u7edf\u547d\u4ee4\u3002</li> </ol> <p></p> <ol> <li>\u590d\u5236\u6302\u8f7dSMB\u6587\u4ef6\u7cfb\u7edf\u7684\u547d\u4ee4\uff0c\u5e76\u4e14\u60a8\u9700\u8981\u5c06\u547d\u4ee4\u4e2d/mnt\u6539\u4e3a/var/www/html/owncloud/data/admin/files\uff0cuid\u548cgid\u503c\u6539\u4e3aapache\u7684uid\u548cgid\u3002</li> </ol> <p></p> <ol> <li> <p>\u5207\u6362\u81f3\u547d\u4ee4\u884c\u7ec8\u7aef\u9875\u9762\uff0c\u6267\u884c\u4e0a\u4e00\u6b65\u9aa4\u7684\u4fee\u6539\u540e\u7684\u6302\u8f7d\u547d\u4ee4\u3002</p> </li> <li> <p>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770b\u6302\u8f7d\u662f\u5426\u6210\u529f\u3002</p> <p><code>df -h | grep aliyun</code></p> <p></p> </li> <li> <p>\u60a8\u73b0\u5728\u53ef\u4ee5\u5728OwnCloud\u7f51\u76d8\u4e2d\uff0c\u65b0\u5efa\u6587\u4ef6\u5939\u5e76\u4e0a\u4f20\u6587\u4ef6\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728/var/www/html/owncloud/data/admin/files\u76ee\u5f55\u4e0b\u67e5\u627e\u5230\u60a8\u4e0a\u4f20\u7684\u6587\u4ef6\u3002</p> <p><code>cd /var/www/html/owncloud/data/admin/files</code></p> </li> </ol>"},{"location":"%E5%85%B6%E4%BB%96/%E5%B8%B8%E8%A7%81%E8%BF%9C%E7%A8%8B%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8/","title":"\u5e38\u89c1\u8fdc\u7a0b\u65b9\u6cd5\u8c03\u7528","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/%E5%B8%B8%E8%A7%81%E8%BF%9C%E7%A8%8B%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8/#_2","title":"\u5e38\u89c1\u65b9\u6848","text":"<ol> <li>\u57fa\u4e8eSocket\u7f16\u7a0b\u3002</li> <li>\u57fa\u4e8eWeb\u670d\u52a1\u3002</li> <li>\u57fa\u4e8e\u6d88\u606f\u4e2d\u95f4\u4ef6\u3002</li> <li>\u57fa\u4e8eRPC\u6846\u67b6\u3002</li> </ol>"},{"location":"%E5%85%B6%E4%BB%96/%E5%B8%B8%E8%A7%81%E8%BF%9C%E7%A8%8B%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8/#web","title":"\u57fa\u4e8eWeb\u670d\u52a1","text":"<p>\u7b80\u5355\u6765\u8bf4\uff0c\u5c31\u662f\u4f7f\u7528HTTP\u534f\u8bae\u4f20\u9012\u6570\u636e\uff0c\u4ece\u800c\u5b9e\u73b0\u8fdc\u7a0b\u65b9\u6cd5\u8c03\u7528\u3002</p> <p>\u5728\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\u9700\u8981\u6ce8\u610f\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u7684\u95ee\u9898\u3002</p> <p>\u3010\u6ce8\u3011\u5e8f\u5217\u5316\u662f\u6307\u5c06\u5bf9\u8c61\u8f6c\u6362\u6210\u5b57\u8282\u6d41\u7684\u8fc7\u7a0b\u3002\u53cd\u5e8f\u5217\u5316\u662f\u6307\u5c06\u5b57\u8282\u6d41\u8f6c\u6362\u6210\u5bf9\u8c61\u7684\u8fc7\u7a0b\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/%E5%B8%B8%E8%A7%81%E8%BF%9C%E7%A8%8B%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8/#web-service","title":"Web Service","text":"<p>Web Service\uff08Web\u670d\u52a1\uff09\u662f\u4e00\u79cd\u8de8\u5e73\u53f0\u3001\u8de8\u8bed\u8a00\u7684\u901a\u4fe1\u6280\u672f\uff0c\u5b83\u5229\u7528\u4e07\u7ef4\u7f51\uff08WWW\uff09\u7684\u6807\u51c6\u534f\u8bae\uff08\u5982HTTP\u3001XML\u3001SOAP\u3001WSDL\u7b49\uff09\u5728\u5206\u5e03\u5f0f\u7f51\u7edc\u73af\u5883\u4e2d\uff0c\u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u4e4b\u95f4\u7684\u4e92\u64cd\u4f5c\u3002\u5176\u4e2d\uff0c\u4f7f\u7528SOAP\u534f\u8bae\u8fdb\u884c\u6570\u636e\u4f20\u8f93\uff0cWSDL\u534f\u8bae\u8fdb\u884c\u670d\u52a1\u63cf\u8ff0\uff0cUDDI\u534f\u8bae\u8fdb\u884c\u670d\u52a1\u53d1\u5e03\u548c\u67e5\u627e\u3002</p> <p>SOAP</p> <p>SOAP\uff08Simple Object Access Protocol\uff09\u662f\u4e00\u79cd\u57fa\u4e8eXML\u7684\u901a\u4fe1\u534f\u8bae\uff0c\u7528\u4e8e\u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u4e2d\u4ea4\u6362\u7ed3\u6784\u5316\u7684\u548c\u7c7b\u578b\u5316\u7684\u4fe1\u606f\u3002SOAP\u901a\u8fc7\u5b9a\u4e49\u4e00\u79cd\u901a\u7528\u7684\u6d88\u606f\u683c\u5f0f\uff0c\u4f7f\u5f97\u4e0d\u540c\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u5728HTTP\u3001HTTPS\u3001SMTP\u7b49\u534f\u8bae\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u901a\u4fe1\uff08\u663e\u7136SOAP\u662f\u5e94\u7528\u5c42\u534f\u8bae\uff09\u3002SOAP\u4e00\u822c\u4f7f\u7528XML\u7f16\u7801\u3002</p> <p>WSDL</p> <p>WSDL\uff08Web Services Description Language\uff09\u662f\u4e00\u79cd\u6587\u6863\u89c4\u8303\uff0c\u4f7f\u7528XML\u683c\u5f0f\u63cf\u8ff0\u4e86Web\u670d\u52a1\u63a5\u53e3\u3001\u6d88\u606f\u683c\u5f0f\u548c\u8bbf\u95ee\u65b9\u6cd5\u7b49\u4fe1\u606f\uff0c\u662fWeb\u670d\u52a1\u4e2d\u91cd\u8981\u7684\u6807\u51c6\u4e4b\u4e00\u3002</p> <p>UDDI</p> <p>\u6682\u65f6\u4e0d\u4e86\u89e3\u3002</p> <p>\u603b\u7ed3\uff1a\u7b80\u5355\u6765\u8bf4\uff0c\u4e0d\u540c\u670d\u52a1\u4e4b\u95f4\u91c7\u7528HTTP\u534f\u8bae\u3001\u4f7f\u7528POST\u8bf7\u6c42\u65b9\u5f0f\u3001\u5c06header\u4e2d\u7684\u5c5e\u6027Content-Type\u8bbe\u7f6e\u4e3atext/xml\u3001\u4f20\u8f93\u7684\u6587\u672c\u4f1a\u4e3axml\u683c\u5f0f\uff0c\u5b9e\u73b0\u8fdc\u7a0b\u65b9\u6cd5\u8c03\u7528\u3002\u8fd9\u5c31\u662fWeb Service\u6280\u672f\u3002\u5b83\u7684\u7f3a\u70b9\u662fxml\u683c\u5f0f\u627f\u8f7d\u7684\u6570\u636e\u592a\u8fc7\u7e41\u7410\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/%E5%B8%B8%E8%A7%81%E8%BF%9C%E7%A8%8B%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8/#restful-web-service","title":"RESTful Web Service","text":"<p>RESTful\u662f\u4e00\u79cd\u57fa\u4e8eREST\uff08Representational State Transfer\uff09\u7684\u67b6\u6784\u98ce\u683c\uff0c\u7528\u4e8e\u6784\u5efaWeb\u670d\u52a1\u3002</p> <p>\u5728RESTful\u4e2d\uff0c\u6bcf\u4e2a\u8d44\u6e90\u90fd\u88ab\u8868\u793a\u4e3a\u4e00\u4e2a\u552f\u4e00\u7684URI\uff0c\u5e76\u4f7f\u7528HTTP\u65b9\u6cd5\uff08\u5982GET\u3001POST\u3001PUT\u3001DELETE\u7b49\uff09\u6765\u6267\u884c\u9488\u5bf9\u8be5\u8d44\u6e90\u7684\u64cd\u4f5c\u3002\u5ba2\u6237\u7aef\u901a\u8fc7\u5411\u670d\u52a1\u5668\u53d1\u9001HTTP\u8bf7\u6c42\u6765\u64cd\u4f5c\u8d44\u6e90\uff0c\u5e76\u4f7f\u7528HTTP\u54cd\u5e94\u6765\u83b7\u53d6\u8d44\u6e90\u7684\u72b6\u6001\u548c\u6570\u636e\u3002</p> <p>\u603b\u7ed3\uff1a\u7b80\u5355\u6765\u8bf4\uff0c\u4e0d\u540c\u670d\u52a1\u4e4b\u95f4\u91c7\u7528HTTP\u534f\u8bae\uff0c\u4f20\u8f93\u6587\u672c\u91c7\u7528json\u683c\u5f0f\uff0c\u5b9e\u73b0\u8fdc\u7a0b\u65b9\u6cd5\u8c03\u7528\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/%E5%B8%B8%E8%A7%81%E8%BF%9C%E7%A8%8B%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8/#_3","title":"\u57fa\u4e8e\u6d88\u606f\u4e2d\u95f4\u4ef6","text":"<p>\u4f7f\u7528\u6d88\u606f\u4e2d\u95f4\u4ef6\u5b9e\u73b0\u8fdc\u7a0b\u65b9\u6cd5\u8c03\u7528\uff0c\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u7aef\u901a\u8fc7\u6d88\u606f\u961f\u5217\u8fdb\u884c\u5f02\u6b65\u901a\u4fe1\u3002\u8fd9\u79cd\u65b9\u5f0f\u5177\u6709\u89e3\u8026\u548c\u53ef\u9760\u6027\u7b49\u4f18\u70b9\uff0c\u4f46\u662f\u9700\u8981\u8003\u8651\u6d88\u606f\u7684\u5e8f\u5217\u5316\u3001\u6301\u4e45\u5316\u3001\u5e42\u7b49\u6027\u548c\u6d88\u606f\u961f\u5217\u7684\u6027\u80fd\u3001\u53ef\u7528\u6027\u7b49\u95ee\u9898\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/%E5%B8%B8%E8%A7%81%E8%BF%9C%E7%A8%8B%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8/#rpc","title":"\u57fa\u4e8eRPC\u6846\u67b6","text":"<p>\u4f7f\u7528RPC\u6846\u67b6\u5b9e\u73b0\u8fdc\u7a0b\u65b9\u6cd5\u8c03\u7528\uff0c\u4f8b\u5982gRPC\u3001Dubbo\u3001Thrift\u3001Apache Avro\u7b49\u3002\u8fd9\u79cd\u65b9\u5f0f\u5177\u6709\u9ad8\u6027\u80fd\u3001\u6613\u7528\u6027\u548c\u53ef\u6269\u5c55\u6027\u7b49\u4f18\u70b9\uff0c\u4f46\u662f\u9700\u8981\u8003\u8651\u534f\u8bae\u7684\u9009\u578b\u3001\u63a5\u53e3\u7684\u8bbe\u8ba1\u3001\u5e8f\u5217\u5316\u548c\u7f51\u7edc\u4f20\u8f93\u7b49\u95ee\u9898\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/%E5%B8%B8%E8%A7%81%E8%BF%9C%E7%A8%8B%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8/#_4","title":"\u601d\u8003","text":"<p>Q\uff1a\u5b9e\u73b0\u8fdc\u7a0b\u8fc7\u7a0b\u8c03\u7528\u65f6\uff0cHTTP+RESTful+\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\u548cRPC\u6846\u67b6\u5206\u522b\u6709\u4ec0\u4e48\u4f18\u52bf\uff1f</p> <p>A\uff1a</p> <p>\u200b   HTTP+RESTful+\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\u7684\u4f18\u70b9\uff1a</p> <pre><code>1. \u5b9e\u73b0\u65b9\u5f0f\u7b80\u5355\u3002\n</code></pre> <p>\u200b   RPC\u6846\u67b6\u7684\u4f18\u70b9\uff1a</p> <pre><code>1. \u66f4\u9ad8\u6548\u7684\u5e8f\u5217\u5316\u548c\u4f20\u8f93\uff1aRPC\u6846\u67b6\u4e00\u822c\u4f7f\u7528\u4e8c\u8fdb\u5236\u5e8f\u5217\u5316\uff0c\u76f8\u8f83\u4e8eHTTP+RESTful API\u4f7f\u7528JSON\u3001XML\u7b49\u6587\u672c\u683c\u5f0f\u5e8f\u5217\u5316\uff0c\u4f20\u8f93\u6548\u7387\u66f4\u9ad8\uff0c\u4e14\u5360\u7528\u7684\u7f51\u7edc\u5e26\u5bbd\u66f4\u5c0f\u3002\n1. \u66f4\u7b80\u5355\u7684\u63a5\u53e3\u5b9a\u4e49\uff1aRPC\u6846\u67b6\u7684\u63a5\u53e3\u5b9a\u4e49\u4e00\u822c\u91c7\u7528IDL\uff08Interface Definition Language\uff09\uff0c\u80fd\u591f\u66f4\u660e\u786e\u5730\u5b9a\u4e49\u63a5\u53e3\u548c\u6570\u636e\u7c7b\u578b\uff0c\u4ece\u800c\u66f4\u597d\u5730\u652f\u6301\u4ee3\u7801\u751f\u6210\u548c\u7c7b\u578b\u68c0\u67e5\uff0c\u51cf\u5c11\u63a5\u53e3\u8c03\u7528\u7684\u51fa\u9519\u6982\u7387\u3002\n1. \u66f4\u597d\u7684\u5b89\u5168\u6027\uff1aRPC\u6846\u67b6\u80fd\u591f\u66f4\u597d\u5730\u652f\u6301\u52a0\u5bc6\u548c\u8eab\u4efd\u9a8c\u8bc1\u7b49\u5b89\u5168\u673a\u5236\uff0c\u4ece\u800c\u4fdd\u969c\u6570\u636e\u4f20\u8f93\u7684\u5b89\u5168\u6027\u548c\u53ef\u9760\u6027\u3002\n</code></pre>"},{"location":"%E5%85%B6%E4%BB%96/%E6%90%AD%E5%BB%BADocker%E7%8E%AF%E5%A2%83%2B%E9%85%8D%E7%BD%AENginx/","title":"\u642d\u5efaDocker\u73af\u5883","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/%E6%90%AD%E5%BB%BADocker%E7%8E%AF%E5%A2%83%2B%E9%85%8D%E7%BD%AENginx/#docker-ce","title":"\u5b89\u88c5Docker CE","text":"<p>Docker\u6709\u4e24\u4e2a\u5206\u652f\u7248\u672c\uff1aDocker CE\u548cDocker EE\uff0c\u5373\u793e\u533a\u7248\u548c\u4f01\u4e1a\u7248\u3002\u672c\u6559\u7a0b\u57fa\u4e8eCentOS 7\u5b89\u88c5Docker CE\u3002</p> <ol> <li>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u5b89\u88c5Docker\u7684\u4f9d\u8d56\u5e93\u3002</li> </ol> <p><code>yum install -y yum-utils device-mapper-persistent-data lvm2</code></p> <ol> <li>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u6dfb\u52a0Docker CE\u7684\u8f6f\u4ef6\u6e90\u4fe1\u606f\u3002</li> </ol> <p><code>yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</code></p> <ol> <li>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u5b89\u88c5Docker CE\u3002</li> </ol> <p><code>yum makecache fast</code></p> <p><code>yum -y install docker-ce</code></p> <ol> <li>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u542f\u52a8Docker\u670d\u52a1\u3002</li> </ol> <p><code>systemctl start docker</code></p>"},{"location":"%E5%85%B6%E4%BB%96/%E6%90%AD%E5%BB%BADocker%E7%8E%AF%E5%A2%83%2B%E9%85%8D%E7%BD%AENginx/#_1","title":"\u914d\u7f6e\u963f\u91cc\u4e91\u955c\u50cf\u4ed3\u5e93\uff08\u955c\u50cf\u52a0\u901f\uff09","text":"<p>Docker\u7684\u9ed8\u8ba4\u5b98\u65b9\u8fdc\u7a0b\u4ed3\u5e93\u662fhub.docker.com\uff0c\u7531\u4e8e\u7f51\u7edc\u539f\u56e0\uff0c\u4e0b\u8f7d\u4e00\u4e2aDocker\u5b98\u65b9\u955c\u50cf\u53ef\u80fd\u4f1a\u9700\u8981\u5f88\u957f\u7684\u65f6\u95f4\uff0c\u751a\u81f3\u4e0b\u8f7d\u5931\u8d25\u3002\u4e3a\u6b64\uff0c\u963f\u91cc\u4e91\u5bb9\u5668\u955c\u50cf\u670d\u52a1ACR\u63d0\u4f9b\u4e86\u5b98\u65b9\u7684\u955c\u50cf\u7ad9\u70b9\uff0c\u4ece\u800c\u52a0\u901f\u5b98\u65b9\u955c\u50cf\u7684\u4e0b\u8f7d\u3002\u4e0b\u9762\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528\u963f\u91cc\u4e91\u955c\u50cf\u4ed3\u5e93\u3002</p> <ol> <li> <p>\u590d\u5236\u5bb9\u5668\u955c\u50cf\u670d\u52a1\u63a7\u5236\u53f0\u5730\u5740\uff0c\u5728FireFox\u6d4f\u89c8\u5668\u6253\u5f00\u65b0\u9875\u7b7e\uff0c\u7c98\u8d34\u5e76\u8bbf\u95ee\u4e91\u5bb9\u5668\u955c\u50cf\u670d\u52a1\u63a7\u5236\u53f0\u3002\u7f51\u5740\uff1a<code>https://cr.console.aliyun.com/</code></p> </li> <li> <p>\u5728\u5bb9\u5668\u955c\u50cf\u670d\u52a1\u63a7\u5236\u53f0\u5de6\u4fa7\u5bfc\u822a\u680f\u4e2d\uff0c\u9009\u62e9\u955c\u50cf\u5de5\u5177&gt;\u955c\u50cf\u52a0\u901f\u5668\u3002</p> </li> </ol> <p></p> <ol> <li>\u5728\u955c\u50cf\u52a0\u901f\u5668\u9875\u9762\u7684\u52a0\u901f\u5668\u533a\u57df\uff0c\u5355\u51fb\u590d\u5236\u3002</li> </ol> <p></p> <ol> <li>\u5207\u6362\u81f3\u7ec8\u7aef\u9875\u9762\u3002\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u914d\u7f6eDocker\u7684\u81ea\u5b9a\u4e49\u955c\u50cf\u4ed3\u5e93\u5730\u5740\u3002\u8bf7\u5c06\u4e0b\u9762\u547d\u4ee4\u4e2d\u7684\u955c\u50cf\u4ed3\u5e93\u5730\u5740 https://kqh8****.mirror.aliyuncs.com \u66ff\u6362\u4e3a\u4e0a\u4e00\u6b65\u963f\u91cc\u4e91\u4e3a\u60a8\u63d0\u4f9b\u7684\u4e13\u5c5e\u955c\u50cf\u52a0\u901f\u5730\u5740\u3002\u6700\u540e\u5728\u7ec8\u7aef\u8f93\u5165\uff1a</li> </ol> <p><code>tee /etc/docker/daemon.json &lt;&lt;-'EOF' {  \"registry-mirrors\": [\"https://kqh8****.mirror.aliyuncs.com\"] } EOF</code></p> <ol> <li>\u91cd\u65b0\u52a0\u8f7d\u670d\u52a1\u914d\u7f6e\u6587\u4ef6\u3002</li> </ol> <p><code>systemctl daemon-reload</code></p> <ol> <li>\u91cd\u542fDocker\u670d\u52a1\u3002</li> </ol> <p><code>systemctl restart docker</code></p>"},{"location":"%E5%85%B6%E4%BB%96/%E6%90%AD%E5%BB%BADocker%E7%8E%AF%E5%A2%83%2B%E9%85%8D%E7%BD%AENginx/#dockernginx","title":"\u4f7f\u7528Docker\u5b89\u88c5Nginx\u670d\u52a1","text":"<ol> <li>\u67e5\u770bDocker\u955c\u50cf\u4ed3\u5e93\u4e2dNginx\u7684\u53ef\u7528\u7248\u672c\u3002</li> </ol> <p><code>docker search nginx</code></p> <p>\u547d\u4ee4\u8fd4\u56de\u5982\u4e0b\u9875\u9762\u3002</p> <p></p> <ol> <li>\u62c9\u53d6\u6700\u65b0\u7248\u7684Nginx\u955c\u50cf\u3002</li> </ol> <p><code>docker pull nginx:latest</code></p> <p>\u547d\u4ee4\u8fd4\u56de\u5982\u4e0b\u9875\u9762\u3002</p> <p></p> <ol> <li>\u67e5\u770b\u672c\u5730\u955c\u50cf\u3002</li> </ol> <p><code>docker images</code></p> <p>\u547d\u4ee4\u8fd4\u56de\u5982\u4e0b\u9875\u9762\u3002</p> <p></p> <ol> <li>\u8fd0\u884c\u5bb9\u5668\u3002</li> </ol> <p><code>docker run --name nginx-test -p 8080:80 -d nginx</code></p> <p>\u200b   \u547d\u4ee4\u53c2\u6570\u8bf4\u660e\uff1a</p> <ul> <li> <p>--name nginx-test\uff1a\u5bb9\u5668\u540d\u79f0\u3002</p> </li> <li> <p>-p 8080:80\uff1a \u7aef\u53e3\u8fdb\u884c\u6620\u5c04\uff0c\u5c06\u672c\u57308080\u7aef\u53e3\u6620\u5c04\u5230\u5bb9\u5668\u5185\u90e8\u768480\u7aef\u53e3\u3002</p> </li> <li> <p>-d nginx\uff1a \u8bbe\u7f6e\u5bb9\u5668\u5728\u540e\u53f0\u4e00\u76f4\u8fd0\u884c\u3002</p> </li> </ul> <p></p> <ol> <li>\u5728Chromium\u6d4f\u89c8\u5668\u6253\u5f00\u65b0\u9875\u7b7e\uff0c\u5728\u5730\u5740\u680f\u8f93\u5165http://\u670d\u52a1\u5668\u516c\u7f51ip:8080\u8bbf\u95eeNginx\u670d\u52a1\u3002</li> </ol> <p></p>"},{"location":"%E5%85%B6%E4%BB%96/%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7/","title":"\u7f13\u5b58\u4e00\u81f4\u6027","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7/#_2","title":"\u4ec0\u4e48\u662f\u6570\u636e\u4e00\u81f4\u6027","text":"<p>\u5f3a\u4e00\u81f4\u6027\uff1a\u7cfb\u7edf\u5199\u5165\u7684\u662f\u4ec0\u4e48\uff0c\u8bfb\u51fa\u7684\u5c31\u662f\u4ec0\u4e48\u3002\u5b9e\u73b0\u65f6\u5bf9\u7cfb\u7edf\u7684\u6027\u80fd\u6709\u8f83\u5927\u7684\u5f71\u54cd\u3002</p> <p>\u5f31\u4e00\u81f4\u6027\uff1a\u7cfb\u7edf\u5199\u5165\u6210\u529f\u540e\uff0c\u4e0d\u4fdd\u8bc1\u7acb\u5373\u8bfb\u51fa\u521a\u5199\u5165\u7684\u503c\u3002</p> <p>\u6700\u7ec8\u4e00\u81f4\u6027\uff1a\u5c5e\u4e8e\u5f31\u4e00\u81f4\u6027\uff0c\u7cfb\u7edf\u5199\u5165\u6210\u529f\u540e\uff0c\u4fdd\u8bc1\u5728\u4e00\u6bb5\u65f6\u95f4\u540e\u8bfb\u51fa\u521a\u5199\u5165\u7684\u503c\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7/#_3","title":"\u7f13\u5b58\u66f4\u65b0\u7b56\u7565","text":"<p>\u4ee5\u4e0b\u53ea\u80fd\u4fdd\u8bc1\u6700\u7ec8\u4e00\u81f4\u6027\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7/#cache-aside-pattern","title":"Cache-Aside Pattern\uff08\u91cd\u8981\uff09","text":"<p>\u6838\u5fc3\uff1a\u8bb0\u4f4f\u8bfb\u6d41\u7a0b\u548c\u5199\u6d41\u7a0b\u5373\u53ef\u3002</p> <p>\u8bfb\u6d41\u7a0b</p> <pre><code>\u8bfb\u8bf7\u6c42\n  |\n  |-----------------\n  \u2193                |\n\u662f\u5426\u547d\u4e2d\u7f13\u5b58         |\n  |                |\n  |  \u7f13\u5b58\u672a\u547d\u4e2d      |\n  \u2193                |\n\u4ece\u6570\u636e\u5e93\u8bfb\u53d6\u6570\u636e      |\n  |                |\n  |                |\n  \u2193                |\n\u66f4\u65b0\u7f13\u5b58            |\n  |                |\n  |                |\n  \u2193                |\n\u8fd4\u56de\u6570\u636e &lt;-----------\n</code></pre> <p>\u5199\u6d41\u7a0b</p> <pre><code>\u5199\u8bf7\u6c42------&gt;\u66f4\u65b0\u6570\u636e\u5e93------&gt;\u5220\u9664\u65e7\u7684\u7f13\u5b58\n</code></pre> <p>\u95ee\u98981. \u4e3a\u4ec0\u4e48\u662f\u5220\u9664\u7f13\u5b58\uff0c\u800c\u4e0d\u662f\u66f4\u65b0\u7f13\u5b58\uff1f</p> <p>\u7b54\u6848\uff1a\u5047\u5b9a\u91c7\u7528\u66f4\u65b0\u7f13\u5b58\u3002\u90a3\u4e48\u5199\u7684\u8fc7\u7a0b\u662f\uff1a\u5148\u66f4\u65b0\u6570\u636e\u5e93\uff0c\u518d\u66f4\u65b0\u7f13\u5b58\u3002</p> <p>\u5047\u5b9a\u6570\u636e\u5e93\u548c\u7f13\u5b58\u4e2da=1\uff0c\u8bf7\u6c42A\u8d1f\u8d23\u6539\u5199a=2\uff0c\u8bf7\u6c42B\u8d1f\u8d23\u6539\u5199a=3\u3002\u8bf7\u6c42B\u665a\u4e8e\u8bf7\u6c42A\u3002</p> <pre><code>                  \u7531\u4e8e\u7f51\u7edc\u95ee\u9898\uff0cA\u66f4\u65b0\u7f13\u5b58\u5ef6\u65f6\n\u8bf7\u6c42A---&gt;\u66f4\u65b0\u6570\u636e\u5e93a=2---------------&gt;\u66f4\u65b0\u7f13\u5b58a=2\n      \u8bf7\u6c42B---&gt;\u66f4\u65b0\u6570\u636e\u5e93a=3---&gt;\u66f4\u65b0\u7f13\u5b58a=3\n</code></pre> <p>\u6700\u7ec8\u6570\u636e\u5e93\u4e2da=3\uff0c\u7f13\u5b58\u4e2da=2\u3002</p> <p>\u95ee\u98982. \u4e3a\u4ec0\u4e48\u8981\u5148\u66f4\u65b0\u6570\u636e\u5e93\uff0c\u518d\u5220\u9664\u7f13\u5b58\uff1f</p> <p>\u7b54\u6848\uff1a\u5047\u5b9a\u8bf7\u6c42A\u65e9\u4e8e\u8bf7\u6c42B\uff0c\u5982\u4e0b\u56fe\u6240\u793a</p> <pre><code>               \u7531\u4e8e\u7f51\u7edc\u95ee\u9898\uff0cA\u66f4\u65b0\u7f13\u5b58\u5ef6\u65f6\n\u8bf7\u6c42A---&gt;\u67e5\u8be2\u6570\u636e\u5e93a=1------------&gt;\u66f4\u65b0\u7f13\u5b58a=1\n    \u8bf7\u6c42B---&gt;\u66f4\u65b0\u6570\u636e\u5e93a=2---&gt;\u66f4\u65b0\u7f13\u5b58a=2\n</code></pre> <p>\u95ee\u98983. \u5982\u679c\u6211\u6267\u610f\u8981\u5148\u5220\u9664\u7f13\u5b58\uff0c\u518d\u66f4\u65b0\u6570\u636e\u5e93\uff0c\u5982\u4f55\u4fdd\u8bc1\u4e00\u81f4\u6027\uff1f\uff08\u770b\u4e0a\u53bb\u633a\u65e0\u7406\uff0c\u4f46\u662f\u4e5f\u6709\u8fd9\u79cd\u573a\u666f\uff09</p> <p>\u7b54\u6848\uff1a</p> <ol> <li>\u5ef6\u65f6\u53cc\u5220\uff1a\u66f4\u65b0\u6570\u636e\u65f6\uff0c\u5148\u5220\u9664\u7f13\u5b58\uff0c\u518d\u5220\u9664\u6570\u636e\u5e93\uff0c\u8fc7\u4e00\u6bb5\u65f6\u95f4\u518d\u5220\u9664\u7f13\u5b58\u3002</li> <li>\u5220\u9664\u7f13\u5b58\u91cd\u8bd5\u673a\u5236\uff1a\u5982\u679c\u201c\u5ef6\u65f6\u53cc\u5220\u201d\u5931\u8d25\uff0c\u90a3\u4e48\u591a\u5220\u51e0\u6b21\uff0c\u76f4\u5230\u5220\u9664\u6210\u529f\uff01</li> <li>\u8bfb\u53d6<code>binlog</code>\u5f02\u6b65\u5220\u9664\u7f13\u5b58\uff1a\u4f7f\u7528\u963f\u91cc\u7684canal\u5c06<code>binlog</code>\u65e5\u5fd7\u91c7\u96c6\u53d1\u9001\u5230MQ\u961f\u5217\u91cc\u9762\uff0c\u7136\u540e\u901a\u8fc7ACK\u673a\u5236\u786e\u8ba4\u5904\u7406\u8fd9\u6761\u66f4\u65b0\u6d88\u606f\uff0c\u5220\u9664\u7f13\u5b58\uff0c\u4fdd\u8bc1\u6570\u636e\u7f13\u5b58\u4e00\u81f4\u6027\u3002</li> </ol>"},{"location":"%E5%85%B6%E4%BB%96/%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7/#read-throughwrite-through","title":"Read-Through/Write-Through","text":"<p>\u8bfb\u6d41\u7a0b</p> <pre><code>\u8bfb\u8bf7\u6c42\n  |\n  |-----------------\n  \u2193                |\n\u662f\u5426\u547d\u4e2d\u7f13\u5b58         |\n  |                |\n  |  \u7f13\u5b58\u672a\u547d\u4e2d      |\n  \u2193                |\n\u4ece\u6570\u636e\u5e93\u8bfb\u53d6\u6570\u636e      |\n  |                |\n  |                |\n  \u2193                |\n\u66f4\u65b0\u7f13\u5b58            |\n  |                |\n  |                |\n  \u2193                |\n\u8fd4\u56de\u6570\u636e &lt;-----------\n</code></pre> <p>\u5199\u6d41\u7a0b</p> <p>\u548ccache-aside pattern\u51e0\u4e4e\u4e00\u6837\uff0c\u552f\u4e00\u4e0d\u540c\u7684\u5730\u65b9\u662f\u591a\u4e86\u4e00\u4e2a\u7f13\u5b58\u62bd\u8c61\u5c42\u3002</p> <p></p>"},{"location":"%E5%85%B6%E4%BB%96/%E7%BC%93%E5%AD%98%E4%B8%80%E8%87%B4%E6%80%A7/#write-behind","title":"Write Behind \u5f02\u6b65\u7f13\u5b58\u5199\u5165","text":"<p>\u7531<code>Cache Provider</code>\u6765\u8d1f\u8d23\u7f13\u5b58\u548c\u6570\u636e\u5e93\u7684\u8bfb\u5199\u3002Write Behind\u53ea\u66f4\u65b0\u7f13\u5b58\uff0c\u4e0d\u76f4\u63a5\u66f4\u65b0\u6570\u636e\u5e93\uff0c\u901a\u8fc7\u6279\u91cf\u5f02\u6b65\u7684\u65b9\u5f0f\u6765\u66f4\u65b0\u6570\u636e\u5e93\u3002</p> <p>\u7f13\u5b58\u548c\u6570\u636e\u5e93\u7684\u4e00\u81f4\u6027\u4e0d\u5f3a\uff0c\u9002\u5408\u9891\u7e41\u5199\u7684\u573a\u666f\uff0c\u5bf9\u4e00\u81f4\u6027\u8981\u6c42\u9ad8\u7684\u7cfb\u7edf\u8981\u8c28\u614e\u4f7f\u7528\u3002</p> <p></p>"},{"location":"%E5%85%B6%E4%BB%96/%E8%B7%A8%E5%9F%9F/","title":"\u8de8\u57df","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/%E8%B7%A8%E5%9F%9F/#_2","title":"\u5199\u5728\u524d\u9762","text":"<p>\u7f51\u4e0a\u5173\u4e8e\u8de8\u57df\u7684\u6587\u7ae0\u8bb2\u7684\u5f88\u4e0d\u6e05\u695a\uff0c\u6211\u76ee\u524d\u4e5f\u6ca1\u5b8c\u5168\u641e\u61c2\u3002\u4e0d\u61c2\u7684\u5730\u65b9\u5982\u4e0b\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/%E8%B7%A8%E5%9F%9F/#_3","title":"\u540c\u6e90\u7b56\u7565","text":"<p>\u6700\u521d\uff0c\u5b83\u7684\u542b\u4e49\u662f\u6307\uff0cA \u7f51\u9875\u8bbe\u7f6e\u7684 Cookie\uff0cB \u7f51\u9875\u4e0d\u80fd\u6253\u5f00\uff0c\u9664\u975e\u8fd9\u4e24\u4e2a\u7f51\u9875\u201c\u540c\u6e90\u201d\u3002\u6240\u8c13\u201c\u540c\u6e90\u201d\u6307\u7684\u662f\u201c\u4e09\u4e2a\u76f8\u540c\u201d\uff1a\u534f\u8bae\u76f8\u540c\u3001\u57df\u540d\u76f8\u540c\u3001\u7aef\u53e3\u76f8\u540c\u3002</p> <p>\u5982\u679c\u975e\u540c\u6e90\uff0c\u5171\u6709\u4e09\u79cd\u884c\u4e3a\u53d7\u5230\u9650\u5236\uff1a</p> <ul> <li>Cookie\u3001LocalStorage \u548c IndexDB \u65e0\u6cd5\u8bfb\u53d6</li> <li>DOM \u65e0\u6cd5\u83b7\u5f97</li> <li>AJAX \u8bf7\u6c42\u4e0d\u80fd\u53d1\u9001</li> </ul>"},{"location":"%E5%85%B6%E4%BB%96/%E8%B7%A8%E5%9F%9F/#_4","title":"\u4ec0\u4e48\u662f\u8de8\u57df","text":"<p>\u8de8\u57df\u662f\u6d4f\u89c8\u5668\u4e3a\u4e86\u5b89\u5168\u800c\u5efa\u7acb\u7684\u4e00\u4e2a\u673a\u5236\uff0c\u7528\u4e8e\u9650\u5236JS\u3002</p> <p>\u5047\u5b9a\u6211\u5728<code>www.baidu.com</code>\u7684\u7ad9\u70b9\u4e0b\u901a\u8fc7JS\u8bbf\u95ee<code>www.google.com</code>\uff0c\u6b64\u65f6\u5c31\u53d1\u751f\u4e86\u8de8\u57df\u3002\u5982\u679c\u76f4\u63a5\u5728\u7f51\u5740\u680f\u8f93\u5165<code>www.google.com</code>\u6216\u8005\u901a\u8fc7a\u6807\u7b7e\u8df3\u8f6c\u5230<code>www.google.com</code>\uff0c\u5219\u4e0d\u4f1a\u53d1\u9001\u8de8\u57df\u3002</p> <p>\u56de\u5230\u524d\u540e\u7aef\u5f00\u53d1\u4e2d\uff0c\u6211\u4eec\u65f6\u5e38\u4f1a\u9047\u5230\u8de8\u57df\u7684\u95ee\u9898\uff0c\u539f\u56e0\u662f\u8fd9\u6837\u7684\uff1a\u5047\u5b9a\u524d\u7aef\u7684\u7ad9\u70b9\u662f<code>http://localhost:5173</code>\uff0c\u540e\u7aef\u7684\u7ad9\u70b9\u662f<code>http://localhost:8080</code>\uff0c\u7531\u4e8e\u4ed6\u4eec\u4e0d\u201c\u540c\u6e90\u201d\uff0c\u56e0\u6b64\u53d1\u751f\u4e86\u8de8\u57df\u95ee\u9898\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u540e\u7aef\u670d\u52a1\u5668\u8bf7\u6c42\u4e0d\u4f1a\u6b63\u5e38\u54cd\u5e94\u3002</p> <p>\u6d4f\u89c8\u5668\u4f1a\u5148\u68c0\u67e5\u53d1\u9001\u7684\u8bf7\u6c42\u662f\u5426\u5c5e\u4e8e\u8de8\u57df\u8bf7\u6c42\u3002\u5982\u679c\u662f\uff0c\u6d4f\u89c8\u5668\u81ea\u52a8\u5728\u8bf7\u6c42\u5934\u4e2d\u5f3a\u5236\u6dfb\u52a0<code>Origin</code>\u5b57\u6bb5\u3002</p> <p>\u601d\u8003\uff1a\u5982\u679c\u6211\u4e0d\u901a\u8fc7\u6d4f\u89c8\u5668\uff0c\u800c\u662f\u901a\u8fc7apifox\u6216curl\u8fd9\u6837\u7684\u5de5\u5177\u53d1\u8bf7\u6c42\uff0c\u4f1a\u53d1\u751f\u8de8\u57df\u95ee\u9898\u5417\uff1f</p> <p>\u7b54\u6848\uff1a\u4e0d\u4f1a\u3002\u901a\u8fc7\u5b83\u4eec\u8bbf\u95ee\u540e\u7aef\u670d\u52a1\u5668\uff0c\u76f8\u5f53\u4e8e\u7f51\u5740\u680f\u76f4\u63a5\u8f93\u5730\u5740\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/%E8%B7%A8%E5%9F%9F/#_5","title":"\u5b9e\u73b0\u7ec6\u8282","text":"<p>\u6d4f\u89c8\u5668\u81ea\u52a8\u6dfb\u52a0Origin\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/%E8%B7%A8%E5%9F%9F/#_6","title":"\u4e00\u4e9b\u95ee\u9898","text":"<p>A\uff1a\u4e3a\u4ec0\u4e48\u6211\u8bbf\u95ee<code>www.baidu.com</code>\u4e0d\u4f1a\u53d1\u751f\u8de8\u57df\u95ee\u9898\uff1f</p> <p>Q\uff1a\u8de8\u57df\u4ec5\u9488\u5bf9<code>js</code>\uff0c\u4e5f\u5373\u8de8\u57df\u53ea\u4f1a\u9650\u5236<code>ajax</code>\u6216<code>axios</code>\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/%E8%B7%A8%E5%9F%9F/#_7","title":"\u5982\u4f55\u89e3\u51b3\u8de8\u57df","text":"<ol> <li> <p>\u540e\u7aef\u670d\u52a1\u5668\u914d\u7f6e\u5141\u8bb8\u8de8\u57df\u3002</p> </li> <li> <p>\u524d\u7aef\u5c06\u540e\u7aef\u9700\u8981\u7684\u8bf7\u6c42\u53d1\u9001\u7ed9NGINX\u670d\u52a1\u5668\uff08\u9875\u9762\u4e0eNGINX\u540c\u6e90\uff0c\u6d4f\u89c8\u5668\u4e0d\u4f1a\u643a\u5e26\u8de8\u57df\u6807\u5fd7\uff09\uff0c\u7136\u540e\u8ba9NGINX\u8f6c\u53d1\u7ed9\u540e\u7aef\u3002</p> </li> </ol> <p>\u8fd9\u91ccNGINX\u627f\u62c5\u4e86\u4e24\u4efd\u5de5\u4f5c\uff1a\u4e00\u662f\u8fd4\u56de\u524d\u7aef\u8d44\u6e90\uff0c\u4e8c\u662f\u8f6c\u53d1\u8bf7\u6c42\u7ed9\u540e\u7aef\u8d44\u6e90\u3002</p>"},{"location":"%E5%85%B6%E4%BB%96/%E9%85%8D%E7%BD%AELAMP/","title":"\u57fa\u4e8eCentOS\u7684\u670d\u52a1\u5668\u4e0a\u914d\u7f6eLAMP","text":"<p>[toc]</p>"},{"location":"%E5%85%B6%E4%BB%96/%E9%85%8D%E7%BD%AELAMP/#apache","title":"\u5b89\u88c5Apache\u670d\u52a1","text":"<p>Apache\u662f\u4e16\u754c\u4f7f\u7528\u6392\u540d\u7b2c\u4e00\u7684Web\u670d\u52a1\u5668\u8f6f\u4ef6\u3002\u5b83\u53ef\u4ee5\u8fd0\u884c\u5728\u51e0\u4e4e\u6240\u6709\u5e7f\u6cdb\u4f7f\u7528\u7684\u8ba1\u7b97\u673a\u5e73\u53f0\u4e0a\uff0c\u7531\u4e8e\u5176\u8de8\u5e73\u53f0\u548c\u5b89\u5168\u6027\u88ab\u5e7f\u6cdb\u4f7f\u7528\uff0c\u662f\u6700\u6d41\u884c\u7684Web\u670d\u52a1\u5668\u7aef\u8f6f\u4ef6\u4e4b\u4e00\u3002</p> <ol> <li>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u5b89\u88c5Apache\u670d\u52a1\u53ca\u5176\u6269\u5c55\u5305\u3002</li> </ol> <p><code>yum -y install httpd httpd-manual mod_ssl mod_perl mod_auth_mysql</code></p> <p>\u5907\u6ce8\uff1a\u5982\u679c\u63d0\u793a\u9519\u8bef\u4fe1\u606f<code>Linux yum\u5b89\u88c5httpd\u62a5\u9519 No package httpd available ...</code>\uff0c\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a</p> <p><code>yum --disableexcludes=all install -y httpd</code></p> <ol> <li>\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u542f\u52a8Apache\u670d\u52a1\u3002</li> </ol> <p><code>systemctl start httpd.service</code></p> <ol> <li>\u5728\u672c\u5730\u7535\u8111\u7684\u6d4f\u89c8\u5668\u7684\u5740\u680f\u4e2d\uff0c\u8f93\u5165\u670d\u52a1\u5668\u516c\u7f51IP\u5730\u5740\uff0c\u5e76\u6309Enter\u952e\u3002</li> </ol> <p>\u82e5\u8fd4\u56de\u9875\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u8bf4\u660eApache\u670d\u52a1\u542f\u52a8\u6210\u529f\u3002</p> <p></p>"},{"location":"%E5%85%B6%E4%BB%96/%E9%85%8D%E7%BD%AELAMP/#mysql","title":"\u5b89\u88c5\u5e76\u914d\u7f6eMySQL","text":"<p>MySQL\u662f\u6700\u6d41\u884c\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf\uff0c\u5728WEB\u5e94\u7528\u65b9\u9762MySQL\u662f\u6700\u597d\u7684 RDBMS(Relational Database Management System\uff1a\u5173\u7cfb\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf)\u5e94\u7528\u8f6f\u4ef6\u4e4b\u4e00\u3002</p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u4e0b\u8f7d\u5e76\u5b89\u88c5MySQL\u5b98\u65b9\u7684<code>Yum Repository</code>\u3002</li> </ol> <p><code>wget http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm</code></p> <p><code>yum -y install mysql57-community-release-el7-10.noarch.rpm</code></p> <p><code>yum -y install mysql-community-server --nogpgcheck</code></p> <p>\u5982\u4f55\u9009\u62e9\u5176\u4ed6\u7248\u672c\u7684mysql\uff1f</p> <p>\u8fdb\u5165mysql\u5b98\u7f51\u7684yum repository\uff0c\u9009\u62e9\u76f8\u5e94\u7684\u7248\u672c\u5373\u53ef\u3002</p> <p></p> <ol> <li>\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u67e5\u770bMySQL\u7248\u672c\u53f7\u3002</li> </ol> <p><code>mysql -V</code></p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u542f\u52a8 MySQL \u6570\u636e\u5e93\u3002</li> </ol> <p><code>systemctl start mysqld.service</code></p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u67e5\u770bMySQL\u521d\u59cb\u5bc6\u7801\u3002</li> </ol> <p><code>grep \"password\" /var/log/mysqld.log</code></p> <p>\u6216\u8005<code>vim /var/log/mysqld.log</code> \u67e5\u627e\u76f8\u5173\u5bc6\u7801\u3002</p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u767b\u5f55\u6570\u636e\u5e93\u3002</li> </ol> <p><code>mysql -u root -p</code></p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u4fee\u6539MySQL\u9ed8\u8ba4\u5bc6\u7801\u3002</li> </ol> <p><code>set global validate_password_policy=0;  #\u4fee\u6539\u5bc6\u7801\u5b89\u5168\u7b56\u7565\u4e3a\u4f4e\uff08\u53ea\u6821\u9a8c\u5bc6\u7801\u957f\u5ea6\uff0c\u81f3\u5c118\u4f4d\uff09\u3002</code></p> <p><code>ALTER USER 'root'@'localhost' IDENTIFIED BY '12345678';</code></p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u6388\u4e88root\u7528\u6237\u8fdc\u7a0b\u7ba1\u7406\u6743\u9650\u3002</li> </ol> <p><code>GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY '12345678';</code>\uff08\u5f03\u7528\uff09</p> <p><code>grant all privileges on *.* to root@'localhost';</code></p> <ol> <li>\u8f93\u5165<code>exit</code>\u9000\u51fa\u6570\u636e\u5e93\u3002</li> </ol>"},{"location":"%E5%85%B6%E4%BB%96/%E9%85%8D%E7%BD%AELAMP/#php","title":"\u5b89\u88c5PHP","text":"<p>PHP\uff08PHP\uff1aHypertext Preprocessor\u9012\u5f52\u7f29\u5199\uff09\u4e2d\u6587\u540d\u5b57\u662f\uff1a\u201c\u8d85\u6587\u672c\u9884\u5904\u7406\u5668\u201d\uff0c\u662f\u4e00\u79cd\u5e7f\u6cdb\u4f7f\u7528\u7684\u901a\u7528\u5f00\u6e90\u811a\u672c\u8bed\u8a00\uff0c\u9002\u5408\u4e8eWeb\u7f51\u7ad9\u5f00\u53d1\uff0c\u5b83\u53ef\u4ee5\u5d4c\u5165HTML\u4e2d\u3002\u7f16\u7a0b\u8303\u578b\u662f\u9762\u5411\u5bf9\u8c61\u3001\u547d\u4ee4\u5f0f\u7f16\u7a0b\u7684\u3002</p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u4e0b\u547d\u4ee4\uff0c\u5b89\u88c5PHP\u73af\u5883\u3002\uff08\u53c8\u4e0d\u884c\u4e86\uff09</li> </ol> <p><code>yum -y install php php-mysql gd php-gd gd-devel php-xml php-common php-mbstring php-ldap php-pear php-xmlrpc php-imap</code></p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u521b\u5efaPHP\u6d4b\u8bd5\u9875\u9762\u3002</li> </ol> <p><code>echo \"&lt;?php phpinfo(); ?&gt;\" &gt; /var/www/html/phpinfo.php</code></p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u91cd\u542fApache\u670d\u52a1\u3002</li> </ol> <p><code>systemctl restart httpd</code></p> <ol> <li>\u5728\u672c\u5730\u6d4f\u89c8\u5668\u7684\u5740\u680f\u4e2d\uff0c\u8bbf\u95ee<code>http://\u670d\u52a1\u5668\u516c\u7f51ip/phpinfo.php</code>\uff0c\u663e\u793a\u5982\u4e0b\u9875\u9762\u8868\u793aPHP\u8bed\u8a00\u73af\u5883\u5b89\u88c5\u6210\u529f\u3002</li> </ol> <p></p>"},{"location":"%E5%85%B6%E4%BB%96/%E9%85%8D%E7%BD%AELAMP/#phpmyadmin","title":"\u5b89\u88c5phpMyAdmin","text":"<p>phpMyAdmin\u662f\u4e00\u4e2aMySQL\u6570\u636e\u5e93\u7ba1\u7406\u5de5\u5177\uff0c\u901a\u8fc7Web\u63a5\u53e3\u7ba1\u7406\u6570\u636e\u5e93\u65b9\u4fbf\u5feb\u6377\u3002</p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u521b\u5efaphpMyAdmin\u6570\u636e\u5b58\u653e\u76ee\u5f55\u3002</li> </ol> <p><code>mkdir -p /var/www/html/phpmyadmin</code></p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u4e0b\u8f7dphpMyAdmin\u538b\u7f29\u5305\u3002</li> </ol> <p><code>wget --no-check-certificate https://files.phpmyadmin.net/phpMyAdmin/4.0.10.20/phpMyAdmin-4.0.10.20-all-languages.zip</code></p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u5b89\u88c5unzip\u5e76\u89e3\u538bphpMyAdmin\u538b\u7f29\u5305\u3002</li> </ol> <p><code>yum install -y unzip</code></p> <p><code>unzip phpMyAdmin-4.0.10.20-all-languages.zip</code></p> <ol> <li>\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u590d\u5236phpMyAdmin\u6587\u4ef6\u5230\u6570\u636e\u5b58\u653e\u76ee\u5f55\u3002</li> </ol> <p><code>mv phpMyAdmin-4.0.10.20-all-languages/*  /var/www/html/phpmyadmin</code></p> <ol> <li>\u5728\u672c\u5730\u6d4f\u89c8\u5668\u7684\u5740\u680f\u4e2d\uff0c\u8f93\u5165http://\u5b9e\u4f8b\u516c\u7f51 IP/phpmyadmin\uff0c\u8bbf\u95eephpMyAdmin\u3002</li> </ol> <p>\u8fd4\u56de\u9875\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u8bf4\u660ephpMyAdmin\u5b89\u88c5\u6210\u529f\u3002</p> <p></p> <ol> <li>\u5728phpMyAdmin\u767b\u5f55\u9875\u9762\uff0c\u4f9d\u6b21\u8f93\u5165MySQL\u7684\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u5355\u51fb\u6267\u884c\u3002</li> </ol> <p></p> <p>\u200b   \u8fd4\u56de\u9875\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u8868\u793aMySQL\u8fde\u63a5\u6210\u529f\u3002</p> <p></p>"},{"location":"%E5%85%B6%E4%BB%96/%E9%9A%8F%E6%83%B3%E5%BD%95/","title":"\u968f\u60f3\u5f55","text":""},{"location":"%E5%85%B6%E4%BB%96/%E9%9A%8F%E6%83%B3%E5%BD%95/#tokensession","title":"Token\u548cSession\u7684\u533a\u522b","text":"<p>token\u7684\u4f18\u52bf\uff1a</p> <ol> <li>session\u5b58\u653e\u5728\u670d\u52a1\u5668\u5185\u5bb9\u4e2d\uff0c\u4f1a\u5360\u7528\u670d\u52a1\u5668\u8d44\u6e90\u3002token\u5219\u4e0d\u4f1a\u3002</li> <li>\u5982\u679c\u4f7f\u7528\u591a\u670d\u52a1\u5668\u8d1f\u8f7d\u5747\u8861\uff0c\u90a3\u4e48\u5728\u670d\u52a1\u56681\u4e2d\u5b58\u653e\u7684session\u4e0d\u80fd</li> </ol>"},{"location":"%E5%89%8D%E7%AB%AF/Promise/","title":"Promise","text":"<pre><code>&lt;script module&gt;\n    const rand = (m, n) =&gt; {\n        return Math.ceil(Math.random() * (n - m + 1)) + m - 1;\n    }\n    // \u7ed9Promise\u5bf9\u8c61\u4f20\u5165\u4e00\u4e2a\u533f\u540d\u51fd\u6570\uff0c\u51fd\u6570\u7684\u4e24\u4e2a\u53c2\u6570\u662fresolve\u548creject\uff0c\u8fd9\u4e24\u4e2a\u53c2\u6570\u90fd\u662f\u3010\u51fd\u6570\u3011\u5bf9\u8c61\n    const pro = new Promise((resolve, reject) =&gt; {\n        alert(\"\u6700\u5148\u6267\u884cPromise\u521d\u59cb\u5316\uff01\");\n        let num = rand(1, 100);\n        if (num % 2 === 0) resolve(num);\n        else reject(num);\n    });\n\n    // Promise\u5bf9\u8c61\u8c03\u7528then\u65b9\u6cd5\uff0c\u5411\u5176\u4e2d\u4f20\u5165\u4e24\u4e2a\u3010\u51fd\u6570\u3011\u5bf9\u8c61\n    // \u5982\u679cPromise\u521d\u59cb\u5316\u65f6\u8c03\u7528\u4e86resolve()\u51fd\u6570\uff0c\u5219\u6267\u884cthen\u4e2d\u7684\u7b2c\u4e00\u4e2a\u51fd\u6570\uff0c\u5426\u5219\u6267\u884cthen\u4e2d\u7684\u7b2c\u4e8c\u4e2a\u51fd\u6570\u3002\n    pro.then((num) =&gt; { alert(\"\u5076\u6570\uff1a\" + num) }, (num) =&gt; { alert(\"\u5947\u6570\uff1a\" + num) });\n&lt;/script&gt;\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/eslint/","title":"eslint","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/eslint/#_1","title":"\u53c2\u8003\u6587\u7ae0","text":"<p>\u6587\u7ae0</p>"},{"location":"%E5%89%8D%E7%AB%AF/eslint/#eslint_1","title":"\u5b89\u88c5eslint","text":"<ol> <li>\u672c\u5730\u521d\u59cbnpm</li> </ol> <p><code>bash    npm init -y</code></p> <ol> <li>\u672c\u5730\u5b89\u88c5\u5e76\u542f\u52a8eslint</li> </ol> <p><code>bash    npx eslint --init</code></p> <p>\u5173\u4e8e<code>npx</code>\uff0c\u53c2\u8003\u53e6\u4e00\u4e2a\u6587\u6863\u3002</p> <ol> <li> <p>\u81ea\u5b9a\u4e49\u9009\u62e9\u914d\u7f6eeslint\u3002</p> </li> <li> <p>\u521b\u5efa\u5b8ceslint\u540e\uff0c\u5b83\u7684\u7ea0\u9519\u89c4\u5219\u662f\u4ec0\u4e48\u5462\uff1f\u8f6f\u4ef6\u81ea\u5e26\u4e00\u4e9b\u914d\u7f6e\u3002\u540c\u65f6\u4e5f\u53ef\u80fd\u9700\u8981\u4eba\u4e3a\u914d\u7f6e\uff0c\u8fdb\u5165<code>.eslintrc.js</code>\u6587\u4ef6\u3002\uff08eslint\u4e5f\u53ef\u4ee5\u662fyaml\u6216json\u683c\u5f0f\uff09</p> </li> </ol> <p><code>js    module.exports = {        \"env\": {            \"browser\": true,            \"es2021\": true        },        \"extends\": \"eslint:recommended\",        \"overrides\": [        ],        \"parserOptions\": {            \"ecmaVersion\": \"latest\",            \"sourceType\": \"module\"        },        \"rules\": {        }    }</code></p> <p><code>rules</code>\u4ee5\u5916\u7684\u914d\u7f6e\u90fd\u662f\u4e0a\u4e00\u6b65\u8bbe\u5b9a\u7684\uff08\u4e0d\u7528\u5728\u4e4e\u5b83\u4eec\uff09\u3002</p> <p><code>rules</code>\u4e2d\u7684\u5185\u5bb9\u624d\u662f\u91cd\u70b9\uff01\u5982\u4f55\u914d\u7f6erules\u4e2d\u7684\u5185\u5bb9\u5462\uff1f\u8c37\u6b4c\u6216\u6839\u636e\u81ea\u5df1\u7684\u9879\u76ee\u3002</p> <p>\u5c5e\u6027\u6240\u4ee3\u8868\u7684\u503c\uff1a0\u8868\u793a\u5ffd\u7565\uff0c1\u8868\u793a\u8b66\u544a\uff0c2\u8868\u793a\u62a5\u9519</p> <p><code>js    \"rules\": {        \"quotes\": 2,        \"semi\": 2    }</code></p> <ol> <li>\u5047\u5b9a\u6211\u6709\u4e00\u4e2a<code>index.js</code>\uff0c\u5982\u4f55\u4f7f\u7528eslint\u68c0\u67e5<code>index.js</code>\u7684\u9519\u8bef\u5462\uff1f\u5e76\u4e14\u80fd\u81ea\u52a8\u7ea0\u9519\u5417\uff1f\u90fd\u53ef\u4ee5\uff01</li> </ol> <p><code>js    let a = 12    console.log('hello');</code></p> <p>\u8f93\u5165\u547d\u4ee4\uff1a<code>eslint index.js</code></p> <p>\u7ed3\u679c\u5982\u4e0b\uff1a</p> <p><code>1:11  warning  Missing semicolon semi    2:13  error    Strings must use doublequote  quotes</code></p> <p>\u4f7f\u7528\u7ea0\u9519\uff1a<code>eslint index.js --fix</code></p> <p>\u5907\u6ce8\uff1a\u4e0a\u8ff0\u6848\u4f8b\u4ec5\u7528\u4e8e\u6f14\u793aeslint\u7684\u4f7f\u7528\u65b9\u6cd5\u3002\uff08\u4e00\u822c\u8111\u5b50\u6709\u75c5\u624d\u7528\u4e0a\u9762\u7684\u914d\u7f6e\uff09</p>"},{"location":"%E5%89%8D%E7%AB%AF/eslint/#eslint_2","title":"eslint\u63d2\u4ef6","text":"<p>\u4e0a\u8ff0\u4f7f\u7528eslint\u7684\u6848\u4f8b\u6709\u4e00\u4e2a\u7f3a\u70b9\uff1a\u4e0d\u80fd\u4e00\u8fb9\u5199\u4ee3\u7801\uff0c\u4e00\u8fb9\u81ea\u52a8\u63d0\u793a\u9519\u8bef\u5e76\u4fee\u6539\u3002\u8fd9\u662f\u9700\u8981\u7528\u5230eslint\u63d2\u4ef6\u3002</p> <p>\u5b89\u88c5\u597deslint\u63d2\u4ef6\uff0c\u4e5f\u5c31\u914d\u7f6e\u597deslint\u7684\u57fa\u672c\u89c4\u8303\u3002\u4f46\u662f\u4f1a\u4f18\u5148\u6267\u884c\u81ea\u5df1\u914d\u7f6e<code>.eslintrc.js</code>\u6587\u4ef6\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/eslint/#prettier","title":"prettier","text":"<pre><code>npm i prettier -D\n</code></pre> <p>\u81ea\u5df1\u521b\u5efa<code>.prettierrc.js</code></p> <p>\u683c\u5f0f\u5316<code>index.js</code>\u6587\u4ef6</p> <pre><code>npx prettier --write index.js\n</code></pre> <p>prettier\u4e0d\u4ec5\u53ef\u4ee5\u683c\u5f0f\u5316js\u6587\u4ef6\uff0c\u8fd8\u53ef\u4ee5\u683c\u5f0f\u5316html\u548ccss\u6587\u4ef6\u3002\u800ceslint\u53ea\u80fd\u683c\u5f0f\u5316js\u6587\u4ef6\u3002</p> <p>\u6ce8\u610f\uff1aprettier\u548ceslint\u7684\u914d\u7f6e\u4e0d\u8981\u51b2\u7a81\uff01</p> <p>\u540c\u7406\uff1a\u5982\u679c\u6211\u4eec\u60f3\u8ba9\u4ee3\u7801\u81ea\u52a8\u4fdd\u5b58\u540e\u4f7f\u7528prettier\u683c\u5f0f\u5316\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528prettier\u63d2\u4ef6\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/eslint/#_2","title":"\u5b9e\u9645\u4f7f\u7528","text":"<p>\u4e00\u822c\u6765\u8bf4\uff0c\u4f7f\u7528\u811a\u624b\u67b6\u521b\u5efa\u597d\u9879\u76ee\u540e\uff0c\u4f1a\u81ea\u5e26<code>.eslintrc</code>\u548c<code>.prettierrc</code>\u6587\u4ef6\u3002\u6211\u4eec\u4e00\u822c\u6765\u8bf4\u4e5f\u4e0d\u9700\u8981\u4fee\u6539\u8fd9\u4e24\u4e2a\u6587\u4ef6\u3002\u6211\u4eec\u53ef\u80fd\u53ea\u9700\u8981\u5b89\u88c5eslint\u63d2\u4ef6\u548cprettier\u63d2\u4ef6\u5373\u53ef\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/vite%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/","title":"vite\u4f7f\u7528\u6307\u5357","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/vite%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/#vite_1","title":"vite\u662f\u4ec0\u4e48","text":"<p>vite\u662f\u4e00\u4e2a\u73b0\u4ee3\u5316\u7684\u524d\u7aef\u6784\u5efa\u5de5\u5177\uff0c\u53ef\u4ee5\u5e2e\u6211\u4eec\u505a\u5f88\u591a\u4e8b\u3002</p> <ol> <li>\u652f\u6301Vue\u3001React\u7b49\u6846\u67b6\u7684\u5f00\u53d1\u3002</li> <li>\u63d0\u4f9b\u5f00\u7bb1\u5373\u7528\u7684\u670d\u52a1\u5668\u3002</li> <li>\u652f\u6301\u8bed\u6cd5\u964d\u7ea7\u3002\uff08babel\uff09</li> <li>\u652f\u6301lass\u3001sass......</li> <li>\u652f\u6301\u76f4\u63a5\u4ecenode_modules\u4e2d\u5f15\u5165\u4ee3\u7801</li> <li>\u6253\u5305</li> </ol> <p>\u6211\u4eec\u53ea\u9700\u8981\u5199\u4ee3\u7801\u5373\u53ef\uff0c\u4e0d\u7528\u5173\u5fc3\u7f16\u8bd1\u8fc7\u7a0b\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/vite%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/#_1","title":"\u751f\u4ea7\u73af\u5883\u548c\u5f00\u53d1\u73af\u5883\u7684\u914d\u7f6e","text":"<p>\u5728\u6211\u7684\u9879\u76ee\u4e2d\uff0c\u533a\u5206\u751f\u4ea7\u73af\u5883\u548c\u5f00\u53d1\u73af\u5883\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u914d\u7f6e\u4e0d\u540c\u7684\u540e\u7aef\u5730\u5740\uff0c\u5728<code>package.json</code>\u6240\u5728\u7684\u540c\u7ea7\u76ee\u5f55\u4e0b\uff0c\u5206\u522b\u521b\u5efa<code>.env.development</code>\u548c<code>.env.production</code>\u6587\u4ef6\uff0c\u5e76\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\u3002</p> <p>.env.development</p> <pre><code>ENV = 'development'\n\nVITE_BACKEND_URL='http://localhost:8080'\n</code></pre> <p>.env.production</p> <pre><code>ENV = 'production'\n\nVITE_BACKEND_URL='http://xxx.xxx.xxx.xxx:xxxx'\n</code></pre> <p>\u5728\u4f7f\u7528\u53d8\u91cf<code>VITE_BACKEND_URL</code>\u7684\u65f6\u5019\uff0c\u6309\u7167\u8be5\u65b9\u5f0f\uff1a</p> <pre><code>import.meta.env.VITE_BACKEND_URL\n</code></pre> <p>\u5373\u53ef\u4f7f\u7528\u8be5\u53d8\u91cf\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%A5%BD%E6%96%87%E5%88%86%E4%BA%AB/","title":"\u524d\u7aef\u597d\u6587\u5206\u4eab","text":"<p>[toc]</p> <p>JS\u7684\u6267\u884c\u987a\u5e8f</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/","title":"\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u539f\u751f\u5f00\u53d1","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#_2","title":"\u5199\u5728\u524d\u9762","text":"<p>\u6574\u4e2a\u9879\u76ee\u9700\u8981\u638c\u63e1Vue2\u3002\u5e02\u9762\u4e0a\u5bf9\u4e8eVue3\u7684\u6846\u67b6\u90fd\u4e0d\u592a\u7a0b\u5e8f\uff0c\u7efc\u5408\u8003\u8651\uff0c\u8fd8\u662f\u4f7f\u7528Vue2\u3002</p> <p>\u672c\u9879\u76ee\u4f7f\u7528\u7684\u7ec4\u4ef6\u5e93\u6709Vant Weapp UI\u3001tdesign\u3001colorui\u3001iview\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#_3","title":"\u521b\u5efa\u9879\u76ee","text":"<p>\u4e0b\u8f7d\u5fae\u4fe1\u5f00\u53d1\u8005\u5de5\u5177\uff08\u5f88\u7b80\u5355\uff09\u3002</p> <p>\u901a\u8fc7npm\u6784\u5efa\u9879\u76ee\uff0c\u53c2\u8003\u3002</p> <p>\u4e86\u89e3\u5c0f\u7a0b\u5e8f\u7684\u6587\u4ef6\u7ed3\u6784\uff0c\u53c2\u8003\u3002</p> <p>\u4e86\u89e3\u5c0f\u7a0b\u5e8f\u7684\u57fa\u672c\u914d\u7f6e\uff0c\u53c2\u8003\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#_4","title":"\u521b\u5efa\u9875\u9762","text":"<p><code>app.json</code>\u6587\u4ef6\u4e2d\u7ed9<code>\"pages\"</code>\u5c5e\u6027\u914d\u7f6e\u9875\u9762\u53c2\u6570\u8def\u5f84\u5373\u53ef\uff0c\u8f6f\u4ef6\u4f1a\u81ea\u52a8\u5e2e\u6211\u4eec\u521b\u5efa\u754c\u9762\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#_5","title":"\u521b\u5efa\u5e95\u90e8\u5bfc\u822a\u680f","text":"<p><code>app.json</code>\u6587\u4ef6\u4e2d\uff0c\u6309\u7167\u4e0b\u5217\u683c\u5f0f\u586b\u5199\u9875\u9762\u4fe1\u606f\u5373\u53ef\u3002\uff08\u786e\u4fdd\u9875\u9762\u5728\"pages\"\u5c5e\u6027\u4e2d\u5df2\u914d\u7f6e\uff09\u3002</p> <pre><code>\"tabBar\": {\n  \"list\": [{\n    \"pagePath\": \"pages/index/index\",\n    \"text\": \"\u4e3b\u9875\"\n  }, {\n    \"pagePath\": \"pages/passage/passage\",\n    \"text\": \"\u6587\u7ae0\"\n  }, {\n    \"pagePath\": \"pages/test_page/test_page\",\n    \"text\": \"\u6d4b\u8bd5\"\n  }]\n}\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#_6","title":"\u9875\u9762\u8df3\u8f6c","text":"<p>\u5982\u679c\u4f60\u60f3\u8981\u8df3\u8f6c\u7684\u754c\u9762\u4e0d\u5c5e\u4e8etabBar\uff0c\u5219\u53ef\u4ee5\u8fd9\u6837\u64cd\u4f5c\uff1a</p> <pre><code>wx.navigateTo({\n  url: '/pages/history/history',\n})\n</code></pre> <p>\u5982\u679c\u4f60\u60f3\u8981\u8df3\u8f6c\u7684\u754c\u9762\u5c5e\u4e8etabBar\uff0c\u5219\u53ef\u4ee5\u8fd9\u6837\u64cd\u4f5c\uff1a</p> <pre><code>wx.switchTab({\n  url: '/pages/index/index',\n})\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#vant-webapp-ui","title":"Vant webapp UI \u7ec4\u4ef6\u5e93","text":"<p>\u5f15\u5165\u9879\u76ee\uff1a\u53c2\u8003\u5b98\u65b9\u6587\u6863\uff0c\u6ce8\u610f\u7ec6\u8282\u3002\u6ce8\u610f\u7248\u672c\u53f7\u5927\u4e8e\u7b49\u4e8e1.10.4\uff01</p> <p>\u5f15\u5165\u7ec4\u4ef6\uff1a\u53c2\u8003\u5b98\u65b9\u6587\u6863\uff0c\u7167\u732b\u753b\u732b \u5730\u5b66\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#_7","title":"\u63a7\u5236\u8bed\u53e5","text":""},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#for","title":"for\u5faa\u73af","text":"<p>\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u7cfb\u7edf\u540c\u4e00\u5b9a\u4e49\u4e3aitem\uff0c\u4e5f\u53ef\u4ee5\u5199\u6210 <code>&lt;view wx:for=\"{{goods}}\" wx:for-item=\"item\"&gt;</code>\u3002</p> <pre><code>&lt;view wx:for=\"{{goods}}\"&gt;\n  &lt;van-card\n    num=\"{{item.num}}\"\n    tag=\"{{item.tag}}\"\n    price=\"{{item.price}}\"\n    desc=\"{{item.desc}}\"\n    title=\"{{item.title}}\"\n    thumb=\"{{item.thumb}}\"\n  &gt;\n    &lt;view slot=\"footer\"&gt;\n      &lt;van-button size=\"mini\"&gt;\u4e70\u4e0b&lt;/van-button&gt;\n    &lt;/view&gt;\n  &lt;/van-card&gt;\n&lt;/view&gt;\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#_8","title":"\u524d\u7aef\u5b9e\u6218\u6848\u4f8b","text":""},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#input","title":"\u83b7\u53d6input\u6846\u4e2d\u8f93\u5165\u7684\u5185\u5bb9","text":"<p>test.js</p> <pre><code>Page({\n  data: {\n    msg: \"\"\n  },\n  handleInput(e) {\n    this.setData({\n      msg: e.detail.value\n    })\n    console.log(\"msg=\", this.data.msg)\n  }\n})\n</code></pre> <p>test.wxml</p> <pre><code>&lt;input type=\"text\" value=\"{{msg}}\" bindinput=\"handleInput\"/&gt;\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#_9","title":"\u641c\u7d22\u6846\u6570\u636e\u7684\u53cc\u5411\u7ed1\u5b9a","text":"<p>wxml \u6587\u4ef6\uff08vant weapp\uff09</p> <p>\u65b9\u6cd5\u4e00\uff1a\u4f7f\u7528<code>model:value</code></p> <p>\u6ce8\u610f\uff1a\u5fc5\u987b\u662fmodel:value\uff0c\u53f3\u4fa7\u7684\u53d8\u91cf\u53ef\u4ee5\u4e0d\u662fvalue\u3002</p> <pre><code>&lt;van-search \n  bind:search=\"onSearch\" \n  model:value=\"{{name}}\"\n  placeholder=\"\u8bf7\u8f93\u5165\u641c\u7d22\u5173\u952e\u8bcd\" \n/&gt;\n</code></pre> <p>js \u6587\u4ef6</p> <pre><code>data: {\n    name: \"\"\n},\nonSearch(e) {\n    wx.showToast({\n        title: '\u641c\u7d22' + this.data.name,\n    })\n},\n</code></pre> <p>\u65b9\u6cd5\u4e8c\uff1a\u4f7f\u7528<code>this.setData({})</code></p> <pre><code>&lt;van-search \n  bind:search=\"onSearch\" \n  value=\"{{value}}\"\n  placeholder=\"\u8bf7\u8f93\u5165\u641c\u7d22\u5173\u952e\u8bcd\" \n/&gt;\n</code></pre> <pre><code>onSearch(e) {\n    this.setData({\n        value: e.detail\n    })\n    wx.showToast({\n        title: '\u641c\u7d22' + this.data.value,\n    })\n},\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#_10","title":"\u9875\u9762\u89e6\u5e95\u4e8b\u4ef6\u7684\u914d\u7f6e","text":"<p>\u81ea\u5b9a\u4e49\u89e6\u5e95\u51fa\u53d1\u7684\u8ddd\u79bb\uff0c<code>onReachBottomDistance</code>\u7684\u503c\u9ed8\u8ba4\u662f50\u3002</p> <pre><code>\"window\": {\n    \"onReachBottomDistance\": 100\n  },\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#_11","title":"\u6570\u636e\u76d1\u542c\u5668","text":"<p>\u5b98\u65b9\u6559\u7a0b</p> <p>\u6848\u4f8b\uff1a</p> <p>passage\u7ec4\u4ef6\u4e2d</p> <p>passage.wxml</p> <pre><code>&lt;view&gt;{{num1}} + {{num2}} = {{sum}}&lt;/view&gt;\n&lt;button bindtap=\"addNum1\"&gt;num1 + 1&lt;/button&gt;\n&lt;button bindtap=\"addNum2\"&gt;num2 + 1&lt;/button&gt;\n</code></pre> <p>passage.js</p> <pre><code>// components/passage/passage.js\nComponent({\n  /**\n   * \u7ec4\u4ef6\u7684\u521d\u59cb\u6570\u636e\n   */\n  data: {\n    num1: 1,\n    num2: 2,\n    sum: 3\n  },\n  /**\n   * \u7ec4\u4ef6\u7684\u65b9\u6cd5\u5217\u8868\n   */\n  methods: {\n    addNum1: function() {\n      this.setData({num1: this.data.num1 + 1})\n    },\n    addNum2: function() {\n      this.setData({num2: this.data.num2 + 1})\n    }\n  },\n  observers: {\n    'num1, num2': function(num1, num2) {\n      this.setData({\n        sum: num1 + num2\n      });\n    }\n  }\n})\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#_12","title":"\u7ec4\u4ef6\u7684\u751f\u547d\u5468\u671f","text":"<p>\u5b98\u65b9\u6587\u6863</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#_13","title":"\u7ec4\u4ef6\u6240\u5728\u9875\u9762\u7684\u751f\u547d\u5468\u671f","text":"<p>\u5927\u81f4\u770b\u770b\u5b98\u65b9\u6587\u6863\uff0c\u7136\u540e\u7ed3\u5408\u4e0b\u9762\u6848\u4f8b\u3002</p> <p>\u5f53\u7ec4\u4ef6\u6240\u5728\u7684\u9875\u9762\u663e\u793a\uff08\u6216\u9690\u85cf\uff09\u65f6\uff0c\u6211\u4eec\u5e0c\u671b\u505a\u4e00\u4e9b\u4e8b\u3002</p> <pre><code>// components/passage/passage.js\nComponent({\n  pageLifetimes: {\n    show: function() {\n      console.log(\"\u8fdb\u5165\u4e86\u7ec4\u4ef6\u6240\u5728\u7684\u754c\u9762\uff01\");\n    },\n    hide: function() {\n      console.log(\"\u79bb\u5f00\u4e86\u7ec4\u4ef6\u6240\u5728\u7684\u754c\u9762\uff01\");\n    }\n  }\n})\n</code></pre> <p>\u7136\u540e\u5c06\u8be5\u7ec4\u4ef6\u5f15\u5165\u5230\u67d0\u4e2a\u9875\u9762\uff0c\u89c2\u5bdf\u6548\u679c\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#slot","title":"\u63d2\u69fd\uff08slot\uff09","text":"<p>\u5355\u4e2a\u63d2\u69fd</p> <p>\u7ec4\u4ef6\u4e2d</p> <pre><code>&lt;!--components/passage/passage.wxml--&gt;\n&lt;view&gt;\u8fd9\u6709\u4e00\u4e2a\u63d2\u69fd\uff1a&lt;slot&gt;&lt;/slot&gt;&lt;/view&gt;\n</code></pre> <p>\u4f7f\u7528\u7ec4\u4ef6\u7684\u754c\u9762</p> <pre><code>&lt;!--index.wxml--&gt;\n&lt;passage&gt;\u8fd9\u662f\u9875\u9762\u4f20\u8fc7\u6765\u7684\u5185\u5bb9&lt;/passage&gt;\n</code></pre> <p>\u591a\u4e2a\u63d2\u69fd\uff1a</p> <p>\u9700\u8981\u5148\u5728\u7ec4\u4ef6\u7684js\u6587\u4ef6\u4e2d\u505a\u914d\u7f6e\u3002</p> <p>passage.js</p> <pre><code>// components/passage/passage.js\nComponent({\n  options: {\n    multipleSlots: true\n  }\n})\n</code></pre> <p>passage.wxml \uff08\u7ec4\u4ef6\uff09</p> <pre><code>&lt;!--components/passage/passage.wxml--&gt;\n&lt;view&gt;\u5934\u90e8\u63d2\u69fd\uff1a&lt;slot name=\"head\"&gt;&lt;/slot&gt;&lt;/view&gt;\n&lt;view&gt;\u4e2d\u90e8\u63d2\u69fd\uff1a&lt;slot name=\"middle\"&gt;&lt;/slot&gt;&lt;/view&gt;\n&lt;view&gt;\u5c3e\u90e8\u63d2\u69fd\uff1a&lt;slot name=\"tail\"&gt;&lt;/slot&gt;&lt;/view&gt;\n</code></pre> <p>index.html\uff08\u9875\u9762\uff09</p> <pre><code>&lt;!--index.wxml--&gt;\n&lt;passage&gt;\n  &lt;view slot=\"middle\"&gt;\u4f20\u7ed9\u4e2d\u90e8\u63d2\u69fd\u7684\u6570\u636e&lt;/view&gt;\n  &lt;view slot=\"tail\"&gt;\u4f20\u7ed9\u5c3e\u90e8\u63d2\u69fd\u7684\u6570\u636e&lt;/view&gt;\n&lt;/passage&gt;\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#token","title":"\u5c06\u540e\u7aef\u4f20\u6765\u7684token\u653e\u5728\u672c\u5730","text":"<p>\u5b98\u65b9\u6587\u6863</p> <pre><code>wx.setStorageSync(string key, any data)\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#_14","title":"\u81ea\u5b9a\u4e49\u6ed1\u52a8\u5355\u5143\u683c","text":"<p>vant weapp\u5b98\u65b9\u6587\u6863</p> <p>\u4f7f\u7528\u524d\u5148\u5f15\u5165\u76f8\u5173\u7ec4\u4ef6\u3002</p> <p>wxml\u6587\u4ef6</p> <pre><code>&lt;!-- \u5b9a\u4e49\u5de6\u6ed1/\u53f3\u6ed1\u7684\u663e\u793a\u5bbd\u5ea6(\u5355\u4f4d\u662fpx) --&gt;\n&lt;van-swipe-cell right-width=\"{{ 65 }}\" left-width=\"{{ 65 }}\"&gt;\n  &lt;!-- \u5b9a\u4e49\u5de6\u6ed1\u7684\u5185\u5bb9 --&gt;\n  &lt;view slot=\"left\"&gt;\u6536\u85cf&lt;/view&gt;\n  &lt;!-- \u81ea\u5b9a\u4e49\u6ed1\u52a8\u5355\u5143\u683c\u4e2d\u7684\u5185\u5bb9 --&gt;\n  &lt;van-card\n    num=\"2\"\n    price=\"2.00\"\n    desc=\"\u63cf\u8ff0\u4fe1\u606f\"\n    title=\"\u5546\u54c1\u6807\u9898\"\n  /&gt;\n  &lt;!-- \u5b9a\u4e49\u53f3\u6ed1\u7684\u5185\u5bb9 --&gt;\n  &lt;view slot=\"right\" class=\"right\" bindtap=\"onDelete\"&gt;\u5220\u9664&lt;/view&gt;\n&lt;/van-swipe-cell&gt;\n</code></pre> <p>wxss\u6587\u4ef6\uff08\u975e\u5fc5\u987b\uff09</p> <pre><code>.right{\n  background-color: red;\n  height: inherit;\n  width: 65px;\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n</code></pre> <p>js\u6587\u4ef6</p> <pre><code>Page({\n  onDelete() {\n    console.log(\"\u5220\u9664\uff01\");\n  }\n});\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#_15","title":"\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u7684\u4e00\u952e\u767b\u5f55","text":"<p>\u767b\u5f55\u529f\u80fd\u6574\u4f53\u6d41\u7a0b</p> <p>\u5b98\u65b9\u6587\u6863</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#_16","title":"\u601d\u8def","text":"<p>\u9996\u5148\u8c03\u7528<code>wx.login()</code>\u83b7\u53d6\u4e00\u4e2a\u4e34\u65f6\u767b\u5f55\u51ed\u8bc1code\uff08String\uff09\uff0c\u4f20\u9001\u7ed9\u5f00\u53d1\u8005\u670d\u52a1\u5668\uff0c\u5f00\u53d1\u8005\u670d\u52a1\u5668\u518d\u52a0\u4e0a<code>appid</code>\u548c<code>secret</code>\u53d1\u9001\u7ed9\u5fae\u4fe1\u670d\u52a1\u5668\u3002\u5fae\u4fe1\u670d\u52a1\u5668\u8fd4\u56de<code>session_key</code>,<code>openid</code>,<code>unionid</code>\uff08\u4e0d\u4e00\u5b9a\u6709\uff09\u7ed9\u5f00\u53d1\u8005\u670d\u52a1\u5668\uff0c\u5f00\u53d1\u8005\u670d\u52a1\u5668\u901a\u8fc7<code>openid</code>\u6216<code>unionid</code>\u5728\u81ea\u5df1\u7684\u6570\u636e\u5e93\u4e2d\u83b7\u53d6\u7528\u6237\u4fe1\u606f\uff0c\u901a\u8fc7JWT\u6280\u672f\u5c06\u7528\u6237\u76f8\u5173\u4fe1\u606f\uff08\u4e0d\u5305\u542bopenid,unionid,session_key\uff09\u5b58\u653e\u5728token\u4e2d\uff0c\u8fd4\u56de\u7ed9\u524d\u7aef\u3002</p> <p></p> <p>\u6709\u65f6\u4e3a\u4e86\u8c03\u8bd5\u65b9\u4fbf\uff0c\u76f4\u63a5\u5728\u524d\u7aef\u53d1\u9001<code>code</code>,<code>appid</code>,<code>secret</code>\uff0c\u5fae\u4fe1\u670d\u52a1\u5668\u8fd4\u56de<code>openid</code>\u548c<code>session_key</code>\u7b49\u3002</p> <p><code>session_key</code>\u7684\u4f5c\u7528\uff1asession_key\u7684\u4f5c\u7528\u4e4b\u4e00\u662f\u5c06\u5c0f\u7a0b\u5e8f\u524d\u7aef\u4ece\u5fae\u4fe1\u670d\u52a1\u5668\u83b7\u53d6\u5230\u7684encryptedData \u89e3\u5bc6\u51fa\u6765\uff0c\u83b7\u53d6\u5230openId \u548cunionId\u7b49\u4fe1\u606f\u3002\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7<code>wx.login()</code>\u83b7\u53d6\u5230openId\u548cunionId\u3002session_key \u66f4\u91cd\u8981\u7684\u4f5c\u7528\u5927\u6982\u4f53\u73b0\u5728\u83b7\u53d6\u7528\u6237\u624b\u673a\u65b9\u9762\uff08\u53ef\u80fd\u8fd8\u5305\u542b\u5176\u4ed6\u654f\u611f\u4fe1\u606f\u83b7\u53d6api\uff09\u3002\u4f46\u662f\u5bf9\u4e8e\u4e0d\u9700\u8981\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u7684\u7a0b\u5e8f\u800c\u8a00\uff0csession_key\u6ca1\u7528\uff01\u5e76\u4e14\u4e0d\u8981\u628asession_key\u53d1\u9001\u7ed9\u524d\u7aef\uff01 </p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#_17","title":"\u4ee3\u7801","text":"<p>\u6d4b\u8bd5\u7248\u4ee3\u7801\uff08\u4ec5\u9700\u5305\u542b\u524d\u7aef\uff09</p> <p>login.wxml</p> <pre><code>&lt;button bindtap=\"login\"&gt;\u767b\u5f55&lt;/button&gt;\n</code></pre> <p>login.js</p> <pre><code>Page({\n  login: function() {\n    wx.login({\n      success: res =&gt; {\n        let code = res.code;\n        console.log(code);\n        wx.request({\n          // \u901a\u8fc7\u6b64 url \uff0c\u83b7\u53d6 openid \u4e0e unionid\n          url: \"https://api.weixin.qq.com/sns/jscode2session\",\n          method: \"GET\",\n          data: {\n            //\u5c0f\u7a0b\u5e8f\u7684appid\n            'appid': \"your wechat appid\",\n            // \u5c0f\u7a0b\u5e8f\u7684secret\n            'secret': \"your wechat secret\",\n            // wx.login()\u8fd4\u56de\u7684\u767b\u5f55\u51ed\u8bc1\n           'js_code': code,\n            // \u56fa\u5b9a\u503c,\u4e0d\u9700\u8981\u6539\u53d8\n            'grant_type': 'authorization_code'\n           },\n          success: res =&gt; {\n            // \u8fd4\u56de\u7684 openid\n            console.log(res.data.openid);\n            // \u8fd4\u56de\u7684\u4f1a\u8bdd\u5bc6\u94a5\n            console.log(res.data.session_key);\n            // \u6ce8\u610f\uff1a\u4e0a\u9762\u4e24\u4e2a\u5b57\u6bb5\u503c\u5fc5\u5b9a\u4f1a\u8fd4\u56de\uff0cunionid \u5219\u53ea\u4f1a\u5728\u6ee1\u8db3\u4e00\u5b9a\u6761\u4ef6\u4e0b\u8fd4\u56de\uff0c\u4e0d\u662f\u5fc5\u5b9a\u4f1a\u8fd4\u56de\u7684\u503c\n            console.log(res.data.unionid);\n           }\n         });    \n      },\n      fail: res =&gt; {\n        console.log(\"\u767b\u5f55\u5931\u8d25\uff01\");\n      }\n    })\n  }\n});\n</code></pre> <p>\u6b63\u5f0f\u7248\uff08\u5305\u542b\u524d\u540e\u7aef\uff09</p> <p>\u524d\u7aef</p> <p>login.wxml</p> <pre><code>&lt;button bindtap=\"login\"&gt;\u767b\u5f55&lt;/button&gt;\n</code></pre> <p>login.js</p> <pre><code>Page({\n  login: function() {\n    wx.login({\n      success: res =&gt; {\n        let code = res.code;\n        console.log(code);\n        wx.request({\n          url: \"http://localhost:8080/login\",\n          method: \"POST\",\n          data: {\n              'js_code': code\n           },\n          success: res =&gt; {\n              console.log(res);\n           }\n         });    \n      },\n      fail: res =&gt; {\n        console.log(\"\u767b\u5f55\u5931\u8d25\uff01\");\n      }\n    })\n  }\n});\n</code></pre> <p>\u540e\u7aef</p> <p>\u5f15\u5165\u4f9d\u8d56\uff1a</p> <pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;cn.hutool&lt;/groupId&gt;\n    &lt;artifactId&gt;hutool-all&lt;/artifactId&gt;\n    &lt;version&gt;5.8.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre> <p>LoginController.java</p> <p>\u53d1\u9001\u6570\u636e\u5e94\u8be5\u662f\u5728service\u5c42\u505a\uff0c\u4f46\u662f\u4e3a\u4e86\u65b9\u4fbf\u6f14\u793a\uff0c\u5c06\u5176\u5168\u90e8\u5199\u5728\u4e86controller\u5c42\u3002</p> <pre><code>@RestController\n@RequestMapping(\"/login\")\npublic class LoginController {\n    private String appid = \"your wechat appid\";\n    private String secret = \"your wechat secret\";\n    @PostMapping(\"\")\n    public String login(@RequestBody Map&lt;String, Object&gt; info) {\n        String code = info.get(\"js_code\").toString();\n        String url = \"https://api.weixin.qq.com/sns/jscode2session?appid={0}&amp;secret={1}&amp;js_code={2}&amp;grant_type=authorization_code\";\n        String replaceUrl = url.replace(\"{0}\", appid).replace(\"{1}\", secret).replace(\"{2}\", code);\n        // \u5411\u5fae\u4fe1\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\n        String res = HttpUtil.get(replaceUrl);\n        System.out.println(res);\n        // \u8fd4\u56de\u503c\u53ef\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u81ea\u884c\u8bbe\u5b9a\n        return res;\n    }\n}\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#_18","title":"\u5b98\u65b9\u6587\u6863\u7684\u8865\u5145","text":"<p>auth.code2Session \u63a5\u53e3\uff1a\u5f00\u53d1\u8005\u670d\u52a1\u5668\u5411\u5fae\u4fe1\u670d\u52a1\u5668\u53d1\u9001<code>appid</code>,<code>secret</code>,<code>js_code</code>(\u901a\u8fc7wx.login()\u83b7\u5f97)\uff0c\u5fae\u4fe1\u670d\u52a1\u5668\u8fd4\u56de<code>openid</code>,<code>session_key</code>,<code>unionid</code>\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#request","title":"\u5c01\u88c5request\uff08\u7f51\u7edc\u8bf7\u6c42\uff09","text":"<p>\u6a21\u677f</p> <p>/request/index.js \u6587\u4ef6\u4e2d</p> <pre><code>// \u540c\u65f6\u53d1\u9001\u5f02\u6b65\u8bf7\u6c42\u7684\u6b21\u6570\nlet ajaxTimes = 0;\nexport const request = (params) =&gt; {\n  ajaxTimes ++;\n  wx.showLoading({\n    title: '\u52a0\u8f7d\u4e2d',\n    mask: true\n  })\n\n  // \u540e\u53f0\u7684\u8bf7\u6c42\u5730\u5740\uff0c\u8bb0\u5f97\u4fee\u6539\u6210\u4f60\u81ea\u5df1\u7684\u5730\u5740\n  const baseUrl = 'http://localhost:8080';\n\n  return new Promise((resolve, reject) =&gt; {\n    wx.request({\n      ...params,\n      url: baseUrl + params.url,\n      success: (result) =&gt; {\n        resolve(result.data);\n      },\n      fail: (err) =&gt; {\n        reject(err);\n      },\n      complete: () =&gt; {\n        ajaxTimes --;\n        if(ajaxTimes === 0) {  // \u6240\u6709\u8bf7\u6c42\u90fd\u5b8c\u6210\u540e\u518d\u5173\u95ed\u63d0\u793a\n          wx.hideLoading();\n        }\n      },\n    })\n  })\n}\n</code></pre> <p>\u4f7f\u7528\u65f6\uff1a</p> <pre><code>// \u5f15\u5165request\u6240\u5728\u7684index\u6587\u4ef6\nimport { request } from \"../../request/index\"\n\nPage({\n  data: {\n    names: [],\n    count: 0\n  },\n  onLoad(options) {\n    request({\n      url: \"/getinfo\",\n      method: \"get\",\n      data: {},\n    }).then(res =&gt; {\n      let namesTmp = this.data.names;\n      namesTmp.push([\"lhl\", \"hahaha\", \"kao\"]);\n      this.setData({\n        names: namesTmp\n      })\n    })\n  },\n})\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#mobx","title":"MobX","text":""},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#_19","title":"\u914d\u7f6e","text":"<pre><code>npm install --save mobx-miniprogram mobx-miniprogram-bindings\n</code></pre> <p>\u5220\u9664<code>miniprogram_npm</code>\u76ee\u5f55\u540e\uff0c\u91cd\u65b0\u6784\u5efanpm\u3002</p> <pre><code>// store.js\nimport { observable, action } from 'mobx-miniprogram'\n\nexport const store = observable({\n  // \u5171\u4eab\u6570\u636e\n  numA: 1,\n  numB: 2,\n\n  // \u8ba1\u7b97store\u4e2d\u7684\u5c5e\u6027\uff0c\u51fd\u6570\u524d\u8981\u52a0get\n  get sum() {\n    return this.numA + this.numB;\n  },\n\n  // \u901a\u8fc7action\u65b9\u6cd5 \u7528\u4e8e\u4fee\u6539store\u4e2d\u7684\u503c\n  updateNum1: action(function(step) {\n    this.numA += step;\n  }),\n\n  updateNum2: action(function(step) {\n    this.numB += step;\n  })\n})\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#mobx_1","title":"\u9875\u9762\u4e2d\u4f7f\u7528MobX","text":"<pre><code>// pages/test_page/test_page.js\nimport { createStoreBindings } from 'mobx-miniprogram-bindings';\nimport { store } from '../../store/store';\n\nPage({\n  onLoad: function() {  // \u751f\u547d\u5468\u671f\u51fd\u6570 -- \u76d1\u542c\u9875\u9762\u52a0\u8f7d\n    // \u5173\u4e8ecreateStoreBindings\u7684\u53c2\u6570\uff1a\n    // \u53c2\u6570this\u662f\u6307store\u4e2d\u7684\u6570\u636e\u7ed1\u5b9a\u5230\u5f53\u524d\u754c\u9762\uff08\u4e5f\u5c31\u662fthis\uff09\n    // \u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u914d\u7f6e\u5bf9\u8c61\uff0c\u5305\u542b3\u4e2a\u5c5e\u6027\n    // \u7b2c\u4e00\u4e2a\u5c5e\u6027\u662fstore\uff0c\u4ee3\u8868\u6570\u636e\u6e90\n    // \u7b2c\u4e8c\u4e2a\u5c5e\u6027fields\u4ee3\u8868\u8981\u5c06store\u4e2d\u7684\u54ea\u4e9b\u5b57\u6bb5\u7ed1\u5b9a\u5230\u5f53\u524d\u9875\u9762\n    // \u7b2c\u4e09\u4e2a\u5c5e\u6027actions\u4ee3\u8868\u8981\u5c06store\u4e2d\u7684\u54ea\u4e9b\u65b9\u6cd5\u7ed1\u5b9a\u5230\u5f53\u524d\u9875\u9762\n    // this.storeBindings\u63a5\u6536createStoreBindings\u51fd\u6570\u7684\u8fd4\u56de\u503c\uff0c\u4f5c\u7528\u662f\u5f53\u9875\u9762\u5378\u8f7d\u65f6\uff0c\u6e05\u7a7a\u4e00\u4e9b\u6570\u636e\n    this.storeBindings = createStoreBindings(this, {\n      store,\n      fields: ['numA', 'numB', 'sum'],\n      actions: ['updateNum1', 'updateNum2']\n    })\n  },\n\n  onUnload: function() {\n    // \u6e05\u7406\u7ed1\u5b9a\u5230\u9875\u9762\u4e0a\u7684\u6570\u636e\uff0c\u5426\u5219\u4f1a\u9020\u6210\u5185\u5b58\u6cc4\u6f0f\n    this.storeBindings.destroyStoreBindings()\n  },\n  modifyNum1(e) {\n    console.log(e)\n    this.updateNum1(e.target.dataset.step)\n  },\n  modifyNum2(e) {\n    this.updateNum2(e.target.dataset.step)\n  },\n})\n</code></pre> <p>\u51fd\u6570\u53c2\u6570\u9700\u8981\u5199\u6210data-\u53c2\u6570\u540d\u7684\u5f62\u5f0f\u3002</p> <pre><code>&lt;!--pages/test_page/test_page.wxml--&gt;\n&lt;view&gt;{{numA}} + {{numB}} = {{sum}}&lt;/view&gt;\n&lt;van-button type=\"primary\" bindtap=\"modifyNum1\" data-step=\"{{1}}\"&gt;numA + 1&lt;/van-button&gt;\n&lt;van-button type=\"primary\" bindtap=\"modifyNum1\" data-step=\"{{-1}}\"&gt;numA - 1&lt;/van-button&gt;\n&lt;view&gt;&lt;/view&gt;\n&lt;van-button type=\"primary\" bindtap=\"modifyNum2\" data-step=\"{{1}}\"&gt;numB + 1&lt;/van-button&gt;\n&lt;van-button type=\"primary\" bindtap=\"modifyNum2\" data-step=\"{{-1}}\"&gt;numB - 1&lt;/van-button&gt;\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#mobx_2","title":"\u7ec4\u4ef6\u4e2d\u4f7f\u7528MobX","text":"<pre><code>// components/my-text/my-text.js\nimport { storeBindingsBehavior } from 'mobx-miniprogram-bindings';\nimport { store } from '../../store/store';\n\nComponent({\n  behaviors: [storeBindingsBehavior],\n  storeBindings: {\n    store,\n    fields: {\n      numA: \"numA\",  // \u7b2c\u4e00\u79cd\u7ed1\u5b9a\u65b9\u5f0f\n      numB: \"numB\",  // \u7b2c\u4e8c\u79cd\u7ed1\u5b9a\u65b9\u5f0f\n      sum: 'sum'  // \u7b2c\u4e09\u79cd\u7ed1\u5b9a\u65b9\u5f0f\n    },\n    // \u6ce8\u610f\u662factions\n    actions: {\n      // \u53f3\u8fb9\u662fstore\u4e2d\u7684\u51fd\u6570\uff0c\u5de6\u8fb9\u662fthis\u4e2d\u7684\u51fd\u6570\n      updateNum2: 'updateNum2'\n    }, \n  },\n  methods: {\n    modifyNum2(e) {\n      this.updateNum2(e.target.dataset.step)\n    },\n  }\n})\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#components","title":"\u4f7f\u7528\u81ea\u5b9a\u4e49Components\u7ec4\u4ef6","text":""},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#mobx-store","title":"MobX Store","text":""},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#_20","title":"\u77e5\u8bc6\u70b9","text":""},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#openidunionid","title":"openid\u548cunionid\u7684\u533a\u522b","text":""},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#_21","title":"\u4e00\u4e9b\u5de8\u5751","text":""},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/#componentbindtap","title":"Component\u7ec4\u4ef6\u4e2d\u7684bindtap","text":"<p>\u8981\u653e\u5728methods\u4e2d\u624d\u884c\uff01</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E6%97%A5%E6%9C%9F%E9%97%AE%E9%A2%98/","title":"\u65e5\u671f\u95ee\u9898","text":"<pre><code>let startDate = new Date(\"2023-08-28\")\nlet startTime = startDate.getTime()\n\nlet nowDate = new Date()\nlet nowTime = nowDate.getTime()\n// let nowTime = nowDate.getTime()\n\n// \u4eca\u5929\u8ddd\u79bb\u8d77\u59cb\u65e5\u671f\u8fc7\u4e86\u591a\u5c11\u4e2a\u5b8c\u6574\u7684\u4e00\u5929\nlet days = Math.floor((nowTime - startTime) / 1000 / 60 / 60 / 24)\n// alert(days)\n\n// \u4eca\u5929\u8ddd\u79bb\u8d77\u59cb\u65e5\u671f\u8fc7\u4e86\u591a\u5c11\u4e2a\u5b8c\u6574\u7684\u4e00\u5468\nlet weeks = Math.floor((nowTime - startTime) / 1000 / 60 / 60 / 24 / 7)\n// alert(weeks)\n\n// \u4eca\u5929\u662f\u7b2c\u51e0\u5468\uff0c\u661f\u671f\u51e0\nlet nowDateDay = nowDate.getDay()\nif (nowDateDay === 0) nowDateDay = 7\n\nlet nowWeek = weeks + 1\n// \u5224\u65adnowWeek\u662f\u5426\u9700\u8981+1\nlet startDateDay = startDate.getDay()\nif (startDateDay === 0) startDateDay = 7\nif (nowDateDay &lt; startDateDay) nowWeek += 1\n// \u5f53\u524d\u662f\u7b2c\u51e0\u5468\uff0c\u661f\u671f\u51e0\nalert(nowWeek)\nalert(nowDateDay)\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/vue/WangEditor%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/","title":"WangEditor\u4f7f\u7528\u65b9\u6cd5","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/vue/WangEditor%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/#_1","title":"\u53c2\u8003\u6587\u6863","text":"<p>\u5b98\u65b9\u6587\u6863</p> <p>\u5b98\u65b9\u793a\u4f8b</p>"},{"location":"%E5%89%8D%E7%AB%AF/vue/WangEditor%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/#_2","title":"\u5b89\u88c5","text":"<pre><code>npm install @wangeditor/editor --save\nnpm install @wangeditor/editor-for-vue@next --save\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/vue/WangEditor%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/#_3","title":"\u793a\u4f8b\u4ee3\u7801","text":"<p>\u4e3b\u8981\u4fee\u6539<code>Editor.vue</code>\u7ec4\u4ef6\u4e2d\u7ed1\u5b9a\u7684\u51fd\u6570\u4ee5\u53ca\u7f16\u8f91\u5668\u7684\u914d\u7f6e<code>editorConfig</code>\u3002</p> <p>\u4ee3\u7801\u8def\u5f84\uff1a<code>/src/components/MyEditor.vue</code></p> <pre><code>&lt;template&gt;\n  &lt;div style=\"border: 1px solid #ccc\"&gt;\n    &lt;Toolbar\n        style=\"border-bottom: 1px solid #ccc\"\n        :editor=\"editorRef\"\n        :defaultConfig=\"toolbarConfig\"\n        :mode=\"mode\"\n    /&gt;\n    &lt;Editor\n        style=\"height: 500px; overflow-y: hidden;\"\n        v-model=\"valueHtml\"\n        :defaultConfig=\"editorConfig\"\n        :mode=\"mode\"\n        @onCreated=\"handleCreated\"\n        @onChange=\"handleChange\"\n        @onDestroyed=\"handleDestroyed\"\n        @onFocus=\"handleFocus\"\n        @onBlur=\"handleBlur\"\n        @customAlert=\"customAlert\"\n        @customPaste=\"customPaste\"\n    /&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nimport '@wangeditor/editor/dist/css/style.css' // \u5f15\u5165 css\n\nimport { onBeforeUnmount, ref, shallowRef, onMounted } from 'vue'\nimport { Editor, Toolbar } from '@wangeditor/editor-for-vue'\n\nexport default {\n  components: { Editor, Toolbar },\n  setup() {\n    // \u7f16\u8f91\u5668\u5b9e\u4f8b\uff0c\u5fc5\u987b\u7528 shallowRef\n    const editorRef = shallowRef()\n\n    // \u5185\u5bb9 HTML\n    const valueHtml = ref('&lt;p&gt;hello&lt;/p&gt;')\n\n    // \u6a21\u62df ajax \u5f02\u6b65\u83b7\u53d6\u5185\u5bb9\n    onMounted(() =&gt; {\n      setTimeout(() =&gt; {\n        valueHtml.value = '&lt;p&gt;\u6a21\u62df Ajax \u5f02\u6b65\u8bbe\u7f6e\u5185\u5bb9&lt;/p&gt;'\n      }, 1500)\n    })\n\n    const toolbarConfig = {}\n\n    // \u7f16\u8f91\u5668\u914d\u7f6e\n    const editorConfig = {\n      placeholder: '\u8bf7\u8f93\u5165\u5185\u5bb9...',\n      // \u914d\u7f6e\u83dc\u5355\n      MENU_CONF: {\n        // \u4e0a\u4f20\u56fe\u7247\u914d\u7f6e\n        uploadImage: {\n          fieldName: 'file',\n          server: 'http://localhost:8080/upload/single-file',\n          // server: 'http://localhost:8080/upload/cloud',\n          customInsert(res, insertFn) {\n            // \u8fd4\u56de\u503c\u5fc5\u987b\u662f\u952e\u503c\u5bf9\u7684\u5f62\u5f0f\uff0c\u5426\u5219\u4f1a\u62a5\u9519\n            insertFn(res.path, '', '')\n          },\n          onBeforeUpload(file) {\n            console.log('\u5f00\u59cb\u4e0a\u4f20')\n          },\n          onSuccess(file, res) {\n            console.log(`${file.name} \u4e0a\u4f20\u6210\u529f`, res)\n          }\n\n        }\n      }\n    }\n\n    // \u7ec4\u4ef6\u9500\u6bc1\u65f6\uff0c\u4e5f\u53ca\u65f6\u9500\u6bc1\u7f16\u8f91\u5668\n    onBeforeUnmount(() =&gt; {\n      const editor = editorRef.value\n      if (editor == null) return\n      editor.destroy()\n    })\n\n    // \u7f16\u8f91\u5668\u521b\u5efa\u65f6\u8c03\u7528\u6b64\u51fd\u6570\n    const handleCreated = (editor) =&gt; {\n      console.log('created', editor);\n      editorRef.value = editor // \u8bb0\u5f55 editor \u5b9e\u4f8b\uff0c\u91cd\u8981\uff01\n    }\n\n    // \u7f16\u8f91\u5668\u5185\u5bb9\u6539\u53d8\u540e\u8c03\u7528\u6b64\u51fd\u6570\n    const handleChange = (editor) =&gt; {\n      console.log('change:', editor.getHtml());\n    }\n\n    //\n    const handleDestroyed = (editor) =&gt; {\n      console.log('destroyed', editor)\n    }\n\n    // \u7f16\u8f91\u5668\u805a\u7126\u65f6\u8c03\u7528\u6b64\u51fd\u6570\n    const handleFocus = (editor) =&gt; {\n      console.log('focus', editor)\n    }\n\n    // \u7f16\u8f91\u5668\u5931\u7126\u65f6\u8c03\u7528\u6b64\u51fd\u6570\n    const handleBlur = (editor) =&gt; {\n      console.log('blur', editor)\n    }\n\n    const customAlert = (info, type) =&gt; {\n      alert(`\u3010\u81ea\u5b9a\u4e49\u63d0\u793a\u3011${type} - ${info}`)\n    }\n\n    // \u7f16\u8f91\u5668\u4e2d\u53d1\u9001\u7c98\u8d34\u4e8b\u4ef6\u65f6\u8c03\u7528\u6b64\u51fd\u6570\n    const customPaste = (editor, event, callback) =&gt; {\n      console.log('ClipboardEvent \u7c98\u8d34\u4e8b\u4ef6\u5bf9\u8c61', event)\n      // \u81ea\u5b9a\u4e49\u63d2\u5165\u5185\u5bb9\n      editor.insertText('xxx')\n      // \u8fd4\u56de\u503c\uff08\u6ce8\u610f\uff0cvue \u4e8b\u4ef6\u7684\u8fd4\u56de\u503c\uff0c\u4e0d\u80fd\u7528 return\uff09\n      callback(false) // \u8fd4\u56de false \uff0c\u963b\u6b62\u9ed8\u8ba4\u7c98\u8d34\u884c\u4e3a\n      // callback(true) // \u8fd4\u56de true \uff0c\u7ee7\u7eed\u9ed8\u8ba4\u7684\u7c98\u8d34\u884c\u4e3a\n    }\n\n    const insertText = () =&gt; {\n      const editor = editorRef.value\n      if (editor == null) return\n      editor.insertText('hello world')\n    }\n\n    const printHtml = () =&gt; {\n      const editor = editorRef.value\n      if (editor == null) return\n      console.log(editor.getHtml())\n    }\n\n    const disable = () =&gt; {\n      const editor = editorRef.value\n      if (editor == null) return\n      editor.disable()\n    }\n\n    return {\n      editorRef,\n      valueHtml,\n      mode: 'default', // 'default' \u6216 'simple'\n      toolbarConfig,\n      editorConfig,\n      handleCreated,\n      handleChange,\n      handleDestroyed,\n      handleFocus,\n      handleBlur,\n      customAlert,\n      customPaste,\n      insertText,\n      printHtml,\n      disable,\n    };\n  }\n}\n&lt;/script&gt;\n\n&lt;style scoped&gt;\n\n&lt;/style&gt;\n</code></pre> <p><code>/src/App.vue</code>\u4e2d\u5f15\u5165\u8be5\u7ec4\u4ef6\uff1a</p> <pre><code>&lt;script setup&gt;\n\nimport MyEditor from \"./components/MyEditor.vue\";\n&lt;/script&gt;\n\n&lt;template&gt;\n  &lt;div class=\"editor\"&gt;\n    &lt;MyEditor&gt;&lt;/MyEditor&gt;\n  &lt;/div&gt;\n&lt;/template&gt;\n\n&lt;style scoped&gt;\n  .editor {\n    width: 800px;\n    margin: 0 auto;\n  }\n&lt;/style&gt;\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/vue/pinia%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/","title":"pinia\u4f7f\u7528\u624b\u518c","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/vue/pinia%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_1","title":"\u53c2\u8003\u6587\u7ae0","text":"<p>\u5927\u83e0\u841d\uff01\u8fd9\u4e00\u6b21\u5f7b\u5e95\u641e\u61c2Pinia\uff01\uff08\u4fdd\u59c6\u7ea7\u6559\u7a0b\uff09</p>"},{"location":"%E5%89%8D%E7%AB%AF/vue/pinia%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#pinia_1","title":"\u4f7f\u7528pinia","text":"<ol> <li> <p>\u4f7f\u7528vite\u521b\u5efa\u9879\u76ee\uff1a<code>npm create vite@latest</code>\u3002</p> </li> <li> <p>\u5b89\u88c5pinia\uff1a<code>npm install pinia</code>\u3002</p> </li> <li> <p><code>/src/main.ts</code>\u4e2d\u6302\u8f7dVue\u5e94\u7528\uff1a</p> </li> </ol> <p>```typescript    // /src/main.ts    // main.ts    import { createApp } from \"vue\";    import App from \"./App.vue\";    import { createPinia } from \"pinia\";    const pinia = createPinia();</p> <p>const app = createApp(App);    app.use(pinia);    app.mount(\"#app\");    ```</p> <ol> <li>\u521b\u5efastore\u3002</li> </ol> <p>```typescript    // /src/store/user.ts</p> <p>import {defineStore} from \"pinia\";</p> <p>// \u547d\u540d\u89c4\u5219\uff1ause + \u540d\u5b57 + Store    // \u7b2c\u4e00\u4e2a\u53c2\u6570\u662fid\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u914d\u7f6e\u53c2\u6570\uff0c\u6309\u7167\u6a21\u4eff\u5373\u53ef\u3002    export const useUserStore = defineStore('main', {        state: () =&gt; {            return {                name: 'lhl',                age: 8,                score: 100            }        }    })    ```</p> <ol> <li>\u63a5\u4e0b\u6765\u6211\u4eec\u76f4\u63a5\u4f7f\u7528store\u5373\u53ef\uff0c\u4e0b\u9762\u662f\u4e00\u4e2a\u4f7f\u7528\u6848\u4f8b\uff0c\u6587\u4ef6\u5730\u5740\uff1a<code>/src/App.vue</code>\u3002</li> </ol> <p>```vue   </p> <p> \u59d3\u540d\uff1a{{name}} \u5e74\u9f84\uff1a{{age}} \u5206\u6570\uff1a{{score}} \u5206\u6570+1 \u91cd\u7f6e\u6570\u636e </p> <p>```</p>"},{"location":"%E5%89%8D%E7%AB%AF/vue/vue%20router%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/","title":"vue router\u4f7f\u7528\u624b\u518c","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/vue/vue%20router%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#vue-router_1","title":"\u4ec0\u4e48\u662fvue router","text":"<p>Vue\u521b\u5efa\u7684\u524d\u7aef\u9879\u76ee\u662f\u5355\u9875\u9762\u5e94\u7528\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u7528\u6237\u8bf7\u6c42\u670d\u52a1\u5668\uff0c\u670d\u52a1\u5668\u4e00\u6b21\u6027\u5c06\u591a\u4e2a\u7ec4\u4ef6\u548c\u9875\u9762\u5408\u5e76\u5728\u4e00\u8d77\uff0c\u8fd4\u56de\u7ed9\u7528\u6237\u3002\u5f53\u7528\u6237\u66f4\u65b0\u89c6\u56fe\u65f6\uff0c\u4e0d\u4f1a\u518d\u6b21\u8bf7\u6c42\u670d\u52a1\u5668\uff0c\u800c\u662f\u901a\u8fc7vue-router\u5b9e\u73b0\u9875\u9762\u7684\u8df3\u8f6c\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/vue/vue%20router%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_1","title":"\u4f7f\u7528\u65b9\u6cd5","text":""},{"location":"%E5%89%8D%E7%AB%AF/vue/vue%20router%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#vue","title":"\u65b0\u5efavue\u9879\u76ee","text":"<p>\u9996\u5148\u6211\u4eec\u9700\u8981\u521b\u5efa\u4e00\u4e2avue\u9879\u76ee\uff0c\u8fd9\u91cc\u6211\u4f7f\u7528vite\u6784\u5efa\u5de5\u5177\u3002\u53c2\u8003\u5b98\u65b9\u6587\u6863\u3002</p> <ol> <li>\u4f7f\u7528npm\u5b89\u88c5vite\uff1a<code>npm create vite@latest</code>\u3002\u6ce8\u610f\u4f7f\u7528npm\u524d\u9700\u8981\u4fee\u6539\u955c\u50cf\u6e90\u3002</li> <li>\u63a5\u4e0b\u6765\u6309\u7167\u547d\u4ee4\u884c\u7684\u63d0\u793a\u4e00\u6b65\u6b65\u6267\u884c\u5373\u53ef\u3002\u521b\u5efa\u5b8c\u6bd5\u540e\u5220\u6389<code>App.vue</code>\u4e2d\u591a\u4f59\u7684\u6587\u4ef6\u548c<code>components</code>\u4e2d\u7684vue\u6587\u4ef6\u3002</li> <li>\u5728<code>components</code>\u4e2d\u521b\u5efa3\u4e2a\u6587\u4ef6\uff1a<code>a.vue</code>\u3001<code>b.vue</code>\u3001<code>c.vue</code>\u3001<code>d.vye</code>\u3002\u5e76\u5728<code>&lt;template&gt;</code>\u6807\u7b7e\u4e2d\u586b\u5199\u5404\u81ea\u7684\u5185\u5bb9\u3002</li> </ol>"},{"location":"%E5%89%8D%E7%AB%AF/vue/vue%20router%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#vue-router_2","title":"\u4f7f\u7528vue-router","text":"<p>\u5b98\u65b9\u6587\u6863</p> <ol> <li> <p>\u4f7f\u7528npm\u5b89\u88c5vue-router\uff1a<code>npm install vue-router@4</code>\u3002</p> </li> <li> <p>\u5728<code>/src</code>\u76ee\u5f55\u4e0b\u521b\u5efa\u6587\u4ef6<code>/router/index.js</code>\uff0c\u5e76\u586b\u5199\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> </li> </ol> <p>```js    import { createRouter, createWebHistory } from \"vue-router\"</p> <p>const routes = [        {            path: '/a',            component: () =&gt; import('../components/a.vue')        },        {            name: 'b',            path: '/b',            component: () =&gt; import('../components/b.vue')        },        {            path: '/c',            component: () =&gt; import('../components/c.vue')        },        {            name: 'd',            path: '/d',            component: () =&gt; import('../components/d.vue')        }    ]</p> <p>const router = createRouter({        // \u8def\u7531\u6a21\u5f0f\u6709\u4e24\u79cd\uff1acreateWebHistory\u548ccreateWebHashHistory        // \u524d\u8005\u7684\u8def\u5f84\u4e2d\u6ca1\u6709#\uff0c\u540e\u8005\u6709\u3002#\u540e\u8def\u5f84\u6539\u53d8\u4e0d\u4f1a\u5f15\u8d77\u9875\u9762\u5237\u65b0\u3002         history: createWebHistory(),        routes    })</p> <p>export default router    ```</p> <ol> <li>\u5728<code>/src/main.js</code>\u4e2d\u5f15\u5165<code>router</code>\u5bf9\u8c61\uff0c\u5e76\u4f7f\u7528\u5b83\uff1a</li> </ol> <p>```js    // /src/main.js    import { createApp } from 'vue'    import App from './App.vue'    // \u6838\u5fc3\u4ee3\u7801    import router from \"./router/index.js\";</p> <p>// \u6ce8\u610f\u8fd9\u91cc\u4e5f\u8981\u52a0    createApp(App).use(router).mount('#app')    ```</p> <ol> <li>\u5728<code>/src/App.vue</code>\u4e2d\u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801\uff0c\u5373\u53ef\u901a\u8fc7\u7f51\u5740\u680f\u5b9e\u73b0\u8def\u7531\uff1a</li> </ol> <p>```vue   </p> <p> </p> <p>```</p> <ol> <li>\u901a\u8fc7<code>&lt;router-link&gt;</code>\u5b9e\u73b0\u9875\u9762\u8df3\u8f6c\uff0c\u5728<code>/src/App.vue</code>\u4e2d\u7ee7\u7eed\u6dfb\u52a0\u4ee3\u7801\uff1a</li> </ol> <p>```vue   </p> <p> a <pre><code> &lt;br /&gt;\n &lt;!--  \u901a\u8fc7\u8def\u7531\u8df3\u8f6c--&gt;\n &lt;router-link :to=\"{name: 'b'}\"&gt;b&lt;/router-link&gt;\n &lt;br /&gt;\n &lt;button @click=\"toPage1('/c')\"&gt;c&lt;/button&gt;\n &lt;br /&gt;\n &lt;button @click=\"toPage2('d')\"&gt;d&lt;/button&gt;\n &lt;br /&gt;\n &lt;router-view&gt;&lt;/router-view&gt;\n</code></pre> <p></p> <p>```</p> <p>\u5176\u4e2d\u9875\u9762\u8df3\u8f6c\u67093\u79cd\u65b9\u5f0f\uff1a\u901a\u8fc7\u8def\u5f84\u8df3\u8f6c\u3001\u901a\u8fc7name\u8df3\u8f6c\u548c\u901a\u8fc7\u51fd\u6570\u8df3\u8f6c\u3002\u5982\u679c\u60f3\u8df3\u8f6c\u540e\u6ca1\u6709\u5386\u53f2\u8bb0\u5f55\uff0c\u589e\u52a0replace\u5c5e\u6027\u5373\u53ef\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/vue/vue%20router%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_2","title":"\u8def\u7531\u4f20\u53c2","text":"<ol> <li> <p>\u8def\u7531\u4f20\u53c2\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a\u4e00\u79cd\u662f\u4f7f\u7528<code>query</code>\uff0c\u53c2\u6570\u5728url\u4e2d\uff1b\u53e6\u4e00\u79cd\u662f\u4f7f\u7528<code>params</code>\uff0c\u53c2\u6570\u9690\u85cf\u3002</p> </li> <li> <p>\u8fd9\u91cc\u4e0d\u5efa\u8bae\u4f7f\u7528params\u4f20\u53c2\uff0c\u5176\u4e2d\u4e00\u4e2a\u539f\u56e0\u662f\u9875\u9762\u5237\u65b0\u4f1a\u4e22\u5931\u6570\u636e\uff0c\u4e2a\u4eba\u4e60\u60ef\u7528pinia\u5b58\u653e\u6570\u636e\u3002\u53c2\u8003\u6587\u6863\u3002</p> </li> <li> <p>\u5177\u4f53\u64cd\u4f5c\uff1a</p> </li> <li> <p>\u521b\u5efa\u6570\u636e\u6587\u4ef6<code>/src/data.js</code>\uff0c\u5e76\u586b\u5199\u4ee3\u7801\uff1a</p> <p>```js   const user = {       name: 'lhl',       age: 8,       gender: 'male'   }</p> <p>export { user }   ```</p> </li> <li> <p>\u5728<code>/src/App.vue</code>\u4e2d\u589e\u52a0\u4ee3\u7801\uff1a</p> <p>```vue   </p> <p> a b c d <p> \u53bb\u8be6\u60c5\u9875\u9762 \u53bb\u8be6\u60c5\u9875\u9762 </p> <p>   ```</p> <li> <p>\u521b\u5efa\u7ec4\u4ef6<code>/src/components/Detail.vue</code>\uff0c\u5e76\u586b\u5199\u4ee3\u7801\uff1a</p> <p>```vue    \u8be6\u60c5\u754c\u9762 \u59d3\u540d\uff1a{{route.query.name}} \u5e74\u9f84\uff1a{{this.$route.query.age}} \u6027\u522b\uff1a{{route. query.gender}} </p> <p></p>    ``` </li> <li> <p>\u7f16\u5199\u8def\u7531\u6587\u4ef6\uff1a<code>/src/router/index.js</code></p> <p><code>js   {       name: 'detail',       path: '/detail',       component: () =&gt; import('../components/Detail.vue')   }</code></p> </li>"},{"location":"%E5%89%8D%E7%AB%AF/vue/vue%20router%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C/#_3","title":"\u5d4c\u5957\u8def\u7531","text":""},{"location":"%E5%89%8D%E7%AB%AF/vue/vue%E6%95%99%E7%A8%8B/","title":"Vue\u6559\u7a0b","text":""},{"location":"%E5%89%8D%E7%AB%AF/vue/vue%E6%95%99%E7%A8%8B/#vue","title":"\u521b\u5efavue\u9879\u76ee","text":"<pre><code>vue create \u9879\u76ee\u540d\n</code></pre> <pre><code>npm run serve\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/vue/vue%E6%95%99%E7%A8%8B/#vant-ui-vue3","title":"\u5b89\u88c5 vant UI (vue3)","text":"<pre><code>npm install vant@next -S\n</code></pre> <pre><code>npm i unplugin-vue-components -D\n</code></pre> <p>\u5b89\u88c5babel\u63d2\u4ef6</p> <pre><code>npm i babel-plugin-import\n</code></pre> <p>\u4fee\u6539<code>babel.config.js</code>\u6587\u4ef6</p> <pre><code>module.exports = {\n  presets: [\n    '@vue/cli-plugin-babel/preset'\n  ],\n  // \u914d\u7f6evant\u6309\u9700\u5f15\u5165\n  plugins: [\n    ['import', {\n      libraryName: 'vant',\n      libraryDirectory: 'es',\n      style: true\n    }, 'vant']\n  ],\n}\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/webpack/webpack%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/","title":"Webpack\u57fa\u672c\u4f7f\u7528","text":"<pre><code>npm init -y\n</code></pre> <pre><code>npm add webpack webpack-cli --dev\n</code></pre> <p>\u521b\u5efa<code>/src/data.js</code>\uff0c\u5199\u5165</p> <pre><code>export function getBlogPosts() {\n    return [\"\u535a\u5ba21\", \"\u535a\u5ba22\", \"\u535a\u5ba23\"];\n}\n</code></pre> <p>\u521b\u5efa<code>style.css</code>\uff0c\u5199\u5165</p> <pre><code>* {\n    margin: 0;\n    padding: 0;\n    font-family: sans-serif;\n}\nbody {\n    display: grid;\n    place-items: center;\n    height: 100vh;\n}\nul {\n    list-style: none;\n}\nli {\n    padding: 12px;\n}\nimg {\n    max-width: 500px;\n}\n</code></pre> <p>\u521b\u5efa<code>/src/index.js</code>\uff0c\u5199\u5165</p> <pre><code>import { getBlogPosts } from './data';\nimport \"./style.css\";  // \u4e0d\u9002\u7528loader\u53ef\u80fd\u4f1a\u51fa\u9519\n\nconst blogs = getBlogPosts();\nconst ul = document.createElement(\"ul\");\nblogs.forEach((blog) =&gt; {\n    const li = document.createElement(\"li\");\n    li.innerText = blog;\n    ul.appendChild(li);\n});\ndocument.body.appendChild(ul);\n</code></pre> <p>\u6b64\u65f6\uff0c\u6253\u5305css\u6587\u4ef6\u8fd8\u9700\u8981\u4e24\u4e2aloader</p> <pre><code>npm add --dev style-loader css-loader\n</code></pre> <p>\u6ce8\u610f\uff1a\u51e0\u4e4e\u6240\u6709\u548cwebpack\u76f8\u5173\u7684\u4f9d\u8d56\u90fd\u9700\u8981\u5b89\u88c5\u5728\u5f00\u53d1\u8005\u73af\u5883\u4e2d\uff0c\u56e0\u4e3a\u6253\u5305\u540e\u4e0d\u9700\u8981\u5b83\u4eec\u3002</p> <p>\u914d\u7f6ewebpack\uff1a</p> <p>\u5728<code>/</code>\u76ee\u5f55\u4e0b\u521b\u5efa<code>webpack.config.js</code>\u6587\u4ef6\uff0c\u8f93\u5165\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>const path = require(\"path\");  // path \u662f webpack.config.js\u6587\u4ef6\u7684\u8def\u5f84\n\n// \u914d\u7f6ewebpack\nmodule.exports = {\n    // \u5f00\u53d1\u6a21\u5f0f\n    mode: \"development\",\n    // \u5165\u53e3\u6587\u4ef6\n    entry: \"./src/index.js\",\n    // \u6253\u5305\u540e\u7684\u914d\u7f6e\n    output: {\n        // \u6253\u5305\u540e\u7684\u6587\u4ef6\u540d\u5b57\n        filename: \"dist.js\",\n        // \u6253\u5305\u540e\u6587\u4ef6\u5b58\u653e\u7684\u5730\u5740\n        path: path.resolve(__dirname, \"dist\"),\n    },\n\n    module: {\n        // rules\u4e2d\u7684\u6bcf\u4e00\u4e2a\u503c\u90fd\u5bf9\u5e94loader\u4e2d\u7684\u914d\u7f6e\uff0c\u5176\u4e2d\u5305\u542b\u5339\u914d\u62d3\u5c55\u540d\u548c\u4f7f\u7528\u54ea\u4e9bloader\n        rules: [\n            {\n                // test\u7528\u4e8e\u5339\u914d\u6587\u4ef6\u540d\n                test: /\\.css$/i,\n                use: [\"style-loader\", \"css-loader\"]\n            }\n        ]\n    }\n};\n</code></pre> <pre><code>npx webpack\nnpx \u53ef\u4ee5\u81ea\u52a8\u8fd0\u884c node_modules \u91cc\u81ea\u5e26\u7684\u5e93\u7684\u547d\u4ee4\u3002\n</code></pre> <p>\u591a\u4e86\u4e2a<code>/dist/dist.js</code></p> <p>\u521b\u5efa<code>/index.html</code>\uff0c\u5199\u5165</p> <pre><code>&lt;!--\u5f15\u5165\u6253\u5305\u540e\u7684\u6587\u4ef6--&gt;\n&lt;script src=\"./dist/dist.js\"&gt;&lt;/script&gt;\n</code></pre> <p>\u4ee5\u4e0a\u5c31\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u6253\u5305\u8fc7\u7a0b\u3002\u5c06<code>/src/index.js</code>\u4ee5\u53ca\u91cc\u9762\u5f15\u5165\u7684\u76f8\u5173\u5e93\u5168\u90e8\u6253\u5305\u6210<code>dist.js</code>\u6587\u4ef6\u3002</p> <pre><code>npm install html-webpack-plugin --dev\n</code></pre> <p>\u914d\u7f6ewebpack.config.js</p> <pre><code>npx webpack\n</code></pre> <pre><code>npm install --dev babel-loader @babel/core @babel/preset-env\n</code></pre> <p>\u914d\u7f6ewebpack.config.js</p> <pre><code>npx webpack\n</code></pre> <p>\u538b\u7f29\u6253\u5305\u540e\u7684\u6587\u4ef6</p> <pre><code>npm install --dev terser-webpack-plugin\n</code></pre> <p>\u914d\u7f6ewebpack.config.js</p>"},{"location":"%E5%89%8D%E7%AB%AF/webpack/%E5%85%B3%E4%BA%8Epath.resolve%28%29/","title":"\u5173\u4e8epath.resolve()","text":"<p>\u8fd9\u7bc7\u6587\u7ae0\u8bf4\u5f97\u975e\u5e38\u597d\u4e86\uff0c\u6211\u518d\u8865\u5145\u4e00\u70b9\u3002</p> <p><code>path.resolve(__dirname, \"dist\")</code>\uff1a</p> <p>\u5047\u5b9a\u5f53\u524d<code>webpack.config.js</code>\u6587\u4ef6\u6240\u5728\u76ee\u5f55<code>/webpack/doc</code>\uff0c\u5219<code>__dirname</code>\u5c31\u662f<code>/webpack/doc</code>\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/vant-weapp%E4%BD%BF%E7%94%A8%E5%BB%BA%E8%AE%AE/","title":"vant-weapp\u4f7f\u7528\u5efa\u8bae","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/vant-weapp%E4%BD%BF%E7%94%A8%E5%BB%BA%E8%AE%AE/#_1","title":"\u5199\u5728\u524d\u9762","text":"<p>\u4e00\u5b9a\u8981\u719f\u8bfb\u5b98\u65b9\u6587\u6863\uff01\u7f51\u4e0a\u5173\u4e8evant-weapp\u7684\u6559\u7a0b\u8d28\u91cf\u4e0d\u9ad8\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/vant-weapp%E4%BD%BF%E7%94%A8%E5%BB%BA%E8%AE%AE/#_2","title":"\u6837\u5f0f\u8986\u76d6","text":"<p>\u5b98\u65b9\u6587\u6863</p> <p>\u81ea\u5b9a\u4e49component\u4e2d\u5f15\u5165vant\u7ec4\u4ef6\uff0c\u5982\u679c\u60f3\u8981\u6539\u53d8\u5b83\u7684\u6837\u5f0f\uff0c\u4e0d\u4ec5\u8981\u5728\u81ea\u5b9a\u4e49\u7ec4\u4ef6wxss\u4e2d\u8bbe\u5b9a\u6837\u5f0f\uff0c\u4e5f\u8981\u5728\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u7684js\u6587\u4ef6\u4e2d\u6dfb\u52a0\u5982\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>Component({\n  options: {\n    styleIsolation: 'shared',\n  }\n})\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/vant-weapp%E4%BD%BF%E7%94%A8%E5%BB%BA%E8%AE%AE/#_3","title":"\u52a8\u6001\u5207\u6362\u4e3b\u9898","text":"<p>\u5b98\u65b9\u6587\u6863</p> <p>\u5c06\u6837\u5f0f\u5199\u5165js\uff0c\u5373\u53ef\u52a8\u6001\u5207\u6362\u6837\u5f0f\u3002</p> <p>\u6848\u4f8b\u4ee3\u7801\uff1a</p> <p>my-test.page</p> <pre><code>&lt;van-button style=\"{{ buttonStyle }}\" bindtap=\"changeColor\"&gt;\n  \u6309\u94ae\n&lt;/van-button&gt;\n</code></pre> <p>my-test.js</p> <pre><code>Page({\n  changeColor() {\n    this.data.color ^= 1\n    if (this.data.color == 0) {\n      this.setData({\n        buttonStyle: `\n        --button-border-radius: 10px;\n        --button-default-color: green;\n        `\n      })\n    }\n    else {\n      this.setData({\n        buttonStyle: `\n        --button-border-radius: 20px;\n        --button-default-color: red;\n        `\n      })\n    }\n  },\n  data: {\n    color: 0,\n    buttonStyle: `\n      --button-border-radius: 10px;\n      --button-default-color: green;\n    `,\n  }\n});\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/vant-weapp%E4%BD%BF%E7%94%A8%E5%BB%BA%E8%AE%AE/#_4","title":"\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u6837\u5f0f","text":"<p>\u53ef\u60dc\u7684\u662fvant weapp\u5b98\u65b9\u5e76\u6ca1\u6709\u7ed9\u51fa\u6bcf\u4e2a\u7ec4\u4ef6\u53ef\u4ee5\u4fee\u6539\u54ea\u4e9b\u6837\u5f0f\u5c5e\u6027\u3002</p> <p>my-test.wxml</p> <pre><code>&lt;view class=\"container\"&gt;\n  &lt;van-button&gt;\n    \u9ed8\u8ba4\u6309\u94ae\n  &lt;/van-button&gt;\n&lt;/view&gt;\n</code></pre> <p>mytest.wxss</p> <pre><code>.container {\n  --button-border-radius: 10px;\n  --button-default-color: #f2f3f5;\n  --toast-max-width: 100px;\n  --toast-background-color: pink;\n}\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/weui%E7%BB%84%E4%BB%B6%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/","title":"weui\u7ec4\u4ef6\u5e93\u7684\u4f7f\u7528","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/weui%E7%BB%84%E4%BB%B6%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/#_1","title":"\u5feb\u901f\u4e0a\u624b","text":"<p>\u53c2\u8003\u6587\u6863\uff1a\u5fae\u4fe1\u5b98\u65b9\u6587\u6863</p> <p>\u968f\u4fbf\u627e\u4e00\u4e2a\u6848\u4f8b\uff0c\u7ffb\u5230\u793a\u4f8b\u4ee3\u7801\u5904\uff0c\u70b9\u51fb\u5728\u5f00\u53d1\u8005\u5de5\u5177\u4e2d\u9884\u89c8\u6548\u679c\u3002\u7136\u540e\u53bb\u5fae\u4fe1\u5f00\u53d1\u8005\u5de5\u5177\u4e2d\u62f7\u8d1d<code>weui.wxss</code>\u3002\u7136\u540e\u653e\u5230\u81ea\u5df1\u9879\u76ee\u6587\u4ef6\u7684\u6839\u76ee\u5f55\u3002\u5728<code>app.wxss</code>\u4e2d\u5f15\u5165<code>weui.wxss</code>\uff08\u5982\u4e0b\uff09\uff0c\u5373\u53ef\u4f7f\u7528<code>weui</code>\u7684\u7ec4\u4ef6\u3002</p> <p>app.wxss</p> <pre><code>@import \"/weui.wxss\"\n</code></pre> <p>\u5177\u4f53\u7684\u7ec4\u4ef6\u600e\u4e48\u7528\uff1f\u53bb\u5fae\u4fe1\u5b98\u65b9\u6587\u6863\u67e5\u770b\u3002</p> <p>\u5907\u6ce8\uff1a<code>weui</code>\u5b98\u65b9\u6587\u6863\u5199\u7684\u5c31\u60f3\u4e00\u5768***\uff0c\u53ea\u80fd\u6309\u7167\u5b98\u65b9\u6848\u4f8b\u7ed9\u7684\u4ee3\u7801\u4e0d\u65ad\u6478\u7d22\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/weui%E7%BB%84%E4%BB%B6%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/#swiper","title":"swiper \u8f6e\u64ad\u56fe","text":"<p>\u5b9e\u4f8b\u4ee3\u7801\uff1a</p> <pre><code>&lt;swiper\n  indicator-dots=\"{{true}}\"\n  autoplay=\"{{true}}\"\n  circular=\"{{circular}}\"\n  interval=\"{{3000}}\" \n  duration=\"{{1000}}\" \n  previous-margin=\"{{0}}rpx\" \n  next-margin=\"{{0}}rpx\"\n&gt;\n  &lt;swiper-item&gt;\u7b2c1\u9875&lt;/swiper-item&gt;\n  &lt;swiper-item&gt;\u7b2c2\u9875&lt;/swiper-item&gt;\n  &lt;swiper-item&gt;\u7b2c3\u9875&lt;/swiper-item&gt;\n&lt;/swiper&gt;\n</code></pre> <p>\u76f8\u5173API\uff1a\u5b98\u65b9\u6587\u6863</p> <p>\u5e38\u7528API\uff1a<code>interval</code>,<code>duration</code>,<code>indicator-dots</code>,<code>autoplay</code>,<code>circular</code>,<code>previous-margin</code>,<code>next-margin</code>\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E4%B8%AA%E4%BA%BA%E8%B5%84%E6%96%99%E4%BF%AE%E6%94%B9%E9%A1%B5%E9%9D%A2/","title":"\u4e2a\u4eba\u8d44\u6599\u4fee\u6539\u9875\u9762","text":"<p>change-person-info.html</p> <pre><code>&lt;navigation-bar title=\"\u4fee\u6539\u8d44\u6599\" back=\"{{false}}\" color=\"black\" background=\"#FFF\"&gt;&lt;/navigation-bar&gt;\n\n&lt;view class=\"card\" style=\"background-color: white;\"&gt;\n  &lt;view style=\"display: flex; justify-content: center;\"&gt;\n    &lt;image src=\"https://profile-avatar.csdnimg.cn/5bfd5115d58e4405becf4809102003b2_weixin_52268321.jpg\" mode=\"\" style=\"width: 200rpx; height: 200rpx; border-radius: 50%; border: 1px solid #90A4AE;\"/&gt;\n  &lt;/view&gt;\n  &lt;view class=\"line\"&gt;\n    &lt;view&gt;\u7528\u6237\u540d&lt;/view&gt;\n    &lt;input type=\"text\" class=\"content\" placeholder=\"\u9ed8\u8ba4\u7528\u6237\u540d\"/&gt;\n  &lt;/view&gt;\n\n  &lt;view class=\"line\"&gt;\n    &lt;view&gt;\u6559\u52a1\u5904\u7528\u6237\u540d&lt;/view&gt;\n    &lt;input type=\"text\" class=\"content\" placeholder=\"{{jwcUsername}}\"/&gt;\n  &lt;/view&gt;\n\n  &lt;view class=\"line\"&gt;\n    &lt;view&gt;\u6027\u522b&lt;/view&gt;\n    &lt;input type=\"text\" class=\"content\" placeholder=\"{{gender}}\"/&gt;\n  &lt;/view&gt;\n\n  &lt;view class=\"line\"&gt;\n    &lt;view&gt;\u6743\u9650&lt;/view&gt;\n    &lt;input type=\"text\" class=\"content\" placeholder=\"{{power}}\"/&gt;\n  &lt;/view&gt;\n\n  &lt;button type=\"primary\"&gt;\u4fdd\u5b58&lt;/button&gt;\n&lt;/view&gt;\n\n</code></pre> <p>change-person-info.css</p> <pre><code>/* pages/change-person-info/change-person-info.wxss */\n.line {\n  display: flex; \n  justify-content: space-between;\n  height: 100rpx;\n  line-height: 100rpx;\n  border-bottom: 1px solid #90A4AE;\n  padding: 0 40rpx;\n  font-size: 30rpx;\n  font-weight: bolder;\n}\n\n.content {\n  height: 100rpx; \n  text-align: right;\n}\n</code></pre> <p>change-person-info.js</p> <pre><code>Page({\n  data: {\n    username: '\u9ed8\u8ba4\u7528\u6237\u540d',\n    jwcUsername: '\u6559\u52a1\u5904\u9ed8\u8ba4\u7528\u6237\u540d',\n    gender: '\u7537',\n    power: '\u7ba1\u7406\u5458'\n  }\n})\n</code></pre> <p>change-person-info.json</p> <pre><code>{\n  \"usingComponents\": {\n    \"navigation-bar\": \"/components/navigation-bar/navigation-bar\"\n  }\n}\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%95%86%E5%93%81%E5%88%9B%E5%BB%BA%E9%A1%B5%E9%9D%A2/","title":"\u5546\u54c1\u521b\u5efa\u9875\u9762","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%95%86%E5%93%81%E5%88%9B%E5%BB%BA%E9%A1%B5%E9%9D%A2/#_2","title":"\u524d\u7f6e\u6761\u4ef6","text":"<ol> <li>\u5f15\u5165\u81ea\u5b9a\u4e49\u7684\u8868\u5355\u6821\u9a8c\u7c7b(\u53c2\u8003\u53e6\u4e00\u7bc7\u6587\u7ae0)</li> <li>\u5f15\u5165vant weapp</li> </ol>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%95%86%E5%93%81%E5%88%9B%E5%BB%BA%E9%A1%B5%E9%9D%A2/#create-goodswxml","title":"create-goods.wxml","text":"<pre><code>&lt;navigation-bar title=\"\u53d1\u4e2a\u95f2\u7f6e\u5427~\" back=\"{{trade}}\" color=\"black\" background=\"#FFF\"&gt;&lt;/navigation-bar&gt;\n\n&lt;form bindsubmit=\"formSubmit\"&gt;\n  &lt;view class=\"box\" style=\"margin: 20rpx;\"&gt;\n    &lt;view class=\"content\" style=\"background-color: white;  height: 1000rpx; border-radius: 30rpx;\"&gt;\n      &lt;input type=\"text\" placeholder=\"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\" style=\"display: block;  padding: 20rpx; font-weight: bold; height: 100rpx; margin-top: 20rpx; line-height: 40rpx;\" name=\"name\"/&gt;\n      &lt;view style=\"border-bottom: 5rpx solid #F8F9FA; width: 90%; margin: 0 auto;\"&gt;&lt;/view&gt;\n      &lt;textarea maxlength=\"-1\" bindblur=\"bindTextAreaBlur\" placeholder=\"\u8bf7\u63cf\u8ff0\u5b9d\u8d1d\" style=\" width: 92%; height: 700rpx; padding: 20rpx;\" name=\"content\"&gt;\n      &lt;/textarea&gt;\n      &lt;van-uploader \n        file-list=\"{{ fileList }}\" \n        max-count=\"3\" \n        bind:after-read=\"afterRead\" \n        bind:delete='deletePic'\n      /&gt;\n    &lt;/view&gt;\n\n    &lt;view style=\"margin-top: 20rpx; background-color: white; padding: 20rpx; font-weight: bold; border-radius: 20rpx; display: flex; justify-content: space-between;\"&gt;\n      &lt;view class=\"price\"&gt;\u4ef7\u683c&lt;/view&gt;\n      &lt;view style=\"display: flex;\"&gt;\n        &lt;view style=\"color: red;\"&gt;\uffe5&lt;/view&gt;\n        &lt;input type=\"text\" id=\"price-input\" style=\"width: 150rpx; color: red;\" placeholder=\"0.00\" name=\"price\"/&gt;\n        &lt;/view&gt;\n    &lt;/view&gt;\n\n    &lt;view class=\"submit\"&gt;\n      &lt;button style=\"margin-top: 20rpx; border-radius: 20rpx; background-color: #FFE516;\" formType=\"submit\"&gt;\u63d0\u4ea4&lt;/button&gt;\n    &lt;/view&gt;\n  &lt;/view&gt;\n&lt;/form&gt;\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%95%86%E5%93%81%E5%88%9B%E5%BB%BA%E9%A1%B5%E9%9D%A2/#create-goodswxss","title":"create-goods.wxss","text":"<pre><code>page {\n  background-color: #F6F6F6;\n}\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%95%86%E5%93%81%E5%88%9B%E5%BB%BA%E9%A1%B5%E9%9D%A2/#create-goodsjs","title":"create-goods.js","text":"<pre><code>import WxValidate from '../../utils/wxvalidate.js'  // \u81ea\u5b9a\u4e49\u5f15\u5165\nPage({\n  data: {\n    fileList: [],\n    showLoading: false\n  },\n  afterRead(e) {\n    const { file } = e.detail\n    this.showLoading = true\n    wx.showLoading({\n      title: '\u6b63\u5728\u52a0\u8f7d',\n      mask: true\n    })\n    wx.uploadFile({\n      url: 'http://localhost:8080/upload/image', // \u4ec5\u4e3a\u793a\u4f8b\uff0c\u975e\u771f\u5b9e\u7684\u63a5\u53e3\u5730\u5740\n      filePath: file.url,\n      header: {\n        'token': 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJVSWQiOiIxNjI1MTE1NDM4MTQ2OTI4NjQyIiwibW9uZXkiOiI5OTk3NSIsInBob3RvSW1nIjoiIiwicG93ZXIiOiIxIiwiZXhwIjoxNjk4MzM0MDMyLCJ1c2VybmFtZSI6IuaZk-m-mWNvZGluZyJ9.GpVrtbHeDx3ZM38ibnAPNj-_5MGWbh3d1s9OL29C-x4'\n      },\n      name: 'file',\n      formData: { user: 'test' },\n      timeout: 10000,\n      success: (res) =&gt; {\n        res = JSON.parse(res.data)\n        if (res.success) {\n          if (this.showLoading) {\n            this.showLoading = false\n            wx.hideLoading()\n            wx.showToast({\n              title: '\u4e0a\u4f20\u6210\u529f',\n              icon: 'success',\n              duration: 1500\n            })\n          }\n          // \u4e0a\u4f20\u5b8c\u6210\u9700\u8981\u66f4\u65b0 fileList\n          const { fileList = [] } = this.data;\n          fileList.push({ ...file, url: res.data.url });\n          this.setData({ fileList });\n        } else {\n          if (this.showLoading) {\n            this.showLoading = false\n            wx.hideLoading()\n            wx.showToast({\n              title: '\u672a\u8fde\u63a5\u5230\u540e\u7aef\u670d\u52a1\u5668',\n              icon: 'error',\n              duration: 1500\n            })\n          }\n        }\n      },\n      fail: (res) =&gt; {\n        if (this.showLoading) {\n          this.showLoading = false\n          wx.hideLoading()\n          wx.showToast({\n            title: '\u4e0a\u4f20\u5931\u8d25',\n            icon: 'error',\n            duration: 1500\n          })\n        }\n      },\n    });\n  },\n\n  deletePic(e) {\n    let index = e.detail.index\n    let fileList = this.data.fileList\n    fileList.splice(index, 1)\n    this.setData({\n      fileList\n    })\n  },\n\n  formSubmit(e) {\n    // \u9a8c\u8bc1\u5b57\u6bb5\u7684\u89c4\u5219\uff0c\n    const rules = {\n      name: {\n        required: true,\n        minlenth: 2,\n        maxlength: 10\n      },\n      content: {\n        required: true,\n        minlength: 5,\n        maxlength: 200\n      },\n      price: {\n        required: true,\n        number: true\n      }\n    }\n\n    // \u9a8c\u8bc1\u5b57\u6bb5\u7684\u63d0\u793a\u4fe1\u606f\uff0c\u82e5\u4e0d\u4f20\u5219\u8c03\u7528\u9ed8\u8ba4\u7684\u4fe1\u606f\n    const messages = {\n      name: {\n        required: '\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u79f0',\n        minlength: '\u81f3\u5c11\u8f93\u51652\u5b57',\n        maxlength: '\u5546\u54c1\u540d\u6700\u591a10\u5b57'\n      },\n      content: {\n        required: '\u8bf7\u8f93\u5165\u5546\u54c1\u63cf\u8ff0',\n        minlength: '\u5546\u54c1\u63cf\u8ff0\u81f3\u5c115\u5b57',\n        maxlength: '\u5546\u54c1\u63cf\u8ff0\u6700\u591a200\u5b57'\n      },\n      price: {\n        required: '\u8bf7\u8f93\u5165\u4ef7\u683c',\n        number: \"\u8bf7\u8f93\u5165\u6b63\u786e\u91d1\u989d\"\n      }\n    }\n\n    // \u521b\u5efa\u5b9e\u4f8b\u5bf9\u8c61\n    this.WxValidate = new WxValidate(rules, messages)\n    const params = e.detail.value\n    // console.log(params)\n    if (!this.WxValidate.checkForm(params)) {\n      const error = this.WxValidate.errorList[0]\n      wx.showToast({\n        title: error.msg,\n        icon: 'none'\n      })\n      return false\n    }\n    // console.log('\u6821\u9a8c\u6210\u529f\uff01')\n    wx.request({  // \u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u5c01\u88c5\u7684\u8bf7\u6c42\n      url: 'http://localhost:8080/trade/create',  // \u4fee\u6539\u63a5\u53e3\n      method: 'POST',\n      header: {\n        'token': 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJVSWQiOiIxNjI1MTE1NDM4MTQ2OTI4NjQyIiwibW9uZXkiOiI5OTk3NSIsInBob3RvSW1nIjoiIiwicG93ZXIiOiIxIiwiZXhwIjoxNjk4MzM0MDMyLCJ1c2VybmFtZSI6IuaZk-m-mWNvZGluZyJ9.GpVrtbHeDx3ZM38ibnAPNj-_5MGWbh3d1s9OL29C-x4'\n      },\n      data: {\n        name: params['name'],\n        content: params['content'],\n        price: params['price'],\n        imageList: this.data.fileList.map(obj =&gt; obj.url)\n      }\n    })\n  },\n  // \u8fd9\u91cc\u65e0\u7528\n  bindTextAreaBlur() {}\n})\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%95%86%E5%93%81%E5%88%9B%E5%BB%BA%E9%A1%B5%E9%9D%A2/#create-goodsjson","title":"create-goods.json","text":"<pre><code>{\n  \"usingComponents\": {\n    \"navigation-bar\": \"/components/navigation-bar/navigation-bar\",\n    \"van-uploader\": \"@vant/weapp/uploader/index\"\n  }\n}\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%95%86%E5%93%81%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6/","title":"\u5546\u54c1\u5361\u7247\u6837\u5f0f","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%95%86%E5%93%81%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6/#_2","title":"\u5982\u4f55\u4f7f\u7528","text":"<pre><code>&lt;view class=\"goods-card-area\" style=\"display: flex; flex-wrap: wrap; justify-content: flex-start;\"&gt;\n    &lt;!-- \u5982\u679c\u4e0d\u6307\u5b9aimageUrl\u6216\u8005imageUrl\u4e3a\u7a7a\uff0c\u5219\u663e\u793a\u9ed8\u8ba4\u56fe\u7247 --&gt;\n    &lt;goods-card\n      title=\"\u7bee\u7403\"\n      price='180.1'\n      viewCount='12'\n    /&gt;\n  &lt;/view&gt;\n</code></pre> <p>\u4f7f\u7528\u5efa\u8bae\uff1atitle\u7684\u5b57\u6570\u4e0d\u5efa\u8bae\u592a\u591a\u3002price\u4e0d\u5efa\u8bae\u592a\u957f\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%95%86%E5%93%81%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6/#goods-cardwxml","title":"goods-card.wxml","text":"<pre><code>&lt;view class=\"card\" style=\"width: 360rpx; min-height: 400rpx; margin-left: 10rpx; box-sizing: border-box;\"&gt;\n  &lt;image class=\"picture\" src=\"{{imageUrl}}\" alt=\"\" style=\"width: 360rpx; height: 360rpx; display: block; border-radius: 30rpx;\" wx:if=\"{{imageUrl != ''}}\"/&gt;\n  &lt;!-- \u5982\u679c\u7528\u6237\u6ca1\u6709\u4f20imageUrl\u6216\u8005\u4f20\u4e86\u4e00\u4e2a\u7a7a\u5b57\u7b26\u4e32\uff0c\u5219\u663e\u793a\u9ed8\u8ba4url --&gt;\n  &lt;image class=\"picture\" src=\"https://img.zcool.cn/community/0145525c9344f0a801214168a4801e.png@1280w_1l_2o_100sh.png\" alt=\"\" style=\"width: 360rpx; height: 360rpx; display: block; border-radius: 30rpx;\" wx:else/&gt;\n  &lt;view class=\"title\" style=\"margin-top: 10rpx; padding: 0 10rpx; font-weight: bold;\"&gt;\n    {{title}}\n  &lt;/view&gt;\n\n  &lt;view class=\"bottom\" style=\"display: flex; justify-content: space-between;\"&gt;\n    &lt;view class=\"price\" style=\"margin-top: 10rpx;\"&gt;\n      &lt;text style=\"color: red; font-size: 30rpx; line-height: 40rpx;\"&gt;\uffe5&lt;/text&gt;\n      &lt;text style=\"color: red; font-size: 40rpx; font-weight: bold;\"&gt;{{price}}&lt;/text&gt;\n    &lt;/view&gt;\n    &lt;view class=\"view-count\" style=\"margin-top: 20rpx; color: gray; font-size: 25rpx; line-height: 40rpx;\"&gt;\n      {{viewCount}} \u6b21\u67e5\u770b\n    &lt;/view&gt;\n  &lt;/view&gt;\n&lt;/view&gt;\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%95%86%E5%93%81%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6/#goods-cardwxss","title":"goods-card.wxss","text":"<p>\u65e0</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%95%86%E5%93%81%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6/#goods-cardjs","title":"goods-card.js","text":"<pre><code>Component({\n\n  /**\n   * \u7ec4\u4ef6\u7684\u5c5e\u6027\u5217\u8868\n   */\n  properties: {\n    title: {\n      type: String,\n      value: '\u672a\u77e5\u6807\u9898'\n    },\n    price: {\n      type: Number,\n      value: 0\n    },\n    viewCount: {\n      type: Number,\n      value: 0\n    },\n    imageUrl: {\n      type: String,\n      value: 'http://img.alicdn.com/i3/1753806733/O1CN01JRABov1zblMXu0xZC_!!0-item_pic.jpg?&amp;w=121&amp;h=121&amp;rs=0&amp;qlt=100'\n    }\n  },\n\n  /**\n   * \u7ec4\u4ef6\u7684\u521d\u59cb\u6570\u636e\n   */\n  data: {\n\n  },\n\n  /**\n   * \u7ec4\u4ef6\u7684\u65b9\u6cd5\u5217\u8868\n   */\n  methods: {\n\n  }\n})\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%95%86%E5%93%81%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6/#goods-cardjson","title":"goods-card.json","text":"<pre><code>{\n  \"component\": true,\n  \"usingComponents\": {}\n}\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%95%86%E5%93%81%E8%AF%A6%E6%83%85%E9%A1%B5%E9%A1%B5%E9%9D%A2/","title":"\u5546\u54c1\u8be6\u60c5\u9875\u6837\u5f0f","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%95%86%E5%93%81%E8%AF%A6%E6%83%85%E9%A1%B5%E9%A1%B5%E9%9D%A2/#goods-contentwxml","title":"goods-content.wxml","text":"<pre><code>&lt;navigation-bar title=\"\u5c0f\u5357\u6821\u56ed\" back=\"{{true}}\" color=\"black\" background=\"#FFF\"&gt;&lt;/navigation-bar&gt;\n\n&lt;view class=\"box\" style=\"padding: 20rpx;\"&gt;\n  &lt;view class=\"header\" style=\"display: flex; justify-content: space-between;\"&gt;\n    &lt;view style=\"display: flex; justify-content: flex-start;\" bind:tap=\"viewPersonInfo\"&gt;\n      &lt;image class=\"avatar\" style=\"display: block; border-radius: 50%; width: 100rpx; height: 100rpx;\" src=\"https://pica.zhimg.com/v2-623d7bcae180a935b13f9d64d5814389_l.jpg?source=32738c0c\"&gt;&lt;/image&gt;\n      &lt;view class=\"user-name\" style=\"line-height: 100rpx; margin-left: 20rpx; font-weight: bold;\"&gt;{{username}}&lt;/view&gt;\n    &lt;/view&gt;\n    &lt;view style=\"display: flex; justify-content: flex-start;\" bind:tap=\"contact\"&gt;\n      &lt;button style=\"background-color: #FF7101; width: 200rpx; height: 100rpx; color: #F4E4CD; font-size: 30rpx; line-height: 100rpx; border-radius: 0;\"&gt;\u8054\u7cfbTa&lt;/button&gt;\n      &lt;view style=\"background-color: #FF7101; height: 100rpx; width: 100rpx; border-radius: 0 50% 50% 0;\"&gt;&lt;/view&gt;\n    &lt;/view&gt;\n  &lt;/view&gt;\n\n  &lt;view class=\"price-and-view-count\" style=\"display: flex; margin-top: 20rpx; justify-content: space-between;\"&gt;\n    &lt;view class=\"price\"&gt;\n      &lt;text style=\"color: red; line-height: 100rpx;\"&gt;\uffe5&lt;/text&gt;\n      &lt;text style=\"color: red; font-size: 60rpx; font-weight: bold; line-height: 100rpx;\"&gt;{{price}}&lt;/text&gt;\n    &lt;/view&gt;\n    &lt;view style=\"color: gray; font-size: 20rpx; padding-top: 10rpx;\"&gt;\n      &lt;view class=\"create-time\" style=\"line-height: 45rpx;\"&gt;\u53d1\u5e03\u65f6\u95f4\uff1a{{createTime}}&lt;/view&gt;\n      &lt;view class=\"view-count\" style=\"line-height: 45rpx;\"&gt;\u67e5\u770b\u6b21\u6570: {{viewCount}}\u6b21&lt;/view&gt;\n    &lt;/view&gt;\n  &lt;/view&gt;\n\n  &lt;view class=\"content\" style=\"line-height: 2; letter-spacing: 1rpx; font-size: 30rpx;\"&gt;\n    &lt;view style=\"font-size: 40rpx; font-weight: bold;\"&gt;{{name}}&lt;/view&gt;\n    &lt;view wx:for=\"{{content}}\" wx:key=\"*this\"&gt;{{item}}&lt;/view&gt;\n  &lt;/view&gt;\n\n  &lt;view class=\"images\"&gt;\n    &lt;image wx:for=\"{{imageList}}\" wx:key=\"*this\" src=\"{{item}}\" mode=\"\" style=\"display: block; margin-top: 30rpx; width: 600rpx;\"/&gt;\n  &lt;/view&gt;\n&lt;/view&gt;\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%95%86%E5%93%81%E8%AF%A6%E6%83%85%E9%A1%B5%E9%A1%B5%E9%9D%A2/#goods-contentwxss","title":"goods-content.wxss","text":"<p>\u65e0</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%95%86%E5%93%81%E8%AF%A6%E6%83%85%E9%A1%B5%E9%A1%B5%E9%9D%A2/#goods-contentjs","title":"goods-content.js","text":"<pre><code>Page({\n  data: {\n    username: '\u6653\u9f99',\n    name: '\u5546\u54c1\u6807\u9898',\n    price: 250.5,\n    createTime: '2023-03-21 12:12:12',\n    viewCount: '12',\n    content: ['\u8fd9\u662f\u7bee\u7403', '\u5531\u8df3rap\u7bee\u7403', '\u975e\u5e38\u4e13\u4e1a', 'what'],\n    imageList: [\n      'https://tse2-mm.cn.bing.net/th/id/OIP-C.Mp3mw6f4jhLKQfZGeGalHwHaEN?w=276&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.5&amp;pid=1.7',\n      'https://tse3-mm.cn.bing.net/th/id/OIP-C.eIyA6P0ZQeZF57QQ_gnj7gHaE8?w=235&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.5&amp;pid=1.7',\n      'https://tse2-mm.cn.bing.net/th/id/OIP-C.uxKqSKKWM1MpMD03S-HbyQHaEK?w=327&amp;h=184&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.5&amp;pid=1.7'\n    ]\n  },\n  contact() {\n    console.log('\u8054\u7cfbTa')\n  },\n  viewPersonInfo() {\n    console.log('\u67e5\u770b\u6b64\u4eba\u4e2a\u4eba\u4e3b\u9875')\n  }\n})\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%95%86%E5%93%81%E8%AF%A6%E6%83%85%E9%A1%B5%E9%A1%B5%E9%9D%A2/#goods-contentjson","title":"goods-content.json","text":"<pre><code>{\n  \"usingComponents\": {\n    \"navigation-bar\": \"/components/navigation-bar/navigation-bar\"  // \u8fd9\u91cc\u7528\u5230\u4e86\u5bfc\u822a\u680f\uff0c\u975e\u5fc5\u987b\n  }\n}\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9/","title":"\u56fe\u7247\u538b\u7f29","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9/#_2","title":"\u56fe\u7247\u538b\u7f29\u65b9\u6848","text":"<p>\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4e2d\uff0c\u6709\u4e24\u79cd\u56fe\u7247\u538b\u7f29\u65b9\u6848\uff1a</p> <ul> <li><code>wx.compressImage</code></li> <li><code>wx.canvasToTempFilePath</code></li> </ul> <p>\u8fd9\u91cc\u6211\u4eec\u91c7\u7528canvas\u538b\u7f29\u56fe\u7247\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9/#canvas","title":"Canvas\u538b\u7f29\u56fe\u7247","text":"<p>\u5de5\u5177\u7c7b\uff1a/util/compressPicture.js</p> <pre><code>//\u901a\u8fc7canvas\u5c06\u56fe\u7247\u538b\u7f29\u81f3\u6307\u5b9a\u5927\u5c0f\n\n//\u5224\u65ad\u56fe\u7247\u5927\u5c0f\u662f\u5426\u6ee1\u8db3\u9700\u6c42,limitSize\u7684\u5355\u4f4d\u662fkb\nfunction imageSizeIsLessLimitSize(imagePath,limitSize,lessCallback,moreCallback){\n  //\u83b7\u53d6\u6587\u4ef6\u4fe1\u606f\n  wx.getFileInfo({\n    filePath:imagePath,\n    success:(res)=&gt;{\n      console.log(\"\u538b\u7f29\u524d\u56fe\u7247\u5927\u5c0f\",res.size/1024,'kb');\n      //\u5982\u679c\u56fe\u7247\u592a\u5927\u4e86\u8d70moreCallback\n      if(res.size&gt;1024*limitSize){\n        moreCallback()\n      }\n      //\u56fe\u7247\u6ee1\u8db3\u8981\u6c42\u4e86\u8d70lessCallback\n      else{\n        lessCallback()\n      }\n    }\n  })\n}\n\n//\u5c06\u56fe\u7247\u753b\u5728\u753b\u5e03\u4e0a\u5e76\u83b7\u53d6\u753b\u597d\u4e4b\u540e\u7684\u56fe\u7247\u7684\u8def\u5f84\nfunction getCanvasImage(canvasId,imagePath,imageW,imageH,getImgSuccess){\n  //\u521b\u5efa\u753b\u5e03\u5185\u5bb9\n  const ctx=wx.createCanvasContext(canvasId);\n  //\u56fe\u7247\u753b\u4e0a\u53bb\uff0cimageW\u548cimageH\u662f\u753b\u4e0a\u53bb\u7684\u5c3a\u5bf8\uff0c\u56fe\u50cf\u548c\u753b\u5e03\u95f4\u9694\u90fd\u662f0\n  ctx.drawImage(imagePath,0,0,imageW,imageH);\n  //\u8fd9\u91cc\u4e00\u5b9a\u8981\u52a0\u5b9a\u65f6\u5668\uff0c\u7ed9\u8db3\u591f\u7684\u65f6\u95f4\u53bb\u753b\uff08\u6240\u4ee5\u6bcf\u6b21\u9012\u5f52\u6700\u5c11\u8981\u8017\u65f6200ms\uff0c\u591a\u6b21\u9012\u5f52\u5f88\u8017\u65f6\uff01\uff09\n  ctx.draw(false,setTimeout(function(){\n    //\u628a\u5f53\u524d\u753b\u5e03\u6307\u5b9a\u533a\u57df\u7684\u5185\u5bb9\u5bfc\u51fa\u751f\u6210\u6307\u5b9a\u5927\u5c0f\u7684\u56fe\u7247\uff0c\u5e76\u8fd4\u56de\u6587\u4ef6\u8def\u5f84\n    wx.canvasToTempFilePath({\n      canvasId:canvasId,\n      x:0,\n      y:0,\n      width:imageW,\n      height:imageH,\n      quality:1, //\u6700\u9ad8\u8d28\u91cf\n      success:(res)=&gt;{\n        //\u5c06\u53d6\u51fa\u7684\u56fe\u7247\u8def\u5f84\u901a\u8fc7\u56de\u8c03\u51fd\u6570\u8fd4\u56de\n        getImgSuccess(res.tempFilePath);\n      }\n    })\n  },200));\n}\n\n//\u4e3b\u51fd\u6570\uff0c\u9ed8\u8ba4\u9650\u5236\u5927\u5c0f1024kb\u53731mb,drawWidth\u662f\u7ed8\u753b\u533a\u57df\u7684\u5927\u5c0f\n//\u521d\u59cb\u503c\u4f20\u5165\u4e3a\u753b\u5e03\u81ea\u8eab\u7684\u8fb9\u957f\uff08\u6211\u4eec\u8fd9\u662f\u4e00\u4e2a\u6b63\u65b9\u5f62\u7684\u753b\u5e03\uff09\nfunction getLessLimitSizeImage(canvasId,imagePath,limitSize=1024,drawWidth,callback) {\n  //\u5224\u65ad\u56fe\u7247\u5c3a\u5bf8\u662f\u5426\u6ee1\u8db3\u8981\u6c42\n  imageSizeIsLessLimitSize(imagePath,limitSize,\n    (lessRes)=&gt;{\n      //\u6ee1\u8db3\u8981\u6c42\u8d70callback\uff0c\u5c06\u538b\u7f29\u540e\u7684\u6587\u4ef6\u8def\u5f84\u8fd4\u56de\n      callback(imagePath);\n    },\n    (moreRes)=&gt;{\n      //\u4e0d\u6ee1\u8db3\u8981\u6c42\u9700\u8981\u538b\u7f29\u7684\u65f6\u5019\n      wx.getImageInfo({\n        src:imagePath,\n        success:(imageInfo)=&gt;{\n          let maxSide=Math.max(imageInfo.width,imageInfo.height);\n          let windowW=drawWidth;\n          let scale=1;\n          /*\n          \u8fd9\u91cc\u7684\u76ee\u7684\u662f\u5f53\u7ed8\u753b\u533a\u57df\u7f29\u5c0f\u7684\u6bd4\u56fe\u7247\u81ea\u8eab\u5c3a\u5bf8\u8fd8\u8981\u5c0f\u7684\u65f6\u5019\n          \u53d6\u56fe\u7247\u957f\u5bbd\u7684\u6700\u5927\u503c\uff0c\u7136\u540e\u548c\u5f53\u524d\u7ed8\u753b\u533a\u57df\u8ba1\u7b97\u51fa\u9700\u8981\u653e\u7f29\u7684\u6bd4\u4f8b\n          \u7136\u540e\u518d\u753b\u7ecf\u8fc7\u653e\u7f29\u540e\u7684\u5c3a\u5bf8\uff0c\u4fdd\u8bc1\u753b\u51fa\u7684\u4e00\u5b9a\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u56fe\u7247\u3002\u7531\u4e8e\u6bcf\u6b21\u9012\u5f52\u7ed8\u753b\u533a\u57df\u90fd\u4f1a\u7f29\u5c0f\uff0c\n          \u6240\u4ee5\u4e0d\u7528\u62c5\u5fc3scale\u6c38\u8fdc\u90fd\u662f1\u7ed8\u753b\u5c3a\u5bf8\u6c38\u8fdc\u4e0d\u53d8\u7684\u60c5\u51b5\uff0c\u53ea\u8981\u4e0d\u6ee1\u8db3\u538b\u7f29\u540e\u4f53\u79ef\u7684\u8981\u6c42\n          \u5c31\u4f1a\u7f29\u5c0f\u7ed8\u753b\u533a\u57df\uff0c\u65e9\u665a\u4f1a\u6709\u7ed8\u753b\u533a\u57df\u5c0f\u4e8e\u56fe\u7247\u5c3a\u5bf8\u7684\u60c5\u51b5\u53d1\u751f\n          */\n          if(maxSide&gt;windowW){\n            scale=windowW/maxSide;\n          }\n          //trunc\u662f\u53bb\u6389\u5c0f\u6570\n          let imageW=Math.trunc(imageInfo.width*scale);\n          let imageH=Math.trunc(imageInfo.height*scale);\n          console.log('\u8c03\u7528\u538b\u7f29',imageW,imageH);\n          //\u56fe\u7247\u5728\u89c4\u5b9a\u7ed8\u753b\u533a\u57df\u4e0a\u753b\u5e76\u83b7\u53d6\u65b0\u7684\u56fe\u7247\u7684path\n          getCanvasImage(canvasId,imagePath,imageW,imageH,\n            (pressImgPath)=&gt;{\n              /*\n              \u518d\u53bb\u68c0\u67e5\u662f\u5426\u6ee1\u8db3\u8981\u6c42\uff0c\u59cb\u7ec8\u7f29\u5c0f\u7ed8\u753b\u533a\u57df\uff0c\u8ba9\u56fe\u7247\u9002\u914d\u7ed8\u753b\u533a\u57df\n              \u8fd9\u91cc\u4e58\u4ee50.8\u662f\u5fc5\u987b\u7684\uff0c\u5982\u679c\u4e0d\u7f29\u5c0f\u7ed8\u753b\u533a\u57df\uff0c\u4f1a\u51fa\u73b0\u5c3a\u5bf8\u6bd4\u7ed8\u753b\u533a\u57df\u5c0f\uff0c\n              \u800c\u4f53\u79ef\u6bd4\u8981\u6c42\u538b\u7f29\u4f53\u79ef\u5927\u7684\u60c5\u51b5\u51fa\u73b0\uff0c\u5c31\u4f1a\u65e0\u7a77\u9012\u5f52\u4e0b\u53bb\uff0c\u56e0\u4e3ascale\u7684\u503c\u6c38\u8fdc\u662f1\n              \u4f460.8\u4e0d\u662f\u56fa\u5b9a\u7684\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u9700\u8981\u81ea\u5df1\u6539\uff0c0\u52301\u4e4b\u95f4\uff0c\u8d8a\u5c0f\u5219\u7ed8\u753b\u533a\u57df\u7f29\u5c0f\u7684\u8d8a\u5feb\n              \u4f46\u4e0d\u5efa\u8bae\u53d6\u5f97\u592a\u5c0f\uff0c\u7ed8\u753b\u533a\u57df\u7f29\u5c0f\u7684\u592a\u5feb\uff0c\u538b\u51fa\u6765\u7684\u5c06\u603b\u662f\u5f88\u7cca\u7684\n              */\n              getLessLimitSizeImage(canvasId,pressImgPath,limitSize,drawWidth*0.8,callback);\n            }\n          )\n        }\n      })\n    }\n  )\n}\n\nexport default getLessLimitSizeImage\n\n</code></pre> <p>\u5728html\u9875\u9762\u4e2d\u5f15\u5165canvas\u7ec4\u4ef6</p> <pre><code>&lt;!-- \u538b\u7f29\u56fe\u7247 --&gt;\n&lt;canvas style=\"width: {{cw}}px; height: {{cw}}px;position: absolute; z-index: -1; left: -10000rpx; top: -10000rpx;\" canvas-id=\"zipCanvas\"&gt;&lt;/canvas&gt;\n</code></pre> <p>JS\u9875\u9762\u4e2d\u83b7\u53d6\u5bbd\u5ea6</p> <pre><code>data: {\n  // \u538b\u7f29\u56fe\u7247\n  cw: wx.getSystemInfoSync().windowWidth,\n}\n</code></pre> <p>\u51fd\u6570\u4e2d\u538b\u7f29\u56fe\u7247</p> <pre><code>// \u786e\u4fdd\u5f15\u5165getLessLimitSizeImage\u51fd\u6570\n\nwx.showLoading({ title: '\u56fe\u7247\u4e0a\u4f20\u4e2d...', mask: true }) //\u4e0d\u9700\u8981\u4f60\u53ef\u4ee5\u5220\u6389\n// \u538b\u7f29\u56fe\u7247\nlet canvasId = 'zipCanvas' //\u6ce8\u610f\u8fd9\u91cc\u7684id\u548c\u4f60\u5728\u9875\u9762\u4e2d\u5199\u7684html\u4ee3\u7801\u7684canvas\u7684id\u8981\u4e00\u81f4\nlet drawWidth = wx.getSystemInfoSync().windowWidth  //\u521d\u59cb\u7ed8\u753b\u533a\u57df\u662f\u753b\u5e03\u81ea\u8eab\u7684\u5bbd\u5ea6\u4e5f\u5c31\u662f\u5c4f\u5e55\u5bbd\u5ea6\nlet imagePath = file.url //\u539f\u56fe\u7684\u8def\u5f84\nlet limitSize = 128  //\u5927\u5c0f\u9650\u5236128KB\ngetLessLimitSizeImage(canvasId, imagePath, limitSize, drawWidth, (resPath) =&gt; {\n  wx.hideLoading();  //\u4e0d\u9700\u8981\u4f60\u53ef\u4ee5\u5220\u6389\n  // resPath\u5c31\u662f\u538b\u7f29\u540e\u7684\u56fe\u7247\u5730\u5740\n})\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8FActionSheet%E5%85%B3%E9%97%AD%E6%97%B6%E8%A7%A6%E5%8F%91%E5%85%A8%E5%B1%80bindtap/","title":"\u5fae\u4fe1\u5c0f\u7a0b\u5e8fActionSheet\u5173\u95ed\u65f6\u89e6\u53d1\u5168\u5c40bindtap","text":"<p>\u9875\u9762A\u8c03\u7528\u7ec4\u4ef6B\uff0c\u7ec4\u4ef6B\u7ed1\u5b9abind:tap\u4e8b\u4ef6C\uff0c\u7ec4\u4ef6B\u4e2d\u6709ActionSheet\u3002\u5f53\u7ec4\u4ef6B\u4e2d\u70b9\u51fb\u201c\u906e\u853d\u5c42\u201d\u6216\u8005\u201c\u53d6\u6d88\u201d\u65f6\u53ef\u4ee5\u5173\u95edActionSheet\uff0c\u4f46\u6b64\u65f6\u4f1a\u89e6\u53d1\u7ec4\u4ef6B\u7684bind:tap\u4e8b\u4ef6C\u3002</p> <p>\u89e3\u51b3\u65b9\u6848\u5c31\u662f\u4e0d\u8981\u5728\u9875\u9762A\u79cd\u76f4\u63a5\u7ed9\u7ec4\u4ef6B\u7ed1\u5b9abing:tap\u4e8b\u4ef6\uff0c\u800c\u662f\u5728\u7ec4\u4ef6B\u5185\u90e8\u7ed1\u5b9abind:tap\u4e8b\u4ef6\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%B0%81%E8%A3%85Promise/","title":"\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u521d\u59cb\u5316\u64cd\u4f5c","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%B0%81%E8%A3%85Promise/#wxrequest","title":"\u4e3a\u4ec0\u4e48\u4e0d\u7528\u539f\u751f\u7684wx.request","text":"<p>\u539f\u751f\u8bf7\u6c42\u4f1a\u51fa\u73b0\u56de\u8c03\u5730\u72f1\u95ee\u9898\uff0c\u5e76\u4e14\u5f88\u591a\u65f6\u5019\u5b9e\u73b0\u4e0d\u591f\u4f18\u96c5\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%B0%81%E8%A3%85Promise/#_2","title":"\u4f18\u96c5\u5207\u6362\u73af\u5883","text":"<p>\u9879\u76ee\u5468\u671f\u5206\u4e3a\u5f00\u53d1\u9636\u6bb5\uff08develop\uff09\u548c\u751f\u4ea7\u9636\u6bb5\uff08production\uff09\uff0c\u4e0d\u540c\u9636\u6bb5\u7684\u914d\u7f6e\u662f\u4e0d\u4e00\u6837\u7684\uff08\u4f8b\u5982\u5f00\u53d1\u73af\u5883\u548c\u751f\u6210\u73af\u5883\u7684\u540e\u7aefURL\u4e0d\u4e00\u6837\uff09\u3002\u6211\u4eec\u6709\u5fc5\u8981\u5c01\u88c5\u201c\u4e00\u952e\u5207\u6362\u73af\u5883\u201d\u7684\u64cd\u4f5c\u3002</p> <p>config.js\uff1a\u7528\u4e8e\u8bbe\u7f6e\u5f53\u524d\u5f00\u53d1\u73af\u5883</p> <pre><code>let env = \"develop\"  // \u53ef\u4ee5\u6307\u5b9a\u4e3adevelop\u6216production\n\n// \u9632\u6b62\u6211\u4eec\u5728\u4e0a\u4f20\u4ee3\u7801\u7684\u65f6\u5019\uff0c\u6ca1\u6709\u5c06env\u6539\u6210production\nconst envVersion = wx.getAccountInfoSync().miniProgram.envVersion\nif (envVersion === \"release\" &amp;&amp; env !== \"production\") {\n  env = \"production\"\n}\n\nexport default {\n  // \u5f53\u524d\u73af\u5883\n  env,\n  // \u8bf7\u6c42\u63a5\u53e3\u57df\u540d\n  baseUrl: {\n    develop: 'http://localhost:8080',  // \u81ea\u5b9a\u4e49api\n    production: 'https://lihailong.com:8081',\n  },\n}\n</code></pre> <p>app.js\uff1a\u5b9a\u4e49getConfig\u51fd\u6570\uff0c\u8c03\u7528\u8be5\u51fd\u6570\u53ef\u4ee5\u83b7\u53d6\u5168\u5c40\u53c2\u6570</p> <pre><code>// app.js\nimport localConfigs from \"./config\"\n\nApp({\n  // \u83b7\u53d6\u914d\u7f6e\n  getConfig(key = \"\") {\n    // \u4e0d\u6307\u5b9akey\uff0c\u8fd4\u56de\u5168\u90e8\n    if (key === \"\") {\n      return localConfigs\n    }\n    // \u4e0d\u5b58\u5728\u914d\u7f6e\n    if (!localConfigs[key]) {\n      console.warn(`${key} config is no exist`)\n      return undefined\n    }\n    // \u914d\u7f6e\u662f\u5426\u533a\u5206\u73af\u5883\n    if (typeof localConfigs[key] === \"object\" &amp;&amp; typeof localConfigs[key] !== null) {\n      // \u83b7\u53d6\u5f53\u524d\u73af\u5883\u7c7b\u578b\n      const env = this.getConfig(\"env\")\n      return localConfigs[key][env]\n    }\n    return localConfigs[key]\n  }\n})\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%B0%81%E8%A3%85Promise/#promise","title":"\u81ea\u5b9a\u4e49\u5c01\u88c5Promise\u98ce\u683c\u8bf7\u6c42","text":"<p>Promise\u98ce\u683c\u7684\u8bf7\u6c42\u80fd\u591f\u89e3\u51b3\u56de\u8c03\u5730\u72f1\u7684\u95ee\u9898\u3002</p> <p>\u540c\u65f6\u6211\u4eec\u53ef\u4ee5\u5728\u81ea\u5b9a\u4e49\u8bf7\u6c42\u4e2d\u643a\u5e26\u90e8\u5206\u5168\u5c40\u4fe1\u606f\uff08\u6bd4\u5982header\u8bf7\u6c42\u4e2d\u643a\u5e26token\uff09\u3002</p> <p>\u5c01\u88c5\u7684\u8bf7\u6c42\u53c2\u6570\u5982\u4e0b\uff1a</p> <ul> <li>url \u8bf7\u6c42url</li> <li>method \u8bf7\u6c42\u65b9\u5f0f\uff0c\u9ed8\u8ba4<code>GET</code></li> <li>data \u8bf7\u6c42\u6570\u636e</li> <li>timeout \u8bf7\u6c42\u6700\u957f\u65f6\u95f4(ms)\uff0c\u9ed8\u8ba420000\uff0c\u537320s</li> <li>showLoading \u662f\u5426\u5c55\u793aloading\uff0c\u9ed8\u8ba4\u4e3a<code>true</code></li> </ul> <p>util/request.js\uff1a</p> <pre><code>const app = getApp()\nexport function createRequest(options) {\n  return new Promise((resolve, reject) =&gt; {\n    const token = wx.getStorageSync('token')  // \u81ea\u5b9a\u4e49\uff1a\u83b7\u53d6token\n\n    const baseUrl = app.getConfig(\"baseUrl\")\n    const url = `${baseUrl}${options.url}`\n    const header = {  // \u81ea\u5b9a\u4e49header\n      'token': token\n    }\n    let showLoading = false\n    if (options.loading !== false) {\n      showLoading = true\n      wx.showLoading({\n        title: '\u6b63\u5728\u52a0\u8f7d',\n        mask: true\n      })\n    }\n    wx.request({\n      url,\n      method: options.method || 'GET',  // \u81ea\u5b9a\u4e49\uff0c\u9ed8\u8ba4GET\u65b9\u6cd5\n      timeout: options.timeout || 20000,  // \u81ea\u5b9a\u4e49\uff0c\u9ed8\u8ba4\u7b49\u5f8520s\n      header,\n      data: options.data || {},\n      success(res) {\n        /* \u81ea\u5b9a\u4e49\u540e\u7aef\u54cd\u5e94\u683c\u5f0f\n        res.data\u7684\u683c\u5f0f\n        {\n          code: 200,\n          success: true,\n          msg: '\u54cd\u5e94\u6b63\u5e38',\n          data: {}\n        }\n        */\n        res = res.data\n        if (showLoading) {\n          wx.hideLoading()\n          showLoading = false\n        }\n        if (res.success) {\n          return resolve(res)\n        } else {\n          wx.showToast({  // \u81ea\u5b9a\u4e49\uff1a\u5982\u679c\u6267\u884c\u5931\u8d25\uff0c\u5219\u5f39\u6846\u63d0\u9192\n            title: res.msg,\n            icon: 'none'\n          })\n          return reject(res)\n        }\n      },\n      fail(err) {\n        if (showLoading) {\n          wx.hideLoading()\n          showLoading = false\n        }\n        wx.showToast({  // \u81ea\u5b9a\u4e49\uff1a\u5982\u679c\u6267\u884c\u5931\u8d25\uff0c\u5219\u5f39\u6846\u63d0\u9192\n          title: '\u670d\u52a1\u5f00\u5c0f\u5dee\u5566\uff01',\n          icon: 'none'\n        })\n        reject(err)\n      }\n    })\n  })\n}\n</code></pre> <p>\u63a5\u53e3\u7684\u5b9a\u4e49\u548c\u8c03\u7528</p> <p>\u4e2a\u4eba\u4e60\u60ef\u5c06\u63a5\u53e3\u7684\u5b9a\u4e49\u548c\u63a5\u53e3\u7684\u8c03\u7528\u5206\u5f00\u5199\u3002</p> <ul> <li>\u5b9a\u4e49\u63a5\u53e3\uff1aapi/index/sendRequest.js</li> </ul> <pre><code>import { createRequest } from \"../../util/request\";\n\nexport function sendRequest(data) {  // \u5b9a\u4e49\u63a5\u53e3\n  return createRequest({  // \u8fd4\u56de\u4e00\u4e2aPromise\u5bf9\u8c61\n    url: '/test',\n    method: 'get', \n    data: data\n  })\n}\n</code></pre> <ul> <li>\u8c03\u7528\u63a5\u53e3\uff1apages/index/index.js</li> </ul> <pre><code>import { sendRequest } from \"../../api/index/sendRequest\"\n\n// index.js\nPage({\n  clickButton() {  // \u968f\u4fbf\u5b9a\u4e49\u4e86\u4e00\u4e2a\u51fd\u6570\n    sendRequest({'username': 'lhl', 'password': '123'})  // \u8c03\u7528\u63a5\u53e3\u7684\u65f6\u5019\uff0c\u4ec5\u9700\u8981\u4f20\u53c2\n    .then(resp =&gt; console.log(resp))\n    .catch(err =&gt; console.log(err))\n  }\n})\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%B0%81%E8%A3%85Promise/#promise_1","title":"\u81ea\u5b9a\u4e49\u5c01\u88c5Promise\u98ce\u683c\u4e0a\u4f20","text":"<p>util/request.js\uff1a</p> <pre><code>export function createUploadRequest(options) {\n  return new Promise((resolve, reject) =&gt; {\n    const token = wx.getStorageSync('token')  // \u81ea\u5b9a\u4e49\uff1a\u83b7\u53d6token\n    const baseUrl = app.getConfig(\"baseUrl\")\n    const url = `${baseUrl}${options.url}`\n    const header = {  // \u81ea\u5b9a\u4e49header\n      'token': token\n    }\n    let showLoading = false\n    if (options.loading !== false) {\n      showLoading = true\n      wx.showLoading({\n        title: '\u6b63\u5728\u52a0\u8f7d',\n        mask: true\n      })\n    }\n\n    // todo\n    wx.uploadFile({\n      url,\n      filePath: options.data.filePath,\n      header,\n      name: 'file',\n      formData: { user: 'test' },\n      timeout: options.timeout || 20000,\n      success: (res) =&gt; {\n        res = JSON.parse(res.data)\n        if (showLoading) {\n          wx.hideLoading()\n          showLoading = false\n        }\n        if (res.success) {\n          return resolve(res)\n        } else {\n          wx.showToast({  // \u81ea\u5b9a\u4e49\uff1a\u5982\u679c\u6267\u884c\u5931\u8d25\uff0c\u5219\u5f39\u6846\u63d0\u9192\n            title: res.msg,\n            icon: 'none'\n          })\n          return reject(res)\n        }\n      },\n      fail(err) {\n        if (showLoading) {\n          wx.hideLoading()\n          showLoading = false\n        }\n        wx.showToast({  // \u81ea\u5b9a\u4e49\uff1a\u5982\u679c\u6267\u884c\u5931\u8d25\uff0c\u5219\u5f39\u6846\u63d0\u9192\n          title: '\u670d\u52a1\u5f00\u5c0f\u5dee\u5566\uff01',\n          icon: 'none'\n        })\n        reject(err)\n      }\n    });\n  })\n}\n</code></pre> <p>\u5b9a\u4e49\u63a5\u53e3</p> <pre><code>import { createUploadRequest } from '../../../util/request'\n\nexport function uploadImage(data) {\n  return createUploadRequest({\n    url: '/upload/image',\n    method: 'POST', \n    data: data\n  })\n}\n</code></pre> <p>\u8c03\u7528\u63a5\u53e3</p> <pre><code>import { uploadImage } from '../../../api/trade/create-page/create-page'\nPage({\n  afterRead(e) {\n    const { file } = e.detail  // \u53d6\u51fa\u6587\u4ef6\u7684\u4e34\u65f6\u5730\u5740\uff0c\u81f3\u5173\u91cd\u8981\uff01\n    // \u8c03\u7528\u51fd\u6570\n    uploadImage({\n      filePath: file.url,\n    }).then(res =&gt; {\n      // \u4e0a\u4f20\u5b8c\u6210\u9700\u8981\u66f4\u65b0 fileList\n      const { fileList = [] } = this.data;\n      fileList.push({ ...file, url: res.data.url });\n      this.setData({ fileList });\n    })\n  },\n})\n\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%95%E5%85%A5ECharts/","title":"\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u5f15\u5165ECharts","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%95%E5%85%A5ECharts/#echarts-for-weixin","title":"\u7b2c\u4e00\u6b65\uff1a\u4e0b\u8f7decharts-for-weixin","text":"<p>Github\u5730\u5740\uff1ahttps://github.com/ecomfe/echarts-for-weixin</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%95%E5%85%A5ECharts/#echarts_1","title":"\u7b2c\u4e8c\u6b65\uff1a\u6253\u5f00\u5b98\u65b9echarts\u9879\u76ee","text":"<p>\u5c06\u6839\u76ee\u5f55\u7684<code>ec-canvas</code>\u76ee\u5f55\u62f7\u8d1d\u5230\u6211\u4eec\u9879\u76ee\u7684\u6839\u76ee\u5f55\u4e0b\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%95%E5%85%A5ECharts/#echarts_2","title":"\u7b2c\u4e09\u6b65\uff1a\u4f7f\u7528echarts","text":"<p>\u53ef\u4ee5\u501f\u9274\u5b98\u65b9\u9879\u76ee\u4e2d\u4f7f\u7528echarts\u7684\u6848\u4f8b\uff0c\u4e5f\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684\u6848\u4f8b\u3002</p> <p>HTML</p> <pre><code>&lt;navigation-bar title=\"lazy echart\" back=\"{{false}}\" color=\"black\" background=\"#FFF\"&gt;&lt;/navigation-bar&gt;\n&lt;!-- \n1. \u5fc5\u987b\u6307\u5b9aec-canvas\u7684\u957f\u5ea6\u548c\u5bbd\u5ea6\n2. \u5fc5\u987b\u6307\u5b9aec-canvas\u6807\u7b7e\u7684ec\u5c5e\u6027\n3. \u5efa\u8bae\u5236\u5b9aid\u5c5e\u6027\u548ccanvas-id\u5c5e\u6027\n--&gt;\n\n&lt;!-- \u56fe1 --&gt;\n&lt;view class=\"my-chart\" style=\"width: 100%; height: 1000rpx;\"&gt;\n  &lt;ec-canvas id=\"graph1\" canvas-id=\"chart1\" ec=\"{{ec1}}\" style=\"width: 100%; height: 100%;\"&gt;&lt;/ec-canvas&gt;\n&lt;/view&gt;\n\n&lt;!-- \u56fe2 --&gt;\n&lt;view class=\"my-chart\" style=\"width: 100%; height: 1000rpx;\"&gt;\n  &lt;ec-canvas id=\"graph2\" canvas-id=\"chart2\" ec=\"{{ec2}}\" style=\"width: 100%; height: 100%;\"&gt;&lt;/ec-canvas&gt;\n&lt;/view&gt;\n</code></pre> <p>JS</p> <pre><code>// pages/lazy-echart/lazy-echart.js\nimport * as echarts from '../../ec-canvas/echarts'\n\nPage({\n\n  /**\n   * \u9875\u9762\u7684\u521d\u59cb\u6570\u636e\n   */\n  data: {\n    ec1: {\n      lazyLoad: true\n    },\n    ec2: {\n      lazyLoad: true\n    }\n  },\n  onLoad(options) {\n    this.component1 = this.selectComponent(\"#graph1\")  // \u83b7\u53d6\u56fe1dom\n    this.component2 = this.selectComponent(\"#graph2\")  // \u83b7\u53d6\u56fe2dom\n    this.init()\n  },\n  init() {\n    // \u56fe1\u521d\u59cb\u5316\n    this.component1.init((canvas, width, height, dpr) =&gt; {\n      let chart = echarts.init(canvas, null, {\n        width,\n        height,\n        devicePixelRatio: dpr\n      })\n      let option = getOption1()\n      chart.setOption(option)\n      this.chart = chart\n      return chart\n    })\n\n    // \u56fe2\u521d\u59cb\u5316\n    this.component2.init((canvas, width, height, dpr) =&gt; {\n      let chart = echarts.init(canvas, null, {\n        width,\n        height,\n        devicePixelRatio: dpr\n      })\n      let option = getOption2()\n      chart.setOption(option)\n      this.chart = chart\n      return chart\n    })\n  }\n})\n\nfunction getOption1() {  // \u83b7\u53d6\u56fe1\u914d\u7f6e\u4fe1\u606f\n  wx.request({\n    url: 'http://localhost:8080/graph/1',  // \u81ea\u5b9a\u4e49\u540e\u7aef\u83b7\u53d6\u6570\u636e\n  })\n\n  let option = {\n    title: {\n      text: 'Referer of a Website',\n      subtext: 'Fake Data',\n      left: 'center'\n    },\n    xAxis: {\n      type: 'category',\n      data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']\n    },\n    yAxis: {\n      type: 'value'\n    },\n    series: [\n      {\n        data: [150, 230, 224, 218, 135, 147, 260],\n        type: 'line'\n      }\n    ]\n  }\n\n  option.title.text = '\u7b2c\u4e00\u4e2a\u56fe'  // \u81ea\u5b9a\u4e49\u53c2\u6570\n  return option\n}\n\nfunction getOption2() {  // \u83b7\u53d6\u56fe2\u914d\u7f6e\u4fe1\u606f\n  wx.request({\n    url: 'http://localhost:8080/graph/2',  // \u81ea\u5b9a\u4e49\u540e\u7aef\u83b7\u53d6\u6570\u636e\n  })\n\n  let option = {\n    title: {\n      text: 'Referer of a Website',\n      subtext: 'Fake Data',\n      left: 'center'\n    },\n    tooltip: {\n      trigger: 'item'\n    },\n    legend: {\n      orient: 'vertical',\n      left: 'left'\n    },\n    series: [\n      {\n        name: 'Access From',\n        type: 'pie',\n        radius: '50%',\n        data: [\n          { value: 1048, name: 'Search Engine' },\n          { value: 735, name: 'Direct' },\n          { value: 580, name: 'Email' },\n          { value: 484, name: 'Union Ads' },\n          { value: 300, name: 'Video Ads' }\n        ],\n        emphasis: {\n          itemStyle: {\n            shadowBlur: 10,\n            shadowOffsetX: 0,\n            shadowColor: 'rgba(0, 0, 0, 0.5)'\n          }\n        }\n      }\n    ]\n  }\n\n  option.title.text = '\u7b2c\u4e8c\u4e2a\u56fe'  // \u81ea\u5b9a\u4e49\u53c2\u6570\n  return option\n}\n</code></pre> <p>JSON</p> <pre><code>{\n  \"usingComponents\": {\n    \"navigation-bar\": \"/components/navigation-bar/navigation-bar\",\n    \"ec-canvas\": \"../../ec-canvas/ec-canvas\"\n  }\n}\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84Base64%E5%B7%A5%E5%85%B7/","title":"\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u7684Base64\u5de5\u5177","text":"<p>\u4f7f\u7528\u65b9\u6cd5\uff1a</p> <pre><code>let token = \"\u67d0\u4e2abase64\u5b57\u7b26\u4e32\";\nlet res = Base64.decode(token.slice(l, r));\nconsole.log(res);\n</code></pre> <p>\u521b\u5efaBase64.js</p> <pre><code>export let Base64 = {\n    // \u8f6c\u7801\u8868\n    tables : [\n            'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H',\n            'I', 'J', 'K', 'L', 'M', 'N', 'O' ,'P',\n            'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X',\n            'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f',\n            'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',\n            'o', 'p', 'q', 'r', 's', 't', 'u', 'v',\n            'w', 'x', 'y', 'z', '0', '1', '2', '3',\n            '4', '5', '6', '7', '8', '9', '+', '/'\n    ],\n    UTF16ToUTF8 : function (str) {\n        let results = [], len = str.length;\n        for (let i = 0; i &lt; len; i++) {\n            let code = str.charCodeAt(i);\n            if (code &gt; 0x0000 &amp;&amp; code &lt;= 0x007F) {\n                /* \u4e00\u5b57\u8282\uff0c\u4e0d\u8003\u86510x0000\uff0c\u56e0\u4e3a\u662f\u7a7a\u5b57\u8282\n                   U+00000000 \u2013 U+0000007F  0xxxxxxx\n                */\n                results.push(str.charAt(i));\n            } else if (code &gt;= 0x0080 &amp;&amp; code &lt;= 0x07FF) {\n                /* \u4e8c\u5b57\u8282\n                   U+00000080 \u2013 U+000007FF  110xxxxx 10xxxxxx\n                   110xxxxx\n                */\n                let byte1 = 0xC0 | ((code &gt;&gt; 6) &amp; 0x1F);\n                // 10xxxxxx\n                let byte2 = 0x80 | (code &amp; 0x3F);\n                results.push(\n                    String.fromCharCode(byte1), \n                    String.fromCharCode(byte2)\n                );\n            } else if (code &gt;= 0x0800 &amp;&amp; code &lt;= 0xFFFF) {\n                /* \u4e09\u5b57\u8282\n                   U+00000800 \u2013 U+0000FFFF  1110xxxx 10xxxxxx 10xxxxxx\n                   1110xxxx\n                */\n                let byte1 = 0xE0 | ((code &gt;&gt; 12) &amp; 0x0F);\n                // 10xxxxxx\n                let byte2 = 0x80 | ((code &gt;&gt; 6) &amp; 0x3F);\n                // 10xxxxxx\n                let byte3 = 0x80 | (code &amp; 0x3F);\n                results.push(\n                    String.fromCharCode(byte1), \n                    String.fromCharCode(byte2), \n                    String.fromCharCode(byte3)\n                );\n            } else if (code &gt;= 0x00010000 &amp;&amp; code &lt;= 0x001FFFFF) {\n                // \u56db\u5b57\u8282\n                // U+00010000 \u2013 U+001FFFFF  11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n            } else if (code &gt;= 0x00200000 &amp;&amp; code &lt;= 0x03FFFFFF) {\n                // \u4e94\u5b57\u8282\n                // U+00200000 \u2013 U+03FFFFFF  111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx\n            } else /** if (code &gt;= 0x04000000 &amp;&amp; code &lt;= 0x7FFFFFFF)*/ {\n                // \u516d\u5b57\u8282\n                // U+04000000 \u2013 U+7FFFFFFF  1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx\n            }\n        }\n        return results.join('');\n    },\n    UTF8ToUTF16 : function (str) {\n        let results = [], len = str.length;\n        let i = 0;\n        for (let i = 0; i &lt; len; i++) {\n            let code = str.charCodeAt(i);\n            // \u7b2c\u4e00\u5b57\u8282\u5224\u65ad\n            if (((code &gt;&gt; 7) &amp; 0xFF) == 0x0) {\n                // \u4e00\u5b57\u8282\n                // 0xxxxxxx\n                results.push(str.charAt(i));\n            } else if (((code &gt;&gt; 5) &amp; 0xFF) == 0x6) {\n                // \u4e8c\u5b57\u8282\n                // 110xxxxx 10xxxxxx\n                let code2 = str.charCodeAt(++i);\n                let byte1 = (code &amp; 0x1F) &lt;&lt; 6;\n                let byte2 = code2 &amp; 0x3F;\n                let utf16 = byte1 | byte2;\n                results.push(Sting.fromCharCode(utf16));\n            } else if (((code &gt;&gt; 4) &amp; 0xFF) == 0xE) {\n                // \u4e09\u5b57\u8282\n                // 1110xxxx 10xxxxxx 10xxxxxx\n                let code2 = str.charCodeAt(++i);\n                let code3 = str.charCodeAt(++i);\n                let byte1 = (code &lt;&lt; 4) | ((code2 &gt;&gt; 2) &amp; 0x0F);\n                let byte2 = ((code2 &amp; 0x03) &lt;&lt; 6) | (code3 &amp; 0x3F);\n                let utf16 = ((byte1 &amp; 0x00FF) &lt;&lt; 8) | byte2\n                results.push(String.fromCharCode(utf16));\n            } else if (((code &gt;&gt; 3) &amp; 0xFF) == 0x1E) {\n                // \u56db\u5b57\u8282\n                // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n            } else if (((code &gt;&gt; 2) &amp; 0xFF) == 0x3E) {\n                // \u4e94\u5b57\u8282\n                // 111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx\n            } else /** if (((code &gt;&gt; 1) &amp; 0xFF) == 0x7E)*/ {\n                // \u516d\u5b57\u8282\n                // 1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx\n            }\n        }\n        return results.join('');\n    },\n    encode : function (str) {\n        if (!str) {\n            return '';\n        }\n        let utf8    = this.UTF16ToUTF8(str); // \u8f6c\u6210UTF-8\n        let i = 0; // \u904d\u5386\u7d22\u5f15\n        let len = utf8.length;\n        let results = [];\n        while (i &lt; len) {\n            let c1 = utf8.charCodeAt(i++) &amp; 0xFF;\n            results.push(this.tables[c1 &gt;&gt; 2]);\n            // \u88652\u4e2a=\n            if (i == len) {\n                results.push(this.tables[(c1 &amp; 0x3) &lt;&lt; 4]);\n                results.push('==');\n                break;\n            }\n            let c2 = utf8.charCodeAt(i++);\n            // \u88651\u4e2a=\n            if (i == len) {\n                results.push(this.tables[((c1 &amp; 0x3) &lt;&lt; 4) | ((c2 &gt;&gt; 4) &amp; 0x0F)]);\n                results.push(this.tables[(c2 &amp; 0x0F) &lt;&lt; 2]);\n                results.push('=');\n                break;\n            }\n            let c3 = utf8.charCodeAt(i++);\n            results.push(this.tables[((c1 &amp; 0x3) &lt;&lt; 4) | ((c2 &gt;&gt; 4) &amp; 0x0F)]);\n            results.push(this.tables[((c2 &amp; 0x0F) &lt;&lt; 2) | ((c3 &amp; 0xC0) &gt;&gt; 6)]);\n            results.push(this.tables[c3 &amp; 0x3F]);\n        }\n        return results.join('');\n    },\n    decode : function (str) {\n        //\u5224\u65ad\u662f\u5426\u4e3a\u7a7a\n        if (!str) {\n            return '';\n        }\n        let len = str.length;\n        let i   = 0;\n        let results = [];\n        //\u5faa\u73af\u89e3\u51fa\u5b57\u7b26\u6570\u7ec4\n        while (i &lt; len) {\n            let code1 = this.tables.indexOf(str.charAt(i++));\n            let code2 = this.tables.indexOf(str.charAt(i++));\n            let code3 = this.tables.indexOf(str.charAt(i++));\n            let code4 = this.tables.indexOf(str.charAt(i++));\n\n            let c1 = (code1 &lt;&lt; 2) | (code2 &gt;&gt; 4);\n            results.push(String.fromCharCode(c1));\n\n            if (code3 != -1) {\n                let c2 = ((code2 &amp; 0xF) &lt;&lt; 4) | (code3 &gt;&gt; 2);\n                results.push(String.fromCharCode(c2));\n            }\n            if (code4 != -1) {\n                let c3 = ((code3 &amp; 0x3) &lt;&lt; 6) | code4;\n                results.push(String.fromCharCode(c3));\n            }\n        }\n        return this.UTF8ToUTF16(results.join(''));\n    }\n};\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%87%AA%E5%AE%9A%E4%B9%89%E6%97%A5%E5%BF%97/","title":"\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u81ea\u5b9a\u4e49\u65e5\u5fd7","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%87%AA%E5%AE%9A%E4%B9%89%E6%97%A5%E5%BF%97/#_2","title":"\u80cc\u666f","text":"<p>\u4e3a\u4e86\u89c4\u8303\uff0c\u65b9\u4fbf\u7684\u6253\u5370\u65e5\u5fd7\uff0c\u6211\u5305\u88c5\u4e86\u4e00\u4e2a\u65e5\u5fd7\u7c7b\uff0c\u5e76\u5bf9\u5916\u66b4\u9732\u4e86\u4e00\u4e2a\u65e5\u5fd7\u5bf9\u8c61\u3002\u8c03\u7528\u8be5\u65e5\u5fd7\u5bf9\u8c61\u7684print\u65b9\u6cd5\u5373\u53ef\u89c4\u8303\u6253\u5370\u65e5\u5fd7\u3002</p> <p>print\u65b9\u6cd5\u6709\u4e24\u4e2a\u53c2\u6570\uff1a</p> <ol> <li><code>functionName</code>\uff1a\u5f53\u524d\u51fd\u6570\u540d\u3002\u7531\u4e8eJS\u65e0\u6cd5\u65b9\u4fbf\u7684\u83b7\u53d6\u5f53\u524d\u51fd\u6570\u540d\uff0c\u6240\u4ee5\u9700\u8981\u624b\u52a8\u4f20\u5165\u51fd\u6570\u540d\u3002</li> <li><code>msg</code>\uff1a\u6253\u5370\u4fe1\u606f\u3002</li> </ol>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%87%AA%E5%AE%9A%E4%B9%89%E6%97%A5%E5%BF%97/#_3","title":"\u6848\u4f8b","text":"<p>util/logger.js</p> <pre><code>class Logger {\n  print(functionName = 'unknown function name', msg = 'null') {\n    const currentPages = getCurrentPages()\n    const currentPage = currentPages[currentPages.length - 1]\n    console.log(`\n    \u9875\u9762\u8def\u5f84: ${currentPage.route}\\n\n    \u6267\u884c\u51fd\u6570: ${functionName}\\n\n    \u6267\u884c\u65f6\u95f4: ${new Date()}\\n\n    \u65e5\u5fd7\u4fe1\u606f: ${msg}\\n`)\n  }\n}\n\nlet logger = new Logger()\n\nexport default logger\n</code></pre> <p>\u4f7f\u7528</p> <pre><code>import logger from '../../utils/logger.js'\n\npage({\n  clickCheckBox(e) {\n    let point = e.currentTarget.dataset.place\n    let row = point[0], col = point[1]\n\n    // \u91cd\u8981\uff1a\u6253\u5370\u65e5\u5fd7\n    logger.print(this.clickCheckBox.name, `row=${row} col=${col}`)\n\n    let allTermCheckBox = this.data.allTermCheckBox\n    allTermCheckBox[row][col] ^= 1\n    this.setData({\n      allTermCheckBox\n    })\n  }\n})\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81/","title":"\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u8868\u5355\u9a8c\u8bc1","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81/#_2","title":"\u7b2c\u4e09\u65b9\u5e93\u5730\u5740","text":"<p>\u5b98\u65b9\u5730\u5740</p> <p>\u529f\u80fd\uff1a\u8be5\u5e93\u53ef\u4ee5\u5bf9\u5fae\u4fe1\u5c0f\u7a0b\u5e8fform\u63d0\u4ea4\u7684\u6570\u636e\u505a\u6821\u9a8c\u3002\u4e5f\u53ef\u4ee5\u81ea\u5df1\u5c06\u5f85\u6821\u9a8c\u6570\u636e\u5c01\u88c5\u6210\u7c7b\u4f3c\u8fd9\u6837\u7684\u683c\u5f0f\u8fdb\u884c\u6821\u9a8c\uff1a<code>{username: \"admin\", password: \"123456\", email: \"123456@qq.com\"}</code>\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81/#_3","title":"\u5177\u4f53\u4ee3\u7801","text":"<p>\u5b9e\u73b0\u7ec6\u8282\uff1a\u8868\u5355\u5185\u5bb9\u653e\u5728<code>&lt;form&gt;</code>\u6807\u7b7e\u4e2d\uff1bform\u6807\u7b7e\u7684\u5c5e\u6027\u6709<code>catchsubmit=\"formSubmit\"</code>;\u6bcf\u4e00\u4e2a\u8f93\u5165\u6846\u90fd\u6709\u4e00\u4e2a<code>name</code>\u5c5e\u6027\uff1b\u63d0\u4ea4\u6309\u94ae\u7684\u5c5e\u6027\u4e3a<code>formType=\"submit\"</code>\uff1b\u63a5\u6536form\u6570\u636e\u7684JS\u51fd\u6570\u662f<code>formSubmit(e) {}</code>\u3002\u5176\u4e2d\uff0c<code>formSubmit</code>\u51fd\u6570\u540d\u53ef\u4ee5\u81ea\u5b9a\u4e49\u3002</p> <ol> <li>\u521b\u5efa\u8868\u5355</li> </ol> <pre><code>&lt;form catchsubmit=\"formSubmit\"&gt;\n  &lt;input type=\"text\" placeholder=\"\u7528\u6237\u540d\" style=\"border: 1px solid black;\" name=\"username\" /&gt;\n  &lt;input type=\"password\" placeholder=\"\u5bc6\u7801\" style=\"border: 1px solid black;\" name=\"password\" /&gt;\n  &lt;input type=\"text\" placeholder=\"\u90ae\u7bb1\" style=\"border: 1px solid black;\" name=\"email\" /&gt;\n  &lt;button style=\"margin: 30rpx 0\" type=\"primary\" formType=\"submit\"&gt;Submit&lt;/button&gt;\n&lt;/form&gt;\n</code></pre> <ol> <li>\u7f16\u5199JS\u51fd\u6570</li> </ol> <pre><code>Page({\n  formSubmit(e) {\n    console.log(e)\n  }\n})\n</code></pre> <ol> <li>\u5f15\u5165\u7b2c\u4e09\u65b9\u5e93\uff0c\u5e76\u7f16\u5199\u6821\u9a8c\u89c4\u5219\uff1a</li> </ol> <p>\u200b       a) <code>checkForm</code>\u51fd\u6570\u4f20\u5165\u7684\u53c2\u6570\u7c7b\u4f3c\uff1a<code>{username: \"admin\", password: \"123456\", email: \"123456@qq.com\"}</code>\u3002</p> <p>\u200b       b) rules\u4e2d\u7684\u5bf9\u8c61\u548cmessage\u4e2d\u7684\u5bf9\u8c61\u8981\u4e00\u4e00\u5bf9\u5e94\uff0c\u5e76\u4e14\u8981\u548c<code>checkForm</code>\u51fd\u6570\u4f20\u5165\u7684\u53c2\u6570\u4e25\u683c\u5bf9\u5e94\uff0crules\u4e2d\u8bbe\u5b9a\u6821\u9a8c\u89c4\u5219\uff0cmessage\u4e2d\u8bbe\u5b9a\u62a5\u9519\u63d0\u793a\u3002</p> <p>\u200b       c) \u6821\u9a8c\u89c4\u5219\u53ef\u53c2\u8003\u5b98\u65b9\u6587\u6863\u3002</p> <pre><code>// index.js\nimport WxValidate from '../../util/WxValidate.js'\nPage({\n  formSubmit(e) {\n    // \u9a8c\u8bc1\u5b57\u6bb5\u7684\u89c4\u5219\uff0c\n    const rules = {\n      username: {\n        required: true,\n        minlength: 2,\n        maxlength: 18\n      },\n      password: {\n        required: true,\n        minlength: 6,\n        maxlength: 18\n      },\n      email: {\n        required: true,\n        email: true,\n      },\n    }\n\n    // \u9a8c\u8bc1\u5b57\u6bb5\u7684\u63d0\u793a\u4fe1\u606f\uff0c\u82e5\u4e0d\u4f20\u5219\u8c03\u7528\u9ed8\u8ba4\u7684\u4fe1\u606f\n    const messages = {\n      username: {\n        required: '\u8bf7\u8f93\u5165\u7528\u6237\u540d',\n        minlength: '\u7528\u6237\u540d\u81f3\u5c112\u4f4d',\n        maxlength: '\u7528\u6237\u540d\u6700\u591a30\u4f4d'\n      },\n      password: {\n        required: '\u8bf7\u8f93\u5165\u5bc6\u7801',\n        minlength: '\u5bc6\u7801\u81f3\u5c11\u67096\u4f4d',\n        maxlength: '\u5bc6\u7801\u6700\u591a18\u4f4d'\n      },\n      email: {\n        required: '\u8bf7\u8f93\u5165\u90ae\u7bb1',\n        email: '\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1',\n      },\n    }\n\n    // \u521b\u5efa\u5b9e\u4f8b\u5bf9\u8c61\n    this.WxValidate = new WxValidate(rules, messages)\n    const params = e.detail.value\n    // console.log(params)\n    if (!this.WxValidate.checkForm(params)) {\n      const error = this.WxValidate.errorList[0]\n      wx.showToast({\n        title: error.msg,\n        icon: 'error'\n      })\n      return false\n    }\n    // console.log('\u6821\u9a8c\u6210\u529f\uff01')\n  }\n})\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81/#_4","title":"\u7b2c\u4e09\u65b9\u5e93\u4ee3\u7801","text":"<pre><code>/**\n * \u8868\u5355\u9a8c\u8bc1\n * \n * @param {Object} rules \u9a8c\u8bc1\u5b57\u6bb5\u7684\u89c4\u5219\n * @param {Object} messages \u9a8c\u8bc1\u5b57\u6bb5\u7684\u63d0\u793a\u4fe1\u606f\n * \n */\nclass WxValidate {\n  constructor(rules = {}, messages = {}) {\n      Object.assign(this, {\n          data: {},\n          rules,\n          messages,\n      })\n      this.__init()\n  }\n\n  /**\n   * __init\n   */\n  __init() {\n      this.__initMethods()\n      this.__initDefaults()\n      this.__initData()\n  }\n\n  /**\n   * \u521d\u59cb\u5316\u6570\u636e\n   */\n  __initData() {\n      this.form = {}\n      this.errorList = []\n  }\n\n  /**\n   * \u521d\u59cb\u5316\u9ed8\u8ba4\u63d0\u793a\u4fe1\u606f\n   */\n  __initDefaults() {\n      this.defaults = {\n          messages: {\n              required: '\u8fd9\u662f\u5fc5\u586b\u5b57\u6bb5\u3002',\n              email: '\u8bf7\u8f93\u5165\u6709\u6548\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u3002',\n              tel: '\u8bf7\u8f93\u516511\u4f4d\u7684\u624b\u673a\u53f7\u7801\u3002',\n              url: '\u8bf7\u8f93\u5165\u6709\u6548\u7684\u7f51\u5740\u3002',\n              date: '\u8bf7\u8f93\u5165\u6709\u6548\u7684\u65e5\u671f\u3002',\n              dateISO: '\u8bf7\u8f93\u5165\u6709\u6548\u7684\u65e5\u671f\uff08ISO\uff09\uff0c\u4f8b\u5982\uff1a2009-06-23\uff0c1998/01/22\u3002',\n              number: '\u8bf7\u8f93\u5165\u6709\u6548\u7684\u6570\u5b57\u3002',\n              digits: '\u53ea\u80fd\u8f93\u5165\u6570\u5b57\u3002',\n              idcard: '\u8bf7\u8f93\u516518\u4f4d\u7684\u6709\u6548\u8eab\u4efd\u8bc1\u3002',\n              equalTo: this.formatTpl('\u8f93\u5165\u503c\u5fc5\u987b\u548c {0} \u76f8\u540c\u3002'),\n              contains: this.formatTpl('\u8f93\u5165\u503c\u5fc5\u987b\u5305\u542b {0}\u3002'),\n              minlength: this.formatTpl('\u6700\u5c11\u8981\u8f93\u5165 {0} \u4e2a\u5b57\u7b26\u3002'),\n              maxlength: this.formatTpl('\u6700\u591a\u53ef\u4ee5\u8f93\u5165 {0} \u4e2a\u5b57\u7b26\u3002'),\n              rangelength: this.formatTpl('\u8bf7\u8f93\u5165\u957f\u5ea6\u5728 {0} \u5230 {1} \u4e4b\u95f4\u7684\u5b57\u7b26\u3002'),\n              min: this.formatTpl('\u8bf7\u8f93\u5165\u4e0d\u5c0f\u4e8e {0} \u7684\u6570\u503c\u3002'),\n              max: this.formatTpl('\u8bf7\u8f93\u5165\u4e0d\u5927\u4e8e {0} \u7684\u6570\u503c\u3002'),\n              range: this.formatTpl('\u8bf7\u8f93\u5165\u8303\u56f4\u5728 {0} \u5230 {1} \u4e4b\u95f4\u7684\u6570\u503c\u3002'),\n          }\n      }\n  }\n\n  /**\n   * \u521d\u59cb\u5316\u9ed8\u8ba4\u9a8c\u8bc1\u65b9\u6cd5\n   */\n  __initMethods() {\n      const that = this\n      that.methods = {\n          /**\n           * \u9a8c\u8bc1\u5fc5\u586b\u5143\u7d20\n           */\n          required(value, param) {\n              if (!that.depend(param)) {\n                  return 'dependency-mismatch'\n              } else if (typeof value === 'number') {\n                  value = value.toString()\n              } else if (typeof value === 'boolean') {\n                  return !0\n              }\n\n              return value.length &gt; 0\n          },\n          /**\n           * \u9a8c\u8bc1\u7535\u5b50\u90ae\u7bb1\u683c\u5f0f\n           */\n          email(value) {\n              return that.optional(value) || /^[a-zA-Z0-9.!#$%&amp;'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(value)\n          },\n          /**\n           * \u9a8c\u8bc1\u624b\u673a\u683c\u5f0f\n           */\n          tel(value) {\n              return that.optional(value) || /^1[34578]\\d{9}$/.test(value)\n          },\n          /**\n           * \u9a8c\u8bc1URL\u683c\u5f0f\n           */\n          url(value) {\n              return that.optional(value) || /^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})).?)(?::\\d{2,5})?(?:[/?#]\\S*)?$/i.test(value)\n          },\n          /**\n           * \u9a8c\u8bc1\u65e5\u671f\u683c\u5f0f\n           */\n          date(value) {\n              return that.optional(value) || !/Invalid|NaN/.test(new Date(value).toString())\n          },\n          /**\n           * \u9a8c\u8bc1ISO\u7c7b\u578b\u7684\u65e5\u671f\u683c\u5f0f\n           */\n          dateISO(value) {\n              return that.optional(value) || /^\\d{4}[\\/\\-](0?[1-9]|1[012])[\\/\\-](0?[1-9]|[12][0-9]|3[01])$/.test(value)\n          },\n          /**\n           * \u9a8c\u8bc1\u5341\u8fdb\u5236\u6570\u5b57\n           */\n          number(value) {\n              return that.optional(value) || /^(?:-?\\d+|-?\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$/.test(value)\n          },\n          /**\n           * \u9a8c\u8bc1\u6574\u6570\n           */\n          digits(value) {\n              return that.optional(value) || /^\\d+$/.test(value)\n          },\n          /**\n           * \u9a8c\u8bc1\u8eab\u4efd\u8bc1\u53f7\u7801\n           */\n          idcard(value) {\n              return that.optional(value) || /^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}([0-9]|X)$/.test(value)\n          },\n          /**\n           * \u9a8c\u8bc1\u4e24\u4e2a\u8f93\u5165\u6846\u7684\u5185\u5bb9\u662f\u5426\u76f8\u540c\n           */\n          equalTo(value, param) {\n              return that.optional(value) || value === that.data[param]\n          },\n          /**\n           * \u9a8c\u8bc1\u662f\u5426\u5305\u542b\u67d0\u4e2a\u503c\n           */\n          contains(value, param) {\n              return that.optional(value) || value.indexOf(param) &gt;= 0\n          },\n          /**\n           * \u9a8c\u8bc1\u6700\u5c0f\u957f\u5ea6\n           */\n          minlength(value, param) {\n              return that.optional(value) || value.length &gt;= param\n          },\n          /**\n           * \u9a8c\u8bc1\u6700\u5927\u957f\u5ea6\n           */\n          maxlength(value, param) {\n              return that.optional(value) || value.length &lt;= param\n          },\n          /**\n           * \u9a8c\u8bc1\u4e00\u4e2a\u957f\u5ea6\u8303\u56f4[min, max]\n           */\n          rangelength(value, param) {\n              return that.optional(value) || (value.length &gt;= param[0] &amp;&amp; value.length &lt;= param[1])\n          },\n          /**\n           * \u9a8c\u8bc1\u6700\u5c0f\u503c\n           */\n          min(value, param) {\n              return that.optional(value) || value &gt;= param\n          },\n          /**\n           * \u9a8c\u8bc1\u6700\u5927\u503c\n           */\n          max(value, param) {\n              return that.optional(value) || value &lt;= param\n          },\n          /**\n           * \u9a8c\u8bc1\u4e00\u4e2a\u503c\u8303\u56f4[min, max]\n           */\n          range(value, param) {\n              return that.optional(value) || (value &gt;= param[0] &amp;&amp; value &lt;= param[1])\n          },\n      }\n  }\n\n  /**\n   * \u6dfb\u52a0\u81ea\u5b9a\u4e49\u9a8c\u8bc1\u65b9\u6cd5\n   * @param {String} name \u65b9\u6cd5\u540d\n   * @param {Function} method \u51fd\u6570\u4f53\uff0c\u63a5\u6536\u4e24\u4e2a\u53c2\u6570(value, param)\uff0cvalue\u8868\u793a\u5143\u7d20\u7684\u503c\uff0cparam\u8868\u793a\u53c2\u6570\n   * @param {String} message \u63d0\u793a\u4fe1\u606f\n   */\n  addMethod(name, method, message) {\n      this.methods[name] = method\n      this.defaults.messages[name] = message !== undefined ? message : this.defaults.messages[name]\n  }\n\n  /**\n   * \u5224\u65ad\u9a8c\u8bc1\u65b9\u6cd5\u662f\u5426\u5b58\u5728\n   */\n  isValidMethod(value) {\n      let methods = []\n      for (let method in this.methods) {\n          if (method &amp;&amp; typeof this.methods[method] === 'function') {\n              methods.push(method)\n          }\n      }\n      return methods.indexOf(value) !== -1\n  }\n\n  /**\n   * \u683c\u5f0f\u5316\u63d0\u793a\u4fe1\u606f\u6a21\u677f\n   */\n  formatTpl(source, params) {\n      const that = this\n      if (arguments.length === 1) {\n          return function() {\n              let args = Array.from(arguments)\n              args.unshift(source)\n              return that.formatTpl.apply(this, args)\n          }\n      }\n      if (params === undefined) {\n          return source\n      }\n      if (arguments.length &gt; 2 &amp;&amp; params.constructor !== Array) {\n          params = Array.from(arguments).slice(1)\n      }\n      if (params.constructor !== Array) {\n          params = [params]\n      }\n      params.forEach(function(n, i) {\n          source = source.replace(new RegExp(\"\\\\{\" + i + \"\\\\}\", \"g\"), function() {\n              return n\n          })\n      })\n      return source\n  }\n\n  /**\n   * \u5224\u65ad\u89c4\u5219\u4f9d\u8d56\u662f\u5426\u5b58\u5728\n   */\n  depend(param) {\n      switch (typeof param) {\n          case 'boolean':\n              param = param\n              break\n          case 'string':\n              param = !!param.length\n              break\n          case 'function':\n              param = param()\n          default:\n              param = !0\n      }\n      return param\n  }\n\n  /**\n   * \u5224\u65ad\u8f93\u5165\u503c\u662f\u5426\u4e3a\u7a7a\n   */\n  optional(value) {\n      return !this.methods.required(value) &amp;&amp; 'dependency-mismatch'\n  }\n\n  /**\n   * \u83b7\u53d6\u81ea\u5b9a\u4e49\u5b57\u6bb5\u7684\u63d0\u793a\u4fe1\u606f\n   * @param {String} param \u5b57\u6bb5\u540d\n   * @param {Object} rule \u89c4\u5219\n   */\n  customMessage(param, rule) {\n      const params = this.messages[param]\n      const isObject = typeof params === 'object'\n      if (params &amp;&amp; isObject) return params[rule.method]\n  }\n\n  /**\n   * \u83b7\u53d6\u67d0\u4e2a\u6307\u5b9a\u5b57\u6bb5\u7684\u63d0\u793a\u4fe1\u606f\n   * @param {String} param \u5b57\u6bb5\u540d\n   * @param {Object} rule \u89c4\u5219\n   */\n  defaultMessage(param, rule) {\n      let message = this.customMessage(param, rule) || this.defaults.messages[rule.method]\n      let type = typeof message\n\n      if (type === 'undefined') {\n          message = `Warning: No message defined for ${rule.method}.`\n      } else if (type === 'function') {\n          message = message.call(this, rule.parameters)\n      }\n\n      return message\n  }\n\n  /**\n   * \u7f13\u5b58\u9519\u8bef\u4fe1\u606f\n   * @param {String} param \u5b57\u6bb5\u540d\n   * @param {Object} rule \u89c4\u5219\n   * @param {String} value \u5143\u7d20\u7684\u503c\n   */\n  formatTplAndAdd(param, rule, value) {\n      let msg = this.defaultMessage(param, rule)\n\n      this.errorList.push({\n          param: param,\n          msg: msg,\n          value: value,\n      })\n  }\n\n  /**\n   * \u9a8c\u8bc1\u67d0\u4e2a\u6307\u5b9a\u5b57\u6bb5\u7684\u89c4\u5219\n   * @param {String} param \u5b57\u6bb5\u540d\n   * @param {Object} rules \u89c4\u5219\n   * @param {Object} data \u9700\u8981\u9a8c\u8bc1\u7684\u6570\u636e\u5bf9\u8c61\n   */\n  checkParam(param, rules, data) {\n\n      // \u7f13\u5b58\u6570\u636e\u5bf9\u8c61\n      this.data = data\n\n      // \u7f13\u5b58\u5b57\u6bb5\u5bf9\u5e94\u7684\u503c\n      const value = data[param] !== null &amp;&amp; data[param] !== undefined ? data[param] : ''\n\n      // \u904d\u5386\u67d0\u4e2a\u6307\u5b9a\u5b57\u6bb5\u7684\u6240\u6709\u89c4\u5219\uff0c\u4f9d\u6b21\u9a8c\u8bc1\u89c4\u5219\uff0c\u5426\u5219\u7f13\u5b58\u9519\u8bef\u4fe1\u606f\n      for (let method in rules) {\n\n          // \u5224\u65ad\u9a8c\u8bc1\u65b9\u6cd5\u662f\u5426\u5b58\u5728\n          if (this.isValidMethod(method)) {\n\n              // \u7f13\u5b58\u89c4\u5219\u7684\u5c5e\u6027\u53ca\u503c\n              const rule = {\n                  method: method,\n                  parameters: rules[method]\n              }\n\n              // \u8c03\u7528\u9a8c\u8bc1\u65b9\u6cd5\n              const result = this.methods[method](value, rule.parameters)\n\n              // \u82e5result\u8fd4\u56de\u503c\u4e3adependency-mismatch\uff0c\u5219\u8bf4\u660e\u8be5\u5b57\u6bb5\u7684\u503c\u4e3a\u7a7a\u6216\u975e\u5fc5\u586b\u5b57\u6bb5\n              if (result === 'dependency-mismatch') {\n                  continue\n              }\n\n              this.setValue(param, method, result, value)\n\n              // \u5224\u65ad\u662f\u5426\u901a\u8fc7\u9a8c\u8bc1\uff0c\u5426\u5219\u7f13\u5b58\u9519\u8bef\u4fe1\u606f\uff0c\u8df3\u51fa\u5faa\u73af\n              if (!result) {\n                  this.formatTplAndAdd(param, rule, value)\n                  break\n              }\n          }\n      }\n  }\n\n  /**\n   * \u8bbe\u7f6e\u5b57\u6bb5\u7684\u9ed8\u8ba4\u9a8c\u8bc1\u503c\n   * @param {String} param \u5b57\u6bb5\u540d\n   */\n  setView(param) {\n      this.form[param] = {\n          $name: param,\n          $valid: true,\n          $invalid: false,\n          $error: {},\n          $success: {},\n          $viewValue: ``,\n      }\n  }\n\n  /**\n   * \u8bbe\u7f6e\u5b57\u6bb5\u7684\u9a8c\u8bc1\u503c\n   * @param {String} param \u5b57\u6bb5\u540d\n   * @param {String} method \u5b57\u6bb5\u7684\u65b9\u6cd5\n   * @param {Boolean} result \u662f\u5426\u901a\u8fc7\u9a8c\u8bc1\n   * @param {String} value \u5b57\u6bb5\u7684\u503c\n   */\n  setValue(param, method, result, value) {\n      const params = this.form[param]\n      params.$valid = result\n      params.$invalid = !result\n      params.$error[method] = !result\n      params.$success[method] = result\n      params.$viewValue = value\n  }\n\n  /**\n   * \u9a8c\u8bc1\u6240\u6709\u5b57\u6bb5\u7684\u89c4\u5219\uff0c\u8fd4\u56de\u9a8c\u8bc1\u662f\u5426\u901a\u8fc7\n   * @param {Object} data \u9700\u8981\u9a8c\u8bc1\u6570\u636e\u5bf9\u8c61\n   */\n  checkForm(data) {\n      this.__initData()\n\n      for (let param in this.rules) {\n          this.setView(param)\n          this.checkParam(param, this.rules[param], data)\n      }\n\n      return this.valid()\n  }\n\n  /**\n   * \u8fd4\u56de\u9a8c\u8bc1\u662f\u5426\u901a\u8fc7\n   */\n  valid() {\n      return this.size() === 0\n  }\n\n  /**\n   * \u8fd4\u56de\u9519\u8bef\u4fe1\u606f\u7684\u4e2a\u6570\n   */\n  size() {\n      return this.errorList.length\n  }\n\n  /**\n   * \u8fd4\u56de\u6240\u6709\u9519\u8bef\u4fe1\u606f\n   */\n  validationErrors() {\n      return this.errorList\n  }\n}\n\nexport default WxValidate\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%AE%A2%E9%98%85%E6%8E%A8%E9%80%81/","title":"\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u8ba2\u9605\u63a8\u9001","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%AE%A2%E9%98%85%E6%8E%A8%E9%80%81/#_2","title":"\u80cc\u666f","text":"<p>\u7528\u6237\u5728\u5e73\u53f0\u4e0a\u53d1\u5e03\u5e16\u5b50\u540e\uff0c\u5982\u679c\u6709\u4eba\u56de\u590d\uff0c\u6211\u4eec\u5e0c\u671b\u80fd\u591f\u5c06\u6d88\u606f\u63a8\u9001\u7ed9\u7528\u6237\u3002</p> <p>\u6d88\u606f\u63a8\u9001\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff0c\u4e00\u662f\u7528\u6237\u5728\u6d88\u606f\u5f39\u7a97\u4e2d\u70b9\u51fb\u540c\u610f\uff0c\u4e8c\u662f\u5728\u6307\u5b9a\u7684\u65f6\u523b\u7ed9\u7528\u6237\u63a8\u9001\u6d88\u606f\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%AE%A2%E9%98%85%E6%8E%A8%E9%80%81/#_3","title":"\u6b65\u9aa4","text":"<ol> <li>\u53bb\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u5e73\u53f0\u4e0a\u7533\u8bf7\u4e00\u4e2a\u6a21\u7248\uff0c\u53ea\u6709\u62e5\u6709\u4e86\u6a21\u7248\uff0c\u624d\u80fd\u7ed9\u7528\u6237\u63a8\u9001\u6d88\u606f\u3002\u6a21\u7248\u89c4\u5b9a\u4e86\u6d88\u606f\u63a8\u9001\u7684\u683c\u5f0f\u3002\u76ee\u524d\u5927\u591a\u6570\u5c0f\u7a0b\u5e8f\u53ea\u80fd\u7533\u8bf7\u4e00\u6b21\u6027\u8ba2\u9605\u6a21\u7248\u3002\u53c2\u8003\u6587\u6863</li> <li>\u83b7\u53d6\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u7684access token\uff0c\u6709\u4e86\u5b83\u624d\u80fd\u53d1\u9001\u6d88\u606f\u3002\u53c2\u8003\u6587\u6863\u3002\u6570\u636e\u53d1\u9001\u683c\u5f0f\u5982\u4e0b\uff1a</li> </ol> <pre><code>GET https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&amp;appid=\u5c0f\u7a0b\u5e8fID&amp;secret=\u5c0f\u7a0b\u5e8f\u5bc6\u94a5\n// grant_type\u7684\u503c\u56fa\u5b9a\u4e3aclient_credential\n</code></pre> <p>\u8fd4\u56de\u503c\uff1a</p> <pre><code>{\n  \"access_token\": \"ACCESS_TOKEN\u7684\u503c\",\n  \"expires_in\": 7200  // access\u8fc7\u671f\u65f6\u95f4\n} \n</code></pre> <ol> <li>\u67e5\u770b\u5c0f\u7a0b\u5e8f\u7684\u6a21\u7248\u8be6\u60c5\uff1a\u3010\u8ba2\u9605\u6d88\u606f\u3011-&gt;\u3010\u6211\u7684\u6a21\u677f\u3011-&gt;\u3010\u64cd\u4f5c\u5185\u5bb9\u3011\u3002\u80fd\u770b\u5230\u7c7b\u4f3c\u5982\u4e0b\u5185\u5bb9\uff1a</li> </ol> <pre><code>\u56de\u590d\u5185\u5bb9\n{{thing2.DATA}}\n\n\u56de\u590d\u4eba\n{{thing1.DATA}}\n\n\u56de\u590d\u65f6\u95f4\n{{time3.DATA}}\n</code></pre> <ol> <li>\u540e\u7aef\u8c03\u7528API\uff0c\u7ed9\u7528\u6237\u63a8\u9001\u4fe1\u606f\u3002\u53c2\u8003\u6587\u6863\u3002\u4e0b\u9762\u662f\u4e00\u4e2a\u6848\u4f8b\u3002</li> </ol> <pre><code>url:\nPOST https://api.weixin.qq.com/cgi-bin/message/subscribe/send?access_token=ACCESS_TOKEN \n\n\n\nbody:\n{\n    \"template_id\": \"7pDoN4Pt75p_CuEfLog0Cxgx-KF8Saml0WcXkLoimsk\",\n    \"page\": \"pages/index/index\",\n    \"touser\": \"orQB96zfHOW1DWgqJiStgbO7LqfE\",\n    \"data\": {\n        \"thing2\": {\n            \"value\": \"\u8fd9\u662f\u56de\u590d\u5185\u5bb9\"\n        },\n        \"thing1\": {\n            \"value\": \"\u8fd9\u662f\u56de\u590d\u4eba\"\n        },\n        \"time3\": {\n            \"value\": \"2019\u5e7410\u67081\u65e5 15:01\"\n        }\n    },\n    \"miniprogram_state\": \"trial\",\n    \"lang\": \"zh_CN\"\n}\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E6%88%90%E7%BB%A9%E5%8D%A1%E7%89%87%E6%A0%B7%E5%BC%8F/","title":"\u6210\u7ee9\u5361\u7247\u6837\u5f0f","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E6%88%90%E7%BB%A9%E5%8D%A1%E7%89%87%E6%A0%B7%E5%BC%8F/#course-cardwxml","title":"course-card.wxml","text":"<pre><code>&lt;view class=\"card\" style=\"background-color: white; margin-top: 10rpx; padding: 30rpx; line-height: 60rpx;\"&gt;\n  &lt;view class=\"header\" style=\"display: flex;\"&gt;\n    &lt;view class=\"course-name\" style=\"color: #6D6D6D; font-weight: bold;\"&gt;{{kcmc}}&lt;/view&gt;\n    &lt;view class=\"teacher-name\" style=\"margin-left: auto; color: #8D9190; font-size: 28rpx; font-weight: bold;\"&gt;{{teacherName}}&lt;/view&gt;\n  &lt;/view&gt;\n  &lt;view class=\"line-1\" style=\"display: grid; grid-template-columns: repeat(2, 1fr); font-size: 24rpx; color: #939A9F;\"&gt;\n      &lt;view class=\"kcbh\" style=\"color: #939A9F; grid-column: 1;\"&gt;\u8bfe\u7a0b\u7f16\u53f7\uff1a{{kcbh}}&lt;/view&gt;\n      &lt;view class=\"kxh\" style=\"grid-column: 2;\"&gt;\u8bfe\u5e8f\u53f7\uff1a{{kxh}}&lt;/view&gt;\n    &lt;/view&gt;\n    &lt;view class=\"line-2\" style=\"display: grid; grid-template-columns: repeat(2, 1fr); font-size: 24rpx; color: #939A9F;\"&gt;\n      &lt;view class=\"kcsx\" style=\"color: #939A9F; grid-column: 1;\"&gt;\u8bfe\u7a0b\u5c5e\u6027\uff1a{{kcsx}}&lt;/view&gt;\n      &lt;view class=\"xf\" style=\"grid-column: 2;\"&gt;\u5b66\u5206\uff1a{{xf}}&lt;/view&gt;\n    &lt;/view&gt;\n&lt;/view&gt;\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E6%88%90%E7%BB%A9%E5%8D%A1%E7%89%87%E6%A0%B7%E5%BC%8F/#course-cardwxss","title":"course-card.wxss","text":""},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E6%88%90%E7%BB%A9%E5%8D%A1%E7%89%87%E6%A0%B7%E5%BC%8F/#course-cardjs","title":"course-card.js","text":"<pre><code>Component({\n\n  /**\n   * \u7ec4\u4ef6\u7684\u5c5e\u6027\u5217\u8868\n   */\n  properties: {\n    kcmc: {\n      type: String,\n      value: '\u672a\u77e5\u8bfe\u7a0b\u540d\u79f0'\n    },\n    kcbh: {\n      type: String,\n      value: '\u672a\u77e5\u8bfe\u7a0b\u7f16\u53f7'\n    },\n    kxh: {\n      type: Number,\n      value: -1\n    },\n    kcsx: {\n      type: String,\n      value: '\u672a\u77e5\u8bfe\u7a0b\u5c5e\u6027'\n    },\n    xf: {\n      type: Number,\n      value: -1\n    },\n    teacherName: {\n      type: String,\n      value: '\u672a\u77e5\u8001\u5e08'\n    }\n  },\n\n  /**\n   * \u7ec4\u4ef6\u7684\u521d\u59cb\u6570\u636e\n   */\n  data: {\n\n  },\n\n  /**\n   * \u7ec4\u4ef6\u7684\u65b9\u6cd5\u5217\u8868\n   */\n  methods: {\n\n  }\n})\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E6%88%90%E7%BB%A9%E5%8D%A1%E7%89%87%E6%A0%B7%E5%BC%8F/#course-cardjson","title":"course-card.json","text":"<pre><code>{\n  \"component\": true,\n  \"usingComponents\": {}\n}\n</code></pre> <p>\u4f7f\u7528\u6848\u4f8b</p> <pre><code>&lt;course-card wx:for=\"{{courseList}}\" wx:for-item=\"course\"\n  kcmc=\"{{course.kcmc}}\"\n  kcbh=\"{{course.kcbh}}\"\n  kxh=\"{{course.kxh}}\"\n  kcsx=\"{{course.kcsx}}\"\n  xf=\"{{course.xf}}\"\n  teacherName=\"{{course.teacherName}}\"\n/&gt;\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E6%88%90%E7%BB%A9%E9%A1%B5%E9%9D%A2/","title":"\u6210\u7ee9\u9875\u9762","text":"<p>[toc]</p> <p>score.wxml</p> <pre><code>&lt;navigation-bar title=\"\u6210\u7ee9\" back=\"{{false}}\" color=\"black\" background=\"#FFF\"&gt;&lt;/navigation-bar&gt;\n\n&lt;view class=\"score-table\" style=\"padding: 20rpx;\"&gt;\n  &lt;view class=\"total-grade\" style=\"width: 720rpx; margin: 0 auto; background-color: white;\"&gt;\n    &lt;view style=\"display: grid; grid-template-columns: 1fr 1fr 1fr 1fr\"&gt;\n      &lt;view style=\"text-align: center; color: #118CD3; font-weight: bold; line-height: 60rpx; font-size: 30rpx;\"&gt;\u8bfe\u7a0b\u7c7b\u578b&lt;/view&gt;\n      &lt;view style=\"text-align: center; color: #118CD3; font-weight: bold; line-height: 60rpx; font-size: 30rpx;\"&gt;\u603b\u5b66\u5206&lt;/view&gt;\n      &lt;view style=\"text-align: center; color: #118CD3; font-weight: bold; line-height: 60rpx; font-size: 30rpx;\"&gt;\u5747\u5206&lt;/view&gt;\n      &lt;view style=\"text-align: center; color: #118CD3; font-weight: bold; line-height: 60rpx; font-size: 30rpx;\"&gt;GPA&lt;/view&gt;\n    &lt;/view&gt;\n\n    &lt;view style=\"display: grid; grid-template-columns: 1fr 1fr 1fr 1fr\"&gt;\n      &lt;view style=\"text-align: center; font-weight: bold; line-height: 60rpx; font-size: 30rpx;\"&gt;\u6240\u6709\u8bfe\u7a0b&lt;/view&gt;\n      &lt;view style=\"text-align: center; font-weight: bold; line-height: 60rpx; font-size: 30rpx;\"&gt;{{totalCredit}}&lt;/view&gt;\n      &lt;view style=\"text-align: center; font-weight: bold; line-height: 60rpx; font-size: 30rpx;\"&gt;{{averageScore}}&lt;/view&gt;\n      &lt;view style=\"text-align: center; font-weight: bold; line-height: 60rpx; font-size: 30rpx;\"&gt;{{averageGpa}}&lt;/view&gt;\n    &lt;/view&gt;\n\n    &lt;view style=\"display: grid; grid-template-columns: 1fr 1fr 1fr 1fr\"&gt;\n      &lt;view style=\"text-align: center; font-weight: bold; line-height: 60rpx; font-size: 30rpx;\"&gt;\u5df2\u9009\u8bfe\u7a0b&lt;/view&gt;\n      &lt;view style=\"text-align: center; font-weight: bold; line-height: 60rpx; font-size: 30rpx;\"&gt;{{selectedTotalCredit}}&lt;/view&gt;\n      &lt;view style=\"text-align: center; font-weight: bold; line-height: 60rpx; font-size: 30rpx;\"&gt;{{selectedAverageScore}}&lt;/view&gt;\n      &lt;view style=\"text-align: center; font-weight: bold; line-height: 60rpx; font-size: 30rpx;\"&gt;{{selectedAverageGpa}}&lt;/view&gt;\n    &lt;/view&gt;\n  &lt;/view&gt;\n\n  &lt;view style=\"background-color: white; margin-top: 20rpx; text-align: center;\" wx:for=\"{{scoreTableOneTermDTOList}}\" wx:for-item=\"scoreTableOneTermDTO\" wx:for-index=\"i\" wx:key=\"i\"&gt;\n    &lt;view style=\"line-height: 60rpx; font-size: 40rpx; font-weight: bold;\"&gt;\u5b66\u671f\uff1a{{scoreTableOneTermDTO.term}}&lt;/view&gt;\n    &lt;view style=\"width: 100%; margin-top: 20rpx; border-bottom: 3rpx solid gainsboro;\"&gt;&lt;/view&gt;\n    &lt;view style=\"display: grid; grid-template-columns: 1fr 4fr 1fr 1fr 1fr 1fr; color: #118CD3; font-weight: bold; line-height: 100rpx;\"&gt;\n      &lt;view&gt;\u9009\u62e9&lt;/view&gt;\n      &lt;view&gt;\u8bfe\u7a0b\u540d&lt;/view&gt;\n      &lt;view&gt;\u6210\u7ee9&lt;/view&gt;\n      &lt;view&gt;\u5b66\u5206&lt;/view&gt;\n      &lt;view&gt;\u7ee9\u70b9&lt;/view&gt;\n      &lt;view&gt;\u6027\u8d28&lt;/view&gt;\n    &lt;/view&gt;\n\n    &lt;view style=\"display: grid; grid-template-columns: 1fr 4fr 1fr 1fr 1fr 1fr; font-size: 26rpx; font-weight: bold; line-height: 40rpx;\" wx:for=\"{{scoreTableOneTermDTO.scoreTableDetailDTOList}}\" wx:for-item=\"scoreTableDetailDTO\" wx:for-index=\"j\" wx:key=\"j\"&gt;\n      &lt;view style=\"margin-top: 8rpx;\" bind:tap=\"clickCheckBox\" data-place = \"{{[i, j]}}\"&gt;\n        &lt;checkbox checked=\"{{allTermCheckBox[i][j]}}\"/&gt;\n      &lt;/view&gt;\n      &lt;view&gt;{{scoreTableDetailDTO.kcmc}}&lt;/view&gt;\n      &lt;view&gt;{{scoreTableDetailDTO.cj}}&lt;/view&gt;\n      &lt;view&gt;{{scoreTableDetailDTO.xf}}&lt;/view&gt;\n      &lt;view&gt;{{scoreTableDetailDTO.gpa}}&lt;/view&gt;\n      &lt;view&gt;{{scoreTableDetailDTO.kcsx}}&lt;/view&gt;\n    &lt;/view&gt;\n  &lt;/view&gt;\n\n&lt;/view&gt;\n</code></pre> <p>score.wxss</p> <p>\u65e0</p> <p>score.js</p> <pre><code>// pages/score/score.js\nimport logger from '../../utils/logger.js'\n\nPage({\n\n  /**\n   * \u9875\u9762\u7684\u521d\u59cb\u6570\u636e\n   */\n  data: {\n    scoreTableOneTermDTOList: [],\n    allTermCheckBox: [],\n\n    // \u8bfe\u7a0b\u603b\u4f53\u4fe1\u606f\n    averageScore: 0,\n    selectedAverageScore: 0,\n    totalCredit: 0,\n    selectedTotalCredit: 0,\n    averageGpa: 0,\n    selectedAverageGpa: 0\n  },\n\n  /**\n   * \u751f\u547d\u5468\u671f\u51fd\u6570--\u76d1\u542c\u9875\u9762\u52a0\u8f7d\n   */\n  onLoad(options) {\n    this.listScore()\n  },\n\n  // \u521a\u8fdb\u5165\u9875\u9762\u65f6\u8c03\u7528\u4e00\u6b21\n  listScore() {\n    wx.request({\n      url: 'http://localhost:8080/course/get-score-info',\n      method: 'post',\n      header: {\n        'token': 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJVSWQiOiIxNjI1MTE1NDM4MTQ2OTI4NjQyIiwibW9uZXkiOiI5OTk3NSIsInBob3RvSW1nIjoiIiwicG93ZXIiOiIxIiwiZXhwIjoxNzAwMDYyODI1LCJ1c2VybmFtZSI6IuaZk-m-mWNvZGluZyJ9.A45-BvCK237zQnvdf0Az2xVvxtFnUQHBl5Vt-pShtAY'\n      },\n      success: (res) =&gt; {\n        let scoreTableOneTermDTOList = res.data.data.scoreTableOneTermDTOList\n        let allTermCheckBox = getAllTermCheckBox(scoreTableOneTermDTOList)\n        let totalCredit = getTotalCredit(scoreTableOneTermDTOList)\n        let selectedTotalCredit = getSelectedTotalScore(scoreTableOneTermDTOList, allTermCheckBox)\n        let averageScore = getAverageScore(scoreTableOneTermDTOList)\n        let selectedAverageScore = getSelectedAverageScore(scoreTableOneTermDTOList, allTermCheckBox)\n        let averageGpa = getAverageGpa(scoreTableOneTermDTOList)\n        let selectedAverageGpa = getSelectedAverageGpa(scoreTableOneTermDTOList, allTermCheckBox)\n        this.setData({\n          totalCredit: totalCredit.toFixed(2),\n          allTermCheckBox,\n          scoreTableOneTermDTOList,\n          selectedTotalCredit: selectedTotalCredit.toFixed(2),\n          averageScore: averageScore.toFixed(2),\n          selectedAverageScore: selectedAverageScore.toFixed(2),\n          averageGpa: averageGpa.toFixed(2),\n          selectedAverageGpa: selectedAverageGpa.toFixed(2)\n        })\n      }\n    })\n  },\n\n  clickCheckBox(e) {\n    let point = e.currentTarget.dataset.place\n    let row = point[0], col = point[1]\n    let allTermCheckBox = this.data.allTermCheckBox\n    allTermCheckBox[row][col] ^= 1\n    let selectedTotalCredit = getSelectedTotalScore(this.data.scoreTableOneTermDTOList, allTermCheckBox)\n    let selectedAverageScore = getSelectedAverageScore(this.data.scoreTableOneTermDTOList, allTermCheckBox)\n    let selectedAverageGpa = getSelectedAverageGpa(this.data.scoreTableOneTermDTOList, allTermCheckBox)\n    this.setData({\n      allTermCheckBox,\n      selectedAverageScore: selectedAverageScore.toFixed(2),\n      selectedTotalCredit: selectedTotalCredit.toFixed(2),\n      selectedAverageGpa: selectedAverageGpa.toFixed(2)\n    })\n  }\n})\n\n// \u83b7\u53d6\u6240\u6709\u8bfe\u7a0b\u7684checkbox\nfunction getAllTermCheckBox(scoreTableOneTermDTOList) {  // scoreTableOneTermDTOList\u7ed3\u6784\u53c2\u8003\u540e\u7aef\n  let allTermCheckBox = []\n  for (let i = 0; i &lt; scoreTableOneTermDTOList.length; i++) {\n    let oneTermCheckBox = []\n    let scoreTableOneTermDTO = scoreTableOneTermDTOList[i]\n    let scoreTableDetailDTOList = scoreTableOneTermDTO.scoreTableDetailDTOList\n    for (let j = 0; j &lt; scoreTableDetailDTOList.length; j++) {\n      oneTermCheckBox.push(true)\n    }\n    allTermCheckBox.push(oneTermCheckBox)\n  }\n  return allTermCheckBox\n}\n\n// \u83b7\u53d6\u603b\u5b66\u5206\nfunction getTotalCredit(scoreTableOneTermDTOList) {\n  let totalCredit = 0\n  for (let i = 0; i &lt; scoreTableOneTermDTOList.length; i++) {\n    let scoreTableOneTermDTO = scoreTableOneTermDTOList[i]\n    let scoreTableDetailDTOList = scoreTableOneTermDTO.scoreTableDetailDTOList\n    for (let j = 0; j &lt; scoreTableDetailDTOList.length; j++) {\n      let scoreTableDetailDTO = scoreTableDetailDTOList[j]\n      totalCredit += scoreTableDetailDTO.xf\n    }\n  }\n  return totalCredit\n}\n\n// \u83b7\u53d6\u5df2\u9009\u62e9\u7684\u603b\u5b66\u5206\nfunction getSelectedTotalScore(scoreTableOneTermDTOList, allTermCheckBox) {\n  let selectedTotalCredit = 0\n  for (let i = 0; i &lt; scoreTableOneTermDTOList.length; i++) {\n    let scoreTableOneTermDTO = scoreTableOneTermDTOList[i]\n    let scoreTableDetailDTOList = scoreTableOneTermDTO.scoreTableDetailDTOList\n    for (let j = 0; j &lt; scoreTableDetailDTOList.length; j++) {\n      if (allTermCheckBox[i][j] === 0) {\n        continue\n      }\n      let scoreTableDetailDTO = scoreTableDetailDTOList[j]\n      selectedTotalCredit += scoreTableDetailDTO.xf\n    }\n  }\n  return selectedTotalCredit\n}\n\n// \u83b7\u53d6\u5e73\u5747\u5206\nfunction getAverageScore(scoreTableOneTermDTOList) {\n  let totalWeightedScore = 0, totalCredit = 0\n  for (let i = 0; i &lt; scoreTableOneTermDTOList.length; i++) {\n    let scoreTableOneTermDTO = scoreTableOneTermDTOList[i]\n    let scoreTableDetailDTOList = scoreTableOneTermDTO.scoreTableDetailDTOList\n    for (let j = 0; j &lt; scoreTableDetailDTOList.length; j++) {\n      let scoreTableDetailDTO = scoreTableDetailDTOList[j]\n      totalWeightedScore += scoreTableDetailDTO.cj * scoreTableDetailDTO.xf\n      totalCredit += scoreTableDetailDTO.xf\n    }\n  }\n  return totalWeightedScore / totalCredit\n}\n\n// \u83b7\u53d6\u5df2\u9009\u62e9\u7684\u5e73\u5747\u5206\nfunction getSelectedAverageScore(scoreTableOneTermDTOList, allTermCheckBox) {\n  let totalWeightedScore = 0, totalCredit = 0\n  for (let i = 0; i &lt; scoreTableOneTermDTOList.length; i++) {\n    let scoreTableOneTermDTO = scoreTableOneTermDTOList[i]\n    let scoreTableDetailDTOList = scoreTableOneTermDTO.scoreTableDetailDTOList\n    for (let j = 0; j &lt; scoreTableDetailDTOList.length; j++) {\n      if (allTermCheckBox[i][j] === 0) {\n        continue\n      }\n      let scoreTableDetailDTO = scoreTableDetailDTOList[j]\n      totalWeightedScore += scoreTableDetailDTO.cj * scoreTableDetailDTO.xf\n      totalCredit += scoreTableDetailDTO.xf\n    }\n  }\n  return totalWeightedScore / totalCredit\n}\n\n// \u83b7\u53d6gpa\nfunction getAverageGpa(scoreTableOneTermDTOList) {\n  let totalGpaWithCredit = 0, totalCredit = 0\n  for (let i = 0; i &lt; scoreTableOneTermDTOList.length; i++) {\n    let scoreTableOneTermDTO = scoreTableOneTermDTOList[i]\n    let scoreTableDetailDTOList = scoreTableOneTermDTO.scoreTableDetailDTOList\n    for (let j = 0; j &lt; scoreTableDetailDTOList.length; j++) {\n      let scoreTableDetailDTO = scoreTableDetailDTOList[j]\n      totalGpaWithCredit += scoreTableDetailDTO['gpa'] * scoreTableDetailDTO['xf']\n      totalCredit += scoreTableDetailDTO['xf']\n    }\n  }\n  return totalGpaWithCredit / totalCredit\n}\n\n// \u83b7\u53d6\u5df2\u9009\u62e9\u7684gpa\nfunction getSelectedAverageGpa(scoreTableOneTermDTOList, allTermCheckBox) {\n  let totalGpaWithCredit = 0, totalCredit = 0\n  for (let i = 0; i &lt; scoreTableOneTermDTOList.length; i++) {\n    let scoreTableOneTermDTO = scoreTableOneTermDTOList[i]\n    let scoreTableDetailDTOList = scoreTableOneTermDTO.scoreTableDetailDTOList\n    for (let j = 0; j &lt; scoreTableDetailDTOList.length; j++) {\n      if (allTermCheckBox[i][j] === 0) {\n        continue\n      }\n      let scoreTableDetailDTO = scoreTableDetailDTOList[j]\n      totalGpaWithCredit += scoreTableDetailDTO['gpa'] * scoreTableDetailDTO['xf']\n      totalCredit += scoreTableDetailDTO['xf']\n    }\n  }\n  return totalGpaWithCredit / totalCredit\n}\n</code></pre> <p>score.json</p> <pre><code>{\n  \"usingComponents\": {\n    \"navigation-bar\": \"/components/navigation-bar/navigation-bar\"\n  }\n}\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E6%88%90%E7%BB%A9%E9%A1%B5%E9%9D%A2/#_2","title":"\u540e\u7aef\u6570\u636e\u683c\u5f0f","text":"<pre><code>{\n    \"code\": 200,\n    \"success\": true,\n    \"msg\": \"\u54cd\u5e94\u6b63\u5e38\",\n    \"data\": {\n        \"scoreTableOneTermDTOList\": [\n            {\n                \"term\": \"2022-2023-2\",\n                \"scoreTableDetailDTOList\": [\n                    {\n                        \"kcbh\": \"36600002\",\n                        \"kcmc\": \"\u5f62\u52bf\u4e0e\u653f\u7b56\uff08\u2165\uff09\",\n                        \"cj\": 100.00,\n                        \"cjbs\": \"\",\n                        \"xf\": 0.20,\n                        \"zxs\": 8,\n                        \"khfs\": \"\u8003\u67e5\",\n                        \"kcsx\": \"\u5fc5\u4fee\",\n                        \"kcxz\": \"\u901a\u8bc6\u6559\u80b2\u8bfe\",\n                        \"cjzw\": \"\",\n                        \"gpa\": 4\n                    },\n                    {\n                        \"kcbh\": \"06032701\",\n                        \"kcmc\": \"\u79fb\u52a8\u5e94\u7528\u5f00\u53d1\u6280\u672f\",\n                        \"cj\": 96.00,\n                        \"cjbs\": \"\",\n                        \"xf\": 2.00,\n                        \"zxs\": 80,\n                        \"khfs\": \"\u8003\u8bd5\",\n                        \"kcsx\": \"\u5fc5\u4fee\",\n                        \"kcxz\": \"\u4e13\u4e1a\u65b9\u5411\u8bfe\",\n                        \"cjzw\": \"\",\n                        \"gpa\": 4\n                    }\n                ]\n            },\n            {\n                \"term\": \"2022-2023-1\",\n                \"scoreTableDetailDTOList\": [\n                    {\n                        \"kcbh\": \"36500002\",\n                        \"kcmc\": \"\u5f62\u52bf\u4e0e\u653f\u7b56\uff08\u2164\uff09\",\n                        \"cj\": 98.00,\n                        \"cjbs\": \"\",\n                        \"xf\": 0.20,\n                        \"zxs\": 8,\n                        \"khfs\": \"\u8003\u67e5\",\n                        \"kcsx\": \"\u5fc5\u4fee\",\n                        \"kcxz\": \"\u901a\u8bc6\u6559\u80b2\u8bfe\",\n                        \"cjzw\": \"\",\n                        \"gpa\": 4\n                    },\n                    {\n                        \"kcbh\": \"06028301\",\n                        \"kcmc\": \"\u7f51\u7edc\u7f16\u7a0b\u6280\u672f\",\n                        \"cj\": 90.00,\n                        \"cjbs\": \"\",\n                        \"xf\": 2.00,\n                        \"zxs\": 32,\n                        \"khfs\": \"\u8003\u67e5\",\n                        \"kcsx\": \"\u4efb\u9009\",\n                        \"kcxz\": \"\u4e13\u4e1a\u9009\u4fee\u8bfe\",\n                        \"cjzw\": \"\u4f18\u79c0\",\n                        \"gpa\": 4\n                    }\n                ]\n            },\n            {\n                \"term\": \"2021-2022-2\",\n                \"scoreTableDetailDTOList\": [\n                    {\n                        \"kcbh\": \"36400002\",\n                        \"kcmc\": \"\u5f62\u52bf\u4e0e\u653f\u7b56\uff08\u2163\uff09\",\n                        \"cj\": 99.00,\n                        \"cjbs\": \"\",\n                        \"xf\": 0.30,\n                        \"zxs\": 8,\n                        \"khfs\": \"\u8003\u67e5\",\n                        \"kcsx\": \"\u5fc5\u4fee\",\n                        \"kcxz\": \"\u901a\u8bc6\u6559\u80b2\u8bfe\",\n                        \"cjzw\": \"\",\n                        \"gpa\": 4\n                    },\n                    {\n                        \"kcbh\": \"06020102\",\n                        \"kcmc\": \"\u8ba1\u7b97\u673a\u7f51\u7edc\",\n                        \"cj\": 92.00,\n                        \"cjbs\": \"\",\n                        \"xf\": 3.00,\n                        \"zxs\": 48,\n                        \"khfs\": \"\u8003\u8bd5\",\n                        \"kcsx\": \"\u5fc5\u4fee\",\n                        \"kcxz\": \"\u4e13\u4e1a\u57fa\u7840\u8bfe\",\n                        \"cjzw\": \"\",\n                        \"gpa\": 4\n                    }\n                ]\n            },\n            {\n                \"term\": \"2021-2022-1\",\n                \"scoreTableDetailDTOList\": [\n                    {\n                        \"kcbh\": \"36300002\",\n                        \"kcmc\": \"\u5f62\u52bf\u4e0e\u653f\u7b56\uff08\u2162\uff09\",\n                        \"cj\": 96.00,\n                        \"cjbs\": \"\",\n                        \"xf\": 0.30,\n                        \"zxs\": 8,\n                        \"khfs\": \"\u8003\u67e5\",\n                        \"kcsx\": \"\u5fc5\u4fee\",\n                        \"kcxz\": \"\u901a\u8bc6\u6559\u80b2\u8bfe\",\n                        \"cjzw\": \"\",\n                        \"gpa\": 4\n                    },\n                    {\n                        \"kcbh\": \"15045203\",\n                        \"kcmc\": \"\u9a6c\u514b\u601d\u4e3b\u4e49\u57fa\u672c\u539f\u7406\u6982\u8bba\",\n                        \"cj\": 93.00,\n                        \"cjbs\": \"\",\n                        \"xf\": 3.00,\n                        \"zxs\": 48,\n                        \"khfs\": \"\u8003\u8bd5\",\n                        \"kcsx\": \"\u5fc5\u4fee\",\n                        \"kcxz\": \"\u901a\u8bc6\u6559\u80b2\u8bfe\",\n                        \"cjzw\": \"\",\n                        \"gpa\": 4\n                    }\n                ]\n            },\n            {\n                \"term\": \"2020-2021-2\",\n                \"scoreTableDetailDTOList\": [\n                    {\n                        \"kcbh\": \"36200002\",\n                        \"kcmc\": \"\u5f62\u52bf\u4e0e\u653f\u7b56\uff08\u2161\uff09\",\n                        \"cj\": 100.00,\n                        \"cjbs\": \"\",\n                        \"xf\": 0.30,\n                        \"zxs\": 8,\n                        \"khfs\": \"\u8003\u67e5\",\n                        \"kcsx\": \"\u5fc5\u4fee\",\n                        \"kcxz\": \"\u901a\u8bc6\u6559\u80b2\u8bfe\",\n                        \"cjzw\": \"\",\n                        \"gpa\": 4\n                    },\n                    {\n                        \"kcbh\": \"00000134\",\n                        \"kcmc\": \"\u7f51\u9875\u8bbe\u8ba1\u4e0e\u5f00\u53d1\u2014HTML\u3001CSS\u3001JavaScript\",\n                        \"cj\": 91.00,\n                        \"cjbs\": \"\",\n                        \"xf\": 1.00,\n                        \"zxs\": 32,\n                        \"khfs\": \"\u8003\u67e5\",\n                        \"kcsx\": \"\u4efb\u9009\",\n                        \"kcxz\": \"\u901a\u8bc6\u6559\u80b2\u9009\u4fee\u8bfe\",\n                        \"cjzw\": \"\",\n                        \"gpa\": 4\n                    }\n                ]\n            },\n            {\n                \"term\": \"2020-2021-1\",\n                \"scoreTableDetailDTOList\": [\n                    {\n                        \"kcbh\": \"21120102\",\n                        \"kcmc\": \"\u4f53\u80b2\uff08\u2160\uff09\",\n                        \"cj\": 95.00,\n                        \"cjbs\": \"\",\n                        \"xf\": 1.00,\n                        \"zxs\": 24,\n                        \"khfs\": \"\u8003\u67e5\",\n                        \"kcsx\": \"\u5fc5\u4fee\",\n                        \"kcxz\": \"\u901a\u8bc6\u6559\u80b2\u8bfe\",\n                        \"cjzw\": \"\",\n                        \"gpa\": 4\n                    },\n                    {\n                        \"kcbh\": \"36100002\",\n                        \"kcmc\": \"\u5f62\u52bf\u4e0e\u653f\u7b56\uff08\u2160\uff09\",\n                        \"cj\": 92.00,\n                        \"cjbs\": \"\",\n                        \"xf\": 0.30,\n                        \"zxs\": 8,\n                        \"khfs\": \"\u8003\u67e5\",\n                        \"kcsx\": \"\u5fc5\u4fee\",\n                        \"kcxz\": \"\u901a\u8bc6\u6559\u80b2\u8bfe\",\n                        \"cjzw\": \"\",\n                        \"gpa\": 4\n                    }\n                ]\n            }\n        ]\n    }\n}\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E6%96%87%E7%AB%A0%E5%86%85%E5%AE%B9%E9%A1%B5%E9%9D%A2/","title":"\u6587\u7ae0\u5185\u5bb9\u9875\u9762","text":"<p>[toc]</p> <p>passage.html</p> <pre><code>&lt;navigation-bar title=\"\u6587\u7ae0\u5185\u5bb9\u9875\u9762\" back=\"{{true}}\" color=\"black\" background=\"#FFF\"&gt;&lt;/navigation-bar&gt;\n\n&lt;view class=\"box\" style=\"padding: 20rpx; background-color: white;\"&gt;\n  &lt;view class=\"title\" style=\"width: 100%; color: #121212; font-size: 30rpx; font-weight: bold;\"&gt;\n    \u8fd9\u662f\u6807\u9898\u54c8\u54c8\u54c8\n  &lt;/view&gt;\n  &lt;view class=\"person-info\" style=\"display: flex; margin-top: 30rpx;\"&gt;\n    &lt;image src=\"https://tse1-mm.cn.bing.net/th/id/OIP-C.QSVZuY_JudCZRwV1vqFh1AAAAA?w=205&amp;h=205&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.5&amp;pid=1.7\" mode=\"aspectFill\" style=\"display: block; width: 80rpx; height: 80rpx; border-radius: 50%;\"/&gt;\n    &lt;view class=\"username\" style=\"line-height: 80rpx; margin-left: 30rpx; font-weight: bold; color: #121212; font-size: 30rpx;\"&gt;\u6653\u9f99&lt;/view&gt;\n  &lt;/view&gt;\n\n  &lt;!-- \u5206\u5272\u7ebf --&gt;\n  &lt;view style=\"border-bottom: 2rpx solid #F1F1F1; margin-top: 20rpx;\"&gt;&lt;/view&gt;\n\n  &lt;view class=\"content\" style=\"margin-top: 30rpx;\"&gt;\n    &lt;view style=\"line-height: 60rpx; word-break: break-all;\"&gt;\u8fd9\u662f\u7b2c\u4e00\u6bb5&lt;/view&gt;\n    &lt;view style=\"line-height: 60rpx; word-break: break-all;\"&gt;\u8fd9\u662f\u7b2c\u4e8c\u6bb5222222222222222222222222222222222222222\u65f6\u7684&lt;/view&gt;\n  &lt;/view&gt;\n  &lt;view class=\"create-time\" style=\"color: #999999; font-size: 26rpx; margin-top: 20rpx;\"&gt;\u53d1\u5e03\u4e8e2023-10-24 15:01:01&lt;/view&gt;\n\n  &lt;!-- \u5206\u5272\u7ebf --&gt;\n  &lt;view style=\"border-bottom: 2rpx solid #F1F1F1; margin-top: 20rpx;\"&gt;&lt;/view&gt;\n\n  &lt;view class=\"comment\" style=\"margin-top: 20rpx;\"&gt;\u8bc4\u8bba 190&lt;/view&gt;\n  &lt;view style=\"display: flex; margin-top: 20rpx;\"&gt;\n    &lt;image src=\"https://tse1-mm.cn.bing.net/th/id/OIP-C.i64DAg71FrLIH0PujstzWwHaF7?w=191&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.5&amp;pid=1.7\" mode=\"aspectFill\" style=\"display: block; width: 80rpx; height: 80rpx; border-radius: 50%;\"/&gt;\n    &lt;input type=\"text\" placeholder=\"\u5199\u8bc4\u8bba\" style=\"margin-left: 20rpx; padding-left: 20rpx; background-color: #F1F1F1; height: 80rpx; width: 600rpx;\" bind:tap=\"navToCreateCommentPage\"/&gt;\n  &lt;/view&gt;\n&lt;/view&gt;\n\n</code></pre> <p>passage.wxss</p> <p>\u65e0</p> <p>passage.js</p> <pre><code>Page({\n  navToCreateCommentPage() {\n    console.log('\u8df3\u8f6c\u5230\u53d1\u5e03\u8bc4\u8bba\u7684\u9875\u9762')\n  },\n})\n</code></pre> <p>passage.json</p> <pre><code>{\n  \"usingComponents\": {\n    \"navigation-bar\": \"/components/navigation-bar/navigation-bar\"\n  }\n}\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E6%96%87%E7%AB%A0%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6/","title":"\u6587\u7ae0\u5361\u7247\u6837\u5f0f","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E6%96%87%E7%AB%A0%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6/#message-cardwxml","title":"message-card.wxml","text":"<pre><code>&lt;view class=\"card\"&gt;\n  &lt;view class=\"card-header\"&gt;{{title}}&lt;/view&gt;\n  &lt;view class=\"card-person\"&gt;\n    &lt;view class=\"card-person-logo\"&gt;\n      &lt;image class=\"avatar\" src=\"{{avatar}}\" mode=\"aspectFill\"&gt;&lt;/image&gt;\n    &lt;/view&gt;\n    &lt;view class=\"card-person-name\"&gt;{{username}}&lt;/view&gt;\n  &lt;/view&gt;\n  &lt;view class=\"card-content\"&gt;{{content}}&lt;/view&gt;\n\n  &lt;view class=\"card-bottom\"&gt;\n    &lt;view class=\"card-bottom-like\"&gt;{{likeCount}}\u8d5e\u540c&lt;/view&gt;\n    &lt;view&gt;\u00b7&lt;/view&gt;\n    &lt;view class=\"card-bottom-comment\"&gt;{{commentCount}}\u6761\u8bc4\u8bba&lt;/view&gt;\n  &lt;/view&gt;\n&lt;/view&gt;\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E6%96%87%E7%AB%A0%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6/#message-cardwxss","title":"message-card.wxss","text":"<pre><code>.card {\n  padding: 20rpx;\n  margin-top: 15rpx;\n  background-color: white;\n}\n\n.card-header {\n  font-size: 30rpx;\n  font-family: ARIAL,\"Microsoft Yahei\",\"\u5fae\u8f6f\u96c5\u9ed1\";\n  font-weight: bold;\n  letter-spacing: 1rpx;\n  color: #101010;\n  word-wrap: break-word; /* \u81ea\u52a8\u6362\u884c */  \n  overflow: hidden; /* \u8d85\u51fa\u90e8\u5206\u9690\u85cf */  \n  text-overflow: ellipsis; /* \u8d85\u51fa\u90e8\u5206\u663e\u793a\u7701\u7565\u53f7 */  \n  display: -webkit-box; /* \u4f5c\u4e3a\u5f39\u6027\u4f38\u7f29\u76d2\u5b50\u6a21\u578b\u663e\u793a */  \n  -webkit-line-clamp: 2; /* \u9650\u5236\u5728\u4e24\u884c */  \n  -webkit-box-orient: vertical; /* \u8bbe\u7f6e\u4f38\u7f29\u76d2\u5b50\u7684\u5b50\u5143\u7d20\u4e3a\u5782\u76f4\u6392\u5217 */ \n}\n\n.card-person {\n  display: flex;\n  margin-top: 10rpx;\n}\n\n.card-person-name {\n  font-size: 30rpx;\n  font-weight: bold;\n  line-height: 50rpx;\n  margin-left: 20rpx;\n  color: gray;\n}\n\n.avatar {  \n  width: 50rpx; /* \u8bbe\u7f6e\u5934\u50cf\u7684\u5bbd\u5ea6 */  \n  height: 50rpx; /* \u8bbe\u7f6e\u5934\u50cf\u7684\u9ad8\u5ea6 */  \n  border-radius: 50%; /* \u8bbe\u7f6e\u5934\u50cf\u4e3a\u5706\u5f62 */  \n  object-fit: cover; /* \u4fdd\u6301\u56fe\u7247\u7b49\u6bd4\u4f8b\u7f29\u653e */  \n}\n\n.card-content {\n  margin-top: 10rpx;\n  font-size: 30rpx;\n  color: #515153;\n  letter-spacing: 1rpx;\n  word-wrap: break-word; /* \u81ea\u52a8\u6362\u884c */  \n  overflow: hidden; /* \u8d85\u51fa\u90e8\u5206\u9690\u85cf */  \n  text-overflow: ellipsis; /* \u8d85\u51fa\u90e8\u5206\u663e\u793a\u7701\u7565\u53f7 */  \n  display: -webkit-box; /* \u4f5c\u4e3a\u5f39\u6027\u4f38\u7f29\u76d2\u5b50\u6a21\u578b\u663e\u793a */  \n  -webkit-line-clamp: 2; /* \u9650\u5236\u5728\u4e24\u884c */  \n  -webkit-box-orient: vertical; /* \u8bbe\u7f6e\u4f38\u7f29\u76d2\u5b50\u7684\u5b50\u5143\u7d20\u4e3a\u5782\u76f4\u6392\u5217 */ \n}\n\n.card-bottom {\n  color: gray;\n  display: flex;\n  font-size: 30rpx;\n}\n\n.card-bottom-like, .card-bottom-comment {\n  margin-top: 10rpx;\n  margin-left: 20rpx;\n}\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E6%96%87%E7%AB%A0%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6/#message-cardjs","title":"message-card.js","text":"<pre><code>Component({\n\n  /**\n   * \u7ec4\u4ef6\u7684\u5c5e\u6027\u5217\u8868\n   */\n  properties: {\n    title: {\n      type: String,\n      value: 'empty title'\n    },\n    avatar: {\n      type: String,\n      value: 'https://ts4.cn.mm.bing.net/th?id=OIP-C.jKKWErZpWFQeYDiHuqHtIQHaHa&amp;w=249&amp;h=249&amp;c=8&amp;rs=1&amp;qlt=90&amp;o=6&amp;dpr=1.5&amp;pid=3.1&amp;rm=2'\n    },\n    username: {\n      type: String,\n      value: '\u672a\u77e5\u7528\u6237'\n    },\n    content: {\n      type: String,\n      value: '\u672a\u77e5\u5185\u5bb9'\n    },\n    likeCount: {\n      type: Number,\n      value: 0\n    },\n    commentCount: {\n      type: Number,\n      value: 0\n    }\n  },\n\n  /**\n   * \u7ec4\u4ef6\u7684\u521d\u59cb\u6570\u636e\n   */\n  data: {\n    animationData: {}  \n  },\n\n  /**\n   * \u7ec4\u4ef6\u7684\u65b9\u6cd5\u5217\u8868\n   */\n  methods: {\n\n  },\n\n\n})\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E6%96%87%E7%AB%A0%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6/#message-cardjson","title":"message-card.json","text":"<pre><code>{\n  \"component\": true,\n  \"usingComponents\": {}\n}\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E6%96%87%E7%AB%A0%E5%8F%91%E5%B8%83%E9%A1%B5%E9%9D%A2/","title":"\u6587\u7ae0\u53d1\u5e03\u9875\u9762","text":"<p>[toc]</p> <p>passage-create.wxml</p> <pre><code>&lt;navigation-bar title=\"\u53d1\u5e03\u8bf4\u8bf4\" back=\"{{true}}\" color=\"black\" background=\"#FFF\"&gt;&lt;/navigation-bar&gt;\n\n&lt;form bindsubmit=\"formSubmit\"&gt;\n  &lt;view class=\"box\" style=\"margin: 20rpx;\"&gt;\n    &lt;view class=\"content\" style=\"background-color: white;  height: 1000rpx; border-radius: 30rpx;\"&gt;\n      &lt;input type=\"text\" placeholder=\"\u8bf7\u8f93\u5165\u6807\u9898\" style=\"display: block;  padding: 20rpx; font-weight: bold; height: 100rpx; margin-top: 20rpx; line-height: 40rpx;\" name=\"title\"/&gt;\n      &lt;view style=\"border-bottom: 5rpx solid #F8F9FA; width: 90%; margin: 0 auto;\"&gt;&lt;/view&gt;\n      &lt;textarea maxlength=\"-1\" bindblur=\"bindTextAreaBlur\" placeholder=\"\u8bf7\u8f93\u5165\u5185\u5bb9\" style=\" width: 92%; height: 700rpx; padding: 20rpx;\" name=\"content\"&gt;\n      &lt;/textarea&gt;\n    &lt;/view&gt;\n\n    &lt;view class=\"submit\"&gt;\n      &lt;button style=\"margin-top: 20rpx; border-radius: 20rpx; background-color: #168AFF; color: white;\" formType=\"submit\"&gt;\u53d1\u5e03&lt;/button&gt;\n    &lt;/view&gt;\n  &lt;/view&gt;\n&lt;/form&gt;\n</code></pre> <p>passage-create.wxss</p> <p>\u65e0</p> <p>passage-create.js</p> <pre><code>import WxValidate from '../../../utils/wxvalidate.js'  // \u81ea\u5b9a\u4e49\u5f15\u5165\n\nPage({\n  data: {\n    title: '',\n    content: ''\n  },\n\n  formSubmit(e) {\n    // \u9a8c\u8bc1\u5b57\u6bb5\u7684\u89c4\u5219\uff0c\n    const rules = {\n      title: {\n        required: true,\n        minlenth: 2,\n        maxlength: 10\n      },\n      content: {\n        required: true,\n        minlength: 5,\n        maxlength: 1000\n      }\n    }\n\n    // \u9a8c\u8bc1\u5b57\u6bb5\u7684\u63d0\u793a\u4fe1\u606f\uff0c\u82e5\u4e0d\u4f20\u5219\u8c03\u7528\u9ed8\u8ba4\u7684\u4fe1\u606f\n    const messages = {\n      title: {\n        required: '\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u9898',\n        minlength: '\u81f3\u5c11\u8f93\u51652\u5b57',\n        maxlength: '\u6807\u9898\u6700\u591a10\u5b57'\n      },\n      content: {\n        required: '\u8bf7\u8f93\u5165\u5185\u5bb9',\n        minlength: '\u5185\u5bb9\u81f3\u5c115\u5b57',\n        maxlength: '\u5185\u5bb9\u6700\u591a1000\u5b57'\n      }\n    }\n\n    // \u521b\u5efa\u5b9e\u4f8b\u5bf9\u8c61\n    this.WxValidate = new WxValidate(rules, messages)\n    const params = e.detail.value\n    // console.log(params)\n    if (!this.WxValidate.checkForm(params)) {\n      const error = this.WxValidate.errorList[0]\n      wx.showToast({\n        title: error.msg,\n        icon: 'none'\n      })\n      return false\n    }\n    console.log('\u6821\u9a8c\u6210\u529f\uff01')\n    console.log('\u53d1\u5e16\u6210\u529f')\n    // wx.request({  // \u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u5c01\u88c5\u7684\u8bf7\u6c42\n    //   url: 'http://localhost:8080/life/create',  // \u4fee\u6539\u63a5\u53e3\n    //   method: 'POST',\n    //   header: {\n    //     'token': 'eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJVSWQiOiIxNjI1MTE1NDM4MTQ2OTI4NjQyIiwibW9uZXkiOiI5OTk3NSIsInBob3RvSW1nIjoiIiwicG93ZXIiOiIxIiwiZXhwIjoxNjk4MzM0MDMyLCJ1c2VybmFtZSI6IuaZk-m-mWNvZGluZyJ9.GpVrtbHeDx3ZM38ibnAPNj-_5MGWbh3d1s9OL29C-x4'\n    //   },\n    //   data: {\n    //     title: params['title'],\n    //     content: params['content'],\n    //   }\n    // })\n  },\n  // \u8fd9\u91cc\u65e0\u7528\n  bindTextAreaBlur() {}\n})\n</code></pre> <p>passage-create.json</p> <pre><code>{\n  \"usingComponents\": {\n    \"navigation-bar\": \"/components/navigation-bar/navigation-bar\"\n  }\n}\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E6%9A%82%E6%9C%AA%E6%95%B4%E7%90%86/","title":"\u6682\u672a\u6574\u7406","text":"<p>(2\u6761\u6d88\u606f) \u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u9875\u9762\u8df3\u8f6curl\u4f20\u53c2\uff0c\u5bf9\u8c61\u3001\u6570\u636e\u8fc7\u957f\u3001\u7279\u6b8a\u5b57\u7b26\u95ee\u9898_joe0235\u7684\u535a\u5ba2-CSDN\u535a\u5ba2_\u5c0f\u7a0b\u5e8furl\u4f20\u53c2</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC/","title":"\u7236\u5b50\u7ec4\u4ef6\u4f20\u503c","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC/#_2","title":"\u53c2\u8003\u6587\u6863","text":"<p>\u53c2\u8003\u6587\u6863</p> <p>\u7ec4\u4ef6\u548c\u7ec4\u4ef6\u4e4b\u95f4\u7684\u6570\u636e\u4f20\u9012\u548c\u7ec4\u4ef6\u4e0e\u9875\u9762\u4e4b\u95f4\u5e76\u6ca1\u6709\u592a\u5927\u533a\u522b\uff0c\u7ec4\u4ef6\u4e2d\u4e5f\u53ef\u4ee5\u5d4c\u5957\u7ec4\u4ef6\u3002</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC/#_3","title":"\u6848\u4f8b","text":"<p>\u95ee\u9898\uff1a\u4f7f\u7528\u7236\u9875\u9762\u548c\u5b50\u7ec4\u4ef6\uff0c\u5b9e\u73b0\u4ee5\u4e0b\u529f\u80fd\uff1a</p> <p></p> <p>\u5b9e\u73b0</p> <ul> <li>my-page.wxml</li> </ul> <pre><code>&lt;!-- pages/my-page/my-page.wxml --&gt;\n\n&lt;!-- \u5b50\u7ec4\u4ef6\u5411\u7236\u9875\u9762\u4f20\u9012\u4fe1\u606f --&gt;\n&lt;!-- \u5b50\u7ec4\u4ef6\u53d8\u91cf=\"{{\u7236\u9875\u9762\u53d8\u91cf}}\" --&gt;\n&lt;!-- bind:\u5b50\u7ec4\u4ef6\u51fd\u6570=\"\u7236\u9875\u9762\u51fd\u6570\" --&gt;\n&lt;my-component val=\"{{val}}\" bind:sonListener=\"fatherListener\"&gt;&lt;/my-component&gt;\n\n&lt;view&gt;\u7236\u7ec4\u4ef6val={{val}}&lt;/view&gt;\n&lt;button bindtap=\"add\"&gt;\u7236\u7ec4\u4ef6+1&lt;/button&gt;\n</code></pre> <ul> <li>my-page.js</li> </ul> <pre><code>// pages/my-page/my-page.js\nPage({\n  add() {\n    this.setData({\n      val: this.data.val + 1\n    })\n  },\n  fatherListener(e) {\n    // e.detail \u4e2d\u5c01\u88c5\u4e86\u5b50\u7ec4\u4ef6\u4f20\u9012\u7684\u4fe1\u606f\n    let info = e.detail\n    this.setData({\n      val: info\n    })\n  },\n  data: {\n    val: 1\n  }\n});\n</code></pre> <ul> <li>my-page.json</li> </ul> <pre><code>{\n  \"usingComponents\": {\n    \"my-page\": \"./my-component/my-component\"\n  }\n}\n</code></pre> <ul> <li>my-component.wxml</li> </ul> <pre><code>&lt;!-- pages/my-page/my-component/my-component.wxml --&gt;\n&lt;view&gt;\u5b50\u7ec4\u4ef6val={{val}}&lt;/view&gt;\n&lt;button bindtap=\"add\"&gt;\u5b50\u7ec4\u4ef6+1&lt;/button&gt;\n</code></pre> <ul> <li>my-component.js</li> </ul> <pre><code>// pages/my-page/my-component/my-component.js\nComponent({\n  properties: {\n    val: {\n      type: Number,\n      observer: function(newVal, oldVal) {\n        console.log(\"oldVal\", oldVal)\n        console.log(\"newVal:\", newVal)\n        // \u5efa\u8bae\u901a\u8fc7observer\uff0c\u5c06\u5b50\u7ec4\u4ef6\u7684\u503c\u4f20\u9012\u7ed9\u7236\u9875\u9762\n        // \u4f7f\u7528 this.triggerEvent \u5411\u7236\u9875\u9762\u4f20\u503c\n        this.triggerEvent(\"sonListener\", newVal)\n      }\n    }\n  },\n  data: {\n\n  },\n  methods: {\n    add() {\n      this.setData({\n        val: this.data.val + 1\n      })\n    }\n  }\n})\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E8%AF%84%E8%AE%BA%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6/","title":"\u8bc4\u8bba\u5361\u7247\u6837\u5f0f","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E8%AF%84%E8%AE%BA%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6/#comment-cardwxml","title":"comment-card.wxml","text":"<pre><code>&lt;view class=\"card\" style=\"display: flex; justify-content: flex-start; padding: 10rpx 20rpx; background-color: white; margin-bottom: 20rpx;\"&gt;\n  &lt;image src=\"{{userImage}}\" mode=\"\" style=\"display: block; width: 100rpx; height: 100rpx; margin-right: 10rpx;\"/&gt;\n  &lt;view style=\"padding-top: 10rpx; width: 600rpx;\"&gt;\n    &lt;view class=\"username\" style=\"color: #4A4A4A; font-weight: bold; font-size: 32rpx;\"&gt;{{username}}&lt;/view&gt;\n    &lt;view class=\"content\" style=\"color: #5E5E5E; font-size: 26rpx; margin-top: 10rpx;\"&gt;{{content}}&lt;/view&gt;\n    &lt;view class=\"info\" style=\"display: flex; justify-content: space-between;\"&gt;\n      &lt;view class=\"create-time\" style=\"color: #A19FA0; font-size: 22rpx; margin-top: 10rpx;\"&gt;{{createTime}}&lt;/view&gt;\n      &lt;view bind:tap=\"clickLike\" style=\"display: flex;\"&gt;\n        &lt;view style=\"font-size: 26rpx; margin-right: 20rpx;\"&gt;{{likeCount}}&lt;/view&gt;\n        &lt;image wx:if=\"{{like}}\" src=\"/images/icon/like_clicked.svg\" mode=\"\" style=\"display: block; width: 30rpx; height: 30rpx;\"/&gt;\n        &lt;image wx:if=\"{{!like}}\" src=\"/images/icon/like_unclicked.svg\" mode=\"\" style=\"display: block; width: 30rpx; height: 30rpx;\"/&gt;\n      &lt;/view&gt;\n    &lt;/view&gt;\n  &lt;/view&gt;\n&lt;/view&gt;\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E8%AF%84%E8%AE%BA%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6/#comment-cardwxss","title":"comment-card.wxss","text":"<p>\u65e0</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E8%AF%84%E8%AE%BA%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6/#comment-cardjs","title":"comment-card.js","text":"<pre><code>// components/comment-card/comment-card.js\nComponent({\n  /**\n   * \u7ec4\u4ef6\u7684\u5c5e\u6027\u5217\u8868\n   */\n  properties: {\n    userImage: {\n      type: String,\n      value: 'https://tse3-mm.cn.bing.net/th/id/OIP-C.XcPcm6jYMcAha8xnWTmImAHaJ4?w=129&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.5&amp;pid=1.7'\n    },\n    username: {\n      type: String,\n      value: '\u672a\u77e5\u7528\u6237'\n    },\n    content: {\n      type: String,\n      value: '\u672a\u77e5\u5185\u5bb9'\n    },\n    createTime: {\n      type: String,\n      value: '\u672a\u77e5\u65f6\u95f4'\n    },\n    like: {\n      type: Boolean,\n      value: false\n    },\n    likeCount: {\n      type: Number,\n      value: 0\n    }\n  },\n\n  /**\n   * \u7ec4\u4ef6\u7684\u521d\u59cb\u6570\u636e\n   */\n  data: {\n\n  },\n\n  /**\n   * \u7ec4\u4ef6\u7684\u65b9\u6cd5\u5217\u8868\n   */\n  methods: {\n    clickLike() {\n      this.triggerEvent('clickLike')\n    }\n  },\n})\n\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E8%AF%84%E8%AE%BA%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6/#comment-cardjson","title":"comment-card.json","text":"<pre><code>{\n  \"component\": true,\n  \"usingComponents\": {}\n}\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E8%AF%84%E8%AE%BA%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6/#_2","title":"\u4f7f\u7528","text":"<p>\u5728\u5f15\u5165comment-card\u7ec4\u4ef6\u4ee5\u540e\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e9b\u53c2\u6570\uff0c\u5e76\u4e14\u5c06\u9875\u9762\u4e2d\u7684\u51fd\u6570\u4e0e\u7ec4\u4ef6\u4e2d\u7684\u51fd\u6570\u7ed1\u5b9a\u5728\u4e00\u8d77\uff08clickLike\u51fd\u6570\uff09\u3002</p> <pre><code>&lt;comment-card \nbind:clickLike=\"clickLikeButton\"\ncontent=\"\u6211\u89c9\u5f97\u535a\u4e3b\u8bf4\u7684\u5f88\u597d\" \ncreateTime=\"2023-10-24 12:01:14\" \nlikeCount=\"123\"\nwx:for=\"{{10}}\" wx:key=\"*this\" /&gt;\n</code></pre> <p>\u7136\u540e\u5728JS\u4e2d\u81ea\u5b9a\u4e49\u7236\u9875\u9762\u7684\u51fd\u6570\uff0c\u4e0e\u5b50\u7ec4\u4ef6\u7684\u51fd\u6570\u5173\u8054\u8d77\u6765</p> <pre><code>page({\n  clickLikeButton() {\n    console.log('\u8bc4\u8bba\u70b9\u8d5e')\n  }\n})\n</code></pre> <p>\u5173\u4e8e\u7236\u9875\u9762\u4e0e\u5b50\u7ec4\u4ef6\u7684\u7ed1\u5b9a\uff1a<code>bind:clickLike=\"clickLikeButton\"</code></p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E8%AF%84%E8%AE%BA%E5%8D%A1%E7%89%87%E7%BB%84%E4%BB%B6/#_3","title":"\u989d\u5916\u8d44\u6e90","text":"<p>\u8def\u5f84\uff1a<code>images/icon/like_clicked.svg</code></p> <pre><code>&lt;?xml version=\"1.0\" standalone=\"no\"?&gt;&lt;!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"&gt;&lt;svg t=\"1697710338789\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"1454\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"200\" height=\"200\"&gt;&lt;path d=\"M192 960H96c-35.296 0-64-28.704-64-64V480c0-35.296 28.704-64 64-64h96c35.296 0 64 28.704 64 64v416c0 35.296-28.704 64-64 64zM96 480v416h96V480H96zM864 576h-128a32 32 0 1 1 0-64h128a32.032 32.032 0 0 0 0-64H512a32 32 0 1 1 0-64h352c52.928 0 96 43.072 96 96s-43.072 96-96 96z\" p-id=\"1455\" fill=\"#d81e06\"&gt;&lt;/path&gt;&lt;path d=\"M896 704h-128a32 32 0 1 1 0-64h128a32.032 32.032 0 0 0 0-64h-128a32 32 0 1 1 0-64h128c52.928 0 96 43.072 96 96s-43.072 96-96 96z\" p-id=\"1456\" fill=\"#d81e06\"&gt;&lt;/path&gt;&lt;path d=\"M864 832h-128a32 32 0 1 1 0-64h128a32.032 32.032 0 0 0 0-64h-128a32 32 0 1 1 0-64h128c52.928 0 96 43.072 96 96s-43.072 96-96 96z\" p-id=\"1457\" fill=\"#d81e06\"&gt;&lt;/path&gt;&lt;path d=\"M800 960H384c-73.472 0-169.76-78.464-180.48-87.392a32 32 0 0 1 40.96-49.184C278.24 851.456 345.984 896 384 896h416a32.032 32.032 0 0 0 0-64h-64a32 32 0 1 1 0-64h64c52.928 0 96 43.072 96 96s-43.072 96-96 96zM224 512a32.032 32.032 0 0 1-30.368-42.144c1.344-4.096 34.112-101.184 99.744-199.616 41.248-61.856 53.504-139.488 57.152-180.256A63.488 63.488 0 0 1 414.208 32H448c52.928 0 96 43.072 96 96v288a32 32 0 1 1-64 0V128c0-17.664-14.368-32-32-32h-33.792c-4.128 46.528-18.496 136.096-67.584 209.76-60.672 91.008-91.968 183.456-92.256 184.384-4.48 13.376-16.992 21.856-30.368 21.856zM736 256a32 32 0 0 1-32-32V96a32 32 0 1 1 64 0v128a32 32 0 0 1-32 32z\" p-id=\"1458\" fill=\"#d81e06\"&gt;&lt;/path&gt;&lt;path d=\"M800 192h-128a32 32 0 1 1 0-64h128a32 32 0 1 1 0 64z\" p-id=\"1459\" fill=\"#d81e06\"&gt;&lt;/path&gt;&lt;/svg&gt;\n</code></pre> <p>\u8def\u5f84\uff1a<code>images/icon/like_unclicked.svg</code></p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E8%AF%84%E8%AE%BA%E5%8F%91%E5%B8%83%E9%A1%B5%E9%9D%A2/","title":"\u8bc4\u8bba\u53d1\u5e03\u9875\u9762","text":"<p>[toc]</p> <p>html</p> <pre><code>&lt;!-- \u9876\u90e8\u5bfc\u822a\u680f --&gt;\n&lt;navigation-bar title=\"\u53d1\u5e03\u8bc4\u8bba\" back=\"{{false}}\" color=\"black\" background=\"#FFF\"&gt;&lt;/navigation-bar&gt;\n\n&lt;form bindsubmit=\"createComment\"&gt;\n  &lt;view class=\"box\" style=\"margin: 20rpx;\"&gt;\n    &lt;view class=\"content\" style=\"background-color: white;  height: 1000rpx; border-radius: 30rpx;\"&gt;\n      &lt;view style=\"border-bottom: 5rpx solid #F8F9FA; width: 90%; margin: 0 auto;\"&gt;&lt;/view&gt;\n      &lt;textarea maxlength=\"-1\" bindblur=\"bindTextAreaBlur\" placeholder=\"\u4e5f\u6765\u8bf4\u4e00\u53e5\" style=\" width: 92%; height: 700rpx; padding: 20rpx;\" name=\"content\"&gt;\n      &lt;/textarea&gt;\n    &lt;/view&gt;\n\n    &lt;view class=\"submit\"&gt;\n      &lt;button type=\"primary\" style=\"margin-top: 20rpx; border-radius: 20rpx; \" formType=\"submit\"&gt;\u63d0\u4ea4&lt;/button&gt;\n    &lt;/view&gt;\n  &lt;/view&gt;\n&lt;/form&gt;\n</code></pre> <p>css</p> <pre><code>page {\n  background-color: #F6F6F6;\n}\n</code></pre> <p>js</p> <pre><code>// pages/create-comment/create-comment.js\nPage({\n  data: {\n\n  },\n  createComment(e) {\n    console.log('\u53d1\u9001\u8bf7\u6c42')\n    let value = e.detail.value\n    console.log(value)\n    // \u81ea\u5b9a\u4e49\u540e\u7aefAPI\n  }\n})\n</code></pre> <p>json</p> <pre><code>{\n  \"usingComponents\": {\n    \"navigation-bar\": \"/components/navigation-bar/navigation-bar\"\n  }\n}\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E8%AF%BE%E8%A1%A8%E9%A1%B5%E9%9D%A2/","title":"\u8bfe\u8868\u9875\u9762","text":"<p>[toc]</p>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E8%AF%BE%E8%A1%A8%E9%A1%B5%E9%9D%A2/#_2","title":"\u524d\u7f6e\u8981\u6c42","text":"<ul> <li> <p>\u5b89\u88c5vant weapp</p> </li> <li> <p>\u5b89\u88c5color ui</p> </li> </ul> <p><code>js   App({     globalData: {},  // \u6ce8\u610f\u4e00\u5b9a\u8981\u6709\u8fd9\u884c     onLaunch: function() {       wx.getSystemInfo({         success: e =&gt; {           this.globalData.StatusBar = e.statusBarHeight;           let custom = wx.getMenuButtonBoundingClientRect();           this.globalData.Custom = custom;             this.globalData.CustomBar = custom.bottom + custom.top - e.statusBarHeight;         }       })     },   })</code></p> <ul> <li>\u4fee\u6539color ui\u7684\u9ed8\u8ba4\u6837\u5f0f</li> </ul> <p><code>/colorui/components/cu-custom.js</code></p> <p><code>js   const app = getApp();   Component({     /**      * \u7ec4\u4ef6\u7684\u4e00\u4e9b\u9009\u9879      */     options: {       addGlobalClass: true,       multipleSlots: true     },     /**      * \u7ec4\u4ef6\u7684\u5bf9\u5916\u5c5e\u6027      */     properties: {       bgColor: {         type: String,         default: ''       },        isCustom: {         type: [Boolean, String],         default: false       },       isBack: {         type: [Boolean, String],         default: false       },       bgImage: {         type: String,         default: ''       },       customBack: {         type: [Boolean, String],         default: false       },     },     /**      * \u7ec4\u4ef6\u7684\u521d\u59cb\u6570\u636e      */     data: {       StatusBar: app.globalData.StatusBar,       CustomBar: app.globalData.CustomBar,       Custom: app.globalData.Custom     },     /**      * \u7ec4\u4ef6\u7684\u65b9\u6cd5\u5217\u8868      */     methods: {       BackPage() {         if (this.properties.customBack) {           this.triggerEvent('back')           return         }         wx.navigateBack({           delta: 1         });       },       toHome(){         wx.reLaunch({           url: '/pages/index/index',         })       }     }   })</code></p> <p><code>/colorui/components/cu-custom.wxml</code></p> <p><code>html   &lt;view class=\"cu-custom\" style=\"height:{{CustomBar}}px\"&gt;     &lt;view class=\"cu-bar fixed {{bgImage!=''?'none-bg text-white bg-img':''}} {{bgColor}}\" style=\"height:{{CustomBar}}px;padding-top:{{StatusBar}}px;{{bgImage?'background-image:url(' + bgImage+')':''}}\"&gt;       &lt;view class=\"action\" bindtap=\"BackPage\" wx:if=\"{{isBack || customBack}}\"&gt;         &lt;text wx:if=\"{{isBack}}\" class=\"cuIcon-back\"&gt;&lt;/text&gt;         &lt;slot name=\"backText\"&gt;&lt;/slot&gt;       &lt;/view&gt;       &lt;view class=\"action border-custom\"  wx:if=\"{{isCustom}}\" style=\"width:{{Custom.width}}px;height:{{Custom.height}}px;margin-left:calc(750rpx - {{Custom.right}}px)\"&gt;         &lt;text class=\"cuIcon-back\" bindtap=\"BackPage\"&gt;&lt;/text&gt;         &lt;text class=\"cuIcon-homefill\" bindtap=\"toHome\"&gt;&lt;/text&gt;       &lt;/view&gt;       &lt;view class=\"content\" style=\"top:{{StatusBar}}px\"&gt;         &lt;slot name=\"content\"&gt;&lt;/slot&gt;       &lt;/view&gt;       &lt;slot name=\"right\"&gt;&lt;/slot&gt;     &lt;/view&gt;   &lt;/view&gt;</code></p> <ul> <li>app.json\u7684\u914d\u7f6e\u4fe1\u606f\uff08\u9664\u4e86tabbar\u548cpages\uff09\uff0c\u4e00\u5b9a\u4e0d\u8981\u591a\u914d\u3002</li> </ul> <p><code>json   {     \"window\": {       \"backgroundTextStyle\": \"light\",       \"navigationBarBackgroundColor\": \"#fff\",       \"navigationBarTitleText\": \"Weixin\",       \"navigationBarTextStyle\": \"black\",       \"navigationStyle\": \"custom\"     },     \"sitemapLocation\": \"sitemap.json\",     \"usingComponents\": {       \"cu-custom\": \"/colorui/components/cu-custom\"     }   }</code></p> <ul> <li>/asset/imgs/ref.svg \u56fe\u6807</li> </ul> <pre><code>&lt;svg t=\"1698042047867\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4003\" width=\"200\" height=\"200\"&gt;&lt;path d=\"M924.48359053 549.17490693a598.77850693 598.77850693 0 0 1-41.2967004 134.24975508q-92.90575019 202.79376387-317.27029921 212.86959082a521.24667187 521.24667187 0 0 1-200.99619844-29.75443858v-0.89878271l-27.95687315 70.29426973a49.00731065 49.00731065 0 0 1-18.02295878 19.82052422 35.19443935 35.19443935 0 0 1-18.49600196 4.73043516 44.89183125 44.89183125 0 0 1-17.12417607-4.73043516 83.68140146 83.68140146 0 0 1-11.73147979-6.29147901 45.97983193 45.97983193 0 0 1-4.73043515-4.0681749L124.99271123 705.27927324a50.4737455 50.4737455 0 0 1-6.29147901-18.9217415 41.24939589 41.24939589 0 0 1 0.89878272-15.32661065 31.59930849 31.59930849 0 0 1 6.291479-11.7314789 65.42192109 65.42192109 0 0 1 9.03513164-9.03513164 53.17009365 53.17009365 0 0 1 9.88660987-6.48069698 44.32417911 44.32417911 0 0 1 7.19026172-3.1693913 5.44000078 5.44000078 0 0 0 2.69634814-1.56104385l246.97603037-65.80035615a80.41740117 80.41740117 0 0 1 31.55200313-2.2706086 107.52279521 107.52279521 0 0 1 19.48939366 5.62921787 18.92174151 18.92174151 0 0 1 10.83269706 10.83269708 66.93566045 66.93566045 0 0 1 4.0681749 13.05600204 41.86435254 41.86435254 0 0 1 0 12.63026163 48.48696211 48.48696211 0 0 1-1.79756542 9.46087118 9.46087031 9.46087031 0 0 0-0.89878272 3.16939132l-28.85565586 70.29426972a595.46720215 595.46720215 0 0 0 144.37288652 34.72139531q68.02366026 6.76452217 115.84836211-3.1693913a315.09429873 315.09429873 0 0 0 88.79027169-32.45078672 335.10404003 335.10404003 0 0 0 64.99618154-44.60800518 309.93812403 309.93812403 0 0 0 42.81043974-48.67618008 360.6956956 360.6956956 0 0 0 23.65217666-36.51896074c3.31130479-6.57530508 5.86573945-11.96800136 7.66330576-16.22539336zM97.93462167 457.21524307a602.65746387 602.65746387 0 0 1 55.86644093-155.06367012q103.73844727-186.56837051 329.00177901-182.07445693a502.56145195 502.56145195 0 0 1 182.07445693 35.14713486l29.75443857-69.39548701A66.46261641 66.46261641 0 0 1 708.16078144 70.07641455a33.11304785 33.11304785 0 0 1 13.52904522-7.23756621 37.18122187 37.18122187 0 0 1 13.05600206-0.47304404 41.81704893 41.81704893 0 0 1 11.73147977 3.16939218 90.44592364 90.44592364 0 0 1 9.93391348 5.3926963 43.56730987 43.56730987 0 0 1 5.86574034 4.06817402l2.69634814 2.69634814 136.094625 243.38089951a72.04453066 72.04453066 0 0 1 5.39269629 19.96243682 41.29670039 41.29670039 0 0 1-0.89878271 15.32661065 28.38261182 28.38261182 0 0 1-6.76452218 11.73147978 60.92800752 60.92800752 0 0 1-9.46087118 8.5620876 80.98505332 80.98505332 0 0 1-9.93391436 5.86574033l-7.19026172 3.59513086a6.24417451 6.24417451 0 0 1-2.69634815 0.89878271l-248.77359491 59.36696368a98.44035997 98.44035997 0 0 1-40.53983116-0.89878272c-10.17043594-2.98017422-16.84035-7.04834824-19.82052422-12.15721934a36.18783018 36.18783018 0 0 1-4.73043516-18.49600195 85.4789669 85.4789669 0 0 1 1.1353043-15.32661064 21.42887256 21.42887256 0 0 1 2.69634815-7.23756621L589.89989815 322.87087988a583.3572873 583.3572873 0 0 0-144.23097393-37.843483q-68.54400791-8.08904443-115.84836211 0a306.05916709 306.05916709 0 0 0-89.02679326 29.75443769 323.94021328 323.94021328 0 0 0-66.22609483 43.28348379 336.90160547 336.90160547 0 0 0-44.1822665 47.77739737 359.04004365 359.04004365 0 0 0-25.26052413 36.04591757A99.33914268 99.33914268 0 0 0 97.93462167 457.21524307z m1e-8 0\" fill=\"#1296db\" p-id=\"4004\"&gt;&lt;/path&gt;&lt;/svg&gt;\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E8%AF%BE%E8%A1%A8%E9%A1%B5%E9%9D%A2/#_3","title":"\u8bfe\u8868\u9875\u9762","text":""},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E8%AF%BE%E8%A1%A8%E9%A1%B5%E9%9D%A2/#course","title":"course","text":"<p>course.wxml</p> <pre><code>&lt;cu-custom bgColor=\"bg-white\" customBack=\"{{true}}\" bind:back=\"update\"&gt;\n  &lt;view slot=\"backText\"&gt;\n    &lt;image bindtap=\"update\" class=\"refresh-btn\" src=\"/images/refresh.svg\" mode=\"aspectFill\"&gt;&lt;/image&gt;\n  &lt;/view&gt;\n  &lt;view slot=\"content\"&gt;\n    &lt;view bindtap=\"selectWeek\"&gt;&lt;text&gt;\u7b2c{{nowWeek}}\u5468&lt;/text&gt; &lt;text class=\"cuIcon-unfold\"&gt;&lt;/text&gt;&lt;/view&gt;\n  &lt;/view&gt;\n&lt;/cu-custom&gt;\n&lt;view class=\"container\"&gt;\n  &lt;view class=\"week-list\"&gt;\n    &lt;view class=\"now-month\"&gt;\n      &lt;text&gt;{{nowMonth &lt; 10 ? '0' + nowMonth : nowMonth}}&lt;/text&gt;\n          &lt;text&gt;\u6708&lt;/text&gt;\n    &lt;/view&gt;\n    &lt;view class=\"week-item {{nowMonth == todayMonth &amp;&amp; todayDay == weekCalendar[index] ? 'active' : ''}}\" wx:for=\"{{weekDayCount}}\" wx:key=\"index\"&gt;\n      &lt;text class=\"week-name\"&gt;\u5468{{weekIndexText[index]}}&lt;/text&gt;\n      &lt;text class=\"week-date\"&gt;{{weekCalendar[index] == 1 ? ((nowMonth == 12 ? 1 : (nowMonth + 1)) + '\u6708') :(weekCalendar[index] &lt; 9 ? '0' : '' ) + weekCalendar[index] + '\u65e5' }}&lt;/text&gt;\n    &lt;/view&gt;\n  &lt;/view&gt;\n\n  &lt;view class=\"course-content\"&gt;\n\n  &lt;!-- \u5e95\u90e8\u6a2a\u7ebf absolute,\u8131\u79bb\u6587\u6863\u6d41\uff0c\u4e0d\u5f71\u54cd\u5e03\u5c40 --&gt;\n  &lt;view wx:for=\"{{14}}\"&gt;\n    &lt;view style=\"width: 91vh; margin-top: {{(index + 1) * 120}}rpx; position: absolute; border-bottom: 1rpx solid lightgray;\"&gt;\n    &lt;/view&gt;\n  &lt;/view&gt;\n\n    &lt;view class=\"course-nums\"&gt;\n      &lt;view class=\"course-num\" wx:for=\"{{timeArr}}\" wx:key=\"index\"&gt;\n        {{index + 1 &gt; 9 ? index + 1 : '0' + (index + 1)}}\n      &lt;/view&gt;\n    &lt;/view&gt;\n    &lt;swiper duration=\"{{firstEntry ? 0 : 300}}\" circular class=\"course-swpier\" current=\"{{nowWeek-1}}\" bindchange=\"swiperSwitchWeek\"&gt;\n      &lt;swiper-item wx:for=\"{{totalWeek}}\" wx:key=\"index\" wx:for-index=\"weekIndex\"&gt;\n        &lt;view class=\"course-list\"&gt;\n          &lt;view bindtap=\"navCourseDetail\" data-dayIndex=\"{{index}}\" data-weekIndex=\"{{weekIndex}}\" class=\"course-item\" wx:for=\"{{courseList[weekIndex]}}\" wx:key=\"weekIndex\" style=\"top: {{(item.startSection - 1) * 120}}rpx;left:{{(item.day - 1) * 100}}rpx; height:{{(item.endSection - item.startSection + 1) * 120}}rpx;\"&gt;\n            &lt;view class=\"course-item__content\" style=\"background-color: {{courseColor[index]}};\"&gt;\n            {{timeArr[item.startSection - 1]}} &lt;br/&gt;\n              {{item.kcmc}}@{{item.place ? item.place : '\u65e0\u5730\u70b9'}}\n            &lt;/view&gt;\n          &lt;/view&gt;\n        &lt;/view&gt;\n      &lt;/swiper-item&gt;\n    &lt;/swiper&gt;\n  &lt;/view&gt;\n&lt;/view&gt;\n\n&lt;van-popup show=\"{{showSwitchWeek}}\" position=\"bottom\" bind:close=\"hideSwitchWeek\" round&gt;\n  &lt;view class=\"switch-week__popup\"&gt;\n    &lt;view class=\"switch-week__title\"&gt;\u5207\u6362\u5468\u6570&lt;/view&gt;\n    &lt;view class=\"switch-week__list\"&gt;\n      &lt;view class=\"switch-week__item\" wx:for=\"{{totalWeek}}\" wx:key=\"index\"&gt;\n        &lt;view bindtap=\"switchWeek\" data-week=\"{{item+1}}\" class=\"switch-week__item-box {{nowWeek == index + 1 ? 'active' : ''}}\"&gt;{{item + 1}}&lt;/view&gt;\n      &lt;/view&gt;\n    &lt;/view&gt;\n  &lt;/view&gt;\n&lt;/van-popup&gt;\n</code></pre> <p>course.wxss</p> <pre><code>page {\n  background-color: #fff;\n}\n\n.refresh-btn {\n  width: 52rpx;\n  height: 52rpx;\n}\n\n.week-list {\n  position: fixed;\n  left: 0;\n  width: 100%;\n  height: 92rpx;\n  display: flex;\n  align-items: center;\n  background: #f5f7f8;\n  z-index: 1;\n}\n\n.now-month {\n  width: 50rpx;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  font-size: 24rpx;\n  color: #666666;\n}\n\n.week-item {\n  width: calc((100% - 50rpx) / 7);\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n.week-item.active {\n  background-color: #00B26A;\n  border-radius: 20rpx;\n}\n\n.week-name {\n  font-size: 24rpx;\n  color: #444444;\n}\n\n.week-date {\n  font-size: 20rpx;\n  color: #a1a1a1;\n}\n\n.active .week-name,\n.active .week-date {\n  color: #fff;\n}\n\n.course-content {\n  width: 100%;\n  padding-top: 92rpx;\n  display: flex;\n}\n\n.course-nums {\n  width: 50rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background: #f5f6f7;\n}\n\n.course-num {\n  height: 120rpx;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 24rpx;\n  color: #999999;\n}\n\n.course-list {\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n\n.course-item {\n  position: absolute;\n  width: calc((100% - 50rpx) / 7);\n  padding: 2rpx;\n}\n\n.course-item__content {\n  width: 100%;\n  height: 100%;\n  border-radius: 8rpx;\n  font-size: 24rpx;\n  color: #ffffff;\n  text-align: center;\n}\n\n.switch-week__popup {\n  padding: 30rpx;\n}\n\n.switch-week__title {\n  text-align: center;\n  font-size: 34rpx;\n  font-weight: 500;\n}\n\n.switch-week__list {\n  display: flex;\n  flex-wrap: wrap;\n  margin-top: 30rpx;\n}\n\n.switch-week__item {\n  width: 20%;\n  padding: 10rpx;\n}\n\n.switch-week__item-box {\n  width: 100%;\n  height: 100rpx;\n  background-color: #eee;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 12rpx;\n}\n\n.switch-week__item-box.active {\n  background-color: #00B26A;\n  color: #fff;\n  font-size: 32rpx;\n  font-weight: bold;\n}\n\n.course-swpier {\n  width: calc(100% - 50rpx);\n  height: 1700rpx;\n}\n\nswitch.theme[checked] .wx-switch-input,\ncheckbox.theme[checked] .wx-checkbox-input,\nradio.theme[checked] .wx-radio-input {\n    border-color: var(--theme) !important;\n}\n\nswitch.theme[checked] .wx-switch-input.wx-switch-input-checked,\ncheckbox.theme[checked] .wx-checkbox-input,\nradio.theme[checked] .wx-radio-input {\n    background-color: var(--theme) !important;\n    color: var(--white) !important;\n}\n\n.cu-bar .content {\n  pointer-events: auto;\n}\n</code></pre> <p>couse.js</p> <pre><code>const courseCacheKey = \"courses\"\nconst courseColorCacheKey = \"courseColor\"\nPage({\n\n  /**\n   * \u9875\u9762\u7684\u521d\u59cb\u6570\u636e\n   */\n  data: {\n    startDate: '2023/8/28', // \u81ea\u5b9a\u4e49: \u5f00\u5b66\u65e5\u671f\n    nowWeek: 1, // \u5f53\u524d\u5468\n    totalWeek: 25, // \u5468\u603b\u6570\n    showSwitchWeek: false, // \u663e\u793a\u9009\u62e9\u5468\u6570\u5f39\u7a97\n    weekDayCount: 7,\n    weekIndexText: ['\u4e00', '\u4e8c', '\u4e09', '\u56db', '\u4e94', '\u516d', '\u65e5'],\n    nowMonth: 1, // \u5f53\u524d\u5468\u7684\u6708\u4efd\n    timeArr: [\n      '08:00', '08:50', '09:30', '10:40', '11:20', '14:00', '14:50', '15:50', '16:40', '17:30', '19:00', '19:50', '20:40', '12:15'\n    ],\n    courseList: [  // \u4e8c\u7ef4\u6570\u7ec4\uff0c\u7b2c\u4e00\u7ef4\u662f\u6bcf\u4e00\u5468\u3002\u7b2c\u4e8c\u7ef4\u662f\u8fd9\u4e00\u5468\u7684\u8bfe\u7a0b\u3002\u5982\u679c\u8fd9\u4e00\u5468\u6ca1\u6709\u8bfe\u7a0b\uff0c\u9700\u8981\u6709\u7a7a\u6570\u7ec4\u586b\u5145\u3002\n      [\n          {\n              \"kcbh\": \"06125303\",\n              \"kxh\": 1,\n              \"kcmc\": \"\u786c\u4ef6\u8bfe\u7a0b\u8bbe\u8ba1\uff08\u2160\uff09\",\n              \"xf\": 1.50,\n              \"kcsx\": \"\u5fc5\u4fee\",\n              \"xkjd\": \"\u9884\u7f6e\",\n              \"teacherName\": \"\u674e\u7fd4\u5b87\",\n              \"week\": 1,\n              \"day\": 1,\n              \"startSection\": 1,\n              \"endSection\": 10,\n              \"place\": \"\"\n          },\n          {\n              \"kcbh\": \"06125303\",\n              \"kxh\": 1,\n              \"kcmc\": \"\u786c\u4ef6\u8bfe\u7a0b\u8bbe\u8ba1\uff08\u2160\uff09\",\n              \"xf\": 1.50,\n              \"kcsx\": \"\u5fc5\u4fee\",\n              \"xkjd\": \"\u9884\u7f6e\",\n              \"teacherName\": \"\u674e\u7fd4\u5b87\",\n              \"week\": 1,\n              \"day\": 2,\n              \"startSection\": 1,\n              \"endSection\": 10,\n              \"place\": \"\"\n          },\n          {\n              \"kcbh\": \"06125303\",\n              \"kxh\": 1,\n              \"kcmc\": \"\u786c\u4ef6\u8bfe\u7a0b\u8bbe\u8ba1\uff08\u2160\uff09\",\n              \"xf\": 1.50,\n              \"kcsx\": \"\u5fc5\u4fee\",\n              \"xkjd\": \"\u9884\u7f6e\",\n              \"teacherName\": \"\u674e\u7fd4\u5b87\",\n              \"week\": 1,\n              \"day\": 3,\n              \"startSection\": 1,\n              \"endSection\": 10,\n              \"place\": \"\"\n          },\n          {\n              \"kcbh\": \"06125303\",\n              \"kxh\": 1,\n              \"kcmc\": \"\u786c\u4ef6\u8bfe\u7a0b\u8bbe\u8ba1\uff08\u2160\uff09\",\n              \"xf\": 1.50,\n              \"kcsx\": \"\u5fc5\u4fee\",\n              \"xkjd\": \"\u9884\u7f6e\",\n              \"teacherName\": \"\u674e\u7fd4\u5b87\",\n              \"week\": 1,\n              \"day\": 4,\n              \"startSection\": 1,\n              \"endSection\": 10,\n              \"place\": \"\"\n          },\n          {\n              \"kcbh\": \"06125303\",\n              \"kxh\": 1,\n              \"kcmc\": \"\u786c\u4ef6\u8bfe\u7a0b\u8bbe\u8ba1\uff08\u2160\uff09\",\n              \"xf\": 1.50,\n              \"kcsx\": \"\u5fc5\u4fee\",\n              \"xkjd\": \"\u9884\u7f6e\",\n              \"teacherName\": \"\u674e\u7fd4\u5b87\",\n              \"week\": 1,\n              \"day\": 5,\n              \"startSection\": 1,\n              \"endSection\": 10,\n              \"place\": \"\"\n          }\n      ],\n      [\n          {\n              \"kcbh\": \"06021194\",\n              \"kxh\": 0,\n              \"kcmc\": \"\u6bd5\u4e1a\u5b9e\u4e60\",\n              \"xf\": 3.00,\n              \"kcsx\": \"\u5fc5\u4fee\",\n              \"xkjd\": \"\u9884\u7f6e\",\n              \"teacherName\": \"\u8d75\u5b66\u9f99,\u4e25\u608d\",\n              \"week\": 2,\n              \"day\": 1,\n              \"startSection\": 1,\n              \"endSection\": 10,\n              \"place\": \"\"\n          },\n          {\n              \"kcbh\": \"06021194\",\n              \"kxh\": 0,\n              \"kcmc\": \"\u6bd5\u4e1a\u5b9e\u4e60\",\n              \"xf\": 3.00,\n              \"kcsx\": \"\u5fc5\u4fee\",\n              \"xkjd\": \"\u9884\u7f6e\",\n              \"teacherName\": \"\u4e25\u608d,\u8d75\u5b66\u9f99\",\n              \"week\": 2,\n              \"day\": 2,\n              \"startSection\": 1,\n              \"endSection\": 10,\n              \"place\": \"\"\n          },\n          {\n              \"kcbh\": \"06021194\",\n              \"kxh\": 0,\n              \"kcmc\": \"\u6bd5\u4e1a\u5b9e\u4e60\",\n              \"xf\": 3.00,\n              \"kcsx\": \"\u5fc5\u4fee\",\n              \"xkjd\": \"\u9884\u7f6e\",\n              \"teacherName\": \"\u8d75\u5b66\u9f99,\u4e25\u608d\",\n              \"week\": 2,\n              \"day\": 3,\n              \"startSection\": 1,\n              \"endSection\": 10,\n              \"place\": \"\"\n          },\n          {\n              \"kcbh\": \"06021194\",\n              \"kxh\": 0,\n              \"kcmc\": \"\u6bd5\u4e1a\u5b9e\u4e60\",\n              \"xf\": 3.00,\n              \"kcsx\": \"\u5fc5\u4fee\",\n              \"xkjd\": \"\u9884\u7f6e\",\n              \"teacherName\": \"\u8d75\u5b66\u9f99,\u4e25\u608d\",\n              \"week\": 2,\n              \"day\": 4,\n              \"startSection\": 1,\n              \"endSection\": 10,\n              \"place\": \"\"\n          },\n          {\n              \"kcbh\": \"06021194\",\n              \"kxh\": 0,\n              \"kcmc\": \"\u6bd5\u4e1a\u5b9e\u4e60\",\n              \"xf\": 3.00,\n              \"kcsx\": \"\u5fc5\u4fee\",\n              \"xkjd\": \"\u9884\u7f6e\",\n              \"teacherName\": \"\u8d75\u5b66\u9f99,\u4e25\u608d\",\n              \"week\": 2,\n              \"day\": 5,\n              \"startSection\": 1,\n              \"endSection\": 10,\n              \"place\": \"\"\n          }\n      ],\n    ],\n    courseColor: [\n      \"#8B97B1\",\n      \"#FBD97D\",\n      \"#3B98A0\",\n      \"#0079FF\",\n      \"#638E3E\",\n      \"#47A992\",\n      \"#7A3E3E\",\n      \"#FF55BB\",\n      \"#A0D8B3\",\n      \"#539165\",\n      \"#3A98B9\",\n      \"#609966\",\n    ],\n    weekCalendar: [1, 2, 3, 4, 5, 6, 7],\n    firstEntry: true\n  },\n\n  /**\n   * \u751f\u547d\u5468\u671f\u51fd\u6570--\u76d1\u542c\u9875\u9762\u52a0\u8f7d\n   */\n  onLoad(options) {\n    const {\n      windowWidth\n    } = wx.getSystemInfoSync()\n    this.setData({\n      windowWidth\n    })\n    this.getWeekDates()\n    this.getNowWeek()\n    this.getData()\n    this.getTodayDate()\n  },\n\n  selectWeek() {\n    this.setData({\n      showSwitchWeek: true\n    })\n  },\n\n  switchWeek(e) {\n    const week = e.currentTarget.dataset.week\n    this.setData({\n      showSwitchWeek: false\n    })\n    this.switchWeekFn(week)\n  },\n\n  // \u5207\u6362\u5468\u6570\n  switchWeekFn(week) {\n    this.setData({\n      nowWeek: week\n    })\n    this.getWeekDates()\n  },\n\n  hideSwitchWeek() {\n    this.setData({\n      showSwitchWeek: false\n    })\n  },\n\n  getWeekDates() {\n    const startDate = new Date(this.data.startDate)\n    const addTime = (this.data.nowWeek - 1) * 7 * 24 * 60 * 60 * 1000\n    const firstDate = startDate.getTime() + addTime\n    const {\n      month: nowMonth\n    } = this.getDateObject(new Date(firstDate))\n    const weekCalendar = []\n    for (let i = 0; i &lt; this.data.weekDayCount; i++) {\n      const date = new Date(firstDate + i * 24 * 60 * 60 * 1000)\n      const {\n        day\n      } = this.getDateObject(date)\n      weekCalendar.push(day)\n    }\n    this.setData({\n      nowMonth,\n      weekCalendar\n    })\n  },\n\n  getDateObject(date = new Date()) {\n    const year = date.getFullYear()\n    const month = date.getMonth() + 1\n    const day = date.getDate()\n    return {\n      year,\n      month,\n      day\n    }\n  },\n\n  getNowWeek() {\n    const nowWeek = this.getNowWeekTool(this.data.startDate, this.data.totalWeek)\n    this.setData({\n      nowWeek\n    })\n    this.getWeekDates()\n  },\n\n  getNowWeekTool(startDate, totalWeek) {  // \u5de5\u5177\u65b9\u6cd5\uff0c\u53ef\u4ee5\u62bd\u79bb\n    const nowDate = new Date().getTime()\n    startDate = new Date(startDate)\n    const time = nowDate - startDate\n    let nowWeek = Math.ceil(time / 1000 / 60 / 60 / 24 / 7)\n    if (nowWeek &gt; totalWeek) {\n      nowWeek = 1\n    }\n    return nowWeek\n  },\n\n  getData() {\n    const cache = wx.getStorageSync(courseCacheKey)\n    const courseColorCache = wx.getStorageSync(courseColorCacheKey)\n    if (cache) {\n      this.setData({\n        courseList: cache,\n      })\n      if (!courseColorCache) {\n        this.buildCourseColor()\n      } else {\n        this.setData({\n          courseColor: courseColorCache\n        })\n      }\n      return\n    }\n    this.updateFn(true)\n  },\n\n  update() {\n    console.log('update')\n    this.updateFn()\n  },\n\n  updateFn(firstEntry = false) {\n    const that = this\n    // important \u53d1\u9001\u8bf7\u6c42\n    // getCourseListRequest().then(res =&gt; {\n    //   that.setData({\n    //     courseList: res.data\n    //   })\n    //   that.buildCourseColor()\n    //   if (!firstEntry) {\n    //     wx.showToast({\n    //       title: '\u66f4\u65b0\u6210\u529f',\n    //       icon: 'success'\n    //     })\n    //   }\n    //   wx.setStorageSync(courseCacheKey, res.data)\n    // })\n  },\n\n  swiperSwitchWeek(e) {\n    if (e.detail.source == '') {\n      this.setData({\n        firstEntry: false\n      })\n      return\n    }\n    const index = e.detail.current\n    this.switchWeekFn(index + 1)\n  },\n\n  buildCourseColor() {  // \u8ba9\u76f8\u540c\u7684\u8bfe\u7a0b\u6709\u76f8\u540c\u7684\u989c\u8272\n    const courseColor = {}\n    let colorIndex = 0\n    this.data.courseList.map(item =&gt; {\n      if (courseColor[item.kcmc] === undefined) {\n        courseColor[item.kcmc] = this.data.colorList[colorIndex]\n        colorIndex++\n      }\n    })\n    wx.setStorageSync(courseColorCacheKey, courseColor)\n    this.setData({\n      courseColor\n    })\n  },\n\n  // \u83b7\u53d6\u4eca\u5929\u65e5\u671f\n  getTodayDate() {\n    const {\n      month: todayMonth,\n      day: todayDay\n    } = this.getDateObject()\n    this.setData({\n      todayMonth,\n      todayDay\n    })\n  },\n\n  navCourseDetail(e) {\n    console.log(e)\n    const weekIndex = e.currentTarget.dataset.weekindex\n    const dayIndex = e.currentTarget.dataset.dayindex\n    wx.navigateTo({\n      // \u81ea\u5b9a\u4e49\u8df3\u8f6c\u9875\u9762\n      url: `./course-detail/course-detail?info=${JSON.stringify(this.data.courseList[weekIndex][dayIndex])}`,\n    })\n  }\n})\n\n</code></pre> <p>course.json</p> <pre><code>{\n  \"usingComponents\": {\n    \"van-popup\": \"@vant/weapp/popup/index\"\n  }\n}\n</code></pre>"},{"location":"%E5%89%8D%E7%AB%AF/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%8E%9F%E7%94%9F%E5%BC%80%E5%8F%91/%E8%AF%BE%E8%A1%A8%E9%A1%B5%E9%9D%A2/#course-detail","title":"course-detail","text":"<p>course-detail.wxml</p> <pre><code>&lt;cu-custom bgColor=\"bg-white\" isBack=\"{{true}}\"&gt;\n  &lt;view slot=\"content\"&gt;\u8bfe\u7a0b\u8be6\u60c5&lt;/view&gt;\n&lt;/cu-custom&gt;\n&lt;view class=\"container\"&gt;\n  &lt;view class=\"info-box\"&gt;\n    &lt;view class=\"course-title\"&gt;{{info.name}}&lt;/view&gt;\n    &lt;view class=\"info-list\"&gt;\n      &lt;view class=\"info-item\" wx:for=\"{{infoRef}}\" wx:key&gt;\n      &lt;!-- todo \u70b9\u51fb\u8001\u5e08\uff0c\u67e5\u770b\u8001\u5e08\u7684\u8bfe\u7a0b\uff1b\u70b9\u51fb\u8bfe\u7a0b\uff0c\u67e5\u770b\u5386\u53f2\u8bfe\u7a0b\u4fe1\u606f --&gt;\n        &lt;view class=\"info-item__key\"&gt;\n          {{item.title}}\n        &lt;/view&gt;\n        &lt;view class=\"info-item__val\"&gt;\n          {{info[item.key]}}\n        &lt;/view&gt;\n      &lt;/view&gt;\n    &lt;/view&gt;\n  &lt;/view&gt;\n&lt;/view&gt;\n</code></pre> <p>course-detail.wxss</p> <pre><code>page {\n  background: #fafafa;\n}\n\n.info-box {\n  background-color: #fff;\n  padding: 30rpx 30rpx 0;\n}\n\n.course-title {\n  font-size: 32rpx;\n  color: #333333;\n}\n\n.info-list {\n  margin-top: 10rpx;\n}\n\n.info-item {\n  display: flex;\n  align-items: center;\n  padding: 24rpx 0;\n}\n\n.info-item:not(:last-child) {\n  border-bottom: 1rpx solid rgba(243, 243, 243, 0.82);\n}\n\n.info-item__key {\n  color: #00B26A;\n  margin-right: 40rpx;\n}\n\n.info-item__val {\n  color: #666666;\n}\n\n</code></pre> <p>course-detail.js</p> <pre><code>Page({\n\n  /**\n   * \u9875\u9762\u7684\u521d\u59cb\u6570\u636e\n   */\n  data: {\n    infoRef: [\n      {\n        key: 'kcmc',\n        title: '\u8bfe\u7a0b\u540d'\n      },\n      {\n        key: 'place',\n        title: '\u5730\u70b9'\n      },\n      {\n        key: 'teacherName',\n        title: '\u6388\u8bfe\u6559\u5e08'\n      },\n      {\n        key: 'xf',\n        title: '\u5b66\u5206'\n      },\n      {\n        key: 'kcsx',\n        title: '\u8bfe\u7a0b\u5c5e\u6027'\n      },\n      {\n        key: 'kcbh',\n        title: '\u8bfe\u7a0b\u7f16\u53f7'\n      },\n      {\n        key: 'kxh',\n        title: '\u8bfe\u5e8f\u53f7'\n      },\n      {\n        key: 'xkjd',\n        title: '\u9009\u8bfe\u9636\u6bb5'\n      }\n    ]\n  },\n\n  /**\n   * \u751f\u547d\u5468\u671f\u51fd\u6570--\u76d1\u542c\u9875\u9762\u52a0\u8f7d\n   */\n  onLoad(options) {\n    let info = options.info || ''\n    if (info == '') {\n      wx.showToast({\n        title: '\u9875\u9762\u4e0d\u5b58\u5728',\n        icon: 'none'\n      })\n      setTimeout(() =&gt; {\n        wx.navigateBack({\n          delta: 1,\n        })\n      }, 1500);\n      return\n    }\n    info = JSON.parse(info)\n    info.rawSection = '\u5468' + info.rawSection\n    this.setData({\n      info\n    })\n  },\n})\n</code></pre> <p>course-detail.json</p> <pre><code>{\n  \"usingComponents\": {}\n}\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E5%B9%B3%E8%A1%A1%E6%A0%91%E4%B8%8D%E5%A5%BD%E5%86%99%EF%BC%9F%E7%BA%BF%E6%AE%B5%E6%A0%91%E6%9D%A5%E6%9B%BF%E6%8D%A2%EF%BC%81/","title":"\u5e73\u8861\u6811\u4e0d\u597d\u5199\uff1f\u7ebf\u6bb5\u6811\u6765\u66ff\u6362\uff01","text":""},{"location":"%E7%AE%97%E6%B3%95/%E5%B9%B3%E8%A1%A1%E6%A0%91%E4%B8%8D%E5%A5%BD%E5%86%99%EF%BC%9F%E7%BA%BF%E6%AE%B5%E6%A0%91%E6%9D%A5%E6%9B%BF%E6%8D%A2%EF%BC%81/#markdown","title":"\u6b22\u8fce\u4f7f\u7528Markdown","text":""},{"location":"%E7%AE%97%E6%B3%95/%E5%B9%B3%E8%A1%A1%E6%A0%91%E4%B8%8D%E5%A5%BD%E5%86%99%EF%BC%9F%E7%BA%BF%E6%AE%B5%E6%A0%91%E6%9D%A5%E6%9B%BF%E6%8D%A2%EF%BC%81/#_1","title":"\u65b0\u589e\u56fe\u7247\u4e0a\u4f20\u529f\u80fd","text":"<p>\u73b0\u5728\u53ef\u4ee5\u5728\u6587\u7ae0\u4e2d\u63d2\u5165\u56fe\u7247\uff01</p> <ul> <li>\u60a8\u53ef\u4ee5\u63d2\u5165\u5916\u94fe\u56fe\u7247\uff0c\u6216\u4e0a\u4f20\u672c\u5730\u56fe\u7247\u5230\u6587\u6863\u4e2d\u3002</li> <li>\u53ef\u4e0a\u4f20\u7684\u5355\u5f20\u56fe\u7247\u6700\u592720M\uff0c\u652f\u6301PNG\u3001JPG\u683c\u5f0f\u3002</li> <li>\u82e5\u6709\u5176\u4ed6\u7591\u95ee\uff0c\u6b22\u8fce\u54a8\u8be2\u5b98\u7f51\u5728\u7ebf\u5ba2\u670d\u3002</li> </ul>"},{"location":"%E7%AE%97%E6%B3%95/%E5%B9%B3%E8%A1%A1%E6%A0%91%E4%B8%8D%E5%A5%BD%E5%86%99%EF%BC%9F%E7%BA%BF%E6%AE%B5%E6%A0%91%E6%9D%A5%E6%9B%BF%E6%8D%A2%EF%BC%81/#welcome-to-the-markdown","title":"Welcome to the Markdown","text":""},{"location":"%E7%AE%97%E6%B3%95/%E5%B9%B3%E8%A1%A1%E6%A0%91%E4%B8%8D%E5%A5%BD%E5%86%99%EF%BC%9F%E7%BA%BF%E6%AE%B5%E6%A0%91%E6%9D%A5%E6%9B%BF%E6%8D%A2%EF%BC%81/#new-feature-insert-pictures-in-your-articles-now","title":"New feature! Insert pictures in your articles now!","text":"<p>You can insert pictures from external links, or upload ones.</p> <p>The maximum size of the picture to upload is 20M. PNG and JPG are better.</p> <p>Have any other questions, please contact our official customer service.</p>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/","title":"\u6a21\u677f","text":"<p>[toc]</p>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_1","title":"\u8d77\u624b","text":"<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\n#define int long long\n#define endl '\\n'\nsigned main() {\n    ios::sync_with_stdio(0);\n    cin.tie(0); cout.tie(0);    \n    return 0;\n}\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_2","title":"\u80cc\u5305\u95ee\u9898","text":""},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#01","title":"01\u80cc\u5305","text":"<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int N = 1010; int dp[N][N];\nint main() {\n    int n, m; cin &gt;&gt; n &gt;&gt; m;\n    for (int i = 1; i &lt;= n; i++) {\n        int v, w; cin &gt;&gt; v &gt;&gt; w;\n        for (int j = 1; j &lt;= m; j++) {\n            if (j &lt; v) dp[i][j] = dp[i - 1][j];\n            else dp[i][j] = max(dp[i - 1][j], dp[i - 1][j - v] + w);\n        }\n    }\n    cout &lt;&lt; dp[n][m]; return 0; }\n</code></pre> <pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int N = 1010; int f[N];\nint main() {\n    int n, m, res = 0; cin &gt;&gt; n &gt;&gt; m;\n    for (int i = 1; i &lt;= n; i++) {\n        int v, w; cin &gt;&gt; v &gt;&gt; w;\n        for (int j = m; j &gt;= v; j--) if (j &gt;= v) f[j] = max(f[j], f[j - v] + w);\n    }\n    for (int j = 0; j &lt;= m; j++) res = max(res, f[j]);\n    cout &lt;&lt; res &lt;&lt; endl; return 0; }\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_3","title":"\u5b8c\u5168\u80cc\u5305","text":"<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nconst int N = 1010; int dp[N];\nint main() {\n    int n, m; cin &gt;&gt; n &gt;&gt; m;\n    for (int i = 1; i &lt;= n; i++) {\n        int v, w; cin &gt;&gt; v &gt;&gt; w;\n        for (int j = v; j &lt;= m; j++) dp[j] = max(dp[j], dp[j - v] + w);\n    }\n    cout &lt;&lt; dp[m]; return 0; }\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_4","title":"\u591a\u91cd\u80cc\u5305","text":"<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std; \ntypedef pair&lt;int, int&gt; PII; const int N = 1010; int v[N], w[N], s[N], f[2 * N]; vector&lt;PII&gt; goods;\nint main() {\n    int n, m; cin &gt;&gt; n &gt;&gt; m;\n    for (int i = 1; i &lt;= n; i++) {\n        cin &gt;&gt; v[i] &gt;&gt; w[i] &gt;&gt; s[i];\n        for (int k = 1; k &lt;= s[i]; k *= 2) { goods.push_back({ k * v[i], k * w[i] }); s[i] -= k; }\n        if (s[i]) goods.push_back({ s[i] * v[i], s[i] * w[i] });\n    }\n    for (auto x : goods) for (int j = m; j &gt;= x.first; j--) f[j] = max(f[j], f[j - x.first] + x.second);\n    cout &lt;&lt; f[m] &lt;&lt; endl; return 0; }\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_5","title":"\u4e8c\u7ef4\u8d39\u7528\u80cc\u5305","text":"<p>\u8f93\u5165\u683c\u5f0f\uff1a\u7b2c\u4e00\u884c\u4e09\u4e2a\u6574\u6570\uff0cN,V,M\uff0c\u7528\u7a7a\u683c\u9694\u5f00\uff0c\u5206\u522b\u8868\u793a\u7269\u54c1\u4ef6\u6570\u3001\u80cc\u5305\u5bb9\u79ef\u548c\u80cc\u5305\u53ef\u627f\u53d7\u7684\u6700\u5927\u91cd\u91cf\u3002\u63a5\u4e0b\u6765\u6709 N\u884c\uff0c\u6bcf\u884c\u4e09\u4e2a\u6574\u6570 vi,mi,wi\uff0c\u7528\u7a7a\u683c\u9694\u5f00\uff0c\u5206\u522b\u8868\u793a\u7b2c i\u4ef6\u7269\u54c1\u7684\u4f53\u79ef\u3001\u91cd\u91cf\u548c\u4ef7\u503c\u3002\u8f93\u51fa\u683c\u5f0f\uff1a\u8f93\u51fa\u4e00\u4e2a\u6574\u6570\uff0c\u8868\u793a\u6700\u5927\u4ef7\u503c\u3002</p> <pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int N = 1010; int n, V, M, f[N][N];\nint main() {\n    cin &gt;&gt; n &gt;&gt; V &gt;&gt; M;\n    for (int i = 0; i &lt; n; i ++) {\n        int v, m, w; cin &gt;&gt; v &gt;&gt; m &gt;&gt; w;\n        //\u4e8c\u7ef4\u80cc\u5305\u7528\u4e8c\u7ef4\u6570\u7ec4\u76f8\u5f53\u4e8e01\u80cc\u5305\u7528\u4e00\u7ef4\u6570\u7ec4\uff0c\u56e0\u6b64\u8981\u5012\u5e8f\u904d\u5386\n        for(int j = V; j &gt;= v; j --) for(int k = M; k &gt;= m; k --) f[j][k] = max(f[j][k], f[j - v][k - m] + w);\n    }\n    cout &lt;&lt; f[V][M] &lt;&lt; endl; return 0; }\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_6","title":"\u80cc\u5305\u95ee\u9898\u6c42\u65b9\u6848\u6570","text":"<p>\u8f93\u5165\u683c\u5f0f\uff1a\u7b2c\u4e00\u884c\u4e24\u4e2a\u6574\u6570\uff0cN\uff0cV\uff0c\u7528\u7a7a\u683c\u9694\u5f00\uff0c\u5206\u522b\u8868\u793a\u7269\u54c1\u6570\u91cf\u548c\u80cc\u5305\u5bb9\u79ef\u3002\u63a5\u4e0b\u6765\u6709 N\u884c\uff0c\u6bcf\u884c\u4e24\u4e2a\u6574\u6570 vi,wi\u7528\u7a7a\u683c\u9694\u5f00\uff0c\u5206\u522b\u8868\u793a\u7b2c i\u4ef6\u7269\u54c1\u7684\u4f53\u79ef\u548c\u4ef7\u503c\u3002\u8f93\u51fa\u683c\u5f0f\uff1a\u8f93\u51fa\u4e00\u4e2a\u6574\u6570\uff0c\u8868\u793a\u65b9\u6848\u6570\u6a21 1e9+7\u7684\u7ed3\u679c\u3002</p> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\nconst int N = 1010, MOD = 1e9 + 7; int f[N], cnt[N];\nint main() {\n    int n, m; cin &gt;&gt; n &gt;&gt; m;\n    for (int j = 0; j &lt;= m; j++) cnt[j] = 1;\n    for (int i = 1; i &lt;= n; i++) {\n        int v, w; cin &gt;&gt; v &gt;&gt; w;\n        for (int j = m; j &gt;= v; j--) {\n            if (f[j] &lt; f[j - v] + w) { f[j] = f[j - v] + w; cnt[j] = cnt[j - v]; }\n            else if (f[j] == f[j - v] + w) { cnt[j] = (cnt[j] + cnt[j - v]) % MOD; }\n        }\n    } cout &lt;&lt; cnt[m]; return 0; }\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_7","title":"\u80cc\u5305\u95ee\u9898\u5177\u4f53\u65b9\u6848","text":"<p>\u8f93\u5165\u683c\u5f0f\uff1a\u7b2c\u4e00\u884c\u4e24\u4e2a\u6574\u6570\uff0cN\uff0cV\uff0c\u7528\u7a7a\u683c\u9694\u5f00\uff0c\u5206\u522b\u8868\u793a\u7269\u54c1\u6570\u91cf\u548c\u80cc\u5305\u5bb9\u79ef\u3002\u63a5\u4e0b\u6765\u6709 N\u884c\uff0c\u6bcf\u884c\u4e24\u4e2a\u6574\u6570 vi,wi\uff0c\u7528\u7a7a\u683c\u9694\u5f00\uff0c\u5206\u522b\u8868\u793a\u7b2ci\u4ef6\u7269\u54c1\u7684\u4f53\u79ef\u548c\u4ef7\u503c\u3002\u8f93\u51fa\u683c\u5f0f\uff1a\u8f93\u51fa\u4e00\u884c\uff0c\u5305\u542b\u82e5\u5e72\u4e2a\u7528\u7a7a\u683c\u9694\u5f00\u7684\u6574\u6570\uff0c\u8868\u793a\u6700\u4f18\u89e3\u4e2d\u6240\u9009\u7269\u54c1\u7684\u7f16\u53f7\u5e8f\u5217\uff0c\u4e14\u8be5\u7f16\u53f7\u5e8f\u5217\u7684\u5b57\u5178\u5e8f\u6700\u5c0f\u3002\u7269\u54c1\u7f16\u53f7\u8303\u56f4\u662f 1\u2026N\u3002</p> <pre><code>#include&lt;iostream&gt;\nusing namespace std;\nconst int N = 1010; int v[N], w[N], f[N][N];\nint main() {\n    int n, m; cin &gt;&gt; n &gt;&gt; m;\n    for (int i = 1; i &lt;= n; i++) cin &gt;&gt; v[i] &gt;&gt; w[i];\n    for (int i = n; i &gt;= 1; i--) {\n        for (int j = 0; j &lt;= m; j++) { f[i][j] = f[i + 1][j]; if (j &gt;= v[i]) f[i][j] = max(f[i][j], f[i + 1][j - v[i]] + w[i]); }\n    }    \n    int j = m;\n    for (int i = 1; i &lt;= n; i++) {\n        if (j &gt;= v[i] &amp;&amp; f[i][j] == f[i + 1][j - v[i]] + w[i]) { cout &lt;&lt; i &lt;&lt; \" \"; j -= v[i]; }\n    } return 0; }\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_8","title":"\u7ebf\u6bb5\u6811","text":""},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#p3373-2","title":"P3373 \u3010\u6a21\u677f\u3011\u7ebf\u6bb5\u6811 2","text":"<p>\u5982\u9898\uff0c\u5df2\u77e5\u4e00\u4e2a\u6570\u5217\uff0c\u4f60\u9700\u8981\u8fdb\u884c\u4e0b\u9762\u4e09\u79cd\u64cd\u4f5c\uff1a</p> <ul> <li>\u5c06\u67d0\u533a\u95f4\u6bcf\u4e00\u4e2a\u6570\u4e58\u4e0a x</li> <li>\u5c06\u67d0\u533a\u95f4\u6bcf\u4e00\u4e2a\u6570\u52a0\u4e0a x</li> <li>\u6c42\u51fa\u67d0\u533a\u95f4\u6bcf\u4e00\u4e2a\u6570\u7684\u548c</li> </ul> <p>\u8f93\u5165\u683c\u5f0f</p> <p>\u7b2c\u4e00\u884c\u5305\u542b\u4e09\u4e2a\u6574\u6570 n,m,p\u3002\u5206\u522b\u8868\u793a\u8be5\u6570\u5217\u6570\u5b57\u7684\u4e2a\u6570\u3001\u64cd\u4f5c\u7684\u603b\u4e2a\u6570\u548c\u6a21\u6570\u3002</p> <p>\u7b2c\u4e8c\u884c\u5305\u542bn\u4e2a\u7528\u7a7a\u683c\u5206\u9694\u7684\u6574\u6570\uff0c\u5176\u4e2d\u7b2c i \u4e2a\u6570\u5b57\u8868\u793a\u6570\u5217\u7b2c i\u9879\u7684\u521d\u59cb\u503c\u3002</p> <p>\u63a5\u4e0b\u6765m\u884c\u6bcf\u884c\u5305\u542b\u82e5\u5e72\u4e2a\u6574\u6570\uff0c\u8868\u793a\u4e00\u4e2a\u64cd\u4f5c\uff0c\u5177\u4f53\u5982\u4e0b\uff1a</p> <p>\u64cd\u4f5c 1\uff1a \u683c\u5f0f\uff1a<code>1 x y k</code> \u542b\u4e49\uff1a\u5c06\u533a\u95f4 [x,y] \u5185\u6bcf\u4e2a\u6570\u4e58\u4e0a k</p> <p>\u64cd\u4f5c 2\uff1a \u683c\u5f0f\uff1a<code>2 x y k</code> \u542b\u4e49\uff1a\u5c06\u533a\u95f4 [x,y] \u5185\u6bcf\u4e2a\u6570\u52a0\u4e0a k</p> <p>\u64cd\u4f5c 3\uff1a \u683c\u5f0f\uff1a<code>3 x y</code> \u542b\u4e49\uff1a\u8f93\u51fa\u533a\u95f4 [x,y] \u5185\u6bcf\u4e2a\u6570\u7684\u548c\u5bf9 p\u53d6\u6a21\u6240\u5f97\u7684\u7ed3\u679c\u3002</p> <p>\u8f93\u51fa\u683c\u5f0f</p> <p>\u8f93\u51fa\u5305\u542b\u82e5\u5e72\u884c\u6574\u6570\uff0c\u5373\u4e3a\u6240\u6709\u64cd\u4f5c 3 \u7684\u7ed3\u679c\u3002</p> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\n#define int long long\nconst int N = 100010; int a[N], mod, n, m;\nstruct Node { int l, r, sum, add, mul; }tr[N * 4];\nvoid pushup(int u) { tr[u].sum = (tr[u &lt;&lt; 1].sum + tr[u &lt;&lt; 1 | 1].sum) % mod; }\nvoid eval(Node&amp; node, int add, int mul) {\n    node.sum = (node.sum * mul + (node.r - node.l + 1) * add) % mod;\n    node.mul = (node.mul * mul) % mod;\n    node.add = (node.add * mul + add) % mod;\n}\nvoid pushdown(int u) {\n    eval(tr[u &lt;&lt; 1], tr[u].add, tr[u].mul);\n    eval(tr[u &lt;&lt; 1 | 1], tr[u].add, tr[u].mul);\n    tr[u].add = 0;\n    tr[u].mul = 1;\n}\nvoid build(int l, int r, int u) {\n    if (l == r) { tr[u] = { l, r, a[l], 0, 1 }; return; }\n    tr[u] = { l, r, 0, 0, 1 };\n    int mid = l + r &gt;&gt; 1;\n    build(l, mid, u &lt;&lt; 1); build(mid + 1, r, u &lt;&lt; 1 | 1); pushup(u);\n}\nint query(int l, int r, int u) {\n    if (tr[u].l &gt;= l &amp;&amp; tr[u].r &lt;= r) { return tr[u].sum; }\n    pushdown(u);\n    int mid = tr[u].l + tr[u].r &gt;&gt; 1, res = 0;\n    if (l &lt;= mid) { res += query(l, r, u &lt;&lt; 1); }\n    if (r &gt; mid) { res += query(l, r, u &lt;&lt; 1 | 1); }\n    return res % mod;\n}\nvoid modify(int l, int r, int add, int mul, int u) {\n    if (tr[u].l &gt;= l &amp;&amp; tr[u].r &lt;= r) { eval(tr[u], add, mul); return; }\n    pushdown(u);\n    int mid = tr[u].l + tr[u].r &gt;&gt; 1;\n    if (l &lt;= mid) { modify(l, r, add, mul, u &lt;&lt; 1); }\n    if (r &gt; mid) { modify(l, r, add, mul, u &lt;&lt; 1 | 1); }\n    pushup(u);\n}\nsigned main() {\n    cin &gt;&gt; n &gt;&gt; m &gt;&gt; mod;\n    for (int i = 1; i &lt;= n; i++) { cin &gt;&gt; a[i]; }\n    build(1, n, 1);\n    while (m--) {\n        int op; cin &gt;&gt; op;\n        if (op == 1) { int l, r, d; cin &gt;&gt; l &gt;&gt; r &gt;&gt; d; modify(l, r, 0, d, 1); }\n        if (op == 2) { int l, r, d; cin &gt;&gt; l &gt;&gt; r &gt;&gt; d; modify(l, r, d, 1, 1); }\n        if (op == 3) { int l, r; cin &gt;&gt; l &gt;&gt; r; cout &lt;&lt; query(l, r, 1) &lt;&lt; '\\n'; }\n    } return 0;\n}\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#p1276","title":"P1276 \u6821\u95e8\u5916\u7684\u6811\uff08\u589e\u5f3a\u7248\uff09","text":"<p>\u6211\u7684\u7406\u89e3\uff1a\u672c\u9898\u6d89\u53ca\u5230\u533a\u95f4\u4fee\u6539\u503c\uff08\u4e0d\u662f\u533a\u95f4\u589e\u52a0\u503c\uff09\u3002</p> <p>\u9898\u76ee\u63cf\u8ff0</p> <p>\u6821\u95e8\u5916\u9a6c\u8def\u4e0a\u672c\u6765\u4ece\u7f16\u53f7 00 \u5230 L\uff0c\u6bcf\u4e00\u7f16\u53f7\u7684\u4f4d\u7f6e\u90fd\u6709\u4e00\u68f5\u6811\u3002\u6709\u780d\u6811\u8005\u6bcf\u6b21\u4ece\u7f16\u53f7 A\u5230 B\u5904\u8fde\u7eed\u780d\u6389\u6bcf\u4e00\u68f5\u6811\uff0c\u5c31\u8fde\u6811\u82d7\u4e5f\u4e0d\u653e\u8fc7\uff08\u8bb0 <code>0 A B</code>\uff0c\u542b A\u548c B\uff09\u3002\u5e78\u8fd0\u7684\u662f\u8fd8\u6709\u690d\u6811\u8005\u6bcf\u6b21\u4ece\u7f16\u53f7 C\u5230 D\u4e2d\u51e1\u662f\u7a7a\u7a74\uff08\u6811\u88ab\u780d\u4e14\u8fd8\u6ca1\u79cd\u4e0a\u6811\u82d7\u6216\u6811\u82d7\u53c8\u88ab\u780d\u6389\uff09\u7684\u5730\u65b9\u90fd\u8865\u79cd\u4e0a\u6811\u82d7\uff08\u8bb0 <code>1 C D</code>\uff0c\u542b C\u548c D\uff09\uff1b\u95ee\u6700\u7ec8\u6821\u95e8\u5916\u7559\u4e0b\u7684\u6811\u82d7\u591a\u5c11\u68f5\uff1f\u690d\u6811\u8005\u79cd\u4e0a\u53c8\u88ab\u780d\u6389\u7684\u6811\u82d7\u6709\u591a\u5c11\u68f5\uff1f</p> <p>\u8f93\u5165\u683c\u5f0f</p> <p>\u7b2c\u4e00\u884c\uff0c\u4e24\u4e2a\u6b63\u6574\u6570 L\u548c N\uff0c\u8868\u793a\u6821\u56ed\u5916\u539f\u6765\u6709 L + 1\u68f5\u6811\uff0c\u5e76\u6709 N\u6b21\u780d\u6811\u6216\u79cd\u6811\u7684\u64cd\u4f5c\u3002</p> <p>\u4ee5\u4e0b N\u884c\uff0c\u6bcf\u884c\u4e09\u4e2a\u6574\u6570\uff0c\u8868\u793a\u780d\u6811\u6216\u690d\u6811\u7684\u6807\u8bb0\u548c\u8303\u56f4\u3002</p> <p>\u8f93\u51fa\u683c\u5f0f</p> <p>\u5171\u4e24\u884c\u3002\u7b2c\u4e00\u884c\u6821\u95e8\u5916\u7559\u4e0b\u7684\u6811\u82d7\u6570\u76ee\uff0c\u7b2c\u4e8c\u884c\u79cd\u4e0a\u53c8\u88ab\u62d4\u6389\u7684\u6811\u82d7\u6570\u76ee\u3002</p> <pre><code>#include &lt;bits/stdc++.h&gt;\n#define int long long\nusing namespace std;\n//value\u8868\u793a\uff1a2\u4e3a\u6811\u82d7 1\u4e3a\u6811\u6728 0\u4e3a\u6ca1\u6709\u6811 -1\u4e3a\u4e0d\u80fd\u5f53\u505a\u6574\u4f53 \u53ef\u4ee5\u7701\u7565\u4e00\u4e2a\u6807\u8bb0 \nstruct Node { int left, right, value; }tr[150000];\nint l, n, ans1, ans2;  // ans1: \u79cd\u4e0a\u53c8\u88ab\u780d\u6389\u7684\u6811\u82d7\u3002 ans2: \u6700\u7ec8\u7559\u4e0b\u7684\u6811\u82d7\u3002\nvoid build(int left, int right, int u) {\n    tr[u].left = left; tr[u].right = right; tr[u].value = 1;\n    if (left == right) return;\n    build(left, (left + right) &gt;&gt; 1, u &lt;&lt; 1); build(((left + right) &gt;&gt; 1) + 1, right, u &lt;&lt; 1 | 1);\n}\nvoid updateCut(int left, int right, int u) {\n    int mid = tr[u].left + tr[u].right &gt;&gt; 1; // \u8ba1\u7b97\u5206\u6bb5\u7684\u4f4d\u7f6e \n    if (tr[u].value != 1 &amp;&amp; tr[u].value != -1) tr[u &lt;&lt; 1].value = tr[u &lt;&lt; 1 | 1].value = tr[u].value; //\u7ee7\u627f \n    if (left &lt;= tr[u].left &amp;&amp; right &gt;= tr[u].right) {\n        if (tr[u].value == 0) return;  //\u6ca1\u6709\u6811\n        if (tr[u].value == 1) tr[u].value = 0; //\u6709\u6811\u6728\u76f4\u63a5\u780d\u6389 \n        if (tr[u].value == 2) {\n            tr[u].value = 0;  //\u6811\u82d7\u4e5f\u8981\u780d \n            ans1 += (tr[u].right - tr[u].left) + 1;  //\u8ba1\u7b97\u79cd\u4e0a\u88ab\u780d\u6389\u7684\u6811\u82d7 \n            ans2 = ans2 - (tr[u].right - tr[u].left + 1);  //\u8ba1\u7b97\u7559\u4e0b\u7684\u6811\u82d7 \n        }\n        if (tr[u].value == -1) {//\u4e0d\u80fd\u4e00\u8d77\u505a\u5c31\u4ea4\u7ed9\u81ea\u5df1\u7684\u5de6\u513f\u5b50\u548c\u53f3\u513f\u5b50\u505a \n            tr[u].value = 0;\n            updateCut(left, (left + right) &gt;&gt; 1, u &lt;&lt; 1);\n            updateCut(((left + right) &gt;&gt; 1) + 1, right, u &lt;&lt; 1 | 1);\n        }\n    }\n    else {\n        if (right &lt;= mid) updateCut(left, right, u &lt;&lt; 1);\n        else if (left &gt; mid) updateCut(left, right, u &lt;&lt; 1 | 1);\n        else { updateCut(left, mid, u &lt;&lt; 1); updateCut(mid + 1, right, u &lt;&lt; 1 | 1); }\n        if (tr[u &lt;&lt; 1].value != tr[u &lt;&lt; 1 | 1].value) tr[u].value = -1;\n        else tr[u].value = tr[u &lt;&lt; 1].value; //\u5224\u65ad\u5de6\u53f3\u513f\u5b50\u662f\u5426\u76f8\u7b49\uff0c\u786e\u5b9a\u662f\u5426\u8981\u6574\u4f53\u4e00\u8d77\u505a \n    }\n}\nvoid updatePlant(int left, int right, int u) {\n    int mid = (tr[u].left + tr[u].right) &gt;&gt; 1;\n    if (tr[u].value != 1 &amp;&amp; tr[u].value != -1) tr[u &lt;&lt; 1].value = tr[u &lt;&lt; 1 | 1].value = tr[u].value; //\u540c\u4e0a \n    if (left == tr[u].left &amp;&amp; right == tr[u].right) {\n        if (tr[u].value == 1 || tr[u].value == 2) return; //\u6811\u6728\u4e0d\u8981\u79cd\uff01 \n        if (tr[u].value == 0) {\n            tr[u].value = 2;\n            ans2 += (tr[u].right - tr[u].left) + 1; //\u8ba1\u7b97\u6811\u82d7\u7684\u4e2a\u6570 \n        }\n        if (tr[u].value == -1) { updatePlant(left, (left + right) &gt;&gt; 1, u &lt;&lt; 1); updatePlant(((left + right) &gt;&gt; 1) + 1, right, u &lt;&lt; 1 | 1); }\n    }\n    else {\n        if (right &lt;= mid) updatePlant(left, right, u &lt;&lt; 1);\n        else if (left &gt; mid) updatePlant(left, right, u &lt;&lt; 1 | 1);\n        else { updatePlant(left, mid, u &lt;&lt; 1); updatePlant(mid + 1, right, u &lt;&lt; 1 | 1); }\n        if (tr[u &lt;&lt; 1].value != tr[u &lt;&lt; 1 | 1].value) tr[u].value = -1;\n        else tr[u].value = tr[u &lt;&lt; 1].value; //\u540c\u4e0a \n    }\n}\nsigned main() {\n    cin &gt;&gt; l &gt;&gt; n;\n    build(0, l, 1);\n    for (int i = 1; i &lt;= n; i++) {\n        int c, a, b; cin &gt;&gt; c &gt;&gt; a &gt;&gt; b;\n        if (a &gt; b) swap(a, b); if (c == 0) updateCut(a, b, 1); else updatePlant(a, b, 1);\n    }\n    cout &lt;&lt; ans2 &lt;&lt; endl &lt;&lt; ans1; return 0;\n}\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_9","title":"\u524d\u7f00\u6811","text":"<p>\u6211\u7684\u7406\u89e3\uff1a\u592a\u7b80\u5355\uff0c\u76f4\u63a5\u770b\u4ee3\u7801</p> <pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nstruct Node { Node* nodes[26]; int cnt; };\nNode* root = new Node();\nvoid insert(string&amp; s) {\n    Node* p = root;\n    for (int i = 0; i &lt; s.size(); i++) {\n        int idx = s[i] - 'a';\n        if (p-&gt;nodes[idx] == nullptr) { p-&gt;nodes[idx] = new Node(); }\n        p = p-&gt;nodes[idx];\n        if (i == s.size() - 1) { p-&gt;cnt++; }\n    }\n}\nint query(string&amp; s) {\n    Node* p = root; bool flag = true;\n    for (int i = 0; i &lt; s.size(); i++) {\n        int idx = s[i] - 'a';\n        if (p-&gt;nodes[idx] == nullptr) { flag = false; break; }\n        p = p-&gt;nodes[idx];\n    }\n    if (flag) { return p-&gt;cnt; } else { return 0; }\n}\nint main() {\n    int n; cin &gt;&gt; n;\n    for (int i = 0; i &lt; n; i++) {\n        string op, s; cin &gt;&gt; op &gt;&gt; s;\n        if (op == \"I\") { insert(s); }\n        if (op == \"Q\") { cout &lt;&lt; query(s) &lt;&lt; endl; }\n    }\n    return 0;\n}\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#dfs","title":"DFS\u5e8f","text":""},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#4310-dfs","title":"4310. \u6811\u7684DFS","text":"<p>\u7ed9\u5b9a\u4e00\u68f5 n \u4e2a\u8282\u70b9\u7684\u6811\u3002</p> <p>\u8282\u70b9\u7684\u7f16\u53f7\u4e3a 1\u223cn\uff0c\u5176\u4e2d1\u53f7\u8282\u70b9\u4e3a\u6839\u8282\u70b9\uff0c\u6bcf\u4e2a\u8282\u70b9\u7684\u7f16\u53f7\u90fd\u5927\u4e8e\u5176\u7236\u8282\u70b9\u7684\u7f16\u53f7\u3002</p> <p>\u73b0\u5728\uff0c\u4f60\u9700\u8981\u56de\u7b54q\u4e2a\u8be2\u95ee\u3002</p> <p>\u6bcf\u4e2a\u8be2\u95ee\u7ed9\u5b9a\u4e24\u4e2a\u6574\u6570 ui, ki\u3002</p> <p>\u6211\u4eec\u5e0c\u671b\u4f60\u7528DFS\u7b97\u6cd5\u6765\u904d\u5386\u6839\u8282\u70b9\u4e3a ui\u7684\u5b50\u6811\u3002</p> <p>\u6211\u4eec\u89c4\u5b9a\uff0c\u5f53\u904d\u5386\uff08\u6216\u56de\u6eaf\uff09\u5230\u67d0\u4e00\u8282\u70b9\u65f6\uff0c\u4e0b\u4e00\u4e2a\u904d\u5386\u7684\u76ee\u6807\u5e94\u8be5\u662f\u5b83\u7684\u672a\u7ecf\u904d\u5386\u7684\u5b50\u8282\u70b9\u4e2d\u7f16\u53f7\u6700\u5c0f\u7684\u90a3\u4e00\u4e2a\u5b50\u8282\u70b9\u3002</p> <p>\u8f93\u5165\u683c\u5f0f</p> <p>\u7b2c\u4e00\u884c\u5305\u542b\u4e24\u4e2a\u6574\u6570 n,q\u3002</p> <p>\u7b2c\u4e8c\u884c\u5305\u542b n\u22121n\u22121 \u4e2a\u6574\u6570 p2,p3,\u2026,pn\uff0c\u5176\u4e2dpi\u8868\u793a\u7b2ci\u53f7\u8282\u70b9\u7684\u7236\u8282\u70b9\u7684\u7f16\u53f7\u3002</p> <p>\u63a5\u4e0b\u6765q\u884c\uff0c\u6bcf\u884c\u5305\u542b\u4e24\u4e2a\u6574\u6570 ui,ki\uff0c\u8868\u793a\u4e00\u7ec4\u8be2\u95ee\u3002</p> <p>\u8f93\u51fa\u683c\u5f0f</p> <p>\u5171q\u884c\uff0c\u6bcf\u7ec4\u8be2\u95ee\u8f93\u51fa\u4e00\u884c\u4e00\u4e2a\u6574\u6570\u8868\u793a\u7b2cki\u4e2a\u88ab\u904d\u5386\u5230\u7684\u8282\u70b9\u7684\u7f16\u53f7\u3002</p> <p>\u5982\u679c\u7b2cki\u4e2a\u88ab\u904d\u5386\u5230\u7684\u8282\u70b9\u4e0d\u5b58\u5728\uff0c\u5219\u8f93\u51fa\u22121\u3002</p> <pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int N = 200010;\nvector&lt;int&gt; vers[N];\nint n, q, sz[N], st[N], ntoi[N], iton[N], idx;\nint dfs(int u) {\n    iton[idx++] = u; sz[u] = 1; st[u] = true;\n    for (int i = 0; i &lt; vers[u].size(); i++) {\n        int ne = vers[u][i];\n        if (!st[ne]) { sz[u] += dfs(ne); }\n    }\n    return sz[u];\n}\nint main() {\n    cin &gt;&gt; n &gt;&gt; q;\n    for (int i = 2; i &lt;= n; i++) {\n        int p; cin &gt;&gt; p; vers[p].push_back(i); vers[i].push_back(p);\n    }\n    sz[1] = dfs(1);\n    for (int i = 1; i &lt;= idx; i++) { int num = iton[i]; ntoi[num] = i; }\n    while (q--) {\n        int u, k; cin &gt;&gt; u &gt;&gt; k;\n        if (sz[u] &lt; k) cout &lt;&lt; -1 &lt;&lt; '\\n'; else cout &lt;&lt; iton[ntoi[u] + k - 1] &lt;&lt; '\\n';\n    } return 0;\n}\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_10","title":"\u5e73\u8861\u6811","text":"<p>\u60a8\u9700\u8981\u5199\u4e00\u79cd\u6570\u636e\u7ed3\u6784\uff08\u53ef\u53c2\u8003\u9898\u76ee\u6807\u9898\uff09\uff0c\u6765\u7ef4\u62a4\u4e00\u4e9b\u6570\uff0c\u5176\u4e2d\u9700\u8981\u63d0\u4f9b\u4ee5\u4e0b\u64cd\u4f5c\uff1a</p> <ol> <li>\u63d2\u5165\u6570\u503c x\u3002</li> <li>\u5220\u9664\u6570\u503c x(\u82e5\u6709\u591a\u4e2a\u76f8\u540c\u7684\u6570\uff0c\u5e94\u53ea\u5220\u9664\u4e00\u4e2a)\u3002</li> <li>\u67e5\u8be2\u6570\u503c x \u7684\u6392\u540d(\u82e5\u6709\u591a\u4e2a\u76f8\u540c\u7684\u6570\uff0c\u5e94\u8f93\u51fa\u6700\u5c0f\u7684\u6392\u540d)\u3002</li> <li>\u67e5\u8be2\u6392\u540d\u4e3a x \u7684\u6570\u503c\u3002</li> <li>\u6c42\u6570\u503c x \u7684\u524d\u9a71(\u524d\u9a71\u5b9a\u4e49\u4e3a\u5c0f\u4e8e x \u7684\u6700\u5927\u7684\u6570)\u3002</li> <li>\u6c42\u6570\u503c x \u7684\u540e\u7ee7(\u540e\u7ee7\u5b9a\u4e49\u4e3a\u5927\u4e8e x \u7684\u6700\u5c0f\u7684\u6570)\u3002</li> </ol> <pre><code>#include &lt;ext/pb_ds/assoc_container.hpp&gt;\nusing namespace __gnu_pbds;\n#include &lt;bits/stdc++.h&gt;\nusing namespace std;\ntemplate &lt;typename T&gt;\nusing ordered_multiset = tree&lt;T, null_type, less_equal&lt;T&gt;, rb_tree_tag, tree_order_statistics_node_update&gt;;\nint main() {\n    ordered_multiset&lt;int&gt; st; int n; cin &gt;&gt; n;\n    while (n--) {\n        int op, x;\n        cin &gt;&gt; op &gt;&gt; x;\n        if (op == 1) st.insert(x);\n        if (op == 2) st.erase(st.upper_bound(x));\n        if (op == 3) cout &lt;&lt; st.order_of_key(x) + 1 &lt;&lt; endl;\n        if (op == 4) cout &lt;&lt; *st.find_by_order(x - 1) &lt;&lt; endl;\n        if (op == 5) cout &lt;&lt; *--st.upper_bound(x) &lt;&lt; endl;\n        if (op == 6) cout &lt;&lt; *st.lower_bound(x) &lt;&lt; endl;\n    } return 0;\n}\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_11","title":"\u6700\u77ed\u8def","text":""},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#dijkstra","title":"dijkstra\u5806\u4f18\u5316\u7248","text":"<p>\u56fe\u4e2d\uff0cdijkstra\u7b97\u6cd5\u53ef\u4ee5\u5feb\u901f\u6c42\u51fa\u4e00\u4e2a\u70b9\u5230\u5176\u4f59\u70b9\u7684\u6700\u77ed\u8def\u5f84\u3002</p> <pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\ntypedef pair&lt;int, int&gt; PII;\nconst int N = 150010;\nvector&lt;int&gt; vers[N], edges[N]; int n, m, d[N]; bool st[N];\nvoid add(int a, int b, int c) { vers[a].push_back(b); edges[a].push_back(c); }\nvoid dijkstra() {\n    memset(d, 0x3f, sizeof d); priority_queue&lt;PII, vector&lt;PII&gt;, greater&lt;PII&gt; &gt; heap;\n    d[1] = 0; heap.push({ 0, 1 });\n    while (heap.size()) {\n        PII t = heap.top(); heap.pop();\n        int x = t.second; if (st[x]) continue; st[x] = true;\n        for (int i = 0; i &lt; vers[x].size(); i++) {\n            int y = vers[x][i], w = edges[x][i];\n            if (d[y] &gt; d[x] + w) { d[y] = d[x] + w; heap.push({ d[y], y }); }\n        }\n    }\n}\nint main() {\n    cin &gt;&gt; n &gt;&gt; m;\n    while (m--) { int a, b, c; cin &gt;&gt; a &gt;&gt; b &gt;&gt; c; add(a, b, c); }\n    dijkstra();\n    if (d[n] == 0x3f3f3f3f) cout &lt;&lt; -1 &lt;&lt; '\\n';\n    else cout &lt;&lt; d[n] &lt;&lt; '\\n'; return 0;\n}\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#floyd","title":"floyd\u7b97\u6cd5","text":"<p>O(N^3)\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u6c42\u51fa\u56fe\u4e2d\u4efb\u610f\u4e24\u70b9\u7684\u6700\u77ed\u8def\u5f84\u3002</p> <pre><code>#include&lt;iostream&gt;\nusing namespace std;\nconst int N = 210, INF = 0x3f3f3f3f; int dist[N][N], n, m, k;\nvoid floyd() {\n    for (int k = 1; k &lt;= n; k++)\n        for (int i = 1; i &lt;= n; i++)\n            for (int j = 1; j &lt;= n; j++)\n                dist[i][j] = min(dist[i][j], dist[i][k] + dist[k][j]);\n}\nint main() {\n    cin &gt;&gt; n &gt;&gt; m &gt;&gt; k;\n    for (int i = 1; i &lt;= n; i++) {\n        for (int j = 1; j &lt;= n; j++) {\n            if (i == j) { dist[i][j] = 0; }\n            else { dist[i][j] = INF; }\n        }\n    }\n    for (int i = 0; i &lt; m; i++) {\n        int x, y, w; cin &gt;&gt; x &gt;&gt; y &gt;&gt; w;\n        dist[x][y] = min(dist[x][y], w);\n    }\n    floyd();\n    for (int i = 0; i &lt; k; i++) {\n        int x, y; cin &gt;&gt; x &gt;&gt; y;\n        if (dist[x][y] &gt; INF / 2) { cout &lt;&lt; \"impossible\" &lt;&lt; endl; }\n        else { cout &lt;&lt; dist[x][y] &lt;&lt; endl; }\n    }\n    return 0;\n}\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#spfa","title":"SPFA","text":"<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int N = 100010, INF = 0x3f3f3f3f; int e[N], ne[N], w[N], h[N], idx, dist[N]; bool st[N];\nvoid add(int a, int b, int c) { e[idx] = b; ne[idx] = h[a]; w[idx] = c; h[a] = idx++; }\nvoid spfa() {\n    dist[1] = 0; st[1] = true; queue&lt;int&gt; q; q.push(1);\n    while (q.size()) {\n        int t = q.front(); q.pop(); st[t] = false;\n        for (int i = h[t]; i != -1; i = ne[i]) {\n            int j = e[i];\n            if (dist[j] &gt; dist[t] + w[i]) {\n                dist[j] = dist[t] + w[i];\n                if (!st[j]) { st[j] = true; q.push(j); }\n            }\n        }\n    }\n}\nint main() {\n    memset(h, -1, sizeof h); memset(dist, 0x3f, sizeof dist);\n    int n, m; cin &gt;&gt; n &gt;&gt; m;\n    while (m--) { int a, b, c; cin &gt;&gt; a &gt;&gt; b &gt;&gt; c; add(a, b, c); }\n    spfa();\n    if (dist[n] == INF) cout &lt;&lt; \"impossible\"; else cout &lt;&lt; dist[n]; return 0;\n}\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_12","title":"\u5e76\u67e5\u96c6","text":""},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#837","title":"837. \u8fde\u901a\u5757\u4e2d\u70b9\u7684\u6570\u91cf","text":"<p>\u7ed9\u5b9a\u4e00\u4e2a\u5305\u542bn\u4e2a\u70b9\uff08\u7f16\u53f7\u4e3a1\u223cn\uff09\u7684\u65e0\u5411\u56fe\uff0c\u521d\u59cb\u65f6\u56fe\u4e2d\u6ca1\u6709\u8fb9\u3002</p> <p>\u73b0\u5728\u8981\u8fdb\u884cm\u4e2a\u64cd\u4f5c\uff0c\u64cd\u4f5c\u5171\u6709\u4e09\u79cd\uff1a</p> <ol> <li><code>C a b</code>\uff0c\u5728\u70b9a\u548c\u70b9b\u4e4b\u95f4\u8fde\u4e00\u6761\u8fb9\uff0ca\u548cb\u53ef\u80fd\u76f8\u7b49\uff1b</li> <li><code>Q1 a b</code>\uff0c\u8be2\u95ee\u70b9a\u548c\u70b9b\u662f\u5426\u5728\u540c\u4e00\u4e2a\u8fde\u901a\u5757\u4e2d\uff0ca\u548cb\u53ef\u80fd\u76f8\u7b49\uff1b</li> <li><code>Q2 a</code>\uff0c\u8be2\u95ee\u70b9a\u6240\u5728\u8fde\u901a\u5757\u4e2d\u70b9\u7684\u6570\u91cf\uff1b</li> </ol> <p>\u8f93\u5165\u683c\u5f0f</p> <p>\u7b2c\u4e00\u884c\u8f93\u5165\u6574\u6570n\u548cm\u3002\u63a5\u4e0b\u6765m\u884c\uff0c\u6bcf\u884c\u5305\u542b\u4e00\u4e2a\u64cd\u4f5c\u6307\u4ee4\uff0c\u6307\u4ee4\u4e3a <code>C a b</code>\uff0c<code>Q1 a b</code> \u6216 <code>Q2 a</code> \u4e2d\u7684\u4e00\u79cd\u3002</p> <p>\u8f93\u51fa\u683c\u5f0f</p> <p>\u5bf9\u4e8e\u6bcf\u4e2a\u8be2\u95ee\u6307\u4ee4 <code>Q1 a b</code>\uff0c\u5982\u679c aa \u548c bb \u5728\u540c\u4e00\u4e2a\u8fde\u901a\u5757\u4e2d\uff0c\u5219\u8f93\u51fa <code>Yes</code>\uff0c\u5426\u5219\u8f93\u51fa <code>No</code>\u3002</p> <p>\u5bf9\u4e8e\u6bcf\u4e2a\u8be2\u95ee\u6307\u4ee4 <code>Q2 a</code>\uff0c\u8f93\u51fa\u4e00\u4e2a\u6574\u6570\u8868\u793a\u70b9 aa \u6240\u5728\u8fde\u901a\u5757\u4e2d\u70b9\u7684\u6570\u91cf\u3002\u6bcf\u4e2a\u7ed3\u679c\u5360\u4e00\u884c\u3002</p> <pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int N = 100010; int p[N], g[N];\nint find(int x) { if (x != p[x]) p[x] = find(p[x]); return p[x]; }\nint main() {\n    int n, m; cin &gt;&gt; n &gt;&gt; m;\n    for (int i = 1; i &lt;= n; i++) { p[i] = i; g[i] = 1; }\n    while (m--) {\n        string s; cin &gt;&gt; s;\n        if (s == \"C\") {\n            int a, b; cin &gt;&gt; a &gt;&gt; b;\n            if (find(a) != find(b)) { g[find(b)] += g[find(a)]; p[find(a)] = find(b); }\n        }\n        else if (s == \"Q1\") {\n            int a, b; cin &gt;&gt; a &gt;&gt; b;\n            if (find(a) != find(b)) { cout &lt;&lt; \"No\" &lt;&lt; endl; }\n            else { cout &lt;&lt; \"Yes\" &lt;&lt; endl; }\n        }\n        else { int x; cin &gt;&gt; x; cout &lt;&lt; g[find(x)] &lt;&lt; endl; }\n    } return 0;\n}\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_13","title":"\u62d3\u6251\u6392\u5e8f","text":""},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_14","title":"\u53ef\u8fbe\u6027\u7edf\u8ba1","text":"<p>\u7ed9\u5b9a\u4e00\u5f20N\u4e2a\u70b9M\u6761\u8fb9\u7684\u6709\u5411\u65e0\u73af\u56fe\uff0c\u5206\u522b\u7edf\u8ba1\u4ece\u6bcf\u4e2a\u70b9\u51fa\u53d1\u80fd\u591f\u5230\u8fbe\u7684\u70b9\u7684\u6570\u91cf\u3002</p> <p>\u8f93\u5165\u683c\u5f0f</p> <p>\u7b2c\u4e00\u884c\u4e24\u4e2a\u6574\u6570N,M\u63a5\u4e0b\u6765M\u884c\u6bcf\u884c\u4e24\u4e2a\u6574\u6570 x,y\u8868\u793a\u4ecex\u5230y\u7684\u4e00\u6761\u6709\u5411\u8fb9\u3002</p> <p>\u8f93\u51fa\u683c\u5f0f</p> <p>\u8f93\u51fa\u5171N\u884c\uff0c\u8868\u793a\u6bcf\u4e2a\u70b9\u80fd\u591f\u5230\u8fbe\u7684\u70b9\u7684\u6570\u91cf\u3002</p> <p>\u6570\u636e\u8303\u56f4</p> <p>1\u2264N,M\u226430000</p> <pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int N = 30010; int d[N], q[N], hh, tt = -1, sorted_idx[N], n, m, idx;\nvector&lt;int&gt; vers[N], res;\nbitset&lt;N&gt; f[N];  // \u524d\u4e00\u4e2a&lt;N&gt;\u662f\u7b2c\u4e00\u7ef4\u6570\u7ec4\uff0c\u540e\u4e00\u4e2a[N]\u662f\u7b2c\u4e8c\u7ef4\u6570\u7ec4\u3002\nvoid topsort() {  // \u8fd9\u4e2a\u51fd\u6570\u662f\u62d3\u6251\u6392\u5e8f\u7684\u6240\u6709\u5b9e\u73b0\uff0c\u5305\u542b\u53d8\u91cfd,q,hh,tt,sorted_idx,idx\u3002\n    for (int i = 1; i &lt;= n; i++) { if (!d[i]) { q[++tt] = i; sorted_idx[idx++] = i; } }\n    while (hh &lt;= tt) {\n        int t = q[hh++];\n        for (int i = 0; i &lt; vers[t].size(); i++) {\n            int ne = vers[t][i];\n            if (--d[ne] == 0) { q[++tt] = ne; sorted_idx[idx++] = ne; }\n        }\n    }\n}\nint main() {\n    cin &gt;&gt; n &gt;&gt; m;\n    while (m--) { int a, b; cin &gt;&gt; a &gt;&gt; b; vers[a].push_back(b); d[b]++; }\n    topsort();\n    for (int i = idx - 1; i &gt;= 0; i--) {\n        int id = sorted_idx[i]; f[id][id] = 1;\n        for (int j = 0; j &lt; vers[id].size(); j++) {\n            int ne_idx = vers[id][j];\n            f[id] |= f[ne_idx];\n        }\n    }\n    for (int i = 1; i &lt;= n; i++) cout &lt;&lt; f[i].count() &lt;&lt; endl; return 0;\n}\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_15","title":"\u4e8c\u5206\u56fe","text":""},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_16","title":"\u67d3\u8272\u6cd5\u5224\u5b9a\u4e8c\u5206\u56fe","text":"<p>\u7ed9\u5b9a\u4e00\u4e2an\u4e2a\u70b9m\u6761\u8fb9\u7684\u65e0\u5411\u56fe\uff0c\u56fe\u4e2d\u53ef\u80fd\u5b58\u5728\u91cd\u8fb9\u548c\u81ea\u73af\u3002</p> <p>\u8bf7\u4f60\u5224\u65ad\u8fd9\u4e2a\u56fe\u662f\u5426\u662f\u4e8c\u5206\u56fe\u3002</p> <p>\u8f93\u5165\u683c\u5f0f</p> <p>\u7b2c\u4e00\u884c\u5305\u542b\u4e24\u4e2a\u6574\u6570n\u548cm\u3002</p> <p>\u63a5\u4e0b\u6765m\u884c\uff0c\u6bcf\u884c\u5305\u542b\u4e24\u4e2a\u6574\u6570u\u548c v\uff0c\u8868\u793a\u70b9u\u548c\u70b9v\u4e4b\u95f4\u5b58\u5728\u4e00\u6761\u8fb9\u3002</p> <p>\u8f93\u51fa\u683c\u5f0f</p> <p>\u5982\u679c\u7ed9\u5b9a\u56fe\u662f\u4e8c\u5206\u56fe\uff0c\u5219\u8f93\u51fa <code>Yes</code>\uff0c\u5426\u5219\u8f93\u51fa <code>No</code>\u3002</p> <pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int N = 200010; int e[N], ne[N], h[N], idx, color[N]; bool res = true;\nvoid add(int a, int b) { e[idx] = b; ne[idx] = h[a]; h[a] = idx++; }\nvoid dfs(int u, int col) {\n    color[u] = col;\n    for (int i = h[u]; i != -1; i = ne[i]) {\n        if (!color[e[i]]) dfs(e[i], 3 - col);\n        else if (color[e[i]] == col) { res = false; return; }\n    }\n}\nint main() {\n    memset(h, -1, sizeof h); int n, m; cin &gt;&gt; n &gt;&gt; m;\n    while (m--) { int a, b; cin &gt;&gt; a &gt;&gt; b; add(a, b); add(b, a); }\n    for (int i = 1; i &lt;= n; i++) {\n        if (!color[i]) { dfs(i, 1); }\n        if (!res) break;\n    }\n    if (res) cout &lt;&lt; \"Yes\";\n    else cout &lt;&lt; \"No\"; return 0;\n}\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_17","title":"\u4e8c\u5206\u56fe\u7684\u6700\u5927\u5339\u914d","text":"<p>\u7ed9\u5b9a\u4e00\u4e2a\u4e8c\u5206\u56fe\uff0c\u5176\u4e2d\u5de6\u534a\u90e8\u5305\u542bn1\u4e2a\u70b9\uff08\u7f16\u53f71\u223cn1\uff09\uff0c\u53f3\u534a\u90e8\u5305\u542bn2\u4e2a\u70b9\uff08\u7f16\u53f71\u223cn\uff09\uff0c\u4e8c\u5206\u56fe\u5171\u5305\u542bm\u6761\u8fb9\u3002</p> <p>\u6570\u636e\u4fdd\u8bc1\u4efb\u610f\u4e00\u6761\u8fb9\u7684\u4e24\u4e2a\u7aef\u70b9\u90fd\u4e0d\u53ef\u80fd\u5728\u540c\u4e00\u90e8\u5206\u4e2d\u3002</p> <p>\u8bf7\u4f60\u6c42\u51fa\u4e8c\u5206\u56fe\u7684\u6700\u5927\u5339\u914d\u6570\u3002</p> <p>\u8f93\u5165\u683c\u5f0f</p> <p>\u7b2c\u4e00\u884c\u5305\u542b\u4e09\u4e2a\u6574\u6570n1\u3001n2\u548cm\u3002</p> <p>\u63a5\u4e0b\u6765m\u884c\uff0c\u6bcf\u884c\u5305\u542b\u4e24\u4e2a\u6574\u6570u\u548cv\uff0c\u8868\u793a\u5de6\u534a\u90e8\u70b9\u96c6\u4e2d\u7684\u70b9u\u548c\u53f3\u534a\u90e8\u70b9\u96c6\u4e2d\u7684\u70b9v\u4e4b\u95f4\u5b58\u5728\u4e00\u6761\u8fb9\u3002</p> <p>\u8f93\u51fa\u683c\u5f0f</p> <p>\u8f93\u51fa\u4e00\u4e2a\u6574\u6570\uff0c\u8868\u793a\u4e8c\u5206\u56fe\u7684\u6700\u5927\u5339\u914d\u6570\u3002</p> <pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int N = 510, M = 100010; int e[M], ne[M], h[N], idx, match[N]; bool st[N];\nvoid add(int a, int b) { e[idx] = b; ne[idx]= h[a]; h[a] = idx++; }\nbool find(int x) {\n    for (int i = h[x]; i != -1; i = ne[i]) {\n        if (!st[e[i]]) {\n            st[e[i]] = true;\n            if (!match[e[i]]) { match[e[i]] = x; return true; }\n            else if (match[e[i]] &amp;&amp; find(match[e[i]])) { match[e[i]] = x; return true; }\n        }\n    }\n    return false;\n}\nint main() {\n    memset(h, -1, sizeof h);\n    int n1, n2, m, res = 0; cin &gt;&gt; n1 &gt;&gt; n2 &gt;&gt; m;\n    while (m--) { int u, v; cin &gt;&gt; u &gt;&gt; v; add(u, v); }\n    for (int i = 1; i &lt;= n1; i++) { memset(st, false, sizeof st); if (find(i)) res++; }\n    cout &lt;&lt; res; return 0;\n}\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_18","title":"\u6700\u8fd1\u516c\u5171\u7956\u5148","text":"<p>\u7ed9\u5b9a\u4e00\u68f5\u5305\u542bn\u4e2a\u8282\u70b9\u7684\u6709\u6839\u65e0\u5411\u6811\uff0c\u8282\u70b9\u7f16\u53f7\u4e92\u4e0d\u76f8\u540c\uff0c\u4f46\u4e0d\u4e00\u5b9a\u662f1\u223cn\u3002</p> <p>\u6709m\u4e2a\u8be2\u95ee\uff0c\u6bcf\u4e2a\u8be2\u95ee\u7ed9\u51fa\u4e86\u4e00\u5bf9\u8282\u70b9\u7684\u7f16\u53f7x\u548cy\uff0c\u8be2\u95eex\u4e0ey\u7684\u7956\u5b59\u5173\u7cfb\u3002</p> <p>\u8f93\u5165\u683c\u5f0f</p> <p>\u8f93\u5165\u7b2c\u4e00\u884c\u5305\u62ec\u4e00\u4e2a\u6574\u6570 \u8868\u793a\u8282\u70b9\u4e2a\u6570\uff1b</p> <p>\u63a5\u4e0b\u6765n\u884c\u6bcf\u884c\u4e00\u5bf9\u6574\u6570a\u548cb\uff0c\u8868\u793aa\u548cb\u4e4b\u95f4\u6709\u4e00\u6761\u65e0\u5411\u8fb9\u3002\u5982\u679cb\u662f\u22121\uff0c\u90a3\u4e48a\u5c31\u662f\u6811\u7684\u6839\uff1b</p> <p>\u7b2cn+2\u884c\u662f\u4e00\u4e2a\u6574\u6570m\u8868\u793a\u8be2\u95ee\u4e2a\u6570\uff1b</p> <p>\u63a5\u4e0b\u6765m\u884c\uff0c\u6bcf\u884c\u4e24\u4e2a\u4e0d\u540c\u7684\u6b63\u6574\u6570x\u548cy\uff0c\u8868\u793a\u4e00\u4e2a\u8be2\u95ee\u3002</p> <p>\u8f93\u51fa\u683c\u5f0f</p> <p>\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u8be2\u95ee\uff0c\u82e5x\u662fy\u7684\u7956\u5148\u5219\u8f93\u51fa1\uff0c\u82e5y\u662fx\u7684\u7956\u5148\u5219\u8f93\u51fa2\uff0c\u5426\u5219\u8f93\u51fa0\u3002</p> <pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int N = 4e4 + 10; int n, s, dep[N], fa[N][20]; vector&lt;int&gt; vers[N];\nvoid dfs(int u, int father) {\n    dep[u] = dep[father] + 1;\n    fa[u][0] = father;  // u\u7ed3\u70b9\u5f80\u4e0a\u8d702^0\u6b65\u7684\u7956\u5148\u662ffather\n    for (int i = 1; i &lt;= 19; i++) { fa[u][i] = fa[fa[u][i - 1]][i - 1]; }\n    for (int&amp; v : vers[u]) { if (v != father) { dfs(v, u); } }\n}\nint lca(int a, int b) {\n    bool hasSwap = false;\n    if (dep[a] &lt; dep[b]) swap(a, b), hasSwap = true;\n    for (int i = 19; i &gt;= 0; i--) {  //\u5fc5\u987b\u5012\u7740\u904d\u5386\n        if (dep[fa[a][i]] &gt;= dep[b]) { a = fa[a][i]; }\n    }\n    if (a == b) { if (hasSwap) return 1; else return 2; }\n    return 0;\n}\nint main() {\n    cin &gt;&gt; n;\n    for (int i = 0; i &lt; n; i++) {\n        int a, b; cin &gt;&gt; a &gt;&gt; b;\n        if (b == -1) s = a; else vers[a].push_back(b), vers[b].push_back(a);\n    }\n    dfs(s, 0);\n    int m; cin &gt;&gt; m;\n    while (m--) { int a, b; cin &gt;&gt; a &gt;&gt; b; cout &lt;&lt; lca(a, b) &lt;&lt; endl; } return 0;\n}\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#kmp","title":"KMP","text":"<p>\u5047\u5b9a\u6709\u5b57\u7b26\u4e32A\u548cB\u3002KMP\u80fd\u5728O(N)\u7684\u65f6\u95f4\u5185\u6c42\u5f97\u5b57\u7b26\u4e32A\u4e2d\u6240\u6709\u4ee5\u7b2c1\u4e2a\u5b57\u7b26\u5f00\u59cb\u7684\u5b50\u4e32\u5728\u5b57\u7b26\u4e32B\u4e2d\u7684\u6700\u5927\u5339\u914d\u957f\u5ea6\u3002</p>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#kmp_1","title":"KMP\u5b57\u7b26\u4e32","text":"<p>\u7ed9\u5b9a\u4e00\u4e2a\u5b57\u7b26\u4e32 S\uff0c\u4ee5\u53ca\u4e00\u4e2a\u6a21\u5f0f\u4e32 P\uff0c\u6240\u6709\u5b57\u7b26\u4e32\u4e2d\u53ea\u5305\u542b\u5927\u5c0f\u5199\u82f1\u6587\u5b57\u6bcd\u4ee5\u53ca\u963f\u62c9\u4f2f\u6570\u5b57\u3002</p> <p>\u6a21\u5f0f\u4e32 P \u5728\u5b57\u7b26\u4e32 S \u4e2d\u591a\u6b21\u4f5c\u4e3a\u5b50\u4e32\u51fa\u73b0\u3002</p> <p>\u6c42\u51fa\u6a21\u5f0f\u4e32 P \u5728\u5b57\u7b26\u4e32 S \u4e2d\u6240\u6709\u51fa\u73b0\u7684\u4f4d\u7f6e\u7684\u8d77\u59cb\u4e0b\u6807\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nconst int N = 1000010;\nint ne[N];\nint main() {\n    int n, m;\n    string small, big;\n    cin &gt;&gt; m &gt;&gt; small &gt;&gt; n &gt;&gt; big;\n    small = ' ' + small, big = ' ' + big;\n\n    for (int i = 2, j = 0; i &lt;= m; i++) {\n        while (j &amp;&amp; small[i] != small[j + 1]) j = ne[j];\n        if (small[i] == small[j + 1]) j++;\n        ne[i] = j;\n    }\n\n    for (int i = 1, j = 0; i &lt;= n; i++) {\n        while (j &amp;&amp; big[i] != small[j + 1]) j = ne[j];\n        if (big[i] == small[j + 1]) j++;\n        if (j == m) {\n            cout &lt;&lt; i - j &lt;&lt; ' ';\n            j = ne[j];\n        }\n    }   \n    return 0;\n}\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_19","title":"\u8d28\u6570\u7b5b","text":"<p>\u95ee\u9898\uff1a1~1000000\u4e2d\u6709\u591a\u5c11\u8d28\u6570\uff1f</p> <p>\u57c3\u6c0f\u7b5b\uff1a</p> <pre><code>#include&lt;iostream&gt;\nusing namespace std;\nconst int N = 1000010; int st[N], n, cnt;\nvoid getPrime() {\n    for(int i = 2; i &lt;= n; i++) {\n        if(!st[i]) cnt++;\n        for(int j = i; j &lt;= n; j += i) st[j] = true;\n    }\n}\nint main() { cin &gt;&gt; n; getPrime(); cout &lt;&lt; cnt &lt;&lt;endl; return 0; }\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_20","title":"\u8d28\u56e0\u6570\u5206\u89e3","text":"<pre><code>#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nvector&lt;int&gt; res;\nvoid getPrimes(int n) {\n    for (int i = 2; i &lt;= n / i; i++) {\n        while (n % i == 0) { n /= i; res.push_back(i); }        \n    } if (n != 1) res.push_back(n);\n}\nint main() { int n; cin &gt;&gt; n; getPrimes(n); cout &lt;&lt; res.back() &lt;&lt; endl; return 0; }\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_21","title":"\u6700\u5927\u516c\u7ea6\u6570","text":"<p>\u6c42a\u548cb\u7684\u6700\u5927\u516c\u7ea6\u6570</p> <pre><code>int gcd (int a, int b) { return b ? gcd(b, a % b) : a ; }\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_22","title":"\u5feb\u901f\u5e42","text":"<p>\u7ed9\u5b9a n \u7ec4 ai,bi,pi\uff0c\u5bf9\u4e8e\u6bcf\u7ec4\u6570\u636e\uff0c\u6c42\u51fa ai^bi mod pi\u7684\u503c\u30021 &lt;= ai,bi,pi &lt;= 2 * 1e9</p> <pre><code>#define int long long\nint qmi(int a, int b, int p) {\n    int res = 1; while (b) { if (b &amp; 1) res = res * a % p; b &gt;&gt;= 1; a = a * a % p; }\n    return res; }\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#nim","title":"Nim\u6e38\u620f","text":"<p>\u95ee\u9898\uff1a\u7ed9\u5b9an\u5806\u77f3\u5b50\uff0c\u4e24\u4f4d\u73a9\u5bb6\u8f6e\u6d41\u64cd\u4f5c\uff0c\u6bcf\u6b21\u64cd\u4f5c\u53ef\u4ee5\u4ece\u4efb\u610f\u4e00\u5806\u77f3\u5b50\u4e2d\u62ff\u8d70\u4efb\u610f\u6570\u91cf\u7684\u77f3\u5b50\uff08\u53ef\u4ee5\u62ff\u5b8c\uff0c\u4f46\u4e0d\u80fd\u4e0d\u62ff\uff09\uff0c\u6700\u540e\u65e0\u6cd5\u8fdb\u884c\u64cd\u4f5c\u7684\u4eba\u89c6\u4e3a\u5931\u8d25\u3002\u95ee\u5982\u679c\u4e24\u4eba\u90fd\u91c7\u7528\u6700\u4f18\u7b56\u7565\uff0c\u5148\u624b\u662f\u5426\u5fc5\u80dc\u3002</p> <pre><code>#include&lt;iostream&gt;\nusing namespace std;\nint main() {\n    int n, res = 0; cin &gt;&gt; n; while (n--) { int x; cin &gt;&gt; x; res ^= x; }\n    if (res) cout &lt;&lt; \"Yes\" &lt;&lt; endl; else cout &lt;&lt; \"No\" &lt;&lt; endl; return 0; }\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E6%A8%A1%E6%9D%BF/#_23","title":"\u6700\u957f\u4e0a\u5347\u5b50\u5e8f\u5217","text":"<pre><code>#include&lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int N = 100010; int a[N], dp[N] = { -1000000000, 0 }; int len = 0;\nint main() {\n    int n; cin &gt;&gt; n;\n    for (int i = 1; i &lt;= n; i++) cin &gt;&gt; a[i];\n    for (int i = 1; i &lt;= n; i++) {\n        if (a[i] &gt; dp[len]) dp[++len] = a[i];\n        else {\n            int l = 0, r = len; \n            while (l &lt; r) {\n                int mid = l + r + 1 &gt;&gt; 1;\n                if (dp[mid] &lt; a[i]) l = mid; else r = mid - 1;\n            }\n            dp[l + 1] = a[i];\n        }\n    } cout &lt;&lt; len &lt;&lt; endl; return 0; }\n</code></pre>"},{"location":"%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91%26%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%26%E8%B7%B3%E8%A1%A8/","title":"\u7ea2\u9ed1\u6811&amp;\u5e73\u8861\u4e8c\u53c9\u6811&amp;\u8df3\u8868","text":"<p>[toc]</p>"},{"location":"%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91%26%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%26%E8%B7%B3%E8%A1%A8/#_2","title":"\u7ea2\u9ed1\u6811\u7684\u7279\u5f81","text":"<ol> <li>\u6811\u4e2d\u7684\u6240\u6709\u8282\u70b9\u8981\u4e48\u662f\u7ea2\u8272\uff0c\u8981\u4e48\u662f\u9ed1\u8272\u3002</li> <li>\u8ddf\u8282\u70b9\u662f\u9ed1\u8272\uff0c\u53f6\u5b50\u7ed3\u70b9\u662f\u9ed1\u8272\u7684\u7a7a\u8282\u70b9\u3002</li> <li>\u7ea2\u8272\u8282\u70b9\u548c\u9ed1\u8272\u8282\u70b9\u4ea4\u66ff\u5b58\u5728\uff08\u9664\u4e86\u6839\u8282\u70b9\u76f4\u63a5\u4e0e\u7a7a\u53f6\u5b50\u7ed3\u70b9\u76f8\u8fde\uff09\u3002</li> <li>\u4ece\u4efb\u610f\u8282\u70b9\u5230\u5176\u6240\u6709\u7684\u6839\u7ed3\u70b9\u7684\u8def\u5f84\u4e0a\uff0c\u90fd\u6709\u76f8\u540c\u7684\u9ed1\u8272\u8282\u70b9\u3002</li> </ol>"},{"location":"%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91%26%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%26%E8%B7%B3%E8%A1%A8/#_3","title":"\u5e73\u8861\u4e8c\u53c9\u6811\u7684\u7279\u5f81","text":"<p>\u6bcf\u4e2a\u8282\u70b9\u7684\u5de6\u53f3\u5b50\u6811\u7684\u9ad8\u5ea6\u5dee\u4e0d\u5927\u4e8e1\u3002</p>"},{"location":"%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91%26%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%26%E8%B7%B3%E8%A1%A8/#_4","title":"\u8df3\u8868\u7684\u7279\u5f81","text":"<ol> <li>\u5efa\u7acbk\u7ea7\u7d22\u5f15\u3002<code>k = O(logN)</code>\uff0cN\u4e3a\u5143\u7d20\u4e2a\u6570\u3002</li> <li>\u63d2\u5165\u5143\u7d20\u65f6\uff0c\u4f1a\u968f\u673a\u5411\u7b2cm\u5c42\u5efa\u7acb\u7d22\u5f15\u8282\u70b9\uff0c\u5176\u4e2d<code>1 &lt; m &lt;= k</code>\u3002\u5982\u679c\u4e0d\u52a0\u7d22\u5f15\u8282\u70b9\uff0c\u90a3\u4e48\u6781\u7aef\u60c5\u51b5\u4e0b\u6240\u6709\u8282\u70b9\u5747\u65b0\u589e\u5230\u7b2c1\u5c42\u7684\u4e24\u4e2a\u8282\u70b9\u4e4b\u95f4\uff0c\u8df3\u8868\u9000\u5316\u6210\u94fe\u8868\u3002</li> <li>\u4e0b\u56fe\u4e2d\uff0c\u8df3\u8868\u5360\u7528\u7a7a\u95f4\u4e3a<code>n + n / 2 + n / 4 + ... + 2  &lt; n * 2</code>\uff0c\u6240\u4ee5\u8df3\u8868\u7684\u7a7a\u95f4\u590d\u6742\u5ea6\u4e3aO(N)\u3002\u82e5\u540c\u4e00\u5c42\u76f8\u90bb\u8282\u70b9\u95f4\u9694\u4e3a3\uff0c\u90a3\u4e48\u8df3\u8868\u5360\u7528\u7a7a\u95f4\u4e3a<code>n + n / 3 + n / 9 + ... + 3 + 1 &lt; n + n / 2</code> \u3002\u56e0\u6b64\u53ef\u4ee5\u901a\u8fc7\u8c03\u8282\u7d22\u5f15\u8282\u70b9\u7684\u5de6\u53f3\u95f4\u8ddd\u5e73\u8861\u65f6\u95f4\u590d\u6742\u5ea6\u548c\u7a7a\u95f4\u590d\u6742\u5ea6\u3002</li> <li>\u8df3\u8868\u67e5\u8be2\u67d0\u4e2a\u8303\u56f4\u7684\u6548\u7387\u6bd4\u5e73\u8861\u6811\u9ad8\u4e00\u70b9\u3002\u6bd4\u5982\u67e5\u8be2[20, 50]\u7684\u8282\u70b9\uff0c\u53ea\u9700\u8981\u901a\u8fc7O(logN)\u67e5\u8be2\u523020\uff0c\u7136\u540e\u5411\u540e\u904d\u5386\u5373\u53ef\u3002</li> </ol> <p>\u200b   </p>"},{"location":"%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91%26%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%26%E8%B7%B3%E8%A1%A8/#_5","title":"\u7ea2\u9ed1\u6811\u4e0e\u5e73\u8861\u4e8c\u53c9\u6811\u7684\u5173\u7cfb\u4e0e\u533a\u522b","text":"<p>\u76f8\u4f3c\u5904\uff1a\u4e24\u8005\u7684\u67e5\u8be2\u3001\u589e\u5220\u6548\u7387\u90fd\u662f<code>O(NlogN)</code>\uff0c\u5dee\u522b\u4e0d\u5927\u3002</p> <p>\u4e0d\u540c\u5904\uff1a\u5e73\u8861\u4e8c\u53c9\u6811\u8ffd\u6c42\u7edd\u5bf9\u7684\u5e73\u8861\uff0c\u56e0\u6b64\u67e5\u8be2\u6548\u7387\u7a0d\u5fae\u9ad8\u4e00\u70b9\u70b9\u3002\u7ea2\u9ed1\u6811\u653e\u5f03\u7edd\u5bf9\u5e73\u8861\uff0c\u5c3d\u91cf\u51cf\u5c11\u8282\u70b9\u65cb\u8f6c\uff0c\u56e0\u6b64\u63d2\u5165/\u5220\u9664\u7684\u6548\u7387\u9ad8\u4e00\u70b9\u70b9\u3002</p>"},{"location":"%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91%26%E5%B9%B3%E8%A1%A1%E4%BA%8C%E5%8F%89%E6%A0%91%26%E8%B7%B3%E8%A1%A8/#redis","title":"Redis\u4e3a\u4ec0\u4e48\u91c7\u7528\u8df3\u8868\u800c\u4e0d\u662f\u5e73\u8861\u6811","text":"<ol> <li>\u8df3\u8868\u7684\u5b9e\u73b0\u7b80\u5355\u3002</li> <li>\u8df3\u8868\u67e5\u8be2\u67d0\u4e2a\u8fd4\u56de\u7684\u6570\u636e\u7684\u6548\u7387\u7565\u9ad8\u3002</li> </ol>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/UML%E7%B1%BB%E5%9B%BE/","title":"UML\u7c7b\u56fe","text":"<p>[toc]</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/UML%E7%B1%BB%E5%9B%BE/#_1","title":"\u7c7b","text":""},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/UML%E7%B1%BB%E5%9B%BE/#_2","title":"\u5177\u4f53\u7c7b","text":""},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/UML%E7%B1%BB%E5%9B%BE/#_3","title":"\u62bd\u8c61\u7c7b","text":"<p>\u540c\u7c7b\u56fe\u3002\u53ea\u662f\u5c06\u7c7b\u540d\u5199\u51fa\u4e86\u659c\u4f53\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/UML%E7%B1%BB%E5%9B%BE/#_4","title":"\u63a5\u53e3","text":"<p>\u540c\u7c7b\u56fe\u3002\u53ea\u662f\u7c7b\u540d\u4e0a\u9762\u6807\u6ce8<code>&lt;&lt;interface&gt;&gt;</code>\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/UML%E7%B1%BB%E5%9B%BE/#_5","title":"\u5173\u7cfb","text":""},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/UML%E7%B1%BB%E5%9B%BE/#implements","title":"\u5b9e\u73b0\uff08implements\uff09","text":""},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/UML%E7%B1%BB%E5%9B%BE/#extends","title":"\u7ee7\u627f\uff08extends\uff09","text":""},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/UML%E7%B1%BB%E5%9B%BE/#_6","title":"\u5173\u8054","text":""},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/UML%E7%B1%BB%E5%9B%BE/#_7","title":"\u4f9d\u8d56","text":"<p>\u5982\u679c\u5bf9\u8c61A\u4e2d\u7528\u5230\u4e86\u5bf9\u8c61B\uff0c\u4f46\u662f\u548cB\u7684\u5173\u7cfb\u4e0d\u592a\u660e\u663e\u3002\u53ef\u4ee5\u79f0\u4e3a\u5bf9\u8c61A\u4f9d\u8d56\u5bf9\u8c61B\u3002</p> <p>\u4e0b\u56fe\u4e2d\uff0cStudent\u4f9d\u8d56Pen\u3002</p> <p></p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/UML%E7%B1%BB%E5%9B%BE/#_8","title":"\u805a\u5408","text":"<p>\u5047\u5b9a\u6709\u90e8\u95e8\u7c7b\uff08Department\uff09\u548c\u5458\u5de5\u7c7b\uff08Employee\uff09\uff0c\u90e8\u95e8\u5305\u542b\u5458\u5de5\uff0c\u5e76\u4e14\u90e8\u95e8\u64a4\u4e86\u5458\u5de5\u8fd8\u5728\u3002\u8fd9\u79cd\u5173\u7cfb\u53ef\u4ee5\u7528\u805a\u5408\u8868\u793a\u3002</p> <p>\u805a\u5408\u7684\u8868\u793a\u65b9\u5f0f\u548c\u4f9d\u8d56\u51e0\u4e4e\u4e00\u6837\uff0c\u53ea\u662f\u5728\u6574\u4f53\u7c7b\u5904\u52a0\u4e0a\u7a7a\u5fc3\u83f1\u5f62\u3002</p> <p></p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/UML%E7%B1%BB%E5%9B%BE/#_9","title":"\u7ec4\u5408","text":"<p>\u5047\u5b9a\u6709\u4eba\u7c7b\uff08Person\uff09\u548c\u5934\u7c7b\uff08Head\uff09\u3002\u5934\u5c5e\u4e8e\u4eba\u7684\u4e00\u90e8\u5206\uff0c\u5982\u679c\u6ca1\u6709\u4eba\uff0c\u5219\u5934\u4e5f\u5c31\u65e0\u610f\u4e49\u3002\u8fd9\u79cd\u5173\u7cfb\u53ef\u4ee5\u7528\u7ec4\u5408\u8868\u793a\u3002</p> <p></p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/","title":"\u5355\u4f8b\u6a21\u5f0f","text":"<p>[toc]</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/#_2","title":"\u662f\u4ec0\u4e48","text":"<p>\u6709\u65f6\u5019\u4e00\u4e2a\u7c7b\u53ea\u9700\u8981\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\u5c31\u80fd\u590d\u7528\u6240\u6709\u60c5\u51b5\u3002\u6b64\u65f6\u6211\u4eec\u9700\u8981\u4f7f\u7528\u5355\u4f8b\u6a21\u5f0f\u3002</p> <p>\u5355\u4f8b\u6a21\u5f0f\u5f88\u597d\u7406\u89e3\uff0c\u4f46\u4ed6\u7684\u96be\u70b9\u5728\u4e8e\u521b\u5efa\u5355\u4f8b\u7684\u65b9\u6cd5\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/#_3","title":"\u5982\u4f55\u521b\u5efa\u5355\u4f8b","text":"<p>\u4e00\u4e2a\u7c7b\u53ea\u6709\u4e00\u4e2a\u5bf9\u8c61\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u60f3\u5230\u8fd9\u4e2a\u5bf9\u8c61\u662f\u88ab<code>static</code>\u4fee\u9970\u7684\u3002</p> <p>\u521b\u5efa\u5355\u4f8b\u7684\u65b9\u6cd5\u6709\u4e24\u79cd\uff1a\u997f\u6c49\u5f0f\u548c\u9971\u6c49\u5f0f\u3002</p> <p>\u997f\u6c49\u5f0f\u5c31\u662f\u7c7b\u521d\u59cb\u5316\u7684\u65f6\u5019\u521b\u5efa\u8be5\u5bf9\u8c61\u3002</p> <p>\u9971\u6c49\u5f0f\u5c31\u662f\u9700\u8981\u4f7f\u7528\u8fd9\u4e2a\u5bf9\u8c61\u7684\u65f6\u5019\u518d\u521b\u5efa\u8be5\u5bf9\u8c61\u3002</p> <p>\u997f\u6c49\u5f0f\u5f88\u7b80\u5355\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>public class SingletonHungry {\n    public final static SingletonHungry INSTANCE = new SingletonHungry();\n    public static SingletonHungry getInstance() {\n        return INSTANCE;\n    }\n}\n</code></pre> <p>\u9971\u6c49\u5f0f\u6709\u70b9\u590d\u6742\uff0c\u6d89\u53ca\u5230\u591a\u7ebf\u7a0b\u4e0b\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\u548c\u6548\u7387\u95ee\u9898\u3002\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>public class SingletonFull {\n    /**\n     * \u4f7f\u7528volatile\uff0c\u4fdd\u8bc1\u53d8\u91cf\u88ab\u4fee\u6539\u540e\u80fd\u591f\u7acb\u5373\u88ab\u5176\u4ed6\u7ebf\u7a0b\u5bdf\u89c9\u5230\u3002\n     */\n    public static volatile SingletonFull instance;\n\n    /**\n     * \u53ef\u4ee5\u7ed9\u6574\u4e2a\u51fd\u6570\u52a0\u9501\uff0c\u4f46\u662f\u6548\u7387\u5f88\u4f4e\u3002\n     * \u56e0\u6b64\u91c7\u7528\u201c\u53cc\u91cd\u68c0\u67e5\u201d\u3002\n     */\n    public static SingletonFull getInstance() {\n        // \u7b2c\u4e00\u6b21\u68c0\u67e5\u53d8\u91cf\u662f\u5426\u4e3a\u7a7a\n        if (instance != null) {\n            return instance;\n        }\n        // ======\u591a\u6761\u7ebf\u7a0b\u53ef\u80fd\u540c\u65f6\u6267\u884c\u4e8e\u6b64======\n        synchronized (SingletonFull.class) {\n            // \u7b2c\u4e8c\u6b21\u68c0\u67e5\u53d8\u91cf\u662f\u5426\u4e3a\u7a7a\n            if (instance == null) {\n                instance = new SingletonFull();\n            }\n        }\n        return instance;\n    }\n}\n</code></pre>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/","title":"\u547d\u4ee4\u6a21\u5f0f","text":"<p>[toc]</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/#_2","title":"\u4e3a\u4ec0\u4e48\u4f7f\u7528\u547d\u4ee4\u6a21\u5f0f","text":"<p>\u6709\u8fd9\u6837\u4e00\u4e2a\u573a\u666f\uff1a\u5b58\u5728\u4e24\u4e2a\u89d2\u8272\uff1a\u53d1\u9001\u8005\u548c\u63a5\u6536\u8005\u3002\u53d1\u9001\u8005\u8d1f\u8d23\u53d1\u5e03\u8bf7\u6c42\uff0c\u63a5\u6536\u8005\u6536\u5230\u5e76\u5904\u7406\u8bf7\u6c42\u3002</p> <p>\u4e3a\u4e86\u8ba9\u8fd9\u4e2a\u8fc7\u7a0b\u5b9e\u73b0\u89e3\u8026\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u547d\u4ee4\u6a21\u5f0f\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/#_3","title":"\u751f\u6d3b\u6848\u4f8b","text":"<p>\u6709\u4e00\u5929\uff0c\u4f60\u60ec\u610f\u5730\u8eba\u5728\u6c99\u53d1\u4e0a\uff0c\u6b64\u65f6\u4f60\u89c9\u5f97\u5c4b\u5185\u5149\u7ebf\u6709\u70b9\u6697\uff0c\u4f60\u60f3\u5f00\u706f\u3002\u5047\u5b9a\u4f60\u7684\u624b\u673a\u4e2d\u6709\u4e00\u4e2a\u9065\u63a7APP\uff0c\u5b83\u53ef\u4ee5\u5f00\u706f\u3001\u5173\u706f\u3001\u5f00\u7a7a\u8c03......\u6b64\u65f6\u4f60\u53ea\u9700\u8981\u6253\u5f00\u9065\u63a7APP\uff0c\u9009\u62e9\u6a21\u5f0f\uff08\u6bd4\u5982\u5f00\u706f\uff09\uff0c\u7136\u540e\u6309\u4e0b\u786e\u8ba4\u952e\uff0c\u5373\u53ef\u5f00\u706f\u3002\u5982\u679c\u60f3\u5f00\u7a7a\u8c03\uff0c\u4f60\u53ea\u9700\u8981\u5207\u6362APP\u7684\u6a21\u5f0f\uff0c\u6309\u4e0b\u786e\u8ba4\u952e\uff0c\u5373\u53ef\u5f00\u7a7a\u8c03\u3002</p> <p>\u540c\u65f6\u4f60\u8fd8\u53ef\u4ee5\u7ed9APP\u6dfb\u52a0\u65b0\u7684\u529f\u80fd\uff1a\u5f00\u7535\u89c6\uff0c\u5f00\u95e8......</p> <p>\u6211\u4eec\u4ed4\u7ec6\u5206\u6790\u4e0a\u8ff0\u6848\u4f8b\u51fa\u73b0\u76844\u4e2a\u89d2\u8272\uff1a\u4f60\uff08\u5ba2\u6237\u7aef\uff09\u3001\u9065\u63a7APP\uff08\u547d\u4ee4\u53d1\u8d77\u8005\uff09\u3001\u5f00\u706f\u4fe1\u53f7\uff08\u547d\u4ee4\uff09\u3001\u706f\uff08\u547d\u4ee4\u63a5\u6536\u8005\uff09\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/#_4","title":"\u5e38\u89c1\u89d2\u8272","text":"<ol> <li>\u547d\u4ee4\u63a5\u53e3\uff1a\u5b9a\u4e49\u4e86\u4e00\u7c7b\u64cd\u4f5c\u7684\u63a5\u53e3\uff0c\u5305\u62ec\u6267\u884c\uff08execute\uff09\u548c\u64a4\u9500\uff08undo\uff09\u4e24\u4e2a\u65b9\u6cd5\u3002</li> <li>\u5177\u4f53\u547d\u4ee4\u7c7b\uff1a\u6bd4\u5982\u4e0a\u8ff0\u6848\u4f8b\u53ef\u4ee5\u6dfb\u52a0\u8fd9\u4e9b\u7c7b\uff08\u5f00\u706f\u547d\u4ee4\u7c7b\u3001\u5173\u706f\u547d\u4ee4\u7c7b\u3001\u5f00\u7a7a\u8c03\u547d\u4ee4\u7c7b......\uff09\uff0c\u5b83\u4eec\u5177\u4f53\u505a\u4e86\u4ee5\u4e0b\u4e8b\u60c5\uff1a</li> <li>\u5b9e\u73b0\u4e86\u547d\u4ee4\u63a5\u53e3\u3002</li> <li> <p>\u5305\u542b\u4e00\u4e2a\u63a5\u6536\u8005\u5bf9\u8c61\uff0c\u548c\u4e00\u4e2aexecute\u51fd\u6570\u3002\u8c03\u7528\u547d\u4ee4\u5bf9\u8c61\u7684execute\u51fd\u6570\u76f8\u5f53\u4e8e\u8c03\u7528\u63a5\u6536\u8005\u5bf9\u8c61\u7684\u67d0\u4e2a\u51fd\u6570\u3002</p> </li> <li> <p>\u547d\u4ee4\u63a5\u6536\u8005\uff1a\u8d1f\u8d23\u6267\u884c\u5177\u4f53\u7684\u64cd\u4f5c\uff0c\u4f46\u5e76\u4e0d\u77e5\u9053\u547d\u4ee4\u7684\u5b58\u5728\u3002\uff08\u7a7a\u8c03\u3001\u706f...\uff09</p> </li> <li>\u547d\u4ee4\u53d1\u8d77\u8005\uff1a\u5305\u542b\u4e00\u4e2a\u547d\u4ee4\u5bf9\u8c61\uff0c\u8c03\u7528<code>setCommand</code>\u53ef\u4ee5\u8bbe\u7f6e\u5177\u4f53\u7684\u547d\u4ee4\uff0c\u8c03\u7528<code>pressButton</code>\u53ef\u4ee5\u95f4\u63a5\u8c03\u7528\u547d\u4ee4\u5bf9\u8c61\u7684<code>execute</code>\u51fd\u6570\u3002\uff08\u9065\u63a7\u677f\uff09</li> <li>\u5ba2\u6237\u7aef\uff08Client\uff09\uff1a\u8d1f\u8d23\u6574\u4e2a\u6d41\u7a0b\u7684\u6267\u884c\u3002\u5305\u542b\u521b\u5efa\u63a5\u6536\u8005\u3001\u521b\u5efa\u547d\u4ee4\u5bf9\u8c61\u3001\u5c06\u63a5\u6536\u8005\u4f20\u9012\u7ed9\u547d\u4ee4\u5bf9\u8c61\u3001\u521b\u5efa\u53d1\u9001\u8005\u3001\u5c06\u547d\u4ee4\u5bf9\u8c61\u4f20\u9012\u7ed9\u53d1\u9001\u8005\u3001\u53d1\u9001\u8005\u53d1\u51fa\u6307\u4ee4\u3002</li> </ol> <p>\u547d\u540d\u6a21\u5f0f\u7684\u6838\u5fc3\uff1a</p> <p>1. \u6211\u4eec\u7528\u547d\u4ee4\u53d1\u8d77\u8005\u5bf9\u8c61\u5d4c\u5957\u547d\u4ee4\u5bf9\u8c61\uff0c\u547d\u4ee4\u5bf9\u8c61\u5d4c\u5957\u547d\u4ee4\u63a5\u6536\u8005\u5bf9\u8c61\u3002\u547d\u4ee4\u53d1\u8d77\u8005\u53ef\u4ee5\u968f\u65f6\u5207\u6362\u547d\u4ee4\u5bf9\u8c61\u3002\u53d1\u8d77\u8005\uff08pressButton\uff09-&gt;\u547d\u4ee4\u5bf9\u8c61\uff08execute\uff09-&gt;\u63a5\u6536\u8005\uff08\u5177\u4f53\u65b9\u6cd5\uff09\u3002</p> <p>2. \u4e00\u4e2a\u9065\u63a7\u5668\u53ef\u4ee5\u5305\u542b\u591a\u4e2a\u547d\u4ee4\u5bf9\u8c61\u3002\u4e00\u4e2a\u547d\u4ee4\u5bf9\u8c61\u8981\u4e48\u5305\u542b\u591a\u4e2a\u547d\u4ee4\u5bf9\u8c61\uff0c\u8981\u4e48\u5bf9\u5e94\u4e00\u4e2a\u63a5\u6536\u8005\u7684\u64cd\u4f5c\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/#_5","title":"\u5177\u4f53\u4ee3\u7801","text":"<p>\u63a5\u6536\u8005\uff08Light\uff09</p> <pre><code>package com.lee.designpattern.command;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class Light {\n    public void on() {\n        System.out.println(\"light on!\");\n    }\n\n    public void off() {\n        System.out.println(\"light off~\");\n    }\n}\n</code></pre> <p>\u547d\u4ee4\u62bd\u8c61\u63a5\u53e3</p> <pre><code>package com.lee.designpattern.command;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic interface Command {\n    public void execute();\n}\n</code></pre> <p>\u547d\u4ee4\u5b9e\u73b0\u7c7b</p> <pre><code>package com.lee.designpattern.command;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class CommandLightOn implements Command {\n    private Light light;\n    CommandLightOn(Light light) {\n        this.light = light;\n    }\n    @Override\n    public void execute() {\n        light.on();\n    }\n}\n</code></pre> <pre><code>package com.lee.designpattern.command;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class CommandLightOff implements Command {\n    private Light light;\n    CommandLightOff(Light light) {\n        this.light = light;\n    }\n    @Override\n    public void execute() {\n        light.off();\n    }\n}\n</code></pre> <p>\u53d1\u9001\u8005</p> <pre><code>package com.lee.designpattern.command;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class RemoteControl {\n    private Command command;\n\n    public void setCommand(Command command) {\n        this.command = command;\n    }\n\n    public void pressButton() {\n        command.execute();\n    }\n}\n</code></pre> <p>\u5ba2\u6237\u7aef</p> <pre><code>package com.lee.designpattern.command;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class Client {\n    public static void main(String[] args) {\n        // \u521b\u5efa\u63a5\u6536\u8005\n        Light light = new Light();\n        // \u521b\u5efa\u547d\u4ee4\u5bf9\u8c61\uff0c\u5e76\u7ed1\u5b9a\u7ed9\u63a5\u6536\u8005\n        // \u8fd9\u91cc\u7684\u201c\u7ed1\u5b9a\u201d\u662f\u6307\u8ba9\u4e24\u8005\u4ea7\u751f\u5173\u8054\n        Command commandLightOn = new CommandLightOn(light);\n        Command commandLightOff = new CommandLightOff(light);\n\n        // \u521b\u5efa\u53d1\u9001\u8005\n        RemoteControl remoteControl = new RemoteControl();\n\n        // \u5c06\u547d\u4ee4\u5bf9\u8c61\u4f20\u9012\u7ed9\u53d1\u9001\u8005\n        remoteControl.setCommand(commandLightOn);\n        // \u53d1\u9001\u8005\u53d1\u51fa\u6307\u4ee4\n        remoteControl.pressButton();\n\n        remoteControl.setCommand(commandLightOff);\n        remoteControl.pressButton();\n    }\n}\n</code></pre>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%91%BD%E4%BB%A4%E6%A8%A1%E5%BC%8F/#_6","title":"\u62d3\u5c55","text":"<p>\u95ee\u9898\uff1a\u5047\u5b9a\u6211\u4eec\u9700\u8981\u62d3\u5c55\u9065\u63a7APP\u7684\u529f\u80fd\uff0c\u6bd4\u5982\u6dfb\u52a0\u5f00\u95e8\u529f\u80fd\uff0c\u6211\u4eec\u8be5\u5982\u4f55\u7528\u4ee3\u7801\u5b9e\u73b0\u5462\uff1f</p> <p>\u601d\u8def\uff1a\u9996\u5148\u6211\u4eec\u9700\u8981\u521b\u5efa\u547d\u4ee4\u63a5\u6536\u8005\uff08\u95e8\u7c7b\uff09\uff0c\u63a5\u7740\u521b\u5efa\u5f00\u95e8\u547d\u4ee4\u7c7b\u5e76\u5b9e\u73b0\u547d\u4ee4\u63a5\u53e3\u3002\u5c06\u95e8\u7c7b\u5bf9\u8c61\u4f20\u5165\u5f00\u95e8\u547d\u4ee4\u5bf9\u8c61\u4e2d\u3002\u6700\u540e\u5c06\u5f00\u95e8\u5bf9\u8c61\u4f20\u5165\u547d\u4ee4\u53d1\u8d77\u8005\uff08\u9065\u63a7APP\uff09\uff0cAPP\u901a\u8fc7\u8c03\u7528<code>buttonPress</code>\u65b9\u6cd5\u95f4\u63a5\u8c03\u7528\u547d\u4ee4\u5bf9\u8c61\u7684<code>execute</code>\u65b9\u6cd5\uff0c\u518d\u95f4\u63a5\u8c03\u7528\u95e8\u5bf9\u8c61\u7684<code>openDoor</code>\u65b9\u6cd5\u5373\u53ef\u3002</p> <p>\u95ee\u9898\uff1a\u5047\u5b9a\u9065\u63a7\u5668\uff08\u53d1\u9001\u8005\uff09\u540c\u65f6\u652f\u6301\u4e24\u79cd\u547d\u4ee4\uff1a<code>buttonPress</code>\u548c<code>buttonOff</code>\uff0c\u8be5\u5982\u4f55\u5b9e\u73b0\u8fd9\u79cd\u529f\u80fd\u5462\uff1f</p> <p>\u601d\u8def\uff1a\u53ea\u9700\u8981\u4fee\u6539\u9065\u63a7\u5668\u7684<code>setCommand</code>\u51fd\u6570\uff0c\u8ba9\u5b83\u63a5\u6536\u4e24\u4e2a\u547d\u4ee4\u5bf9\u8c61\u5373\u53ef\u3002</p> <p>\u95ee\u9898\uff1a\u53ef\u4ee5\u6441\u4e00\u4e2a\u6309\u94ae\uff0c\u7136\u540e\u53d1\u51fa\u591a\u4e2a\u547d\u4ee4\u5417\uff1f</p> <p>\u601d\u8def\uff1a\u5c01\u88c5\u4e00\u4e2a\u547d\u4ee4\u7c7b\uff0c\u5176\u4e2d\u5305\u542b\u4e00\u4e2a\u547d\u4ee4\u5bf9\u8c61\u6570\u7ec4\u5373\u53ef\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/","title":"\u5916\u89c2\u6a21\u5f0f","text":"<p>[toc]</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/#_2","title":"\u4e3a\u4ec0\u4e48","text":"<p>\u5b9a\u4e49\u4e86\u4e00\u4e2a\u9ad8\u5c42\u63a5\u53e3\uff0c\u4fbf\u4e8e\u8bbf\u95ee\u5b50\u7cfb\u7edf\u7684\u4e00\u7fa4\u63a5\u53e3\u3002</p> <p>\u8bbe\u60f3\u4e00\u4e2a\u573a\u666f\uff1a\u5f53\u6211\u4eec\u60f3\u8981\u6253\u5f00\u7535\u8111\u65f6\uff0c\u53ea\u9700\u8981\u6441\u4e0b\u5f00\u5173\u5c31\u80fd\u6253\u5f00\u7535\u8111\u3002\u4f46\u662f\u6253\u5f00\u7535\u8111\u7684\u8fd9\u4e2a\u8fc7\u7a0b\u5b9e\u9645\u4e0a\u662f\u5f88\u590d\u6742\u7684\uff0c\u5b83\u6d89\u53ca\u5230\u542f\u52a8CPU\u3001\u5185\u5b58\u3001\u786c\u76d8\u3002\u800c\u6211\u4eec\u4f5c\u4e3a\u7528\u6237\uff0c\u4e0d\u60f3\u77e5\u9053\u5185\u90e8\u8bbe\u5907\u7684\u8fd0\u884c\u7ec6\u8282\u6d41\u7a0b\u3002\u56e0\u6b64\u7535\u8111\u521a\u505a\u597d\u65f6\uff0c\u5df2\u7ecf\u5c06\u590d\u6742\u7684\u542f\u52a8\u6d41\u7a0b\u5c01\u88c5\u8d77\u6765\uff0c\u5bf9\u5916\u53ea\u66b4\u9732\u4e86\u4e00\u4e2a\u5f00\u5173\u3002\u7528\u6237\u53ea\u9700\u8981\u6441\u4e0b\u5f00\u5173\u5c31\u80fd\u6253\u5f00\u7535\u8111\u3002</p> <p>\u5916\u89c2\u6a21\u5f0f\u7684\u6838\u5fc3\uff1a\u5916\u89c2\u5bf9\u8c61\u662f\u4e00\u4e2a\u5927\u5bf9\u8c61\uff0c\u91cc\u9762\u5305\u542b\u5f88\u591a\u5c0f\u5bf9\u8c61\u3002\u5916\u89c2\u5bf9\u8c61\u5bf9\u5916\u66b4\u9732\u4e00\u4e2a\u65b9\u6cd5\uff0c\u5373\u53ef\u5b8c\u6210\u591a\u4e2a\u5c0f\u5bf9\u8c61\u7684\u4e00\u7cfb\u5217\u8c03\u7528\u884c\u4e3a\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/#_3","title":"\u7c7b\u56fe","text":"<ol> <li>Computer\u662f\u5916\u89c2\u7c7b\u3002\u7528\u6237\u76f4\u63a5\u4f7f\u7528Computer\u5bf9\u8c61\u3002</li> <li>Computer\u7c7b\u4e2d\u5305\u542b\u5b50\u7cfb\u7edf\u4e2d\u5177\u4f53\u7684\u5bf9\u8c61\u3002</li> <li>\u8ba9SSD\u3001CPU\u3001Memory\u5b9e\u73b0Equipment\u63a5\u53e3\u662f\u4e3a\u4e86\u7edf\u4e00\u89c4\u8303\u3002</li> </ol>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/#_4","title":"\u4ee3\u7801","text":"<p>Equipment\u63a5\u53e3</p> <pre><code>public interface Equipment {\n    void open();\n}\n</code></pre> <p>CPU.java</p> <pre><code>public class CPU implements Equipment {\n    @Override\n    public void open() {\n        System.out.println(\"open cpu\");\n    }\n}\n</code></pre> <p>Memory.java</p> <pre><code>public class Memory implements Equipment {\n    @Override\n    public void open() {\n        System.out.println(\"open memory\");\n    }\n}\n</code></pre> <p>SSD.java</p> <pre><code>public class SSD implements Equipment {\n    @Override\n    public void open() {\n        System.out.println(\"open ssd\");\n    }\n}\n</code></pre> <p>Client.java\uff1a\u4f7f\u7528\u8005</p> <pre><code>public class Client {\n    public static void main(String[] args) {\n        Computer computer = new Computer();\n        computer.openComputer();\n    }\n}\n</code></pre>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/","title":"\u5de5\u5382\u6a21\u5f0f","text":"<p>[toc]</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/#_2","title":"\u4e3a\u4ec0\u4e48\u4f7f\u7528\u5de5\u5382\u6a21\u5f0f","text":"<p>\u4e0a\u6b21\u6211\u4eec\u8bf4\u5230\u4e86\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u7684\u5f0a\u7aef\u2014\u2014\u65e0\u6cd5\u5b9e\u73b0\u201c\u5f00\u95ed\u539f\u5219\u201d\u3002\u56e0\u6b64\u6211\u4eec\u91c7\u7528\u5de5\u5382\u6a21\u5f0f\u3002</p> <p>\u8fd8\u662f\u57fa\u4e8e\u4e4b\u524d\u7684\u6848\u4f8b\uff0c\u5c0f\u9f99\u9762\u9986\u65e2\u60f3\u65b0\u589e\u732a\u8089\u9762\uff0c\u53c8\u60f3\u4e0d\u4fee\u6539\u5de5\u5382\u7c7b\uff08LongFactory\uff09\u4e2d\u7684\u4ee3\u7801\uff0c\u8be5\u600e\u4e48\u529e\u5462\uff1f</p> <p>\u529e\u6cd5\u662f\u5c06\u5c0f\u9f99\u9762\u9986\u53d8\u6210\u4e00\u4e2a\u62bd\u8c61\u9762\u9986\uff08\u63a5\u53e3\uff09\uff0c\u63a5\u53e3\u4e2d\u521b\u5efa\u516c\u6709\u7684\u6210\u5458\u548c\u65b9\u6cd5\uff0c\u5e76\u521b\u5efa\u591a\u4e2a\u90e8\u95e8\uff08\u5b50\u7c7b\uff09\u5b9e\u73b0\uff08implements\uff09\u62bd\u8c61\u9762\u9986\uff0c\u90a3\u4e48\u4e0d\u540c\u7684\u90e8\u95e8\u5c31\u80fd\u505a\u4e0d\u540c\u53e3\u5473\u7684\u9762\u6761\u4e86\u3002\u5047\u5b9a\u6211\u4eec\u65b0\u589e\u732a\u8089\u9762\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u521b\u5efa\u732a\u8089\u9762\u90e8\u95e8\u7c7b\uff08LongFactoryPork\uff09\uff0c\u5e76\u5b9e\u73b0\u62bd\u8c61\u9762\u9986\u5373\u53ef\u3002</p> <p>\u8bf4\u5230\u8fd9\uff0c\u5c31\u5fc5\u987b\u8bf4\u51e0\u4e2a\u91cd\u8981\u7684\u6982\u5ff5\uff1a\u62bd\u8c61\u5de5\u5382\u3001\u5177\u4f53\u5de5\u5382\u3001\u62bd\u8c61\u4ea7\u54c1\u3001\u5177\u4f53\u4ea7\u54c1\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/#_3","title":"\u91cd\u8981\u89d2\u8272","text":"<p>\u62bd\u8c61\u5de5\u5382\u7c7b\uff08\u5c0f\u9f99\u9762\u9986\uff09\uff1a\u5b9a\u4e49\u4e00\u4e9b\u516c\u6709\u7684\u65b9\u6cd5\u3002</p> <p>\u5177\u4f53\u5de5\u5382\u7c7b\uff08\u732a\u8089\u9762\u90e8\u95e8\uff09\uff1a\u5b9e\u73b0\u62bd\u8c61\u5de5\u5382\u5e76\u91cd\u5199\u62bd\u8c61\u5de5\u5382\u4e2d\u7684\u65b9\u6cd5\uff0c\u540c\u65f6\u8fd8\u53ef\u4ee5\u521b\u5efa\u90e8\u5206\u81ea\u5df1\u7279\u6709\u7684\u65b9\u6cd5\u3002</p> <p>\u62bd\u8c61\u4ea7\u54c1\u7c7b\uff1a\u9762\u6761\u3002</p> <p>\u5177\u4f53\u4ea7\u54c1\u7c7b\uff1a\u732a\u8089\u9762\uff0c\u5b9e\u73b0\u4e86\u62bd\u8c61\u4ea7\u54c1</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E7%B3%BB%E5%88%97/","title":"\u5de5\u5382\u6a21\u5f0f\u7cfb\u5217","text":"<p>[toc]</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F%E7%B3%BB%E5%88%97/#_2","title":"\u662f\u4ec0\u4e48","text":"<p>\u5de5\u5382\u6a21\u5f0f\u7cfb\u5217\u4e2d\u603b\u5171\u6709\u4e09\u79cd\u8bbe\u8ba1\u6a21\u5f0f\uff1a\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u3001\u5de5\u5382\u6a21\u5f0f\u3001\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\u3002</p> <p>\u5de5\u5382\u6a21\u5f0f\u7684\u672c\u8d28\u5c31\u662f\u8ba9\u5de5\u5382\u5bf9\u8c61\u751f\u4ea7\u5e76\u8fd4\u56de\u4e00\u4e2a\u4ea7\u54c1\uff08\u5bf9\u8c61\uff09\u3002</p> <p>\u63a5\u4e0b\u6765\u8be6\u7ec6\u4ecb\u7ecd\u8fd9\u51e0\u79cd\u5de5\u5382\u6a21\u5f0f\uff1a</p> <p>\u7b80\u5355\u5de5\u5382\u6a21\u5f0f</p> <ol> <li>\u4e3b\u8981\u89d2\u8272\uff1a\u5177\u4f53\u5de5\u5382\u7c7b\u3001\u62bd\u8c61\u4ea7\u54c1\u63a5\u53e3\u3001\u5177\u4f53\u4ea7\u54c1\u7c7b\u3002</li> <li>\u804c\u8d23\u5212\u5206\uff1a</li> <li>\u5177\u4f53\u5de5\u5382\u5bf9\u8c61\uff1a\u63a5\u6536\u4e00\u4e2a\u53c2\u6570\uff0c\u751f\u6210\u5e76\u8fd4\u56de\u4e00\u4e2a\u4ea7\u54c1\uff08\u5bf9\u8c61\uff09\u3002\u8be5\u4ea7\u54c1\u5bf9\u8c61\u662f\u62bd\u8c61\u4ea7\u54c1\u63a5\u53e3\u7684\u5b50\u7c7b\u3002\u4e00\u4e2a\u5de5\u5382\u5bf9\u8c61\u53ef\u4ee5\u751f\u4ea7\u591a\u79cd\u4ea7\u54c1\u3002</li> <li>\u62bd\u8c61\u4ea7\u54c1\u63a5\u53e3\uff1a\u7edf\u4e00\u89c4\u8303\u3002</li> <li> <p>\u5177\u4f53\u4ea7\u54c1\u7c7b\uff1a\u5b9a\u4e49\u4ea7\u54c1\u7684\u4fe1\u606f\u3002</p> </li> <li> <p>\u7f3a\u70b9\uff1a\u5f53\u6211\u4eec\u60f3\u65b0\u589e\u4ea7\u54c1\uff0c\u9700\u8981\u5728\u5de5\u5382\u7c7b\u4e2d\u6dfb\u52a0if-else\u8bed\u53e5\uff0c\u4e0d\u6ee1\u8db3\u201c\u5f00\u95ed\u539f\u5219\u201d\u3002</p> </li> </ol> <p>\u5de5\u5382\u6a21\u5f0f</p> <ol> <li>\u4e3b\u8981\u89d2\u8272\uff1a\u62bd\u8c61\u5de5\u5382\u63a5\u53e3\u3001\u5177\u4f53\u5de5\u5382\u7c7b\u3001\u62bd\u8c61\u4ea7\u54c1\u63a5\u53e3\u3001\u5177\u4f53\u4ea7\u54c1\u7c7b\u3002</li> <li>\u804c\u8d23\u5212\u5206\uff1a</li> <li>\u62bd\u8c61\u5de5\u5382\u63a5\u53e3\uff1a\u5b9a\u4e49\u5de5\u5382\u7c7b\u7684\u89c4\u8303\u3002</li> <li>\u5177\u4f53\u5de5\u5382\u5bf9\u8c61\uff1a\u4e00\u4e2a\u5de5\u5382\u5bf9\u8c61\u53ea\u80fd\u4ea7\u751f\u4e00\u79cd\u4ea7\u54c1\u3002</li> <li>\u62bd\u8c61\u4ea7\u54c1\u63a5\u53e3\uff1a</li> <li>\u5177\u4f53\u4ea7\u54c1\u63a5\u53e3\uff1a</li> <li>\u76f8\u5bf9\u4e8e\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u6765\u8bf4\uff0c\u5de5\u5382\u6a21\u5f0f\u4e2d\uff0c\u5de5\u5382\u5bf9\u8c61\u91cc\u4e0d\u7528\u5199\u4e00\u5927\u5806if-else\u3002\u5f53\u6211\u4eec\u60f3\u65b0\u589e\u4ea7\u54c1\uff0c\u53ea\u9700\u8981\u521b\u5efa\u65b0\u7684\u7c7b\u5e76\u8ba9\u5176\u7ee7\u627f\u62bd\u8c61\u5de5\u5382\u63a5\u53e3\u3002\u4e0d\u540c\u7684\u5de5\u5382\u5bf9\u8c61\u53ea\u80fd\u521b\u5efa\u76f8\u4f3c\u7684\u4ea7\u54c1\u3002</li> </ol> <p>\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f</p> <p>\u76f8\u6bd4\u4e8e\u5de5\u5382\u6a21\u5f0f\uff0c\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f\u4e2d\uff0c\u4e00\u4e2a\u5de5\u5382\u5bf9\u8c61\u53ef\u4ee5\u521b\u5efa\u591a\u7c7b\u4ea7\u54c1\u3002\u4f7f\u7528UML\u56fe\u66f4\u80fd\u4f53\u73b0\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E6%80%9D%E8%B7%AF/","title":"\u601d\u8def","text":"<ol> <li>xx\u8bbe\u8ba1\u6a21\u5f0f\u6709\u4ec0\u4e48\u7528\uff1f\u7528\u751f\u6d3b\u573a\u666f\u5e26\u5165\u3002</li> <li>\u7528\u7c7b\u56fe\u89e3\u91ca\u7c7b\u7684\u5173\u7cfb\u3002</li> <li>\u6587\u5b57\u9610\u8ff0\u4e3b\u8981\u89d2\u8272\u3002</li> <li>\u4f7f\u7528\u7ecf\u9a8c\u3002\uff08\u9009\u505a\uff09</li> <li>\u5177\u4f53\u4ee3\u7801\u3002</li> </ol>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/","title":"\u62bd\u8c61\u5de5\u5382\u6a21\u5f0f","text":"<p>[toc]</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/#_2","title":"\u524d\u8a00","text":""},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E6%A8%A1%E6%9D%BF%E6%A8%A1%E5%BC%8F/","title":"\u6a21\u677f\u6a21\u5f0f","text":"<p>[toc]</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E6%A8%A1%E6%9D%BF%E6%A8%A1%E5%BC%8F/#_2","title":"\u4ee3\u7801","text":"<p>\u62bd\u8c61\u6a21\u677f\u7c7b</p> <pre><code>package com.lee.designpattern.Template;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic abstract class AbstractNoodlesMaker {\n    abstract void addWater();\n    abstract void boil();\n    abstract void putNoodles();\n\n    /**\n     * \u6dfb\u52a0\u914d\u6599\n     */\n    abstract void addFood();\n    void makeNoodles() {\n        addWater();\n        boil();\n        putNoodles();\n        addFood();\n    }\n}\n</code></pre> <p>\u5177\u4f53</p> <pre><code>package com.lee.designpattern.Template;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class BeefNoodlesMaker extends AbstractNoodlesMaker {\n    @Override\n    void addWater() {\n        System.out.println(\"\u52a0\u6c34\");\n    }\n\n    @Override\n    void boil() {\n        System.out.println(\"\u70e7\u6c34\");\n    }\n\n    @Override\n    void putNoodles() {\n        System.out.println(\"\u653e\u5165\u7ec6\u9762\");\n    }\n\n    @Override\n    void addFood() {\n        System.out.println(\"\u52a0\u5165\u5927\u5757\u725b\u8089\uff01\");\n    }\n}\n</code></pre> <p>\u5177\u4f53</p> <pre><code>package com.lee.designpattern.Template;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class ChickenNoodlesMaker extends AbstractNoodlesMaker {\n    @Override\n    void addWater() {\n        System.out.println(\"\u52a0\u6c34\");\n    }\n\n    @Override\n    void boil() {\n        System.out.println(\"\u70e7\u6c34\");\n    }\n\n    @Override\n    void putNoodles() {\n        System.out.println(\"\u52a0\u5165\u5bbd\u9762\");\n    }\n\n    @Override\n    void addFood() {\n        System.out.println(\"\u52a0\u5165\u9e21\u8089\u4e1d\u513f~\");\n    }\n}\n</code></pre> <p>\u4e3b\u7c7b</p> <pre><code>package com.lee.designpattern.Template;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class Main {\n    public static void main(String[] args) {\n        AbstractNoodlesMaker beefNoodlesMaker = new BeefNoodlesMaker();\n        beefNoodlesMaker.makeNoodles();\n\n        ChickenNoodlesMaker chickenNoodlesMaker = new ChickenNoodlesMaker();\n        chickenNoodlesMaker.makeNoodles();\n    }\n}\n</code></pre>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E6%A8%A1%E6%9D%BF%E6%A8%A1%E5%BC%8F/#_3","title":"\u7c7b\u56fe","text":""},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/","title":"\u72b6\u6001\u6a21\u5f0f","text":"<p>[toc]</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/#_2","title":"\u4e3a\u4ec0\u4e48","text":"<p>\u5047\u5b9a\u6709\u8fd9\u6837\u4e00\u4e2a\u573a\u666f\u3002</p> <p>\u4f60\u8981\u5f00\u53d1\u4e00\u4e2a\u94f6\u884c\u7cfb\u7edf\u3002</p> <p>\u5176\u4e2d\u7528\u6237\u6709\u4e09\u4e2a\u72b6\u6001\uff1a\u8d1f\u503a\u3001\u6b63\u5e38\u3001\u5bcc\u88d5\u3002\u5b83\u4eec\u7684\u4f59\u989d\u5206\u522b\u5bf9\u5e94\u533a\u95f4<code>(-\u221e,0)</code>\u3001<code>[0,10000)</code>\u3001<code>[10000,+\u221e)</code>\u3002</p> <p>\u7528\u6237\u6709\u4e24\u79cd\u64cd\u4f5c\uff1a\u5b58\u94b1\u548c\u53d6\u94b1\u3002</p> <p>\u5bf9\u4e8e\u8d1f\u503a\u7684\u4eba\uff1a</p> <pre><code>1. \u53d6\u94b1\u65f6\uff0c\u4e14\u53d6\u94b1\u65f6\u7cfb\u7edf\u4f1a\u63d0\u9192\u4ed6\u201c\u65e0\u6cd5\u53d6\u94b1\uff01\u8d76\u7d27\u8fd8\u94b1\uff01\u201d\u3002\n2. \u5b58\u94b1\u65f6\uff0c\u7cfb\u7edf\u4f1a\u7ed9\u9f13\u52b1\u4ed6\u201c\u4e0d\u9519\uff0c\u8d76\u7d27\u8fd8\u94b1\u624d\u662f\u6b63\u9053\uff01\u201d\u3002\n</code></pre> <p>\u5bf9\u4e8e\u6b63\u5e38\u7684\u4eba\uff1a</p> <pre><code>1. \u5982\u679c\u53d6\u94b1\u91d1\u989d-1000\u2264\u4f59\u989d\uff0c\u5219\u63d0\u793a\u201c\u53d6\u94b1\u6210\u529f\u201d\uff0c\u5426\u5219\u63d0\u793a\u201c\u4f59\u989d\u4e0d\u8db3\u201d\u3002\n2. \u5b58\u94b1\u65f6\uff0c\u7cfb\u7edf\u4f1a\u662f\u63d0\u793a\u201c\u5b58\u94b1\u6210\u529f\u201d\u3002\n</code></pre> <p>\u5bf9\u4e8e\u5bcc\u88d5\u7684\u4eba\uff1a</p> <pre><code>1. \u53d6\u94b1\u65f6\uff0c\u5982\u679c\u53d6\u94b1\u91d1\u989d-1000\u2264\u4f59\u989d\uff0c\u5219\u63d0\u793a\u201c\u5df2\u6210\u529f\u4e3a\u60a8\u53d6\u94b1\uff0c\u6b22\u8fce\u60a8\u4e0b\u6b21\u5149\u4e34~\u201d\uff0c\u5426\u5219\u63d0\u793a\u201c\u4f59\u989d\u4e0d\u8db3\u201d\u3002\n2. \u8fd8\u94b1\u65f6\uff0c\u7cfb\u7edf\u4f1a\u63d0\u793a\u201c\u5df2\u6210\u529f\u4e3a\u60a8\u529e\u7406\u5b58\u94b1\u4e1a\u52a1~\u201d\u3002\n</code></pre> <p>\u5bf9\u4e8e\u8fd9\u4e2a\u6848\u4f8b\uff0c\u76f8\u4fe1\u4f60\u8111\u5b50\u91cc\u7684\u7b2c\u4e00\u505a\u6cd5\u5c31\u662f\u521b\u5efa\u4e00\u4e2a\u7528\u6237\u5bf9\u8c61\u5e76\u8bb0\u5f55\u4ed6\u7684\u4f59\u989d\u3002\u7136\u540e\u5199\u4e00\u5806if-else\u8bed\u53e5\u5224\u65ad\u8be5\u6267\u884c\u54ea\u4e2a\u5206\u652f\u3002</p> <p>\u4f46\u662f\u5bf9\u4e8e\u8fd9\u79cd\u6a21\u578b\uff0c\u5b83\u663e\u7136\u53ef\u4ee5\u7528\u72b6\u6001\u6a21\u5f0f\u89e3\u51b3\u3002\u5224\u65ad\u7684\u4f9d\u636e\u662f\uff1a\u5b83\u6709\u591a\u4e2a\u72b6\u6001\u3002\u6bcf\u4e2a\u72b6\u6001\u90fd\u6709\u76f8\u540c\u7684\u6267\u884c\u7b56\u7565\uff08\u867d\u7136\u76f8\u540c\u65b9\u6cd5\u7684\u5177\u4f53\u5b9e\u73b0\u4e0d\u4e00\u6837\uff09\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/#_3","title":"\u7c7b\u56fe","text":""},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F/#_4","title":"\u4ee3\u7801","text":""},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/","title":"\u7b56\u7565\u6a21\u5f0f","text":"<p>[toc]</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/#_2","title":"\u4e3a\u4ec0\u4e48","text":"<p>\u7ee7\u627f\u662f\u5b9e\u73b0\u4ee3\u7801\u590d\u7528\u7684\u91cd\u8981\u624b\u6bb5\u3002\u5047\u5b9a\u6211\u4eec\u6709\u4e00\u4e2a\u9762\u7c7b\uff08Noodles\uff09\uff0c\u91cc\u9762\u5305\u542b\u4e86\u70e7\u6c34\uff08boil\uff09\u3001\u716e\u9762\uff08putNoodles\uff09\u3001\u52a0\u8c03\u6599\uff08addFood\uff09\u4e09\u79cd\u65b9\u6cd5\u3002\u5047\u5b9a\u6211\u4eec\u6709\u725b\u8089\u9762\u7c7b\uff08BeefNoodles\uff09\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u7ee7\u627fNoodles\u5373\u53ef\u3002</p> <p>\u4f46\u662f\u7ee7\u627f\u7684\u201c\u8026\u5408\u5ea6\u201d\u592a\u9ad8\uff0c\u5047\u8bbe\u9762\u7c7b\uff08Noodles\uff09\u4e2d\u65b0\u6dfb\u52a0\u4e00\u4e2apack\uff08\u6253\u5305\uff09\u65b9\u6cd5\uff0c\u90a3\u4e48\u5b50\u7c7b\u90fd\u9700\u8981\u91cd\u5199pack\u3002\u8fd9\u8fdd\u80cc\u4e86\u5f00\u95ed\u539f\u5219\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u7d20\u9762\u7c7b\uff08OnlyNoodles\uff09\uff0c\u7d20\u9762\u7684\u505a\u6cd5\u6ca1\u6709\u52a0\u8c03\u6599\uff08addFood\uff09\u8fd9\u4e2a\u65b9\u6cd5\u3002\u90a3\u4e48\u7d20\u9762\u7c7b\u663e\u7136\u4e0d\u80fd\u7ee7\u627fNoodles\u7c7b\u3002</p> <p>\u89e3\u51b3\u601d\u8def\uff1a</p> <ol> <li>\u5c06Noodles\u7c7b\u62c6\u5f00\uff0c\u9488\u5bf9\u6bcf\u4e00\u7c7b\u6b65\u9aa4\u90fd\u521b\u5efa\u4e00\u4e2a\u63a5\u53e3\uff08interface\uff09\u3002\u6bd4\u5982\u5305\u542b\u56db\u79cd\u65b9\u6cd5\u7684Noodles\u7c7b\u53ef\u4ee5\u62c6\u5206\u6210\u4ee5\u4e0b\u63a5\u53e3\uff1aIBoil\u3001IPutNoodles\u3001IAddFood\u3001IPack\uff0c\u6bcf\u4e2a\u63a5\u53e3\u4e2d\u5305\u542b\u4e00\u4e2a\u65b9\u6cd5\u3002\u90a3\u4e48\u4e0a\u8ff0\u6848\u4f8b\u4e2d\uff0c\u7d20\u9762\u7c7b\u53ea\u9700\u8981\u5305\u542bIBoil\u3001IPutNoodles\u3001IPack\u63a5\u53e3\u7684\u5177\u4f53\u5b9e\u73b0\u7c7b\u7684\u5bf9\u8c61\u5373\u53ef\u3002\u725b\u8089\u9762\u7c7b\u9700\u8981\u5305\u542bIBoil\u3001IPutNoodles\u3001IAddFood\u3001IPack\u63a5\u53e3\u7684\u5bf9\u8c61\u3002</li> <li>\u67d0\u4e2a\u63a5\u53e3\uff08\u4f8b\u5982IAddFood\uff09\u53ef\u80fd\u6709\u4e0d\u540c\u7684\u7c7b\uff08\u6bd4\u5982AddBeef\u3001AddChicken\u7c7b\uff09\u3002</li> </ol> <p>\u7b56\u7565\u6a21\u5f0f\u7684\u6838\u5fc3\uff1a\u5c06\u7236\u7c7b\u62c6\u5206\u4e3a\u591a\u4e2a\u63a5\u53e3\uff0c\u901a\u5e38\u4e00\u4e2a\u63a5\u53e3\u5305\u542b\u4e00\u4e2a\u51fd\u6570\uff0c\u4e5f\u5373\u4e00\u4e2a\u63a5\u53e3\u5b9e\u73b0\u4e00\u79cd\u529f\u80fd\u3002\u518d\u7528\u4e0d\u540c\u7684\u7b56\u7565\u7c7b\u5b9e\u73b0\uff08implements\uff09\u6bcf\u4e00\u4e2a\u63a5\u53e3\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/#_3","title":"\u7c7b\u56fe","text":""},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/#_4","title":"\u4ee3\u7801","text":"<p>IAddFood\u63a5\u53e3</p> <pre><code>package com.lee.designpattern.Strategy;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic interface IAddFood {\n    void work();\n}\n</code></pre> <p>IAddNoodles\u63a5\u53e3</p> <pre><code>package com.lee.designpattern.Strategy;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic interface IAddNoodles {\n    void work();\n}\n</code></pre> <p>IBoilWater\u63a5\u53e3</p> <pre><code>package com.lee.designpattern.Strategy;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic interface IBoilWater {\n    default void work() {\n        System.out.println(\"\u70e7\u6c34\");\n    }\n}\n</code></pre> <p>IPackNoodles\u63a5\u53e3</p> <pre><code>package com.lee.designpattern.Strategy;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic interface IPackNoodles {\n    default void work() {\n        System.out.println(\"\u6253\u5305\");\n    }\n}\n</code></pre> <p>AddBeef.java</p> <pre><code>package com.lee.designpattern.Strategy;\n\npublic class AddBeef implements IAddFood {\n    @Override\n    public void work() {\n        System.out.println(\"\u6dfb\u52a0\u725b\u8089\");\n    }\n}\n</code></pre> <p>AddChicken.java</p> <pre><code>package com.lee.designpattern.Strategy;\n\npublic class AddChicken implements IAddFood {\n    @Override\n    public void work() {\n        System.out.println(\"\u6dfb\u52a0\u9e21\u8089\");\n    }\n}\n</code></pre> <p>AddThinNoodles.java</p> <pre><code>package com.lee.designpattern.Strategy;\n\npublic class AddThinNoodles implements IAddNoodles {\n    @Override\n    public void work() {\n        System.out.println(\"\u6dfb\u52a0\u5bbd\u9762\");\n    }\n}\n</code></pre> <p>AddWideNoodles.java</p> <pre><code>package com.lee.designpattern.Strategy;\n\npublic class AddWideNoodels implements IAddNoodles {\n    @Override\n    public void work() {\n        System.out.println(\"\u6dfb\u52a0\u7ec6\u9762\");\n    }\n}\n</code></pre> <p>BeefNoodles.java</p> <pre><code>package com.lee.designpattern.Strategy;\n\npublic class BeefNoodles {\n    private IBoilWater boilWater = new IBoilWater() {\n        @Override\n        public void work() {\n            IBoilWater.super.work();\n        }\n    };\n\n    private IAddNoodles addNoodles = new AddWideNoodels();\n\n    private IAddFood addFood = new AddBeef();\n\n    private IPackNoodles packNoodles = new IPackNoodles() {\n        @Override\n        public void work() {\n            IPackNoodles.super.work();\n        }\n    };\n\n    // \u91c7\u7528\u5916\u89c2\u6a21\u5f0f\uff0c\u5c06\u505a\u9762\u7684\u8fc7\u7a0b\u901a\u8fc7makeNoodles\u51fd\u6570\u5bf9\u5916\u66b4\u9732\n    public void makeNoodles() {\n        boilWater.work();\n        addNoodles.work();\n        addFood.work();\n        packNoodles.work();\n    }\n}\n</code></pre> <p>Client.java</p> <pre><code>package com.lee.designpattern.Strategy;\n\npublic class Client {\n    public static void main(String[] args) {\n        BeefNoodles beefNoodles = new BeefNoodles();\n        beefNoodles.makeNoodles();\n    }\n}\n</code></pre>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/","title":"\u7b80\u5355\u5de5\u5382\u6a21\u5f0f","text":"<p>[toc]</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/#_2","title":"\u4ec0\u4e48\u662f\u7b80\u5355\u5de5\u5382","text":"<p>\u5047\u5b9a\u6709\u4e00\u4e2a\u5de5\u5382\u7c7b\uff0c\u5f53\u6211\u4eec\u60f3\u8981\u521b\u5efa\u5bf9\u8c61\u65f6\uff0c\u53ea\u9700\u8981\u5c06\u53c2\u6570\u4f20\u9012\u7ed9\u5de5\u5382\u5bf9\u8c61\uff0c\u7136\u540e\u901a\u8fc7\u5de5\u5382\u5bf9\u8c61\u5c31\u80fd\u83b7\u5f97\u6211\u4eec\u60f3\u8981\u7684\u5bf9\u8c61\u4e86\u3002</p> <p>\u6709\u70b9\u62bd\u8c61\u4e86\uff0c\u6362\u4e2a\u751f\u6d3b\u4e2d\u7684\u4f8b\u5b50\u5427\u3002\u5047\u5b9a\u6709\u4e00\u4e2a\u5c0f\u9f99\u9762\u9986\uff0c\u4f60\u548c\u670b\u53cb\u8fdb\u53bb\u5403\u996d\u3002\u4f60\u60f3\u5403\u9e21\u8089\u9762\uff0cTa\u60f3\u5403\u725b\u8089\u9762\uff0c\u4f60\u4eec\u53ea\u9700\u8981\u628a\u60f3\u5403\u7684\u4e1c\u897f\u544a\u8bc9\u8001\u677f\uff08\u628a\u53c2\u6570\u4f20\u5165\u5de5\u5382\u5bf9\u8c61\uff09\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u62ff\u5230\u60f3\u8981\u7684\u98df\u7269\u4e86\uff08\u83b7\u5f97\u60f3\u8981\u7684\u5bf9\u8c61\u4e86\uff09\u3002</p> <p>\u901a\u5e38\u6765\u8bf4\uff0c\u5de5\u5382\u4ea7\u751f\u7684\u5bf9\u8c61\u90fd\u8981\u5b9e\u73b0\uff08implements\uff09\u67d0\u4e00\u4e2a\u63a5\u53e3\u6216\u7ee7\u627f\uff08extends\uff09\u67d0\u4e00\u4e2a\u62bd\u8c61\u7c7b\uff0c\u8fd9\u6837\u53ef\u4ee5\u63d0\u9ad8\u7a0b\u5e8f\u7684\u53ef\u7ef4\u62a4\u6027\u3002\u5c31\u62ff\u4e0a\u9762\u90a3\u4e2a\u4f8b\u5b50\u6765\u8bf4\uff0c\u5728\u5b9e\u9645\u7f16\u7a0b\u4e2d\uff0c\u9e21\u8089\u9762\u7c7b\u548c\u725b\u8089\u9762\u7c7b\u90fd\u9700\u8981\u5b9e\u73b0Noodles\u63a5\u53e3\uff08\u4e5f\u53ef\u4ee5\u8d77\u5176\u4ed6\u540d\u5b57\uff09\u3002</p> <p>\u7b80\u5355\u5de5\u5382\u6a21\u5f0f\u4e2d\u6709\u4e24\u4e2a\u7c7b\uff1a\u5177\u4f53\u5de5\u5382\u7c7b\u548c\u5177\u4f53\u4ea7\u54c1\u7c7b\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/#_3","title":"\u91cd\u8981\u6982\u5ff5","text":"<p>\u5177\u4f53\u5de5\u5382</p> <p>\u62bd\u8c61\u4ea7\u54c1</p> <p>\u5177\u4f53\u4ea7\u54c1</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/#_4","title":"\u7c7b\u56fe","text":""},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/#_5","title":"\u4ee3\u7801\u5b9e\u73b0","text":"<p>\u62bd\u8c61\u4ea7\u54c1</p> <pre><code>package com.lee.designpattern.SimpleFactory;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic interface Noodles {\n    void addWater();\n    void boilWater();\n    void putNoodles();\n    void addIngredient();\n}\n</code></pre> <p>\u5177\u4f53\u4ea7\u54c1</p> <pre><code>package com.lee.designpattern.SimpleFactory;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class NoodlesBeef implements Noodles {\n    @Override\n    public void addWater() {\n        System.out.println(\"\u52a0\u6c34\");\n    }\n\n    @Override\n    public void boilWater() {\n        System.out.println(\"\u70e7\u6c34\");\n    }\n\n    @Override\n    public void putNoodles() {\n        System.out.println(\"\u653e\u5165\u9762\u6761\");\n    }\n\n    @Override\n    public void addIngredient() {\n        System.out.println(\"\u52a0\u725b\u8089\");\n    }\n}\n</code></pre> <pre><code>package com.lee.designpattern.SimpleFactory;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class NoodlesChicken implements Noodles {\n    @Override\n    public void addWater() {\n        System.out.println(\"\u52a0\u6c34\");\n    }\n\n    @Override\n    public void boilWater() {\n        System.out.println(\"\u70e7\u6c34\");\n    }\n\n    @Override\n    public void putNoodles() {\n        System.out.println(\"\u653e\u5165\u9762\u6761\");\n    }\n\n    @Override\n    public void addIngredient() {\n        System.out.println(\"\u52a0\u9e21\u8089\");\n    }\n}\n</code></pre> <p>\u62bd\u8c61\u5de5\u5382</p> <pre><code>package com.lee.designpattern.SimpleFactory;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class LongFactory {\n    public Noodles createFood(Class&lt;?&gt; clazz) {\n        Noodles noodles;\n        if (clazz == NoodlesChicken.class) {\n            noodles = new NoodlesChicken();\n            noodles.addWater();\n            noodles.boilWater();\n            noodles.putNoodles();\n            noodles.addIngredient();\n            return noodles;\n        }\n        else if (clazz == NoodlesBeef.class) {\n            noodles = new NoodlesBeef();\n            noodles.addWater();\n            noodles.boilWater();\n            noodles.putNoodles();\n            noodles.addIngredient();\n            return noodles;\n        }\n        else {\n            return null;\n        }\n    }\n}\n</code></pre> <p>\u4e3b\u7c7b\uff1a\u7528\u4e8e\u6f14\u793a\u6848\u4f8b</p> <pre><code>package com.lee.designpattern.SimpleFactory;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class Main {\n    public static void main(String[] args) {\n        LongFactory longFactory = new LongFactory();\n\n        System.out.println(\"\u5c0f\u660e\u60f3\u5403\u9e21\u8089\u9762...\");\n        Noodles chickenNoodles = longFactory.createFood(NoodlesChicken.class);\n\n        System.out.println(\"\u5c0f\u7ea2\u60f3\u5403\u725b\u8089\u9762...\");\n        Noodles beefNoodles = longFactory.createFood(NoodlesBeef.class);\n    }\n}\n</code></pre>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F/#_6","title":"\u5f0a\u7aef","text":"<p>\u4e0d\u6ee1\u8db3\u201c\u5f00\u95ed\u539f\u5219\u201d\uff08\u5bf9\u62d3\u5c55\u5f00\u653e\uff0c\u5bf9\u4fee\u6539\u5173\u95ed\uff09\u3002\u5047\u5b9a\u6653\u9f99\u9762\u9986\u8981\u65b0\u589e\u4e00\u7c7b\u732a\u8089\u9762\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u4fee\u6539<code>LongFactory</code>\u4e2d\u7684\u4ee3\u7801\uff0c\u4ee3\u7801\u5927\u81f4\u5982\u4e0b\uff1a</p> <pre><code>\n</code></pre> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u6211\u4eec\u5728\u5de5\u5382\u7c7b\uff08LongFactory\uff09\u4e2d\u65b0\u589e\u4e86\u4e00\u4e2aif\u5224\u65ad\u6761\u4ef6\uff0c\u8fd9\u4e0d\u6ee1\u8db3\u201c\u5f00\u95ed\u539f\u5219\u201d\u3002\u90a3\u4e48\u8be5\u600e\u4e48\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5462\uff1f\u8fd9\u9700\u8981\u4f7f\u7528\u5de5\u5382\u6a21\u5f0f\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F/","title":"\u88c5\u9970\u8005\u6a21\u5f0f","text":"<p>[toc]</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F/#_2","title":"\u4e3a\u4ec0\u4e48","text":"<p>\u5047\u5b9a\u6709\u8fd9\u6837\u7684\u573a\u666f\uff1a</p> <p>\u6653\u9f99\u9762\u9986\u63d0\u4f9b\u5f88\u591a\u79cd\u9762\u6761\uff0c\u725b\u8089\u9762\u3001\u9e21\u8089\u9762......\u6211\u4eec\u53ef\u4ee5\u5c06\u573a\u666f\u62bd\u8c61\u4e3a\u8fd9\u51e0\u4e2a\u89d2\u8272\u3002</p> <ol> <li>\u9762\u6761\u62bd\u8c61\u7c7b\uff1a\u5b9a\u4e49\u9762\u6761\u7c7b\u6709\u54ea\u4e9b\u65b9\u6cd5\u3002</li> <li>\u9762\u6761\u5177\u4f53\u7c7b\uff1a\u6bd4\u5982\u6709\u7ec6\u9762\u7c7b\u3001\u5bbd\u9762\u7c7b\u3001\u6c34\u9762\u7c7b......</li> <li>\u914d\u83dc\u62bd\u8c61\u7c7b\uff1a\u5b9a\u4e49\u914d\u83dc\u7c7b\u6709\u54ea\u4e9b\u65b9\u6cd5\u3002</li> <li>\u914d\u83dc\u5177\u4f53\u7c7b\uff1a\u6bd4\u5982\u6709\u725b\u8089\u3001\u9e21\u8089......</li> </ol> <p>\u4e0a\u8ff0\u6848\u4f8b\u4e2d\uff0c\u9762\u6761\u662f\u88ab\u88c5\u9970\u8005\uff0c\u914d\u83dc\u662f\u88c5\u9970\u8005\u3002\u6211\u4eec\u7ed9\u9762\u6761\u7c7b\u6dfb\u52a0\u4e24\u4e2a\u65b9\u6cd5\uff1a<code>getCost</code>\u548c<code>getDescription</code>\uff0c\u5206\u522b\u83b7\u53d6\u4e00\u4e2a\u9762\u6761\u5bf9\u8c61\u7684\u4ef7\u683c\u548c\u8be5\u9762\u6761\u5bf9\u8c61\u7684\u9644\u52a0\u4fe1\u606f\u3002\u7136\u540e\u6211\u4eec\u5b9e\u4f8b\u5316\u4e00\u4e2a\u9762\u6761\u5bf9\u8c61\uff0c\u5e76\u4e14\u7ed9\u8be5\u9762\u6761\u5bf9\u8c61\u52a8\u6001\u7684\u6dfb\u52a0\u5404\u79cd\u914d\u83dc\uff0c\u6bd4\u5982\u6dfb\u52a0\u4e24\u4efd\u725b\u8089\uff0c\u4e00\u4efd\u9e21\u8089\u3002\u6700\u540e\u8c03\u7528\u9762\u6761\u5bf9\u8c61\u7684<code>getCost</code>\u548c<code>getFood</code>\u65b9\u6cd5\u5c31\u80fd\u83b7\u53d6\u8be5\u9762\u6761\u5bf9\u8c61\u7684\u6240\u6709\u4fe1\u606f\u3002</p> <p>\u8fd9\u79cd\u60c5\u51b5\u4e0b\u9700\u8981\u4f7f\u7528\u88c5\u9970\u8005\u6a21\u5f0f\u3002</p> <p>\u88c5\u9970\u8005\u6a21\u5f0f\u7684\u6838\u5fc3\uff1a\u5c06\u8d23\u4efb\uff08\u914d\u83dc\uff09\u52a8\u6001\u7684\u9644\u52a0\u5728\u5bf9\u8c61\uff08\u9762\u6761\uff09\u4e0a\u3002</p> <p>\u5199\u4ee3\u7801\u65f6\u6ce8\u610f\u4ee5\u4e0b\u95ee\u9898\uff1a</p> <ol> <li>\u914d\u83dc\u62bd\u8c61\u7c7b\u7ee7\u627f\u9762\u6761\u62bd\u8c61\u7c7b\u3002\u8fd9\u770b\u4e0a\u53bb\u6709\u70b9\u602a\u3002\u5176\u76ee\u7684\u662f\u8ba9\u914d\u83dc\u6210\u4e3a\u9762\u6761\uff0c\u540c\u65f6\u914d\u83dc\u7c7b\u4e2d\u6709\u4e2a\u9762\u6761\u5bf9\u8c61\u3002\u8fd9\u6837\u5c31\u80fd\u8ba9\u4e00\u4e2a\u9762\u6761\u5bf9\u8c61\u5d4c\u5957\u82e5\u5e72\u914d\u83dc\u3002\u5982\u4ee3\u7801\u6240\u793a\uff1a</li> </ol> <p><code>java    // \u521b\u5efa\u9762\u6761\u5bf9\u8c61    Noodles noodles = new ThinNoodles();    // \u8ba9beef\u5bf9\u8c61\u5305\u88f9\u4e0a\u4e00\u4e2anoodles\u5bf9\u8c61\uff0c\u5f62\u6210\u4e00\u4e2a\u65b0\u7684noodles\u5bf9\u8c61    noodles = new Beef(noodles);    // \u7ee7\u7eed\u8ba9beef\u5bf9\u8c61\u5305\u88f9\u4e0a\u4e00\u4e2anoodles\u5bf9\u8c61    noodles = new Beef(noodles);    // \u4ee5\u6b64\u7c7b\u63a8......    noodles = new Chicken(noodles);    System.out.println(\"cost:\" + noodles.getCost());    System.out.println(\"description:\" + noodles.getDescription());</code></p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F/#_3","title":"\u7c7b\u56fe","text":""},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A3%85%E9%A5%B0%E8%80%85%E6%A8%A1%E5%BC%8F/#_4","title":"\u4ee3\u7801","text":"<p>Noodles.java</p> <pre><code>package com.lee.designpattern.Decorator;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic abstract class Noodles {\n    protected double cost = 0;\n    protected String description = \"\u672a\u77e5\u9762\u6761\";\n    abstract public double getCost();\n    abstract public String getDescription();\n}\n</code></pre> <p>ThinNoodles</p> <pre><code>package com.lee.designpattern.Decorator;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class ThinNoodles extends Noodles {\n    protected double cost = 12;\n    protected String description = \"\u7ec6\u9762\";\n    @Override\n    public double getCost() {\n        return this.cost;\n    }\n\n    @Override\n    public String getDescription() {\n        return this.description;\n    }\n}\n</code></pre> <p>WideNoodles</p> <pre><code>package com.lee.designpattern.Decorator;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class WideNoodles extends Noodles {\n    protected double cost = 10;\n    protected String description = \"\u5bbd\u9762\";\n    @Override\n    public double getCost() {\n        return this.cost;\n    }\n\n    @Override\n    public String getDescription() {\n        return this.description;\n    }\n}\n</code></pre> <p>Food.java</p> <pre><code>package com.lee.designpattern.Decorator;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic abstract class Food extends Noodles {\n    /**\n     * \u88ab\u5305\u88c5\u7684\u5bf9\u8c61\n     */\n    Noodles noodles;\n    @Override\n    abstract public double getCost();\n\n    @Override\n    abstract public String getDescription();\n}\n</code></pre> <p>Beef.java</p> <pre><code>package com.lee.designpattern.Decorator;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class Beef extends Food {\n    private double cost = 8;\n    private String description = \" \u52a0\u725b\u8089\";\n    Beef(Noodles noodles) {\n        this.noodles = noodles;\n    }\n    @Override\n    public double getCost() {\n        return noodles.getCost() + this.cost;\n    }\n\n    @Override\n    public String getDescription() {\n        return noodles.getDescription() + this.description;\n    }\n}\n</code></pre> <p>Chicken.java</p> <pre><code>package com.lee.designpattern.Decorator;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class Chicken extends Food {\n    private double cost = 6;\n    private String description = \" \u52a0\u9e21\u8089\";\n    Chicken(Noodles noodles) {\n        this.noodles = noodles;\n    }\n    @Override\n    public double getCost() {\n        return noodles.getCost() + this.cost;\n    }\n\n    @Override\n    public String getDescription() {\n        return noodles.getDescription() + this.description;\n    }\n}\n</code></pre>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/","title":"\u89c2\u5bdf\u8005\u6a21\u5f0f","text":"<p>[toc]</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/#_2","title":"\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u89c2\u5bdf\u8005\u6a21\u5f0f","text":"<p>\u5b58\u5728\u4e24\u4e2a\u89d2\u8272\uff1a\u53d1\u5e03\u8005\u548c\u8ba2\u9605\u8005\u3002\u53d1\u5e03\u8005\u53d1\u5e03\u6d88\u606f\u540e\uff0c\u8ba2\u9605\u8005\u53ef\u4ee5\u53ca\u65f6\u6536\u5230\u6d88\u606f\u3002\u63a5\u6536\u8005\u53ef\u4ee5\u6267\u884c\u8ba2\u9605\u64cd\u4f5c\u548c\u53d6\u6d88\u8ba2\u9605\u64cd\u4f5c\uff0c\u4ece\u800c\u51b3\u5b9a\u662f\u5426\u63a5\u6536\u6d88\u606f\u3002</p> <p>\u4e3a\u4e86\u5b9e\u73b0\u4ee3\u7801\u7684\u89e3\u8026\uff0c\u6211\u4eec\u9700\u8981\u91c7\u7528\u89c2\u5bdf\u8005\u6a21\u5f0f\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/#_3","title":"\u91cd\u8981\u89d2\u8272","text":"<p>\u62bd\u8c61\u4e3b\u9898\uff1a\u4e5f\u5c31\u662f\u62bd\u8c61\u7684\u88ab\u89c2\u5bdf\u8005\u3002\u901a\u5e38\u9700\u8981\u5b9a\u4e49<code>addObserver</code>\uff0c<code>removeObserver</code>\uff0c<code>notifyObserver</code>\u65b9\u6cd5\u3002</p> <p>\u5177\u4f53\u4e3b\u9898\uff1a\u5177\u4f53\u7684\u88ab\u89c2\u5bdf\u8005\u3002\u901a\u5e38\u8fd8\u9700\u8981\u5b9a\u4e49\u89c2\u5bdf\u8005\u6570\u7ec4\uff0c\u7528\u4e8e\u5b58\u653e\u89c2\u5bdf\u8005\u3002\u540c\u65f6\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e00\u4e9b\u522b\u7684\u65b9\u6cd5\u3002</p> <p>\u62bd\u8c61\u89c2\u5bdf\u8005\uff1a\u901a\u5e38\u9700\u8981\u5b9a\u4e49<code>update</code>\u65b9\u6cd5\u3002\u5f53\u4e3b\u9898\u5bf9\u8c61\u8c03\u7528<code>notifyObserver</code>\u65f6\uff0c\u4f1a\u6328\u4e2a\u904d\u5386\u89c2\u5bdf\u8005\u6570\u7ec4\u7684\u6bcf\u4e2a\u89c2\u5bdf\u8005\uff0c\u5e76\u8c03\u7528\u5b83\u4eec\u7684update\u65b9\u6cd5\u3002</p> <p>\u5177\u4f53\u89c2\u5bdf\u8005\uff1a\u9664\u4e86update\u65b9\u6cd5\uff0c\u8fd8\u80fd\u81ea\u5b9a\u4e49\u522b\u7684\u65b9\u6cd5\u3002\u901a\u5e38\u5728\u521b\u5efa\u5177\u4f53\u89c2\u5bdf\u8005\u5bf9\u8c61\u65f6\uff0c\u5c06\u8be5\u5bf9\u8c61\u6ce8\u518c\u5230\u5177\u4f53\u4e3b\u9898\u5bf9\u8c61\u7684\u89c2\u5bdf\u8005\u6570\u7ec4\u4e2d\u3002</p> <p>\u6838\u5fc3\u95ee\u9898\uff1a\u5728\u88ab\u89c2\u5bdf\u8005\u5bf9\u8c61\u4e2d\u653e\u4e00\u4e2a\u89c2\u5bdf\u8005\u6570\u7ec4\u3002\u88ab\u89c2\u5bdf\u8005\u66f4\u65b0\u540e\u4f9d\u6b21\u904d\u5386\u89c2\u5bdf\u8005\u6570\u7ec4\u8fdb\u884c\u64cd\u4f5c\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/#_4","title":"\u7c7b\u56fe","text":""},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/#_5","title":"\u4ee3\u7801","text":"<p>Subject\u63a5\u53e3</p> <pre><code>package com.lee.designpattern.Observer;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic interface Subject {\n    public void addObserver(Observer o);\n\n    public void removeObserver(Observer o);\n\n    public void notifyObserverList();\n}\n</code></pre> <p>Observer\u63a5\u53e3</p> <pre><code>package com.lee.designpattern.Observer;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic interface Observer {\n    public void update(String paperContent);\n}\n</code></pre> <p>\u5177\u4f53\u4e3b\u9898\u7c7b</p> <pre><code>package com.lee.designpattern.Observer;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class NewsPaperOffice implements Subject {\n    private final List&lt;Observer&gt; observerList = new ArrayList&lt;&gt;();\n    String paperContent;\n    @Override\n    public void addObserver(Observer o) {\n        observerList.add(o);\n    }\n\n    @Override\n    public void removeObserver(Observer o) {\n        observerList.remove(o);\n    }\n\n    @Override\n    public void notifyObserverList() {\n        observerList.forEach(o -&gt; o.update(paperContent));\n    }\n\n    public void updateContent(String paperContent) {\n        this.paperContent = paperContent;\n        notifyObserverList();\n    }\n}\n</code></pre> <p>\u5177\u4f53\u89c2\u5bdf\u8005\u7c7b</p> <pre><code>package com.lee.designpattern.Observer;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class Person implements Observer {\n    private String paperContent;\n\n    public Person(Subject subject) {\n        subject.addObserver(this);\n    }\n\n    @Override\n    public void update(String paperContent) {\n        this.paperContent = paperContent;\n    }\n\n    public void display() {\n        System.out.println(\"paperContent: \" + paperContent);\n    }\n}\n</code></pre>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/","title":"\u8fed\u4ee3\u5668\u6a21\u5f0f","text":"<p>[toc]</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/#_2","title":"\u662f\u4ec0\u4e48","text":"<p>\u5047\u5b9a\u6211\u4eec\u60f3\u8981\u8bbf\u95ee\u4e00\u4e2a\u6570\u7ec4\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u521b\u5efa\u4e00\u4e2aIterator\u5bf9\u8c61\uff0c\u5e76\u8ba9\u8be5\u5bf9\u8c61\u5c01\u88c5\u904d\u5386\u96c6\u5408\u7684\u65b9\u5f0f\u3002\u901a\u8fc7\u8c03\u7528Iterator\u5bf9\u8c61\u7684<code>next()</code>\u51fd\u6570\uff08\u4e5f\u53ef\u4ee5\u53eb\u522b\u7684\u540d\u5b57\uff09\uff0c\u5373\u53ef\u4f9d\u6b21\u8bbf\u95ee\u6bcf\u4e00\u4e2a\u5143\u7d20\u3002</p> <p>\u542c\u4e0a\u53bb\u771f\u662f\u8d39\u65f6\u8d39\u529b\uff0c\u4e3a\u5565\u4e0d\u76f4\u63a5\u901a\u8fc7\u4e0b\u6807\u7684\u65b9\u5f0f\u8bbf\u95ee\u5143\u7d20\u5462\uff1f\u786e\u5b9e\uff01\u4e0a\u8ff0\u6848\u4f8b\u4e2d\u53ef\u4ee5\u76f4\u63a5\u7528\u4e0b\u6807\u8bbf\u95ee\u5143\u7d20\u3002\u4f46\u662f\u4ee5\u4e0b\u6848\u4f8b\u6709\u5fc5\u8981\u4f7f\u7528iterator\u5bf9\u8c61\u8bbf\u95ee\u96c6\u5408\u4e2d\u7684\u5143\u7d20\u3002</p> <p>\u6848\u4f8b1\uff1a\u6211\u4eec\u90fd\u77e5\u9053\uff0cTreeSet\u548cTreeMap\u662f\u4e00\u4e2a\u7c7b\u4f3c\u5e73\u8861\u6811\u7684\u7ed3\u6784\u3002\u6211\u4eec\u6ca1\u6cd5\u901a\u8fc7\u4e0b\u6807\u7684\u65b9\u5f0f\u8bbf\u95ee\u5143\u7d20\u3002\u8fd9\u65f6\u6211\u4eec\u4fbf\u53ef\u4ee5\u5c06\u904d\u5386\u5e73\u8861\u6811\u7684\u65b9\u5f0f\u5c01\u88c5\u5230Iterator\u5bf9\u8c61\u4e2d\uff0c\u901a\u8fc7\u8c03\u7528\u8be5\u5bf9\u8c61\u7684hasNext\u51fd\u6570\uff0c\u5373\u53ef\u4f9d\u6b21\u8bbf\u95ee\u5143\u7d20\u3002</p> <p>\u6848\u4f8b2\uff1a\u5047\u5b9a\u6709\u4e24\u4e2a\u9910\u5385\u7c7b\uff0c<code>KenDeJiRoom</code>\u548c<code>XiangCunJiRoom</code>\u3002\u8fd9\u4e24\u4e2a\u7c7b\u4e2d\u5206\u522b\u6709\u4e00\u4e2a\u83dc\u5355\u6570\u7ec4\uff0c\u5176\u4e2d<code>kenDeJiRoom</code>\u7528\u666e\u901a\u6570\u7ec4\u5b9e\u73b0\u83dc\u5355\uff0c\u800c<code>XiangCunJiRoom</code>\u7528<code>ArrayList</code>\u5b9e\u73b0\u83dc\u5355\u3002\u6709\u4e00\u5929\uff0c\u8fd9\u4e24\u4e2a\u9910\u5385\u51b3\u5b9a\u5408\u5e76\u4e3a<code>JiRoom</code>\uff0c\u5408\u5e76\u540e\u4ed6\u4eec\u7684\u83dc\u5355\u5f53\u7136\u4e5f\u5f97\u5408\u5728\u4e00\u8d77\u3002\u4f46\u662f\u4e24\u4e2a\u7c7b\u4e92\u4e0d\u76f8\u8ba9\uff0c\u5b83\u4eec\u90fd\u575a\u6301\u4f7f\u7528\u81ea\u5df1\u7684\u65b9\u5f0f\u5b9e\u73b0\u83dc\u5355\uff08\u56e0\u4e3a\u4e00\u65e6\u8fc1\u5c31\u5bf9\u65b9\uff0c\u4fbf\u4f1a\u5927\u91cf\u4fee\u6539\u81ea\u5df1\u539f\u5148\u7684\u4ee3\u7801\uff09\u3002\u6b64\u65f6\u6211\u4eec\u4fbf\u9700\u8981\u5c06<code>JiRoom</code>\u7684\u904d\u5386\u65b9\u5f0f\u63d0\u4f9b\u7ed9Iterator\uff0c\u6211\u4eec\u901a\u8fc7Iterator\u5bf9\u8c61\u7684<code>next()</code>\u51fd\u6570\u5373\u53ef\u83b7\u5f97\u4e0b\u4e00\u4e2a\u5143\u7d20\u3002</p> <p>\u603b\u800c\u8a00\u4e4b\uff0c\u8fed\u4ee3\u5668\u6a21\u5f0f\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u987a\u5e8f/\u9006\u5e8f\u904d\u5386\u96c6\u5408\u7684API\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/#_3","title":"\u4e3b\u8981\u89d2\u8272","text":"<p>\u96c6\u5408\uff1a</p> <p>\u200b   \u62bd\u8c61\u96c6\u5408\u63a5\u53e3\uff1a\u5b9a\u4e49\u6570\u636e\u7ed3\u6784\u7684\u89c4\u8303\u3002</p> <p>\u200b   \u5177\u4f53\u96c6\u5408\u7c7b\uff1a\u5b9a\u4e49\u6570\u636e\u7684\u7ed3\u6784\u3002\u5305\u542b\u8fed\u4ee3\u5668\u5bf9\u8c61\u3002</p> <p>\u8fed\u4ee3\u5668\uff1a</p> <p>\u200b   \u62bd\u8c61\u8fed\u4ee3\u5668\u63a5\u53e3\uff1a\u5b9a\u4e49\u904d\u5386\u96c6\u5408\u7684\u89c4\u8303\u3002</p> <p>\u200b   \u5177\u4f53\u8fed\u4ee3\u5668\u7c7b\uff1a\u5c01\u88c5\u904d\u5386\u96c6\u5408\u7684\u65b9\u6cd5\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/#_4","title":"\u4ee3\u7801","text":""},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/","title":"\u9002\u914d\u5668\u6a21\u5f0f","text":"<p>[toc]</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/#_2","title":"\u4e3a\u4ec0\u4e48","text":"<p>\u5f53\u6211\u4eec\u60f3\u8981\u4f7f\u7528\u67d0\u4e2a\u7c7b\uff08\u88ab\u9002\u914d\u7c7b\uff09\uff0c\u4f46\u662f\u8be5\u7c7b\u4e0e\u5f53\u524d\u9879\u76ee\u4e0d\u80fd\u5b8c\u5168\u517c\u5bb9\u3002\u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u9002\u914d\u5668\u7c7b\u3002\u901a\u8fc7\u4f7f\u7528\u9002\u914d\u5668\u7c7b\uff0c\u8fbe\u5230\u4f7f\u7528\u88ab\u9002\u914d\u7c7b\u7684\u6548\u679c\u3002\u6574\u4e2a\u8fc7\u7a0b\u9700\u8981\u91c7\u7528\u9002\u914d\u5668\u6a21\u5f0f\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/#_3","title":"\u7c7b\u56fe","text":""},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/#_4","title":"\u4ec0\u4e48\u65f6\u5019\u4f7f\u7528","text":"<p>\u901a\u5e38\u4e00\u4e2a\u7c7b\u7ecf\u8fc7\u591a\u6b21\u6d4b\u8bd5\uff0c\u786e\u4fdd\u7a33\u5b9a\u6027\u8f83\u9ad8\u4e4b\u540e\uff0c\u624d\u7528\u88ab\u4f7f\u7528\u3002\u5f53\u6211\u4eec\u62ff\u5230\u8fd9\u4e2a\u7c7b\u65f6\uff0c\u53ef\u80fd\u5e76\u4e0d\u80fd\u5b8c\u5168\u9002\u7528\u4e8e\u6211\u4eec\u7684\u9879\u76ee\uff0c\u4f46\u662f\u7ecf\u8fc7\u9002\u914d\u5668\u7684\u5c01\u88c5\u5c31\u80fd\u9002\u7528\u4e8e\u5f53\u524d\u9879\u76ee\u3002\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u5982\u679c\u51fa\u73b0BUG\uff0c\u5219\u5927\u6982\u7387\u662f\u6211\u81ea\u5df1\u5199\u7684\u4ee3\u7801\u6709\u95ee\u9898\uff0c\u800c\u4e0d\u662f\u522b\u4eba\u6d4b\u8bd5\u8fc7\u7684\u7c7b\u51fa\u73b0\u95ee\u9898\u3002\u8fd9\u6837\u7b80\u5316\u4e86\u6392\u9519\u6210\u672c\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/#_5","title":"\u4e3b\u8981\u89d2\u8272","text":"<p>\u88ab\u9002\u914d\u7c7b\uff08Adaptee\uff09\uff1a\u6211\u4eec\u9700\u8981\u4f7f\u7528\u7684\u7c7b\uff0c\u901a\u5e38\u8fd9\u4e2a\u7c7b\u4e0d\u517c\u5bb9\u6211\u4eec\u5f53\u524d\u7684\u9879\u76ee\u3002</p> <p>\u9002\u914d\u5668\u7c7b\uff08Adapter\uff09\uff1aAdaptee\u7ecf\u8fc7\u5c01\u88c5\uff0c\u80fd\u591f\u9002\u7528\u4e8e\u5f53\u524d\u9879\u76ee\u7684\u7c7b\u3002</p> <p>\u76ee\u6807\u63a5\u53e3\uff08Target\uff09\uff1a\u5b9a\u4e49\u4e86\u9002\u914d\u5668\u7684\u89c4\u8303\uff0c\u6240\u6709\u9002\u914d\u5668\u7c7b\u90fd\u8981implements\u8fd9\u4e2a\u63a5\u53e3\u3002</p> <p>\u5ba2\u6237\uff1a\u53d1\u51fa\u8bf7\u6c42\u7684\u4eba\u3002\u5b83\u76f4\u63a5\u4f7f\u7528\u9002\u914d\u5668\u7c7b\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/#_6","title":"\u5b9e\u9645\u4ee3\u7801","text":"<p>IDataBase\uff1a\u5b9a\u4e49\u4e86\u64cd\u4f5c\u6570\u636e\u5e93\u7684\u89c4\u8303</p> <pre><code>package com.lee.designpattern.Adapter;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic interface IDataBase {\n    void connect();\n    void query(String query);\n    void disconnect();\n}\n</code></pre> <p>Client\uff1a\u64cd\u4f5c\u6570\u636e\u5e93</p> <pre><code>package com.lee.designpattern.Adapter;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class Client {\n    public static void main(String[] args) {\n        IDataBase dataBase = new MysqlDataBaseAdapter();\n        dataBase.connect();\n        dataBase.query(\"\\\"\u6653\u9f99\\\"\");\n        dataBase.disconnect();\n\n        dataBase = new OracleDataBaseAdapter();\n        dataBase.connect();\n        dataBase.query(\"\\\"longcoding\\\"\");\n        dataBase.disconnect();\n    }\n}\n</code></pre> <p>MysqlDataBase\uff1a\u7b2c\u4e09\u65b9\u4ee3\u7801\uff0c\u7528\u4e8e\u64cd\u4f5cMySQL\u6570\u636e\u5e93\u3002</p> <pre><code>package com.lee.designpattern.Adapter;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class MysqlDataBase {\n    void connectMysql() {\n        System.out.println(\"\u8fde\u63a5Mysql\u6570\u636e\u5e93\");\n    }\n\n    void queryMysql(String query) {\n        System.out.println(\"\u67e5\u8be2Mysql\u6570\u636e\u5e93\uff0c\u67e5\u8be2\u5185\u5bb9\uff1a\" + query);\n    }\n\n    void disconnectMysql() {\n        System.out.println(\"\u65ad\u5f00Mysql\u6570\u636e\u5e93\");\n    }\n}\n</code></pre> <p>MysqlDataBaseAdapter\uff1a\u7a0b\u5e8f\u5458\u7f16\u5199\u7684\u7528\u4e8e\u5c06\u7b2c\u4e09\u65b9MySQL\u64cd\u4f5c\u7c7b\u9002\u914d\u5230\u8be5\u9879\u76ee\u4e2d\u3002</p> <pre><code>package com.lee.designpattern.Adapter;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class MysqlDataBaseAdapter implements IDataBase {\n    private MysqlDataBase mysqlDataBase = new MysqlDataBase();\n    @Override\n    public void connect() {\n        mysqlDataBase.connectMysql();\n    }\n\n    @Override\n    public void query(String query) {\n        mysqlDataBase.queryMysql(query);\n    }\n\n    @Override\n    public void disconnect() {\n        mysqlDataBase.disconnectMysql();\n    }\n}\n</code></pre> <p>OracleDataBase\uff1a\u7b2c\u4e09\u65b9\u4ee3\u7801\uff0c\u7528\u4e8e\u64cd\u4f5cOracle\u6570\u636e\u5e93\u3002</p> <pre><code>package com.lee.designpattern.Adapter;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class OracleDataBase {\n    void connectOracle() {\n        System.out.println(\"\u8fde\u63a5Oracle\u6570\u636e\u5e93\");\n    }\n\n    void queryOracle(String query) {\n        System.out.println(\"\u67e5\u8be2Oracle\u6570\u636e\u5e93\uff0c\u67e5\u8be2\u5185\u5bb9\uff1a\" + query);\n    }\n\n    void disconnectOracle() {\n        System.out.println(\"\u65ad\u5f00Oracle\u6570\u636e\u5e93\");\n    }\n}\n</code></pre> <p>OracleDataBaseAdapter\uff1a\u7a0b\u5e8f\u5458\u7f16\u5199\u7684\u7528\u4e8e\u5c06\u7b2c\u4e09\u65b9Oracle\u64cd\u4f5c\u7c7b\u9002\u914d\u5230\u8be5\u9879\u76ee\u4e2d\u3002</p> <pre><code>package com.lee.designpattern.Adapter;\n\n/**\n * @author \u6653\u9f99coding\n */\npublic class OracleDataBaseAdapter implements IDataBase {\n    private OracleDataBase oracleDataBase = new OracleDataBase();\n    @Override\n    public void connect() {\n        oracleDataBase.connectOracle();\n    }\n\n    @Override\n    public void query(String query) {\n        oracleDataBase.queryOracle(query);\n    }\n\n    @Override\n    public void disconnect() {\n        oracleDataBase.disconnectOracle();\n    }\n}\n</code></pre>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%99/","title":"\u9762\u5411\u5bf9\u8c61\u8bbe\u8ba1\u7684\u516d\u5927\u539f\u5219","text":"<p>[toc]</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%99/#_2","title":"\u5355\u4e00\u804c\u8d23\u539f\u5219","text":"<p>\u4e00\u4e2a\u7c7b\u505a\u597d\u4e00\u4ef6\u4e8b\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%99/#_3","title":"\u5f00\u653e\u5c01\u95ed\u539f\u5219","text":"<p>\u5bf9\u62d3\u5c55\u5f00\u653e\uff0c\u5bf9\u4fee\u6539\u5173\u95ed\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%99/#_4","title":"\u91cc\u6c0f\u66ff\u6362\u539f\u5219","text":"<p>\u5b50\u7c7b\u5bf9\u8c61\u80fd\u591f\u5b8c\u5168\u5145\u5f53\u7236\u7c7b\u5bf9\u8c61\uff0c\u8c03\u7528\u5b50\u7c7b\u7684\u67d0\u4e2a\u65b9\u6cd5\u548c\u8c03\u7528\u7236\u7c7b\u7684\u67d0\u4e2a\u65b9\u6cd5\u4ea7\u751f\u76f8\u540c\u7684\u7ed3\u679c\u3002\u540c\u65f6\u5b50\u7c7b\u8fd8\u80fd\u65b0\u589e\u65b9\u6cd5\u3002</p> <p>\u5224\u65ad\u4ee5\u4e0b\u60c5\u51b5\u662f\u5426\u6ee1\u8db3\u91cc\u6c0f\u66ff\u6362\u539f\u5219\uff1a</p> <ol> <li>\u5b50\u7c7b\u91cd\u5199\u7236\u7c7b\u7684\u65b9\u6cd5\uff1a\u4e0d\u6ee1\u8db3\u3002\u56e0\u4e3a\u8c03\u7528\u5b50\u7c7b\u7684\u65b9\u6cd5\u548c\u8c03\u7528\u7236\u7c7b\u7684\u65b9\u6cd5\u4f1a\u4ea7\u751f\u4e0d\u540c\u7684\u540e\u679c\u3002</li> </ol>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%99/#_5","title":"\u4f9d\u8d56\u5012\u7f6e\u539f\u5219","text":"<p>\u9ad8\u5c42\u7c7b\u4e0d\u4f9d\u8d56\u5e95\u5c42\u7c7b\uff0c\u800c\u662f\u8ba9\u9ad8\u5c42\u7c7b\u548c\u5e95\u5c42\u7c7b\u90fd\u4f9d\u8d56\u4e8e\u5e95\u5c42\u63a5\u53e3\u3002</p> <p>\u62bd\u8c61\u4e0d\u4f9d\u8d56\u4e8e\u7ec6\u8282\uff0c\u800c\u662f\u8ba9\u7ec6\u8282\u4f9d\u8d56\u62bd\u8c61\u3002</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u52a0\u5165\u6709\u4e00\u4e2a\u9762\u5e97\u7c7b<code>Store</code>\uff0c\u9762\u5e97\u4e2d\u67093\u4e2d\u9762\uff1a\u725b\u8089\u9762<code>BeefNoodles</code>\u7c7b\uff0c\u9e21\u8089\u9762<code>ChickenNoodles</code>\u7c7b\u548c\u732a\u8089\u9762\u7c7b<code>PorkNoodles</code>\u3002\u9762\u5e97\u7c7b\u662f\u9ad8\u5c42\u7c7b\uff0c\u9762\u7c7b\u662f\u5e95\u5c42\u7c7b\u3002\u6211\u4eec\u4e0d\u8981\u8ba9\u9762\u5e97\u7c7b\u76f4\u63a5\u4f9d\u8d56\u5e95\u5c42\u7c7b\uff0c\u800c\u662f\u8ba9\u9762\u5e97\u7c7b\u4f9d\u8d56\u62bd\u8c61\u9762\u7c7b<code>Noodles</code>\uff0c\u540c\u65f6\u8ba9\u5177\u4f53\u9762\u7c7b\u4e5f\u4f9d\u8d56\u4e8e\u62bd\u8c61\u9762\u7c7b<code>Noodles</code>\u3002</p>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%99/#_6","title":"\u63a5\u53e3\u9694\u79bb\u539f\u5219","text":"<p>\u5ba2\u6237\u7aef\u53ea\u4f9d\u8d56\u4e8e\u9700\u8981\u7684\u63a5\u53e3\uff0c\u628a\u4e0d\u9700\u8981\u7684\u63a5\u53e3\u5254\u9664\u6389\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u63a5\u53e3\u5c3d\u91cf\u7ec6\u5316\uff0c\u63a5\u53e3\u4e2d\u7684\u65b9\u6cd5\u5c3d\u91cf\u5c11\u3002</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u6211\u6709\u4e00\u4e2a\u7535\u8111\u7c7b<code>Computer</code>\uff0c\u6211\u60f3\u8ba9<code>Computer</code>\u5b9e\u73b0\u4e00\u4e2a\u6740\u6bd2\u8f6f\u4ef6\u63a5\u53e3<code>AntiVirus720</code>\uff0c\u4ee5\u4fbf\u8ba9<code>Computer</code>\u7c7b\u6709\u6740\u6bd2<code>killVirus</code>\u7684\u529f\u80fd\u3002\u4f60\u4f1a\u9009\u62e9\u5b9e\u73b0\u54ea\u4e2a\u63a5\u53e3\uff1f</p> <p>\u63a5\u53e31</p> <pre><code>interface AntiVirus720 {\n    void killVirus();\n}\n</code></pre> <p>\u63a5\u53e32</p> <pre><code>interface AntiVirus720 {\n    void killVirus();\n    void browser720();\n    void compress720();\n    void video720();\n    void game720();\n}\n</code></pre>"},{"location":"%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%85%AD%E5%A4%A7%E5%8E%9F%E5%88%99/#_7","title":"\u6700\u5c11\u77e5\u9053\u6cd5\u5219","text":""}]}